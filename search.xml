<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Chromeä¹¦ç­¾åŒæ­¥</title>
    <url>/2020/08/27/Chrome%E4%B9%A6%E7%AD%BE%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<p>æœ€è¿‘ä¸€ç›´åœ¨ç”¨è‡ªå·±çš„ç¬”è®°æœ¬å·¥ä½œï¼Œæœ‰äº›ä¹¦ç­¾æ²¡æœ‰åŒæ­¥åˆ°åŠå…¬å®¤ç”µè„‘ä¸Šï¼Œä»Šå¤©åˆšå¥½åˆ°åŠå…¬å®¤äº†ï¼Œè®¾ç½®å¥½VPNï¼Œç‚¹å‡»åŒæ­¥ï¼Œç«Ÿç„¶æ²¡æœ‰åŒæ­¥ï¼Œåç»­åˆ é™¤è´¦å·å†é‡æ–°ç™»å½•ä¹Ÿæ²¡èƒ½è§£å†³ã€‚</p>
<a id="more"></a>
<p><strong>æ‰‹åŠ¨å¤§æ³•</strong>: å°†ç¬”è®°æœ¬ç”µè„‘ä¸Šçš„bookmarksï¼ˆä¸€èˆ¬åœ¨C:\Users\username\AppData\Local\Google\Chrome\User Data\Defaultï¼‰æ‹·è´åˆ°å°å¼æœºç›¸åº”çš„æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p><strong>å¦‚ä½•æ¢å¤ä¹¦ç­¾</strong>ï¼š C:\Users\username\AppData\Local\Google\Chrome\User Data\Default è¯¥ç›®å½•ä¸‹ä¸€èˆ¬ä¼šæœ‰å‡ å¤©å‰çš„å¤‡ä»½æ–‡ä»¶bookmarks.bakï¼Œå°†å…¶é‡å‘½åä¸ºbookmarkså³å¯ã€‚</p>
<p>PSï¼šæœ€ååˆ é™¤è´¦å·ï¼Œé‡æ–°æ·»åŠ æå®šäº†ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹è¡¨æ ¼</title>
    <url>/2020/07/25/Markdown%E4%B9%8B%E8%A1%A8%E6%A0%BC/</url>
    <content><![CDATA[<h2 id="1-Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•"><a href="#1-Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•" class="headerlink" title="1. Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•"></a>1. Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"> |æ°´æœ        | ä»·æ ¼    |  æ•°é‡  |</span><br><span class="line"> |:--------   | -----:   | :----: |</span><br><span class="line">|é¦™è•‰        | $1      |   5    |</span><br><span class="line"> |è‹¹æœ        | $1      |   6    |</span><br><span class="line"> |è‰è“        | $1      |   7    |</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>æ•ˆæœï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">æ°´æœ</th>
<th style="text-align:right">ä»·æ ¼</th>
<th style="text-align:center">æ•°é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">é¦™è•‰</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:left">è‹¹æœ</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:left">è‰è“</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-HTMLè¡¨æ ¼"><a href="#2-HTMLè¡¨æ ¼" class="headerlink" title="2. HTMLè¡¨æ ¼"></a>2. HTMLè¡¨æ ¼</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">caption</span>&gt;</span>å­¦ç”Ÿæˆç»©è¡¨<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å­¦å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æœŸä¸­<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æœŸæœ«<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>001<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>88<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>002<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>96<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>97<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<th>å’Œ<td>æ ‡ç­¾éƒ½å¯ä»¥æ˜¾ç¤ºè¡¨æ ¼å•å…ƒæ ¼ã€‚ä¸åŒçš„æ˜¯<th>åœ¨å•å…ƒæ ¼ä¸­åŠ ç²—æ˜¾ç¤ºã€‚

**<th>ï¼šå®šä¹‰è¡¨æ ¼å†…çš„è¡¨å¤´å•å…ƒæ ¼ã€‚æ­¤thå…ƒç´ å†…éƒ¨çš„æ–‡æœ¬é€šå¸¸ä¼šå‘ˆç°ä¸ºç²—ä½“ã€‚**



æ•ˆæœï¼š

<table>
<caption>å­¦ç”Ÿæˆç»©è¡¨</caption>
<tr>

<th>å­¦å·</th>
<th>æœŸä¸­</th>
<th>æœŸæœ«</th>

<p>&lt;/tr&gt;</p>
<tr>

<td>001</td>
<td>88</td>
<td>90</td>

<p>&lt;/tr&gt; </p>
<tr>

<td>002</td>
<td>96</td>
<td>97</td>

<p>&lt;/tr&gt;<br>&lt;/table&gt;</p>
<h2 id="3-Excelè¡¨æ ¼"><a href="#3-Excelè¡¨æ ¼" class="headerlink" title="3. Excelè¡¨æ ¼"></a>3. Excelè¡¨æ ¼</h2><p>markdownæ”¯æŒhtmlè¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä½¿ç”¨Excelç”Ÿæˆéœ€è¦çš„è¡¨æ ¼ï¼Œå•å‡»å¦å­˜ä¸ºï¼Œé€‰æ‹©å¯¼å‡ºæ ¼å¼ä¸ºhtmlï¼Œæ­¤æ—¶å¯é€‰æ‹©æ‰€éœ€è¡¨æ ¼åŒºé—´ã€‚ä¿å­˜åæ‰“å¼€ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œå°†å…¶ä¸­<code>&lt;table&gt;&lt;/table&gt;</code> é—´çš„æ•°æ®å¤åˆ¶åˆ°markdownä¸­å³å¯ã€‚</p>
<p><strong>æ­¤æ–¹å¼å¯ä»¥åˆ›å»ºå¤æ‚çš„è¡¨æ ¼ï¼Œæ¯”å¦‚åˆå¹¶å•å…ƒæ ¼ç­‰ã€‚</strong></p>
<h2 id="4-exceltkå·¥å…·"><a href="#4-exceltkå·¥å…·" class="headerlink" title="4. exceltkå·¥å…·"></a>4. exceltkå·¥å…·</h2><p><a href="[http://fanfeilong.github.io/](http://fanfeilong.github.io/">èŒƒé£é¾™</a>)å¼€å‘çš„<a href="https://github.com/fanfeilong/exceltk" target="_blank" rel="noopener">exceltkå·¥å…·</a>ï¼Œé€šè¿‡ç®€å•çš„cmdå‘½ä»¤å³å¯æŠŠexcelè¡¨æ ¼ä¸­çš„å†…å®¹è½¬æ¢ä¸ºMarkdownæ‰€èƒ½è¯†åˆ«çš„æ ¼å¼ï¼Œç›´æ¥æŠŠè½¬æ¢åçš„mdæ ¼å¼å†…å®¹å¤åˆ¶åˆ°ç®€ä¹¦å³å¯è¾“å‡ºæœŸæœ›çš„è¡¨æ ¼æ ·å¼ã€‚</p>
<pre><code>exceltkç”¨ä¾‹
æ•´ä¸ªè¡¨æ ¼ï¼š exceltk.exe -t md -xls xxx.xls  
          exceltk.exe -t md -xls xxx.xlsx
æŒ‡å®šsheetï¼š
          exceltk.exe -t md -xls xx.xls -sheet sheetname   
          exceltk.exe -t md -xls xx.xlsx -sheet sheetnameexceltk
</code></pre><h2 id="5-åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ"><a href="#5-åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ" class="headerlink" title="5. åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ"></a>5. åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ</h2><p>â€‹      <a href="https://tableconvert.com/" target="_blank" rel="noopener">tableconvert</a>å¯ä»¥åœ¨çº¿åˆ¶ä½œè¡¨æ ¼ï¼Œå¹¶å°†å…¶è½¬ä¸ºMarkdownï¼ŒCSVï¼ŒExcelï¼ŒXMLï¼ŒHTMLç­‰æ ¼å¼ã€‚</p>
<hr>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹éšè—å†…å®¹</title>
    <url>/2020/07/25/Markdown%E4%B9%8B%E9%9A%90%E8%97%8F%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<h2 id="1-HTMLæ ‡ç­¾éšè—"><a href="#1-HTMLæ ‡ç­¾éšè—" class="headerlink" title="1. HTMLæ ‡ç­¾éšè—"></a>1. HTMLæ ‡ç­¾éšè—</h2><p>Markdownå†…åµŒhtmlè¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç”¨éšè—çš„htmlæ ‡ç­¾ã€‚</p>
<a id="more"></a>
<p><strong>æ³¨æ„ï¼šå‰é¢éœ€ç©ºä¸€è¡Œ</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">'display: none'</span>&gt;</span></span><br><span class="line">æ³¨é‡Š</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<div style='display: none'>
æ³¨é‡Š
</div>

<h2 id="2-HTMLæ³¨é‡Šéšè—"><a href="#2-HTMLæ³¨é‡Šéšè—" class="headerlink" title="2. HTMLæ³¨é‡Šéšè—"></a>2. HTMLæ³¨é‡Šéšè—</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å¤šæ®µ</span></span><br><span class="line"><span class="comment">æ³¨é‡Šï¼Œ</span></span><br><span class="line"><span class="comment">ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<!--æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚-->
<!--
å¤šæ®µ
æ³¨é‡Šï¼Œ
ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚
-->
<h2 id="3-hack-æ–¹æ³•éšè—"><a href="#3-hack-æ–¹æ³•éšè—" class="headerlink" title="3. hack æ–¹æ³•éšè—"></a>3. hack æ–¹æ³•éšè—</h2><p>hackæ–¹æ³•åˆ©ç”¨markdownçš„è§£æåŸç†æ¥å®ç°æ³¨é‡Šã€‚ä¸€èˆ¬æœ‰çš„markdownè§£æå™¨ä¸æ”¯æŒä¸Šé¢çš„æ³¨é‡Šæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨hackæ–¹æ³•ã€‚</p>
<p>hackæ–¹æ³•æ¯”ä¸Šé¢2ç§æ–¹æ³•ç¨³å®šï¼Œä½†æ˜¯è¯­ä¹‰åŒ–å¤ªå·®ã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[comment]: <span class="tag">&lt;&gt;</span> (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br><span class="line">[//]: <span class="tag">&lt;&gt;</span> (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br><span class="line">[//]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>å…¶ä¸­ï¼Œè¿™ç§æ–¹æ³•æœ€ç¨³å®šï¼Œé€‚ç”¨æ€§æœ€å¼ºï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[//]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>è¿˜å¯ä»¥ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[^_^]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<blockquote id="fn__^">
<sup>_^</sup>. # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)<a href="#reffn__^" title="Jump back to footnote [_^] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn__^">
<sup>_^</sup>. # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)<a href="#reffn__^" title="Jump back to footnote [_^] in the text."> &#8617;</a>
</blockquote>
<h2 id="4-HTMLæ ‡ç­¾æŠ˜å "><a href="#4-HTMLæ ‡ç­¾æŠ˜å " class="headerlink" title="4. HTMLæ ‡ç­¾æŠ˜å "></a>4. HTMLæ ‡ç­¾æŠ˜å </h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span><span class="tag">&lt;<span class="name">mark</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">darkred</span>&gt;</span>æ‘˜è¦<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">mark</span>&gt;</span><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> -title<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>  </span><br><span class="line">   éšè—ä»£ç å—</span><br><span class="line">  <span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>summaryï¼šæŠ˜å è¯­æ³•å±•ç¤ºçš„æ‘˜è¦</p>
<p>detailsï¼šæŠ˜å è¯­æ³•æ ‡ç­¾</p>
<p>preï¼šä»¥åŸæœ‰æ ¼å¼æ˜¾ç¤ºå…ƒç´ å†…çš„æ–‡å­—æ˜¯å·²ç»æ ¼å¼åŒ–çš„æ–‡æœ¬ã€‚</p>
<p>blockcodeï¼šè¡¨ç¤ºç¨‹åºçš„ä»£ç å—ã€‚</p>
<p>codeï¼šæŒ‡å®šä»£ç èŒƒä¾‹ã€‚</p>
<p><strong>éšè—å†…å®¹ä¹Ÿå¯ä»¥æ˜¯markdownæ ¼å¼ã€‚</strong></p>
<p><strong><em>æ•ˆæœ</em></strong>ï¼š</p>
<details>
<summary><mark><font color=darkred>markdownéšè—å†…å®¹</font></mark></summary>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;details&gt;</span><br><span class="line">&lt;summary&gt;&lt;mark&gt;&lt;font color&#x3D;darkred&gt;æ‘˜è¦&lt;&#x2F;font&gt;&lt;&#x2F;mark&gt;&lt;&#x2F;summary&gt;</span><br><span class="line"></span><br><span class="line">éšè—å†…å®¹</span><br><span class="line">&lt;&#x2F;details&gt;</span><br></pre></td></tr></table></figure>

</details>

<hr>
<p>æ¥æºï¼š<a href="https://www.imooc.com/article/23400" target="_blank" rel="noopener">æ…•è¯¾ç½‘CandyBullet</a></p>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2>]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹å­—ä½“é¢œè‰²ä»¥åŠèƒŒæ™¯è‰²</title>
    <url>/2020/07/26/Markdown%E4%B9%8B%E5%AD%97%E4%BD%93%E9%A2%9C%E8%89%B2%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF%E8%89%B2/</url>
    <content><![CDATA[<h2 id="å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²"><a href="#å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²" class="headerlink" title="å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²"></a>å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²</h2><a id="more"></a>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"é»‘ä½“"</span>&gt;</span></span>æˆ‘æ˜¯é»‘ä½“å­—<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"å¾®è½¯é›…é»‘"</span>&gt;</span></span>æˆ‘æ˜¯å¾®è½¯é›…é»‘<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"STCAIYUN"</span>&gt;</span></span>æˆ‘æ˜¯åæ–‡å½©äº‘<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span></span>æˆ‘æ˜¯çº¢è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#008000</span>&gt;</span></span>æˆ‘æ˜¯ç»¿è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">Blue</span>&gt;</span></span>æˆ‘æ˜¯è“è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span></span>æˆ‘æ˜¯å°ºå¯¸<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"é»‘ä½“"</span> <span class="attr">color</span>=<span class="string">green</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span></span>æˆ‘æ˜¯é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š </p>
<font face="é»‘ä½“">æˆ‘æ˜¯é»‘ä½“å­—</font>
<font face="å¾®è½¯é›…é»‘">æˆ‘æ˜¯å¾®è½¯é›…é»‘</font>
<font face="STCAIYUN">æˆ‘æ˜¯åæ–‡å½©äº‘</font>
<font color=red>æˆ‘æ˜¯çº¢è‰²</font>
<font color=#008000>æˆ‘æ˜¯ç»¿è‰²</font>
<font color=Blue>æˆ‘æ˜¯è“è‰²</font>
<font size=5>æˆ‘æ˜¯å°ºå¯¸</font>
<font face="é»‘ä½“" color=green size=5>æˆ‘æ˜¯é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5</font>

<h2 id="æ–‡å­—èƒŒæ™¯è‰²"><a href="#æ–‡å­—èƒŒæ™¯è‰²" class="headerlink" title="æ–‡å­—èƒŒæ™¯è‰²"></a>æ–‡å­—èƒŒæ™¯è‰²</h2><p>ç”±äº Markdownä¸­ä¸æ”¯æŒ style æ ‡ç­¾å’Œ style å±æ€§ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½æ˜¯é€šè¿‡ table, tr, td ç­‰è¡¨æ ¼æ ‡ç­¾çš„ bgcolor å±æ€§æ¥å®ç°èƒŒæ™¯è‰²ï¼Œå°†ä¸€æ•´è¡Œçœ‹ä½œä¸€ä¸ªè¡¨æ ¼ï¼Œæ›´æ”¹å•å…ƒæ ¼çš„èƒŒæ™¯è‰²ï¼ˆbgcolorï¼‰</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">blue</span>&gt;</span></span>é¢œè‰²æµ‹è¯•<span class="xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<table><tr><td bgcolor=blue>é¢œè‰²æµ‹è¯•</td></tr></table>

<h2 id="å›¾ç‰‡å±…ä¸­"><a href="#å›¾ç‰‡å±…ä¸­" class="headerlink" title="å›¾ç‰‡å±…ä¸­"></a>å›¾ç‰‡å±…ä¸­</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">right</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/timg.jfif"</span> <span class="attr">width</span>=<span class="string">"50%"</span> <span class="attr">height</span>=<span class="string">"50%"</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<div align=right><img src="image/timg.jfif" width="50%" height="50%"></div>

<hr>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/heimu24/article/details/81189700" target="_blank" rel="noopener">https://blog.csdn.net/heimu24/article/details/81189700</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ–‡ä»¶æ¢å¤</title>
    <url>/2020/08/29/Markdown%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/</url>
    <content><![CDATA[<p>å¿˜äº†ç‚¹ä¿å­˜ï¼Œæ‰“å¼€ä¸€çœ‹æ–‡ä»¶æ˜¯ç©ºçš„ã€‚</p>
<ol>
<li>æ‰“å¼€Typora $\rightarrow $ æ–‡ä»¶$\rightarrow $ åå¥½è®¾ç½®</li>
<li>å‘ä¸‹æ»šåŠ¨åˆ° â€œä¿å­˜ &amp; æ¢å¤â€ åŒºåŸŸ</li>
<li>ç‚¹å‡» â€œæ¢å¤æœªä¿å­˜çš„è‰ç¨¿â€</li>
</ol>
<p>æ–¹æ³•å‚è€ƒï¼š<a href="https://blog.csdn.net/makesomethings/article/details/90181198" target="_blank" rel="noopener">https://blog.csdn.net/makesomethings/article/details/90181198</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹è¡¨æƒ…ï¼Œåˆ é™¤çº¿å’Œä»»åŠ¡åˆ—è¡¨</title>
    <url>/2020/08/29/Markdown%E4%B9%8B%E8%A1%A8%E6%83%85%EF%BC%8C%E5%88%A0%E9%99%A4%E7%BA%BF%E5%92%8C%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<h3 id="è¡¨æƒ…"><a href="#è¡¨æƒ…" class="headerlink" title="è¡¨æƒ…"></a>è¡¨æƒ…</h3><p><strong>aliasesç¼–ç ï¼šè¯­æ³•ï¼š</strong> <code>:&lt;emoji&gt;:</code></p>
<p>ğŸ”½ ğŸ˜“ğŸ˜„</p>
<a id="more"></a>
<p>å¯æŸ¥è¡¨ï¼š</p>
<p><a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">https://www.webfx.com/tools/emoji-cheat-sheet/</a></p>
<p><a href="https://www.cnblogs.com/minghaiJ/p/10685965.html" target="_blank" rel="noopener">https://www.cnblogs.com/minghaiJ/p/10685965.html</a></p>
<p><strong>hexdecimalç¼–ç ï¼šè¯­æ³•ï¼š</strong> <code>&amp;#xCODE;</code> </p>
<p>å¯ä»¥ä» <a href="https://link.zhihu.com/?target=https%3A//apps.timwhitlock.info/emoji/tables/unicode%23block-4-enclosed-characters">Emoji Unicode Tables</a> ä¸­æŸ¥åˆ°è¡¨æƒ…çš„Unicodeç¼–ç ï¼Œå»æ‰å¼€å¤´U+å³ä¸ºcodeã€‚(typoraä¸æ”¯æŒORZ)</p>
<h3 id="ä¸‹åˆ’çº¿"><a href="#ä¸‹åˆ’çº¿" class="headerlink" title="ä¸‹åˆ’çº¿"></a>ä¸‹åˆ’çº¿</h3><p>ç”¨HTMLçš„è¯­æ³•<code>&lt;u&gt;Underline&lt;/u&gt;</code>å°†äº§ç”Ÿä¸‹åˆ’çº¿<u>Underline</u>.</p>
<h3 id="ä»»åŠ¡çº¿"><a href="#ä»»åŠ¡çº¿" class="headerlink" title="ä»»åŠ¡çº¿"></a>ä»»åŠ¡çº¿</h3><p>GFMæ·»åŠ äº†åˆ é™¤æ–‡æœ¬çš„è¯­æ³•ï¼Œè¿™æ˜¯æ ‡å‡†çš„Markdownè¯­æ³•æœ¨æœ‰çš„ã€‚ä½¿ç”¨<code>~~</code>åŒ…è£¹çš„æ–‡æœ¬å°†ä¼šå…·æœ‰åˆ é™¤çš„æ ·å¼ï¼Œä¾‹å¦‚<code>~åˆ é™¤æ–‡æœ¬~</code>å°†äº§ç”Ÿ<del>åˆ é™¤æ–‡æœ¬</del>çš„æ ·å¼ã€‚</p>
<h3 id="ä»»åŠ¡åˆ—è¡¨"><a href="#ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="ä»»åŠ¡åˆ—è¡¨"></a>ä»»åŠ¡åˆ—è¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- [ ] åƒé¥­</span><br><span class="line">- [ ] é€›è¡—</span><br><span class="line">- [ ] çœ‹ç”µå½±</span><br><span class="line">- [ ] çº¦æ³¡</span><br></pre></td></tr></table></figure>
<ul>
<li>[ ] åƒé¥­</li>
<li>[ ] é€›è¡—</li>
<li>[ ] çœ‹ç”µå½±</li>
<li>[ ] çº¦æ³¡</li>
</ul>
<h3 id="æœ€å¤§åŒ–å¿«æ·é”®"><a href="#æœ€å¤§åŒ–å¿«æ·é”®" class="headerlink" title="æœ€å¤§åŒ–å¿«æ·é”®"></a>æœ€å¤§åŒ–å¿«æ·é”®</h3><p>è¿›å»é€€å‡ºæœ€å¤§åŒ–ï¼šF11</p>
<p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/092de536d948" target="_blank" rel="noopener">https://www.jianshu.com/p/092de536d948</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¹‹csv</title>
    <url>/2020/07/25/python%E4%B9%8Bcsv/</url>
    <content><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯csvï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯csvï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯csvï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯csvï¼Ÿ</h2><p><strong>Comma Separated Values</strong> (CSV), also called called <strong>Character Separated Values</strong> or <strong>Comma Delimited files</strong>, is a file format for data storage which looks like a text file, which contains a list of data separated by commas or other characters.</p>
<a id="more"></a>
<details>
<summary><mark><font color=darkred>csvçš„æ ¼å¼ç‰¹ç‚¹</font></mark></summary>

- One line for each record
- Comma separated fields
- Space-characters adjacent to commas are ignored
- Fields with in-built commas are separated by double quote characters
- Fields with double quote characters must be surrounded by double quotes. Each inbuilt double quote must be represented by a pair of consecutive quotes
- Fields that contain inbuilt line-breaks must be surrounded by double quotes

</details>

<h2 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ</h2><p>CSVç»“æ„ç®€å•ï¼Œæ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œå’Œtxtçš„åŒºåˆ«ä»…åœ¨äºåç¼€åä¸åŒã€‚ç”¨æ¥åšæ•°æ®å­˜å‚¨ï¼Œå®¹é‡æ¯”XMLå°ï¼ˆå…¶æ•°æ®ç”±key-valueç»„æˆï¼‰ï¼ŒåŠŸèƒ½æ¯”TXTå¼ºå¤§ï¼Œå¦å¤–Excelä¹Ÿç›´æ¥æ”¯æŒCSVæ–‡ä»¶çš„æŸ¥çœ‹å’Œç”Ÿæˆã€‚</p>
<h3 id="Excel-æ‰“å¼€-CSV-æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚"><a href="#Excel-æ‰“å¼€-CSV-æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚" class="headerlink" title="Excel æ‰“å¼€  CSV æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚"></a>Excel æ‰“å¼€  CSV æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚</h3><p>ç›´æ¥ç”¨ Excel æ‰“å¼€ UTF-8 ç¼–ç çš„ CSV æ–‡ä»¶ä¼šå¯¼è‡´æ±‰å­—éƒ¨åˆ†å‡ºç°ä¹±ç ï¼ŒåŸå› æ˜¯ Excel ä»¥ ANSI æ ¼å¼æ‰“å¼€ï¼Œä¸ä¼šåšç¼–ç è¯†åˆ«ã€‚æ‰“å¼€ UTF-8 ç¼–ç çš„ CSV æ–‡ä»¶çš„æ–¹æ³•ï¼š</p>
<h4 id="1-ä»æ•°æ®å¯¼å…¥æ–‡æœ¬"><a href="#1-ä»æ•°æ®å¯¼å…¥æ–‡æœ¬" class="headerlink" title="1. ä»æ•°æ®å¯¼å…¥æ–‡æœ¬"></a>1. ä»æ•°æ®å¯¼å…¥æ–‡æœ¬</h4><ul>
<li>æ‰“å¼€ Excel </li>
<li>æ‰§è¡Œâ€œæ•°æ®â€-&gt;â€œè‡ªæ–‡æœ¬â€</li>
</ul>
<ul>
<li>é€‰æ‹© CSV æ–‡ä»¶ï¼Œå‡ºç°æ–‡æœ¬å¯¼å…¥å‘å¯¼</li>
<li>é€‰æ‹©â€œåˆ†éš”ç¬¦å·â€ï¼Œä¸‹ä¸€æ­¥</li>
<li>å‹¾é€‰â€œé€—å·â€ï¼Œå»æ‰â€œ Tab é”®â€ï¼Œä¸‹ä¸€æ­¥ï¼Œå®Œæˆ</li>
<li>åœ¨â€œå¯¼å…¥æ•°æ®â€å¯¹è¯æ¡†é‡Œï¼Œç›´æ¥ç‚¹ç¡®å®š</li>
</ul>
<h4 id="2-è½¬å­˜ä¸ºANSIæ ¼å¼"><a href="#2-è½¬å­˜ä¸ºANSIæ ¼å¼" class="headerlink" title="2. è½¬å­˜ä¸ºANSIæ ¼å¼"></a>2. è½¬å­˜ä¸ºANSIæ ¼å¼</h4><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€CSVæ–‡ä»¶ï¼Œå¦å­˜ä¸ºANSIæ ¼å¼ï¼Œå†ç”¨Excelæ‰“å¼€ã€‚</p>
<h2 id="3-pythonè‡ªå¸¦æ¨¡å—csv"><a href="#3-pythonè‡ªå¸¦æ¨¡å—csv" class="headerlink" title="3. pythonè‡ªå¸¦æ¨¡å—csv"></a>3. pythonè‡ªå¸¦æ¨¡å—csv</h2><p><a href="https://docs.python.org/zh-cn/3/library/csv.html#module-csv" target="_blank" rel="noopener"><code>csv</code></a> æ¨¡å—å®ç°äº† CSV æ ¼å¼è¡¨å•æ•°æ®çš„è¯»å†™ã€‚å…¶æä¾›äº†è¯¸å¦‚â€œä»¥å…¼å®¹ Excel çš„æ–¹å¼è¾“å‡ºæ•°æ®æ–‡ä»¶â€æˆ–â€œè¯»å– Excel ç¨‹åºè¾“å‡ºçš„æ•°æ®æ–‡ä»¶â€çš„åŠŸèƒ½ï¼Œ</p>
<p><code>csv</code>å®šä¹‰äº†ä»¥ä¸‹å‡½æ•°ï¼š</p>
<blockquote>
<p><code>csv.reader</code>(<em>csvfile</em>, <em>dialect=â€™excelâ€™</em>, **fmtparams)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'eggs.csv'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csvfile:</span><br><span class="line">    spamreader = csv.reader(csvfile, delimiter=<span class="string">' '</span>, quotechar=<span class="string">'|'</span>)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> spamreader:</span><br><span class="line">        print(<span class="string">', '</span>.join(row))</span><br></pre></td></tr></table></figure>
<p><code>csv.writer</code>(<em>csvfile</em>, <em>dialect=â€™excelâ€™</em>, **fmtparams)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'eggs.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csvfile:</span><br><span class="line">    spamwriter = csv.writer(csvfile, delimiter=<span class="string">' '</span>,</span><br><span class="line">                            quotechar=<span class="string">'|'</span>, quoting=csv.QUOTE_MINIMAL)</span><br><span class="line">    spamwriter.writerow([<span class="string">'Spam'</span>] * <span class="number">5</span> + [<span class="string">'Baked Beans'</span>])</span><br><span class="line">    spamwriter.writerow([<span class="string">'Spam'</span>, <span class="string">'Lovely Spam'</span>, <span class="string">'Wonderful Spam'</span>])</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>csv</code>å®šä¹‰äº†ä»¥ä¸‹ç±»ï¼š</p>
<blockquote>
<p>class csv.DictReader(<em>f</em>, <em>fieldnames=None</em>, <em>restkey=None</em>, <em>restval=None</em>, <em>dialect=â€™excelâ€™</em>, <em>args, *</em>kwds) </p>
<p>å°†csvæ•°æ®è¯»å–ä¸ºå­—å…¸</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:right">Age</th>
<th style="text-align:center">Class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">A</td>
<td style="text-align:right">20</td>
<td style="text-align:center">two</td>
</tr>
<tr>
<td style="text-align:left">B</td>
<td style="text-align:right">21</td>
<td style="text-align:center">one</td>
</tr>
<tr>
<td style="text-align:left">C</td>
<td style="text-align:right">22</td>
<td style="text-align:center">one</td>
</tr>
<tr>
<td style="text-align:left">D</td>
<td style="text-align:right">23</td>
<td style="text-align:center">three</td>
</tr>
<tr>
<td style="text-align:left">E</td>
<td style="text-align:right">24</td>
<td style="text-align:center">one</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"csv.csv"</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line"> reader = csv.reader(f)</span><br><span class="line"> fieldnames = next(reader)<span class="comment">#è·å–æ•°æ®çš„ç¬¬ä¸€åˆ—ï¼Œä½œä¸ºåç»­è¦è½¬ä¸ºå­—å…¸çš„é”®å ç”Ÿæˆå™¨ï¼Œnextæ–¹æ³•è·å–</span></span><br><span class="line"> <span class="comment"># print(fieldnames)</span></span><br><span class="line"> csv_reader = csv.DictReader(f,fieldnames=fieldnames) <span class="comment">#self._fieldnames = fieldnames # list of keys for the dict ä»¥listçš„å½¢å¼å­˜æ”¾é”®å</span></span><br><span class="line"> <span class="keyword">for</span> row <span class="keyword">in</span> csv_reader:</span><br><span class="line">  d=&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> row.items():</span><br><span class="line">   d[k]=v</span><br><span class="line">  print(d)</span><br></pre></td></tr></table></figure>
<p>class csv.DictWriter(<em>f</em>, <em>fieldnames=None</em>, <em>extrasaction=â€™raiseâ€™</em>, <em>dialect=â€™excelâ€™</em>, <em>args, *</em>kwds)</p>
<p>å°†å­—å…¸å†™å…¥csvæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">file_path = <span class="string">r"E:\new.csv"</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">"w"</span>, newline=<span class="string">""</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    fieldnames = [<span class="string">"ä¹¦å"</span>, <span class="string">"ä½œè€…"</span>, <span class="string">"å‡ºç‰ˆæ—¶é—´"</span>, <span class="string">"ä»·æ ¼"</span>, <span class="string">"è¯„åˆ†"</span>, <span class="string">"è¯„ä»·äººæ•°"</span>]</span><br><span class="line">    f_csv = csv.DictWriter(f, fieldnames)</span><br><span class="line">    f_csv.writeheader()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(time_list)):</span><br><span class="line">        f_csv.writerow(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"ä¹¦å"</span>: book_name_list[i],</span><br><span class="line">                <span class="string">"ä½œè€…"</span>: author_list[i],</span><br><span class="line">                <span class="string">"å‡ºç‰ˆæ—¶é—´"</span>: time_list[i],</span><br><span class="line">                <span class="string">"ä»·æ ¼"</span>: price_list[i],</span><br><span class="line">                <span class="string">"è¯„åˆ†"</span>: score_list[i],</span><br><span class="line">                <span class="string">"è¯„ä»·äººæ•°"</span>: evaluator_list[i]</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>
</blockquote>
<p>å‚è€ƒèµ„æºï¼š</p>
<p><a href="https://docs.python.org/zh-cn/3/library/csv.html#module-csv" target="_blank" rel="noopener">Pythonä¸­æ–‡æ–‡æ¡£-module csv</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>csv</tag>
        <tag>æ•°æ®å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ•°å­¦ç¬¦å·å’Œå…¬å¼</title>
    <url>/2020/08/29/Markdown%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E5%92%8C%E5%85%AC%E5%BC%8F%20193445/</url>
    <content><![CDATA[<p>Markdownä¸­æ•°å­¦ç¬¦å·å’Œå…¬å¼çš„ä¹¦å†™è§„åˆ™å’Œ<code>latex</code>éå¸¸åƒã€‚</p>
<p>è¡Œå†…å…¬å¼æˆ–æ•°å­¦ç¬¦å·ä½¿ç”¨<code>$</code>ç¬¦å·åŒ…è£¹Texå‘½ä»¤å³å¯ã€‚</p>
<p>å•ç‹¬çš„å…¬å¼æ®µè½å¯ä»¥ç”¨$$$$åŒ…è£¹ï¼Œæˆ–è€…ç‚¹å‡»â€œæ®µè½â€ $\rightarrow$ â€œå…¬å¼å—â€ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”®Shift+Ctrl+M</p>
<a id="more"></a>
<p>å¸¸ç”¨çš„æ•°å­¦ç¬¦å·ï¼š</p>
<h3 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h3><p><strong>å°å†™</strong> \alpha \beta \chi \delta \epsilon \eta \gamma \kappa \lambda \mu \nu \omega \tau \theta \xi \zeta </p>
<p>$\alpha \beta \chi \delta \epsilon \eta \gamma \kappa \lambda \mu \nu \omega \tau \theta \xi \zeta $</p>
<p><strong>å¤§å†™</strong> å°†ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™å³å¯ï¼š $\Alpha \Beta \Chi \Delta \Epsilon $</p>
<h3 id="æ“ä½œç¬¦-å…³ç³»ç¬¦"><a href="#æ“ä½œç¬¦-å…³ç³»ç¬¦" class="headerlink" title="æ“ä½œç¬¦ å…³ç³»ç¬¦"></a>æ“ä½œç¬¦ å…³ç³»ç¬¦</h3><p>å¸¸ç”¨çš„æœ‰ ï¼š</p>
<p>\cdot  \pm \leq \geq \gg \ll \times \div \oplus \otimes \equiv \approx \because \therefore</p>
<p>$\cdot  \pm \leq \geq \gg \ll \times \div \oplus \otimes \equiv \approx \because \therefore$</p>
<h3 id="æ•°å­¦ç€é‡å·"><a href="#æ•°å­¦ç€é‡å·" class="headerlink" title="æ•°å­¦ç€é‡å·"></a>æ•°å­¦ç€é‡å·</h3><p>\ddot{a} \bar{a} \dot{a} \hat{a} \vec{a} \check{a}</p>
<p>$\ddot{a} \bar{a} \dot{a} \hat{a} \vec{a} \check{a}$</p>
<h3 id="å„å¼ç®­å¤´"><a href="#å„å¼ç®­å¤´" class="headerlink" title="å„å¼ç®­å¤´"></a>å„å¼ç®­å¤´</h3><p>\leftarrow \rightarrow \uparrow \downarrow</p>
<p>$\leftarrow \rightarrow \uparrow \downarrow$</p>
<p>\Leftarrow \Rightarrow \Uparrow \Downarrow</p>
<p>$\Leftarrow \Rightarrow \Uparrow \Downarrow$</p>
<p>\longleftarrow \longrightarrow </p>
<p>$\longleftarrow \longrightarrow $</p>
<p>\leftrightarrow  \updownarrow</p>
<p>$\leftrightarrow  \updownarrow$</p>
<h3 id="å…¶ä»–ç¬¦å·"><a href="#å…¶ä»–ç¬¦å·" class="headerlink" title="å…¶ä»–ç¬¦å·"></a>å…¶ä»–ç¬¦å·</h3><p>\infty  \forall \nabla \partial \varnothing \hbar \exists</p>
<p>$\infty  \forall \nabla \partial \varnothing \hbar \exists$</p>
<p>\sum  \int  \prod \oint  \iint</p>
<p>$\sum  \int  \prod \oint  \iint$</p>
<h3 id="æ•°å­¦ç»“æ„"><a href="#æ•°å­¦ç»“æ„" class="headerlink" title="æ•°å­¦ç»“æ„"></a>æ•°å­¦ç»“æ„</h3><p>\frac{a}{b} $\frac{a}{b}$</p>
<p>\sqrt[n]{a} $\sqrt[n]{a} $</p>
<p>\overline{abc} $\overline{abc}$</p>
<p>\widehat{abc} $\widehat{abc}$</p>
<p>\overrightarrow{abc} $\overrightarrow{abc}$</p>
<p>\left\{ a b c\}\right</p>
<p>a = \left \{ \begin{array}{c} x^2 \\ 2x \\0 \end{array} \right. \} $a = \left \{ \begin{array}{c} x^2 \\ 2x \\0 \end{array} \right.$</p>
<p>\left ( \begin{array}{cc} a &amp; b \\ c &amp; d\end{array} \right) $\left ( \begin{array}{cc} a &amp; b \\ c &amp; d\end{array} \right)$</p>
<hr>
<p>å‚è€ƒï¼š</p>
<p><a href="https://blog.csdn.net/wait_for_eva/article/details/84307306" target="_blank" rel="noopener">typora-æ•°å­¦ç¬¦å·</a> </p>
<p><a href="https://blog.csdn.net/mingzhuo_126/article/details/82722455" target="_blank" rel="noopener">ä½¿ç”¨Typoraæ·»åŠ æ•°å­¦å…¬å¼</a></p>
<p><a href="https://www.cnblogs.com/waleswood/p/6401232.html" target="_blank" rel="noopener">å¸Œè…Šå­—æ¯ã€æ‹‰ä¸å­—æ¯ã€Markdownã€æ‹¼å†™ä¸è¯»éŸ³ä¸­è‹±å¯¹ç…§è¡¨</a></p>
<p><a href="https://blog.csdn.net/katherine_hsr/article/details/79179622" target="_blank" rel="noopener">Markdownæ•°å­¦ç¬¦å·&amp;å…¬å¼</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¹‹å­—ç¬¦ä¸²å’Œåˆ—è¡¨ä¹‹é—´çš„è½¬æ¢</title>
    <url>/2020/07/28/python%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%88%97%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<h2 id="str-to-list"><a href="#str-to-list" class="headerlink" title="str to list"></a>str to list</h2><a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str1 = <span class="string">"12345"</span></span><br><span class="line">list1 = list(str1)</span><br><span class="line">print(list1)  <span class="comment"># ['1', '2', '3', '4', '5']</span></span><br><span class="line"></span><br><span class="line">str2 = <span class="string">"123 sjhid dhi"</span></span><br><span class="line">list2 = str2.split() <span class="comment">#or list2 = str2.split(" ")</span></span><br><span class="line">print(list2)   <span class="comment"># ['123', 'sjhid', 'dhi']</span></span><br><span class="line"> </span><br><span class="line">str3 = <span class="string">"www.google.com"</span></span><br><span class="line">list3 = str3.split(<span class="string">"."</span>)</span><br><span class="line">print(list3)   <span class="comment"># ['www', 'google', 'com']</span></span><br></pre></td></tr></table></figure>
<h2 id="list-to-str"><a href="#list-to-str" class="headerlink" title="list to str"></a>list to str</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str4 = <span class="string">""</span>.join(list3)</span><br><span class="line">print(str4)    <span class="comment"># wwwgooglecom</span></span><br><span class="line">str5 = <span class="string">"."</span>.join(list3)  <span class="comment"># www.google.com</span></span><br><span class="line">print(str5)</span><br><span class="line">str6 = <span class="string">" "</span>.join(list3)   <span class="comment"># www google com</span></span><br><span class="line"><span class="keyword">print</span> (str6)</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://blog.csdn.net/roytao2/article/details/53433373" target="_blank" rel="noopener">https://blog.csdn.net/roytao2/article/details/53433373</a></p>
<p><a href="https://www.jb51.net/article/107092.htm" target="_blank" rel="noopener">https://www.jb51.net/article/107092.htm</a></p>
<div style='display: none'>

å°è¯•çˆ¬å–åšå®¢é¡µé¢

</div>]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title>pythonå­—ç¬¦ä¸²è¿‡æ»¤ä»…ä¿ç•™æ•°å­—</title>
    <url>/2020/07/25/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%87%E6%BB%A4%E4%BB%85%E4%BF%9D%E7%95%99%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<h2 id="1-å†…ç½®-filter-å‡½æ•°"><a href="#1-å†…ç½®-filter-å‡½æ•°" class="headerlink" title="1. å†…ç½® filter() å‡½æ•°"></a>1. å†…ç½® filter() å‡½æ•°</h2><p><code>filter(function, iterable)</code>å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ç”±ç¬¦åˆæ¡ä»¶å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼Œ<font face="é»‘ä½“" color=green > <strong>æ³¨æ„:</strong> Pyhton2.7 è¿”å›åˆ—è¡¨ï¼ŒPython3.x è¿”å›è¿­ä»£å™¨å¯¹è±¡</font>ã€‚</p>
<a id="more"></a>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿‡æ»¤å‡ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¥‡æ•°ï¼š</span></span><br><span class="line">newlist = filter(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])</span><br><span class="line"><span class="comment"># è¿‡æ»¤å‡º1~100ä¸­å¹³æ–¹æ ¹æ˜¯æ•´æ•°çš„æ•°ï¼š</span></span><br><span class="line">newlist = filter(is_sqr, range(<span class="number">1</span>, <span class="number">101</span>))</span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²è¿‡æ»¤ä»…ä¿ç•™æ•°å­—å’Œå­—æ¯</span></span><br><span class="line">string = <span class="string">'abc5fg67.!aa99'</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isdigit,string))) <span class="comment">#åªä¿ç•™æ•°å­—</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isalpha,string))) <span class="comment">#åªä¿ç•™å­—æ¯</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isalnum,string))) <span class="comment">#ä¿ç•™æ•°å­—å’Œå­—æ¯</span></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³ä¿ç•™æ•°å­—0-9å’Œå°æ•°ç‚¹â€™.â€™ åˆ™éœ€è¦è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="string">''</span>.join(list(filter(<span class="keyword">lambda</span> ch: ch <span class="keyword">in</span> <span class="string">'1234567890.'</span>, string)))</span><br></pre></td></tr></table></figure>
<h2 id="2-æ­£åˆ™è¡¨è¾¾å¼"><a href="#2-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="2. æ­£åˆ™è¡¨è¾¾å¼"></a>2. æ­£åˆ™è¡¨è¾¾å¼</h2><p>pythonè‡ªå¸¦<code>re</code> æ¨¡å—ï¼Œä½¿ Python è¯­è¨€æ‹¥æœ‰å…¨éƒ¨çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½ã€‚</p>
<p>ä»å­—ç¬¦ä¸²ä¸­æå–æ•°å­—ï¼Œä¸€èˆ¬å½¢å¼å¦‚ï¼šâ€”-.â€”ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">string=<span class="string">"A1.45ï¼Œb5ï¼Œ6.45ï¼Œ8.82"</span></span><br><span class="line"><span class="keyword">print</span> re.findall(<span class="string">r"\d+.?\d*"</span>,string)</span><br><span class="line"><span class="comment"># \d+åŒ¹é…1æ¬¡æˆ–è€…å¤šæ¬¡æ•°å­—</span></span><br><span class="line"><span class="comment"># \.?åŒ¹é…å°æ•°ç‚¹ï¼Œå¯èƒ½æœ‰æˆ–è€…æ²¡æœ‰</span></span><br><span class="line"><span class="comment"># \d* åŒ¹é…å°æ•°ç‚¹ä¹‹åçš„æ•°å­—ï¼Œé›¶åˆ°ä»»æ„ã€‚</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ol>
<li><p><a href="https://blog.csdn.net/huoyuanshen/article/details/83106608" target="_blank" rel="noopener">https://blog.csdn.net/huoyuanshen/article/details/83106608</a></p>
</li>
<li><p><a href="https://www.runoob.com/python/python-func-filter.html" target="_blank" rel="noopener">https://www.runoob.com/python/python-func-filter.html</a></p>
<p>â€‹</p>
</li>
</ol>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>å†…ç½®å‡½æ•°</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
        <tag>re</tag>
        <tag>filter()</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«ä¹‹å®æˆ˜é—®é¢˜</title>
    <url>/2020/08/03/python%E7%88%AC%E8%99%AB%E4%B9%8B%E5%AE%9E%E6%88%98%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="1-seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•"><a href="#1-seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•" class="headerlink" title="1. seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•"></a>1. seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•</h2><a id="more"></a>
<p>ç”±äºéœ€è¦ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œå¯¼è‡´çˆ¬è™«ç¨‹åºè¢«æ‰“æ–­ï¼Œå¯ä»¥å†ä½¿ç”¨seleniumå»æ¨¡æ‹Ÿäººçš„ç™»å½•ï¼Œè¾“å…¥è´¦å·å’Œå¯†ç ä»¥åŠæ»‘åŠ¨ï¼Œä½†æ˜¯è§‰å¾—å¾ˆéº»çƒ¦è¿˜ä¼šæœ‰å„ç§å„æ ·çš„bugï¼Œæ‰€ä»¥å†³å®šç”¨ç±»ä¼¼äºcookieçš„æ–¹æ³•å³åˆ©ç”¨ä¿å­˜åœ¨ç”µè„‘ä¸Šçš„chromeç”¨æˆ·ä¿¡æ¯æ¥ç™»å½•æ·˜å®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">chrome_options = webdriver.ChromeOptions()        <span class="comment">#åˆå§‹åŒ–</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)         <span class="comment">#è®¾ç½®æµè§ˆå™¨æ— å¤´æ¨¡å¼</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--disable-gpu'</span>)      <span class="comment">#é¿å…ä¸€äº›æŠ¥é”™</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--no-sandbox'</span>)       <span class="comment">#é¿å…å‡ºé”™</span></span><br><span class="line">chrome_options.add_argument(<span class="string">r'user-data-dir=C:\Users\username\AppData\Local\Google\Chrome\User Data'</span>)</span><br><span class="line">browser = webdriver.Chrome(options=chrome_options)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>æ³¨æ„ï¼š</strong> ä¸ºchromeæµè§ˆå™¨è®¾ç½®å‚æ•°,å¦‚æœä½¿ç”¨ç”¨æˆ·ä¿¡æ¯ï¼Œä¸ä¼šè°ƒèµ·æ–°çš„chromeï¼Œæ‰€ä»¥éœ€è¦å°†Chromeæ‰€æœ‰çª—å£å…³é—­ï¼Œå¦åˆ™å› ä¸ºå ç”¨ä¼šå‡ºé”™ã€‚</li>
</ul>
<p>å¦å¤–è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥cookiesã€‚æˆ–è€…ï¼Œæˆ–è€…ä½¿ç”¨requests.post() ä¼ å…¥è´¦å·ï¼Œå¯†ç ã€‚</p>
<h2 id="2-æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”"><a href="#2-æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”" class="headerlink" title="2. æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”"></a>2. æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”</h2><p>æœ‰äº›éœ€è¦enter</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">driver.get(url)</span><br><span class="line">input = driver.find_element_by_xpath(<span class="string">'//*[@id="q"]'</span>)</span><br><span class="line">input.clear()  <span class="comment"># æ¸…ç©ºæœç´¢æ¡†æ•°æ®</span></span><br><span class="line">input.send_keys(<span class="string">'ipad'</span>)  <span class="comment"># è¾“å…¥æ£€ç´¢è¯</span></span><br><span class="line">input.send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure>
<h2 id="3-æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥"><a href="#3-æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥" class="headerlink" title="3.æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥"></a>3.æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥</h2><p>è§£å†³æ–¹æ³•ï¼šåœ¨é¡µç æ¡†è¾“å…¥é¡µç ï¼Œç„¶åç‚¹å‡»ç¡®å®š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input = wait.until(EC.presence_of_element_located((By.XPATH, <span class="string">'//*[@id="mainsrp-pager"]/div/div/div/div[2]/input'</span>))) <span class="comment"># è¾“å…¥æ¡†</span></span><br><span class="line">submit = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">'//*[@id="mainsrp-pager"]/div/div/div/div[2]/span[3]'</span>))) <span class="comment"># ç¡®å®šæŒ‰é’®</span></span><br><span class="line">input.clear()</span><br><span class="line">input.send_keys(str(page))</span><br><span class="line">submit.click()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>å®æˆ˜</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ </title>
    <url>/2020/07/24/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E6%9C%AC%E5%BA%93%E5%92%8C%E8%A7%A3%E6%9E%90%E5%BA%93/</url>
    <content><![CDATA[<h2 id="1-å‰æœŸå‡†å¤‡"><a href="#1-å‰æœŸå‡†å¤‡" class="headerlink" title="1.å‰æœŸå‡†å¤‡"></a>1.å‰æœŸå‡†å¤‡</h2><h3 id="1-anacondaå®‰è£…"><a href="#1-anacondaå®‰è£…" class="headerlink" title="1. anacondaå®‰è£…"></a>1. anacondaå®‰è£…</h3><ol>
<li><p>é…ç½®ç¯å¢ƒï¼Œå°†pythonå†™å…¥ç¯å¢ƒå˜é‡ã€‚</p>
<a id="more"></a>
</li>
</ol>
<h3 id="2-IDEï¼š-pycharmå®‰è£…"><a href="#2-IDEï¼š-pycharmå®‰è£…" class="headerlink" title="2. IDEï¼š pycharmå®‰è£…"></a>2. IDEï¼š pycharmå®‰è£…</h3><ol>
<li>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆvirtual environmentï¼‰</li>
<li>settings å®‰è£…pythonåŒ…ï¼Œå¯ä»¥ç›´æ¥ä»anacondaä¸­æŠŠå®‰è£…åŒ…ç›´æ¥æ‹·åˆ°Lib-site_packageä¸‹ï¼Œå¦‚æœç½‘é€Ÿé™åˆ¶ï¼Œå¯ä»¥æ›¿æ¢é•œåƒæºã€‚</li>
</ol>
<h2 id="2-urllib"><a href="#2-urllib" class="headerlink" title="2. urllib"></a>2. urllib</h2><p><code>urllib</code> æ˜¯Python å†…ç½®çš„ HTTP è¯·æ±‚åº“ï¼ŒåŒ…å«å¦‚4 ä¸ªæ¨¡å—ï¼š<code>request</code>, <code>error</code>, <code>parse</code>, <code>robotparser</code></p>
<h3 id="request"><a href="#request" class="headerlink" title="request"></a>request</h3><p>è¯¥æ¨¡å—å¯ä»¥å‘é€è¯·æ±‚å¹¶å¾—åˆ°å“åº”ã€‚</p>
<ol>
<li><p><code>urlopen</code></p>
<p>å…¶ç»“æœè¿”å›ä¸€ä¸ª HTTPResposne ç±»å‹çš„å¯¹è±¡ï¼Œä¸»è¦åŒ…å« <code>readã€getheaderã€getheaders</code>ç­‰æ–¹æ³•ï¼Œä»¥åŠ <code>msgã€versionã€statusã€reason</code>ç­‰å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">data = response.read().decode()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p><code>response.status</code> 1**ï¼šä¿¡æ¯çŠ¶æ€ï¼Œ2**ï¼šæˆåŠŸçŠ¶æ€ï¼Œè¯·æ±‚æˆåŠŸä¸º200 ï¼Œ3**ï¼šé‡å®šå‘ï¼Œ4**ï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œ400ä»£è¡¨è§£æå¤±è´¥ï¼Œ404 ä»£è¡¨ç½‘é¡µæœªæ‰¾åˆ°ã€‚</p>
<p><code>response.getheaders()</code> å¾—åˆ°headers</p>
</blockquote>
<ol>
<li><p><code>Request</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">req = request.Request(url=url, data=data, headers=headers, method=<span class="string">'POST'</span>)  </span><br><span class="line">response = request.urlopen(req)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>build_opener</code> å’Œ <code>Handler</code> å¯ä»¥å®ç°ä»£ç†ï¼Œå¯†ç ç™»å½•ç­‰å¤æ‚è¯·æ±‚ï¼Œä¾‹å­å¯<a href="https://python3webspider.cuiqingcai.com/3.1-shi-yong-urllib#2-request" target="_blank" rel="noopener">å‚è€ƒ</a></p>
</li>
</ol>
<h3 id="error"><a href="#error" class="headerlink" title="error"></a>error</h3><p>è¯¥æ¨¡å—å®šä¹‰äº†ç”± request æ¨¡å—äº§ç”Ÿçš„å¼‚å¸¸ã€‚</p>
<ol>
<li><p><code>URLError</code> æœ‰ä¸€ä¸ªå±æ€§<code>reason</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:  </span><br><span class="line">    response = request.urlopen(<span class="number">404</span>_url)  </span><br><span class="line"><span class="keyword">except</span> error.URLError <span class="keyword">as</span> e:  </span><br><span class="line">    print(e.reason)  <span class="comment">#  Not Found ï¼ˆå¯¹åº”403ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>HTTPError</code> ä¸“é—¨å¤„ç†HTTPè¯·æ±‚çš„é”™è¯¯ï¼Œå…·æœ‰<code>code</code>, <code>reason</code>, <code>headers</code> ä¸‰ä¸ªå±æ€§</p>
</li>
</ol>
<h3 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h3><p>è¯¥æ¨¡å—å®šä¹‰äº†å¤„ç† URL çš„æ ‡å‡†æ¥å£ï¼Œä¾‹å¦‚å®ç° URL å„éƒ¨åˆ†çš„æŠ½å–ã€åˆå¹¶ä»¥åŠé“¾æ¥è½¬æ¢ã€‚</p>
<ol>
<li><p><code>quote</code> å°†å†…å®¹è½¬åŒ–ä¸º URL ç¼–ç çš„æ ¼å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = <span class="string">"å°è¯´"</span></span><br><span class="line">key_ASCII = quote(key)</span><br><span class="line">print(key_ASCII)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>unquote</code> å°† URL æ ¼å¼å†…å®¹è§£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = <span class="string">"%E5%B0%8F%E8%AF%B4"</span></span><br><span class="line">print(unqoute(key))</span><br></pre></td></tr></table></figure>
<p><strong><code>request</code> ä¸­ä¹Ÿæœ‰qoute</strong></p>
</li>
</ol>
<h3 id="robotparser"><a href="#robotparser" class="headerlink" title="robotparser"></a>robotparser</h3><p>è¯¥æ¨¡å—å¯ä»¥å®ç°ç½‘ç«™ Robots åè®®çš„åˆ†æã€‚</p>
<p>requestsæ˜¯ç”¨äºçˆ¬å–ç½‘é¡µæºç çš„ä¸€ä¸ªåº“ã€‚</p>
<h2 id="3-requests"><a href="#3-requests" class="headerlink" title="3. requests"></a>3. requests</h2><h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p><code>get</code> æ–¹æ³•ä»¥ GET æ–¹å¼è¯·æ±‚ç½‘é¡µï¼Œè¿”å›å¾—åˆ°ä¸€ä¸ª Response å¯¹è±¡ï¼Œæœ‰<code>status_codeï¼Œtextï¼Œcookies</code> ç­‰å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">response=requests.get(url) </span><br><span class="line">data=response.text</span><br><span class="line">file_path = <span class="string">r"E:\pycharm\test.html"</span>  <span class="comment"># 'r'æ˜¯é˜²æ­¢å­—ç¬¦è½¬ä¹‰,å¦åˆ™\éœ€è¦å˜æˆ/</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f: </span><br><span class="line">    f.write(data)</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>å› ä¸ºWindowsæ“ä½œç³»ç»Ÿé»˜è®¤å­—ç¬¦ç¼–ç ä¸ºGBKï¼Œè€ŒPythoné»˜è®¤Unicode.utf-8ï¼Œå¦‚æœä¸å†™â€œencoding=â€˜utf-8â€™ â€å°±ä¼šæŠ¥é”™ã€‚</p>
<p>å¯¹äºäºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨<code>content</code> å±æ€§ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œç›´æ¥è·å¾—å›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†å±ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">"https://github.com/favicon.ico"</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'favicon.ico'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f: <span class="comment"># wb ä»¥äºŒè¿›åˆ¶æ–¹å¼å†™å…¥</span></span><br><span class="line">    f.write(r.content)</span><br></pre></td></tr></table></figure>
<p>æœ‰äº›ç½‘ç«™ç¦æ­¢æŠ“å–ï¼Œå¦‚Bç«™ï¼Œå¯ä»¥ä½¿ç”¨headersåŒ…å« User-Agent å­—æ®µä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨æ ‡è¯†ä¿¡æ¯ã€‚<a href="https://www.jianshu.com/p/da6a44d0791e" target="_blank" rel="noopener" title="User-agentå¤§å…¨">User-agentå¤§å…¨</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># urllib.error.HTTPError: HTTP Error 403: Forbidden</span></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">data = response.read().decode() </span><br><span class="line"><span class="comment"># æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">response=requests.get(url) </span><br><span class="line">data=response.text</span><br></pre></td></tr></table></figure>
<p>åœ¨è®¾ç½® Headers ä½¿ç”¨Cookieæ¥ç»´æŒç™»å½•çŠ¶æ€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'Cookie'</span>: <span class="string">'cookie_content'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œ<code>request</code>è¿˜æœ‰<code>put, post, delete, options</code> ç­‰æ–¹æ³•å®ç° POSTã€PUTã€DELETEã€OPTIONS ç­‰è¯·æ±‚ã€‚</p>
<h3 id="sessionä¼šè¯ç»´æŒ"><a href="#sessionä¼šè¯ç»´æŒ" class="headerlink" title="sessionä¼šè¯ç»´æŒ"></a>sessionä¼šè¯ç»´æŒ</h3><p>é€šè¿‡ç”¨ get æ–¹æ³•ç™»å½•æŸä¸ªç½‘ç«™ï¼Œç”¨ get æ–¹æ³•ç¬¬äºŒæ¬¡å»è¯·æ±‚ä¸ªäººä¿¡æ¯é¡µé¢ï¼Œå¹¶ä¸èƒ½æˆåŠŸã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.text) <span class="comment"># cookies æ˜¯ç©ºå­—å…¸</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•è®¾ç½®ä¸€æ¬¡cookiesï¼Œç»´æŒå¯¹è¯ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">r = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure>
<h2 id="4-ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨"><a href="#4-ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨" class="headerlink" title="4. ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨"></a>4. ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨</h2><p><a href="[http://www.selenium.org.cn/](http://www.selenium.org.cn/">Selenium</a>)æ˜¯webè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é›†ï¼ŒåŒ…æ‹¬IDEã€Gridã€RCï¼ˆselenium 1.0ï¼‰ã€WebDriverï¼ˆselenium 2.0ï¼‰ç­‰ã€‚</p>
<p> <a href="[https://blog.csdn.net/huilan_same/article/details/52615123](https://blog.csdn.net/huilan_same/article/details/52615123">seleniumè‡ªåŠ¨åŒ–èµ„æºæ•´ç†</a>)</p>
<h3 id="1-è°ƒç”¨Chromeæµè§ˆå™¨"><a href="#1-è°ƒç”¨Chromeæµè§ˆå™¨" class="headerlink" title="1. è°ƒç”¨Chromeæµè§ˆå™¨"></a>1. è°ƒç”¨Chromeæµè§ˆå™¨</h3><ol>
<li><p>æŸ¥çœ‹æœ¬åœ°Chromeç‰ˆæœ¬</p>
</li>
<li><p>ä¸‹è½½<a href="http://npm.taobao.org/mirrors/chromedriver" target="_blank" rel="noopener">Chromedriver</a></p>
</li>
<li><p>å°†chromedriver.exeæ”¾åˆ°python pathä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> selenium.webdriver</span><br><span class="line"></span><br><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line"></span><br><span class="line">driver = selenium.webdriver.Chrome()</span><br><span class="line">driver.get(url)</span><br><span class="line">data = driver.page_source</span><br><span class="line"></span><br><span class="line">file_path = <span class="string">r"E:\pycharm-çˆ¬è™«\bilibili\é¦–é¡µ_selenium.html"</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data)</span><br><span class="line"></span><br><span class="line">driver.close()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-è°ƒç”¨FireFoxæµè§ˆå™¨"><a href="#2-è°ƒç”¨FireFoxæµè§ˆå™¨" class="headerlink" title="2. è°ƒç”¨FireFoxæµè§ˆå™¨"></a>2. è°ƒç”¨FireFoxæµè§ˆå™¨</h3><ol>
<li>ä¸‹è½½<a href="https://github.com/mozilla/geckodriver/releases" target="_blank" rel="noopener">geckodriver</a>ï¼Œå¹¶å°†å…¶æ”¾å…¥PATHä¸­ã€‚</li>
<li>driver = selenium.webdriver.Firefox()</li>
</ol>
<h2 id="5-bs4-BeautifulSoupè§£æHTML"><a href="#5-bs4-BeautifulSoupè§£æHTML" class="headerlink" title="5. bs4.BeautifulSoupè§£æHTML"></a>5. bs4.BeautifulSoupè§£æHTML</h2><p>bs4å³<a href="http://www.crummy.com/software/BeautifulSoup/" target="_blank" rel="noopener">BeautifulSoup4</a> ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ä»HTMLæˆ–XMLæ–‡ä»¶ä¸­æå–æ•°æ®çš„Pythonåº“ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">data = <span class="string">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span></span><br><span class="line">soup = BeautifulSoup(data, <span class="string">"html.parser"</span>) <span class="comment"># dataä¸ºhtmlæ ¼å¼çš„æ•°æ®</span></span><br></pre></td></tr></table></figure>
<p>Beautiful Soupå°†å¤æ‚HTMLæ–‡æ¡£è½¬æ¢æˆä¸€ä¸ªå¤æ‚çš„æ ‘å½¢ç»“æ„,æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯Pythonå¯¹è±¡,æ‰€æœ‰å¯¹è±¡å¯ä»¥å½’çº³ä¸º4ç§: <code>Tag</code>, <code>NavigableString</code> , <code>BeautifulSoup</code> , <code>Comment</code> ã€‚</p>
<h3 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h3><p><code>tag</code> çš„å±æ€§æœ‰<code>name</code> å’Œ <code>attributes</code>ï¼Œæ–¹æ³•<code>get()</code> , å¦‚æœä¸ç¡®å®šæŸä¸ªå±æ€§æ˜¯å¦å­˜åœ¨æ—¶,ç”¨ <code>tag.get(&#39;attr&#39;)</code> æ–¹æ³•å»è·å–å®ƒ,è·Ÿè·å–Pythonå­—å…¸çš„keyä¸€æ ·&gt;</p>
<p>ä¸€ä¸ª<code>tag</code> å¯èƒ½æœ‰å¾ˆå¤šå±æ€§ï¼Œå±æ€§çš„æ“ä½œä¸<strong>å­—å…¸</strong>ç›¸åŒï¼Œå¯ä»¥è¢«æ·»åŠ ï¼Œåˆ é™¤æˆ–ä¿®æ”¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tag = soup.b <span class="comment"># tag b</span></span><br><span class="line">tag.name  <span class="comment"># 'b'</span></span><br><span class="line">tag.name = <span class="string">"blockquote"</span> <span class="comment"># tag &lt;blockquote class="boldest"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">tag[<span class="string">'class'</span>] <span class="comment"># boldest</span></span><br><span class="line">tag.attrs <span class="comment"># &#123;'class': 'boldest'&#125;</span></span><br><span class="line">tag[<span class="string">'class'</span>] = <span class="string">'verybold'</span> <span class="comment"># ä¿®æ”¹ &lt;blockquote class="verybold" &gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line">tag[<span class="string">'id'</span>] = <span class="number">1</span>   <span class="comment"># æ·»åŠ  &lt;blockquote class="verybold" id="1"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="keyword">del</span> tag[<span class="string">'class'</span>] <span class="comment"># &lt;blockquote id="1"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="keyword">del</span> tag[<span class="string">'id'</span>]    <span class="comment"># &lt;blockquote&gt;Extremely bold&lt;/blockquote&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>HTML5</code> ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—å¯ä»¥åŒ…å«å¤šä¸ªå€¼çš„å±æ€§ï¼Œ<code>class</code> (ä¸€ä¸ªtagå¯ä»¥æœ‰å¤šä¸ªCSSçš„class). <code>rel</code>  <code>rev</code> ï¼Œ <code>accept-charset</code> ï¼Œ <code>headers</code> ï¼Œ <code>accesskey</code> ç­‰ã€‚</p>
<p>å¤šå€¼å±æ€§çš„è¿”å›å€¼ä¸ºlistï¼Œ éå¤šå€¼å±æ€§çš„è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ï¼š</p>
<p><strong>æ³¨æ„ï¼šXMLæ ¼å¼çš„tagä¸åŒ…å«å¤šå€¼å±æ€§ã€‚</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šå€¼å±æ€§class</span></span><br><span class="line">css_soup = BeautifulSoup(<span class="string">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span>)</span><br><span class="line">css_soup.p[<span class="string">'class'</span>]</span><br><span class="line"><span class="comment"># ["body", "strikeout"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå¤šå€¼å±æ€§id</span></span><br><span class="line">id_soup = BeautifulSoup(<span class="string">'&lt;p id="my id"&gt;&lt;/p&gt;'</span>)</span><br><span class="line">id_soup.p[<span class="string">'id'</span>]</span><br><span class="line"><span class="comment"># 'my id'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šå€¼å±æ€§ä¿®æ”¹æ—¶</span></span><br><span class="line">rel_soup = BeautifulSoup(<span class="string">'&lt;p&gt;Back to the &lt;a rel="index"&gt;homepage&lt;/a&gt;&lt;/p&gt;'</span>)</span><br><span class="line">rel_soup.a[<span class="string">'rel'</span>] = [<span class="string">'index'</span>, <span class="string">'contents'</span>]</span><br><span class="line">print(rel_soup.p)</span><br><span class="line"><span class="comment"># &lt;p&gt;Back to the &lt;a rel="index contents"&gt;homepage&lt;/a&gt;&lt;/p&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h3><p>å­—ç¬¦ä¸²å¸¸è¢«åŒ…å«åœ¨<code>tag</code> å†…ã€‚Beautiful Soupç”¨<code>NavigableString</code>ç±»æ¥åŒ…è£…tagä¸­çš„å­—ç¬¦ä¸²: <code>tag.string</code></p>
<p>tagä¸­åŒ…å«çš„å­—ç¬¦ä¸²ä¸èƒ½ç¼–è¾‘,ä½†æ˜¯å¯ä»¥ç”¨ <code>replace_with()</code> æ–¹æ³•æ›¿æ¢æˆå…¶å®ƒçš„å­—ç¬¦ä¸²</p>
<h3 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h3><p><code>BeautifulSoup</code> å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å…¨éƒ¨å†…å®¹.å¤§éƒ¨åˆ†æ—¶å€™,å¯ä»¥æŠŠå®ƒå½“ä½œ <code>Tag</code> å¯¹è±¡ï¼Œå®ƒæ”¯æŒ éå†æ–‡æ¡£æ ‘ å’Œ æœç´¢æ–‡æ¡£æ ‘ ä¸­æè¿°çš„å¤§éƒ¨åˆ†çš„æ–¹æ³•ã€‚</p>
<h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><p>å¤„ç†HTMLå’ŒXMLä¸­çš„æ³¨é‡Šéƒ¨åˆ†ï¼Œ<code>Comment</code> å¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ <code>NavigableString</code> å¯¹è±¡ï¼Œä½†æ˜¯å½“å®ƒå‡ºç°åœ¨HTMLæ–‡æ¡£ä¸­æ—¶, <code>Comment</code> å¯¹è±¡ä¼šä½¿ç”¨ç‰¹æ®Šçš„æ ¼å¼è¾“å‡ºã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">markup = <span class="string">"&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;"</span></span><br><span class="line">soup = BeautifulSoup(markup)</span><br><span class="line">comment = soup.b.string</span><br><span class="line">type(comment)</span><br><span class="line"><span class="comment"># &lt;class 'bs4.element.Comment'&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="éå†æ–‡æ¡£æ ‘"><a href="#éå†æ–‡æ¡£æ ‘" class="headerlink" title="éå†æ–‡æ¡£æ ‘"></a>éå†æ–‡æ¡£æ ‘</h3><p>ä¸€ä¸ª<code>tag</code> å¯èƒ½åŒ…å«å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…¶ä»–<code>tag</code> ï¼Œè¿™äº›éƒ½æ˜¯è¯¥<code>tag</code> çš„å­èŠ‚ç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç‚¹å–å±æ€§çš„æ–¹å¼åªèƒ½è·å¾—å½“å‰åå­—çš„ç¬¬ä¸€ä¸ªtag</span></span><br><span class="line">soup.head</span><br><span class="line">soup.body.b</span><br><span class="line"><span class="comment"># æƒ³è¦å¾—åˆ°æ‰€æœ‰çš„&lt;a&gt;æ ‡ç­¾</span></span><br><span class="line">soup.find_all(<span class="string">'a'</span>) <span class="comment"># è¿”å›list</span></span><br></pre></td></tr></table></figure>
<h4 id="å­èŠ‚ç‚¹"><a href="#å­èŠ‚ç‚¹" class="headerlink" title="å­èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹</h4><h5 id="contents-å’Œ-children"><a href="#contents-å’Œ-children" class="headerlink" title=".contents å’Œ .children"></a>.contents å’Œ .children</h5><p><code>tag</code> çš„ <code>.contents</code> å±æ€§å¯ä»¥å°†<code>tag</code> çš„å­èŠ‚ç‚¹ä»¥åˆ—è¡¨çš„æ–¹å¼è¾“å‡º:</p>
<p>é€šè¿‡<code>tag</code> çš„ <code>.children</code> ç”Ÿæˆå™¨,å¯ä»¥å¯¹<code>tag</code> çš„å­èŠ‚ç‚¹è¿›è¡Œå¾ªç¯:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">head_tag = soup.head  <span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line">title_tag = head_tag.contents[<span class="number">0</span>]  <span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line">title_tag.contents    <span class="comment"># [u'The Dormouse's story']</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> title_tag.children:</span><br><span class="line">    print(child)      <span class="comment"># The Dormouse's story</span></span><br></pre></td></tr></table></figure>
<h5 id="descendants"><a href="#descendants" class="headerlink" title=".descendants"></a>.descendants</h5><p><code>.contents</code> å’Œ <code>.children</code> å±æ€§ä»…åŒ…å«tagçš„ç›´æ¥å­èŠ‚ç‚¹.ä¾‹å¦‚,<head>æ ‡ç­¾åªæœ‰ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹<code>&lt;title&gt;</code> ä½†<code>&lt;title&gt;</code> æ ‡ç­¾ä¹ŸåŒ…å«ä¸€ä¸ªå­èŠ‚ç‚¹:å­—ç¬¦ä¸² â€œThe Dormouseâ€™s storyâ€ï¼Œè¿™ç§æƒ…å†µä¸‹å­—ç¬¦ä¸² â€œThe Dormouseâ€™s storyâ€ä¹Ÿå±äº<code>&lt;head&gt;</code> æ ‡ç­¾çš„å­å­™èŠ‚ç‚¹. <code>.descendants</code> å±æ€§å¯ä»¥å¯¹æ‰€æœ‰tagçš„å­å­™èŠ‚ç‚¹è¿›è¡Œé€’å½’å¾ªç¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> head_tag.descendants:</span><br><span class="line">    print(child)</span><br><span class="line">    <span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line">    <span class="comment"># The Dormouse's story</span></span><br></pre></td></tr></table></figure>
<h5 id="string"><a href="#string" class="headerlink" title=".string"></a>.string</h5><p>å¦‚æœ<code>tag</code> åªæœ‰ä¸€ä¸ª <code>NavigableString</code> ç±»å‹å­èŠ‚ç‚¹,é‚£ä¹ˆè¿™ä¸ª<code>tag</code> å¯ä»¥ä½¿ç”¨ <code>.string</code> å¾—åˆ°å­èŠ‚ç‚¹</p>
<p>å¦åˆ™ï¼Œ<code>.string</code> çš„è¾“å‡ºç»“æœæ˜¯ <code>None</code></p>
<p>è¾“å‡ºçš„å­—ç¬¦ä¸²ä¸­å¯èƒ½åŒ…å«äº†å¾ˆå¤šç©ºæ ¼æˆ–ç©ºè¡Œ,ä½¿ç”¨ <code>.stripped_strings</code> å¯ä»¥å»é™¤å¤šä½™ç©ºç™½å†…å®¹</p>
<h6 id="bs4-element-get-text"><a href="#bs4-element-get-text" class="headerlink" title="bs4.element.get_text()"></a>bs4.element.get_text()</h6><p> Get all child strings, concatenated using the given separator (é»˜è®¤æ˜¯ç©ºæ ¼)</p>
<h4 id="çˆ¶èŠ‚ç‚¹"><a href="#çˆ¶èŠ‚ç‚¹" class="headerlink" title="çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹</h4><h5 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h5><h5 id="parents"><a href="#parents" class="headerlink" title=".parents"></a>.parents</h5><p>é€šè¿‡å…ƒç´ çš„ <code>.parents</code> å±æ€§å¯ä»¥é€’å½’å¾—åˆ°å…ƒç´ çš„æ‰€æœ‰çˆ¶è¾ˆèŠ‚ç‚¹</p>
<h5 id="å…„å¼ŸèŠ‚ç‚¹"><a href="#å…„å¼ŸèŠ‚ç‚¹" class="headerlink" title="å…„å¼ŸèŠ‚ç‚¹"></a>å…„å¼ŸèŠ‚ç‚¹</h5><p>åŒä¸€ä¸ªå…ƒç´ çš„å­èŠ‚ç‚¹</p>
<h5 id="next-sibling-å’Œ-previous-sibling"><a href="#next-sibling-å’Œ-previous-sibling" class="headerlink" title=".next_sibling å’Œ .previous_sibling"></a>.next_sibling å’Œ .previous_sibling</h5><p>åœ¨æ–‡æ¡£æ ‘ä¸­,ä½¿ç”¨ <code>.next_sibling</code> å’Œ <code>.previous_sibling</code> å±æ€§æ¥æŸ¥è¯¢å…„å¼ŸèŠ‚ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sibling_soup = BeautifulSoup(<span class="string">"&lt;a&gt;&lt;b&gt;text1&lt;/b&gt;&lt;c&gt;text2&lt;/c&gt;&lt;/b&gt;&lt;/a&gt;"</span>)</span><br><span class="line">sibling_soup.b.next_sibling  <span class="comment"># &lt;c&gt;text2&lt;/c&gt;</span></span><br><span class="line">sibling_soup.c.previous_sibling <span class="comment"># &lt;b&gt;text1&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="next-siblings-å’Œ-previous-siblings"><a href="#next-siblings-å’Œ-previous-siblings" class="headerlink" title=".next_siblings å’Œ .previous_siblings"></a>.next_siblings å’Œ .previous_siblings</h5><p>å¯¹å½“å‰èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹è¿­ä»£è¾“å‡º</p>
<h3 id="æœç´¢æ–‡æ¡£æ ‘"><a href="#æœç´¢æ–‡æ¡£æ ‘" class="headerlink" title="æœç´¢æ–‡æ¡£æ ‘"></a>æœç´¢æ–‡æ¡£æ ‘</h3><p><code>Beautiful Soup</code> ä¸­å®šä¹‰çš„æœç´¢æ–¹æ³•ï¼Œæ¯”å¦‚ <code>find()</code> å’Œ <code>find_all()</code></p>
<h4 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h4><p>find_all()</p>
<p>å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ—è¡¨ï¼ŒTrueï¼Œæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.find_all(<span class="string">'b'</span>) <span class="comment"># b æ ‡ç­¾</span></span><br><span class="line">soup.find_all(re.compile(<span class="string">"^b"</span>)) <span class="comment"># ä»¥bå¼€å¤´çš„æ ‡ç­¾</span></span><br><span class="line">soup.find_all([<span class="string">"a"</span>, <span class="string">"b"</span>]) <span class="comment"># å«æœ‰aæˆ–bçš„æ ‡ç­¾</span></span><br><span class="line">soup.find_all(<span class="literal">True</span>) <span class="comment"># True å¯ä»¥åŒ¹é…ä»»ä½•å€¼,æ‰¾åˆ°æ‰€æœ‰çš„tag,ä½†æ˜¯ä¸ä¼šè¿”å›å­—ç¬¦ä¸²èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"># æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_class_but_no_id</span><span class="params">(tag)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">'class'</span>) <span class="keyword">and</span> <span class="keyword">not</span> tag.has_attr(<span class="string">'id'</span>) <span class="comment"># æœ‰classï¼Œæ— id</span></span><br><span class="line">soup.find_all(has_class_but_no_id)</span><br></pre></td></tr></table></figure>
<h4 id="find-all"><a href="#find-all" class="headerlink" title="find_all())"></a>find_all())</h4><p><code>find_all(name, attrs, recursive , text , **kwargs)</code></p>
<ol>
<li><p>å¦‚æœä¸€ä¸ªæŒ‡å®šåå­—çš„å‚æ•°ä¸æ˜¯æœç´¢å†…ç½®çš„å‚æ•°å,æœç´¢æ—¶ä¼šæŠŠè¯¥å‚æ•°å½“ä½œæŒ‡å®šåå­—<code>tag</code> çš„å±æ€§æ¥æœç´¢<code>soup.find_all(id=&#39;link2&#39;)</code> </p>
</li>
<li><p>æœ‰äº›tagå±æ€§åœ¨æœç´¢ä¸èƒ½ä½¿ç”¨,æ¯”å¦‚HTML5ä¸­çš„ data-* å±æ€§,ä½†æ˜¯å¯ä»¥é€šè¿‡ <code>find_all()</code> æ–¹æ³•çš„ <code>attrs</code> å‚æ•°å®šä¹‰ä¸€ä¸ªå­—å…¸å‚æ•°æ¥æœç´¢åŒ…å«ç‰¹æ®Šå±æ€§çš„tag: <code>data_soup.find_all(attrs={&quot;data-foo&quot;: &quot;value&quot;})</code></p>
</li>
<li><p>æŒ‰ç…§CSSç±»åæœç´¢<code>tag</code> , ä½†æ ‡è¯†CSSç±»åçš„å…³é”®å­— <code>class</code> åœ¨Pythonä¸­æ˜¯ä¿ç•™å­—,ä½¿ç”¨ <code>class</code> åšå‚æ•°ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯.ä»<code>Beautiful Soup</code> çš„4.1.1ç‰ˆæœ¬å¼€å§‹,å¯ä»¥é€šè¿‡ class_ å‚æ•°æœç´¢æœ‰æŒ‡å®šCSSç±»åçš„<code>tag</code> : <code>soup.find_all(&quot;a&quot;, class_=&quot;sister&quot;)</code></p>
</li>
<li><p>é€šè¿‡ <code>text</code> å‚æ•°å¯ä»¥æœæœæ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²å†…å®¹</p>
</li>
<li><p><code>find_all()</code> æ–¹æ³•è¿”å›å…¨éƒ¨çš„æœç´¢ç»“æ„,å¦‚æœæ–‡æ¡£æ ‘å¾ˆå¤§é‚£ä¹ˆæœç´¢ä¼šå¾ˆæ…¢.å¦‚æœä¸éœ€è¦å…¨éƒ¨ç»“æœ,å¯ä»¥ä½¿ç”¨ <code>limit</code> å‚æ•°é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡.æ•ˆæœä¸SQLä¸­çš„limitå…³é”®å­—ç±»ä¼¼,å½“æœç´¢åˆ°çš„ç»“æœæ•°é‡è¾¾åˆ° <code>limit</code> çš„é™åˆ¶æ—¶,å°±åœæ­¢æœç´¢è¿”å›ç»“æœ.  <code>soup.find_all(&quot;a&quot;, limit=2)</code></p>
</li>
<li><p>recursive é»˜è®¤ä¸ºTrueï¼Œæ£€ç´¢å½“å‰tagçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œ<code>soup.html.find_all(&quot;title&quot;, recursive=False)</code> æœç´¢<code>tag</code> çš„ç›´æ¥å­èŠ‚ç‚¹</p>
</li>
<li><p>```python</p>
<h1 id="è¿™ä¸¤è¡Œä»£ç ç­‰ä»·"><a href="#è¿™ä¸¤è¡Œä»£ç ç­‰ä»·" class="headerlink" title="è¿™ä¸¤è¡Œä»£ç ç­‰ä»·"></a>è¿™ä¸¤è¡Œä»£ç ç­‰ä»·</h1><p>soup.find_all(â€œaâ€)<br>soup(â€œaâ€)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#### find()</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line"># è¿™ä¸¤è¡Œä»£ç å‡ ä¹ç­‰ä»·</span><br><span class="line">soup.find_all(&#39;title&#39;, limit&#x3D;1) # è¿”å›åˆ—è¡¨</span><br><span class="line">soup.find(&#39;title&#39;) # è¿”å›ç»“æœ ç­‰ä»·äº soup.title</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="selector-CSSé€‰æ‹©å™¨-çš„ç”¨æ³•"><a href="#selector-CSSé€‰æ‹©å™¨-çš„ç”¨æ³•" class="headerlink" title="selector (CSSé€‰æ‹©å™¨) çš„ç”¨æ³•"></a>selector (CSSé€‰æ‹©å™¨) çš„ç”¨æ³•</h4><p>Beautiful Soupæ”¯æŒå¤§éƒ¨åˆ†çš„CSSï¼ˆCSSï¼Œå…¨ç§°å«ä½œ Cascading Style Sheetsï¼Œå³å±‚å æ ·å¼è¡¨ï¼‰é€‰æ‹©å™¨ï¼Œ åœ¨ Tag æˆ– BeautifulSoup å¯¹è±¡çš„ .select() æ–¹æ³•ä¸­ä¼ å…¥å­—ç¬¦ä¸²å‚æ•°, å³å¯ä½¿ç”¨CSSé€‰æ‹©å™¨çš„è¯­æ³•æ‰¾åˆ°tagã€‚</p>
<h5 id="CSSæ ·å¼"><a href="#CSSæ ·å¼" class="headerlink" title="CSSæ ·å¼"></a>CSSæ ·å¼</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#head_wrapper</span><span class="selector-class">.s-ps-islite</span> <span class="selector-class">.s-p-top</span> &#123;   </span><br><span class="line">    <span class="attribute">position</span>: absolute;  </span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40px</span>;  </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;  </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">181px</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡¨ç¤º id =head_wrapper ä¸”ï¼ˆæ²¡æœ‰ç©ºæ ¼è¡¨æ˜¯&amp;ï¼‰class ä¸º s-ps-isliteçš„èŠ‚ç‚¹ï¼Œç„¶åå†é€‰ä¸­å…¶å†…éƒ¨ï¼ˆæœ‰ç©ºæ ¼è¡¨ç¤ºå†…éƒ¨ï¼‰çš„ class ä¸º s-p-top çš„èŠ‚ç‚¹ã€‚å­—å…¸å®šä¹‰äº†è¿™ä¸ªå…ƒç´ çš„å¸ƒå±€æ–¹å¼</p>
<p>è°·æ­Œæµè§ˆå™¨â†’å³é”®â†’æ£€æŸ¥â†’é¼ æ ‡æ”¾åˆ°ç½‘é¡µä¹¦åä¸Šï¼Œåœ¨æ£€æŸ¥çª—å£å³é”®â†’copyâ†’copy selectorï¼Œç»“æœå¦‚ä¸‹(&gt; æ‰¾åˆ°æŸä¸ªtagæ ‡ç­¾ä¸‹çš„å­æ ‡ç­¾)ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#subject_list</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(1)</span> &gt; <span class="selector-tag">div</span><span class="selector-class">.info</span> &gt; <span class="selector-tag">h2</span> &gt; <span class="selector-tag">a</span></span><br></pre></td></tr></table></figure>
<h5 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h5><ul>
<li>CSS é€‰æ‹©å™¨ç”¨æ¥å®šä½èŠ‚ç‚¹ï¼Œæ ¹æ® <strong>idã€classã€æ ‡ç­¾åç­›é€‰</strong>æ˜¯å…¶ä¸­æœ€å¸¸ç”¨çš„3ç§è¡¨ç¤ºæ–¹å¼ã€‚</li>
<li>CSS é€‰æ‹©å™¨è¿˜æ”¯æŒåµŒå¥—é€‰æ‹©ï¼Œå„ä¸ªé€‰æ‹©å™¨ä¹‹é—´<strong>ç©ºæ ¼åˆ†éš”</strong>ä»£è¡¨<strong>åµŒå¥—å…³ç³»</strong>ï¼Œå¦‚æœ<strong>ä¸åŠ ç©ºæ ¼</strong>ï¼Œä»£è¡¨<strong>å¹¶åˆ—</strong>å…³ç³»ã€‚</li>
<li><code>ul &gt; li</code>è¡¨ç¤ºé€‰æ‹©çˆ¶èŠ‚ç‚¹ä¸º ul èŠ‚ç‚¹çš„æ‰€æœ‰ li èŠ‚ç‚¹</li>
<li><code>li:nth-child(n)</code> è¡¨ç¤ºé€‰æ‹©å±äºå…¶çˆ¶èŠ‚ç‚¹çš„ç¬¬nä¸ªå­èŠ‚ç‚¹çš„æ‰€æœ‰ li èŠ‚ç‚¹</li>
<li>CSSé€‰æ‹©å™¨åŠå…¶ä»–è¯­æ³•è§„åˆ™å‚è§<a href="https://python3webspider.cuiqingcai.com/2.2web-wang-ye-ji-chu#2-2-4-xuan-ze-qi" target="_blank" rel="noopener">è¯¥è¡¨æ ¼</a></li>
</ul>
<h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><p>é€šè¿‡get_text()å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç å¾—åˆ°æ¯ä¸€é¡µé¢çš„ä¹¦åï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">book_name_list = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">21</span>): <span class="comment"># æ¯é¡µ20æœ¬ä¹¦</span></span><br><span class="line">        book_name = soup.select(<span class="string">"#subject_list &gt; ul &gt; li:nth-child("</span> + str(j) + <span class="string">") &gt; div.info &gt; h2 &gt; a"</span>)  </span><br><span class="line">        <span class="comment"># ç¬¬29é¡µåªæœ‰19æœ¬ä¹¦</span></span><br><span class="line">        <span class="keyword">for</span> book_name <span class="keyword">in</span> book_name:</span><br><span class="line">            book_name_list.append(book_name.get_text().replace(<span class="string">" "</span>,<span class="string">""</span>).replace(<span class="string">"\r"</span>, <span class="string">""</span>).replace(<span class="string">"\n"</span>, <span class="string">""</span>))</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹æ–‡æ¡£æ ‘"><a href="#ä¿®æ”¹æ–‡æ¡£æ ‘" class="headerlink" title="ä¿®æ”¹æ–‡æ¡£æ ‘"></a>ä¿®æ”¹æ–‡æ¡£æ ‘</h3><h3 id="è§£æéƒ¨åˆ†æ–‡æ¡£"><a href="#è§£æéƒ¨åˆ†æ–‡æ¡£" class="headerlink" title="è§£æéƒ¨åˆ†æ–‡æ¡£"></a>è§£æéƒ¨åˆ†æ–‡æ¡£</h3><p>å¦‚æœä»…ä»…å› ä¸ºæƒ³è¦æŸ¥æ‰¾æ–‡æ¡£ä¸­çš„<a>æ ‡ç­¾è€Œå°†æ•´ç‰‡æ–‡æ¡£è¿›è¡Œè§£æ,å®åœ¨æ˜¯æµªè´¹å†…å­˜å’Œæ—¶é—´.æœ€å¿«çš„æ–¹æ³•æ˜¯ä»ä¸€å¼€å§‹å°±æŠŠ<a>æ ‡ç­¾ä»¥å¤–çš„ä¸œè¥¿éƒ½å¿½ç•¥æ‰. <code>SoupStrainer</code> ç±»å¯ä»¥å®šä¹‰æ–‡æ¡£çš„æŸæ®µå†…å®¹,è¿™æ ·æœç´¢æ–‡æ¡£æ—¶å°±ä¸å¿…å…ˆè§£ææ•´ç¯‡æ–‡æ¡£,åªä¼šè§£æåœ¨ <code>SoupStrainer</code> ä¸­å®šä¹‰è¿‡çš„æ–‡æ¡£. åˆ›å»ºä¸€ä¸ª <code>SoupStrainer</code> å¯¹è±¡å¹¶ä½œä¸º <code>parse_only</code> å‚æ•°ç»™ <code>BeautifulSoup</code> çš„æ„é€ æ–¹æ³•å³å¯.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> SoupStrainer</span><br><span class="line">only_a_tags = SoupStrainer(<span class="string">"a"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-è§£æåº“pyquery"><a href="#6-è§£æåº“pyquery" class="headerlink" title="6. è§£æåº“pyquery"></a>6. è§£æåº“pyquery</h2><p>ç”¨æ³•å’ŒJQueryç±»ä¼¼</p>
<h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><h4 id="å­—ç¬¦ä¸²åˆå§‹åŒ–"><a href="#å­—ç¬¦ä¸²åˆå§‹åŒ–" class="headerlink" title="å­—ç¬¦ä¸²åˆå§‹åŒ–"></a>å­—ç¬¦ä¸²åˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html = <span class="string">" &lt;html blabla"</span></span><br><span class="line">pq(html)</span><br></pre></td></tr></table></figure>
<h4 id="URLåˆå§‹åŒ–"><a href="#URLåˆå§‹åŒ–" class="headerlink" title="URLåˆå§‹åŒ–"></a>URLåˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line">doc = pq(url=<span class="string">'http://cuiqingcai.com'</span>)</span><br><span class="line">print(doc(<span class="string">'title'</span>))</span><br></pre></td></tr></table></figure>
<p>PyQuery å¯¹è±¡ä¼šé¦–å…ˆè¯·æ±‚è¿™ä¸ª URLï¼Œç„¶åç”¨å¾—åˆ°çš„ HTML å†…å®¹å®Œæˆåˆå§‹åŒ–ï¼Œè¿™å…¶å®å°±ç›¸å½“äºç”¨ç½‘é¡µçš„æºä»£ç ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’ç»™ PyQuery ç±»æ¥åˆå§‹åŒ–ã€‚</p>
<p>ç›¸å½“äºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">doc = pq(requests.get(<span class="string">'http://cuiqingcai.com'</span>).text)</span><br><span class="line">print(doc(<span class="string">'title'</span>))</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡ä»¶åˆå§‹åŒ–"><a href="#æ–‡ä»¶åˆå§‹åŒ–" class="headerlink" title="æ–‡ä»¶åˆå§‹åŒ–"></a>æ–‡ä»¶åˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pq(filename=<span class="string">'dem.html'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="CSSé€‰æ‹©å™¨-1"><a href="#CSSé€‰æ‹©å™¨-1" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">doc=pq(html)</span><br><span class="line">print(doc(<span class="string">"#content .info name"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h3><h4 id="å­èŠ‚ç‚¹-1"><a href="#å­èŠ‚ç‚¹-1" class="headerlink" title="å­èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹</h4><h5 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h5><p>æŸ¥æ‰¾æ‰€æœ‰å­å­™èŠ‚ç‚¹</p>
<p>ä¼šæ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå’ŒBeautifulSoupä¸­çš„find()ä¸åŒï¼Œç±»ä¼¼äºBSä¸­çš„find_all()</p>
<h5 id="children"><a href="#children" class="headerlink" title="children()"></a>children()</h5><p>åªæŸ¥æ‰¾å­èŠ‚ç‚¹ ï¼Œ æ”¯æŒCSSé€‰æ‹©å™¨</p>
<h4 id="çˆ¶èŠ‚ç‚¹-1"><a href="#çˆ¶èŠ‚ç‚¹-1" class="headerlink" title="çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹</h4><h5 id="parent-1"><a href="#parent-1" class="headerlink" title="parent()"></a>parent()</h5><p>ç›´æ¥çˆ¶èŠ‚ç‚¹</p>
<h5 id="parents-1"><a href="#parents-1" class="headerlink" title="parents()"></a>parents()</h5><p>ç¥–è´¤çˆ¶èŠ‚ç‚¹</p>
<h4 id="å…„å¼ŸèŠ‚ç‚¹-1"><a href="#å…„å¼ŸèŠ‚ç‚¹-1" class="headerlink" title="å…„å¼ŸèŠ‚ç‚¹"></a>å…„å¼ŸèŠ‚ç‚¹</h4><h5 id="sublings"><a href="#sublings" class="headerlink" title="sublings()"></a>sublings()</h5><h3 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h3><p>PyQueryçš„é€‰æ‹©ç»“æœä¸ä¼šåƒBeautifulSoupä¸€æ ·è¿”å›listï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å¤šä¸ªæˆ–å•ä¸ªèŠ‚ç‚¹</p>
<p>è¿”å›å•ä¸ªèŠ‚ç‚¹å¯ä»¥ç›´æ¥ç”¨str()uè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œ</p>
<p>è¿”å›å¤šä¸ªèŠ‚ç‚¹éœ€è¦éå†ï¼Œæ–¯å¥¥ç”¨items()æ–¹æ³•ï¼Œè¿”å›ç”Ÿæˆå™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lis = doc(<span class="string">'li'</span>).items()</span><br><span class="line">print(type(lis)) <span class="comment"># class 'generator'</span></span><br><span class="line"><span class="keyword">for</span> li <span class="keyword">in</span> lis:</span><br><span class="line">    print(li, type(li))</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ä¿¡æ¯"><a href="#è·å–ä¿¡æ¯" class="headerlink" title="è·å–ä¿¡æ¯"></a>è·å–ä¿¡æ¯</h3><h4 id="è·å–å±æ€§attr"><a href="#è·å–å±æ€§attr" class="headerlink" title="è·å–å±æ€§attr()"></a>è·å–å±æ€§attr()</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = doc(<span class="string">'a'</span>)</span><br><span class="line">a.attr(<span class="string">'href'</span>)  <span class="comment"># åªä¼šè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ ‡ç­¾ï¼ˆèŠ‚ç‚¹ï¼‰çš„hrefå±æ€§</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè·å–æ‰€æœ‰èŠ‚ç‚¹çš„å±æ€§ï¼Œéœ€è¦è°ƒç”¨items()éå†ã€‚</p>
<h4 id="è·å–æ–‡æœ¬"><a href="#è·å–æ–‡æœ¬" class="headerlink" title="è·å–æ–‡æœ¬"></a>è·å–æ–‡æœ¬</h4><p>text()æ–¹æ³•è¿”å›<strong>æ‰€æœ‰</strong>èŠ‚ç‚¹ä¸‹çº¯æ–‡å­—å†…å®¹ï¼Œå³ä¸éœ€è¦éå†ã€‚</p>
<p>html()æ–¹æ³•è¿”å›HTMLæ–‡æœ¬ï¼Œå¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦<strong>éå†</strong>ã€‚</p>
<h3 id="èŠ‚ç‚¹æ“ä½œ"><a href="#èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="èŠ‚ç‚¹æ“ä½œ"></a>èŠ‚ç‚¹æ“ä½œ</h3><h4 id="addClass-å’Œ-removeClass"><a href="#addClass-å’Œ-removeClass" class="headerlink" title="addClass å’Œ removeClass"></a>addClass å’Œ removeClass</h4><p>æ·»åŠ ï¼Œåˆ é™¤classè¿™ä¸ªå±æ€§</p>
<h4 id="attrã€textã€html"><a href="#attrã€textã€html" class="headerlink" title="attrã€textã€html"></a>attrã€textã€html</h4><p>attræ“ä½œå…¶ä»–å±æ€§ï¼Œ<code>li.attr(&#39;name&#39;, &#39;link&#39;)</code> å°†nameå±æ€§çš„å€¼ä¿®æ”¹ä¸ºlinkï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ”¹å±æ€§ã€‚</p>
<p>å¦‚æœ attr æ–¹æ³•åªä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°çš„å±æ€§åï¼Œåˆ™æ˜¯è·å–è¿™ä¸ªå±æ€§å€¼ï¼›å¦‚æœä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨æ¥ä¿®æ”¹å±æ€§å€¼ã€‚text å’Œ html æ–¹æ³•å¦‚æœä¸ä¼ å‚æ•°ï¼Œåˆ™æ˜¯è·å–èŠ‚ç‚¹å†…çº¯æ–‡æœ¬å’Œ HTML æ–‡æœ¬ï¼›å¦‚æœä¼ å…¥å‚æ•°ï¼Œåˆ™è¿›è¡Œèµ‹å€¼ã€‚</p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><p><strong>ä¸ºæå–ä¿¡æ¯å¸¦æ¥ä¾¿åˆ©</strong></p>
<h3 id="ä¼ªç±»é€‰æ‹©å™¨"><a href="#ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="ä¼ªç±»é€‰æ‹©å™¨"></a>ä¼ªç±»é€‰æ‹©å™¨</h3><p>CSSé€‰æ‹©å™¨æ”¯æŒå„ç§å„æ ·çš„ä¼ªç±»é€‰æ‹©å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">doc = pq(html)</span><br><span class="line">li = doc(<span class="string">'li:first-child'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:last-child'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:nth-child(2)'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:gt(2)'</span>) <span class="comment"># ä¸‰ä¸ªä»¥åçš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:nth-child(2n)'</span>) <span class="comment"># å¶æ•°ä½ç½®çš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:contains(second)'</span>) <span class="comment">#åŒ…å«secondçš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure>
<h2 id="7-ä½¿ç”¨ä»£ç†IP"><a href="#7-ä½¿ç”¨ä»£ç†IP" class="headerlink" title="7. ä½¿ç”¨ä»£ç†IP"></a>7. ä½¿ç”¨ä»£ç†IP</h2><p>å¾ˆå¤šç½‘ç«™å¯¹äºçˆ¬è™«åšäº†ä¸€å®šé™åˆ¶ï¼ŒIPå®¹æ˜“è¿›å°é»‘å±‹ï¼Œæ‰€ä»¥éœ€è¦é‡‡ç”¨ä»£ç†IPã€‚</p>
<h3 id="ä»£ç†çš„ç§ç±»"><a href="#ä»£ç†çš„ç§ç±»" class="headerlink" title="ä»£ç†çš„ç§ç±»"></a>ä»£ç†çš„ç§ç±»</h3><ul>
<li><p><strong>é€æ˜ä»£ç† (Transparent Proxy)</strong>: ä¸ä½†æ”¹åŠ¨äº†æ•°æ®åŒ…ï¼Œè¿˜ä¼šå‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯çš„çœŸå®IPï¼Œçº¦ç­‰äºæ²¡ç”¨ã€‚</p>
<ul>
<li>REMOTE_ADDR = Proxy IP</li>
<li>HTTP_VIA = Proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = Your IP</li>
</ul>
</li>
<li><p><strong>æ™®é€šåŒ¿åä»£ç† (Anonymous Proxy)</strong>ï¼šä¼šåœ¨æ•°æ®åŒ…ä¸Šåšä¸€äº›æ”¹åŠ¨ï¼ŒæœåŠ¡å™¨ä¸Šå‘ç°è¿™æ˜¯ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸æ¸…æ¥šçœŸå®IPåœ°å€ï¼ˆæœ‰ä¸€å®šå‡ ç‡èƒ½è¿½æŸ¥åˆ°ï¼‰ã€‚</p>
<ul>
<li>REMOTE_ADDR = proxy IP</li>
<li>HTTP_VIA = proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = proxy IP</li>
</ul>
</li>
<li><p><strong>æ··æ·†ä»£ç†(Distorting Proxies)</strong>ï¼šä¼šåœ¨æ•°æ®åŒ…ä¸Šåšä¸€äº›æ”¹åŠ¨ï¼ŒæœåŠ¡å™¨ä¸Šå‘ç°è¿™æ˜¯ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä½†ä¼šå¾—åˆ°ä¸€ä¸ªå‡çš„IPåœ°å€.</p>
<ul>
<li>REMOTE_ADDR = proxy IP</li>
<li>HTTP_VIA = proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = Random IP address</li>
</ul>
</li>
<li><p><strong>é«˜åŒ¿ä»£ç†(Elite proxyæˆ–High Anonymity Proxy)</strong>ï¼šä¼šå°†æ•°æ®åŒ…åŸå°ä¸åŠ¨çš„è½¬å‘ï¼Œåœ¨æœåŠ¡ç«¯çœ‹æ¥å°±å¥½åƒçœŸçš„æ˜¯ä¸€ä¸ªæ™®é€šå®¢æˆ·ç«¯åœ¨è®¿é—®ï¼Œè€Œè®°å½•çš„IPåˆ™æ˜¯ä»£ç†æœåŠ¡å™¨çš„IPã€‚</p>
<ul>
<li>REMOTE_ADDR = Proxy IP</li>
<li>HTTP_VIA = not determined</li>
<li>HTTP_X_FORWARDED_FOR = not determined</li>
</ul>
<p><strong>å‚è€ƒ</strong>ï¼š<a href="https://blog.csdn.net/a19860903/article/details/47146715" target="_blank" rel="noopener">https://blog.csdn.net/a19860903/article/details/47146715</a></p>
</li>
</ul>
<h3 id="ä»£ç†IPç½‘ç«™"><a href="#ä»£ç†IPç½‘ç«™" class="headerlink" title="ä»£ç†IPç½‘ç«™"></a>ä»£ç†IPç½‘ç«™</h3><ol>
<li><a href="https://www.kuaidaili.com/ops/proxylist/1/" target="_blank" rel="noopener">å¿«ä»£ç†</a></li>
<li><a href="http://www.66ip.cn/index.html" target="_blank" rel="noopener">66ä»£ç†</a></li>
</ol>
<h3 id="å»ºç«‹ä»£ç†IPæ± "><a href="#å»ºç«‹ä»£ç†IPæ± " class="headerlink" title="å»ºç«‹ä»£ç†IPæ± "></a>å»ºç«‹ä»£ç†IPæ± </h3><p>ä»¥<a href="https://www.kuaidaili.com/ops/proxylist/1/" target="_blank" rel="noopener">å¿«ä»£ç†</a>ä¸ºä¾‹ï¼š</p>
<details>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_proxy</span><span class="params">(headers)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    è·å–ä»£ç†IPåˆ—è¡¨</span></span><br><span class="line"><span class="string">    :return: ip_list [&#123;"https": ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">     """</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    ip_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">        <span class="comment"># å¿«ä»£ç†</span></span><br><span class="line">        base_url = <span class="string">"https://www.kuaidaili.com/ops/proxylist/"</span> + str(i)</span><br><span class="line">        html = requests.get(base_url, headers=headers).text</span><br><span class="line"> </span><br><span class="line">        pattern = <span class="string">'\d+\.\d+\.\d+\.\d+'</span></span><br><span class="line">        re_list = re.findall(pattern, html)</span><br><span class="line">        <span class="keyword">for</span> ip_port <span class="keyword">in</span> re_list:</span><br><span class="line">            ip_list.append(&#123;<span class="string">"https"</span>: ip_port&#125;)</span><br><span class="line">    <span class="keyword">return</span> ip_list</span><br><span class="line"><span class="comment"># å¿«ä»£ç† ä¸Šæœ‰äº›IPç±»å‹ä»…ä¸ºhttpï¼Œæœ‰äº›ä¸ºhttpï¼Œhttps</span></span><br></pre></td></tr></table></figure>

</details>

<h3 id="æµ‹è¯•ä»£ç†IP"><a href="#æµ‹è¯•ä»£ç†IP" class="headerlink" title="æµ‹è¯•ä»£ç†IP"></a>æµ‹è¯•ä»£ç†IP</h3><p>é€šè¿‡requestç›´æ¥è¯·æ±‚ä¸€ä¸ªç½‘å€ï¼Œçœ‹æ˜¯å¦é€šè¿‡æˆ–è€…çœ‹çŠ¶æ€ç æ˜¯å¦ä¸º200(<strong><code>request.status_code == 200</code></strong>)</p>
<p><details></p>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_proxy</span><span class="params">(ip_list, headers, test_url)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æµ‹è¯•ä»£ç†IP</span></span><br><span class="line"><span class="string">    :param ip_list:</span></span><br><span class="line"><span class="string">    :return: ip_list [&#123;"https": ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> proxy <span class="keyword">in</span> ip_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(test_url, headers=headers, proxies=proxy, timeout=<span class="number">5</span>)  </span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.ConnectTimeout:</span><br><span class="line">            ip_list.pop(i)</span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ip_list</span><br></pre></td></tr></table></figure>
<p><details><br><strong>ä½†æ˜¯ä¸Šè¿°ä»£ç çš„é—®é¢˜æ˜¯è®¾ç½®äº†ä»£ç†IPï¼Œè¯·æ±‚ç½‘ç«™é€šè¿‡ï¼Œä¹Ÿä¸ä»£è¡¨IPæœ‰æ•ˆï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸æ˜¯ç”¨äº†è®¾ç½®çš„ä»£ç†IPè€Œæ˜¯ç”¨äº†è‡ªå·±å…¬ç½‘ä¸‹çš„IPï¼ˆå¯ä»¥ç”¨ifconfigæŸ¥è¯¢æ‰€åœ¨å±€åŸŸç½‘ä¸‹çš„IPï¼ŒåŠç§ç½‘IPï¼‰</strong><a href="https://blog.csdn.net/Chenftli/article/details/86701563" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<p><details></p>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_proxy_3</span><span class="params">(ip_list)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æµ‹è¯•æ˜¯ç†IP</span></span><br><span class="line"><span class="string">    :param ip_list:</span></span><br><span class="line"><span class="string">    :return ip_valid_list: [&#123;https: ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    ip_valid_list = []</span><br><span class="line">    test_url =  <span class="string">"http://httpbin.org/get"</span> <span class="comment"># æ”¹ç½‘ç«™å¯æµ‹è¯•ç›®å‰è¯·æ±‚çš„IP</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> proxy <span class="keyword">in</span> ip_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            res = requests.get(test_url, proxies=proxy, headers=headers, timeout=<span class="number">8</span>)</span><br><span class="line">            data = response.text.strip()</span><br><span class="line">            proxyIP = json.loads(data)[<span class="string">'origin'</span>]</span><br><span class="line">            <span class="keyword">if</span> proxyIP != proxy[<span class="string">"https"</span>]:</span><br><span class="line">                ip_list.pop(i)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="comment">#print("proxy invalid")</span></span><br><span class="line">            ip_list.pop(i)</span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ip_valid_list</span><br></pre></td></tr></table></figure>
<details>

<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p><details></p>
<summary><mark>éšè—</mark></summary>

<p>Max retries exceeded with url</p>
<ol>
<li><p>requests.exceptions.<strong>ProxyError</strong>: HTTPConnectionPool(host=â€™**<em>â€˜, port=443): Max retries exceeded with url: \</em>** (Caused by ProxyError(â€˜Cannot connect to proxy.â€™, NewConnectionError(â€˜<urllib3.connection.HTTPConnection object at 0x0000015363189190>: </p>
<blockquote>
<p>IPä»£ç†ä½¿ç”¨çš„åè®®ä¸æ­£å¸¸ï¼Œhttpå’Œhttpsä¸èƒ½å†™é”™ã€‚</p>
</blockquote>
</li>
<li><p>requests.exceptions.<strong>ConnectionError</strong>: HTTPSConnectionPool(host=<em>**, , port=443): Max retries exceeded with url: \</em>** (Caused by NewConnectionError(â€˜<urllib3.connection.VerifiedHTTPSConnection object at 0x7fb51433af98>:</p>
<blockquote>
<p>httpçš„è¿æ¥æ•°è¶…è¿‡æœ€å¤§é™åˆ¶ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹è¿æ¥æ˜¯Keep-aliveçš„ï¼Œæ‰€ä»¥å¯¼è‡´æœåŠ¡å™¨ä¿æŒäº†å¤ªå¤šè¿æ¥è€Œä¸èƒ½å†æ–°å»ºè¿æ¥ã€‚</p>
</blockquote>
</li>
<li><p>HTTPSConnectionPool(host=â€™***â€˜, port=443): Max retries exceeded with url: ***(Caused by SSLError(SSLError(1, uâ€™[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:579)â€™),))</p>
<blockquote>
<p>Requests å¯ä»¥ä¸º HTTPS è¯·æ±‚éªŒè¯ SSL è¯ä¹¦ï¼Œå°±åƒ web æµè§ˆå™¨ä¸€æ ·ã€‚SSL éªŒè¯é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œå¦‚æœè¯ä¹¦éªŒè¯å¤±è´¥ï¼ŒRequests ä¼šæŠ›å‡º SSLErrorã€‚</p>
<ul>
<li><p>ä¸ç”¨sslè¯ä¹¦éªŒè¯ï¼Œå°†verify è®¾ç½®ä¸º Falseï¼Œ<strong>page=requests.get(urlï¼Œverify=False)</strong></p>
</li>
<li><p>requestsé»˜è®¤æ˜¯keep-aliveçš„ï¼Œå¯èƒ½æ²¡æœ‰é‡Šæ”¾ï¼ŒåŠ å‚æ•° headers={â€˜Connectionâ€™:â€™closeâ€™}</p>
</li>
<li><p>å¢åŠ è¿æ¥é‡è¯•æ¬¡æ•°ï¼š<code>requests.adapters.DEFAULT_RETRIES = 5</code> </p>
</li>
<li><p>å…³é—­å¤šä½™çš„è¿æ¥ï¼šrequestsä½¿ç”¨äº†urllib3åº“ï¼Œé»˜è®¤çš„http connectionæ˜¯keep-aliveçš„ï¼Œrequestsè®¾ç½®Falseå…³é—­ã€‚<code>s = requests.session()       s.keep_alive = False</code> </p>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/wdh315172/article/details/80491668" target="_blank" rel="noopener">https://blog.csdn.net/wdh315172/article/details/80491668</a></p>
</li>
</ul>
</blockquote>
<details>

</li>
</ol>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><ul>
<li><a href="https://github.com/Hopetree/Jobs-search" target="_blank" rel="noopener">æ‹›è˜ç½‘ç«™çˆ¬è™«</a></li>
<li><a href="https://github.com/Hopetree/E-commerce-crawlers" target="_blank" rel="noopener">ç”µå•†ç½‘ç«™çˆ¬è™«</a></li>
<li><a href="https://github.com/Hopetree/Spiders100" target="_blank" rel="noopener">Spiders100</a></li>
<li><a href="https://github.com/Hopetree/MyTools" target="_blank" rel="noopener">ä¸€äº›ç•Œé¢åŒ–çš„çˆ¬è™«å°å·¥å…·</a></li>
</ul>
<hr>
<h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><ol>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/" target="_blank" rel="noopener">BeautifulSoup4å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="[https://www.jianshu.com/p/2b783f7914c6](https://www.jianshu.com/p/2b783f7914c6">bs4æ¨¡å—ä½¿ç”¨æŒ‡å—</a>)</li>
<li><a href="https://python3webspider.cuiqingcai.com/" target="_blank" rel="noopener">Python3ç½‘ç»œçˆ¬è™«å¼€å‘å®æˆ˜</a>â€‹</li>
</ol>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>requests</tag>
        <tag>BeautifulSoup</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ ä¹‹Ajax,Selenium,Splash</title>
    <url>/2020/07/29/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8BAjax/</url>
    <content><![CDATA[<h2 id="å¼‚æ­¥æ•°æ®åŠ è½½"><a href="#å¼‚æ­¥æ•°æ®åŠ è½½" class="headerlink" title="å¼‚æ­¥æ•°æ®åŠ è½½"></a>å¼‚æ­¥æ•°æ®åŠ è½½</h2><p>å‘ç½‘ç«™è¿›è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œä¸€æ¬¡åªä¼ éƒ¨åˆ†æ•°æ®ã€‚å¦‚ï¼šæœ‰äº›ç½‘é¡µä¸éœ€è¦ç‚¹å‡»ä¸‹ä¸€é¡µï¼Œå…¶å†…å®¹ä¹Ÿå¯ä»¥æºæºä¸æ–­åœ°åŠ è½½ã€‚</p>
<h2 id="Ajaxæ•°æ®çˆ¬å–"><a href="#Ajaxæ•°æ®çˆ¬å–" class="headerlink" title="Ajaxæ•°æ®çˆ¬å–"></a>Ajaxæ•°æ®çˆ¬å–</h2><a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯Ajax"><a href="#ä»€ä¹ˆæ˜¯Ajax" class="headerlink" title="ä»€ä¹ˆæ˜¯Ajax"></a>ä»€ä¹ˆæ˜¯Ajax</h3><p>Ajaxï¼Œå…¨ç§°ä¸º Asynchronous JavaScript and XMLï¼Œå³å¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚å®ƒä¸æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯åˆ©ç”¨ JavaScript ï¼ˆJavaScript å¯ä»¥å®ç°é¡µé¢çš„å„ç§äº¤äº’åŠŸèƒ½ï¼‰åœ¨ä¿è¯é¡µé¢ä¸è¢«åˆ·æ–°ã€é¡µé¢é“¾æ¥ä¸æ”¹å˜çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</p>
<p>ä¸€èˆ¬å‡ºç°åœ¨é¡µé¢åº•éƒ¨æœ‰â€œåŠ è½½æ›´å¤šâ€ï¼Œè¿™å…¶å®å°±æ˜¯ JavaScript å‘æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ª Ajax è¯·æ±‚ï¼Œç„¶åè·å–æ–°çš„å¾®åšæ•°æ®ï¼Œå°†å…¶è§£æï¼Œå¹¶å°†å…¶æ¸²æŸ“åœ¨ç½‘é¡µä¸­ã€‚</p>
<h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><p>ç®€å•åˆ†ä¸ºä»¥ä¸‹ 3 æ­¥ï¼š</p>
<ul>
<li><p>å‘é€è¯·æ±‚ï¼šAjax æœ‰å…¶ç‰¹æ®Šçš„è¯·æ±‚ç±»å‹ï¼Œå«ä½œ xhrï¼ˆXMLHttpRequestï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlhttp;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">    <span class="comment">//code for IE7+, Firefox, Chrome, Opera, Safari</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> XMLHttpRequest();&#125; <span class="keyword">else</span> &#123;<span class="comment">//code for IE6, IE5</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>) &#123;<span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(<span class="string">"POST"</span>,<span class="string">"/ajax/"</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºäº† XMLHttpRequest å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ onreadystatechange å±æ€§è®¾ç½®äº†ç›‘å¬ï¼Œç„¶åè°ƒç”¨ open() å’Œ send() æ–¹æ³•å‘æŸä¸ªé“¾æ¥ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡å™¨ï¼‰å‘é€äº†è¯·æ±‚ã€‚</p>
<p>å‰é¢ç”¨ Python å®ç°è¯·æ±‚å‘é€ä¹‹åï¼Œå¯ä»¥å¾—åˆ°å“åº”ç»“æœï¼Œä½†è¿™é‡Œè¯·æ±‚çš„å‘é€å˜æˆ JavaScript æ¥å®Œæˆã€‚ç”±äºè®¾ç½®äº†ç›‘å¬ï¼Œæ‰€ä»¥å½“æœåŠ¡å™¨è¿”å›å“åº”æ—¶ï¼Œonreadystatechange å¯¹åº”çš„æ–¹æ³•ä¾¿ä¼šè¢«è§¦å‘ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢è§£æå“åº”å†…å®¹å³å¯ã€‚</p>
</li>
<li><p>è§£æå†…å®¹</p>
<p>å¾—åˆ°å“åº”ä¹‹åï¼Œonreadystatechange å±æ€§å¯¹åº”çš„æ–¹æ³•ä¾¿ä¼šè¢«è§¦å‘ï¼Œæ­¤æ—¶åˆ©ç”¨ xmlhttp çš„ responseText å±æ€§ä¾¿å¯å–åˆ°å“åº”å†…å®¹ã€‚è¿™ç±»ä¼¼äº Python ä¸­åˆ©ç”¨ requests å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç„¶åå¾—åˆ°å“åº”çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆè¿”å›å†…å®¹å¯èƒ½æ˜¯ HTMLï¼Œå¯èƒ½æ˜¯ JSONï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨æ–¹æ³•ä¸­ç”¨ JavaScript è¿›ä¸€æ­¥å¤„ç†å³å¯ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ˜¯ JSON çš„è¯ï¼Œå¯ä»¥è¿›è¡Œè§£æå’Œè½¬åŒ–ã€‚</p>
</li>
<li><p>æ¸²æŸ“ç½‘é¡µ</p>
<p>JavaScript æœ‰æ”¹å˜ç½‘é¡µå†…å®¹çš„èƒ½åŠ›ï¼Œè§£æå®Œå“åº”å†…å®¹ä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨ JavaScript æ¥é’ˆå¯¹è§£æå®Œçš„å†…å®¹å¯¹ç½‘é¡µè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†äº†ã€‚æ¯”å¦‚ï¼Œé€šè¿‡ document.getElementById().innerHTML è¿™æ ·çš„æ“ä½œï¼Œä¾¿å¯ä»¥å¯¹æŸä¸ªå…ƒç´ å†…çš„æºä»£ç è¿›è¡Œæ›´æ”¹ï¼Œè¿™æ ·ç½‘é¡µæ˜¾ç¤ºçš„å†…å®¹å°±æ”¹å˜äº†ï¼Œè¿™æ ·çš„æ“ä½œä¹Ÿè¢«ç§°ä½œ DOM æ“ä½œï¼Œå³å¯¹ Document ç½‘é¡µæ–‡æ¡£è¿›è¡Œæ“ä½œï¼Œå¦‚æ›´æ”¹ã€åˆ é™¤ç­‰ã€‚</p>
<p><code>document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText</code> ä¾¿å°† ID ä¸º myDiv çš„èŠ‚ç‚¹å†…éƒ¨çš„ HTML ä»£ç æ›´æ”¹ä¸ºæœåŠ¡å™¨è¿”å›çš„å†…å®¹ï¼Œè¿™æ · myDiv å…ƒç´ å†…éƒ¨ä¾¿ä¼šå‘ˆç°å‡ºæœåŠ¡å™¨è¿”å›çš„æ–°æ•°æ®ï¼Œç½‘é¡µçš„éƒ¨åˆ†å†…å®¹çœ‹ä¸Šå»å°±æ›´æ–°äº†ã€‚</p>
</li>
</ul>
<h2 id="åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–"><a href="#åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–" class="headerlink" title="åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–"></a>åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–</h2><p>JavaScript åŠ¨æ€æ¸²æŸ“çš„é¡µé¢ä¸æ­¢ Ajax è¿™ä¸€ç§ï¼Œå¹¶ä¸”æ·˜å®è¿™ç§é¡µé¢ï¼Œå®ƒå³ä½¿æ˜¯ Ajax è·å–çš„æ•°æ®ï¼Œä½†æ˜¯å…¶ Ajax æ¥å£å«æœ‰å¾ˆå¤šåŠ å¯†å‚æ•°ï¼Œæˆ‘ä»¬éš¾ä»¥ç›´æ¥æ‰¾å‡ºå…¶è§„å¾‹ï¼Œä¹Ÿå¾ˆéš¾ç›´æ¥åˆ†æ Ajax æ¥æŠ“å–ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ç›´æ¥ä½¿ç”¨æ¨¡æ‹Ÿæµè§ˆå™¨è¿è¡Œçš„æ–¹å¼æ¥å®ç°</strong> ï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ˜¯ä»€ä¹ˆæ ·ï¼ŒæŠ“å–çš„æºç å°±æ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯å¯è§å³å¯çˆ¬ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å†å»ç®¡ç½‘é¡µå†…éƒ¨çš„ JavaScript ç”¨äº†ä»€ä¹ˆç®—æ³•æ¸²æŸ“é¡µé¢ï¼Œä¸ç”¨ç®¡ç½‘é¡µåå°çš„ Ajax æ¥å£åˆ°åº•æœ‰å“ªäº›å‚æ•°ã€‚</p>
<h3 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a>Selenium</h3><p><a href="[http://www.selenium.org.cn/](http://www.selenium.org.cn/">Selenium</a>)æ˜¯webè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é›†ï¼ŒåŒ…æ‹¬IDEã€Gridã€RCï¼ˆselenium 1.0ï¼‰ã€WebDriverï¼ˆselenium 2.0ï¼‰ç­‰ã€‚åˆ©ç”¨å®ƒå¯ä»¥é©±åŠ¨æµè§ˆå™¨æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œå¦‚ç‚¹å‡»ã€ä¸‹æ‹‰ç­‰æ“ä½œï¼ŒåŒæ—¶è¿˜å¯ä»¥è·å–æµè§ˆå™¨å½“å‰å‘ˆç°çš„é¡µé¢çš„æºä»£ç ï¼Œåšåˆ°å¯è§å³å¯çˆ¬ã€‚å¯¹äºä¸€äº› JavaScript åŠ¨æ€æ¸²æŸ“çš„é¡µé¢æ¥è¯´ï¼Œæ­¤ç§æŠ“å–æ–¹å¼éå¸¸æœ‰æ•ˆã€‚</p>
<p> <a href="[https://blog.csdn.net/huilan_same/article/details/52615123](https://blog.csdn.net/huilan_same/article/details/52615123">seleniumè‡ªåŠ¨åŒ–èµ„æºæ•´ç†</a>)</p>
<p>[][<a href="https://selenium-python.readthedocs.io/][Seleniumä½¿ç”¨æ–‡æ¡£](https://selenium-python.readthedocs.io/" target="_blank" rel="noopener">https://selenium-python.readthedocs.io/][Seleniumä½¿ç”¨æ–‡æ¡£](https://selenium-python.readthedocs.io/</a>)</p>
<h4 id="å£°æ˜æµè§ˆå™¨å¯¹è±¡"><a href="#å£°æ˜æµè§ˆå™¨å¯¹è±¡" class="headerlink" title="å£°æ˜æµè§ˆå™¨å¯¹è±¡"></a>å£°æ˜æµè§ˆå™¨å¯¹è±¡</h4><p>Selenium æ”¯æŒéå¸¸å¤šçš„æµè§ˆå™¨ï¼Œå¦‚ Chromeã€Firefoxã€Edge ç­‰ï¼Œè¿˜æœ‰ Androidã€BlackBerry ç­‰æ‰‹æœºç«¯çš„æµè§ˆå™¨ã€‚å¦å¤–ï¼Œä¹Ÿæ”¯æŒæ— ç•Œé¢æµè§ˆå™¨ PhantomJSã€‚åˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> selenium.webdriver</span><br><span class="line"></span><br><span class="line">driver = selenium.webdriver.Chrome()</span><br><span class="line">browser = webdriver.Firefox()</span><br><span class="line">browser = webdriver.Edge()</span><br><span class="line">browser = webdriver.Safari()</span><br><span class="line"><span class="comment"># æµè§ˆå™¨å¯¹è±¡çš„åˆå§‹åŒ–å¹¶å°†å…¶èµ‹å€¼ä¸º browser å¯¹è±¡ï¼Œæ¥ä¸‹æ¥ï¼Œå¯ä»¥è°ƒç”¨ browser å¯¹è±¡ï¼Œè®©å…¶æ‰§è¡Œå„ä¸ªåŠ¨ä½œä»¥æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"># è¦ä¸‹è½½æµè§ˆå™¨ç›¸åº”çš„é©±åŠ¨ï¼Œå¹¶å°†å…¶æ”¾å…¥PATHä¸­ã€‚ä¾‹å¦‚ï¼ŒFireFoxéœ€è¦ä¸‹è½½geckodriver</span></span><br></pre></td></tr></table></figure>
<h4 id="PhantomJS"><a href="#PhantomJS" class="headerlink" title="PhantomJS"></a>PhantomJS</h4><p>PhantomJSæ˜¯ä¸€ä¸ªæ— ç•Œé¢æµè§ˆå™¨ã€‚æŠ“å–æ—¶ï¼Œä¸ä¼šå¼¹å‡ºçª—å£.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">browser = webdriver.PhantomJS()</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå®ƒè¿˜æ”¯æŒå‘½ä»¤è¡Œé…ç½®ã€‚æ¯”å¦‚ï¼Œå¯ä»¥è®¾ç½®ç¼“å­˜å’Œç¦ç”¨å›¾ç‰‡åŠ è½½çš„åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æé«˜çˆ¬å–æ•ˆç‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SERVICE_ARGS &#x3D; [&#39;--load-images&#x3D;false&#39;, &#39;--disk-cache&#x3D;true&#39;]</span><br><span class="line">browser &#x3D; webdriver.PhantomJS(service_args&#x3D;SERVICE_ARGS)</span><br></pre></td></tr></table></figure>
<ul>
<li>éœ€è¦ â€œæ­¤ç”µè„‘&gt;å±æ€§&gt;é«˜çº§ç³»ç»Ÿè®¾ç½®&gt;é«˜çº§&gt;ç¯å¢ƒå˜é‡&gt;ç³»ç»Ÿå˜é‡&gt;Pathâ€é‡Œæ·»åŠ phantomjs.exeçš„è§£å‹è·¯å¾„</li>
<li>éœ€è¦å°†æŒ‡å®šå‚æ•°executable_path=râ€™D:\software_apk\phantomjs-2.1.1-windows\bin\phantomjs.exeâ€™å¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<h4 id="Chrome-Headless-æ¨¡å¼"><a href="#Chrome-Headless-æ¨¡å¼" class="headerlink" title="Chrome Headless æ¨¡å¼"></a>Chrome Headless æ¨¡å¼</h4><p>ä» Chrome 59 ç‰ˆæœ¬å¼€å§‹ï¼Œå·²ç»å¼€å§‹æ”¯æŒ Headless æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ— ç•Œé¢æ¨¡å¼ï¼Œè¿™æ ·çˆ¬å–çš„æ—¶å€™å°±ä¸ä¼šå¼¹å‡ºæµè§ˆå™¨äº†ã€‚å¦‚æœè¦ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œè¯·æŠŠ Chrome å‡çº§åˆ° 59 ç‰ˆæœ¬åŠä»¥ä¸Šã€‚å¯ç”¨ Headless æ¨¡å¼çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br></pre></td></tr></table></figure>
<h4 id="è®¿é—®é¡µé¢"><a href="#è®¿é—®é¡µé¢" class="headerlink" title="è®¿é—®é¡µé¢"></a>è®¿é—®é¡µé¢</h4><p>ç”¨ get() æ–¹æ³•æ¥è¯·æ±‚ç½‘é¡µï¼Œå‚æ•°ä¼ å…¥é“¾æ¥ URL å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(url)</span><br><span class="line">print(browser.page_source)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h4><p>Selenium å¯ä»¥é©±åŠ¨æµè§ˆå™¨å®Œæˆå„ç§æ“ä½œï¼Œæ¯”å¦‚å¡«å……è¡¨å•ã€æ¨¡æ‹Ÿç‚¹å‡»ç­‰ã€‚</p>
<p> Selenium æä¾›äº†ä¸€ç³»åˆ—æŸ¥æ‰¾èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ¥è·å–æƒ³è¦çš„èŠ‚ç‚¹ï¼Œä»¥ä¾¿ä¸‹ä¸€æ­¥æ‰§è¡Œä¸€äº›åŠ¨ä½œæˆ–è€…æå–ä¿¡æ¯ã€‚</p>
<h5 id="å•ä¸ªèŠ‚ç‚¹ï¼š-æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª"><a href="#å•ä¸ªèŠ‚ç‚¹ï¼š-æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª" class="headerlink" title="å•ä¸ªèŠ‚ç‚¹ï¼š æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª"></a>å•ä¸ªèŠ‚ç‚¹ï¼š æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª</h5><p>find_element_by_name() æ˜¯æ ¹æ® name å€¼è·å–ï¼Œfind_element_by_id() æ˜¯æ ¹æ® id è·å–ã€‚å¦å¤–ï¼Œè¿˜æœ‰æ ¹æ® XPathã€CSS é€‰æ‹©å™¨ç­‰è·å–çš„æ–¹å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»æ·˜å®é¡µé¢ä¸­æå–æœç´¢æ¡†è¿™ä¸ªèŠ‚ç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">input_first = browser.find_element_by_id(<span class="string">'q'</span>)</span><br><span class="line">input_second = browser.find_element_by_css_selector(<span class="string">'#q'</span>)</span><br><span class="line">input_third = browser.find_element_by_xpath(<span class="string">'//*[@id="q"]'</span>)</span><br><span class="line">input_forth = browser.find_element(By.ID, <span class="string">'q'</span>)</span><br><span class="line">print(input_first, input_second, input_third, input_forth)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>
<h5 id="å¤šä¸ªèŠ‚ç‚¹"><a href="#å¤šä¸ªèŠ‚ç‚¹" class="headerlink" title="å¤šä¸ªèŠ‚ç‚¹"></a>å¤šä¸ªèŠ‚ç‚¹</h5><p>å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œå†ç”¨ find_element() æ–¹æ³•æŸ¥æ‰¾ï¼Œå°±åªèƒ½å¾—åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹äº†ã€‚å¦‚æœè¦æŸ¥æ‰¾æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼Œéœ€è¦ç”¨ find_elements() è¿™æ ·çš„æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lis = browser.find_elements_by_css_selector(<span class="string">'.service-bd li'</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºåˆ—è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯WebElementç±»å‹ã€‚</p>
<p>å…¶ä»–è·å–å¤šä¸ªèŠ‚ç‚¹çš„æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">find_element_by_id</span><br><span class="line">find_element_by_name</span><br><span class="line">find_element_by_xpath</span><br><span class="line">find_element_by_link_text</span><br><span class="line">find_element_by_partial_link_text</span><br><span class="line">find_element_by_tag_name</span><br><span class="line">find_element_by_class_name</span><br><span class="line">find_element_by_css_selector</span><br><span class="line">find_elements(By.CSS_SELECTOR, <span class="string">'.service-bd li'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="èŠ‚ç‚¹äº¤äº’"><a href="#èŠ‚ç‚¹äº¤äº’" class="headerlink" title="èŠ‚ç‚¹äº¤äº’"></a>èŠ‚ç‚¹äº¤äº’</h4><p>Selenium å¯ä»¥é©±åŠ¨æµè§ˆå™¨æ¥æ‰§è¡Œä¸€äº›æ“ä½œã€‚æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•æœ‰ï¼šè¾“å…¥æ–‡å­—æ—¶ç”¨ send_keys æ–¹æ³•ï¼Œæ¸…ç©ºæ–‡å­—æ—¶ç”¨ clear æ–¹æ³•ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ç”¨ click æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">input = browser.find_element_by_id(<span class="string">'q'</span>)</span><br><span class="line">input.send_keys(<span class="string">'iPhone'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">input.clear()</span><br><span class="line">input.send_keys(<span class="string">'iPad'</span>)</span><br><span class="line">button = browser.find_element_by_class_name(<span class="string">'btn-search'</span>)</span><br><span class="line">button.click()</span><br></pre></td></tr></table></figure>
<h4 id="åŠ¨ä½œé“¾"><a href="#åŠ¨ä½œé“¾" class="headerlink" title="åŠ¨ä½œé“¾"></a>åŠ¨ä½œé“¾</h4><p>æœ‰ä¸€äº›æ“ä½œï¼Œå®ƒä»¬<strong>æ²¡æœ‰ç‰¹å®šçš„æ‰§è¡Œå¯¹è±¡</strong> ï¼Œæ¯”å¦‚é¼ æ ‡æ‹–æ›³ã€é”®ç›˜æŒ‰é”®ç­‰ï¼Œè¿™äº›åŠ¨ä½œç”¨å¦ä¸€ç§æ–¹å¼æ¥æ‰§è¡Œï¼Œé‚£å°±æ˜¯<strong>åŠ¨ä½œé“¾</strong> ã€‚</p>
<p>æ¯”å¦‚ï¼Œå®ç°ä¸€ä¸ªèŠ‚ç‚¹çš„æ‹–æ›³æ“ä½œï¼Œå°†æŸä¸ªèŠ‚ç‚¹ä»ä¸€å¤„æ‹–æ›³åˆ°å¦å¤–ä¸€å¤„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(<span class="string">'iframeResult'</span>)</span><br><span class="line">source = browser.find_element_by_css_selector(<span class="string">'#draggable'</span>)</span><br><span class="line">target = browser.find_element_by_css_selector(<span class="string">'#droppable'</span>)</span><br><span class="line">actions = ActionChains(browser)</span><br><span class="line">actions.drag_and_drop(source, target)</span><br><span class="line">actions.perform()</span><br></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œ-JavaScript"><a href="#æ‰§è¡Œ-JavaScript" class="headerlink" title="æ‰§è¡Œ JavaScript"></a>æ‰§è¡Œ JavaScript</h4><p>Selenium API å¹¶æ²¡æœ‰æä¾›<strong>ä¸‹æ‹‰è¿›åº¦æ¡</strong> ç­‰æ“ä½œï¼Œä½†å¯ä»¥ç›´æ¥æ¨¡æ‹Ÿè¿è¡Œ JavaScriptï¼Œæ­¤æ—¶ä½¿ç”¨ execute_script() æ–¹æ³•å³å¯å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.zhihu.com/explore'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'window.scrollTo(0, document.body.scrollHeight)'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'alert("To Bottom")'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è·å–èŠ‚ç‚¹ä¿¡æ¯"><a href="#è·å–èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="è·å–èŠ‚ç‚¹ä¿¡æ¯"></a>è·å–èŠ‚ç‚¹ä¿¡æ¯</h4><ul>
<li>é€šè¿‡ <code>page_source</code> å±æ€§å¯ä»¥è·å–ç½‘é¡µçš„æºä»£ç ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Selenium æä¾›çš„é€‰æ‹©èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œç›´æ¥æå–èŠ‚ç‚¹ä¿¡æ¯ã€‚</li>
</ul>
<ul>
<li>å…ˆé€šè¿‡æŸ¥æ‰¾èŠ‚ç‚¹ï¼Œè·å–WebElementç±»å‹ï¼Œå†é€šè¿‡get_attribute() æ–¹æ³•ï¼Œ.textå±æ€§ï¼Œ.idå±æ€§ï¼Œ.locationå±æ€§ï¼Œ.tag_nameå±æ€§ï¼Œ.sizeå±æ€§ï¼Œè·å–å±æ€§ã€æ–‡æœ¬ã€ IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°</li>
</ul>
<h4 id="åˆ‡æ¢-Frame"><a href="#åˆ‡æ¢-Frame" class="headerlink" title="åˆ‡æ¢ Frame"></a>åˆ‡æ¢ Frame</h4><p>ç½‘é¡µä¸­æœ‰ä¸€ç§èŠ‚ç‚¹å«ä½œ <strong>iframe</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å­ Frame</strong>ï¼Œç›¸å½“äºé¡µé¢çš„<strong>å­é¡µé¢</strong>ï¼Œå®ƒçš„ç»“æ„å’Œå¤–éƒ¨ç½‘é¡µçš„ç»“æ„å®Œå…¨ä¸€è‡´ã€‚Selenium æ‰“å¼€é¡µé¢åï¼Œå®ƒé»˜è®¤æ˜¯åœ¨çˆ¶çº§ Frame é‡Œé¢æ“ä½œï¼Œè€Œæ­¤æ—¶å¦‚æœé¡µé¢ä¸­è¿˜æœ‰å­ Frameï¼Œå®ƒæ˜¯ä¸èƒ½è·å–åˆ°å­ Frame é‡Œé¢çš„èŠ‚ç‚¹çš„ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨ <code>switch_to.frame()</code> æ–¹æ³•æ¥åˆ‡æ¢ Frameã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> NoSuchElementException</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(<span class="string">'iframeResult'</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    logo = browser.find_element_by_class_name(<span class="string">'logo'</span>)</span><br><span class="line"><span class="keyword">except</span> NoSuchElementException:</span><br><span class="line">    print(<span class="string">'NO LOGO'</span>)</span><br><span class="line">browser.switch_to.parent_frame()</span><br><span class="line">logo = browser.find_element_by_class_name(<span class="string">'logo'</span>)</span><br><span class="line">print(logo)</span><br><span class="line">print(logo.text)</span><br></pre></td></tr></table></figure>
<h4 id="å»¶æ—¶ç­‰å¾…"><a href="#å»¶æ—¶ç­‰å¾…" class="headerlink" title="å»¶æ—¶ç­‰å¾…"></a>å»¶æ—¶ç­‰å¾…</h4><p>get() æ–¹æ³•ä¼šåœ¨ç½‘é¡µæ¡†æ¶åŠ è½½ç»“æŸåç»“æŸæ‰§è¡Œï¼Œæ­¤æ—¶å¦‚æœè·å– page_sourceï¼Œå¯èƒ½å¹¶ä¸æ˜¯æµè§ˆå™¨å®Œå…¨åŠ è½½å®Œæˆçš„é¡µé¢ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œéœ€è¦å»¶æ—¶ç­‰å¾…ä¸€å®šæ—¶é—´ï¼Œç¡®ä¿èŠ‚ç‚¹å·²ç»åŠ è½½å‡ºæ¥ã€‚</p>
<h5 id="éšå¼ç­‰å¾…"><a href="#éšå¼ç­‰å¾…" class="headerlink" title="éšå¼ç­‰å¾…"></a>éšå¼ç­‰å¾…</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(<span class="string">'https://www.zhihu.com/explore'</span>)</span><br><span class="line">input = browser.find_element_by_class_name(<span class="string">'zu-top-add-question'</span>)</span><br><span class="line">print(input)</span><br></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨éšå¼ç­‰å¾… (<code>implicitly_wait()</code>) æ‰§è¡Œæµ‹è¯•æ—¶ï¼Œå¦‚æœ Selenium æ²¡æœ‰åœ¨ DOM ä¸­æ‰¾åˆ°èŠ‚ç‚¹ï¼Œå°†ç»§ç»­ç­‰å¾…ï¼Œè¶…å‡ºè®¾å®šæ—¶é—´åï¼Œåˆ™æŠ›å‡ºæ‰¾ä¸åˆ°èŠ‚ç‚¹çš„å¼‚å¸¸ã€‚æ¢å¥è¯è¯´ï¼Œå½“æŸ¥æ‰¾èŠ‚ç‚¹è€ŒèŠ‚ç‚¹å¹¶æ²¡æœ‰ç«‹å³å‡ºç°çš„æ—¶å€™ï¼Œéšå¼ç­‰å¾…å°†ç­‰å¾…ä¸€æ®µæ—¶é—´å†æŸ¥æ‰¾ DOMï¼Œé»˜è®¤çš„æ—¶é—´æ˜¯ 0ã€‚</p>
<h5 id="æ˜¾å¼ç­‰å¾…"><a href="#æ˜¾å¼ç­‰å¾…" class="headerlink" title="æ˜¾å¼ç­‰å¾…"></a>æ˜¾å¼ç­‰å¾…</h5><p>æ˜¾å¼ç­‰å¾…æ–¹æ³•ï¼ŒæŒ‡å®šè¦æŸ¥æ‰¾çš„èŠ‚ç‚¹ï¼Œç„¶å<strong>æŒ‡å®šä¸€ä¸ªæœ€é•¿ç­‰å¾…æ—¶é—´</strong>ã€‚å¦‚æœåœ¨è§„å®šæ—¶é—´å†…åŠ è½½å‡ºæ¥äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œå°±è¿”å›æŸ¥æ‰¾çš„èŠ‚ç‚¹ï¼›å¦‚æœåˆ°äº†è§„å®šæ—¶é—´ä¾ç„¶æ²¡æœ‰åŠ è½½å‡ºè¯¥èŠ‚ç‚¹ï¼Œåˆ™æŠ›å‡ºè¶…æ—¶å¼‚å¸¸ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com/'</span>)</span><br><span class="line">wait = WebDriverWait(browser, <span class="number">10</span>)</span><br><span class="line">input = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'q'</span>)))</span><br><span class="line">button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.btn-search'</span>)))</span><br><span class="line">print(input, button)</span><br></pre></td></tr></table></figure>
<p>å¼•å…¥ WebDriverWait å¯¹è±¡ï¼ŒæŒ‡å®šæœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œè°ƒç”¨å…¶ until() æ–¹æ³•ï¼Œä¼ å…¥è¦ç­‰å¾…æ¡ä»¶ expected_conditionsã€‚æ¯”å¦‚ï¼Œä¼ å…¥ presence_of_element_located ï¼Œå…¶å‚æ•°æ˜¯èŠ‚ç‚¹çš„å®šä½å…ƒç»„( ID ä¸º q çš„èŠ‚ç‚¹æœç´¢æ¡†)ã€‚10 ç§’å†…å¦‚æœ ID ä¸º q çš„èŠ‚ç‚¹ï¼ˆå³æœç´¢æ¡†ï¼‰æˆåŠŸåŠ è½½å‡ºæ¥ï¼Œå°±è¿”å›è¯¥èŠ‚ç‚¹ï¼›å¦åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>æŒ‰é’®å¯ä»¥ä½¿ç”¨ element_to_be_clickableï¼Œ( CSS é€‰æ‹©å™¨ä¸º.btn-search çš„æŒ‰é’®)ï¼Œå¦‚æœ 10 ç§’å†…æˆåŠŸåŠ è½½å‡ºæ¥ï¼Œå³å¯ç‚¹å‡»ï¼Œå°±è¿”å›è¯¥æŒ‰é’®èŠ‚ç‚¹ï¼›å¦åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h6 id="å…¶ä»–ç­‰å¾…æ¡ä»¶"><a href="#å…¶ä»–ç­‰å¾…æ¡ä»¶" class="headerlink" title="å…¶ä»–ç­‰å¾…æ¡ä»¶"></a>å…¶ä»–ç­‰å¾…æ¡ä»¶</h6><p><a href="https://python3webspider.cuiqingcai.com/7.1selenium-de-shi-yong#xian-shi-deng-dai" target="_blank" rel="noopener">https://python3webspider.cuiqingcai.com/7.1selenium-de-shi-yong#xian-shi-deng-dai</a></p>
<h4 id="å‰è¿›åé€€"><a href="#å‰è¿›åé€€" class="headerlink" title="å‰è¿›åé€€"></a>å‰è¿›åé€€</h4><p>back() å’Œ forward() æ–¹æ³• </p>
<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><p>get_cookies() æ–¹æ³•è·å–æ‰€æœ‰çš„ Cookiesï¼Œadd_cookies() æ·»åŠ åˆ é™¤ï¼Œ delete_all_cookies() æ–¹æ³•åˆ é™¤æ‰€æœ‰çš„ Cookiesã€‚</p>
<h4 id="é€‰é¡¹å¡ç®¡ç†"><a href="#é€‰é¡¹å¡ç®¡ç†" class="headerlink" title="é€‰é¡¹å¡ç®¡ç†"></a>é€‰é¡¹å¡ç®¡ç†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'window.open()'</span>)</span><br><span class="line">print(browser.window_handles)</span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">1</span>])</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line">browser.get(<span class="string">'https://python.org'</span>)</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ execute_script() æ–¹æ³•ï¼Œä¼ å…¥ window.open() è¿™ä¸ª JavaScript è¯­å¥æ–°å¼€å¯ä¸€ä¸ªé€‰é¡¹å¡ã€‚</p>
<p>è°ƒç”¨ window_handles å±æ€§è·å–å½“å‰å¼€å¯çš„æ‰€æœ‰é€‰é¡¹å¡ï¼Œè°ƒç”¨ switch_to_window() æ–¹æ³•åˆ‡æ¢åˆ°è¯¥é€‰é¡¹å¡ã€‚</p>
<h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h4><p>ä½¿ç”¨ try except è¯­å¥æ¥æ•è·å„ç§å¼‚å¸¸ï¼Œéƒ½åœ¨selenium.common.exceptionsä¸‹ã€‚</p>
<p>TimeoutException</p>
<p>NoSuchElementException</p>
<h3 id="Splash"><a href="#Splash" class="headerlink" title="Splash"></a>Splash</h3><p><a href="https://splash.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener">Splash</a> æ˜¯ä¸€ä¸ª JavaScript æ¸²æŸ“æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå¸¦æœ‰ HTTP API çš„è½»é‡çº§æµè§ˆå™¨ï¼ŒåŒæ—¶å®ƒå¯¹æ¥äº† Python ä¸­çš„ Twisted å’Œ QT åº“ã€‚</p>
<p>å¯ä»¥å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>å¼‚æ­¥æ–¹å¼å¤„ç†å¤šä¸ªç½‘é¡µæ¸²æŸ“è¿‡ç¨‹</li>
<li>è·å–æ¸²æŸ“åçš„é¡µé¢çš„æºä»£ç æˆ–æˆªå›¾</li>
<li>é€šè¿‡å…³é—­å›¾ç‰‡æ¸²æŸ“æˆ–è€…ä½¿ç”¨ Adblock è§„åˆ™æ¥åŠ å¿«é¡µé¢æ¸²æŸ“é€Ÿåº¦</li>
<li>å¯æ‰§è¡Œç‰¹å®šçš„ JavaScript è„šæœ¬</li>
<li>å¯é€šè¿‡ Lua è„šæœ¬æ¥æ§åˆ¶é¡µé¢æ¸²æŸ“è¿‡ç¨‹</li>
<li>è·å–æ¸²æŸ“çš„è¯¦ç»†è¿‡ç¨‹å¹¶é€šè¿‡ HARï¼ˆHTTP Archiveï¼‰æ ¼å¼å‘ˆç°</li>
</ul>
<p><a href="https://www.jianshu.com/p/feeb15f2e49b" target="_blank" rel="noopener">win10å®¶åº­ç‰ˆdockerå®‰è£…</a></p>
<ul>
<li>é‡åˆ°é—®é¢˜ï¼Œå®‰è£…è¿‡ç¨‹ä¸­å°†git bashå¸è½½äº†ã€‚</li>
</ul>
<p><a href="https://www.cnblogs.com/samwu/p/10360943.html" target="_blank" rel="noopener">win10å®¶åº­ç‰ˆå®‰è£…docker</a></p>
<ul>
<li>é‡åˆ°é—®é¢˜ï¼Œdocker desk æ— æ³•å¯åŠ¨ï¼Œout of memoryã€‚ã€‚ã€‚</li>
</ul>
<p><a href="https://blog.csdn.net/pp_lan/article/details/90692510" target="_blank" rel="noopener">https://blog.csdn.net/pp_lan/article/details/90692510</a></p>
<h4 id="Splash-Lua-è„šæœ¬"><a href="#Splash-Lua-è„šæœ¬" class="headerlink" title="Splash Lua è„šæœ¬"></a>Splash Lua è„šæœ¬</h4><p>Splash å¯ä»¥é€šè¿‡ Lua è„šæœ¬æ‰§è¡Œä¸€ç³»åˆ—æ¸²æŸ“æ“ä½œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ Splash æ¥æ¨¡æ‹Ÿç±»ä¼¼ Chromeã€PhantomJS çš„æ“ä½œäº†ã€‚</p>
<h5 id="å…¥å£åŠè¿”å›å€¼"><a href="#å…¥å£åŠè¿”å›å€¼" class="headerlink" title="å…¥å£åŠè¿”å›å€¼"></a>å…¥å£åŠè¿”å›å€¼</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">  splash:wait(<span class="number">0.5</span>)</span><br><span class="line">  <span class="keyword">local</span> title = splash:evaljs(<span class="string">"document.title"</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123;title=title&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Splash ä¼šé»˜è®¤è°ƒç”¨main æ–¹æ³•ã€‚</li>
<li>è¿”å›å€¼å¯ä»¥æ˜¯å­—å…¸å½¢å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œæœ€åéƒ½ä¼šè½¬åŒ–ä¸º Splash HTTP Responseã€‚</li>
</ul>
<h5 id="å¼‚æ­¥å¤„ç†"><a href="#å¼‚æ­¥å¤„ç†" class="headerlink" title="å¼‚æ­¥å¤„ç†"></a>å¼‚æ­¥å¤„ç†</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="keyword">local</span> example_urls = &#123;<span class="string">"www.baidu.com"</span>, <span class="string">"www.taobao.com"</span>, <span class="string">"www.zhihu.com"</span>&#125;</span><br><span class="line">  <span class="keyword">local</span> urls = args.urls <span class="keyword">or</span> example_urls</span><br><span class="line">  <span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> index, url <span class="keyword">in</span> <span class="built_in">ipairs</span>(urls) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> ok, reason = splash:go(<span class="string">"http://"</span> .. url)</span><br><span class="line">    <span class="keyword">if</span> ok <span class="keyword">then</span></span><br><span class="line">      splash:wait(<span class="number">2</span>)</span><br><span class="line">      results[url] = splash:png()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> results</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåçš„è¿”å›ç»“æœæ˜¯ 3 ä¸ªç«™ç‚¹çš„æˆªå›¾</p>
<ul>
<li>å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œç¬¦<code>..</code>ï¼Œè€Œä¸æ˜¯pythonä¸­çš„<code>+</code></li>
<li>go æ–¹æ³•ä¼šè¿”å›åŠ è½½é¡µé¢çš„ç»“æœçŠ¶æ€ï¼Œå¦‚æœé¡µé¢å‡ºç° 4xx æˆ– 5xx çŠ¶æ€ç ï¼Œok å˜é‡å°±ä¸ºç©ºï¼Œå°±ä¸ä¼šè¿”å›åŠ è½½åçš„å›¾ç‰‡ã€‚</li>
</ul>
<h4 id="Splash-å¯¹è±¡å±æ€§"><a href="#Splash-å¯¹è±¡å±æ€§" class="headerlink" title="Splash å¯¹è±¡å±æ€§"></a>Splash å¯¹è±¡å±æ€§</h4><p>splashç±»ä¼¼äº Selenium ä¸­çš„ WebDriver å¯¹è±¡ã€‚</p>
<h5 id="args"><a href="#args" class="headerlink" title="args"></a>args</h5><h5 id="js-enabled"><a href="#js-enabled" class="headerlink" title="js_enabled"></a>js_enabled</h5><p>è¿™ä¸ªå±æ€§æ˜¯ Splash çš„ JavaScript æ‰§è¡Œå¼€å…³ï¼Œå¯ä»¥å°†å…¶é…ç½®ä¸º true æˆ– false æ¥æ§åˆ¶æ˜¯å¦æ‰§è¡Œ JavaScript ä»£ç ï¼Œé»˜è®¤ä¸º trueã€‚</p>
<h5 id="resource-timeout"><a href="#resource-timeout" class="headerlink" title="resource_timeout"></a>resource_timeout</h5><p>è®¾ç½®åŠ è½½çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚å¦‚æœè®¾ç½®ä¸º 0 æˆ– nilï¼ˆç±»ä¼¼ Python ä¸­çš„ Noneï¼‰ï¼Œä»£è¡¨ä¸æ£€æµ‹è¶…æ—¶ã€‚</p>
<h5 id="images-enabled"><a href="#images-enabled" class="headerlink" title="images_enabled"></a>images_enabled</h5><p>è®¾ç½®å›¾ç‰‡æ˜¯å¦åŠ è½½ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åŠ è½½çš„ã€‚ç¦ç”¨è¯¥å±æ€§åï¼Œå¯ä»¥èŠ‚çœç½‘ç»œæµé‡å¹¶æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦ã€‚</p>
<ul>
<li>ç¦ç”¨å›¾ç‰‡åŠ è½½å¯èƒ½ä¼šå½±å“ JavaScript æ¸²æŸ“ã€‚å› ä¸ºç¦ç”¨å›¾ç‰‡ä¹‹åï¼Œå®ƒçš„å¤–å±‚ DOM èŠ‚ç‚¹çš„é«˜åº¦ä¼šå—å½±å“ï¼Œè¿›è€Œå½±å“ DOM èŠ‚ç‚¹çš„ä½ç½®ã€‚å› æ­¤ï¼Œå¦‚æœ JavaScript å¯¹å›¾ç‰‡èŠ‚ç‚¹æœ‰æ“ä½œçš„è¯ï¼Œå…¶æ‰§è¡Œå°±ä¼šå—åˆ°å½±å“ã€‚</li>
<li>Splash ä½¿ç”¨äº†ç¼“å­˜ã€‚å¦‚æœä¸€å¼€å§‹åŠ è½½å‡ºæ¥äº†ç½‘é¡µå›¾ç‰‡ï¼Œç„¶åç¦ç”¨äº†å›¾ç‰‡åŠ è½½ï¼Œå†é‡æ–°åŠ è½½é¡µé¢ï¼Œä¹‹å‰åŠ è½½å¥½çš„å›¾ç‰‡å¯èƒ½è¿˜ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ—¶ç›´æ¥é‡å¯ Splash å³å¯ã€‚</li>
</ul>
<h5 id="plugins-enabled"><a href="#plugins-enabled" class="headerlink" title="plugins_enabled"></a>plugins_enabled</h5><p>æ§åˆ¶æµè§ˆå™¨æ’ä»¶ï¼ˆå¦‚ Flash æ’ä»¶ï¼‰æ˜¯å¦å¼€å¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å±æ€§æ˜¯ falseã€‚</p>
<h5 id="scroll-position"><a href="#scroll-position" class="headerlink" title="scroll_position"></a>scroll_position</h5><p>æ§åˆ¶é¡µé¢ä¸Šä¸‹æˆ–å·¦å³æ»šåŠ¨</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash.scroll_position = &#123;y=<span class="number">400</span>&#125;</span><br><span class="line">splash.scroll_position = &#123;x=<span class="number">100</span>, y=<span class="number">200</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Splash-å¯¹è±¡æ–¹æ³•"><a href="#Splash-å¯¹è±¡æ–¹æ³•" class="headerlink" title="Splash å¯¹è±¡æ–¹æ³•"></a>Splash å¯¹è±¡æ–¹æ³•</h4><h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>è¯¥æ–¹æ³•ç”¨æ¥è¯·æ±‚æŸä¸ªé“¾æ¥ï¼Œè€Œä¸”å®ƒå¯ä»¥æ¨¡æ‹Ÿ GET å’Œ POST è¯·æ±‚ï¼ŒåŒæ—¶æ”¯æŒä¼ å…¥è¯·æ±‚å¤´ã€è¡¨å•ç­‰æ•°æ®ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:go&#123;url, baseurl=<span class="literal">nil</span>, headers=<span class="literal">nil</span>, http_method=<span class="string">"GET"</span>, body=<span class="literal">nil</span>, formdata=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¿”å›å€¼ä¸ºokå’Œreasonï¼Œå¦‚æœ ok ä¸ºç©ºï¼Œä»£è¡¨ç½‘é¡µåŠ è½½å‡ºç°äº†é”™è¯¯ï¼Œæ­¤æ—¶ reason å˜é‡ä¸­åŒ…å«äº†é”™è¯¯çš„åŸå› ï¼Œå¦åˆ™è¯æ˜é¡µé¢åŠ è½½æˆåŠŸã€‚</p>
<h5 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h5><p>æ§åˆ¶é¡µé¢ç­‰å¾…æ—¶é—´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:wait&#123;time, cancel_on_redirect=false, cancel_on_error=true&#125;</span><br></pre></td></tr></table></figure>
<h5 id="jsfunc"><a href="#jsfunc" class="headerlink" title="jsfunc"></a>jsfunc</h5><p>ç›´æ¥è°ƒç”¨ JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œä½†æ˜¯æ‰€è°ƒç”¨çš„æ–¹æ³•éœ€è¦ç”¨åŒä¸­æ‹¬å·åŒ…å›´ï¼Œè¿™ç›¸å½“äºå®ç°äº† JavaScript æ–¹æ³•åˆ° Lua è„šæœ¬çš„è½¬æ¢ã€‚</p>
<p>é¦–å…ˆï¼Œå£°æ˜äº† JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œç„¶ååœ¨é¡µé¢åŠ è½½æˆåŠŸåè°ƒç”¨äº†æ­¤æ–¹æ³•è®¡ç®—å‡ºäº†é¡µé¢ä¸­ div èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="keyword">local</span> get_div_count = splash:jsfunc(<span class="string">[[function () &#123;</span></span><br><span class="line"><span class="string">    var body = document.body;</span></span><br><span class="line"><span class="string">    var divs = body.getElementsByTagName('div');</span></span><br><span class="line"><span class="string">    return divs.length;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  ]]</span>)</span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  <span class="keyword">return</span> (<span class="string">"There are % s DIVs"</span>):<span class="built_in">format</span>(get_div_count())</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="evaljs"><a href="#evaljs" class="headerlink" title="evaljs"></a>evaljs</h5><p>æ‰§è¡Œ JavaScript ä»£ç å¹¶è¿”å›æœ€åä¸€æ¡ JavaScript è¯­å¥çš„è¿”å›ç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">result = splash:evaljs(js)</span><br></pre></td></tr></table></figure>
<h5 id="runjs"><a href="#runjs" class="headerlink" title="runjs"></a>runjs</h5><p>æ‰§è¡Œ JavaScript ä»£ç ï¼Œå®ƒä¸ evaljs æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯æ›´åå‘äº<strong>æ‰§è¡ŒæŸäº›åŠ¨ä½œ</strong>æˆ–<strong>å£°æ˜æŸäº›æ–¹æ³•</strong>ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  splash:runjs(<span class="string">"foo = function() &#123;return 'bar'&#125;"</span>)</span><br><span class="line">  <span class="keyword">local</span> result = splash:evaljs(<span class="string">"foo()"</span>)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”¨ runjs æ–¹æ³•å…ˆå£°æ˜äº†ä¸€ä¸ª JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ evaljs æ–¹æ³•æ¥è°ƒç”¨å¾—åˆ°çš„ç»“æœã€‚</p>
<h5 id="autoload"><a href="#autoload" class="headerlink" title="autoload"></a>autoload</h5><p>è®¾ç½®æ¯ä¸ªé¡µé¢è®¿é—®æ—¶è‡ªåŠ¨åŠ è½½çš„å¯¹è±¡ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:autoload&#123;source_or_url, source=<span class="literal">nil</span>, url=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•åªè´Ÿè´£åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚å¦‚æœè¦æ‰§è¡Œæ“ä½œï¼Œå¯ä»¥è°ƒç”¨ evaljs æˆ– runjs æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:autoload(<span class="string">[[function get_document_title()&#123;return document.title;&#125;</span></span><br><span class="line"><span class="string">  ]]</span>)</span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:evaljs(<span class="string">"get_document_title()"</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ autoload æ–¹æ³•åŠ è½½æŸäº›æ–¹æ³•åº“ï¼Œå¦‚ jQueryï¼Œ</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="built_in">assert</span>(splash:autoload(<span class="string">"https://code.jquery.com/jquery-2.1.3.min.js"</span>))</span><br><span class="line">  <span class="built_in">assert</span>(splash:go(<span class="string">"https://www.taobao.com"</span>))</span><br><span class="line">  <span class="keyword">local</span> version = splash:evaljs(<span class="string">"$.fn.jquery"</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'JQuery version: '</span> .. version</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="call-later"><a href="#call-later" class="headerlink" title="call_later"></a>call_later</h5><p>è®¾ç½®å®šæ—¶ä»»åŠ¡å’Œå»¶è¿Ÿæ—¶é—´æ¥å®ç°ä»»åŠ¡å»¶æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ‰§è¡Œå‰é€šè¿‡ cancel æ–¹æ³•é‡æ–°æ‰§è¡Œå®šæ—¶ä»»åŠ¡ã€‚</p>
<h5 id="htttp-get"><a href="#htttp-get" class="headerlink" title="htttp_get"></a>htttp_get</h5><p>æ‹Ÿå‘é€ HTTP çš„ GET è¯·æ±‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">response = splash:http_get&#123;url, headers=<span class="literal">nil</span>, follow_redirects=<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="http-post"><a href="#http-post" class="headerlink" title="http_post"></a>http_post</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">response = splash:http_post&#123;url, headers=<span class="literal">nil</span>, follow_redirects=<span class="literal">true</span>, body=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>bodyï¼Œå¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸ºç©ºï¼Œå³è¡¨å•æ•°æ®ã€‚</li>
</ul>
<h5 id="set-content"><a href="#set-content" class="headerlink" title="set_content"></a>set_content</h5><p>ç”¨æ¥è®¾ç½®é¡µé¢çš„å†…å®¹</p>
<h5 id="html"><a href="#html" class="headerlink" title="html"></a>html</h5><p>ç”¨æ¥è·å–ç½‘é¡µçš„æºä»£ç </p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://httpbin.org/get"</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:html()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="png"><a href="#png" class="headerlink" title="png"></a>png</h5><p>è·å– PNG æ ¼å¼çš„ç½‘é¡µæˆªå›¾</p>
<h5 id="jpeg"><a href="#jpeg" class="headerlink" title="jpeg"></a>jpeg</h5><p>ç”¨æ¥è·å– JPEG æ ¼å¼çš„ç½‘é¡µæˆªå›¾</p>
<h5 id="har"><a href="#har" class="headerlink" title="har"></a>har</h5><p>ç”¨æ¥è·å–é¡µé¢åŠ è½½è¿‡ç¨‹æè¿°</p>
<h5 id="url"><a href="#url" class="headerlink" title="url"></a>url</h5><p>è·å–å½“å‰æ­£åœ¨è®¿é—®çš„ URL</p>
<h5 id="get-cokies"><a href="#get-cokies" class="headerlink" title="get_cokies"></a>get_cokies</h5><p>è·å–å½“å‰é¡µé¢çš„ Cookies</p>
<h5 id="add-cokies"><a href="#add-cokies" class="headerlink" title="add_cokies"></a>add_cokies</h5><p>ä¸ºå½“å‰é¡µé¢æ·»åŠ  Cookies</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cookies = splash:add_cookie&#123;name, value, <span class="built_in">path</span>=<span class="literal">nil</span>, domain=<span class="literal">nil</span>, expires=<span class="literal">nil</span>, httpOnly=<span class="literal">nil</span>, secure=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="clear-cookies"><a href="#clear-cookies" class="headerlink" title="clear_cookies"></a>clear_cookies</h5><p>æ¸…é™¤æ‰€æœ‰çš„ Cookies</p>
<h5 id="get-viewport-size"><a href="#get-viewport-size" class="headerlink" title="get_viewport_size"></a>get_viewport_size</h5><p>è·å–å½“å‰æµè§ˆå™¨é¡µé¢çš„å¤§å°ï¼Œå³å®½é«˜</p>
<h5 id="set-viewport-size"><a href="#set-viewport-size" class="headerlink" title="set_viewport_size"></a>set_viewport_size</h5><p>è®¾ç½®å½“å‰æµè§ˆå™¨é¡µé¢çš„å¤§å°ï¼Œå³å®½é«˜</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_viewport_size(width, height)</span><br></pre></td></tr></table></figure>
<h5 id="set-viewport-full"><a href="#set-viewport-full" class="headerlink" title="set_viewport_full"></a>set_viewport_full</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®æµè§ˆå™¨å…¨å±æ˜¾ç¤º</p>
<h5 id="set-user-agent"><a href="#set-user-agent" class="headerlink" title="set_user_agent"></a>set_user_agent</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®æµè§ˆå™¨çš„ User-Agent</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_user_agent(<span class="string">'Splash'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="set-custom-headers"><a href="#set-custom-headers" class="headerlink" title="set_custom_headers()"></a>set_custom_headers()</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®è¯·æ±‚çš„ Headers</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_custom_headers(&#123;[<span class="string">"User-Agent"</span>] = <span class="string">"Splash"</span>,</span><br><span class="line">     [<span class="string">"Site"</span>] = <span class="string">"Splash"</span>,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><p>å¯ä»¥é€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ç¬¦åˆæ¡ä»¶ï¼Œåˆ™åªä¼šè¿”å›ä¸€ä¸ªï¼Œå…¶å‚æ•°æ˜¯ CSS é€‰æ‹©å™¨ã€‚</p>
<h5 id="select-all"><a href="#select-all" class="headerlink" title="select_all()"></a>select_all()</h5><p>æ­¤æ–¹æ³•å¯ä»¥é€‰ä¸­æ‰€æœ‰çš„ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå…¶å‚æ•°æ˜¯ CSS é€‰æ‹©å™¨ã€‚</p>
<h5 id="mouse-click"><a href="#mouse-click" class="headerlink" title="mouse_click"></a>mouse_click</h5><p>æ­¤æ–¹æ³•å¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ“ä½œï¼Œä¼ å…¥çš„å‚æ•°ä¸ºåæ ‡å€¼ xã€yï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€‰ä¸­æŸä¸ªèŠ‚ç‚¹ç›´æ¥è°ƒç”¨æ­¤æ–¹æ³•ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com/"</span>)</span><br><span class="line">  <span class="built_in">input</span> = splash:<span class="built_in">select</span>(<span class="string">"#kw"</span>)</span><br><span class="line">  <span class="built_in">input</span>:send_text(<span class="string">'Splash'</span>)</span><br><span class="line">  submit = splash:<span class="built_in">select</span>(<span class="string">'#su'</span>)</span><br><span class="line">  submit:mouse_click()</span><br><span class="line">  splash:wait(<span class="number">3</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:png()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h4 id="Splash-API-è°ƒç”¨"><a href="#Splash-API-è°ƒç”¨" class="headerlink" title="Splash API è°ƒç”¨"></a>Splash API è°ƒç”¨</h4><p>ä¸Šè¿°Splash Lua è„šæœ¬çš„ç”¨æ³•ï¼Œæ˜¯åœ¨ Splash é¡µé¢é‡Œé¢æµ‹è¯•è¿è¡Œçš„ã€‚</p>
<p>Splash æä¾›äº†ä¸€äº› HTTP API æ¥å£ï¼Œè¯·æ±‚è¿™äº›æ¥å£å¹¶ä¼ é€’ç›¸åº”çš„å‚æ•°å³å¯è·å–é¡µé¢æ¸²æŸ“åçš„ç»“æœã€‚</p>
<h5 id="render-html"><a href="#render-html" class="headerlink" title="render.html"></a>render.html</h5><p>ç”¨äºè·å– JavaScript æ¸²æŸ“çš„é¡µé¢çš„ HTML ä»£ç ï¼Œæ¥å£åœ°å€å°±æ˜¯ Splash çš„è¿è¡Œåœ°å€åŠ æ­¤æ¥å£åç§°</p>
<p><code>url = &#39;http://localhost:8050/render.html?url=https://www.baidu.com&#39;</code></p>
<p><code>url = &#39;http://localhost:8050/render.html?url=https://www.taobao.com&amp;amp;wait=5&#39;</code></p>
<h5 id="render-png"><a href="#render-png" class="headerlink" title="render.png"></a>render.png</h5><p>æ­¤æ¥å£å¯ä»¥è·å–ç½‘é¡µæˆªå›¾,è¿”å›çš„æ˜¯ PNG æ ¼å¼çš„å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ®</p>
<p><code>&#39;http://localhost:8050/render.png?url=https://www.jd.com&amp;wait=5&amp;width=1000&amp;height=700&#39;</code></p>
<h5 id="render-jpeg"><a href="#render-jpeg" class="headerlink" title="render.jpeg"></a>render.jpeg</h5><p>å’Œ render.png ç±»ä¼¼ï¼Œè¿”å›çš„æ˜¯ JPEG æ ¼å¼çš„å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<p>å¦å¤–æ­¤æ¥å£ç›¸æ¯” render.png è¿˜å¤šäº†ä¸€ä¸ªå‚æ•° qualityï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®å›¾ç‰‡è´¨é‡ã€‚</p>
<h5 id="render-har"><a href="#render-har" class="headerlink" title="render.har"></a>render.har</h5><p>æ­¤æ¥å£ç”¨äºè·å–é¡µé¢åŠ è½½çš„ HAR æ•°æ®</p>
<p><code>http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5</code></p>
<h5 id="render-json"><a href="#render-json" class="headerlink" title="render.json"></a>render.json</h5><p>æ­¤æ¥å£åŒ…å«äº†å‰é¢æ¥å£çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿”å›ç»“æœæ˜¯ Json æ ¼å¼</p>
<p><code>http://localhost:8050/render.json?url=https://httpbin.org&amp;html=1&amp;har=1</code></p>
<p>å¯ä»¥é€šè¿‡ä¼ å…¥ä¸åŒå‚æ•°æ§åˆ¶å…¶è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œä¼ å…¥ html=1ï¼Œè¿”å›ç»“æœå³ä¼šå¢åŠ æºä»£ç æ•°æ®ï¼›ä¼ å…¥ png=1ï¼Œè¿”å›ç»“æœå³ä¼šå¢åŠ é¡µé¢ PNG æˆªå›¾æ•°æ®ï¼›ä¼ å…¥ har=1ï¼Œåˆ™ä¼šè·å¾—é¡µé¢ HAR æ•°æ®ã€‚</p>
<h5 id="execute"><a href="#execute" class="headerlink" title="execute"></a>execute</h5><p>ç”¨æ­¤æ¥å£ä¾¿å¯å®ç°ä¸ Lua è„šæœ¬çš„å¯¹æ¥ã€‚å®ç°ä¸€äº›äº¤äº’æ“ä½œã€‚</p>
<p>å°†luaè„šæœ¬è½¬åŒ–ä¸º URL ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œæ‹¼æ¥åˆ° execute æ¥å£åé¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"></span><br><span class="line">lua = <span class="string">'''</span></span><br><span class="line"><span class="string">function main(splash)</span></span><br><span class="line"><span class="string">    return 'hello'</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://localhost:8050/execute?lua_source='</span> + quote(lua)</span><br><span class="line">response = requests.get(url)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
        <tag>Selenium</tag>
        <tag>Slash</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ ä¹‹æ•°æ®å­˜å‚¨</title>
    <url>/2020/07/29/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[<h2 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h2><p>TXT, JSON, CSVç­‰ï¼Œä»¥åŠå…³ç³»å‹æ•°æ®åº“MySQLï¼Œè²å…³ç³»å‹æ•°æ®åº“MongoDBã€Redis ç­‰</p>
<a id="more"></a>
<h3 id="æ–‡ä»¶å­˜å‚¨"><a href="#æ–‡ä»¶å­˜å‚¨" class="headerlink" title="æ–‡ä»¶å­˜å‚¨"></a>æ–‡ä»¶å­˜å‚¨</h3><h4 id="TXTæ–‡æœ¬å­˜å‚¨"><a href="#TXTæ–‡æœ¬å­˜å‚¨" class="headerlink" title="TXTæ–‡æœ¬å­˜å‚¨"></a>TXTæ–‡æœ¬å­˜å‚¨</h4><p>æ–‡ä»¶å†™å…¥è¿˜æœ‰ä¸€ç§ç®€å†™æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ with as è¯­æ³•ã€‚åœ¨ with æ§åˆ¶å—ç»“æŸæ—¶ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†è°ƒç”¨ close æ–¹æ³•äº†ã€‚è¿™ç§ä¿å­˜æ–¹å¼å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'explore.txt'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">'\n'</span>.join([question, author, answer]))</span><br><span class="line">    file.write(<span class="string">'\n'</span> + <span class="string">'='</span> * <span class="number">50</span> + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>JSONï¼Œå…¨ç§°ä¸º JavaScript Object Notation, ä¹Ÿå°±æ˜¯ JavaScript å¯¹è±¡æ ‡è®°ï¼Œå®ƒé€šè¿‡å¯¹è±¡å’Œæ•°ç»„çš„ç»„åˆæ¥è¡¨ç¤ºæ•°æ®ï¼Œæ„é€ ç®€æ´ä½†æ˜¯ç»“æ„åŒ–ç¨‹åº¦éå¸¸é«˜ï¼Œæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p>
<h5 id="å¯¹è±¡å’Œæ•°ç»„"><a href="#å¯¹è±¡å’Œæ•°ç»„" class="headerlink" title="å¯¹è±¡å’Œæ•°ç»„"></a>å¯¹è±¡å’Œæ•°ç»„</h5><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰</p>
<p><strong>å¯¹è±¡</strong> ï¼šå®ƒåœ¨ JavaScript ä¸­æ˜¯ä½¿ç”¨èŠ±æ‹¬å· {} åŒ…è£¹èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„ä¸º {key1ï¼švalue1, key2ï¼švalue2, â€¦} çš„é”®å€¼å¯¹ç»“æ„ã€‚åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œkey ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œvalue ä¸ºå¯¹åº”çš„å€¼ã€‚é”®åå¯ä»¥ä½¿ç”¨æ•´æ•°å’Œå­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚å€¼çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<p><strong>æ•°ç»„</strong> ï¼šæ•°ç»„åœ¨ JavaScript ä¸­æ˜¯æ–¹æ‹¬å· [] åŒ…è£¹èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„ä¸º [â€œjavaâ€, â€œjavascriptâ€, â€œvbâ€, â€¦] çš„ç´¢å¼•ç»“æ„ã€‚åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå®ƒä¹Ÿå¯ä»¥åƒå¯¹è±¡é‚£æ ·ä½¿ç”¨é”®å€¼å¯¹ï¼Œä½†è¿˜æ˜¯ç´¢å¼•ç”¨å¾—å¤šã€‚åŒæ ·ï¼Œå€¼çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<h5 id="è¯»å–å’Œå†™å…¥"><a href="#è¯»å–å’Œå†™å…¥" class="headerlink" title="è¯»å–å’Œå†™å…¥"></a>è¯»å–å’Œå†™å…¥</h5><p>loads() string to json # <strong>jsonæ•°æ®éœ€è¦ä½¿ç”¨åŒå¼•å·ï¼ˆ</strong>double quotes<strong>ï¼‰æ¥åŒ…å›´</strong></p>
<p>dumps() json to string <code>son.dumps(data, indent=2)</code></p>
<p>æ³¨æ„ï¼šæ–‡æœ¬å«æœ‰ä¸­æ–‡å­—ç¬¦æ—¶ï¼ŒæŒ‡å®šç¼–ç æ–¹å¼ä¸º<strong>utf-8</strong> å¹¶ä¸”å°†ensure_asciiè®¾ä¸ºFalseï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'MaoYan_result.txt'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(json.dumps(content, ensure_ascii=<span class="literal">False</span>) + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="CSV"><a href="#CSV" class="headerlink" title="CSV"></a>CSV</h4><p>è§å‰ç¯‡ï¼š<a href="https://yuqie.github.io/2020/07/25/python%E4%B9%8Bcsv/" target="_blank" rel="noopener">pythonä¹‹csv</a></p>
<h3 id="å…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“"></a>å…³ç³»å‹æ•°æ®åº“</h3><p>å…³ç³»å‹æ•°æ®åº“æ˜¯åŸºäº<strong>å…³ç³»æ¨¡å‹</strong>çš„æ•°æ®åº“ï¼Œè€Œå…³ç³»æ¨¡å‹æ˜¯é€šè¿‡äºŒç»´è¡¨æ¥ä¿å­˜çš„ï¼Œæ‰€ä»¥å®ƒçš„å­˜å‚¨æ–¹å¼å°±æ˜¯è¡Œåˆ—ç»„æˆçš„è¡¨ï¼Œæ¯ä¸€åˆ—æ˜¯ä¸€ä¸ªå­—æ®µï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€æ¡è®°å½•ã€‚è¡¨å¯ä»¥çœ‹ä½œæŸä¸ªå®ä½“çš„é›†åˆï¼Œè€Œå®ä½“ä¹‹é—´å­˜åœ¨è”ç³»ï¼Œè¿™å°±éœ€è¦è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»æ¥ä½“ç°ï¼Œå¦‚ä¸»é”®å¤–é”®çš„å…³è”å…³ç³»ã€‚å¤šä¸ªè¡¨ç»„æˆä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚</p>
<p>å…³ç³»å‹æ•°æ®åº“æœ‰å¤šç§ï¼Œå¦‚ SQLiteã€MySQLã€Oracleã€SQL Serverã€DB2 ç­‰ã€‚</p>
<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>åœ¨ Python 2 ä¸­ï¼Œè¿æ¥ MySQL çš„åº“å¤§å¤šæ˜¯ä½¿ç”¨ MySQLdbï¼Œä½†æ˜¯æ­¤åº“çš„å®˜æ–¹å¹¶ä¸æ”¯æŒ Python 3ï¼Œæ‰€ä»¥åœ¨Python3ä¸­ä½¿ç”¨ PyMySQL æ“ä½œ MySQL æ•°æ®åº“ã€‚</p>
<h5 id="åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š"><a href="#åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š" class="headerlink" title="åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š"></a>åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š</h5><p><code>&quot;CREATE DATABASE spiders DEFAULT CHARACTER SET utf8&quot;</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql  </span><br><span class="line"></span><br><span class="line">db = pymysql.connect(host=<span class="string">'localhost'</span>,user=<span class="string">'root'</span>, password=<span class="string">'123456'</span>, port=<span class="number">3306</span>)  </span><br><span class="line">cursor = db.cursor()  </span><br><span class="line">cursor.execute(<span class="string">"CREATE DATABASE spiders DEFAULT CHARACTER SET utf8"</span>)  </span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<p>ä¹‹åé‡æ–°è¿æ¥æ•°æ®åº“ï¼ŒæŒ‡å®šå‚æ•°db</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = pymysql.connect(host=<span class="string">'localhost'</span>, user=<span class="string">'root'</span>, password=<span class="string">'123456'</span>, port=<span class="number">3306</span>, db=<span class="string">'spiders'</span>)</span><br><span class="line">cursor = db.cursor()</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºè¡¨ï¼š"><a href="#åˆ›å»ºè¡¨ï¼š" class="headerlink" title="åˆ›å»ºè¡¨ï¼š"></a>åˆ›å»ºè¡¨ï¼š</h5><p><code>&#39;CREATE TABLE IF NOT EXISTS students (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, age INT NOT NULL, PRIMARY KEY (id))&#39;</code></p>
<h5 id="æ’å…¥æ•°æ®ï¼š"><a href="#æ’å…¥æ•°æ®ï¼š" class="headerlink" title="æ’å…¥æ•°æ®ï¼š"></a>æ’å…¥æ•°æ®ï¼š</h5><p><code>&#39;INSERT INTO students(id, name, age) values(% s, % s, % s)&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">try:</span><br><span class="line">    cursor.execute(sql, (id, user, age))</span><br><span class="line">    db.commit()</span><br><span class="line">except:</span><br><span class="line">    db.rollback()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹äºæ•°æ®æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œéƒ½éœ€è¦æ‰§è¡Œ db å¯¹è±¡çš„ commit æ–¹æ³•æ‰èƒ½çœŸæ­£ç”Ÿæ•ˆï¼Œè¿™ä¸ªæ–¹æ³•æ‰æ˜¯çœŸæ­£å°†è¯­å¥æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œçš„æ–¹æ³•ã€‚</li>
<li>å¼‚å¸¸å¤„ç†ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œåˆ™è°ƒç”¨ rollback æ‰§è¡Œæ•°æ®å›æ»šï¼Œå¯ä»¥ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li>
<li>äº‹åŠ¡æœºåˆ¶å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯è¿™ä»¶äº‹è¦ä¹ˆå‘ç”Ÿäº†ï¼Œè¦ä¹ˆæ²¡æœ‰å‘ç”Ÿã€‚æ¯”å¦‚æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä¸ä¼šå­˜åœ¨æ’å…¥ä¸€åŠçš„æƒ…å†µï¼Œè¦ä¹ˆå…¨éƒ¨æ’å…¥ï¼Œè¦ä¹ˆéƒ½ä¸æ’å…¥ï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„åŸå­æ€§ã€‚</li>
<li>äº‹åŠ¡çš„ 4 ä¸ªå±æ€§ï¼Œä¹Ÿç§°ä¸º ACID ç‰¹æ€§ã€‚</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŸå­æ€§ï¼ˆatomicityï¼‰</td>
<td>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­åŒ…æ‹¬çš„è¯¸æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åš</td>
</tr>
<tr>
<td>ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰</td>
<td>äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚ä¸€è‡´æ€§ä¸åŸå­æ€§æ˜¯å¯†åˆ‡ç›¸å…³çš„</td>
</tr>
<tr>
<td>éš”ç¦»æ€§ï¼ˆisolationï¼‰</td>
<td>ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°</td>
</tr>
<tr>
<td>æŒä¹…æ€§ï¼ˆdurabilityï¼‰</td>
<td>æŒç»­æ€§ä¹Ÿç§°æ°¸ä¹…æ€§ï¼ˆpermanenceï¼‰ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“</td>
</tr>
</tbody>
</table>
</div>
<p><strong>åŠ¨æ€æ•°æ®ä¼ å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'id'</span>: <span class="string">'20120001'</span>,</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Bob'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">table = <span class="string">'students'</span></span><br><span class="line">keys = <span class="string">', '</span>.join(data.keys())</span><br><span class="line">values = <span class="string">', '</span>.join([<span class="string">'% s'</span>] * len(data))</span><br><span class="line">sql = <span class="string">'INSERT INTO &#123;table&#125;(&#123;keys&#125;) VALUES (&#123;values&#125;)'</span>.format(table=table, keys=keys, values=values)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="keyword">if</span> cursor.execute(sql, tuple(data.values())):</span><br><span class="line">       print(<span class="string">'Successful'</span>)</span><br><span class="line">       db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Failed'</span>)</span><br><span class="line">    db.rollback()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<h5 id="æ›´æ–°æ•°æ®ï¼š"><a href="#æ›´æ–°æ•°æ®ï¼š" class="headerlink" title="æ›´æ–°æ•°æ®ï¼š"></a>æ›´æ–°æ•°æ®ï¼š</h5><p>ç°ä¸€ç§å»é‡çš„æ–¹æ³•ï¼Œå¦‚æœæ•°æ®å­˜åœ¨ï¼Œåˆ™æ›´æ–°æ•°æ®ï¼›å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥æ•°æ®ã€‚</p>
<p><code>INSERT INTO students(id, name, age) VALUES (% s, % s, % s) ON DUPLICATE KEY UPDATE id = % s, name = % s, age = % s</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'INSERT INTO &#123;table&#125;(&#123;keys&#125;) VALUES (&#123;values&#125;) ON DUPLICATE KEY UPDATE'</span>.format(table=table, keys=keys, values=values)</span><br><span class="line">update = <span class="string">','</span>.join([<span class="string">"&#123;key&#125; = % s"</span>.format(key=key) <span class="keyword">for</span> key <span class="keyword">in</span> data])</span><br><span class="line">sql += update</span><br></pre></td></tr></table></figure>
<h5 id="åˆ é™¤æ•°æ®ï¼š"><a href="#åˆ é™¤æ•°æ®ï¼š" class="headerlink" title="åˆ é™¤æ•°æ®ï¼š"></a>åˆ é™¤æ•°æ®ï¼š</h5><p><code>&#39;DELETE FROM  {table} WHERE {condition}&#39;.format(table=table, condition=condition)</code></p>
<h5 id="æŸ¥è¯¢æ•°æ®ï¼š"><a href="#æŸ¥è¯¢æ•°æ®ï¼š" class="headerlink" title="æŸ¥è¯¢æ•°æ®ï¼š"></a>æŸ¥è¯¢æ•°æ®ï¼š</h5><p>æŸ¥è¯¢å¹´é¾„ 20 å²åŠä»¥ä¸Šçš„å­¦ç”Ÿ<code>&#39;SELECT * FROM students WHERE age &gt;= 20&#39;</code></p>
<p>fetchone æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è·å–ç»“æœçš„ç¬¬ä¸€æ¡æ•°æ®ï¼Œè¿”å›ç»“æœæ˜¯å…ƒç»„å½¢å¼.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'SELECT * FROM students WHERE age &gt;= 20'</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    print(<span class="string">'Count:'</span>, cursor.rowcount)</span><br><span class="line">    row = cursor.fetchone()</span><br><span class="line">    <span class="keyword">while</span> row:</span><br><span class="line">        print(<span class="string">'Row:'</span>, row)</span><br><span class="line">        row = cursor.fetchone()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Error'</span>)</span><br></pre></td></tr></table></figure>
<p>fetchall æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¾—åˆ°ç»“æœçš„æ‰€æœ‰æ•°æ®ã€‚ç„¶åå°†å…¶ç»“æœå’Œç±»å‹æ‰“å°å‡ºæ¥ï¼Œå®ƒæ˜¯äºŒé‡å…ƒç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€æ¡è®°å½•ï¼Œæˆ‘ä»¬å°†å…¶éå†è¾“å‡ºå‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'SELECT * FROM students WHERE age &gt;= 20'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    results = cursor.fetchall()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">        print(row)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Error'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨"><a href="#éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨"></a>éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨</h3><p>NoSQLï¼Œå…¨ç§° Not Only SQLï¼Œæ„ä¸ºä¸ä»…ä»…æ˜¯ SQLï¼Œæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ã€‚NoSQL æ˜¯åŸºäº<strong>é”®å€¼å¯¹</strong>çš„ï¼Œè€Œä¸”ä¸éœ€è¦ç»è¿‡ SQL å±‚çš„è§£æï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰è€¦åˆæ€§ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ä»£è¡¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>é”®å€¼å­˜å‚¨æ•°æ®åº“</td>
<td>Redisã€Voldemort å’Œ Oracle BDB ç­‰</td>
</tr>
<tr>
<td>åˆ—å­˜å‚¨æ•°æ®åº“</td>
<td>Cassandraã€HBase å’Œ Riak ç­‰</td>
</tr>
<tr>
<td>æ–‡æ¡£å‹æ•°æ®åº“</td>
<td>CouchDB å’Œ MongoDB ç­‰</td>
</tr>
<tr>
<td>å›¾å½¢æ•°æ®åº“</td>
<td>Neo4Jã€InfoGrid å’Œ Infinite Graph ç­‰</td>
</tr>
</tbody>
</table>
</div>
<p>å¯¹äº<strong>çˆ¬è™«çš„æ•°æ®å­˜å‚¨</strong>æ¥è¯´ï¼Œä¸€æ¡æ•°æ®å¯èƒ½å­˜åœ¨<strong>æŸäº›å­—æ®µæå–å¤±è´¥è€Œç¼ºå¤±</strong>çš„æƒ…å†µï¼Œè€Œä¸”<strong>æ•°æ®å¯èƒ½éšæ—¶è°ƒæ•´</strong>ã€‚å¦å¤–ï¼Œæ•°æ®ä¹‹é—´è¿˜å­˜åœ¨<strong>åµŒå¥—å…³ç³»</strong>ã€‚å¦‚æœä½¿ç”¨å…³ç³»å‹æ•°æ®åº“å­˜å‚¨ï¼Œä¸€æ˜¯éœ€è¦æå‰å»ºè¡¨ï¼ŒäºŒæ˜¯å¦‚æœå­˜åœ¨æ•°æ®åµŒå¥—å…³ç³»çš„è¯ï¼Œéœ€è¦è¿›è¡Œåºåˆ—åŒ–æ“ä½œæ‰å¯ä»¥å­˜å‚¨ï¼Œè¿™éå¸¸ä¸æ–¹ä¾¿ã€‚</p>
<h4 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h4><p>MongoDB æ˜¯ç”± <strong>C++ </strong> è¯­è¨€ç¼–å†™çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªåŸºäº<strong>åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨</strong> çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿï¼Œå…¶å†…å®¹å­˜å‚¨å½¢å¼ç±»ä¼¼ JSON å¯¹è±¡ï¼Œå®ƒçš„å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ã€æ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚</p>
<p><a href="https://www.jianshu.com/p/d99f6fd8b209" target="_blank" rel="noopener">å®‰è£…MongoDB</a></p>
<p>CMDå‘½ä»¤è¿›å…¥æŸä¸ªç›®å½•: è¿›å…¥æŸä¸ªç£ç›˜ï¼Œç›´æ¥ç›˜ç¬¦ä»£å·ï¼šå¦‚Dï¼šï¼Œä¸ç”¨CD å‘½ä»¤åˆ‡æ¢; è¿›å…¥é™¤æ ¹å½•ä»¥ä¸‹çš„æ–‡ä»¶å¤¹, cd æ–‡ä»¶å¤¹è·¯å¾„.</p>
<p>é‡åˆ°warningï¼šAccess control is not enabled for the database.</p>
<p>åŸå› åˆ†æï¼šæ–°ç‰ˆæœ¬çš„MongDBå¢åŠ äº†å®‰å…¨æ€§è®¾è®¡ï¼Œæ¨èç”¨æˆ·åˆ›å»ºä½¿ç”¨æ•°æ®åº“æ—¶è¿›è¡ŒéªŒè¯ã€‚å¦‚æœç”¨æˆ·æƒ³å»ºç«‹ç®€å•è¿æ¥ï¼Œåˆ™ä¼šæç¤ºè­¦ç¤ºä¿¡æ¯ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šåˆ›å»ºç®¡ç†å‘˜å¹¶è®¾ç½®å¯†ç </p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: "userAdmin", //ç”¨æˆ·å</span><br><span class="line">    pwd: "123", //å¯†ç </span><br><span class="line">    roles: [ &#123; role: "userAdminAnyDatabase", db: "admin" &#125; ] //æƒé™</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>é‡å¯MongoDBæœåŠ¡å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mongod --auth --port <span class="number">27017</span> --dbpath &lt;å…³è”è·¯å¾„:bin/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç«¯å£é»˜è®¤å°±æ˜¯27017å¯ä»¥ä¸æŒ‡å®š</p>
<p><a href="https://blog.csdn.net/ttxsely/article/details/77726164" target="_blank" rel="noopener">https://blog.csdn.net/ttxsely/article/details/77726164</a></p>
</li>
</ul>
<h5 id="è¿æ¥MongoDB"><a href="#è¿æ¥MongoDB" class="headerlink" title="è¿æ¥MongoDB"></a>è¿æ¥MongoDB</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line">client = pymongo.MongoClient(host=<span class="string">'localhost'</span>, port=<span class="number">27017</span>)</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">client = MongoClient(<span class="string">'mongodb://localhost:27017/'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="æŒ‡å®šæ•°æ®åº“"><a href="#æŒ‡å®šæ•°æ®åº“" class="headerlink" title="æŒ‡å®šæ•°æ®åº“"></a>æŒ‡å®šæ•°æ®åº“</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = client.test</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">db = client[test]</span><br></pre></td></tr></table></figure>
<h5 id="æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰"><a href="#æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰" class="headerlink" title="æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰"></a>æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰</h5><p><strong>é›†åˆ</strong>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„<strong>è¡¨</strong>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">collection = db.students</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">collection = db[<span class="string">'students'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">student = &#123;</span><br><span class="line">    <span class="string">'id'</span>: <span class="string">'20170101'</span>,</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Jordan'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">'gender'</span>: <span class="string">'male'</span></span><br><span class="line">&#125;</span><br><span class="line">result = collection.insert(student)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>åœ¨ MongoDB ä¸­ï¼Œæ¯æ¡æ•°æ®å…¶å®éƒ½æœ‰ä¸€ä¸ª_id å±æ€§æ¥å”¯ä¸€æ ‡è¯†ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡æ˜è¯¥å±æ€§ï¼ŒMongoDB ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ª ObjectId ç±»å‹çš„_id å±æ€§ã€‚insert() æ–¹æ³•ä¼šåœ¨æ‰§è¡Œåè¿”å›_id å€¼ã€‚</p>
</li>
<li><p>ä»¥åˆ—è¡¨å½¢å¼ä¼ é€’å¯åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®ã€‚</p>
</li>
<li><p>PyMongo 3.x ç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹ä¸æ¨èä½¿ç”¨ insert() æ–¹æ³•ã€‚è€Œæ˜¯æ¨èä½¿ç”¨ insert_one() å’Œ insert_many() æ–¹æ³•æ¥åˆ†åˆ«æ’å…¥å•æ¡è®°å½•å’Œå¤šæ¡è®°å½•ã€‚</p>
<p>insert_one() ï¼ˆè¿”å›InsertOneResultå¯¹è±¡ï¼‰ï¼Œç”¨å…¶ inserted_id å±æ€§è·å–_idã€‚</p>
<p>insert_many() ï¼ˆè¿”å›çš„ç±»å‹æ˜¯ InsertManyResultï¼‰ï¼Œè°ƒç”¨ inserted_ids å±æ€§å¯ä»¥è·å–æ’å…¥æ•°æ®çš„_id åˆ—è¡¨ã€‚</p>
</li>
</ul>
<h5 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h5><ul>
<li>find_one() æŸ¥è¯¢å¾—åˆ°çš„æ˜¯å•ä¸ªç»“æœï¼Œç±»å‹ä¸ºå­—å…¸ï¼š<code>result = collection.find_one({&#39;name&#39;: &#39;Mike&#39;})</code></li>
<li>find() åˆ™è¿”ç»“æœæ˜¯ Cursor ç±»å‹ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªç”Ÿæˆå™¨ï¼š<code>results = collection.find({&#39;age&#39;: 20})</code></li>
<li>æ¯”è¾ƒç¬¦å·å’ŒåŠŸèƒ½ç¬¦å·ï¼š</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>$lt</td>
<td>å°äº</td>
<td>{â€˜ageâ€™: {â€˜$ltâ€™: 20}}</td>
</tr>
<tr>
<td>$gt</td>
<td>å¤§äº</td>
<td>{â€˜ageâ€™: {â€˜$gtâ€™: 20}}</td>
</tr>
<tr>
<td>$lte</td>
<td>å°äºç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$lteâ€™: 20}}</td>
</tr>
<tr>
<td>$gte</td>
<td>å¤§äºç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$gteâ€™: 20}}</td>
</tr>
<tr>
<td>$ne</td>
<td>ä¸ç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$neâ€™: 20}}</td>
</tr>
<tr>
<td>$in</td>
<td>åœ¨èŒƒå›´å†…</td>
<td>{â€˜ageâ€™: {â€˜$inâ€™: [20, 23]}}</td>
</tr>
<tr>
<td>$nin</td>
<td>ä¸åœ¨èŒƒå›´å†…</td>
<td>{â€˜ageâ€™: {â€˜$ninâ€™: [20, 23]}}</td>
</tr>
<tr>
<td>æ­£åˆ™åŒ¹é…æŸ¥è¯¢</td>
<td>ä»¥ M å¼€å¤´</td>
<td>{â€˜$regexâ€™: â€˜^M.*â€™}</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ç¤ºä¾‹</th>
<th>ç¤ºä¾‹å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>$regex</td>
<td>åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</td>
<td>{â€˜$regexâ€™: â€˜^M.*â€™}</td>
<td>name ä»¥ M å¼€å¤´</td>
</tr>
<tr>
<td>$exists</td>
<td>å±æ€§æ˜¯å¦å­˜åœ¨</td>
<td>{â€˜nameâ€™: {â€˜$existsâ€™: True}}</td>
<td>name å±æ€§å­˜åœ¨</td>
</tr>
<tr>
<td>$type</td>
<td>ç±»å‹åˆ¤æ–­</td>
<td>{â€˜ageâ€™: {â€˜$typeâ€™: â€˜intâ€™}}</td>
<td>age çš„ç±»å‹ä¸º int</td>
</tr>
<tr>
<td>$mod</td>
<td>æ•°å­—æ¨¡æ“ä½œ</td>
<td>{â€˜ageâ€™: {â€˜$modâ€™: [5, 0]}}</td>
<td>å¹´é¾„æ¨¡ 5 ä½™ 0</td>
</tr>
<tr>
<td>$text</td>
<td>æ–‡æœ¬æŸ¥è¯¢</td>
<td>{â€˜$textâ€™: {â€˜$searchâ€™: â€˜Mikeâ€™}}</td>
<td>text ç±»å‹çš„å±æ€§ä¸­åŒ…å« Mike å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>$where</td>
<td>é«˜çº§æ¡ä»¶æŸ¥è¯¢</td>
<td>{â€˜$whereâ€™: â€˜obj.fans_count == obj.follows_countâ€™}</td>
<td>è‡ªèº«ç²‰ä¸æ•°ç­‰äºå…³æ³¨æ•°</td>
</tr>
</tbody>
</table>
</div>
<h5 id="è®¡æ•°"><a href="#è®¡æ•°" class="headerlink" title="è®¡æ•°"></a>è®¡æ•°</h5><p><code>count = collection.find({&#39;age&#39;: 20}).count()</code></p>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING)</code></p>
<p>è°ƒç”¨ pymongo.ASCENDING æŒ‡å®šå‡åºã€‚å¦‚æœè¦é™åºæ’åˆ—ï¼Œå¯ä»¥ä¼ å…¥ pymongo.DESCENDINGã€‚</p>
<h5 id="åç§»"><a href="#åç§»" class="headerlink" title="åç§»"></a>åç§»</h5><p>ä¾‹å¦‚ï¼Œå¿½ç•¥å‰ä¸¤ä¸ªå…ƒç´ ï¼Œå¾—åˆ°ç¬¬ä¸‰ä¸ªåŠä»¥åçš„å…ƒç´ ï¼š</p>
<p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING).skip(2)</code></p>
<p>å¯ä»¥ç”¨ limit() æ–¹æ³•æŒ‡å®šè¦å–çš„ç»“æœä¸ªæ•°ï¼š</p>
<p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING).skip(2).limit(2)</code></p>
<ul>
<li><p>åœ¨æ•°æ®åº“æ•°é‡éå¸¸åºå¤§çš„æ—¶å€™ï¼Œå¦‚åƒä¸‡ã€äº¿çº§åˆ«ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨å¤§çš„åç§»é‡æ¥æŸ¥è¯¢æ•°æ®ï¼Œå› ä¸ºè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚è¿™æ—¶éœ€è¦è®°å½•å¥½ä¸Šæ¬¡æŸ¥è¯¢çš„_idï¼Œä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹æ“ä½œæ¥æŸ¥è¯¢:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from bson.objectid import ObjectId</span><br><span class="line">collection.find(&#123;&#39;_id&#39;: &#123;&#39;$gt&#39;: ObjectId(&#39;593278c815c2602678bb2b8d&#39;)&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h5><ul>
<li><p>update</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">condition = &#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;</span><br><span class="line">student = collection.find_one(condition)</span><br><span class="line">student[<span class="string">'age'</span>] = <span class="number">25</span></span><br><span class="line">result = collection.update(condition, student)</span><br><span class="line"><span class="comment"># ä½¿ç”¨ $set æ“ä½œç¬¦å¯¹æ•°æ®è¿›è¡Œæ›´æ–°</span></span><br><span class="line">result = collection.update(condition, &#123;<span class="string">'$set'</span>: student&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>update_one()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½å†ç›´æ¥ä¼ å…¥ä¿®æ”¹åçš„å­—å…¸,è€Œæ˜¯éœ€è¦ä½¿ç”¨ &#123;'$set': student&#125;</span></span><br><span class="line">condition = &#123;<span class="string">'age'</span>: &#123;<span class="string">'$gt'</span>: <span class="number">20</span>&#125;&#125;</span><br><span class="line">result = collection.update_one(condition, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'age'</span>: <span class="number">1</span>&#125;&#125;) <span class="comment"># æ‰§è¡Œä¹‹åä¼šå°†ç¬¬ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®å¹´é¾„åŠ  1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>update_many()ï¼Œåˆ™ä¼šå°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®éƒ½æ›´æ–°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.update_many(condition, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'age'</span>: <span class="number">1</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h5><ul>
<li><p>remove()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_one(&#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete_one()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_one(&#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete_many()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_many(&#123;<span class="string">'age'</span>: &#123;<span class="string">'$lt'</span>: <span class="number">25</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h5><ul>
<li>ç»„åˆæ–¹æ³•ï¼Œå¦‚ find_one_and_delete()ã€find_one_and_replace() å’Œ find_one_and_update(</li>
<li>å¯¹ç´¢å¼•è¿›è¡Œæ“ä½œï¼Œå¦‚ create_index()ã€create_indexes() å’Œ drop_index() ç­‰ã€‚</li>
</ul>
<h4 id="Redis-å­˜å‚¨"><a href="#Redis-å­˜å‚¨" class="headerlink" title="Redis å­˜å‚¨"></a>Redis å­˜å‚¨</h4><p>Redis æ˜¯ä¸€ä¸ªåŸºäº<strong>å†…å­˜</strong> çš„é«˜æ•ˆçš„é”®å€¼å‹éå…³ç³»å‹æ•°æ®åº“ï¼Œå­˜å–æ•ˆç‡æé«˜ï¼Œè€Œä¸”æ”¯æŒå¤šç§å­˜å‚¨æ•°æ®ç»“æ„ã€‚</p>
<p>StrictRedisï¼šsetå’Œgetæ“ä½œã€‚</p>
<h5 id="è¿æ¥-Redis"><a href="#è¿æ¥-Redis" class="headerlink" title="è¿æ¥ Redis"></a>è¿æ¥ Redis</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> StrictRedis  </span><br><span class="line"></span><br><span class="line">redis = StrictRedis(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>, password=<span class="string">'foobared'</span>)  <span class="comment"># defaultï¼š localhostã€6379ã€0 å’Œ None</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ ConnectionPool æ¥è¿æ¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> StrictRedis, ConnectionPool  </span><br><span class="line"></span><br><span class="line">pool = ConnectionPool(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>, password=<span class="string">'foobared'</span>)  </span><br><span class="line">redis = StrictRedis(connection_pool=pool)</span><br></pre></td></tr></table></figure>
<p>ConnectionPool è¿˜æ”¯æŒé€šè¿‡ URL æ¥æ„å»º, URL çš„æ ¼å¼æ”¯æŒæœ‰å¦‚ä¸‹ 3 ç§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># redis://[:password]@host:port/db   # åˆ›å»º Redis TCP è¿æ¥</span></span><br><span class="line"><span class="comment"># rediss://[:password]@host:port/db  # Redis TCP+SSL è¿æ¥</span></span><br><span class="line"><span class="comment"># unix://[:password]@/path/to/socket.sock?db=db # Redis UNIX socket è¿æ¥</span></span><br><span class="line">    </span><br><span class="line">url = <span class="string">'redis://:foobared@localhost:6379/0'</span>  </span><br><span class="line">pool = ConnectionPool.from_url(url)  </span><br><span class="line">redis = StrictRedis(connection_pool=pool)</span><br></pre></td></tr></table></figure>
<h5 id="é”®æ“ä½œ"><a href="#é”®æ“ä½œ" class="headerlink" title="é”®æ“ä½œ"></a>é”®æ“ä½œ</h5><h5 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h5><p>é”®å€¼å¯¹å½¢å¼å­˜å‚¨</p>
<p>set(name,value) </p>
<p>mset(name,value)</p>
<p>get(value)</p>
<p>mget(value)</p>
<p>getset(name, value)</p>
<p>incr(name, amount=1)  é”®åä¸º name çš„ value å¢å€¼æ“ä½œï¼Œé»˜è®¤ä¸º 1ï¼Œé”®ä¸å­˜åœ¨åˆ™è¢«åˆ›å»ºå¹¶è®¾ä¸º </p>
<p>decr(name, amount=1)</p>
<p>append(key, value)</p>
<h5 id="åˆ—è¡¨æ“ä½œ"><a href="#åˆ—è¡¨æ“ä½œ" class="headerlink" title="åˆ—è¡¨æ“ä½œ"></a>åˆ—è¡¨æ“ä½œ</h5><div class="table-container">
<table>
<thead>
<tr>
<th>æ–¹ã€€ã€€æ³•</th>
<th>ä½œã€€ã€€ç”¨</th>
<th>å‚æ•°è¯´æ˜</th>
<th>ç¤ºã€€ã€€ä¾‹</th>
<th>ç¤ºä¾‹è¯´æ˜</th>
<th>ç¤ºä¾‹ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpush(name, *values)</td>
<td>åœ¨é”®åä¸º name çš„åˆ—è¡¨æœ«å°¾æ·»åŠ å€¼ä¸º value çš„å…ƒç´ ï¼Œå¯ä»¥ä¼ å¤šä¸ª</td>
<td>nameï¼šé”®åï¼›valuesï¼šå€¼</td>
<td>redis.rpush(â€˜listâ€™, 1, 2, 3)</td>
<td>å‘é”®åä¸º list çš„åˆ—è¡¨å°¾æ·»åŠ  1ã€2ã€3</td>
<td>3ï¼Œåˆ—è¡¨å¤§å°</td>
</tr>
<tr>
<td>lpush(name, *values)</td>
<td>åœ¨é”®åä¸º name çš„åˆ—è¡¨å¤´æ·»åŠ å€¼ä¸º value çš„å…ƒç´ ï¼Œå¯ä»¥ä¼ å¤šä¸ª</td>
<td>nameï¼šé”®åï¼›valuesï¼šå€¼</td>
<td>redis.lpush(â€˜listâ€™, 0)</td>
<td>å‘é”®åä¸º list çš„åˆ—è¡¨å¤´éƒ¨æ·»åŠ  0</td>
<td>4ï¼Œåˆ—è¡¨å¤§å°</td>
</tr>
<tr>
<td>llen(name)</td>
<td>è¿”å›é”®åä¸º name çš„åˆ—è¡¨çš„é•¿åº¦</td>
<td>nameï¼šé”®å</td>
<td>redis.llen(â€˜listâ€™)</td>
<td>è¿”å›é”®åä¸º list çš„åˆ—è¡¨çš„é•¿åº¦</td>
<td>4</td>
</tr>
<tr>
<td>lrange(name, start, end)</td>
<td>è¿”å›é”®åä¸º name çš„åˆ—è¡¨ä¸­ start è‡³ end ä¹‹é—´çš„å…ƒç´ </td>
<td>nameï¼šé”®åï¼›startï¼šèµ·å§‹ç´¢å¼•ï¼›endï¼šç»ˆæ­¢ç´¢å¼•</td>
<td>redis.lrange(â€˜listâ€™, 1, 3)</td>
<td>è¿”å›èµ·å§‹ç´¢å¼•ä¸º 1 ç»ˆæ­¢ç´¢å¼•ä¸º 3 çš„ç´¢å¼•èŒƒå›´å¯¹åº”çš„åˆ—è¡¨</td>
<td>[bâ€™3â€™, bâ€™2â€™, bâ€™1â€™]</td>
</tr>
<tr>
<td>ltrim(name, start, end)</td>
<td>æˆªå–é”®åä¸º name çš„åˆ—è¡¨ï¼Œä¿ç•™ç´¢å¼•ä¸º start åˆ° end çš„å†…å®¹</td>
<td>nameï¼šé”®åï¼›startï¼šèµ·å§‹ç´¢å¼•ï¼›endï¼šç»ˆæ­¢ç´¢å¼•</td>
<td>ltrim(â€˜listâ€™, 1, 3)</td>
<td>ä¿ç•™é”®åä¸º list çš„ç´¢å¼•ä¸º 1 åˆ° 3 çš„å…ƒç´ </td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<h5 id="é›†åˆæ“ä½œ"><a href="#é›†åˆæ“ä½œ" class="headerlink" title="é›†åˆæ“ä½œ"></a>é›†åˆæ“ä½œ</h5><p>é›†åˆä¸­çš„å…ƒç´ éƒ½æ˜¯ä¸é‡å¤çš„</p>
<h5 id="æœ‰åºé›†åˆæ“ä½œ"><a href="#æœ‰åºé›†åˆæ“ä½œ" class="headerlink" title="æœ‰åºé›†åˆæ“ä½œ"></a>æœ‰åºé›†åˆæ“ä½œ</h5><p>æœ‰åºé›†åˆæ¯”é›†åˆå¤šäº†ä¸€ä¸ªåˆ†æ•°å­—æ®µï¼Œåˆ©ç”¨å®ƒå¯ä»¥å¯¹é›†åˆä¸­çš„æ•°æ®è¿›è¡Œæ’åº</p>
<h5 id="æ•£åˆ—æ“ä½œ"><a href="#æ•£åˆ—æ“ä½œ" class="headerlink" title="æ•£åˆ—æ“ä½œ"></a>æ•£åˆ—æ“ä½œ</h5><p>æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„</p>
<h5 id="RedisDump"><a href="#RedisDump" class="headerlink" title="RedisDump"></a>RedisDump</h5><p>æä¾›äº† Redis æ•°æ®çš„å¯¼å…¥å’Œå¯¼å‡ºåŠŸèƒ½ï¼Œredis-dump ç”¨äºå¯¼å‡ºæ•°æ®ï¼Œredis-load ç”¨äºå¯¼å…¥æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>æ•°æ®å¤„ç†</tag>
        <tag>jsonï¼Œcsvï¼Œæ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°äººç”Ÿçš„ç¬¬ä¸€æ¬¡é¢è¯•</title>
    <url>/2020/07/21/%E8%AE%B0%E4%BA%BA%E7%94%9F%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[<p>å†™åœ¨æœ€å‰é¢ï¼šå¿«26å²é«˜é¾„æ‰ç»å†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å·¥ä½œé¢è¯•ï¼Œå€¼å¾—å†™ç¯‡åšå®¢çºªå¿µä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h2 id="å½¢å¼ï¼š"><a href="#å½¢å¼ï¼š" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h2><p>ç½‘ç»œé¢è¯•ï¼›2ä¸ªHRï¼Œ10åˆ†é’Ÿã€‚</p>
<h2 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h2><ol>
<li><p>1åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»ï¼›</p>
</li>
<li><p>é—®äº†æœ¬ç§‘é™¢ç³»æ˜¯ä¸‹å±é™¢ç³»ï¼ˆæ°‘åŠæŒ‚åï¼‰è¿˜æ˜¯æ­£ç»é™¢ç³»ï¼Ÿ</p>
<blockquote>
<p>åŸè¯ä¸å¤ªä¸€æ ·ï¼Œå¯¼è‡´ä¸€å¼€å§‹ç«Ÿç„¶æ²¡æœ‰å¬å‡ºæ¥HRçš„æ„æ€ï¼Œè¿˜ä¸€æœ¬æ­£ç»åœ°å‘HRä»‹ç»ã€‚</p>
</blockquote>
</li>
<li><p>ç ”ç©¶ç”Ÿå‡å­¦æ˜¯ä¿ç ”è¿˜æ˜¯è€ƒç ”ï¼Ÿ</p>
</li>
<li><p>ä¸ºä»€ä¹ˆé€‰æ‹©æ‹›å•†é“¶è¡Œï¼Œä¹‹åä¸æ‰“ç®—åšç ”ç©¶äº†ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸»è¦ä»æ‰€å­¦ä¸“ä¸šæ—¢å¯ä»¥ç»§ç»­åœ¨å®éªŒå®¤æ¢ç©¶æ›´å‰æ²¿çš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ä¸šï¼Œå·¥ä¸šç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”æˆ˜ç•¥å®¢æˆ·éƒ¨ï¼ˆæœ‰ç»†åˆ†ï¼Œæˆ¿åœ°äº§ï¼Œæ–°èƒ½æºï¼Œç”µåŠ›ç­‰ç­‰ï¼‰ä»¥åŠæŠ•èµ„é“¶è¡Œéƒ¨ï¼ˆæ¶‰åŠè¡Œä¸šç ”ç©¶ï¼‰çš„å²—ä½å’Œä¸“ä¸šæœ‰ç›¸å…³æ€§ï¼Œè¿™æ ·å¯ä»¥åšåˆ°å­¦ä»¥è‡´ç”¨ã€‚</p>
</blockquote>
</li>
<li><p>èƒ½å¦æ¥å—åŸå¸‚çš„è°ƒå‰‚ï¼Ÿ</p>
<blockquote>
<p>åªæœ‰åŒ—äº¬å’Œæ·±åœ³ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸ªäººæ— æ‰€è°“ï¼Œæ‰€ä»¥å›ç­”å¯ä»¥æ¥å—ã€‚</p>
</blockquote>
</li>
<li><p>èƒ½å¦æ¥å—å²—ä½çš„è°ƒå‰‚ï¼Ÿ</p>
<blockquote>
<p>æŠ¥åè¡¨éœ€è¦å¡«å†™ä¸‰ä¸ªå¿—æ„¿ï¼Œæˆ‘å…ˆè¡¨ç¤ºå¯ä»¥æ¥å—è°ƒå‰‚ï¼Œç„¶åé™ˆè¿°ç¬¬äºŒä¸ªå¿—æ„¿ä¸è‡ªå·±çš„å¥‘åˆç‚¹ï¼Œä½†ç¬¬ä¸‰ä¸ªå¿—æ„¿è¡¨ç°å¾—æœ‰ç‚¹ä¸å¤ªä¹æ„ï¼ŒHRé—®æˆ‘å¸®ä½ ä¿®æ”¹æˆå‰ä¸¤ä¸ªå¿—æ„¿å¯ä»¥ä¹ˆï¼Œæˆ‘è¡¨ç¤ºå¯ä»¥ORZã€‚æ·±åœ³çš„èŒä½å’ŒåŒ—äº¬çš„ä¸å¤ªä¸€æ ·ï¼ˆä¸ä¸€æ ·æ€ä¹ˆè°ƒå‰‚åŸå¸‚å‘¢ï¼‰ï¼Œå¿˜äº†é—®èƒ½ä¸èƒ½åŠ ä¸Šæ·±åœ³é‚£è¾¹çš„æŸä¸€ä¸ªå²—ä½ã€‚</p>
</blockquote>
</li>
</ol>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><ol>
<li>è¯­é€Ÿè¿‡å¿«ã€‚</li>
<li>æœ‰ç‚¹æŠ¢è¯ï¼Œæœ‰æ—¶å€™æ²¡æœ‰å¬å®ŒHRçš„é—®é¢˜å°±å¼€å§‹æ¥è¯å‡†å¤‡å›ç­”äº†ã€‚</li>
</ol>
<hr>
<p>è€å¿ƒç­‰å¾…ç»“æœï¼</p>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠScikit-Learnä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹-ç¬¬äºŒéƒ¨åˆ†</title>
    <url>/2020/09/03/%E3%80%8AScikit-Learn%E4%B8%8ETensorFlow%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97%E3%80%8B-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/</url>
    <content><![CDATA[<p>å­¦ä¹ èµ„æ–™å‚è€ƒï¼š</p>
<p><a href="https://www.cntofu.com/book/27/docs/2.%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®.md</a></p>
<p><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">åŸä¹¦Githubä¸Šä»£ç </a></p>
<p><a href="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/" target="_blank" rel="noopener">Oreillyä¸ŠåŸä¹¦ç¬¬äºŒç‰ˆï¼ˆå¯ä»¥åœ¨çº¿é˜…è¯»ï¼‰</a></p>
<p><a href="https://github.com/apachecn/hands-on-ml-zh/blob/master/docs/1.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%A7%88.md" target="_blank" rel="noopener">ç¬¬ä¸€ç‰ˆç¿»è¯‘</a></p>
<p><a href="https://www.jianshu.com/p/3470a6efbe8d" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬ä¸€ç‰ˆ</a></p>
<p><a href="https://www.jianshu.com/p/86626c79814a" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬äºŒç‰ˆç¬¬äºŒéƒ¨åˆ†</a></p>
<p><a href="https://www.jianshu.com/p/4a94798f7dcc" target="_blank" rel="noopener">ç®€ä¹¦ã€ŠScikit-Learnã€Kerasä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹ç¬¬ä¸€ç‰ˆå’Œç¬¬äºŒç‰ˆå¯¹ç…§</a></p>
<p><a href="https://blog.csdn.net/jiaoyangwm/article/details/82387883#%E7%BB%83%E4%B9%A0%E9%A2%987" target="_blank" rel="noopener">ç»ƒä¹ é¢˜ç­”æ¡ˆå‚è€ƒ</a> <a href="https://blog.csdn.net/leowinbow/article/details/88581039" target="_blank" rel="noopener">å‚è€ƒ2</a></p>
<a id="more"></a>
<p>[TOC]</p>
<h2 id="ç¬¬10ç« -ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ"><a href="#ç¬¬10ç« -ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¬¬10ç«  ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ"></a>ç¬¬10ç«  ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ</h2><p>éœ€è¦å®‰è£…<a href="https://www.jianshu.com/p/3a76e4f0504a" target="_blank" rel="noopener">Tensorflow</a>å’ŒKeras</p>
<p>äººå·¥ç¥ç»ç½‘ç»œæ˜¯å—å¤§è„‘ä¸­çš„ç”Ÿç‰©ç¥ç»å…ƒå¯å‘è€Œæ¥çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p>
<p>äººå·¥ç¥ç»ç½‘ç»œæ˜¯æ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒï¼Œå®ƒä¸ä»…æ ·å¼å¤šæ ·ã€åŠŸèƒ½å¼ºå¤§ï¼Œè¿˜å…·æœ‰å¯ä¼¸ç¼©æ€§ï¼Œè¿™è®©äººå·¥ç¥ç»ç½‘ç»œé€‚å®œå¤„ç†åºå¤§ä¸”å¤æ‚çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œä¾‹å¦‚å¯¹æ•°åäº¿å¼ å›¾ç‰‡åˆ†ç±»ï¼ˆè°·æ­Œå›¾ç‰‡ï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆè‹¹æœSiriï¼‰ã€å‘æ•°äº¿ç”¨æˆ·æ¯å¤©æ¨èè§†é¢‘ï¼ˆYoutubeï¼‰ã€æˆ–è€…é€šè¿‡å­¦ä¹ å‡ ç™¾å›´æ£‹ä¸–ç•Œå† å†›ï¼ˆDeepMindçš„AlphaGoï¼‰ã€‚</p>
<h3 id="ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—"><a href="#ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—" class="headerlink" title="ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—"></a>ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—</h3><p>1943å¹´ç¥ç»ç”Ÿç†å­¦å®¶Warren McCullochå’Œæ•°å­¦å®¶Walter Pittsåœ¨ä»–ä»¬é‡Œç¨‹ç¢‘çš„è®ºæ–‡<a href="https://scholar.google.com/scholar?q=A+Logical+Calculus+of+Ideas+Immanent+in+Nervous+Activity+author%3Amcculloch" target="_blank" rel="noopener">ã€ŠA Logical Calculus of Ideas Immanent in Nervous Activityã€‹</a> ä¸­ä»‹ç»äº†ä¸€ä¸ªç®€å•çš„ç”Ÿç‰©ç¥ç»å…ƒæ¨¡å‹ï¼Œå®ƒåæ¥æ¼”åŒ–æˆäº†äººå·¥ç¥ç»å…ƒï¼šä¸€ä¸ªæˆ–å¤šä¸ªäºŒå…ƒï¼ˆå¼€æˆ–å…³ï¼‰è¾“å…¥ï¼Œä¸€ä¸ªäºŒå…ƒè¾“å‡ºã€‚å½“è¾¾åˆ°ä¸€å®šçš„è¾“å…¥é‡æ—¶ï¼Œç¥ç»å…ƒå°±ä¼šäº§ç”Ÿè¾“å‡ºã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-51a591f44c8f7bba.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰"><a href="#æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰" class="headerlink" title="æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰"></a>æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰</h3><p>æ„ŸçŸ¥æœºæ˜¯æœ€ç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œç»“æ„ä¹‹ä¸€ï¼Œç”± Frank Rosenblatt å‘æ˜äº 1957å¹´ã€‚</p>
<p>å®ƒåŸºäºä¸€ç§ç¨å¾®ä¸åŒçš„äººå·¥ç¥ç»å…ƒï¼Œé˜ˆå€¼é€»è¾‘å•å…ƒï¼ˆTLUï¼‰ï¼Œæˆ–ç§°ä¸ºçº¿æ€§é˜ˆå€¼å•å…ƒï¼ˆLTUï¼‰ï¼šè¾“å…¥å’Œè¾“å‡ºæ˜¯æ•°å­—ï¼ˆè€Œä¸æ˜¯äºŒå…ƒå¼€/å…³å€¼ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªè¾“å…¥è¿æ¥éƒ½ä¸€ä¸ªæƒé‡ã€‚TLUè®¡ç®—å…¶è¾“å…¥çš„åŠ æƒå’Œï¼ˆ$z = W_1x_1 + W_2x_2 + â€¦ + W_nx_n = x^TÂ·Wï¼‰$ï¼Œç„¶åå°†é˜¶è·ƒå‡½æ•°åº”ç”¨äºè¯¥å’Œï¼Œå¹¶è¾“å‡ºç»“æœï¼š$h_W(x) = step(z)$ï¼Œå…¶ä¸­$z = x^TÂ·W$ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c40c1380818019d3.png?imageMogr2/auto-orient/strip|imageView2/2/w/1113/format/webp" alt="img"></p>
<h4 id="é˜¶è·ƒå‡½æ•°ï¼š"><a href="#é˜¶è·ƒå‡½æ•°ï¼š" class="headerlink" title="é˜¶è·ƒå‡½æ•°ï¼š"></a><strong>é˜¶è·ƒå‡½æ•°</strong>ï¼š</h4><p>å•ä½é˜¶è·ƒå‡½æ•°ï¼ˆHeaviside step functionï¼‰:</p>
<script type="math/tex; mode=display">
heaviside(z)=\left \{ \begin{array} {ll} 0& if\ z<0\\1&if \ z\geq 0 \end{array} \right.\\
sgn(z)=\left \{ \begin{array} {ll} 0& if\ z<0\\0 & if\ z =0\\1&if \ z\gt 0 \end{array} \right.</script><p>å•ä¸€TLU å¯ç”¨äºç®€å•çš„çº¿æ€§äºŒå…ƒåˆ†ç±»ã€‚å®ƒè®¡ç®—è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œå¦‚æœç»“æœè¶…è¿‡é˜ˆå€¼ï¼Œå®ƒè¾“å‡ºæ­£ç±»æˆ–è€…è¾“å‡ºè´Ÿç±»ï¼ˆå°±åƒé€»è¾‘å›å½’åˆ†ç±»æˆ–çº¿æ€§SVMåˆ†ç±»ï¼‰ã€‚</p>
<p><strong>æ„ŸçŸ¥å™¨åªç”±ä¸€å±‚ TLU ç»„æˆï¼Œæ¯ä¸ªTLUè¿æ¥åˆ°æ‰€æœ‰è¾“å…¥</strong>ã€‚å½“ä¸€å±‚çš„ç¥ç»å…ƒè¿æ¥ç€å‰ä¸€å±‚çš„æ¯ä¸ªç¥ç»å…ƒæ—¶ï¼Œè¯¥å±‚è¢«ç§°ä¸º<strong>å…¨è¿æ¥å±‚ï¼Œæˆ–ç´§å¯†å±‚</strong>ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-878dec9a6b1e9c09.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>é€šå¸¸å†æ·»åŠ ä¸€ä¸ª<strong>åç½®ç‰¹å¾ï¼ˆ$X_0=1$ï¼‰</strong>ï¼šè¿™ç§åç½®ç‰¹æ€§é€šå¸¸ç”¨ä¸€ç§ç§°ä¸ºåç½®ç¥ç»å…ƒçš„ç‰¹æ®Šç±»å‹çš„ç¥ç»å…ƒæ¥è¡¨ç¤ºï¼Œå®ƒæ€»æ˜¯è¾“å‡º 1ã€‚</p>
<p>ä¸€ä¸ªå…¨è¿æ¥å±‚ç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼š$h_{W,b}(x) = \phi (XW+B)$</p>
<h4 id="Hebbè§„åˆ™"><a href="#Hebbè§„åˆ™" class="headerlink" title="Hebbè§„åˆ™"></a>Hebbè§„åˆ™</h4><p>å¦‚ä½•è®­ç»ƒæ„ŸçŸ¥æœºï¼šæ„ŸçŸ¥å™¨ä¸€æ¬¡è¢«é¦ˆé€ä¸€ä¸ªè®­ç»ƒå®ä¾‹ï¼Œå¯¹äºæ¯ä¸ªå®ä¾‹ï¼Œå®ƒè¿›è¡Œé¢„æµ‹ã€‚å¯¹äºæ¯ä¸€ä¸ªäº§ç”Ÿé”™è¯¯é¢„æµ‹çš„è¾“å‡ºç¥ç»å…ƒï¼Œä¿®æ­£è¾“å…¥çš„è¿æ¥æƒé‡ï¼Œä»¥è·å¾—æ­£ç¡®çš„é¢„æµ‹ã€‚</p>
<script type="math/tex; mode=display">
\omega_{i,j}^{(next \ step)}=\omega_{i,j}+\eta (y_j-\hat y_j)x_i</script><p><strong>æ¯ä¸ªè¾“å‡ºç¥ç»å…ƒçš„å†³ç­–è¾¹ç•Œæ˜¯çº¿æ€§çš„ï¼Œå› æ­¤æ„ŸçŸ¥å™¨ä¸èƒ½å­¦ä¹ å¤æ‚çš„æ¨¡å¼</strong>ï¼ˆæ¯”å¦‚ Logistic å›å½’åˆ†ç±»å™¨ï¼‰ã€‚å¦‚æœè®­ç»ƒå®ä¾‹æ˜¯çº¿æ€§å¯åˆ†çš„ï¼ŒRosenblatt è¯æ˜è¯¥ç®—æ³•å°†æ”¶æ•›åˆ°ä¸€ä¸ªè§£ã€‚è¿™è¢«ç§°ä¸º<strong>æ„ŸçŸ¥å™¨æ”¶æ•›å®šç†</strong>ã€‚</p>
<p><strong>æ„ŸçŸ¥æœºä¸è¾“å‡ºç±»æ¦‚ç‡ï¼Œè€Œæ˜¯åŸºäºç¡¬é˜ˆå€¼è¿›è¡Œé¢„æµ‹ã€‚</strong></p>
<h4 id="æ„ŸçŸ¥æœºçš„å±€é™æ€§"><a href="#æ„ŸçŸ¥æœºçš„å±€é™æ€§" class="headerlink" title="æ„ŸçŸ¥æœºçš„å±€é™æ€§"></a>æ„ŸçŸ¥æœºçš„å±€é™æ€§</h4><ol>
<li>ä¸èƒ½è§£å†³ä¸€äº›çç¢çš„é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå¼‚æˆ–ï¼ˆXORï¼‰åˆ†ç±»é—®é¢˜ï¼‰ï¼ˆçº¿æ€§åˆ†ç±»æ¨¡å‹éƒ½ä¸èƒ½è§£å†³å¼‚æˆ–é—®é¢˜ï¼‰</li>
</ol>
<p>å¯ä»¥é€šè¿‡å †å å¤šä¸ªæ„ŸçŸ¥æœºæ¶ˆé™¤ï¼Œç”±æ­¤äº§ç”Ÿçš„äººå·¥ç¥ç»ç½‘ç»œè¢«ç§°ä¸º<strong>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰</strong>ã€‚ç‰¹åˆ«åœ°ï¼ŒMLP å¯ä»¥è§£å†³ XOR é—®é¢˜ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a8b41a11c481fc03.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰"><a href="#å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰" class="headerlink" title="å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰"></a>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰</h3><p>MLP ç”±ä¸€ä¸ªè¾“å…¥å±‚ã€ä¸€ä¸ªæˆ–å¤šä¸ªç§°ä¸ºéšè—å±‚çš„ TLU ç»„æˆï¼Œä¸€ä¸ª TLU å±‚ç§°ä¸ºè¾“å‡ºå±‚ï¼ˆè§å›¾ 10-7ï¼‰ã€‚é è¿‘è¾“å…¥å±‚çš„å±‚ï¼Œé€šå¸¸è¢«ç§°ä¸ºæµ…å±‚ï¼Œé è¿‘è¾“å‡ºå±‚çš„å±‚é€šå¸¸è¢«ç§°ä¸ºä¸Šå±‚ã€‚é™¤äº†è¾“å‡ºå±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ä¸€ä¸ªåç½®ç¥ç»å…ƒï¼Œå¹¶ä¸”å…¨è¿æ¥åˆ°ä¸‹ä¸€å±‚ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-eb971779e84208ec.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ä¿¡å·æ˜¯ä»è¾“å…¥åˆ°è¾“å‡ºå•å‘æµåŠ¨ï¼Œå› æ­¤è¿™ç§æ¶æ„è¢«ç§°ä¸º<strong>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰</strong></p>
<p>å½“äººå·¥ç¥ç»ç½‘ç»œæœ‰å¤šä¸ªéšå«å±‚æ—¶ï¼Œç§°ä¸º<strong>æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰</strong></p>
<h3 id="åå‘ä¼ æ’­ï¼ˆBack-Propagationï¼‰"><a href="#åå‘ä¼ æ’­ï¼ˆBack-Propagationï¼‰" class="headerlink" title="åå‘ä¼ æ’­ï¼ˆBack Propagationï¼‰"></a>åå‘ä¼ æ’­ï¼ˆBack Propagationï¼‰</h3><p>ä¸€ç§è®­ç»ƒ MLP çš„æ–¹æ³•ï¼Œä½¿ç”¨äº†é«˜æ•ˆæ¢¯åº¦è®¡ç®—çš„æ¢¯åº¦ä¸‹é™ç®—æ³•åªéœ€è¦ä¸¤æ¬¡ç½‘ç»œä¼ æ’­ï¼ˆä¸€æ¬¡å‘å‰ï¼Œä¸€æ¬¡å‘åï¼‰ï¼Œå°±å¯ä»¥ç®—å‡ºç½‘ç»œè¯¯å·®çš„ã€å’Œæ¯ä¸ªç‹¬ç«‹æ¨¡å‹å‚æ•°ç›¸å…³çš„æ¢¯åº¦ã€‚</p>
<blockquote>
<ol>
<li>æ¯æ¬¡å¤„ç†ä¸€ä¸ªå¾®æ‰¹æ¬¡ï¼ˆå‡å¦‚æ¯ä¸ªæ‰¹æ¬¡åŒ…å«32ä¸ªå®ä¾‹ï¼‰ï¼Œç”¨è®­ç»ƒé›†å¤šæ¬¡è®­ç»ƒBPï¼Œæ¯æ¬¡è¢«ç§°ä¸ºä¸€ä¸ªå‘¨æœŸï¼ˆepochï¼‰ï¼›</li>
<li>æ¯ä¸ªå¾®æ‰¹æ¬¡å…ˆè¿›å…¥è¾“å…¥å±‚ï¼Œè¾“å…¥å±‚å†å°†å…¶å‘åˆ°ç¬¬ä¸€ä¸ªéšè—å±‚ã€‚è®¡ç®—å¾—åˆ°è¯¥å±‚æ‰€æœ‰ç¥ç»å…ƒçš„ï¼ˆå¾®æ‰¹æ¬¡çš„æ¯ä¸ªå®ä¾‹çš„ï¼‰è¾“å‡ºã€‚è¾“å‡ºæ¥ç€ä¼ åˆ°ä¸‹ä¸€å±‚ï¼Œç›´åˆ°å¾—åˆ°è¾“å‡ºå±‚çš„è¾“å‡ºã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>å‰å‘ä¼ æ’­</strong>ï¼šå°±åƒåšé¢„æµ‹ä¸€æ ·ï¼Œåªæ˜¯ä¿å­˜äº†æ¯ä¸ªä¸­é—´ç»“æœï¼Œä¸­é—´ç»“æœè¦ç”¨äºåå‘ä¼ æ’­ï¼›</li>
<li>ç„¶åè®¡ç®—è¾“å‡ºè¯¯å·®ï¼ˆä½¿ç”¨æŸå¤±å‡½æ•°æ¯”è¾ƒç›®æ ‡å€¼å’Œå®é™…è¾“å‡ºå€¼ï¼Œç„¶åè¿”å›è¯¯å·®ï¼‰ï¼›</li>
<li>é€šè¿‡<strong>é“¾å¼æ³•åˆ™</strong>ï¼ˆå¯¹å¤šä¸ªå˜é‡åšå¾®åˆ†ï¼‰è®¡ç®—æ¯ä¸ªè¾“å‡ºè¿æ¥å¯¹è¯¯å·®çš„è´¡çŒ®é‡ï¼›</li>
<li>ä½¿ç”¨<strong>é“¾å¼æ³•åˆ™</strong>ï¼Œè®¡ç®—æœ€åä¸€ä¸ªéšè—å±‚çš„æ¯ä¸ªè¿æ¥å¯¹è¯¯å·®çš„è´¡çŒ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸æ–­å‘åä¼ æ’­ï¼Œç›´åˆ°åˆ°è¾¾è¾“å…¥å±‚ã€‚</li>
<li>BPç®—æ³•åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ­¥éª¤ï¼Œç”¨åˆšåˆšè®¡ç®—çš„è¯¯å·®æ¢¯åº¦è°ƒæ•´æ‰€æœ‰è¿æ¥æƒé‡ã€‚</li>
</ol>
</blockquote>
<p>å¯¹æ¯ä¸ªè®­ç»ƒå®ä¾‹ï¼ŒBPç®—æ³•å…ˆåšä¸€æ¬¡é¢„æµ‹ï¼ˆå‰å‘ä¼ æ’­ï¼‰ï¼Œç„¶åè®¡ç®—è¯¯å·®ï¼Œç„¶ååå‘é€šè¿‡æ¯ä¸€å±‚ä»¥æµ‹é‡è¯¯å·®è´¡çŒ®é‡ï¼ˆåå‘ä¼ æ’­ï¼‰ï¼Œæœ€åè°ƒæ•´æ‰€æœ‰è¿æ¥æƒé‡ä»¥é™ä½è¯¯å·®ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰ã€‚ï¼ˆæ¯ä¸ªå¾ªç¯ï¼šå‘å‰ï¼Œå‘åï¼Œè°ƒæ•´å‚æ•°ï¼‰</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p><strong>è¦æœºåˆå§‹åŒ–éšè—å±‚çš„è¿æ¥æƒé‡</strong>ã€‚å‡å¦‚æ‰€æœ‰çš„æƒé‡å’Œåç½®éƒ½åˆå§‹åŒ–ä¸º0ï¼Œåˆ™åœ¨ç»™å®šä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒéƒ½æ˜¯ä¸€æ ·çš„ï¼ŒBPç®—æ³•å¯¹è¿™äº›ç¥ç»å…ƒçš„è°ƒæ•´ä¹Ÿä¼šæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯ï¼Œå°±ç®—æ¯å±‚æœ‰å‡ ç™¾ä¸ªç¥ç»å…ƒï¼Œæ¨¡å‹çš„æ•´ä½“è¡¨ç°å°±åƒæ¯å±‚åªæœ‰ä¸€ä¸ªç¥ç»å…ƒä¸€æ ·ï¼Œæ¨¡å‹ä¼šæ˜¾å¾—ç¬¨ç¬¨çš„ã€‚å¦‚æœæƒé‡æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œå°±å¯ä»¥æ‰“ç ´å¯¹ç§°æ€§ï¼Œè®­ç»ƒå‡ºä¸åŒçš„ç¥ç»å…ƒã€‚</p>
<p><strong>è‡ªåŠ¨è®¡ç®—æ¢¯åº¦è¢«ç§°ä¸ºè‡ªåŠ¨å¾®åˆ†ã€‚</strong>åå‘ä¼ æ’­ä½¿ç”¨çš„æ˜¯<strong>åå‘æ¨¡å¼è‡ªå¾®åˆ†</strong>ã€‚è¿™ç§æ–¹æ³•å¿«è€Œå‡†ï¼Œå½“å‡½æ•°æœ‰å¤šä¸ªå˜é‡ï¼ˆè¿æ¥æƒé‡ï¼‰å’Œå¤šä¸ªè¾“å‡ºï¼ˆæŸå¤±å‡½æ•°ï¼‰è¦å¾®åˆ†æ—¶ä¹Ÿèƒ½åº”å¯¹ã€‚</p>
</blockquote>
<h4 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h4><p>ç”¨å…¶ä»–æ¿€æ´»å‡½æ•°ä»£æ›¿é˜¶è·ƒå‡½æ•°ï¼ˆå› ä¸ºé˜¶è·ƒå‡½æ•°åªåŒ…å«å¹³å¦çš„æ®µï¼Œå› æ­¤æ²¡æœ‰æ¢¯åº¦ï¼Œè€Œ Logisticå‡½æ•°å¤„å¤„éƒ½æœ‰ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„éé›¶å¯¼æ•°ï¼Œå…è®¸æ¢¯åº¦ä¸‹é™åœ¨æ¯æ­¥ä¸Šå–å¾—ä¸€äº›è¿›å±•ã€‚ï¼‰</p>
<ul>
<li><p>sigmoidï¼ˆLogisticï¼‰å‡½æ•°ï¼šè¾“å‡ºèŒƒå›´0~1</p>
<p>$\sigma(z)=\frac{1}{1+\exp(-z)}$</p>
</li>
</ul>
<ul>
<li><p>åŒæ›²æ­£åˆ‡å‡½æ•°ï¼š Så½¢ï¼Œè¿ç»­å¯å¾®ï¼Œè¾“å‡ºèŒƒå›´-1~1</p>
<p>$\tanh (z) = 2Ïƒ(2z) â€“ 1$</p>
</li>
<li><p>ReLU å‡½æ•°ï¼šè¿ç»­ï¼Œä½†åœ¨<code>z=0</code>å¤„ä¸å¯å¾®ï¼Œæ²¡æœ‰æœ€å¤§è¾“å‡ºå€¼ï¼Œä½†æ•ˆæœå¥½ï¼Œè®¡ç®—å¿«é€Ÿ</p>
<p>$ReLU(z) = max(0, z)$</p>
</li>
<li><p>softpluså‡½æ•°ï¼šReLUå‡½æ•°çš„å¹³æ»‘å˜ä½“,zæ˜¯è´Ÿå€¼æ—¶ï¼Œsoftplusæ¥è¿‘0ï¼Œzæ˜¯æ­£å€¼æ—¶ï¼Œsoftplusæ¥è¿‘z</p>
<p>$softplus(z) = log(1 + exp(z))$</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cfc40648369f3b02.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>è®¾ç½®æ¿€æ´»å‡½æ•°çš„åŸå› </strong>ï¼š</p>
<p>å¦‚æœå°†å‡ ä¸ªçº¿æ€§å˜åŒ–é“¾å¼ç»„åˆèµ·æ¥ï¼Œå¾—åˆ°çš„è¿˜æ˜¯çº¿æ€§å˜æ¢ã€‚æ¯”å¦‚ï¼Œå¯¹äº <code>f(x) = 2x + 3</code> å’Œ <code>g(x) = 5x â€“ 1</code> ï¼Œä¸¤è€…ç»„åˆèµ·æ¥ä»æ˜¯çº¿æ€§å˜æ¢ï¼š<code>f(g(x)) = 2(5x â€“ 1) + 3 = 10x + 1</code>ã€‚<strong>å¦‚æœå±‚ä¹‹é—´ä¸å…·æœ‰éçº¿æ€§ï¼Œåˆ™æ·±å±‚ç½‘ç»œå’Œå•å±‚ç½‘ç»œå…¶å®æ˜¯ç­‰åŒçš„ï¼Œè¿™æ ·å°±ä¸èƒ½è§£å†³å¤æ‚é—®é¢˜ã€‚</strong>ç›¸åçš„ï¼Œè¶³å¤Ÿæ·±ä¸”æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„DNNï¼ˆæ·±åº¦ç¥ç»ç½‘ç»œï¼‰ï¼Œåœ¨ç†è®ºä¸Šå¯ä»¥è¿‘ä¼¼äºä»»æ„è¿ç»­å‡½æ•°ã€‚</p>
<h3 id="å›å½’MLP"><a href="#å›å½’MLP" class="headerlink" title="å›å½’MLP"></a>å›å½’MLP</h3><p>é¢„æµ‹ä¸€ä¸ªå•å€¼ï¼Œå°±åªéœ€è¦ä¸€ä¸ªè¾“å‡ºç¥ç»å…ƒï¼›ä¸€æ¬¡é¢„æµ‹å¤šä¸ªå€¼ï¼Œåˆ™æ¯ä¸€ç»´åº¦éƒ½è¦æœ‰ä¸€ä¸ªç¥ç»å…ƒã€‚</p>
<p>å›å½’é—®é¢˜å¯ä»¥ä¸ç”¨æ¿€æ´»å‡½æ•°ï¼Œå¦‚æœæƒ³é™åˆ¶è¾“å‡ºè½åˆ°ä¸€å®šèŒƒå›´å†…ï¼Œå¯ä»¥ä½¿ç”¨æ¿€æ´»å‡½æ•°ã€‚</p>
<p><strong>æŸå¤±å‡½æ•°</strong>ï¼šä¸€èˆ¬ä½¿ç”¨<strong>å‡æ–¹è¯¯å·®</strong>ï¼Œä½†å¦‚æœè®­ç»ƒé›†æœ‰è®¸å¤šå¼‚å¸¸å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<strong>å¹³å‡ç»å¯¹è¯¯å·®</strong>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>HuberæŸå¤±å‡½æ•°</strong>ï¼Œå®ƒæ˜¯å‰ä¸¤è€…çš„ç»„åˆã€‚</p>
<blockquote>
<p>æç¤ºï¼šå½“è¯¯å·®å°äºé˜ˆå€¼Î´æ—¶ï¼ˆä¸€èˆ¬ä¸º1ï¼‰ï¼ŒHuberæŸå¤±å‡½æ•°æ˜¯äºŒæ¬¡çš„ï¼›è¯¯å·®å¤§äºé˜ˆå€¼æ—¶ï¼ŒHuberæŸå¤±å‡½æ•°æ˜¯çº¿æ€§çš„ã€‚ç›¸æ¯”å‡æ–¹è¯¯å·®ï¼Œçº¿æ€§éƒ¨åˆ†å¯ä»¥è®©Huberå¯¹å¼‚å¸¸å€¼ä¸é‚£ä¹ˆæ•æ„Ÿï¼ŒäºŒæ¬¡éƒ¨åˆ†å¯ä»¥è®©æ”¶æ•›æ›´å¿«ï¼Œä¹Ÿæ¯”å‡ç»å¯¹è¯¯å·®æ›´ç²¾ç¡®ã€‚</p>
</blockquote>
<p><strong>å›å½’MLPçš„å…¸å‹æ¶æ„</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-51306abe073c8ea2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="åˆ†ç±»MLP"><a href="#åˆ†ç±»MLP" class="headerlink" title="åˆ†ç±»MLP"></a>åˆ†ç±»MLP</h3><p>äºŒå…ƒåˆ†ç±»é—®é¢˜ï¼šéœ€è¦ä¸€ä¸ªä½¿ç”¨Logisticæ¿€æ´»çš„è¾“å‡ºç¥ç»å…ƒï¼šè¾“å‡ºä¸€ä¸ª0å’Œ1ä¹‹é—´çš„å€¼ï¼Œä½œä¸ºæ­£ç±»çš„ä¼°è®¡æ¦‚ç‡ã€‚</p>
<p>å¤šæ ‡ç­¾äºŒå…ƒåˆ†ç±»é—®é¢˜ï¼šéœ€è¦ä¸ºæ¯ä¸ªæ­£ç±»é…ä¸€ä¸ªè¾“å‡ºç¥ç»å…ƒã€‚å¤šä¸ªè¾“å‡ºæ¦‚ç‡çš„å’Œä¸ä¸€å®šéè¦ç­‰äº1ã€‚</p>
<p>å¤šåˆ†ç±»ï¼šsoftmaxå‡½æ•°å¯ä»¥ä¿è¯ï¼Œæ¯ä¸ªä¼°è®¡æ¦‚ç‡ä½äº0å’Œ1ä¹‹é—´ï¼Œå¹¶ä¸”å„ä¸ªå€¼ç›¸åŠ ç­‰äº1ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-be616eb033cc7b19.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>æŸå¤±å‡½æ•°</strong>ï¼š é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰å•†æŸå¤±å‡½æ•°</p>
<p><strong>åˆ†ç±»MLPçš„å…¸å‹æ¶æ„</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9e017b74d26835cf.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
]]></content>
      <categories>
        <category>æ•°æ®åˆ†æ</category>
      </categories>
      <tags>
        <tag>sklearn</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨Jupyter Notebookä¸­ä½¿ç”¨Pythonè™šæ‹Ÿç¯å¢ƒï¼Ÿ</title>
    <url>/2020/08/25/%E5%A6%82%E4%BD%95%E5%9C%A8Jupyter%20Notebook%E4%B8%AD%E4%BD%BF%E7%94%A8Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%EF%BC%9F/</url>
    <content><![CDATA[<p>ç”µè„‘ä¸­å¤šç‰ˆæœ¬pythonå¹¶å­˜ï¼Œç›´æ¥å®‰è£…è¿‡pythonï¼Œä½¿ç”¨è¿‡anacondaå…¨å®¶æ¡¶ï¼ŒåŒæ—¶åˆ›å»ºè¿‡è™šæ‹Ÿç¯å¢ƒï¼ˆè™½ç„¶æˆ‘ä¹Ÿä¸çŸ¥é“ä¸¤ä¸ªéƒ½æ˜¯python3.7ä¸ºå•¥è¦ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰ï¼Œè¿™å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ã€‚</p>
<a id="more"></a>
<h2 id="è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder"><a href="#è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder"></a>è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder</h2><p>åœ¨æ‰“å¼€spyderæ—¶ï¼Œé»˜è®¤ä½¿ç”¨baseï¼Œå¦‚ä½•ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå‘¢ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda activate env</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ç¯å¢ƒå</span></span><br><span class="line">spyder</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœå·²ç»æ‰“å¼€spyderäº†</span></span><br><span class="line">spyder --new-instance</span><br></pre></td></tr></table></figure>
<h2 id="Jupyter-notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"><a href="#Jupyter-notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="Jupyter notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"></a>Jupyter notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h2><p>å³ä¾¿é€šè¿‡anacondaåˆ›é€ äº†æ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯åœ¨jupyter ä¸­å¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ã€‚</p>
<blockquote>
<p>å°è¯•è¿‡<code>conda activate env</code> è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œå†æ‰§è¡Œjupyter notebookï¼Œç»“æœè¿˜æ˜¯ä½¿ç”¨é»˜è®¤pythonï¼ˆD:\\Program Files (x86)\\Anaconda3\py37\\python.exeâ€™ï¼‰ï¼Œæ­¤æ—¶ä¼šå‡ºç°ä¸€äº›åŒ…importå¤±è´¥çš„é—®é¢˜ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•æŸ¥çœ‹ä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„python</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path</span><br><span class="line">sys.executable</span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³åŠæ³•1ï¼š"><a href="#è§£å†³åŠæ³•1ï¼š" class="headerlink" title="è§£å†³åŠæ³•1ï¼š"></a>è§£å†³åŠæ³•1ï¼š</h3><p>ç›´æ¥åœ¨sys.pathè¿™ä¸ªåˆ—è¡¨appendè™šæ‹Ÿç¯å¢ƒä¸‹çš„pythonè·¯å¾„å’Œpythonåº“è·¯å¾„ã€‚</p>
<p>ä½†æ˜¯è¿™ç§è§£å†³æ–¹æ¡ˆæ²¡æœ‰æ°¸ä¹…æ€§ï¼Œé€€å‡ºä¹‹åé‡æ–°æ‰“å¼€è¯¥æ–‡ä»¶è¿è¡Œæ—¶ï¼Œåˆ™åˆä¼šimportå¤±è´¥ï¼Œè¾“å‡ºsys.pathï¼Œå‘ç°ä¹‹å‰åŠ å…¥çš„è·¯å¾„ä¹Ÿä¸å­˜åœ¨äº†ã€‚</p>
<h3 id="è§£å†³åŠæ³•2ï¼š"><a href="#è§£å†³åŠæ³•2ï¼š" class="headerlink" title="è§£å†³åŠæ³•2ï¼š"></a>è§£å†³åŠæ³•2ï¼š</h3><p><strong>ç”¨anacondaå†…ç”Ÿæ’ä»¶è§£å†³é—®é¢˜</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda install nb_conda</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å·²æœ‰çš„kernels</span></span><br><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡å¯åŠ¨jupyter notebookï¼Œå°±èƒ½çœ‹åˆ°<strong>æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ</strong>éƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p>
<p><strong>ç”¨jupyteræ’ä»¶è§£å†³é—®é¢˜</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda activate env</span><br><span class="line">conda install ipykernel</span><br><span class="line">python -m ipykernel install --name --display-name</span><br></pre></td></tr></table></figure>
<p>ç½‘ä¸Šè¿˜æœ‰æ–¹æ³•æ˜¯å®‰è£…ipykernelï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæˆ‘å¯ä»¥çœ‹åˆ°kernelæ˜¾ç¤ºäº†è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯åˆ‡æ¢ä¹‹åï¼Œæ²¡æœ‰æ•ˆæœï¼Œsys.exectubaleä»ç„¶è¾“å‡ºé»˜è®¤pythonçš„è·¯å¾„ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ol>
<li>anaconda powershell prompt å’Œ anaconda promptçš„åŒºåˆ«ï¼šå‰è€…å¤šäº†ä¸€äº›linuxå‘½ä»¤ï¼Œå¦‚pwdç­‰ï¼Œç±»ä¼¼windowsä¸‹cmdå’Œwindows powershellçš„åŒºåˆ«ã€‚</li>
<li>è™½ç„¶å¯ä»¥åœ¨promptä¸­é€šè¿‡cdåˆ‡æ¢æ–‡ä»¶å¤¹ï¼Œå†æ‰“å¼€jupyter notebookï¼Œæˆ–è€…åœ¨jupyter notebookå‘½ä»¤åæŒ‡å®šæ–‡ä»¶å¤¹è·¯å¾„ï¼Œä½†ç•¥æ˜¾ç¹çã€‚<ul>
<li>åœ¨windows powershellä¸‹ä¹Ÿå¯ä»¥è¿è¡Œjupyter notebookï¼Œæ‰€ä»¥å¯ä»¥åœ¨windowsä¸‹æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œshift+é¼ æ ‡å³é”®ï¼Œæ‰“å¼€windows powershellï¼Œè¾“å…¥jupyter notebookå‘½ä»¤</li>
<li>æ‰“å¼€ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œé€‰ä¸­ä¸Šæ–¹æ–‡ä»¶ä½ç½®æ ï¼Œè¾“å…¥jupyter notebookå³å¯</li>
<li>å¦å¤–ï¼Œå¦‚æœæƒ³åœ¨windows powershellä¸­æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œå¯æ‰§è¡Œï¼š<code>conda init</code></li>
</ul>
</li>
<li>ä¹Ÿå¯ä»¥åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®-git bashï¼Œåœ¨git bashä¸­å¯åŠ¨jupyter notebook</li>
<li>æ³¨æ„2,3éœ€è¦å°†anacondaå®‰è£…è·¯å¾„é‡Œé¢çš„Scriptså’ŒLibrary\binè·¯å¾„æ·»åŠ åˆ°windowsç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ã€‚</li>
</ol>
<h2 id="jupyter-notebookå¿«æ·é”®"><a href="#jupyter-notebookå¿«æ·é”®" class="headerlink" title="jupyter notebookå¿«æ·é”®"></a>jupyter notebookå¿«æ·é”®</h2><p>Jupyter Notebook æœ‰ä¸¤ç§é”®ç›˜è¾“å…¥æ¨¡å¼ã€‚</p>
<ol>
<li>ç¼–è¾‘æ¨¡å¼ï¼ˆenterè¿›å…¥ï¼‰ï¼Œå¯ä»¥å‘å•å…ƒä¸­é”®å…¥ä»£ç æˆ–æ–‡æœ¬ï¼›æ­¤æ—¶å•å…ƒæ¡†çº¿ä¸ºç»¿è‰²ã€‚</li>
<li>å‘½ä»¤æ¨¡å¼ï¼ˆEscå¼€å¯ï¼‰ï¼Œé”®ç›˜è¾“å…¥è¿è¡Œç¨‹åºå‘½ä»¤ï¼›æ­¤æ—¶å•å…ƒæ¡†çº¿ä¸ºç°è“è‰²ã€‚</li>
</ol>
<h3 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>tab</td>
<td>ä»£ç è¡¥å…¨æˆ–ç¼©è¿›</td>
<td>Ctrl+Up</td>
<td>è·³åˆ°å•å…ƒå¼€å¤´</td>
<td>Shift+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œé€‰ä¸­ä¸‹ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>shift+tab</td>
<td>æç¤º</td>
<td>Ctrl+End</td>
<td>è·³åˆ°å•å…ƒæœ«å°¾</td>
<td>Ctrl+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+]</td>
<td>ç¼©è¿›</td>
<td>Ctrl+Down</td>
<td>è·³åˆ°å•å…ƒæœ«å°¾</td>
<td>Alt+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œåœ¨ä¸‹é¢æ’å…¥ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+[</td>
<td>è§£é™¤ç¼©è¿›</td>
<td>Ctrl+Left</td>
<td>è·³åˆ°å·¦è¾¹ä¸€ä¸ªå­—é¦–</td>
<td>Ctrl+Shift+-</td>
<td>åˆ†å‰²å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+A</td>
<td>å…¨é€‰</td>
<td>Ctrl+Right</td>
<td>è·³åˆ°å³è¾¹ä¸€ä¸ªå­—é¦–</td>
<td>Ctrl+Shift+Subtract</td>
<td>åˆ†å‰²å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+Z</td>
<td>å¤åŸ</td>
<td>Ctrl+Backspace</td>
<td>åˆ é™¤å‰é¢ä¸€ä¸ªå­—</td>
<td>Ctrl+S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
</tr>
<tr>
<td>ctrl+shift+z</td>
<td>å†åš</td>
<td>Ctrl+Delete</td>
<td>åˆ é™¤åé¢ä¸€ä¸ªå­—</td>
<td>Shift</td>
<td>å¿½ç•¥</td>
</tr>
<tr>
<td>ctrl+y</td>
<td>å†åš</td>
<td>Esc</td>
<td>è¿›å…¥å‘½ä»¤æ¨¡å¼</td>
<td>Up</td>
<td>å…‰æ ‡ä¸Šç§»æˆ–è½¬å…¥ä¸Šä¸€å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+Home</td>
<td>è·³åˆ°å•å…ƒå¼€å¤´</td>
<td>Ctrl+M</td>
<td>è¿›å…¥å‘½ä»¤æ¨¡å¼</td>
<td>Down</td>
<td>å…‰æ ‡ä¸‹ç§»æˆ–è½¬å…¥ä¸‹ä¸€å•å…ƒ</td>
</tr>
</tbody>
</table>
</div>
<h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>enter</td>
<td>è½¬å…¥ç¼–è¾‘æ¨¡å¼</td>
<td>C</td>
<td>å¤åˆ¶é€‰ä¸­çš„å•å…ƒ</td>
<td>Shift+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œé€‰ä¸­ä¸‹ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>Y</td>
<td>å•å…ƒè½¬å…¥ä»£ç çŠ¶æ€</td>
<td>V</td>
<td>ç²˜è´´åˆ°ä¸‹æ–¹å•å…ƒ</td>
<td>Ctrl+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒ</td>
</tr>
<tr>
<td>M</td>
<td>å•å…ƒè½¬å…¥markdownçŠ¶æ€</td>
<td>Z</td>
<td>æ¢å¤åˆ é™¤çš„æœ€åä¸€ä¸ªå•å…ƒ</td>
<td>Alt+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œåœ¨ä¸‹é¢æ’å…¥ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>R</td>
<td>å•å…ƒè½¬å…¥rawçŠ¶æ€</td>
<td>DD</td>
<td>åˆ é™¤é€‰ä¸­çš„å•å…ƒ</td>
<td>shift+K</td>
<td>æ‰©å¤§é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>1</td>
<td>è®¾å®š 1 çº§æ ‡é¢˜</td>
<td>Ctrl+S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
<td>shift+J</td>
<td>æ‰©å¤§é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
<tr>
<td>2</td>
<td>è®¾å®š 12çº§æ ‡é¢˜</td>
<td>S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
<td>shift+O</td>
<td>è½¬æ¢è¾“å‡ºæ»šåŠ¨</td>
</tr>
<tr>
<td>A</td>
<td>åœ¨ä¸Šæ–¹æ’å…¥æ–°å•å…ƒ</td>
<td>L</td>
<td>è½¬æ¢è¡Œå·</td>
<td>shift</td>
<td>å¿½ç•¥</td>
</tr>
<tr>
<td>B</td>
<td>åœ¨ä¸‹æ–¹æ’å…¥æ–°å•å…ƒ</td>
<td>O</td>
<td>è½¬æ¢è¾“å‡º</td>
<td>K</td>
<td>é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>X</td>
<td>å‰ªåˆ‡é€‰ä¸­çš„å•å…ƒ</td>
<td>Q</td>
<td>å…³é—­é¡µé¢</td>
<td>J</td>
<td>é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
<tr>
<td>shift+V</td>
<td>ç²˜è´´åˆ°ä¸Šæ–¹å•å…ƒ</td>
<td>H</td>
<td>æ˜¾ç¤ºå¿«æ·é”®å¸®åŠ©</td>
<td>Up</td>
<td>é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>shift+M</td>
<td>åˆå¹¶é€‰ä¸­çš„å•å…ƒ</td>
<td>space</td>
<td>å‘ä¸‹æ»šåŠ¨</td>
<td>Down</td>
<td>é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
</tbody>
</table>
</div>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.csdn.net/w55100/article/details/88925697" target="_blank" rel="noopener">ç®€ä¹¦ï¼šä½¿ç”¨anacondaè™šæ‹Ÿç¯å¢ƒè¿è¡ŒJupyter Notebookè¯¦è§£</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/50456606" target="_blank" rel="noopener">Jupyter notebok ç¯å¢ƒé…ç½®ï¼Œä¸kernelåˆ‡æ¢ï¼ˆåˆ‡æ¢è™šæ‹Ÿç¯å¢ƒï¼‰</a></p>
<p><a href="https://blog.csdn.net/guolaoban11/article/details/103469952?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener">jupyter notebook æ‰“å¼€ä»»æ„æ–‡ä»¶å¤¹ï¼Œæœ€ç®€æ·ï¼ï¼</a></p>
<p><a href="https://blog.csdn.net/lzbmc/article/details/102955750" target="_blank" rel="noopener">Jupyter Notebookåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ï¼ˆä½ç½®ï¼‰æ‰“å¼€</a></p>
<p><a href="https://blog.csdn.net/lawme/article/details/51034543" target="_blank" rel="noopener">Jupyter Notebook çš„å¿«æ·é”®</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>jupyter notebook</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‰æ˜Ÿå¹³æ¿N8000åˆ·æœº</title>
    <url>/2020/08/26/%E4%B8%89%E6%98%9F%E5%B9%B3%E6%9D%BFN8000%E5%88%B7%E6%9C%BA/</url>
    <content><![CDATA[<blockquote>
<p>åˆ·æœºåŒ…+å·¥å…·å¦‚ä¸‹ï¼š</p>
<p>CWMRecoveryGTN8000.tar +  lineage-14.1-20170116-UNOFFICIAL-n8000.zip</p>
<p>çº¿åˆ·å®ï¼ˆç”¨ä»¥è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼‰+ Odin</p>
</blockquote>
<a id="more"></a>
<p>å®¶é‡Œå°æœ‹å‹åœ¨ä¸Šç½‘è¯¾ï¼Œæƒ³ä¹°ä¸ªå¹³æ¿ï¼Œå”¤èµ·äº†æˆ‘å¯¹ä¸‰æ˜Ÿå¹³æ¿çš„è®°å¿†ï¼Œå¤§æ¦‚13å¹´å…¥æ‰‹ï¼Œä¸è¿‡ä¸€ä¸¤å¹´æ²¡å¼€è¿‡æœºäº†ã€‚</p>
<p>å¥½ä¸å®¹æ˜“è¿”æ ¡ï¼Œæ‹¿å‡ºå¹³æ¿ï¼Œå‘ç°ä¸é”™ï¼Œè¿˜èƒ½å……ç”µï¼Œä¹Ÿèƒ½å¼€æœºã€‚é‡Œé¢ä¹±ä¸ƒå…«ç³Ÿéƒ½æ˜¯äº›å•¥ï¼Œè¿˜æœ‰äººäººï¼Œå¹²è„†æ¢å¤å‡ºå‚è®¾ç½®å§ã€‚</p>
<p>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼Œæ¢å¤å‡ºå‚è®¾ç½®åå‘ç°æ²¡æœ‰ä¸‰æ˜Ÿåº”ç”¨ä¸­å¿ƒäº†ï¼Œä¹Ÿä¸èƒ½æ›´æ–°ï¼Œå› ä¸ºä¹‹å‰ç”¨äº†kingsrootã€‚é‚£ä¼¼ä¹åªèƒ½åˆ·æœºäº†ã€‚</p>
<ol>
<li><p>å¼€æœºé”®+ç”µæºä¸Šé”®è¿›å…¥recoveryæ¨¡å¼ï¼Œæœ‰install from external storageçš„é€‰é¡¹ï¼Œä½†æ˜¯ä¸æ”¯æŒç¬¬ä¸‰æ–¹ROMåŒ…ã€‚</p>
<p>å¼ºè¡Œåˆ·ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¼šå‡ºå‡ºç°ï¼š</p>
<p>E:failed to verify whole-file signature<br>e:signature verification failed<br>installation aborted</p>
</li>
<li><p>è¦åˆ·ç¬¬ä¸‰æ–¹ROMåŒ…ï¼Œéœ€è¦å…ˆåˆ·ç¬¬ä¸‰æ–¹recoveryåŒ…ã€‚</p>
<p>ç”µæºé”®+éŸ³é‡ä¸‹é”®è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼Œä½¿ç”¨Odinåˆ·å…¥ç¬¬ä¸‰æ–¹RECåŒ…ï¼Œæ—§ç‰ˆé€‰æ‹©PDAï¼Œæ–°ç‰ˆé€‰æ‹©APï¼Œå…¶ä»–ä¸è¦å‹¾é€‰ï¼Œä¸€äº›é»˜è®¤å‹¾é€‰çš„ä¹Ÿè¦å»æ‰ï¼Œç‚¹å‡»startï¼Œå‡ ç§’é’Ÿå°±å¯ä»¥äº†ã€‚</p>
</li>
</ol>
<p><img src="http://www.galaxyclub.cn//Upload/IMAGES/18/0507/126b124121ee40feb9f95aa5bc78c040_650x0.png" alt="ã€æŠ€æœ¯ã€‘Odinä¸­çš„æœ¯è¯­BLã€APã€CPã€CSCæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>BL(Bootloader) **</strong>ï¼š**</th>
<th>ä»£è¡¨ <strong>å¼•å¯¼ç¨‹åº</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AP (Application Processor or PDA)  **</strong>ï¼š**</td>
<td>è¡¨ç¤º<strong>Androidç³»ç»Ÿ</strong>ï¼ˆå¯èƒ½ä»£è¡¨Androidç³»ç»Ÿåˆ†åŒºï¼‰; åœ¨ä¹‹å‰çš„Odinç‰ˆæœ¬ä¸­ï¼Œè¿™è¢«ç§°ä¸ºâ€œPDAâ€</td>
</tr>
<tr>
<td><strong>CP(Core Processor**</strong>ï¼‰ ï¼š**</td>
<td><strong> </strong>ä»£è¡¨ <strong>è°ƒåˆ¶è§£è°ƒå™¨</strong></td>
</tr>
<tr>
<td><strong>CSC(Co numer Software Customization) **</strong>ï¼š**</td>
<td>ä»£è¡¨ <strong>æ¶ˆè´¹è€…è½¯ä»¶å®šåˆ¶</strong>ï¼Œå®ƒåŒ…å«ç‰¹å®šäºè¯¥åœ°åŒºçš„è½¯ä»¶åŒ…ï¼Œè¿è¥å•†å“ç‰Œå’ŒAPNè®¾ç½®ï¼ˆå°±åƒä¸åŒçš„è¿è¥å•†çš„æ•°æ®æ¥å…¥ç‚¹åç§°ä¸é€šï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>PIT (Partition Information Table)  **</strong>ï¼š**</td>
<td>ä»£è¡¨ <strong>åˆ†åŒºä¿¡æ¯è¡¨</strong>ï¼Œå¦‚æœä½ æç ¸åˆ†åŒºè¡¨ï¼Œæˆ–è€…ç”±äºåˆ†åŒºè¡¨å¸ƒå±€çš„å˜åŒ–ï¼Œä½ åªéœ€è¦ç”¨å®ƒå°±å¥½äº†ã€‚</td>
</tr>
</tbody>
</table>
</div>
<p>ä½†åˆé‡åˆ°é—®é¢˜äº†ï¼šç”µæºé”®+éŸ³é‡ä¸‹é”®æ— æ³•è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼Œä¸çŸ¥é“æ˜¯å¦è·Ÿä¹‹å‰ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶rootè¿‡æœ‰å…³ï¼Œå¹¶ä¸”æˆ‘çš„æ¿å­çš„ç”µæºé”®ä¹Ÿä¸å¤ªå¥½ç”¨ï¼Œäº‹æ€ä¼¼ä¹é™·å…¥äº†åƒµå±€ï¼Œåªèƒ½æ±‚åŠ©ç¬¬ä¸‰æ–¹åˆ·æœºè½¯ä»¶<a href="http://www.xianshuabao.com/features/?fromsite=bd_xsb" target="_blank" rel="noopener">çº¿åˆ·å®</a>ã€‚</p>
<p>è¿›å…¥æŒ–ç…¤æ¨¡å¼åï¼ŒID:COM å˜æˆè“è‰²ï¼ˆå®é™…ä¸Šï¼Œæ­£å¸¸å¼€æœºè¿æ¥æ—¶ï¼Œåº”è¯¥æ˜¯è“è‰²ï¼ŒæŒ–ç…¤æ¨¡å¼è¿æ¥æ—¶åº”ä¸ºé»„è‰²ï¼Œå¯èƒ½è¿˜æ˜¯ä¹‹å‰rootè¿‡å¾—åŸå› ï¼‰</p>
<p>ä¸éœ€è¦ä»˜è´¹æ¨¡å¼ï¼Œåªéœ€è¦å€ŸåŠ©å·¥å…·ç®±è¿›å…¥æŒ–ç…¤æ¨¡å¼å³å¯ï¼ä¹Ÿå¯ä»¥é€šè¿‡çº¿åˆ·å®è¿›å…¥recoveryæ¨¡å¼ï¼ˆè°è®©æˆ‘çš„ç”µæºé”®ä¸å¥½ç”¨å‘¢ï¼‰ã€‚</p>
<ol>
<li>è¾“å…¥ç¬¬ä¸‰æ–¹ROMåŒ…</li>
</ol>
<p>å°†ç¬¬ä¸‰æ–¹åŒ…çš„zipæ–‡ä»¶æ”¾å¤§å­˜å‚¨å¡ä¸­ï¼Œå¡åˆ·ï¼Œé€‰æ‹©external cardï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒé¡ºåˆ©ã€‚</p>
<p>å› ä¸ºä¸€äº›å¸–å­æœ‰åé¦ˆè¯´æ— æ³•è”ç½‘ï¼Œæˆ‘æ²¡æœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œé¡ºåˆ©è¿›å…¥ç³»ç»Ÿã€‚ä½†æ˜¯æ— æ³•è°ƒå‡ºé”®ç›˜è¾“å…¥ç•Œé¢ã€‚</p>
<ol>
<li>å°†å¹³æ¿å˜æˆæ˜¾ç¤ºå™¨</li>
</ol>
<p><a href="https://zhuanlan.zhihu.com/p/81255397" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/81255397</a></p>
<p><strong>Spacedesk</strong> ç”µè„‘å’Œå¹³æ¿éœ€è¦å¤„äºåŒä¸€å±€åŸŸç½‘ä¸‹</p>
<p><strong>Splashtop Wired XDisplay</strong> é€šè¿‡æ•°æ®çº¿è¿æ¥ï¼Œéœ€è¦åœ¨google playä¸Šä¸‹è½½</p>
<p><strong>Twomon SE</strong></p>
<p><a href="https://www.splashtop.com/cn/wiredxdisplay](https://www.splashtop.com/cn/wiredxdisplay" target="_blank" rel="noopener">https://www.splashtop.com/cn/wiredxdisplay](https://www.splashtop.com/cn/wiredxdisplay</a>)</p>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2><p>ä¸»è¦å‚è€ƒ<a href="https://www.jianshu.com/p/182975bd9ee6" target="_blank" rel="noopener">ç®€ä¹¦</a>å’Œ<a href="https://blog.csdn.net/wulong710/article/details/91956773" target="_blank" rel="noopener">CSDN</a> ä¸Šçš„ä¸¤ä¸ªå¸–å­ã€‚</p>
<p><a href="https://sspai.com/post/43338" target="_blank" rel="noopener">Android ç©æœºç»ˆææŒ‡å—</a> è¿™ä¸ªä¹Ÿå€¼å¾—ä¸€çœ‹ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>åˆ·æœº</tag>
        <tag>ä¸‰æ˜Ÿ</tag>
        <tag>N8000</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯äº‘</title>
    <url>/2020/08/18/%E8%AF%8D%E4%BA%91/</url>
    <content><![CDATA[<p><a href="https://python123.io/tutorials/word_cloud/" target="_blank" rel="noopener">python123ä½ ä¸çŸ¥é“çš„è¯äº‘</a></p>
<a id="more"></a>
<p>å…³é”®é—®é¢˜ï¼š<strong>å¦‚ä½•åšåˆ°è¯è¯­ä¹‹é—´ç´§å¯†æ’å¸ƒä½†åˆæ²¡æœ‰é‡å </strong></p>
<h3 id="integral-imageç§¯åˆ†å›¾"><a href="#integral-imageç§¯åˆ†å›¾" class="headerlink" title="integral_imageç§¯åˆ†å›¾"></a>integral_imageç§¯åˆ†å›¾</h3><p>é‡å æ£€æµ‹æ–¹æ³•ï¼š</p>
<p>è¯äº‘å¸ƒå±€æ–¹æ³•ï¼šè´ªå¿ƒç­–ç•¥</p>
<p><strong>çŸ©å½¢æ£€æµ‹çš„ç§¯åˆ†å›¾ç®—æ³•ä¼¼ä¹ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒæ–‡å­—çš„æ—‹è½¬</strong></p>
<h3 id="å››å‰æ ‘"><a href="#å››å‰æ ‘" class="headerlink" title="å››å‰æ ‘"></a>å››å‰æ ‘</h3><p><strong>å±‚æ¬¡è¾¹ç•Œæ¡†</strong>ï¼ˆHierarchical bounding boxesï¼‰æ¥å¿«é€Ÿå®ç°ä¸¤ä¸ªè¯è¯­é—´çš„é‡å æ£€æµ‹ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€æ£µè®°å½•ç©ºé—´ä¿¡æ¯çš„å››å‰æ ‘ã€‚</p>
<p>å››å‰æ ‘çš„æ„å»ºå¹¶ä¸å›°éš¾ï¼Œå°†å›¾ç‰‡æ¨ªçºµå„åˆ‡ä¸€åˆ€ï¼Œå¹³å‡åˆ†å‰²ä¸ºã€Œå·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹ã€å››ä¸ªåŒºåŸŸï¼Œå¦‚æœæŸä¸ªåŒºåŸŸä¸­æœ‰å†…å®¹ï¼ˆæ­¤æ—¶å¯ä»¥ç”¨ç§¯åˆ†å›¾ç®—æ³•åˆ¤æ–­ï¼‰ï¼Œé‚£ä¹ˆç»§ç»­å°†è¿™ä¸ªåŒºåŸŸåˆ†å‰²ä¸ºå››ä¸ªéƒ¨åˆ†ï¼Œç›´åˆ°åŒºåŸŸçš„å¤§å°å°äºæŸä¸ªå€¼ã€‚</p>
<p>å››å‰æ ‘æ¯æ·±ä¸€å±‚ï¼Œå¯¹å½¢çŠ¶çš„æè¿°å°±è¶Šç²¾ç¡®ï¼Œæ¯ä¸€æ¬¡åˆ†éš”ï¼Œéƒ½èƒ½æ’é™¤ä¸€äº›ç©ºç™½çŸ©å½¢åŒºåŸŸï¼Œå‰©ä¸‹çš„æœ‰åƒç´ çš„åŒºåŸŸï¼Œéƒ½è®°å½•åˆ°äº†æ ‘ä¸­ã€‚</p>
<p>ä¹‹åä¸¤é¢—å››å‰æ ‘é€å±‚åˆ¤æ–­ã€‚</p>
<h3 id="çŸ©å½¢èºæ—‹å¸ƒå±€"><a href="#çŸ©å½¢èºæ—‹å¸ƒå±€" class="headerlink" title="çŸ©å½¢èºæ—‹å¸ƒå±€"></a>çŸ©å½¢èºæ—‹å¸ƒå±€</h3><p>ä¸€ç§è´ªå¿ƒå¸ƒå±€ç­–ç•¥ï¼Œæ‰€æœ‰çš„å•è¯ç´§å¯†æ”¾ç½®åœ¨å›¾ä¸­å¿ƒçš„èºæ—‹å½¢çŠ¶ä¸Šã€‚æ¯ä¸ªå•è¯éƒ½ä»èºæ—‹çš„ä¸­å¿ƒä½ç½®å¼€å§‹æ£€æµ‹ï¼Œå¦‚æœä¸èƒ½æ”¾ç½®ï¼Œå°±ç§»åŠ¨åˆ°èºæ—‹çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚</p>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>ä¸€ç§ç­–ç•¥çš„æƒ³æ³•æ¥æºäºå››å‰æ ‘ã€‚å…ˆæŠŠå›¾åƒåˆ†å‰²ä¸ºå¤šä¸ªçŸ©å½¢åŒºåŸŸï¼Œæ¯”å¦‚ 800Ã—600 çš„å›¾ç‰‡ï¼Œåˆ†å‰²ä¸º 48ï¼ˆ8Ã—6ï¼‰ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸé•¿å®½éƒ½æ˜¯ 100 åƒç´ ã€‚å¸ƒå±€æ¯ä¸ªå•è¯åï¼Œå°±å°†è¿™ä¸ªå•è¯æ·»åŠ åˆ°å¯¹åº”çš„åŒºåŸŸä¸­ï¼Œè¿™æ ·åœ¨å¸ƒå±€ä¸€ä¸ªæ–°çš„å•è¯æ—¶ï¼Œåªè¦æ ¹æ®å•è¯å¤§æ¦‚çš„å¤§å°å’Œæ”¾ç½®çš„ä½ç½®ï¼Œåœ¨æœ‰é™çš„å‡ ä¸ªåŒºåŸŸä¸­è¿›è¡Œé‡å æ£€æµ‹ï¼Œå¤§å¹…é™ä½äº†éœ€è¦è¿›è¡Œé‡å æ£€æµ‹çš„æ¬¡æ•°ã€‚</p>
<p>ç¬¬äºŒç§ç­–ç•¥æ›´å¤šæ¥æºäºç»éªŒã€‚å‡å¦‚è¦æ”¾ç½®æ•°åä¸ªå¤§å°å·®ä¸å¤šçš„å•è¯ï¼Œç¬¬ä¸€ä¸ªå•è¯æ£€æµ‹äº†èºæ—‹ä¸Šçš„ 200 ä¸ªåæ ‡åï¼Œæ‰¾åˆ°ä¸€ä¸ªæ”¾ç½®ä½ç½®ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå•è¯å°±è·³è¿‡è¿™ 200 ä¸ªåæ ‡ï¼ˆå› ä¸ºå¤§æ¦‚ç‡é‡å ï¼‰ï¼Œåœ¨ç¬¬ 300 ä¸ªåæ ‡ä¸Šæ”¾ç½®ï¼Œä¸‹ä¸€ä¸ªå•è¯ä»ç¬¬ 300 ä¸ªåæ ‡å¼€å§‹â€¦â€¦å¦‚æœæ£€æµ‹åˆ°äº†å›¾ç‰‡è¾¹ç•Œæœªæ‰¾åˆ°å¯ä»¥æ”¾ç½®çš„åæ ‡ï¼Œé‚£ä¹ˆå›åˆ°åˆå§‹ä½ç½®é‡æ–°å¯»æ‰¾ã€‚</p>
<h3 id="å…¶ä»–èµ„æº"><a href="#å…¶ä»–èµ„æº" class="headerlink" title="å…¶ä»–èµ„æº"></a>å…¶ä»–èµ„æº</h3><p><a href="https://github.com/TommyZihao/zihaowordcloud" target="_blank" rel="noopener">åŒæµå­è±ªå…„åœ¨githubä¸Šçš„è¯äº‘å¯è§†åŒ–æ•™ç¨‹ï¼ˆwordcloudï¼‰</a></p>
<p>åœ¨çº¿è¯äº‘ç”Ÿæˆç½‘ç«™ï¼š</p>
<p><a href="http://www.yciyun.com/" target="_blank" rel="noopener">æ˜“è¯äº‘</a></p>
<p><a href="http://www.picdata.cn/picdata/index.php" target="_blank" rel="noopener">å›¾æ‚¦</a></p>
<p><a href="https://me.bdp.cn/home.html" target="_blank" rel="noopener">BDP</a></p>
<p><a href="https://www.jianshu.com/p/615c9d285c54" target="_blank" rel="noopener">https://www.jianshu.com/p/615c9d285c54</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>wordcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠScikit-Learnä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹</title>
    <url>/2020/08/25/%E3%80%8AScikit-Learn%E4%B8%8ETensorFlow%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97%E3%80%8B/</url>
    <content><![CDATA[<p>å­¦ä¹ èµ„æ–™å‚è€ƒï¼š</p>
<p><a href="https://www.cntofu.com/book/27/docs/2.%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®.md</a></p>
<p><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">åŸä¹¦Githubä¸Šä»£ç </a></p>
<p><a href="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/" target="_blank" rel="noopener">Oreillyä¸ŠåŸä¹¦ç¬¬äºŒç‰ˆï¼ˆå¯ä»¥åœ¨çº¿é˜…è¯»ï¼‰</a></p>
<p><a href="https://github.com/apachecn/hands-on-ml-zh/blob/master/docs/1.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%A7%88.md" target="_blank" rel="noopener">ç¬¬ä¸€ç‰ˆç¿»è¯‘</a></p>
<p><a href="https://www.jianshu.com/p/3470a6efbe8d" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬ä¸€ç‰ˆ</a></p>
<p><a href="https://www.jianshu.com/p/86626c79814a" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬äºŒç‰ˆç¬¬äºŒéƒ¨åˆ†</a></p>
<p><a href="https://www.jianshu.com/p/4a94798f7dcc" target="_blank" rel="noopener">ç®€ä¹¦ã€ŠScikit-Learnã€Kerasä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹ç¬¬ä¸€ç‰ˆå’Œç¬¬äºŒç‰ˆå¯¹ç…§</a></p>
<p><a href="https://blog.csdn.net/jiaoyangwm/article/details/82387883#%E7%BB%83%E4%B9%A0%E9%A2%987" target="_blank" rel="noopener">ç»ƒä¹ é¢˜ç­”æ¡ˆå‚è€ƒ</a> <a href="https://blog.csdn.net/leowinbow/article/details/88581039" target="_blank" rel="noopener">å‚è€ƒ2</a></p>
<a id="more"></a>
<p>[TOC]</p>
<h2 id="ç¬¬01ç« -æœºå™¨å­¦ä¹ æ¦‚è§ˆ"><a href="#ç¬¬01ç« -æœºå™¨å­¦ä¹ æ¦‚è§ˆ" class="headerlink" title="ç¬¬01ç«  æœºå™¨å­¦ä¹ æ¦‚è§ˆ"></a>ç¬¬01ç«  æœºå™¨å­¦ä¹ æ¦‚è§ˆ</h2><ol>
<li><p>os.makedirs(IMAGES_PATH, exist_ok=True)</p>
</li>
<li><p>pd.merge(left=oecd_bli, right=gdp_per_capita, left_index=True, right_index=True)</p>
<p>left_indexå’Œright_indexï¼šæŒ‡å®šæ˜¯å¦ä»¥ç´¢å¼•ä¸ºå‚è€ƒè¿›è¡Œåˆå¹¶</p>
<!--more-->
<h4 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h4><ol>
<li>å¦‚ä½•å®šä¹‰æœºå™¨å­¦ä¹ ï¼Ÿ</li>
</ol>
<blockquote>
<p>æœºå™¨å­¦ä¹ æ˜¯é€šè¿‡ç¼–ç¨‹è®©è®¡ç®—æœºä»æ•°æ®ä¸­è¿›è¡Œå­¦ä¹ çš„ç§‘å­¦ï¼ˆå’Œè‰ºæœ¯ï¼‰ã€‚</p>
<p><strong>æ›´å¹¿ä¹‰çš„æ¦‚å¿µï¼š</strong></p>
<p>æœºå™¨å­¦ä¹ æ˜¯è®©è®¡ç®—æœºå…·æœ‰å­¦ä¹ çš„èƒ½åŠ›ï¼Œæ— éœ€è¿›è¡Œæ˜ç¡®ç¼–ç¨‹ã€‚ â€”â€” äºšç‘ŸÂ·è¨ç¼ªå°”ï¼Œ1959</p>
<p><strong>å·¥ç¨‹æ€§çš„æ¦‚å¿µï¼š</strong></p>
<p>è®¡ç®—æœºç¨‹åºåˆ©ç”¨ç»éªŒ E å­¦ä¹ ä»»åŠ¡ Tï¼Œæ€§èƒ½æ˜¯ Pï¼Œå¦‚æœé’ˆå¯¹ä»»åŠ¡ T çš„æ€§èƒ½ P éšç€ç»éªŒ E ä¸æ–­å¢é•¿ï¼Œåˆ™ç§°ä¸ºæœºå™¨å­¦ä¹ ã€‚ â€”â€” æ±¤å§†Â·ç±³åˆ‡å°”ï¼Œ1997</p>
</blockquote>
<ol>
<li>æœºå™¨å­¦ä¹ å¯ä»¥è§£å†³çš„å››ç±»é—®é¢˜ï¼Ÿ</li>
</ol>
<blockquote>
<p>åˆ†ç±»ï¼Œå›å½’ï¼Œèšç±»ï¼Œé™ç»´</p>
<p>æœºå™¨å­¦ä¹ å¯ä»¥æ ¹æ®è®­ç»ƒæ—¶ç›‘ç£çš„é‡å’Œç±»å‹è¿›è¡Œåˆ†ç±»ã€‚ä¸»è¦æœ‰å››ç±»ï¼šç›‘ç£å­¦ä¹ ã€éç›‘ç£å­¦ä¹ ã€åŠç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ã€‚</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯å¸¦æ ‡ç­¾çš„è®­ç»ƒé›†ï¼Ÿ</li>
</ol>
<blockquote>
<p>åœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œç”¨æ¥è®­ç»ƒç®—æ³•çš„è®­ç»ƒæ•°æ®åŒ…å«äº†ç­”æ¡ˆï¼Œç§°ä¸ºæ ‡ç­¾ã€‚</p>
</blockquote>
<ol>
<li>æœ€å¸¸è§çš„ä¸¤ä¸ªç›‘ç£ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<ol>
<li>åˆ†ç±»ï¼šä¾‹å¦‚åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨ï¼šç”¨è®¸å¤šå¸¦æœ‰å½’ç±»ï¼ˆåƒåœ¾é‚®ä»¶æˆ–æ™®é€šé‚®ä»¶ï¼‰çš„é‚®ä»¶æ ·æœ¬è¿›è¡Œè®­ç»ƒï¼Œè¿‡æ»¤å™¨å¿…é¡»è¿˜èƒ½å¯¹æ–°é‚®ä»¶è¿›è¡Œåˆ†ç±»ã€‚</li>
<li>å›å½’ï¼šé¢„æµ‹ç›®æ ‡æ•°å€¼ï¼Œä¾‹å¦‚ç»™å‡ºä¸€äº›ç‰¹å¾ï¼ˆé‡Œç¨‹æ•°ã€è½¦é¾„ã€å“ç‰Œç­‰ç­‰ï¼‰ç§°ä½œé¢„æµ‹å€¼ï¼Œæ¥é¢„æµ‹ä¸€è¾†æ±½è½¦çš„ä»·æ ¼ã€‚ã€‚è¦è®­ç»ƒè¿™ä¸ªç³»ç»Ÿï¼Œéœ€è¦ç»™å‡ºå¤§é‡æ±½è½¦æ ·æœ¬ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„é¢„æµ‹å€¼å’Œæ ‡ç­¾ï¼ˆå³ï¼Œå®ƒä»¬çš„ä»·æ ¼ï¼‰ã€‚</li>
</ol>
</blockquote>
<ol>
<li>æŒ‡å‡ºå››ä¸ªå¸¸è§çš„éç›‘ç£ä»»åŠ¡ï¼Ÿ</li>
</ol>
<blockquote>
<ol>
<li><strong>èšç±»ç®—æ³•</strong> ï¼Œæ£€æµ‹ç›¸ä¼¼è®¿å®¢çš„åˆ†ç»„ã€‚å‡è®¾æœ‰ä¸€ä»½å…³äºåšå®¢è®¿å®¢çš„å¤§é‡æ•°æ®ï¼Œä¸å‘Šè¯‰ç®—æ³•æŸä¸ªè®¿å®¢å±äºå“ªä¸€ç±»ï¼šå®ƒä¼šè‡ªå·±æ‰¾å‡ºå…³ç³»ï¼Œæ— éœ€å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œç®—æ³•å¯èƒ½æ³¨æ„åˆ° 40% çš„è®¿å®¢æ˜¯å–œæ¬¢æ¼«ç”»ä¹¦çš„ç”·æ€§ï¼Œé€šå¸¸æ˜¯æ™šä¸Šè®¿é—®ï¼Œ20% æ˜¯ç§‘å¹»çˆ±å¥½è€…ï¼Œä»–ä»¬æ˜¯åœ¨å‘¨æœ«è®¿é—®ç­‰ç­‰ã€‚å¦‚æœä½¿ç”¨<strong>å±‚æ¬¡èšç±»åˆ†æ</strong> ï¼Œå®ƒå¯èƒ½è¿˜ä¼šç»†åˆ†æ¯ä¸ªåˆ†ç»„ä¸ºæ›´å°çš„ç»„ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ ä¸ºæ¯ä¸ªåˆ†ç»„å®šä½åšæ–‡ã€‚</li>
<li><strong>å¯è§†åŒ–ç®—æ³•</strong> ï¼šç»™ç®—æ³•å¤§é‡å¤æ‚çš„ä¸”ä¸åŠ æ ‡ç­¾çš„æ•°æ®ï¼Œç®—æ³•è¾“å‡ºæ•°æ®çš„2Dæˆ–3Då›¾åƒã€‚ç®—æ³•ä¼šè¯•å›¾ä¿ç•™æ•°æ®çš„ç»“æ„ï¼ˆå³å°è¯•ä¿ç•™è¾“å…¥çš„ç‹¬ç«‹èšç±»ï¼Œé¿å…åœ¨å›¾åƒä¸­é‡å ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æ˜ç™½æ•°æ®æ˜¯å¦‚ä½•ç»„ç»‡èµ·æ¥çš„ï¼Œä¹Ÿè®¸è¿˜èƒ½å‘ç°éšè—çš„è§„å¾‹ã€‚</li>
<li><strong>é™ç»´</strong> ï¼šé™ç»´çš„ç›®çš„æ˜¯ç®€åŒ–æ•°æ®ã€ä½†æ˜¯ä¸èƒ½å¤±å»å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚åšæ³•ä¹‹ä¸€æ˜¯åˆå¹¶è‹¥å¹²ç›¸å…³çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œæ±½è½¦çš„é‡Œç¨‹æ•°ä¸è½¦é¾„é«˜åº¦ç›¸å…³ï¼Œé™ç»´ç®—æ³•å°±ä¼šå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªï¼Œè¡¨ç¤ºæ±½è½¦çš„ç£¨æŸã€‚è¿™å«åš<strong>ç‰¹å¾æå–</strong> ã€‚</li>
<li><strong>å¼‚å¸¸æ£€æµ‹ï¼ˆanomaly detectionï¼‰</strong> ï¼šä¾‹å¦‚ï¼Œæ£€æµ‹å¼‚å¸¸çš„ä¿¡ç”¨å¡è½¬è´¦ä»¥é˜²æ¬ºè¯ˆï¼Œæ£€æµ‹åˆ¶é€ ç¼ºé™·ï¼Œæˆ–è€…åœ¨è®­ç»ƒä¹‹å‰è‡ªåŠ¨ä»è®­ç»ƒæ•°æ®é›†å»é™¤å¼‚å¸¸å€¼ã€‚å¼‚å¸¸æ£€æµ‹çš„ç³»ç»Ÿä½¿ç”¨æ­£å¸¸å€¼è®­ç»ƒçš„ï¼Œå½“å®ƒç¢°åˆ°ä¸€ä¸ªæ–°å®ä¾‹ï¼Œå®ƒå¯ä»¥åˆ¤æ–­è¿™ä¸ªæ–°å®ä¾‹æ˜¯åƒæ­£å¸¸å€¼è¿˜æ˜¯å¼‚å¸¸å€¼ã€‚</li>
</ol>
</blockquote>
<ol>
<li>è¦è®©ä¸€ä¸ªæœºå™¨äººèƒ½åœ¨å„ç§æœªçŸ¥åœ°å½¢è¡Œèµ°ï¼Œä½ ä¼šé‡‡ç”¨ä»€ä¹ˆæœºå™¨å­¦ä¹ ç®—æ³•ï¼Ÿ</li>
</ol>
<blockquote>
<p>å¼ºåŒ–å­¦ä¹ ï¼š</p>
</blockquote>
<ol>
<li>è¦å¯¹ä½ çš„é¡¾å®¢è¿›è¡Œåˆ†ç»„ï¼Œä½ ä¼šé‡‡ç”¨å“ªç±»ç®—æ³•ï¼Ÿ</li>
</ol>
<blockquote>
<p>éç›‘ç£å­¦ä¹ </p>
</blockquote>
<ol>
<li>åƒåœ¾é‚®ä»¶æ£€æµ‹æ˜¯ç›‘ç£å­¦ä¹ é—®é¢˜ï¼Œè¿˜æ˜¯éç›‘ç£å­¦ä¹ é—®é¢˜ï¼Ÿ</li>
</ol>
<blockquote>
<p>ç›‘ç£å­¦ä¹ ï¼šå› ä¸ºæœ‰æ ‡ç­¾</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯åœ¨çº¿å­¦ä¹ ç³»ç»Ÿï¼Ÿ</li>
</ol>
<blockquote>
<p>ä»å¯¼å…¥çš„æ•°æ®æµè¿›è¡ŒæŒç»­å­¦ä¹ </p>
<p>åœ¨åœ¨çº¿å­¦ä¹ ä¸­ï¼Œæ˜¯ç”¨æ•°æ®å®ä¾‹æŒç»­åœ°è¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥ä¸€æ¬¡ä¸€ä¸ªæˆ–ä¸€æ¬¡å‡ ä¸ªå®ä¾‹ï¼ˆç§°ä¸ºå°æ‰¹é‡ï¼‰ã€‚æ¯ä¸ªå­¦ä¹ æ­¥éª¤éƒ½å¾ˆå¿«ä¸”å»‰ä»·ï¼Œæ‰€ä»¥ç³»ç»Ÿå¯ä»¥åŠ¨æ€åœ°å­¦ä¹ æ”¶åˆ°çš„æœ€æ–°æ•°æ®</p>
<p><img src="https://github.com/apachecn/hands-on-ml-zh/raw/master/images/chapter_1/1-13.png" alt="img"></p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯æ ¸å¤–å­¦ä¹ ï¼Ÿ</li>
</ol>
<blockquote>
<p>åœ¨çº¿å­¦ä¹ ç®—æ³•ä¹Ÿé€‚ç”¨äºåœ¨è¶…å¤§æ•°æ®é›†ï¼ˆä¸€å°è®¡ç®—æœºä¸è¶³ä»¥ç”¨äºå­˜å‚¨å®ƒï¼‰ä¸Šè®­ç»ƒç³»ç»Ÿï¼ˆè¿™ç§°ä½œæ ¸å¤–å­¦ä¹ ï¼Œ<em>out-of-core</em> learningï¼‰ã€‚ç®—æ³•æ¯æ¬¡åªåŠ è½½éƒ¨åˆ†æ•°æ®ï¼Œç”¨è¿™äº›æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä½¿ç”¨å®Œæ‰€æœ‰æ•°æ®</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆå­¦ä¹ ç®—æ³•æ˜¯ç”¨ç›¸ä¼¼åº¦åšé¢„æµ‹ï¼Ÿ</li>
</ol>
<blockquote>
<p>åŸºäºå®ä¾‹å­¦ä¹ ï¼šç³»ç»Ÿå…ˆç”¨è®°å¿†å­¦ä¹ æ¡ˆä¾‹ï¼Œç„¶åä½¿ç”¨ç›¸ä¼¼åº¦æµ‹é‡æ¨å¹¿åˆ°æ–°çš„ä¾‹å­</p>
<p>ä¾‹å¦‚ï¼Œåƒåœ¾é‚®ä»¶æ£€æµ‹å™¨ï¼Œä¸ä»…èƒ½æ ‡è®°å’Œå·²çŸ¥çš„åƒåœ¾é‚®ä»¶ç›¸åŒçš„é‚®ä»¶ï¼Œä¹Ÿè¦èƒ½æ ‡è®°ç±»ä¼¼åƒåœ¾é‚®ä»¶çš„é‚®ä»¶ã€‚éœ€è¦æµ‹é‡ä¸¤å°é‚®ä»¶çš„ç›¸ä¼¼æ€§ã€‚ä¸€ä¸ªï¼ˆç®€å•çš„ï¼‰ç›¸ä¼¼åº¦æµ‹é‡æ–¹æ³•æ˜¯ç»Ÿè®¡ä¸¤å°é‚®ä»¶åŒ…å«çš„ç›¸åŒå•è¯çš„æ•°é‡ã€‚å¦‚æœä¸€å°é‚®ä»¶å«æœ‰è®¸å¤šåƒåœ¾é‚®ä»¶ä¸­çš„è¯ï¼Œå°±ä¼šè¢«æ ‡è®°ä¸ºåƒåœ¾é‚®ä»¶ã€‚</p>
</blockquote>
<ol>
<li>æ¨¡å‹å‚æ•°å’Œå­¦ä¹ ç®—æ³•çš„è¶…å‚æ•°çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>å­¦ä¹ ç®—æ³•æœå¯»æ¨¡å‹å‚æ•°å€¼ï¼Œä½¿ä»£ä»·å‡½æ•°æœ€å°</p>
<p>è¶…å‚æ•°ï¼ˆhyperparameterï¼‰æ˜¯ä¸€ä¸ªå­¦ä¹ ç®—æ³•çš„å‚æ•°ï¼ˆè€Œä¸æ˜¯æ¨¡å‹çš„ï¼‰ï¼Œæ§åˆ¶æ­£åˆ™åŒ–çš„åº¦ã€‚</p>
</blockquote>
<ol>
<li>åŸºäºæ¨¡å‹å­¦ä¹ çš„ç®—æ³•æœå¯»çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ€æˆåŠŸçš„ç­–ç•¥æ˜¯ä»€ä¹ˆï¼ŸåŸºäºæ¨¡å‹å­¦ä¹ å¦‚ä½•åšé¢„æµ‹ï¼Ÿ</li>
</ol>
<blockquote>
<p>æœå¯»ä½¿å¾—ä»£ä»·å‡½æ•°ï¼ˆæµ‹é‡çº¿æ€§æ¨¡å‹çš„é¢„æµ‹å€¼å’Œè®­ç»ƒæ ·æœ¬ä¹‹é—´çš„è·ç¦»å·®ï¼‰æœ€å°çš„æ¨¡å‹å‚æ•°</p>
<p>çº¿æ€§å›å½’ç®—æ³•</p>
<p>ç ”ç©¶æ•°æ®-é€‰æ‹©æ¨¡å‹-ç”¨è®­ç»ƒæ•°æ®è¿›è¡Œè®­ç»ƒï¼ˆå­¦ä¹ ç®—æ³•æœå¯»æ¨¡å‹å‚æ•°å€¼ï¼Œä½¿å¾—ä»£ä»·å‡½æ•°æœ€å°ï¼‰-ä½¿ç”¨æ¨¡å‹å¯¹æ–°æ¡ˆä¾‹è¿›è¡Œé¢„æµ‹ï¼ˆè¿™ç§°ä½œæ¨æ–­ï¼‰</p>
</blockquote>
<ol>
<li>æœºå™¨å­¦ä¹ çš„å››ä¸ªä¸»è¦æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>è®­ç»ƒæ•°æ®é‡ä¸è¶³</p>
<p>æ²¡æœ‰ä»£è¡¨æ€§çš„è®­ç»ƒæ•°æ®</p>
<p>ä½è´¨é‡æ•°æ®</p>
<p>ä¸ç›¸å…³çš„ç‰¹å¾</p>
<p>è¿‡æ‹Ÿåˆ</p>
<p>æ¬ æ‹Ÿåˆ</p>
</blockquote>
<ol>
<li>å¦‚æœæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ï¼Œä½†æ¨å¹¿åˆ°æ–°å®ä¾‹è¡¨ç°å·®ï¼Œé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿç»™å‡ºä¸‰ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<blockquote>
<p>è¿‡æ‹Ÿåˆï¼šåˆ©ç”¨è¶…å‚æ•°æ­£åˆ™åŒ–</p>
<p>ä¸ç›¸å…³ç‰¹å¾ï¼š</p>
<ul>
<li>ç‰¹å¾é€‰æ‹©ï¼šåœ¨æ‰€æœ‰å­˜åœ¨çš„ç‰¹å¾ä¸­é€‰å–æœ€æœ‰ç”¨çš„ç‰¹å¾è¿›è¡Œè®­ç»ƒã€‚</li>
<li>ç‰¹å¾æå–ï¼šç»„åˆå­˜åœ¨çš„ç‰¹å¾ï¼Œç”Ÿæˆä¸€ä¸ªæ›´æœ‰ç”¨çš„ç‰¹å¾ï¼ˆå¦‚å‰é¢çœ‹åˆ°çš„ï¼Œå¯ä»¥ä½¿ç”¨é™ç»´ç®—æ³•ï¼‰ã€‚</li>
<li>æ”¶é›†æ–°æ•°æ®åˆ›å»ºæ–°ç‰¹å¾ã€‚</li>
</ul>
<p>ä½è´¨é‡æ•°æ®ï¼šå¦‚æœè®­ç»ƒé›†ä¸­çš„é”™è¯¯ã€å¼‚å¸¸å€¼å’Œå™ªå£°ï¼ˆé”™è¯¯æµ‹é‡å¼•å…¥çš„ï¼‰å¤ªå¤šï¼Œç³»ç»Ÿæ£€æµ‹å‡ºæ½œåœ¨è§„å¾‹çš„éš¾åº¦å°±ä¼šå˜å¤§ï¼Œæ€§èƒ½å°±ä¼šé™ä½ã€‚</p>
<ul>
<li>å¦‚æœä¸€äº›å®ä¾‹æ˜¯æ˜æ˜¾çš„å¼‚å¸¸å€¼ï¼Œæœ€å¥½åˆ æ‰å®ƒä»¬æˆ–å°è¯•æ‰‹å·¥ä¿®æ”¹é”™è¯¯ï¼›</li>
<li>å¦‚æœä¸€äº›å®ä¾‹ç¼ºå°‘ç‰¹å¾ï¼ˆæ¯”å¦‚ï¼Œä½ çš„ 5% çš„é¡¾å®¢æ²¡æœ‰è¯´æ˜å¹´é¾„ï¼‰ï¼Œä½ å¿…é¡»å†³å®šæ˜¯å¦å¿½ç•¥è¿™ä¸ªå±æ€§ã€å¿½ç•¥è¿™äº›å®ä¾‹ã€å¡«å…¥ç¼ºå¤±å€¼ï¼ˆæ¯”å¦‚ï¼Œå¹´é¾„ä¸­ä½æ•°ï¼‰ï¼Œæˆ–è€…è®­ç»ƒä¸€ä¸ªå«æœ‰è¿™ä¸ªç‰¹å¾çš„æ¨¡å‹å’Œä¸€ä¸ªä¸å«æœ‰è¿™ä¸ªç‰¹å¾çš„æ¨¡å‹ï¼Œç­‰ç­‰ã€‚</li>
</ul>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯æµ‹è¯•é›†ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</li>
</ol>
<blockquote>
<p>æµ‹è¯•é›†ï¼šç”¨æ¥è®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†</p>
</blockquote>
<ol>
<li>éªŒè¯é›†çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>éªŒè¯é›†ï¼šæ•°æ®ä¸­åˆ†å‡ºæ¥ï¼Œå¯¹æ¨¡å‹è¿›è¡Œæµ‹è¯•çš„æ•°æ®é›†ã€‚</p>
<p>è¯„ä¼°æ¨¡å‹æ¨å¹¿åˆ°æ–°æ ·æœ¬çš„æ•ˆæœï¼ˆå³å¯¹æ–°æ ·æœ¬çš„æ€§èƒ½ï¼‰ï¼Œå¯ä»¥å°†æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè§‚å¯Ÿå®ƒçš„æ€§èƒ½ã€‚è¿™ä¹ˆåšå¯ä»¥ï¼Œä½†å¦‚æœæ¨¡å‹çš„æ€§èƒ½å¾ˆå·®ï¼Œå°±ä¼šå¼•èµ·ç”¨æˆ·æŠ±æ€¨ã€‚æ›´å¥½çš„é€‰é¡¹æ˜¯å°†æ•°æ®åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚ç”¨è®­ç»ƒé›†è¿›è¡Œè®­ç»ƒï¼Œç”¨æµ‹è¯•é›†è¿›è¡Œæµ‹è¯•ã€‚å¯¹æ–°æ ·æœ¬çš„é”™è¯¯ç‡ç§°ä½œ<strong>æ¨å¹¿é”™è¯¯ï¼ˆæˆ–æ ·æœ¬å¤–é”™è¯¯ï¼‰</strong> ï¼Œé€šè¿‡æ¨¡å‹å¯¹æµ‹è¯•é›†çš„è¯„ä¼°ï¼Œå¯ä»¥é¢„ä¼°è¿™ä¸ªé”™è¯¯ã€‚è¿™ä¸ªå€¼å¯ä»¥æˆ‘ä»¬æ¨¡å‹å¯¹æ–°æ ·æœ¬çš„æ€§èƒ½ã€‚</p>
</blockquote>
<ol>
<li>å¦‚æœç”¨æµ‹è¯•é›†è°ƒèŠ‚è¶…å‚æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>è¿‡æ‹Ÿåˆ</p>
<p>åœ¨æµ‹è¯•é›†ä¸Šå¤šæ¬¡æµ‹é‡äº†æ¨å¹¿è¯¯å·®ç‡ï¼Œè°ƒæ•´äº†æ¨¡å‹å’Œè¶…å‚æ•°ï¼Œä»¥ä½¿æ¨¡å‹æœ€é€‚åˆè¿™ä¸ªé›†åˆã€‚è¿™æ„å‘³ç€æ¨¡å‹å¯¹æ–°æ•°æ®çš„æ€§èƒ½ä¸ä¼šé«˜ã€‚</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯äº¤å‰éªŒè¯ï¼Œä¸ºä»€ä¹ˆå®ƒæ¯”éªŒè¯é›†å¥½ï¼Ÿ</li>
</ol>
<blockquote>
<p>äº¤å‰éªŒè¯ï¼šè®­ç»ƒé›†åˆ†æˆäº’è¡¥çš„å­é›†ï¼Œæ¯ä¸ªæ¨¡å‹ç”¨ä¸åŒçš„å­é›†è®­ç»ƒï¼Œå†ç”¨å‰©ä¸‹çš„å­é›†éªŒè¯ã€‚ä¸€æ—¦ç¡®å®šæ¨¡å‹ç±»å‹å’Œè¶…å‚æ•°ï¼Œæœ€ç»ˆçš„æ¨¡å‹ä½¿ç”¨è¿™äº›è¶…å‚æ•°å’Œå…¨éƒ¨çš„è®­ç»ƒé›†è¿›è¡Œè®­ç»ƒï¼Œç”¨æµ‹è¯•é›†å¾—åˆ°æ¨å¹¿è¯¯å·®ç‡ã€‚</p>
<p>è€Œä½¿ç”¨éªŒè¯é›†ï¼šç”¨è®­ç»ƒé›†å’Œå¤šä¸ªè¶…å‚æ•°è®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œé€‰æ‹©åœ¨éªŒè¯é›†ä¸Šæœ‰æœ€ä½³æ€§èƒ½çš„æ¨¡å‹å’Œè¶…å‚æ•°ã€‚å½“å¯¹æ¨¡å‹æ»¡æ„æ—¶ï¼Œç”¨æµ‹è¯•é›†å†åšæœ€åä¸€æ¬¡æµ‹è¯•ï¼Œä»¥å¾—åˆ°æ¨å¹¿è¯¯å·®ç‡çš„é¢„ä¼°ï¼Œä¼šâ€œæµªè´¹â€è¿‡å¤šè®­ç»ƒæ•°æ®åœ¨éªŒè¯é›†ä¸Šã€‚</p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="ç¬¬02ç« -ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"><a href="#ç¬¬02ç« -ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®" class="headerlink" title="ç¬¬02ç«  ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"></a>ç¬¬02ç«  ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®</h2><p>[Python APIï¼šcrc32å‡½æ•° è®¡ç®—CRCæ ¡éªŒå€¼](<a href="https://bï¼‰" target="_blank" rel="noopener">https://bï¼‰</a></p>
<p><a href="https://blog.csdn.net/liuyu60305002/article/details/6307152" target="_blank" rel="noopener">æ¨¡2è¿ç®—</a></p>
<p><a href="https://blog.csdn.net/sparkliang/article/details/5671510" target="_blank" rel="noopener">CRC32ç®—æ³•è¯¦ç»†æ¨å¯¼</a></p>
<blockquote>
<p>crc32ç”¨äºè®¡ç®— <em>data</em> çš„ CRC (A cyclic redundancy check 32ï¼Œå¾ªç¯å†—ä½™æ ¡éªŒ) å€¼ã€‚è®¡ç®—çš„ç»“æœæ˜¯ä¸€ä¸ª 32 ä½çš„æ•´æ•°ã€‚æœ¬è´¨æ˜¯<strong>æ¨¡2é™¤æ³•æ¨¡2è¿ç®—åŒ…æ‹¬æ¨¡2åŠ ã€æ¨¡2å‡ã€æ¨¡2ä¹˜ã€æ¨¡2é™¤å››ç§äºŒè¿›åˆ¶è¿ç®—ï¼Œä¸è€ƒè™‘è¿›ä½å’Œå€Ÿä½ï¼‰</strong>ï¼Œ çš„ä½™æ•°ï¼Œé‡‡ç”¨çš„é™¤æ•°ä¸åŒï¼ŒCRCçš„ç±»å‹ä¹Ÿå°±ä¸ä¸€æ ·ã€‚é€šå¸¸ï¼ŒCRCçš„é™¤æ•°ç”¨ç”Ÿæˆå¤šé¡¹å¼æ¥è¡¨ç¤ºã€‚</p>
<p>æ­¤ç®—æ³•æ²¡æœ‰åŠ å¯†å¼ºåº¦ï¼Œä¸åº”ç”¨äºèº«ä»½éªŒè¯å’Œæ•°å­—ç­¾åã€‚ä»…<strong>ä¸ºéªŒè¯æ•°æ®çš„æ­£ç¡®æ€§</strong> ï¼Œä¸é€‚åˆä½œä¸ºé€šç”¨æ•£åˆ—ç®—æ³•ã€‚</p>
<h4 id="ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰"><a href="#ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰" class="headerlink" title="ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰"></a>ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰</h4><h4 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h4><p>CRC ç®—æ³•æ˜¯ä»¥ GF(2) å¤šé¡¹å¼ç®—æœ¯ä¸ºæ•°å­¦åŸºç¡€çš„ï¼Œ GF(2) å¤šé¡¹å¼ä¸­åªæœ‰ä¸€ä¸ªå˜é‡ x ï¼Œå…¶ç³»æ•°ä¹Ÿåªæœ‰ 0 å’Œ 1 ï¼Œæ¯”å¦‚ï¼š</p>
<p>â€‹    1 <em>x^6 + 0</em>x^5 + 1<em>x^4 + 0</em>x^3 + 0<em>x^2 +1</em>x^1 + 1*x^0</p>
<p>â€‹       = x^6 + x^4 + x + 1</p>
<p>åŠ å‡è¿ç®—ä¸è€ƒè™‘è¿›ä½å’Œé€€ä½ã€‚è¯´ç™½äº†å°±æ˜¯ä¸‹é¢çš„è¿ç®—è§„åˆ™ï¼š</p>
<p>â€‹    0 + 0 = 0    0 - 0 = 0</p>
<p>â€‹    0 + 1 = 1    0 - 1 = 1</p>
<p>â€‹    1 + 0 = 1    1 - 0 = 1</p>
<p>â€‹    1 + 1 = 0    1 - 1 = 0<br>çœ‹çœ‹è¿™ä¸ªè§„åˆ™ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª<strong>å¼‚æˆ–è¿ç®—</strong> ã€‚</p>
<p>æ¯ä¸ªç”Ÿæˆå¤šé¡¹å¼çš„ç³»æ•°åªèƒ½æ˜¯ 0 æˆ– 1 ï¼Œå› æ­¤å¯ä»¥æŠŠå®ƒè½¬åŒ–ä¸ºäºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼Œ æ¯”å¦‚ g(x)=x^4 + x + 1 ï¼Œé‚£ä¹ˆ g(x) å¯¹åº”çš„äºŒè¿›åˆ¶å½¢å¼å°±æ˜¯ 10011 ï¼Œ äºæ˜¯æŠŠ GF(2) å¤šé¡¹å¼çš„é™¤æ³•è½¬æ¢æˆäº†äºŒè¿›åˆ¶å½¢å¼ï¼Œå’Œæ™®é€šé™¤æ³•æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯åŠ å‡è¿ç®—æ²¡æœ‰è¿›ä½å’Œé€€ä½ã€‚</p>
<p>æ¯”å¦‚åŸºäºä¸Šè¿°è§„åˆ™è®¡ç®— 11010/1001 ï¼Œé‚£ä¹ˆå•†æ˜¯ 11 ï¼Œä½™æ•°å°±æ˜¯ 1ã€‚</p>
<h4 id="CRC-æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹"><a href="#CRC-æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹" class="headerlink" title="CRC æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹"></a>CRC æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹</h4><p>é‡‡ç”¨ CRC æ ¡éªŒæ—¶ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç”¨åŒä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼ g(x) ï¼Œ g(x) æ˜¯ä¸€ä¸ª GF(2) å¤šé¡¹å¼ï¼Œå¹¶ä¸” g(x) çš„é¦–ä½å’Œæœ€åä¸€ä½çš„ç³»æ•°å¿…é¡»ä¸º 1 ã€‚</p>
<p>CRC çš„å¤„ç†æ–¹æ³•æ˜¯ï¼šå‘é€æ–¹ç”¨å‘é€æ•°æ®çš„äºŒè¿›åˆ¶å¤šé¡¹å¼ t(x) é™¤ä»¥ g(x) ï¼Œå¾—åˆ°ä½™æ•° y(x) ä½œä¸º CRC æ ¡éªŒç ã€‚æ ¡éªŒæ—¶ï¼Œä»¥è®¡ç®—çš„æ ¡æ­£ç»“æœæ˜¯å¦ä¸º 0 ä¸ºæ®ï¼Œåˆ¤æ–­æ•°æ®å¸§æ˜¯å¦å‡ºé”™ã€‚è®¾ç”Ÿæˆå¤šé¡¹å¼æ˜¯ r é˜¶çš„ï¼ˆæœ€é«˜ä½æ˜¯ x^r ï¼‰å…·ä½“æ­¥éª¤å¦‚ä¸‹é¢çš„æè¿°ã€‚</p>
<p>å‘é€æ–¹ï¼š</p>
<p>1 ï¼‰åœ¨å‘é€çš„ m ä½æ•°æ®çš„äºŒè¿›åˆ¶å¤šé¡¹å¼ t(x) åæ·»åŠ  r ä¸ª 0 ï¼Œæ‰©å¼ åˆ° m+ r ä½ï¼Œä»¥å®¹çº³ r ä½çš„æ ¡éªŒç ï¼Œè¿½åŠ  0 åçš„äºŒè¿›åˆ¶å¤šé¡¹å¼ä¸º  T(x) ï¼›</p>
<p>2 ï¼‰ç”¨ T(x) é™¤ä»¥ç”Ÿæˆå¤šé¡¹å¼ g(x) ï¼Œå¾—åˆ° r ä½çš„ä½™æ•° y(x) ï¼Œå®ƒå°±æ˜¯ CRC æ ¡éªŒç ï¼›</p>
<p>3 ï¼‰æŠŠ y(x) è¿½åŠ åˆ° t(x) åé¢ï¼Œæ­¤æ—¶çš„æ•°æ® s(x) å°±æ˜¯åŒ…å«äº† CRC æ ¡éªŒç çš„å¾…å‘é€å­—ç¬¦ä¸²ï¼›ç”±äº s(x) = t(x) y(x) ï¼Œå› æ­¤ s(x) è‚¯å®šèƒ½è¢« g(x) é™¤å°½ã€‚</p>
<p>æ¥æ”¶æ–¹ï¼š</p>
<p>1 ï¼‰æ¥æ”¶æ•°æ® n(x) ï¼Œè¿™ä¸ª n(x) å°±æ˜¯åŒ…å«äº† CRC æ ¡éªŒç çš„ m+r ä½æ•°æ®ï¼›</p>
<p>2 ï¼‰è®¡ç®— n(x) é™¤ä»¥ g(x) ï¼Œå¦‚æœä½™æ•°ä¸º 0 åˆ™è¡¨ç¤ºä¼ è¾“è¿‡ç¨‹æ²¡æœ‰é”™è¯¯ï¼Œå¦åˆ™è¡¨ç¤ºæœ‰é”™è¯¯ã€‚ä» n(x) å»æ‰å°¾éƒ¨çš„ r ä½æ•°æ®ï¼Œå¾—åˆ°çš„å°±æ˜¯åŸå§‹æ•°æ®ã€‚</p>
<p>ç”Ÿæˆå¤šé¡¹å¼ä¸æ˜¯éšæ„é€‰æ‹©çš„ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ ‡å‡†çš„ CRC ç®—æ³•çš„ç”Ÿæˆå¤šé¡¹å¼ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ç”Ÿæˆå¤šé¡¹å¼</th>
<th>16 è¿›åˆ¶è¡¨ç¤º</th>
</tr>
</thead>
<tbody>
<tr>
<td>CRC12</td>
<td>x^12 + x^11 + x^3 + x^2 + x + 1</td>
<td>0x80F</td>
</tr>
<tr>
<td>CRC16</td>
<td>x^16 + x^15 + x^2 + 1</td>
<td>0x8005</td>
</tr>
<tr>
<td>CRC16-CCITT</td>
<td>x^16 + x^12 + x^5 + 1</td>
<td>0x1021</td>
</tr>
<tr>
<td>CRC32</td>
<td>x^32 + x^26 + x^23 + x^22 + x^16 + x^12 + x^11+ x^10 + x^8 + x^7 + x^5 + x^4 + x^2 + x + 1</td>
<td>0x04C11DB7</td>
</tr>
</tbody>
</table>
</div>
<p>åœ¨python 3.0 ä¹‹å: è¿”å›å€¼æ°¸è¿œæ˜¯æ— ç¬¦å·æ•°ã€‚è¦åœ¨æ‰€æœ‰çš„ Python ç‰ˆæœ¬å’Œå¹³å°ä¸Šè·å¾—ç›¸åŒçš„å€¼ï¼Œè¯·ä½¿ç”¨ <strong>crc32(data) &amp; 0xffffffff</strong>ã€‚</p>
</blockquote>
<p><strong>é—®é¢˜ï¼š</strong> </p>
<p>ä½¿ç”¨æœ¬ç« çš„æˆ¿äº§æ•°æ®é›†ï¼š</p>
<ol>
<li>å°è¯•ä¸€ä¸ªæ”¯æŒå‘é‡æœºå›å½’å™¨ï¼ˆ<code>sklearn.svm.SVR</code>ï¼‰ï¼Œä½¿ç”¨å¤šä¸ªè¶…å‚æ•°ï¼Œæ¯”å¦‚<code>kernel=&quot;linear&quot;</code>ï¼ˆå¤šä¸ªè¶…å‚æ•°<code>C</code>å€¼ï¼‰ã€‚ç°åœ¨ä¸ç”¨æ‹…å¿ƒè¿™äº›è¶…å‚æ•°æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚æœ€ä½³çš„<code>SVR</code>é¢„æµ‹è¡¨ç°å¦‚ä½•ï¼Ÿ</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br><span class="line"></span><br><span class="line">&gt;svm_reg = SVR(kernel=<span class="string">"linear"</span>)</span><br><span class="line">&gt;svm_reg.fit(housing_prepared, housing_labels)</span><br><span class="line">&gt;housing_predictions = svm_reg.predict(housing_prepared)</span><br><span class="line">&gt;svm_mse = mean_squared_error(housing_labels, housing_predictions)</span><br><span class="line">&gt;svm_rmse = np.sqrt(svm_mse)</span><br><span class="line">&gt;svm_rmse <span class="comment"># output: 111094.6308539982</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸å¥½ã€‚</p>
</blockquote>
<ol>
<li>å°è¯•ç”¨<code>RandomizedSearchCV</code>æ›¿æ¢<code>GridSearchCV</code>ã€‚</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> RandomizedSearchCV</span><br><span class="line">&gt;<span class="keyword">from</span> scipy.stats <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line">&gt;param_distribs = &#123;</span><br><span class="line">       <span class="string">'n_estimators'</span>: randint(low=<span class="number">1</span>, high=<span class="number">200</span>),</span><br><span class="line">       <span class="string">'max_features'</span>: randint(low=<span class="number">1</span>, high=<span class="number">8</span>),</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&gt;forest_reg = RandomForestRegressor(random_state=<span class="number">42</span>)</span><br><span class="line">&gt;rnd_search = RandomizedSearchCV(forest_reg, param_distributions=param_distribs,</span><br><span class="line">                               n_iter=<span class="number">10</span>, cv=<span class="number">5</span>, scoring=<span class="string">'neg_mean_squared_error'</span>, random_state=<span class="number">42</span>)</span><br><span class="line">&gt;rnd_search.fit(housing_prepared, housing_labels)</span><br></pre></td></tr></table></figure>
</blockquote>
<ol>
<li>å°è¯•åœ¨å‡†å¤‡æµæ°´çº¿ä¸­æ·»åŠ ä¸€ä¸ªåªé€‰æ‹©æœ€é‡è¦å±æ€§çš„è½¬æ¢å™¨ã€‚</li>
</ol>
<blockquote>
<p>â€‹</p>
</blockquote>
<ol>
<li>å°è¯•åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯ä»¥å®Œæˆæ•°æ®å‡†å¤‡å’Œæœ€ç»ˆé¢„æµ‹çš„æµæ°´çº¿ã€‚</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;full_pipeline_with_predictor = Pipeline([</span><br><span class="line">       (<span class="string">"preparation"</span>, full_pipeline),</span><br><span class="line">       (<span class="string">"linear"</span>, LinearRegression())</span><br><span class="line">   ])</span><br><span class="line"></span><br><span class="line">&gt;full_pipeline_with_predictor.fit(housing, housing_labels)</span><br><span class="line">&gt;full_pipeline_with_predictor.predict(some_data)</span><br></pre></td></tr></table></figure>
</blockquote>
<ol>
<li>ä½¿ç”¨<code>GridSearchCV</code>è‡ªåŠ¨æ¢ç´¢ä¸€äº›å‡†å¤‡è¿‡ç¨‹ä¸­çš„å€™é€‰é¡¹ã€‚</li>
</ol>
<h2 id="ç¬¬03ç« -åˆ†ç±»"><a href="#ç¬¬03ç« -åˆ†ç±»" class="headerlink" title="ç¬¬03ç«  åˆ†ç±»"></a>ç¬¬03ç«  åˆ†ç±»</h2><p><a href="https://blog.csdn.net/weixin_38145317/article/details/79650188" target="_blank" rel="noopener">SVMã€SVCã€SVR</a> </p>
<h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><ol>
<li><p>å°è¯•åœ¨ MNIST æ•°æ®é›†ä¸Šå»ºç«‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œä½¿å®ƒåœ¨æµ‹è¯•é›†ä¸Šçš„ç²¾åº¦è¶…è¿‡ 97%ã€‚æç¤ºï¼š<code>KNeighborsClassifier</code>éå¸¸é€‚åˆè¿™ä¸ªä»»åŠ¡ã€‚ä½ åªéœ€è¦æ‰¾å‡ºä¸€ä¸ªå¥½çš„è¶…å‚æ•°å€¼ï¼ˆè¯•ä¸€ä¸‹å¯¹æƒé‡å’Œè¶…å‚æ•°<code>n_neighbors</code>è¿›è¡Œç½‘æ ¼æœç´¢ï¼‰ã€‚</p>
<p>â€‹</p>
</li>
<li><p>å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥æ˜¯ MNIST ä¸­çš„å›¾åƒä»»æ„æ–¹å‘ç§»åŠ¨ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ä¸€ä¸ªåƒç´ ã€‚ç„¶åï¼Œå¯¹è®­ç»ƒé›†ä¸Šçš„æ¯å¼ å›¾ç‰‡ï¼Œå¤åˆ¶å››ä¸ªç§»åŠ¨åçš„å‰¯æœ¬ï¼ˆæ¯ä¸ªæ–¹å‘ä¸€ä¸ªå‰¯æœ¬ï¼‰ï¼ŒæŠŠå®ƒä»¬åŠ åˆ°è®­ç»ƒé›†å½“ä¸­å»ã€‚æœ€ååœ¨æ‰©å±•åçš„è®­ç»ƒé›†ä¸Šè®­ç»ƒä½ æœ€å¥½çš„æ¨¡å‹ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•é›†ä¸Šæµ‹é‡å®ƒçš„ç²¾åº¦ã€‚ä½ åº”è¯¥ä¼šè§‚å¯Ÿåˆ°ä½ çš„æ¨¡å‹ä¼šæœ‰æ›´å¥½çš„è¡¨ç°ã€‚è¿™ç§äººå·¥æ‰©å¤§è®­ç»ƒé›†çš„æ–¹æ³•å«åšæ•°æ®å¢å¼ºï¼Œæˆ–è€…è®­ç»ƒé›†æ‰©å¼ ã€‚</p>
<p>â€‹</p>
</li>
<li><p>æ‹¿ Titanic æ•°æ®é›†å»æ£é¼“ä¸€ç•ªã€‚å¼€å§‹è¿™ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å¹³å°ï¼šKaggle</p>
<p>â€‹</p>
</li>
<li><p>å»ºç«‹ä¸€ä¸ªåƒåœ¾é‚®ä»¶åˆ†ç±»å™¨ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ›´æœ‰æŒ‘æˆ˜æ€§çš„ç»ƒä¹ ï¼‰ï¼š</p>
</li>
</ol>
<ul>
<li>ä¸‹è½½åƒåœ¾é‚®ä»¶å’Œéåƒåœ¾é‚®ä»¶çš„æ ·ä¾‹æ•°æ®ã€‚åœ°å€æ˜¯<a href="https://spamassassin.apache.org/publiccorpus/" target="_blank" rel="noopener">Apache SpamAssassin çš„å…¬å…±æ•°æ®é›†</a></li>
<li>è§£å‹è¿™äº›æ•°æ®é›†ï¼Œå¹¶ä¸”ç†Ÿæ‚‰å®ƒçš„æ•°æ®æ ¼å¼ã€‚</li>
<li>å°†æ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†</li>
<li>å†™ä¸€ä¸ªæ•°æ®å‡†å¤‡çš„æµæ°´çº¿ï¼Œå°†æ¯ä¸€å°é‚®ä»¶è½¬æ¢ä¸ºç‰¹å¾å‘é‡ã€‚ä½ çš„æµæ°´çº¿åº”è¯¥å°†ä¸€å°é‚®ä»¶è½¬æ¢ä¸ºä¸€ä¸ªç¨€ç–å‘é‡ï¼Œå¯¹äºæ‰€æœ‰å¯èƒ½çš„è¯ï¼Œè¿™ä¸ªå‘é‡æ ‡å¿—å“ªä¸ªè¯å‡ºç°äº†ï¼Œå“ªä¸ªè¯æ²¡æœ‰å‡ºç°ã€‚ä¸¾ä¾‹å­ï¼Œå¦‚æœæ‰€æœ‰é‚®ä»¶åªåŒ…å«äº†<code>&quot;Hello&quot;,&quot;How&quot;,&quot;are&quot;, &quot;you&quot;</code>è¿™å››ä¸ªè¯ï¼Œé‚£ä¹ˆä¸€å°é‚®ä»¶ï¼ˆå†…å®¹æ˜¯ï¼š<code>&quot;Hello you Hello Hello you&quot;</code>ï¼‰å°†ä¼šè¢«è½¬æ¢ä¸ºå‘é‡<code>[1, 0, 0, 1]</code>(æ„æ€æ˜¯ï¼š<code>&quot;Hello&quot;</code>å‡ºç°ï¼Œ<code>&quot;How&quot;</code>ä¸å‡ºç°ï¼Œ<code>&quot;are&quot;</code>ä¸å‡ºç°ï¼Œ<code>&quot;you&quot;</code>å‡ºç°)ï¼Œæˆ–è€…<code>[3, 0, 0, 2]</code>ï¼Œå¦‚æœä½ æƒ³æ•°å‡ºæ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚</li>
<li>ä½ ä¹Ÿè®¸æƒ³ç»™ä½ çš„æµæ°´çº¿å¢åŠ è¶…å‚æ•°ï¼Œæ§åˆ¶æ˜¯å¦å‰¥è¿‡é‚®ä»¶å¤´ã€å°†é‚®ä»¶è½¬æ¢ä¸ºå°å†™ã€å»é™¤æ ‡ç‚¹ç¬¦å·ã€å°†æ‰€æœ‰ URL æ›¿æ¢æˆ<code>&quot;URL&quot;</code>ï¼Œå°†æ‰€æœ‰æ•°å­—æ›¿æ¢æˆ<code>&quot;NUMBER&quot;</code>ï¼Œæˆ–è€…ç”šè‡³æå–è¯å¹²ï¼ˆæ¯”å¦‚ï¼Œæˆªæ–­è¯å°¾ã€‚æœ‰ç°æˆçš„ Python åº“å¯ä»¥åšåˆ°è¿™ç‚¹ï¼‰ã€‚</li>
<li>ç„¶å å°è¯•å‡ ä¸ªä¸åŒçš„åˆ†ç±»å™¨ï¼Œçœ‹çœ‹ä½ å¯å¦å»ºç«‹ä¸€ä¸ªå¾ˆæ£’çš„åƒåœ¾é‚®ä»¶åˆ†ç±»å™¨ï¼ŒåŒæ—¶æœ‰ç€é«˜å¬å›ç‡å’Œé«˜å‡†ç¡®ç‡ã€‚</li>
</ul>
<h2 id="ç¬¬04ç« -è®­ç»ƒæ¨¡å‹"><a href="#ç¬¬04ç« -è®­ç»ƒæ¨¡å‹" class="headerlink" title="ç¬¬04ç«  è®­ç»ƒæ¨¡å‹"></a>ç¬¬04ç«  è®­ç»ƒæ¨¡å‹</h2><p>çº¿æ€§å›å½’é¢„æµ‹æ¨¡å‹ï¼š</p>
<p>$\hat y = h_{\theta}(x)=\theta ^T\cdot x$</p>
<p>çº¿æ€§å›å½’æ¨¡å‹çš„MSEæŸå¤±å‡½æ•°:</p>
<p>$MSE(X,h_\theta)=\frac{1}{m}\sum_{i=1}^{n}(\theta^T\cdot x^{(i)}-y^{(i)})^2$</p>
<h4 id="æ­£æ€æ–¹ç¨‹"><a href="#æ­£æ€æ–¹ç¨‹" class="headerlink" title="æ­£æ€æ–¹ç¨‹"></a><strong>æ­£æ€æ–¹ç¨‹</strong></h4><p>æœ€å°åŒ–æŸå¤±å‡½æ•° $\hat{\theta} =   (X^T \cdot X)^{-1} \cdot X^T \cdot y $</p>
<p>å¤æ‚åº¦ï¼šéœ€è¦è®¡ç®—$X^T\cdot X$ çš„é€†çŸ©é˜µï¼Œæ˜¯ä¸€ä¸ªn*nçš„çŸ©é˜µï¼Œè¿ç®—å¤æ‚åº¦å¤§çº¦åœ¨$O(n^{24})$ åˆ°$O(n^{3})$ä¹‹é—´ã€‚</p>
<p>å¯ä»¥numpyç›´æ¥æ±‚è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨sklearnï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line">lin_reg = LinearRegression()</span><br><span class="line">lin_reg.fit(X, y)</span><br><span class="line">lin_reg.intercept_, lin_reg.coef_</span><br></pre></td></tr></table></figure>
<p><code>LinearRegressionç±»åŸºäºnumpy.linalg.lstsq ï¼ˆleast squaresï¼‰</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">theta_best_svd, residuals, rank, s = np.linalg.lstsq(X_b, y, rcond=<span class="number">1e-6</span>)</span><br><span class="line">theta_best_svd</span><br></pre></td></tr></table></figure>
<h5 id="pseudoinverse-Moore-Penrose-inverse"><a href="#pseudoinverse-Moore-Penrose-inverse" class="headerlink" title="pseudoinverse (Moore-Penrose inverse)"></a>pseudoinverse (Moore-Penrose inverse)</h5><p>è¯¥å‡½æ•°æ±‚è§£çš„æ˜¯ä¼ªé€†çŸ©é˜µï¼ˆpseudoinverseï¼‰ï¼Œå³å¹¿ä¹‰çŸ©é˜µã€‚å…¶ä¸­æœ€è‘—åçš„ä¼ªé€†çŸ©é˜µä¸ºæ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€† A+ï¼ˆMooreâ€“Penrose pseudoinverse)ï¼Œå¸¸åº”ç”¨äºæ±‚éä¸€è‡´çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°èŒƒæ•°æœ€å°äºŒä¹˜è§£ï¼ˆæœ€å°äºŒä¹˜æ³•ï¼‰ï¼Œå¹¶ä½¿å¾—è§£çš„å½¢å¼å˜å¾—ç®€å•ã€‚çŸ©é˜µçš„æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†åœ¨å®æ•°åŸŸå’Œå¤æ•°åŸŸä¸Šéƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¥‡å¼‚å€¼åˆ†è§£æ±‚å¾—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.linalg.pinv(X_b).dot(y)</span><br></pre></td></tr></table></figure>
<p>æ»¡è¶³æ‘©å°”-å½­è‹¥æ–¯æ¡ä»¶çš„çŸ©é˜µGç§°ä¸ºçŸ©é˜µAçš„æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†çŸ©é˜µï¼Œè®°ä½œA+ï¼š</p>
<p><img src="https://img-blog.csdn.net/20170824103329707?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemVhbGZvcnk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="æ¡ä»¶"></p>
<p>ä»æ‘©å°”ï¼å½­è‹¥æ–¯æ¡ä»¶å‡ºå‘ï¼Œå½­è‹¥æ–¯æ¨å¯¼å‡ºäº†æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†çš„ä¸€äº›æ€§è´¨ï¼š<br><img src="https://img-blog.csdn.net/20170824103423352?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemVhbGZvcnk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p> å‚è€ƒï¼š<a href="https://blog.csdn.net/zealfory/article/details/77526815" target="_blank" rel="noopener">https://blog.csdn.net/zealfory/article/details/77526815</a></p>
<h4 id="æ¢¯åº¦ä¸‹é™æ³•"><a href="#æ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="æ¢¯åº¦ä¸‹é™æ³•"></a>æ¢¯åº¦ä¸‹é™æ³•</h4><p>è¶…å‚æ•°å­¦ä¹ ç‡çš„å€¼å†³å®šäº†æ­¥é•¿çš„å¤§å°ã€‚å¦‚æœå­¦ä¹ ç‡å¤ªå°ï¼Œå¿…é¡»ç»è¿‡å¤šæ¬¡è¿­ä»£ï¼Œç®—æ³•æ‰èƒ½æ”¶æ•›ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„ï¼Œå¦‚æœå­¦ä¹ ç‡å¤ªå¤§ï¼Œä½ å¯èƒ½ä½¿ç®—æ³•å‘æ•£ï¼Œå‡½æ•°å€¼å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæ°¸è¿œä¸å¯èƒ½æ‰¾åˆ°ä¸€ä¸ªå¥½çš„ç­”æ¡ˆã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-4.PNG" alt="å­¦ä¹ ç‡è¿‡å°"></p>
<center>å­¦ä¹ ç‡è¿‡å°</center>

<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-5.PNG" alt="img"></p>
<center>å­¦ä¹ ç‡è¿‡å¤§</center>

<p><strong>ä¸¤ä¸ªä¸»è¦æŒ‘æˆ˜</strong></p>
<ol>
<li>æ”¶æ•›åˆ°å±€éƒ¨æœ€å°å€¼</li>
</ol>
<p>å½“ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ—¶å€™ï¼Œåº”è¯¥ç¡®ä¿æ‰€æœ‰çš„ç‰¹å¾æœ‰ç€ç›¸è¿‘çš„å°ºåº¦èŒƒå›´ï¼ˆä¾‹å¦‚ï¼šä½¿ç”¨ Scikit Learn çš„ <code>StandardScaler</code>ç±»ï¼‰ï¼Œå¦åˆ™å®ƒå°†éœ€è¦å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½å¤Ÿæ”¶æ•›ã€‚</p>
<h4 id="batch-GD"><a href="#batch-GD" class="headerlink" title="batch-GD"></a>batch-GD</h4><p>ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¡ç®—æ¯ä¸€ä¸ª $\theta_j$ ä¸‹æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå³è®¡ç®—å…³äº$\theta_j$ çš„æŸå¤±å‡½æ•°çš„åå¯¼æ•°ï¼Œè®°ä¸ºï¼š </p>
<script type="math/tex; mode=display">\frac{\partial}{\partial \theta_j} MSE(\theta)=\frac{2}{m}\sum_{i=1}^{m}({\theta^T\cdot x^{(i)}-y^{(i)})x_j^{}(i)}</script><p>å†™æˆçŸ©é˜µçš„å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">\nabla_\theta MSE(\theta)=\left( \begin{array}{c} \frac{\partial}{\partial \theta_0} MSE(\theta)\\\frac{\partial}{\partial \theta_1} MSE(\theta)\\...\\\frac{\partial}{\partial \theta_n} MSE(\theta) \end{array} \right)=\frac {2}{m} X^T\cdot (X\cdot \theta-y)</script><blockquote>
<p>åœ¨è¿™ä¸ªæ–¹ç¨‹ä¸­æ¯ä¸€æ­¥è®¡ç®—æ—¶éƒ½åŒ…å«äº†æ•´ä¸ªè®­ç»ƒé›†$X$ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•ç§°ä¸º<strong>æ‰¹é‡æ¢¯åº¦ä¸‹é™</strong>ï¼šæ¯ä¸€æ¬¡è®­ç»ƒè¿‡ç¨‹éƒ½ä½¿ç”¨æ‰€æœ‰çš„çš„è®­ç»ƒæ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼Œå…¶ä¼šå˜å¾—ç›¸å½“çš„æ…¢ã€‚ç„¶è€Œï¼Œæ¢¯åº¦ä¸‹é™çš„è¿ç®—è§„æ¨¡å’Œç‰¹å¾çš„æ•°é‡æˆæ­£æ¯”ã€‚è®­ç»ƒä¸€ä¸ªæ•°åƒæ•°é‡ç‰¹å¾çš„çº¿æ€§å›å½’æ¨¡å‹ä½¿ç”¨æ¢¯åº¦ä¸‹é™è¦æ¯”ä½¿ç”¨æ­£æ€æ–¹ç¨‹å¿«çš„å¤šã€‚</p>
</blockquote>
<p>æ¢¯åº¦ä¸‹é™çš„æ­¥é•¿ï¼š</p>
<script type="math/tex; mode=display">\theta^{(next step)}=\theta-\eta\nabla_\theta MSE(\theta)</script><p>$\eta$ ä¸ºå­¦ä¹ ç‡</p>
<p>ä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªå¥½çš„å­¦ä¹ ç‡ï¼Œå¯ä»¥ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼Œè®¾ç½®ä¸€ä¸ª<strong>è¿­ä»£æ¬¡æ•°</strong>ã€‚è®¾ç½®ä¸€ä¸ªéå¸¸å¤§çš„è¿­ä»£æ¬¡æ•°ï¼Œä½†æ˜¯å½“æ¢¯åº¦å‘é‡å˜å¾—éå¸¸å°ï¼ˆå®¹å·® $\epsilon$ ï¼‰çš„æ—¶å€™ï¼Œç»“æŸè¿­ä»£ã€‚</p>
<blockquote>
<p>æ”¶æ•›é€Ÿç‡ï¼š</p>
<p>å½“æŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œä¸”æ–œç‡ä¸èƒ½çªå˜ï¼ˆå°±åƒå‡æ–¹å·®æŸå¤±å‡½æ•°é‚£æ ·ï¼‰ï¼Œåˆ™å®ƒçš„æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•å›ºå®šå­¦ä¹ ç‡ä¹‹åï¼Œæ”¶æ•›é€Ÿç‡æ˜¯ $O(\frac{1}{iterations})$ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå°†å®¹å·® $\epsilon$ ç¼©å° 10 å€ï¼ˆè¿™æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´ç²¾ç¡®çš„ç»“æœï¼‰ï¼Œç®—æ³•çš„è¿­ä»£æ¬¡æ•°å¤§çº¦ä¼šå˜æˆåŸæ¥çš„ 10 å€ã€‚</p>
</blockquote>
<h4 id="stochastic-gradient-descent"><a href="#stochastic-gradient-descent" class="headerlink" title="stochastic gradient descent"></a>stochastic gradient descent</h4><p>æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æœ€è¦é—®é¢˜æ˜¯è®¡ç®—æ¯ä¸€æ­¥çš„æ¢¯åº¦æ—¶éƒ½éœ€è¦ä½¿ç”¨æ•´ä¸ªè®­ç»ƒé›†ï¼Œè¿™å¯¼è‡´åœ¨è§„æ¨¡è¾ƒå¤§çš„æ•°æ®é›†ä¸Šï¼Œå…¶ä¼šå˜å¾—éå¸¸çš„æ…¢ã€‚</p>
<p>è€Œéšæœºæ¢¯åº¦ä¸‹é™ï¼Œæ¯ä¸€æ­¥çš„æ¢¯åº¦è®¡ç®—åªéšæœºé€‰å–è®­ç»ƒé›†ä¸­çš„ä¸€ä¸ªæ ·æœ¬ã€‚ç”±äºæ¯ä¸€æ¬¡è¿­ä»£ï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œç®—æ³•éå¸¸å¿«ï¼Œè¿™ä½¿éšæœºæ¢¯åº¦ç®—æ³•å¯ä»¥åœ¨å¤§è§„æ¨¡è®­ç»ƒé›†ä¸Šä½¿ç”¨ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œç”±äºå…¶éšæœºæ€§ï¼ŒSGDå‘ˆç°å‡ºæ›´å¤šçš„ä¸è§„å¾‹æ€§ï¼šåˆ°è¾¾æœ€å°å€¼ä¸æ˜¯å¹³ç¼“çš„ä¸‹é™ï¼ŒæŸå¤±å‡½æ•°ä¼šå¿½é«˜å¿½ä½ï¼Œåªåœ¨å¤§ä½“ä¸Šå‘ˆä¸‹é™è¶‹åŠ¿ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œéå¸¸çš„é è¿‘æœ€å°å€¼ï¼Œä½†ä¸ä¼šåœæ­¢åœ¨ä¸€ä¸ªå€¼ä¸Šï¼Œè€Œæ˜¯ä¸€ç›´åœ¨è¿™ä¸ªå€¼é™„è¿‘æ‘†åŠ¨ã€‚å› æ­¤ï¼Œç®—æ³•åœæ­¢æ—¶ï¼Œæœ€åçš„å‚æ•°ä¸æ˜¯æœ€ä¼˜å€¼ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-9.PNG" alt="img"></p>
<p>å½“æŸå¤±å‡½æ•°å¾ˆä¸è§„åˆ™æ—¶ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•èƒ½å¤Ÿè·³è¿‡å±€éƒ¨æœ€å°å€¼ã€‚å› æ­¤ï¼Œéšæœºæ¢¯åº¦ä¸‹é™åœ¨å¯»æ‰¾å…¨å±€æœ€å°å€¼ä¸Šæ¯”æ‰¹é‡æ¢¯åº¦ä¸‹é™è¡¨ç°è¦å¥½ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-6.PNG" alt="img"></p>
<p>è™½ç„¶éšæœºæ€§å¯ä»¥å¾ˆå¥½çš„è·³è¿‡å±€éƒ¨æœ€ä¼˜å€¼ï¼Œä½†åŒæ—¶å®ƒå´ä¸èƒ½è¾¾åˆ°æœ€å°å€¼ã€‚è§£å†³è¿™ä¸ªéš¾é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯<strong>é€æ¸é™ä½å­¦ä¹ ç‡</strong>ã€‚</p>
<p>å¼€å§‹æ—¶ï¼Œèµ°çš„æ¯ä¸€æ­¥è¾ƒå¤§ï¼ˆæœ‰åŠ©äºå¿«é€Ÿå‰è¿›åŒæ—¶è·³è¿‡å±€éƒ¨æœ€å°å€¼ï¼‰ï¼Œç„¶åå˜å¾—è¶Šæ¥è¶Šå°ï¼Œä»è€Œä½¿ç®—æ³•åˆ°è¾¾å…¨å±€æœ€å°å€¼ã€‚ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º<strong>æ¨¡æ‹Ÿé€€ç«</strong>ã€‚</p>
<p>å†³å®šæ¯æ¬¡è¿­ä»£çš„å­¦ä¹ ç‡çš„å‡½æ•°ç§°ä¸º<code>learning schedule</code>ã€‚ å¦‚æœå­¦ä¹ é€Ÿåº¦é™ä½å¾—è¿‡å¿«ï¼Œå¯èƒ½ä¼šé™·å…¥å±€éƒ¨æœ€å°å€¼ï¼Œç”šè‡³åœ¨åˆ°è¾¾æœ€å°å€¼çš„åŠè·¯å°±åœæ­¢äº†ã€‚ å¦‚æœå­¦ä¹ é€Ÿåº¦é™ä½å¾—å¤ªæ…¢ï¼Œå¯èƒ½åœ¨æœ€å°å€¼çš„é™„è¿‘é•¿æ—¶é—´æ‘†åŠ¨ï¼ŒåŒæ—¶å¦‚æœè¿‡æ—©åœæ­¢è®­ç»ƒï¼Œæœ€ç»ˆåªä¼šå‡ºç°æ¬¡ä¼˜è§£ã€‚</p>
<h4 id="mini-batch-GD"><a href="#mini-batch-GD" class="headerlink" title="mini-batch GD"></a>mini-batch GD</h4><p>åœ¨è¿­ä»£çš„æ¯ä¸€æ­¥ï¼Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä½¿ç”¨ä¸€ä¸ªéšæœºçš„å°å‹å®ä¾‹é›†ã€‚ä¸éšæœºæ¢¯åº¦ç›¸æ¯”ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯ä»¥é€šè¿‡çŸ©é˜µè¿ç®—çš„ç¡¬ä»¶ä¼˜åŒ–å¾—åˆ°ä¸€ä¸ªè¾ƒå¥½çš„è®­ç»ƒè¡¨ç°ã€‚</p>
<p>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™åœ¨å‚æ•°ç©ºé—´ä¸Šçš„è¡¨ç°æ¯”éšæœºæ¢¯åº¦ä¸‹é™è¦å¥½çš„å¤šï¼Œå°¤å…¶åœ¨æœ‰å¤§é‡çš„å°å‹å®ä¾‹é›†æ—¶ã€‚ä½œä¸ºç»“æœï¼Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¼šæ¯”éšæœºæ¢¯åº¦æ›´é è¿‘æœ€å°å€¼ã€‚ä½†æ˜¯ï¼Œå¦ä¸€æ–¹é¢ï¼Œå®ƒæœ‰å¯èƒ½é™·åœ¨å±€éƒ¨æœ€å°å€¼ä¸­ï¼ˆåœ¨é‡åˆ°å±€éƒ¨æœ€å°å€¼é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„çº¿æ€§å›å½’ä¸ä¸€æ ·ï¼‰ã€‚ </p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-11.PNG" alt="img"></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E8%A1%A84-1.PNG" alt="img"></p>
<h4 id="å¤šé¡¹å¼å›å½’"><a href="#å¤šé¡¹å¼å›å½’" class="headerlink" title="å¤šé¡¹å¼å›å½’"></a>å¤šé¡¹å¼å›å½’</h4><p>å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡ŒåŠ æƒåä½œä¸ºæ–°çš„ç‰¹å¾ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªçº¿æ€§æ¨¡å‹åœ¨è¿™ä¸ªæ‰©å±•çš„ç‰¹å¾é›†ã€‚ è¿™ç§æ–¹æ³•ç§°ä¸ºå¤šé¡¹å¼å›å½’ã€‚</p>
<p><code>from sklearn.preprocessing import PolynomialFeatures</code></p>
<p>å½“å­˜åœ¨å¤šä¸ªç‰¹å¾æ—¶ï¼Œå¤šé¡¹å¼å›å½’èƒ½å¤Ÿæ‰¾å‡ºç‰¹å¾ä¹‹é—´çš„å…³ç³»ï¼ˆè¿™æ˜¯æ™®é€šçº¿æ€§å›å½’æ¨¡å‹æ— æ³•åšåˆ°çš„ï¼‰ã€‚ è¿™æ˜¯å› ä¸º<code>LinearRegression</code>ä¼šè‡ªåŠ¨æ·»åŠ å½“å‰é˜¶æ•°ä¸‹ç‰¹å¾çš„æ‰€æœ‰ç»„åˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç‰¹å¾ $a,b$ï¼Œä½¿ç”¨ 3 é˜¶ï¼ˆ<code>degree=3</code>ï¼‰çš„<code>LinearRegression</code>æ—¶ï¼Œä¸ä»…æœ‰ $a^3, a^2, b^3, b^2$ï¼ŒåŒæ—¶ä¹Ÿä¼šæœ‰å®ƒä»¬çš„å…¶ä»–ç»„åˆé¡¹ $ab, ab^2, a^2b$</p>
<p><code>PolynomialFeatures(degree=d)</code>æŠŠä¸€ä¸ªåŒ…å«$n$ä¸ªç‰¹å¾çš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å« $\frac{(n+d)!}{d!n!}$ç‰¹å¾çš„æ•°ç»„ã€‚å°å¿ƒå¤§é‡ç‰¹å¾çš„ç»„åˆçˆ†ç‚¸ï¼</p>
<h4 id="å­¦ä¹ æ›²çº¿"><a href="#å­¦ä¹ æ›²çº¿" class="headerlink" title="å­¦ä¹ æ›²çº¿"></a>å­¦ä¹ æ›²çº¿</h4><p><strong>å¦‚ä½•ä¼°è®¡ä¸€ä¸ªæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›</strong> </p>
<ol>
<li>ä½¿ç”¨äº¤å‰éªŒè¯ã€‚è‹¥æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œé€šè¿‡äº¤å‰éªŒè¯æŒ‡æ ‡å´å¾—å‡ºå…¶æ³›åŒ–èƒ½åŠ›å¾ˆå·®ï¼Œæ¨¡å‹è¿‡æ‹Ÿåˆã€‚å¦‚æœåœ¨è¿™ä¸¤æ–¹é¢éƒ½è¡¨ç°ä¸å¥½ï¼Œé‚£ä¹ˆæ¬ æ‹Ÿåˆã€‚è¿™ç§æ–¹æ³•å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æ¨¡å‹æ˜¯å¤ªå¤æ‚è¿˜æ˜¯å¤ªç®€å•äº†ã€‚</li>
<li>è§‚å¯Ÿå­¦ä¹ æ›²çº¿ï¼šç”»å‡ºæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°ï¼ŒåŒæ—¶ç”»å‡ºä»¥è®­ç»ƒé›†è§„æ¨¡ä¸ºè‡ªå˜é‡çš„è®­ç»ƒé›†å‡½æ•°ã€‚ä¸ºäº†å¾—åˆ°å›¾åƒï¼Œéœ€è¦åœ¨è®­ç»ƒé›†çš„ä¸åŒè§„æ¨¡å­é›†ä¸Šè¿›è¡Œå¤šæ¬¡è®­ç»ƒã€‚</li>
</ol>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-15.PNG" alt="img"></p>
<center>æ¬ æ‹Ÿåˆ</center>

<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-16.PNG" alt="img"></p>
<center>è¿‡æ‹Ÿåˆ</center>

<blockquote>
<p>åå·®å’Œæ–¹å·®çš„æƒè¡¡</p>
<p>åœ¨ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ é¢†åŸŸæœ‰ä¸ªé‡è¦çš„ç†è®ºï¼šä¸€ä¸ªæ¨¡å‹çš„<strong>æ³›åŒ–è¯¯å·®</strong>ç”±ä¸‰ä¸ªä¸åŒè¯¯å·®çš„å’Œå†³å®šï¼š</p>
<ul>
<li>åå·®ï¼šæ³›åŒ–è¯¯å·®çš„è¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºé”™è¯¯çš„å‡è®¾å†³å®šçš„ã€‚ä¾‹å¦‚å®é™…æ˜¯ä¸€ä¸ªäºŒæ¬¡æ¨¡å‹ï¼Œä½ å´å‡è®¾äº†ä¸€ä¸ªçº¿æ€§æ¨¡å‹ã€‚ä¸€ä¸ªé«˜åå·®çš„æ¨¡å‹æœ€å®¹æ˜“å‡ºç°æ¬ æ‹Ÿåˆã€‚</li>
<li>æ–¹å·®ï¼šè¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®çš„å¾®å°å˜åŒ–è¾ƒä¸ºæ•æ„Ÿï¼Œä¸€ä¸ªå¤šè‡ªç”±åº¦çš„æ¨¡å‹æ›´å®¹æ˜“æœ‰é«˜çš„æ–¹å·®ï¼ˆä¾‹å¦‚ä¸€ä¸ªé«˜é˜¶å¤šé¡¹å¼æ¨¡å‹ï¼‰ï¼Œå› æ­¤ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆã€‚</li>
<li>ä¸å¯çº¦è¯¯å·®ï¼šè¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºæ•°æ®æœ¬èº«çš„å™ªå£°å†³å®šçš„ã€‚é™ä½è¿™éƒ¨åˆ†è¯¯å·®çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯è¿›è¡Œæ•°æ®æ¸…æ´—ï¼ˆä¾‹å¦‚ï¼šä¿®å¤æ•°æ®æºï¼Œä¿®å¤åçš„ä¼ æ„Ÿå™¨ï¼Œè¯†åˆ«å’Œå‰”é™¤å¼‚å¸¸å€¼ï¼‰ã€‚</li>
</ul>
</blockquote>
<h4 id="çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–"><a href="#çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–" class="headerlink" title="çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–"></a>çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–</h4><p>æ­£åˆ™åŒ–è¿™ä¸ªæ¨¡å‹ï¼ˆå³é™åˆ¶å®ƒï¼‰ï¼šæ¨¡å‹æœ‰è¶Šå°‘çš„è‡ªç”±åº¦ï¼Œå°±è¶Šéš¾ä»¥æ‹Ÿåˆæ•°æ®ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™åŒ–ä¸€ä¸ªå¤šé¡¹å¼æ¨¡å‹ï¼Œä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯å‡å°‘å¤šé¡¹å¼çš„é˜¶æ•°ã€‚</p>
<p>å¯¹äºä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œæ­£åˆ™åŒ–çš„å…¸å‹å®ç°å°±æ˜¯çº¦æŸæ¨¡å‹ä¸­å‚æ•°çš„æƒé‡ã€‚</p>
<h5 id="å²­å›å½’ï¼ˆRidgeï¼‰"><a href="#å²­å›å½’ï¼ˆRidgeï¼‰" class="headerlink" title="å²­å›å½’ï¼ˆRidgeï¼‰"></a>å²­å›å½’ï¼ˆRidgeï¼‰</h5><p>å²­å›å½’ï¼ˆä¹Ÿç§°ä¸º Tikhonov æ­£åˆ™åŒ–ï¼‰æ˜¯çº¿æ€§å›å½’çš„æ­£åˆ™åŒ–ç‰ˆï¼šåœ¨æŸå¤±å‡½æ•°ä¸Šç›´æ¥åŠ ä¸Šä¸€ä¸ªæ­£åˆ™é¡¹ã€‚è¿™ä½¿å¾—å­¦ä¹ ç®—æ³•ä¸ä»…èƒ½å¤Ÿæ‹Ÿåˆæ•°æ®ï¼Œè€Œä¸”èƒ½å¤Ÿä½¿æ¨¡å‹çš„å‚æ•°æƒé‡å°½é‡çš„å°ã€‚æ³¨æ„åˆ°è¿™ä¸ªæ­£åˆ™é¡¹åªæœ‰åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ‰ä¼šè¢«åŠ åˆ°æŸå¤±å‡½æ•°ã€‚å½“å¾—åˆ°å®Œæˆè®­ç»ƒçš„æ¨¡å‹åï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨æ²¡æœ‰æ­£åˆ™åŒ–çš„æµ‹é‡æ–¹æ³•å»è¯„ä»·æ¨¡å‹çš„è¡¨ç°ã€‚</p>
<blockquote>
<p>æç¤º</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè®­ç»ƒè¿‡ç¨‹ä½¿ç”¨çš„æŸå¤±å‡½æ•°å’Œæµ‹è¯•è¿‡ç¨‹ä½¿ç”¨çš„è¯„ä»·å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚é™¤äº†æ­£åˆ™åŒ–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸åŒï¼šè®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°åº”è¯¥åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æ˜“äºæ±‚å¯¼ï¼Œè€Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè¯„ä»·å‡½æ•°æ›´åº”è¯¥æ¥è¿‘æœ€åçš„å®¢è§‚è¡¨ç°ã€‚ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼šåœ¨åˆ†ç±»è®­ç»ƒä¸­æˆ‘ä»¬ä½¿ç”¨å¯¹æ•°æŸå¤±ï¼ˆé©¬ä¸Šæˆ‘ä»¬ä¼šè®¨è®ºå®ƒï¼‰ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å´ä½¿ç”¨ç²¾ç¡®ç‡/å¬å›ç‡æ¥ä½œä¸ºå®ƒçš„è¯„ä»·å‡½æ•°ã€‚</p>
</blockquote>
<p>å²­å›å½’æŸå¤±å‡½æ•°ï¼š</p>
<p>$J(\theta)=MSE(\theta)+\alpha \frac{1}{2} \sum_{i=1}^{n}{\theta _i ^2}$</p>
<p>$\theta_0$æ˜¯æ²¡æœ‰è¢«æ­£åˆ™åŒ–çš„ï¼Œæ‰€ä»¥ç´¯åŠ ä»i=1å¼€å§‹ï¼Œè€Œä¸æ˜¯i=0å¼€å§‹ã€‚å¦‚æœå®šä¹‰wä½œä¸ºç‰¹å¾çš„æƒé‡å‘é‡ï¼ˆ$\theta_1$åˆ°$\theta_n$ï¼‰ï¼Œåˆ™æ­£åˆ™é¡¹å¯ä»¥ç®€å†™æˆ$\frac{1}{2}(||w||_2)^2$ ï¼Œ$||\cdot||_2$è¡¨ç¤º$l_2$èŒƒæ•°ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-17.PNG" alt="img"></p>
<h6 id="å°é—­æ–¹ç¨‹çš„è§£"><a href="#å°é—­æ–¹ç¨‹çš„è§£" class="headerlink" title="å°é—­æ–¹ç¨‹çš„è§£"></a>å°é—­æ–¹ç¨‹çš„è§£</h6><script type="math/tex; mode=display">\hat \theta=(X^T\cdot X+\alpha A)^{-1}\cdot X^T\cdot y</script><p>Aæ˜¯ä¸€ä¸ªé™¤äº†å·¦ä¸Šè§’æœ‰ä¸€ä¸ª0çš„nxnçš„å•ä½çŸ©é˜µï¼Œè¡¨ç¤ºåå·®$\theta_0â€‹$ä¸è¢«æ­£åˆ™åŒ–ã€‚</p>
<h6 id="éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"><a href="#éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£" class="headerlink" title="éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"></a>éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sgd_reg = SGDRegressor(penalty=<span class="string">"l2"</span>)</span><br><span class="line"><span class="comment"># penaltyå‚æ•°æŒ‡çš„æ˜¯æ­£åˆ™é¡¹çš„æƒ©ç½šç±»å‹ã€‚æŒ‡å®šâ€œl2â€è¡¨æ˜ä½ è¦åœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ ä¸€é¡¹ï¼šæƒé‡å‘é‡ l2 èŒƒæ•°å¹³æ–¹çš„ä¸€åŠï¼Œè¿™å°±æ˜¯ç®€å•çš„å²­å›å½’ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="Lassoå›å½’"><a href="#Lassoå›å½’" class="headerlink" title="Lassoå›å½’"></a>Lassoå›å½’</h5><p>Lasso å›å½’ï¼ˆä¹Ÿç§° Least Absolute Shrinkageï¼Œæˆ–è€… Selection Operator Regressionï¼‰æ˜¯å¦ä¸€ç§æ­£åˆ™åŒ–ç‰ˆçš„çº¿æ€§å›å½’ï¼šå°±åƒå²­å›å½’é‚£æ ·ï¼Œå®ƒä¹Ÿåœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ äº†ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œä½†æ˜¯å®ƒä½¿ç”¨æƒé‡å‘é‡çš„$l_1$ èŒƒæ•°è€Œä¸æ˜¯æƒé‡å‘é‡ $l_2$èŒƒæ•°å¹³æ–¹çš„ä¸€åŠã€‚</p>
<p>$J(\theta)=MSE(\theta)+\alpha \sum_{i=1}^{n}{|\theta _i|}$</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-18.PNG" alt="img"></p>
<p>Lasso å›å½’çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å®ƒå€¾å‘äºå®Œå…¨æ¶ˆé™¤æœ€ä¸é‡è¦çš„ç‰¹å¾çš„æƒé‡ï¼ˆå³å°†å®ƒä»¬è®¾ç½®ä¸ºé›¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œå³å›¾ä¸­çš„è™šçº¿æ‰€ç¤º$\alpha=10^{-7}$ï¼Œæ›²çº¿çœ‹èµ·æ¥åƒä¸€æ¡äºŒæ¬¡æ›²çº¿ï¼Œè€Œä¸”å‡ ä¹æ˜¯çº¿æ€§çš„ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„é«˜é˜¶å¤šé¡¹ç‰¹å¾éƒ½è¢«è®¾ç½®ä¸ºé›¶ã€‚æ¢å¥è¯è¯´ï¼ŒLassoå›å½’è‡ªåŠ¨çš„è¿›è¡Œç‰¹å¾é€‰æ‹©åŒæ—¶è¾“å‡ºä¸€ä¸ªç¨€ç–æ¨¡å‹ï¼ˆå³ï¼Œå…·æœ‰å¾ˆå°‘çš„éé›¶æƒé‡ï¼‰ã€‚</p>
<p>Lasso å›å½’å­æ¢¯åº¦å‘é‡:</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-93eea6b5c197bbc8d7be8b4c14e9f8f3.gif" alt="g(\theta,J)=\nabla_{\theta}MSE(\theta)+ \alpha{\left(\begin{matrix} sign(\theta_1)\\ sign(\theta_2)\\ \vdots \\ sign(\theta_n)\\ \end{matrix}\right)}\ where\ sign(\theta_i)= \begin{cases} -1, &amp;\theta_i&lt;0 \\ 0, &amp;\theta_i=0 \\ +1,&amp;\theta_i&gt;0 \\ \end{cases}"></p>
<h5 id="å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰"><a href="#å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰" class="headerlink" title="å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰"></a>å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰</h5><p>å¼¹æ€§ç½‘ç»œä»‹äº Ridge å›å½’å’Œ Lasso å›å½’ä¹‹é—´ã€‚å®ƒçš„æ­£åˆ™é¡¹æ˜¯ Ridge å›å½’å’Œ Lasso å›å½’æ­£åˆ™é¡¹çš„ç®€å•æ··åˆï¼ŒåŒæ—¶ä½ å¯ä»¥æ§åˆ¶å®ƒä»¬çš„æ··åˆç‡ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-4b43b0aee35624cd95b910189b3dc231.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-4b43b0aee35624cd95b910189b3dc231.gif" alt="r"></a></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-e4da079f692fe35778bbdf1fdf120d99.gif" alt="J(\theta)=MSE(\theta)+r\alpha\sum\limits_{i=1}n\left|\theta_i \right|+\frac{1-r}{2}\alpha\sum\limits_{i=1}n\theta_i^2"></p>
<h5 id="æ—©èµ·åœæ­¢æ³•ï¼ˆEarly-Stoppingï¼‰"><a href="#æ—©èµ·åœæ­¢æ³•ï¼ˆEarly-Stoppingï¼‰" class="headerlink" title="æ—©èµ·åœæ­¢æ³•ï¼ˆEarly Stoppingï¼‰"></a>æ—©èµ·åœæ­¢æ³•ï¼ˆEarly Stoppingï¼‰</h5><p>å¯¹äºè¿­ä»£å­¦ä¹ ç®—æ³•ï¼Œæœ‰ä¸€ç§éå¸¸ç‰¹æ®Šçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå°±åƒæ¢¯åº¦ä¸‹é™åœ¨éªŒè¯é”™è¯¯è¾¾åˆ°æœ€å°å€¼æ—¶ç«‹å³åœæ­¢è®­ç»ƒé‚£æ ·ã€‚æˆ‘ä»¬ç§°ä¸ºæ—©æœŸåœæ­¢æ³•ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-20.PNG" alt="img"></p>
<h5 id="é€»è¾‘å›å½’"><a href="#é€»è¾‘å›å½’" class="headerlink" title="é€»è¾‘å›å½’"></a>é€»è¾‘å›å½’</h5><blockquote>
<p>ä¸€äº›å›å½’ç®—æ³•ä¹Ÿå¯ä»¥ç”¨äºåˆ†ç±»ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ Logistic å›å½’ï¼ˆä¹Ÿç§°ä¸º Logit å›å½’ï¼‰é€šå¸¸ç”¨äºä¼°è®¡ä¸€ä¸ªå®ä¾‹å±äºæŸä¸ªç‰¹å®šç±»åˆ«çš„æ¦‚ç‡ã€‚ è‹¥ä¼°è®¡çš„æ¦‚ç‡å¤§äº 50%ï¼Œåˆ™æ¨¡å‹é¢„æµ‹è¿™ä¸ªå®ä¾‹å±äºå½“å‰ç±»ï¼ˆç§°ä¸ºæ­£ç±»ï¼Œæ ‡è®°ä¸ºâ€œ1â€ï¼‰ï¼Œåä¹‹é¢„æµ‹å®ƒä¸å±äºå½“å‰ç±»ï¼ˆå³å±äºè´Ÿç±» ï¼Œæ ‡è®°ä¸ºâ€œ0â€ï¼‰ã€‚ è¿™æ ·ä¾¿æˆä¸ºäº†ä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨ã€‚</p>
</blockquote>
<p>é€»è¾‘å›å½’æ¨¡å‹çš„æ¦‚ç‡ä¼°è®¡ï¼š</p>
<p>$\hat p=h_\theta=\sigma(\theta^T\cdot x)$</p>
<p>å…¶ä¸­$\sigma()$æ˜¯Logisticå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªsigmoidå‡½æ•°ï¼Œè¾“å‡ºæ˜¯ä»‹äº0åˆ°1ä¹‹é—´çš„æ•°å­—ã€‚</p>
<p>é€»è¾‘å‡½æ•°ï¼š</p>
<p>$\sigma(t)=\frac{1}{1+\exp(-t)}$</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-21.PNG" alt="img"></p>
<p>é€»è¾‘å›å½’é¢„æµ‹æ¨¡å‹ï¼š</p>
<p>$\hat y = \left\{ \begin{array}{cl} 0,&amp; \hat p &lt; 0.5 \\ 1,&amp; \hat p \geq 0.5 \end{array} \right.$</p>
<h6 id="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"><a href="#è®­ç»ƒå’ŒæŸå¤±å‡½æ•°" class="headerlink" title="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"></a>è®­ç»ƒå’ŒæŸå¤±å‡½æ•°</h6><p>å•ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°ï¼š</p>
<p>$c(\theta)=\left \{ \begin{array}{lc} -\log(\hat p), &amp;y=1 \\ -\log(1-\hat p),&amp; y=0 \end{array}\right.$</p>
<p>æ•´ä¸ªè®­ç»ƒé›†çš„æŸå¤±å‡½æ•°åªæ˜¯æ‰€æœ‰è®­ç»ƒå®ä¾‹çš„å¹³å‡å€¼ã€‚</p>
<p>é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°ï¼š<br>$J (\theta) = -\frac{1}{m} \sum_{i=1}^{m}[y^{(i)}log(\hat p^{(i)})+(1-y^{(i)})log(1-\hat p^{(i)})]$</p>
<p>ä½†æ˜¯è¿™ä¸ªæŸå¤±å‡½æ•°å¯¹äºæ±‚è§£æœ€å°åŒ–æŸå¤±å‡½æ•°çš„$\thetaæ˜¯æ²¡æœ‰å…¬å¼è§£çš„ï¼ˆæ²¡æœ‰ç­‰ä»·çš„æ­£æ€æ–¹ç¨‹ï¼‰ï¼Œä½†è¯¥æŸå¤±å‡½æ•°æ˜¯å‡¸çš„ï¼Œæ‰€ä»¥æ¢¯åº¦ä¸‹é™ï¼ˆæˆ–ä»»ä½•å…¶ä»–ä¼˜åŒ–ç®—æ³•ï¼‰ä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°å…¨å±€æœ€å°å€¼ã€‚</p>
<p>é€»è¾‘å›å½’æŸå¤±å‡½æ•°çš„åå¯¼æ•°ï¼š</p>
<script type="math/tex; mode=display">\frac{\partial}{\partial \theta_j}J(\theta_J)=\frac{1}{m}\sum_{i=1}^{m}(\sigma({\theta^T\cdot x^{(i)})-y^{(i)})x_j^{}(i)}</script><h6 id="å†³ç­–è¾¹ç•Œ"><a href="#å†³ç­–è¾¹ç•Œ" class="headerlink" title="å†³ç­–è¾¹ç•Œ"></a>å†³ç­–è¾¹ç•Œ</h6><p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-23.PNG" alt="img"></p>
<p>æ¦‚ç‡=0.5çš„åˆ†ç•Œçº¿</p>
<p>é€»è¾‘å›å½’æ¨¡å‹ä¹Ÿå¯ä»¥ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8524eb1789cf2093cfccc4c297138c7f.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8524eb1789cf2093cfccc4c297138c7f.gif" alt="\ell_1"></a> æˆ–è€… <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" alt="\ell_2"></a> æƒ©ç½šä½¿ç”¨è¿›è¡Œæ­£åˆ™åŒ–ã€‚Scikit-Learn é»˜è®¤æ·»åŠ äº† <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" alt="\ell_2"></a> æƒ©ç½šã€‚</p>
<h5 id="Softmaxå›å½’"><a href="#Softmaxå›å½’" class="headerlink" title="Softmaxå›å½’"></a>Softmaxå›å½’</h5><p>Logistic å›å½’æ¨¡å‹å¯ä»¥ç›´æ¥æ¨å¹¿åˆ°æ”¯æŒå¤šç±»åˆ«åˆ†ç±»ï¼Œä¸å¿…ç»„åˆå’Œè®­ç»ƒå¤šä¸ªäºŒåˆ†ç±»å™¨ï¼Œ å…¶ç§°ä¸º Softmax å›å½’æˆ–å¤šç±»åˆ« Logistic å›å½’ã€‚</p>
<p>å½“ç»™å®šä¸€ä¸ªå®ä¾‹ $x$ æ—¶ï¼ŒSoftmax å›å½’æ¨¡å‹é¦–å…ˆè®¡ç®— $k$ ç±»çš„åˆ†æ•°ï¼Œç„¶$s_k(x)$ åå°†åˆ†æ•°åº”ç”¨åœ¨<code>Softmax</code>å‡½æ•°ï¼ˆä¹Ÿç§°ä¸ºå½’ä¸€åŒ–æŒ‡æ•°ï¼‰ä¸Šï¼Œä¼°è®¡å‡ºæ¯ç±»çš„æ¦‚ç‡ã€‚</p>
<p>kç±»çš„Softmaxå¾—åˆ†ï¼š</p>
<p>$s_k(x)=\theta^T\cdot x$</p>
<blockquote>
<p>æ¯ä¸ªç±»éƒ½æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„å‚æ•°å‘é‡ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9f888eddb683fe5f80f87f44bd727b08.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9f888eddb683fe5f80f87f44bd727b08.gif" alt="\theta_k"></a>ã€‚ æ‰€æœ‰è¿™äº›å‘é‡é€šå¸¸ä½œä¸ºè¡Œæ”¾åœ¨å‚æ•°çŸ©é˜µ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-b9dce96eb3d5a71b28f9f198c28d2d1b.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-b9dce96eb3d5a71b28f9f198c28d2d1b.gif" alt="\Theta"></a> ä¸­ã€‚</p>
</blockquote>
<p>Softmaxå‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
\hat p_k=\sigma(s(x))_k=\frac{\exp(s_k(x))}{\sum_{j=1}^{K}{\exp(s_j(x))}}</script><p>$K$ è¡¨ç¤ºç±»çš„æ€»æ•°</p>
<p>Softmax å›å½’æ¨¡å‹åˆ†ç±»å™¨é¢„æµ‹ç»“æœ:</p>
<p>$\hat y=argmax\  \sigma(s(x))_k=argmax\ s_k(x) = argmax \ (\theta_k^T\cdot x)$</p>
<blockquote>
<p>Softmax å›å½’åˆ†ç±»å™¨ä¸€æ¬¡åªèƒ½é¢„æµ‹ä¸€ä¸ªç±»ï¼ˆå³å®ƒæ˜¯å¤šç±»çš„ï¼Œä½†ä¸æ˜¯å¤šè¾“å‡ºçš„ï¼‰ï¼Œå› æ­¤å®ƒåªèƒ½ç”¨äºåˆ¤æ–­äº’æ–¥çš„ç±»åˆ«ï¼Œå¦‚ä¸åŒç±»å‹çš„æ¤ç‰©ã€‚ ä¸èƒ½ç”¨å®ƒæ¥è¯†åˆ«ä¸€å¼ ç…§ç‰‡ä¸­çš„å¤šä¸ªäººã€‚</p>
</blockquote>
<h6 id="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°-1"><a href="#è®­ç»ƒå’ŒæŸå¤±å‡½æ•°-1" class="headerlink" title="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"></a>è®­ç»ƒå’ŒæŸå¤±å‡½æ•°</h6><p>ç›®æ ‡æ˜¯å»ºç«‹ä¸€ä¸ªæ¨¡å‹åœ¨ç›®æ ‡ç±»åˆ«ä¸Šæœ‰ç€è¾ƒé«˜çš„æ¦‚ç‡ï¼ˆå› æ­¤å…¶ä»–ç±»åˆ«çš„æ¦‚ç‡è¾ƒä½ï¼‰</p>
<p>äº¤å‰ç†µ:</p>
<script type="math/tex; mode=display">
J (\theta) = -\frac{1}{m} \sum_{i=1}^{m}\sum_{k=1}^{K}y^{(i)}_klog(\hat p^{(i)}_k)</script><blockquote>
<p>äº¤å‰ç†µæºäºä¿¡æ¯è®ºã€‚</p>
<p>å‡è®¾ä½ æƒ³è¦é«˜æ•ˆåœ°ä¼ è¾“æ¯å¤©çš„å¤©æ°”ä¿¡æ¯ã€‚å¦‚æœæœ‰å…«ä¸ªé€‰é¡¹ï¼ˆæ™´å¤©ï¼Œé›¨å¤©ç­‰ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨3ä½å¯¹æ¯ä¸ªé€‰é¡¹è¿›è¡Œç¼–ç ï¼Œå› ä¸º <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-5f344a952e29992de54b8cfe645b2d5b.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-5f344a952e29992de54b8cfe645b2d5b.gif" alt="2^3=8"></a>ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ è®¤ä¸ºå‡ ä¹æ¯å¤©éƒ½æ˜¯æ™´å¤©ï¼Œæ›´é«˜æ•ˆçš„ç¼–ç â€œæ™´å¤©â€çš„æ–¹å¼æ˜¯ï¼šåªç”¨ä¸€ä½ï¼ˆ0ï¼‰ã€‚å‰©ä¸‹çš„ä¸ƒé¡¹ä½¿ç”¨å››ä½ï¼ˆä» 1 å¼€å§‹ï¼‰ã€‚äº¤å‰ç†µåº¦é‡æ¯ä¸ªé€‰é¡¹å®é™…å‘é€çš„å¹³å‡æ¯”ç‰¹æ•°ã€‚ å¦‚æœä½ å¯¹å¤©æ°”çš„å‡è®¾æ˜¯å®Œç¾çš„ï¼Œäº¤å‰ç†µå°±ç­‰äºå¤©æ°”æœ¬èº«çš„ç†µï¼ˆå³å…¶å†…éƒ¨çš„ä¸ç¡®å®šæ€§ï¼‰ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ çš„å‡è®¾æ˜¯é”™è¯¯çš„ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœç»å¸¸ä¸‹é›¨ï¼‰äº¤å‰ç†µå°†ä¼šæ›´å¤§ï¼Œç§°ä¸º Kullback-Leibler æ•£åº¦ï¼ˆKL æ•£åº¦ï¼‰ã€‚</p>
<p>ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-83878c91171338902e0fe0fb97a8c47a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-83878c91171338902e0fe0fb97a8c47a.gif" alt="p"></a> å’Œ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7694f4a66316e53c8cdd9d9954bd611d.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7694f4a66316e53c8cdd9d9954bd611d.gif" alt="q"></a> ä¹‹é—´çš„äº¤å‰ç†µå®šä¹‰ä¸ºï¼š<a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-6bc68f603b52e51645b4bbd318f8cdfe.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-6bc68f603b52e51645b4bbd318f8cdfe.gif" alt="H(p,q)=-\sum_xp(x)\log q(x)"></a>ï¼ˆåˆ†å¸ƒè‡³å°‘æ˜¯ç¦»æ•£çš„ï¼‰</p>
</blockquote>
<p>$k$ ç±»äº¤å‰ç†µçš„æ¢¯åº¦å‘é‡:</p>
<p>$\nabla_{\theta_k} J (\Theta) = -\frac{1}{m} \sum_{i=1}^{m}(p^{(i)}_k - y^{(i)}_k )x^{(i)})$</p>
<h4 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h4><ol>
<li><p>å¦‚æœä½ æœ‰ä¸€ä¸ªæ•°ç™¾ä¸‡ç‰¹å¾çš„è®­ç»ƒé›†ï¼Œä½ åº”è¯¥é€‰æ‹©å“ªç§çº¿æ€§å›å½’è®­ç»ƒç®—æ³•ï¼Ÿ</p>
<blockquote>
<p>mini-batch GDæˆ–è€…SGD</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ è®­ç»ƒé›†ä¸­ç‰¹å¾çš„æ•°å€¼å°ºåº¦ï¼ˆscaleï¼‰æœ‰ç€éå¸¸å¤§çš„å·®å¼‚ï¼Œå“ªç§ç®—æ³•ä¼šå—åˆ°å½±å“ï¼Ÿæœ‰å¤šå¤§çš„å½±å“ï¼Ÿå¯¹äºè¿™äº›å½±å“ä½ å¯ä»¥åšä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>å¦‚æœè®­ç»ƒé›†çš„ç‰¹å¾å°ºåº¦å·®è·å¤ªå¤§ï¼ŒæŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿ä¼šå‘ˆæ¤­åœ†çŠ¶ï¼Œåˆ©ç”¨æ¢¯åº¦ä¸‹é™æ¥æ±‚æœ€ä¼˜è§£çš„è¿‡ç¨‹ä¸­ä¼šå¾ˆéš¾æ”¶æ•›ï¼Œæ¢¯åº¦æ–¹å‘å˜åŒ–å¾ˆå‰§çƒˆï¼Œæ”¶æ•›é€Ÿåº¦å¾ˆæ…¢ï¼Œå¹¶ä¸”å¯èƒ½ä¸ä¼šæ”¶æ•›åˆ°æœ€ä¼˜ç‚¹ã€‚</p>
<p>å¯¹æ•°æ®è¿›è¡Œç¼©æ”¾ï¼ˆStandardScalerï¼‰ï¼Œå½’ä¸€åŒ–</p>
</blockquote>
</li>
<li><p>è®­ç»ƒ Logistic å›å½’æ¨¡å‹æ—¶ï¼Œæ¢¯åº¦ä¸‹é™æ˜¯å¦ä¼šé™·å…¥å±€éƒ¨æœ€ä½ç‚¹ï¼Ÿ</p>
<blockquote>
<p>ä¸ä¼šï¼Œå…¶æŸå¤±å‡½æ•°æ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨æœ‰è¶³å¤Ÿçš„è®­ç»ƒæ—¶é—´ä¸‹ï¼Œæ˜¯å¦æ‰€æœ‰çš„æ¢¯åº¦ä¸‹é™éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„æ¨¡å‹å‚æ•°ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼ŒSGDå› ä¸ºéšæœºæ€§ï¼Œè¾¾åˆ°æŸå¤±å‡½æ•°åªä¼šå‘ˆç°å¤§ä½“ä¸‹é™è¶‹åŠ¿ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¼šéå¸¸é è¿‘æœ€å°å€¼ï¼Œä½†åªä¼šåœ¨é™„è¿‘æ‘†åŠ¨ã€‚</p>
<p>mini-batch GDä¹Ÿä¼šæœ‰ä¸€å®šçš„æ‘†åŠ¨ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼Œç”»å‡ºæ¯ä¸€ä»£çš„éªŒè¯è¯¯å·®ã€‚å½“ä½ å‘ç°éªŒè¯è¯¯å·®ä¸€ç›´å¢å¤§ï¼Œæ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>æ¨¡å‹å‘æ•£ï¼Œéš¾ä»¥æ”¶æ•›ã€‚å‡å°å­¦ä¹ ç‡</p>
<p>æˆ–è€…æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œéœ€è¦æ—©åœ</p>
</blockquote>
</li>
<li><p>å½“éªŒè¯è¯¯å·®å‡é«˜æ—¶ï¼Œç«‹å³åœæ­¢å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ˜¯å¦æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼Œå› ä¸ºmini-batchçš„æŸå¤±å‡½æ•°éšæ—¶é—´å¤§ä½“ä¸‹é™ï¼Œä½†ä¼šæœ‰ä¸€å®šæ³¢åŠ¨ã€‚</p>
<p>æ›´å¥½çš„é€‰æ‹©æ˜¯å®šæœŸä¿å­˜æ¨¡å‹ï¼Œå¦‚æœç»è¿‡å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»ç„¶æ²¡æœ‰æ”¹è¿›çš„è¯ï¼Œå¯ä»¥æ¢å¤åˆ°ä¿å­˜çš„æœ€å¥½æ¨¡å‹ã€‚</p>
</blockquote>
</li>
<li><p>å“ªä¸ªæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆåœ¨æˆ‘ä»¬è®¨è®ºçš„é‚£äº›ç®—æ³•ä¸­ï¼‰å¯ä»¥æœ€å¿«åˆ°è¾¾è§£çš„é™„è¿‘ï¼Ÿå“ªä¸ªçš„ç¡®å®ä¼šæ”¶æ•›ï¼Ÿæ€ä¹ˆä½¿å…¶ä»–ç®—æ³•ä¹Ÿæ”¶æ•›ï¼Ÿ</p>
<blockquote>
<p>SGDæœ€å¿«</p>
<p>æ¢¯åº¦ä¸‹é™æ³•</p>
<p>é€æ­¥å‡å°å­¦ä¹ ç‡</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨å¤šé¡¹å¼å›å½’ï¼Œç”»å‡ºå­¦ä¹ æ›²çº¿ï¼Œåœ¨å›¾ä¸Šå‘ç°å­¦ä¹ è¯¯å·®å’ŒéªŒè¯è¯¯å·®ä¹‹é—´æœ‰ç€å¾ˆå¤§çš„é—´éš™ã€‚è¿™è¡¨ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæœ‰å“ªä¸‰ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>å¦‚æœå­¦ä¹ è¯¯å·®æ¯”éªŒè¯è¯¯å·®å°å¾ˆå¤šï¼Œè¯´æ˜å‘ç”Ÿäº†è¿‡æ‹Ÿåˆã€‚</p>
<p>å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–ï¼ˆå²­å›å½’ï¼ŒLassoå›å½’å’Œå¼¹æ€§ç½‘ç»œï¼‰è¿™ä¸ªæ¨¡å‹é™ä½è¿‡æ‹Ÿåˆç¨‹åº¦ã€‚</p>
<p>ä¹Ÿå¯ä»¥æä¾›æ›´å¤šçš„è®­ç»ƒæ•°æ®ã€‚</p>
<p>æˆ–è€…æ”¹å˜æ¨¡å‹ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨å²­å›å½’ï¼Œå¹¶å‘ç°è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®éƒ½å¾ˆé«˜ï¼Œå¹¶ä¸”å‡ ä¹ç›¸ç­‰ã€‚ä½ çš„æ¨¡å‹è¡¨ç°æ˜¯é«˜åå·®è¿˜æ˜¯é«˜æ–¹å·®ï¼Ÿè¿™æ—¶ä½ åº”è¯¥å¢å¤§æ­£åˆ™åŒ–å‚æ•° <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7b7f9dbfea05c83784f8b85149852f08.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7b7f9dbfea05c83784f8b85149852f08.gif" alt="\alpha"></a>ï¼Œè¿˜æ˜¯é™ä½å®ƒï¼Ÿ</p>
<blockquote>
<p>é«˜åå·®ï¼Œåº”è¯¥å‡å°$\alpha$ã€‚</p>
</blockquote>
</li>
<li><p>ä½ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼š</p>
</li>
</ol>
<ul>
<li><p>ä½¿ç”¨å²­å›å½’ä»£æ›¿çº¿æ€§å›å½’ï¼Ÿ</p>
<blockquote>
<p>æ¨¡å‹æœ‰æ­£åˆ™åŒ–çš„æ—¶å€™ä¼šæ¯”æ²¡æœ‰æ­£åˆ™åŒ–çš„æ—¶å€™åˆæ›´å¥½çš„æ³›åŒ–æ€§èƒ½ï¼Œå²­å›å½’å°±æ˜¯å¯¹æ¨¡å‹çš„å‚æ•°åšäº†æ­£åˆ™åŒ–ï¼Œçº¦æŸå…¶å¹…å€¼å˜åŒ–ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™ä¼šå®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆã€‚</p>
</blockquote>
</li>
<li><p>Lasso å›å½’ä»£æ›¿å²­å›å½’ï¼Ÿ</p>
<blockquote>
<p>å½“ç‰¹å¾ä»…æœ‰å°‘æ•°æ˜¯çœŸæ­£æœ‰ç”¨çš„æ—¶å€™ï¼Œå¯¹é‡è¦çš„ç‰¹å¾è¿›è¡Œé€‰æ‹©ï¼Œå°†æ— ç”¨ç‰¹å¾çš„æƒé‡é™ä¸ºé›¶ï¼Œå¢åŠ æ¨¡å‹çš„å¯è§£é‡Šæ€§ã€‚</p>
</blockquote>
</li>
<li><p>å¼¹æ€§ç½‘ç»œä»£æ›¿ Lasso å›å½’ï¼Ÿ</p>
<blockquote>
<p>å½“ç‰¹å¾æ•°é‡æ¯”æ ·æœ¬çš„æ•°é‡å¤§çš„æ—¶å€™ï¼Œæˆ–è€…ç‰¹å¾ä¹‹é—´æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§æ—¶ï¼ŒLasso å¯èƒ½ä¼šè¡¨ç°çš„ä¸è§„å¾‹ã€‚</p>
</blockquote>
</li>
</ul>
<ol>
<li><p>å‡è®¾ä½ æƒ³åˆ¤æ–­ä¸€å‰¯å›¾ç‰‡æ˜¯å®¤å†…è¿˜æ˜¯å®¤å¤–ï¼Œç™½å¤©è¿˜æ˜¯æ™šä¸Šã€‚ä½ åº”è¯¥é€‰æ‹©äºŒä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨ï¼Œè¿˜æ˜¯ä¸€ä¸ª Softmax åˆ†ç±»å™¨ï¼Ÿ</p>
<blockquote>
<p>ä¸¤ä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨</p>
</blockquote>
</li>
<li><p>åœ¨ Softmax å›å½’ä¸Šåº”ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æ—©æœŸåœæ­¢æ³•ï¼ˆä¸ä½¿ç”¨ Scikit-Learnï¼‰ã€‚</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="ç¬¬05ç« -æ”¯æŒå‘é‡æœº"><a href="#ç¬¬05ç« -æ”¯æŒå‘é‡æœº" class="headerlink" title="ç¬¬05ç«  æ”¯æŒå‘é‡æœº"></a>ç¬¬05ç«  æ”¯æŒå‘é‡æœº</h2><p>èƒ½å¤Ÿåšçº¿æ€§æˆ–è€…éçº¿æ€§çš„åˆ†ç±»ï¼Œå›å½’ï¼Œç”šè‡³å¼‚å¸¸å€¼æ£€æµ‹ã€‚SVM ç‰¹åˆ«é€‚åˆåº”ç”¨äºå¤æ‚ä½†ä¸­å°è§„æ¨¡æ•°æ®é›†çš„åˆ†ç±»é—®é¢˜ã€‚</p>
<h4 id="çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"><a href="#çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»" class="headerlink" title="çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"></a>çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»</h4><p>SVM åˆ†ç±»å™¨çš„åˆ¤å®šè¾¹ç•Œå®çº¿ï¼Œä¸ä»…åˆ†å¼€äº†ä¸¤ç§ç±»åˆ«ï¼Œè€Œä¸”è¿˜å°½å¯èƒ½åœ°è¿œç¦»äº†æœ€é è¿‘çš„è®­ç»ƒæ•°æ®ç‚¹ã€‚ï¼ˆæœ€å¤§é—´éš”åˆ†ç±»ï¼‰</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/5-1.jpg" alt="img"></p>
<p>åˆ¤å®šè¾¹ç•Œæ˜¯ç”±ä½äºâ€œè¡—é“â€è¾¹ç¼˜çš„æ ·æœ¬ç‚¹ç¡®å®šçš„ï¼Œè¿™äº›æ ·æœ¬ç‚¹è¢«ç§°ä¸ºâ€œæ”¯æŒå‘é‡â€</p>
<h5 id="è½¯é—´éš”åˆ†ç±»"><a href="#è½¯é—´éš”åˆ†ç±»" class="headerlink" title="è½¯é—´éš”åˆ†ç±»"></a>è½¯é—´éš”åˆ†ç±»</h5><p>ç¡¬é—´éš”åˆ†ç±»æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œ</p>
<ol>
<li>åªå¯¹çº¿æ€§å¯åˆ†çš„æ•°æ®èµ·ä½œç”¨.</li>
<li>å¯¹å¼‚å¸¸ç‚¹æ•æ„Ÿã€‚</li>
</ol>
<p>åœ¨ Scikit-Learn åº“çš„ SVM ç±»ï¼Œå¯ä»¥ç”¨<code>C</code>è¶…å‚æ•°ï¼ˆæƒ©ç½šç³»æ•°ï¼‰æ¥æ§åˆ¶è¿™ç§å¹³è¡¡ï¼šè¾ƒå°çš„<code>C</code>ä¼šå¯¼è‡´æ›´å®½çš„â€œè¡—é“â€ï¼Œä½†æ›´å¤šçš„é—´éš”è¿è§„ã€‚</p>
<blockquote>
<p>SVM æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œå¯ä»¥å°è¯•é€šè¿‡å‡å°è¶…å‚æ•°<code>C</code>å»è°ƒæ•´</p>
</blockquote>
<h4 id="éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"><a href="#éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»" class="headerlink" title="éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"></a>éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»</h4><h5 id="å¢åŠ æ›´å¤šçš„ç‰¹å¾"><a href="#å¢åŠ æ›´å¤šçš„ç‰¹å¾" class="headerlink" title="å¢åŠ æ›´å¤šçš„ç‰¹å¾"></a>å¢åŠ æ›´å¤šçš„ç‰¹å¾</h5><p>é€šè¿‡ Scikit-Learnï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæµæ°´çº¿ï¼ˆPipelineï¼‰å»åŒ…å«å¤šé¡¹å¼ç‰¹å¾ï¼ˆPolynomialFeaturesï¼‰å˜æ¢ï¼Œç„¶åStandardScaler.</p>
<h5 id="å¤šé¡¹å¼æ ¸"><a href="#å¤šé¡¹å¼æ ¸" class="headerlink" title="å¤šé¡¹å¼æ ¸"></a>å¤šé¡¹å¼æ ¸</h5><p>æ·»åŠ å¤šé¡¹å¼ç‰¹å¾ä¼šï¼šå¤§é‡ç‰¹å¾å¯¼è‡´çš„ç»„åˆçˆ†ç‚¸</p>
<h5 id="å¢åŠ ç›¸ä¼¼ç‰¹å¾"><a href="#å¢åŠ ç›¸ä¼¼ç‰¹å¾" class="headerlink" title="å¢åŠ ç›¸ä¼¼ç‰¹å¾"></a>å¢åŠ ç›¸ä¼¼ç‰¹å¾</h5><p>ä½¿ç”¨ç›¸ä¼¼å‡½æ•°ï¼ˆsimilarity funtionï¼‰è®¡ç®—æ¯ä¸ªæ ·æœ¬ä¸ç‰¹å®šåœ°æ ‡ï¼ˆlandmarkï¼‰çš„ç›¸ä¼¼åº¦ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªç›¸ä¼¼å‡½æ•°ï¼Œå³<strong>é«˜æ–¯å¾„å‘åŸºå‡½æ•°ï¼ˆGaussian Radial Basis Functionï¼ŒRBFï¼‰</strong>ï¼Œè®¾ç½®<code>Î³ = 0.3</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8b908429a5b5ee2e519f8caa16f82ee1.gif" alt="\phi_{\gamma}(x, \ell) = exp(-\gamma \|x - \ell \|^2)"></p>
<p>æ˜¯ä¸ªä» 0 åˆ° 1 çš„é’Ÿå‹å‡½æ•°ã€‚</p>
<h5 id="é«˜æ–¯-RBF-æ ¸"><a href="#é«˜æ–¯-RBF-æ ¸" class="headerlink" title="é«˜æ–¯ RBF æ ¸"></a>é«˜æ–¯ RBF æ ¸</h5><p>ç›¸ä¼¼ç‰¹å¾æ³•åœ¨æ‰€æœ‰é¢å¤–ç‰¹å¾ä¸Šçš„è®¡ç®—æˆæœ¬å¯èƒ½å¾ˆé«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡çš„è®­ç»ƒé›†ä¸Šã€‚</p>
<h5 id="è®¡ç®—å¤æ‚æ€§"><a href="#è®¡ç®—å¤æ‚æ€§" class="headerlink" title="è®¡ç®—å¤æ‚æ€§"></a>è®¡ç®—å¤æ‚æ€§</h5><p><code>LinearSVC</code>ç±»åŸºäº<code>liblinear</code>åº“ï¼Œå®ƒå®ç°äº†çº¿æ€§ SVM çš„ä¼˜åŒ–ç®—æ³•ã€‚å®ƒå¹¶ä¸æ”¯æŒæ ¸æŠ€å·§ï¼Œä½†æ˜¯å®ƒæ ·æœ¬å’Œç‰¹å¾çš„æ•°é‡å‡ ä¹æ˜¯çº¿æ€§çš„ï¼šè®­ç»ƒæ—¶é—´å¤æ‚åº¦å¤§çº¦ä¸º<code>O(m Ã— n)</code>ã€‚</p>
<p>SVC ç±»åŸºäº<code>libsvm</code>åº“ï¼Œå®ƒå®ç°äº†æ”¯æŒæ ¸æŠ€å·§çš„ç®—æ³•ã€‚è®­ç»ƒæ—¶é—´å¤æ‚åº¦é€šå¸¸ä»‹<code>äºO(m^2 Ã— n)</code>å’Œ<code>O(m^3 Ã— n)</code>ä¹‹é—´ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/tb-5-1.jpg" alt="img"></p>
<h4 id="SVMå›å½’"><a href="#SVMå›å½’" class="headerlink" title="SVMå›å½’"></a>SVMå›å½’</h4><p>SVM å›å½’ä»»åŠ¡æ˜¯é™åˆ¶é—´éš”è¿è§„æƒ…å†µä¸‹ï¼Œå°½é‡æ”¾ç½®æ›´å¤šçš„æ ·æœ¬åœ¨â€œè¡—é“â€ä¸Šã€‚â€œè¡—é“â€çš„å®½åº¦ç”±è¶…å‚æ•°<code>Ïµ</code>æ§åˆ¶ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ Scikit-Learn çš„<code>LinearSVR</code>ç±»å»å®ç°çº¿æ€§ SVM å›å½’ã€‚</p>
<p>å¤„ç†éçº¿æ€§å›å½’ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨æ ¸åŒ–çš„ SVM æ¨¡å‹ã€‚</p>
<blockquote>
<p>LinearSVRæ²¡æœ‰support_å±æ€§</p>
</blockquote>
<h4 id="èƒŒåæœºåˆ¶"><a href="#èƒŒåæœºåˆ¶" class="headerlink" title="èƒŒåæœºåˆ¶"></a>èƒŒåæœºåˆ¶</h4><p>é¦–å…ˆï¼Œå…³äºç¬¦å·çš„çº¦å®šï¼šåœ¨ç¬¬ 4 ç« ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ¨¡å‹å‚æ•°æ”¾åœ¨ä¸€ä¸ªçŸ¢é‡<code>Î¸</code>é‡Œï¼ŒåŒ…æ‹¬åç½®é¡¹<code>Î¸0</code>ï¼Œ<code>Î¸1</code>åˆ°<code>Î¸n</code>çš„è¾“å…¥ç‰¹å¾æƒé‡ï¼Œå’Œå¢åŠ ä¸€ä¸ªåå·®è¾“å…¥<code>x0 = 1</code>åˆ°æ‰€æœ‰æ ·æœ¬ã€‚</p>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¬¦å·çº¦å®šï¼Œåœ¨å¤„ç† SVM ä¸Šï¼Œè¿™æ›´æ–¹ä¾¿ï¼Œä¹Ÿæ›´å¸¸è§ï¼š<strong>åç½®é¡¹è¢«å‘½åä¸ºbï¼Œç‰¹å¾æƒé‡å‘é‡è¢«ç§°ä¸ºw</strong>ï¼Œåœ¨è¾“å…¥ç‰¹å¾å‘é‡ä¸­ä¸å†æ·»åŠ åç½®ç‰¹å¾ã€‚</p>
<h5 id="å†³ç­–å‡½æ•°å’Œé¢„æµ‹"><a href="#å†³ç­–å‡½æ•°å’Œé¢„æµ‹" class="headerlink" title="å†³ç­–å‡½æ•°å’Œé¢„æµ‹"></a>å†³ç­–å‡½æ•°å’Œé¢„æµ‹</h5><p>çº¿æ€§ SVM åˆ†ç±»å™¨é€šè¿‡ç®€å•åœ°è®¡ç®—å†³ç­–å‡½æ•° <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7781983bd977537b3c5d060e217ea82a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7781983bd977537b3c5d060e217ea82a.gif" alt="w \cdot x+b = w_1 x_1 + ... + w_n x_n + b"></a> æ¥é¢„æµ‹æ–°æ ·æœ¬çš„ç±»åˆ«ï¼šå¦‚æœç»“æœæ˜¯æ­£çš„ï¼Œé¢„æµ‹ç±»åˆ«<code>Å·</code>æ˜¯æ­£ç±»ï¼Œä¸º 1ï¼Œå¦åˆ™ä»–å°±æ˜¯è´Ÿç±»ï¼Œä¸º 0ã€‚</p>
<p>$\hat y = \left \{ \begin{array}{ll}  0 &amp; if \ w^T\cdot x+b&lt;0 \\1 &amp; \ w^T\cdot x+b\geq0\end{array}\right.$</p>
<p>è®­ç»ƒçº¿æ€§ SVM åˆ†ç±»å™¨æ„å‘³ç€æ‰¾åˆ°<code>w</code>å€¼å’Œ<code>b</code>å€¼ä½¿å¾—è¿™ä¸€ä¸ªé—´éš”å°½å¯èƒ½å¤§ï¼ŒåŒæ—¶é¿å…é—´éš”è¿è§„ï¼ˆç¡¬é—´éš”ï¼‰æˆ–é™åˆ¶å®ƒä»¬ï¼ˆè½¯é—´éš”ï¼‰</p>
<h5 id="è®­ç»ƒç›®æ ‡"><a href="#è®­ç»ƒç›®æ ‡" class="headerlink" title="è®­ç»ƒç›®æ ‡"></a>è®­ç»ƒç›®æ ‡</h5><p>å†³ç­–å‡½æ•°çš„æ–œç‡ï¼šå®ƒç­‰äºæƒé‡å‘é‡çš„èŒƒæ•° $||\omega||$ ï¼Œæ–œç‡é™¤äº 2ï¼Œé‚£ä¹ˆé—´éš”å°†å¢åŠ ä¸¤å€ã€‚æƒé‡å‘é‡<code>w</code>è¶Šå°ï¼Œé—´éš”è¶Šå¤§ã€‚</p>
<p>ç›®æ ‡æ˜¯æœ€å°åŒ–$||\omega||$ ï¼Œä»è€Œè·å¾—å¤§çš„é—´éš”ã€‚å¦‚æœæƒ³è¦é¿å…é—´éš”è¿è§„ï¼ˆç¡¬é—´éš”ï¼‰ï¼Œå¯¹äºæ­£çš„è®­ç»ƒæ ·æœ¬ï¼Œéœ€è¦å†³ç­–å‡½æ•°å¤§äº 1ï¼Œå¯¹äºè´Ÿè®­ç»ƒæ ·æœ¬ï¼Œå°äº -1ã€‚å³ï¼š$t^{(i)}\ w^T\cdot x^{(i)}+b\geq1$</p>
<p><strong>å¯ä»¥å°†ç¡¬é—´éš”çº¿æ€§ SVM åˆ†ç±»å™¨è¡¨ç¤ºä¸ºçº¦æŸä¼˜åŒ–é—®é¢˜:</strong></p>
<script type="math/tex; mode=display">
minimize \frac{1}{2} \omega^T\cdot \omega \\
subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1 \ \ \ for \ i=1,2,3,\cdots , m</script><blockquote>
<p><a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" alt="1/2 w^T w"></a> ç­‰äº <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-98c822c91ab5af02c383eb03fa5b5446.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-98c822c91ab5af02c383eb03fa5b5446.gif" alt="1/2 \|w\|^2"></a>ï¼Œæœ€å°åŒ– <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" alt="1/2 w^T w"></a>ï¼Œè€Œä¸æ˜¯æœ€å°åŒ– <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" alt="\|w\|"></a>ã€‚å› ä¸º<a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" alt="\|w\|"></a> åœ¨<code>w=0</code>å¤„æ˜¯ä¸å¯å¾®çš„ã€‚ä¼˜åŒ–ç®—æ³•åœ¨å¯å¾®å‡½æ•°è¡¨ç°å¾—æ›´å¥½ã€‚</p>
</blockquote>
<p>è½¯é—´éš”ï¼š</p>
<p>å¯¹æ¯ä¸ªæ ·æœ¬åº”ç”¨ä¸€ä¸ªæ¾å¼›å˜é‡ï¼ˆslack variableï¼‰$\zeta^{(i)}\geq0$ ã€‚$\zeta^{(i)}$è¡¨ç¤ºäº†ç¬¬<code>i</code>ä¸ªæ ·æœ¬å…è®¸è¿è§„é—´éš”çš„ç¨‹åº¦ã€‚</p>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªä¸ä¸€è‡´çš„ç›®æ ‡ï¼š</p>
<ol>
<li>ä½¿æ¾å¼›å˜é‡å°½å¯èƒ½çš„å°ï¼Œä»è€Œå‡å°é—´éš”è¿è§„.</li>
<li>ä½¿<code>1/2 wÂ·w</code>å°½é‡å°ï¼Œä»è€Œå¢å¤§é—´éš”ã€‚</li>
</ol>
<p>è¿™æ—¶<code>C</code>è¶…å‚æ•°å‘æŒ¥ä½œç”¨ï¼šå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸¤ä¸ªç›®æ ‡ä¹‹é—´æƒè¡¡ã€‚</p>
<script type="math/tex; mode=display">
minimize\  \frac{1}{2} \omega^T\cdot \omega +C\sum_{i=1}^{m}\zeta^{(i)}\\

subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1-\zeta^{(i)}\ \  and \ \ \zeta^{(i)} \geq0 \ \  for \ i=1,2,3,\cdots , m</script><h5 id="äºŒæ¬¡é—´éš”"><a href="#äºŒæ¬¡é—´éš”" class="headerlink" title="äºŒæ¬¡é—´éš”"></a>äºŒæ¬¡é—´éš”</h5><p>ç¡¬é—´éš”å’Œè½¯é—´éš”éƒ½æ˜¯<strong>çº¿æ€§çº¦æŸçš„å‡¸äºŒæ¬¡è§„åˆ’ä¼˜åŒ–é—®é¢˜</strong>ã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¹‹ä¸ºäºŒæ¬¡è§„åˆ’ï¼ˆQPï¼‰é—®é¢˜ã€‚</p>
<h5 id="å¯¹å¶é—®é¢˜"><a href="#å¯¹å¶é—®é¢˜" class="headerlink" title="å¯¹å¶é—®é¢˜"></a>å¯¹å¶é—®é¢˜</h5><p>ç»™å‡ºä¸€ä¸ªçº¦æŸä¼˜åŒ–é—®é¢˜ï¼Œå³åŸå§‹é—®é¢˜ï¼ˆprimal problemï¼‰ï¼Œå®ƒå¯èƒ½è¡¨ç¤ºä¸åŒä½†æ˜¯å’Œå¦ä¸€ä¸ªé—®é¢˜ç´§å¯†ç›¸è¿ï¼Œç§°ä¸ºå¯¹å¶é—®é¢˜ï¼ˆDual Problemï¼‰ã€‚å¯¹å¶é—®é¢˜çš„è§£é€šå¸¸æ˜¯å¯¹åŸå§‹é—®é¢˜çš„è§£ç»™å‡ºä¸€ä¸ªä¸‹ç•Œçº¦æŸï¼Œä½†åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œå®ƒä»¬å¯ä»¥è·å¾—ç›¸åŒè§£ã€‚</p>
<p><strong>çº¿æ€§ SVM çš„å¯¹å¶å½¢å¼ï¼ˆæ ¸æŠ€å·§çš„åŸºæœ¬ï¼‰</strong>ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-6.gif" alt="img"></p>
<p>ä¸€æ—¦æ‰¾åˆ°æœ€å°åŒ–å…¬å¼çš„å‘é‡<code>Î±</code>ï¼Œå¯ä»¥è®¡ç®—<code>w</code>å’Œ<code>b</code>ï¼Œä»è€Œä½¿åŸå§‹é—®é¢˜æœ€å°åŒ–ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-7.gif" alt="img"></p>
<p>è®­ç»ƒæ ·æœ¬çš„æ•°é‡æ¯”ç‰¹å¾æ•°é‡å°çš„æ—¶å€™ï¼Œå¯¹å¶é—®é¢˜æ¯”åŸå§‹é—®é¢˜è¦å¿«å¾—å¤šã€‚</p>
<h5 id="æ ¸åŒ–æ”¯æŒå‘é‡æœº"><a href="#æ ¸åŒ–æ”¯æŒå‘é‡æœº" class="headerlink" title="æ ¸åŒ–æ”¯æŒå‘é‡æœº"></a>æ ¸åŒ–æ”¯æŒå‘é‡æœº</h5><p>æŠŠä¸€ä¸ª 2 æ¬¡å¤šé¡¹å¼å˜æ¢åº”ç”¨åˆ°äºŒç»´ç©ºé—´çš„è®­ç»ƒé›†ï¼Œç„¶ååœ¨å˜æ¢åçš„è®­ç»ƒé›†ä¸Šè®­ç»ƒä¸€ä¸ªçº¿æ€§SVMåˆ†ç±»å™¨ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-8.gif" alt="img"></p>
<p>è½¬æ¢åå‘é‡çš„ç‚¹ç§¯ç­‰äºåŸå§‹å‘é‡ç‚¹ç§¯çš„å¹³æ–¹:</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-9.gif" alt="img"></p>
<p><strong>æ ¸æŠ€å·§çš„ç²¾é«“:</strong></p>
<p>ä¸éœ€è¦å¯¹è®­ç»ƒæ ·æœ¬è¿›è¡Œè½¬æ¢ï¼šä»…ä»…éœ€è¦åœ¨å¯¹å¶é—®é¢˜å…¬å¼ä¸­ï¼Œå°†ç‚¹ç§¯æ›¿æ¢æˆå®ƒç‚¹ç§¯çš„å¹³æ–¹ã€‚</p>
<p>å‡½æ•°$K(a, b) = (a^T b)^2$ è¢«ç§°ä¸ºäºŒæ¬¡å¤šé¡¹å¼æ ¸ï¼ˆpolynomial kernelï¼‰ã€‚åœ¨æœºå™¨å­¦ä¹ ï¼Œæ ¸å‡½æ•°æ˜¯ä¸€ä¸ªèƒ½è®¡ç®—ç‚¹ç§¯çš„å‡½æ•°ï¼Œå¹¶åªåŸºäºåŸå§‹å‘é‡<code>a</code>å’Œ<code>b</code>ï¼Œä¸éœ€è¦è®¡ç®—ï¼ˆç”šè‡³çŸ¥é“ï¼‰è½¬æ¢<code>Ï•</code>ã€‚</p>
<p><strong>ä¸€äº›å¸¸è§çš„æ ¸å‡½æ•°</strong></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-10.gif" alt="img"></p>
<blockquote>
<p>Mercer å®šç†</p>
<p>æ ¹æ® Mercer å®šç†ï¼Œå¦‚æœå‡½æ•°<code>K(a, b)</code>æ»¡è¶³ä¸€äº› Mercer æ¡ä»¶çš„æ•°å­¦æ¡ä»¶(<code>K</code>å‡½æ•°åœ¨å‚æ•°å†…å¿…é¡»æ˜¯è¿ç»­ï¼Œå¯¹ç§°ï¼Œå³<code>K(a, b)=K(b, a)</code>ï¼Œç­‰)ï¼Œé‚£ä¹ˆå­˜åœ¨å‡½æ•°<code>Ï•</code>ï¼Œå°†<code>a</code>å’Œ<code>b</code>æ˜ å°„åˆ°å¦ä¸€ä¸ªç©ºé—´ï¼ˆå¯èƒ½æœ‰æ›´é«˜çš„ç»´åº¦ï¼‰ï¼Œæœ‰ $K(a, b) = \phi(a)^T Ï•(b)$ã€‚æ‰€ä»¥å¯ä»¥ç”¨<code>K</code>ä½œä¸ºæ ¸å‡½æ•°ï¼Œå³ä½¿ä¸çŸ¥é“<code>Ï•</code>ã€‚ä½¿ç”¨é«˜æ–¯æ ¸ï¼ˆGaussian RBF kernelï¼‰æƒ…å†µä¸‹ï¼Œå®ƒå®é™…æ˜¯å°†æ¯ä¸ªè®­ç»ƒæ ·æœ¬æ˜ å°„åˆ°æ— é™ç»´ç©ºé—´ï¼Œæ‰€ä»¥ä¸éœ€è¦çŸ¥é“æ˜¯æ€ä¹ˆæ‰§è¡Œæ˜ å°„çš„ä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p>
<p>æ³¨æ„ä¸€äº›å¸¸ç”¨æ ¸å‡½æ•°ï¼ˆä¾‹å¦‚ Sigmoid æ ¸å‡½æ•°ï¼‰å¹¶ä¸æ»¡è¶³æ‰€æœ‰çš„ Mercer æ¡ä»¶ï¼Œç„¶è€Œåœ¨å®è·µä¸­é€šå¸¸è¡¨ç°å¾—å¾ˆå¥½ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-11.gif" alt="img"></p>
<p>ä¹Ÿéœ€è¦ä½¿ç”¨åŒæ ·çš„æŠ€å·§æ¥è®¡ç®—åç½®é¡¹<code>b</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-12.gif" alt="img"></p>
<p>æ”¯æŒå‘é‡æ‰æ»¡è¶³<code>Î±(i)â‰ 0</code>ï¼Œåšå‡ºé¢„æµ‹åªæ¶‰åŠè®¡ç®—ä¸ºæ”¯æŒå‘é‡éƒ¨åˆ†çš„è¾“å…¥æ ·æœ¬ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-992fd41f053d328db0ca0287eed0e2e9.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-992fd41f053d328db0ca0287eed0e2e9.gif" alt="x^{(n)}"></a> çš„ç‚¹ç§¯ï¼Œè€Œä¸æ˜¯å…¨éƒ¨çš„è®­ç»ƒæ ·æœ¬ã€‚</p>
<h5 id="åœ¨çº¿æ”¯æŒå‘é‡æœº"><a href="#åœ¨çº¿æ”¯æŒå‘é‡æœº" class="headerlink" title="åœ¨çº¿æ”¯æŒå‘é‡æœº"></a>åœ¨çº¿æ”¯æŒå‘é‡æœº</h5><p>çº¿å­¦ä¹ æ„å‘³ç€å¢é‡åœ°å­¦ä¹ ï¼Œä¸æ–­æœ‰æ–°å®ä¾‹ã€‚</p>
<p>äºçº¿æ€§SVMåˆ†ç±»å™¨ï¼Œä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æ¢¯åº¦ä¸‹é™ï¼ˆä¾‹å¦‚ä½¿ç”¨<code>SGDClassifire</code>ï¼‰æœ€å°åŒ–ä»£ä»·å‡½æ•°ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-13.gif" alt="img"></p>
<p>ç¬¬ä¸€ä¸ªå’Œä¼šä½¿æ¨¡å‹æœ‰ä¸€ä¸ªå°çš„æƒé‡å‘é‡<code>w</code>ï¼Œä»è€Œè·å¾—ä¸€ä¸ªæ›´å¤§çš„é—´éš”ã€‚ç¬¬äºŒä¸ªå’Œè®¡ç®—æ‰€æœ‰é—´éš”è¿è§„çš„æ€»æ•°ã€‚å¦‚æœæ ·æœ¬ä½äºâ€œè¡—é“â€ä¸Šå’Œæ­£ç¡®çš„ä¸€è¾¹ï¼Œæˆ–å®ƒä¸â€œè¡—é“â€æ­£ç¡®ä¸€è¾¹çš„è·ç¦»æˆæ¯”ä¾‹ï¼Œåˆ™é—´éš”è¿è§„ç­‰äº 0ã€‚æœ€å°åŒ–ä¿è¯äº†æ¨¡å‹çš„é—´éš”è¿è§„å°½å¯èƒ½å°å¹¶ä¸”å°‘ã€‚</p>
<blockquote>
<p>Hinge æŸå¤±</p>
<p>å‡½æ•°<code>max(0, 1â€“t)</code>è¢«ç§°ä¸º Hinge æŸå¤±å‡½æ•°ï¼ˆå¦‚ä¸‹ï¼‰ã€‚å½“<code>tâ‰¥1</code>æ—¶ï¼ŒHinge å€¼ä¸º 0ã€‚å¦‚æœ<code>t&lt;1</code>,å®ƒçš„å¯¼æ•°ï¼ˆæ–œç‡ï¼‰ä¸º -1ï¼Œè‹¥<code>t&gt;1</code>ï¼Œåˆ™ç­‰äº0ã€‚åœ¨<code>t=1</code>å¤„ï¼Œå®ƒæ˜¯ä¸å¯å¾®çš„ï¼Œä½†å°±åƒå¥—ç´¢å›å½’ï¼ˆLasso Regressionï¼‰ä¸€æ ·ï¼Œä»ç„¶å¯ä»¥åœ¨<code>t=0</code>æ—¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼ˆå³ -1 åˆ° 0 ä¹‹é—´ä»»ä½•å€¼ï¼‰<img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/5-hinge.jpg" alt="img"></p>
</blockquote>
<p>å¤§è§„æ¨¡çš„éçº¿æ€§é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ç¥ç»ç½‘ç»œã€‚</p>
<h4 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise"></a>Exercise</h4><ol>
<li><p>æ”¯æŒå‘é‡æœºèƒŒåçš„åŸºæœ¬æ€æƒ³æ˜¯ä»€ä¹ˆ</p>
<blockquote>
<p>æ”¯æŒå‘é‡æœºçš„èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼šå¯»æ‰¾å…·æœ‰æœ€å¤§é—´éš”çš„åˆ†ç±»å¹³é¢ï¼Œæ¥å¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡</p>
<blockquote>
<p>æ”¯æŒå‘é‡å°±æ˜¯æœ€å¤§é—´éš”å¹³é¢è¾¹ç•Œä¸Šæ ·æœ¬ç‚¹ï¼Œè¿™äº›æ ·æœ¬ç‚¹è¢«ç§°ä¸ºâ€œæ”¯æŒå‘é‡â€</p>
</blockquote>
</li>
<li><p>å½“ä½¿ç”¨ SVM æ—¶ï¼Œä¸ºä»€ä¹ˆæ ‡å‡†åŒ–è¾“å…¥å¾ˆé‡è¦ï¼Ÿ</p>
<blockquote>
<p>å› ä¸ºSVM å¯¹ç‰¹å¾ç¼©æ”¾æ¯”è¾ƒæ•æ„Ÿï¼Œå¯¹ç‰¹å¾è¿›è¡Œç¼©æ”¾å¯ä»¥ä½¿å¾—åˆ¤å®šè¾¹ç•Œæ›´å®½ã€‚</p>
<p>SVMå¯»æ‰¾å…·æœ‰æœ€å¤§åˆ†ç±»é—´éš”çš„å¹³é¢ï¼Œå¦‚æœä¸å¯¹è¾“å…¥è¿›è¡Œå½’ä¸€åŒ–ï¼ŒSVMä¼šå¿½ç•¥å°çš„ç‰¹å¾ã€‚</p>
</blockquote>
</li>
<li><p>åˆ†ç±»ä¸€ä¸ªæ ·æœ¬æ—¶ï¼ŒSVM åˆ†ç±»å™¨èƒ½å¤Ÿè¾“å‡ºä¸€ä¸ªç½®ä¿¡å€¼å—ï¼Ÿæ¦‚ç‡å‘¢ï¼Ÿ</p>
<blockquote>
<p>SVMåˆ†ç±»å™¨é€šè¿‡ç®€å•åœ°è®¡ç®—å†³ç­–å‡½æ•°$\omega \cdot x+b$æ¥é¢„æµ‹æ–°æ ·æœ¬çš„ç±»åˆ«ï¼Œå¦‚æœå°äº0ï¼Œåˆ™ä¸ºè´Ÿç±»ï¼Œå¦‚æœå¤§äºç­‰äº0ï¼Œåˆ™ä¸ºæ­£ç±»ã€‚</p>
<p>SVMåˆ†ç±»å™¨ä¸ä¼šè¾“å‡ºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨ä¸€ä¸ªæœ‰æ•°ç™¾ä¸‡è®­ç»ƒæ ·æœ¬å’Œæ•°ç™¾ç‰¹å¾çš„è®­ç»ƒé›†ä¸Šï¼Œä½ æ˜¯å¦åº”è¯¥ä½¿ç”¨ SVM åŸå§‹å½¢å¼æˆ–å¯¹å¶å½¢å¼æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Ÿ</p>
<blockquote>
<p>çº¿æ€§SVMçš„è®­ç»ƒæ—¶é—´å¤æ‚åº¦çº¦ä¸ºO(m x n)ï¼Œè€Œå¯¹å¶å½¢å¼çš„å¤æ‚åº¦é€šå¸¸ä»‹äºO(m^2 x n) åˆ° O(m^3 x n)ï¼Œmä¸ºå®ä¾‹ä¸ªæ•°ï¼Œå½“è®­ç»ƒæ ·æœ¬å˜å¤§æ—¶ï¼Œå®ƒå°†å˜å¾—æå…¶æ…¢ã€‚</p>
<p>æ‰€ä»¥å¯¹äºå¤§è§„æ¨¡çº¿æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SVMçš„åŸå§‹å½¢å¼ï¼Œè€Œå¯¹äºå¤§è§„æ¨¡çš„éçº¿æ€§é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ç¥ç»ç½‘ç»œã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ç”¨ RBF æ ¸æ¥è®­ç»ƒä¸€ä¸ª SVM åˆ†ç±»å™¨ï¼Œå¦‚æœå¯¹è®­ç»ƒé›†æ¬ æ‹Ÿåˆï¼šä½ åº”è¯¥å¢å¤§æˆ–è€…å‡å°<code>Î³</code>å—ï¼Ÿè°ƒæ•´å‚æ•°<code>C</code>å‘¢ï¼Ÿ</p>
<blockquote>
<p>RBFçš„å½¢å¼ï¼š$\phi_{\gamma}(x, \ell) = exp(-\gamma |x - \ell |^2)$ï¼Œæ˜¯ä¸€ä¸ªé’Ÿå½¢æ›²çº¿ï¼Œ<code>Î³</code> è¶Šå¤§ï¼Œé’Ÿå½¢æ›²çº¿è¶Šçª„ï¼Œæ¯ä¸ªæ ·æœ¬çš„å½±å“èŒƒå›´å˜å¾—æ›´å°ï¼Œè¾¹ç•Œæ›´ç»†åŒ–ã€‚</p>
<p>è¶…å‚æ•°<code>C</code>æ§åˆ¶SCMåˆ†ç±»æ¨¡å‹çš„è½¯ç¡¬ï¼Œè¾ƒå°çš„<code>C</code>ä¼šå¯¼è‡´æ›´å®½çš„åˆ†ç±»é—´éš”å¹³é¢ï¼Œä½†æ›´å¤šçš„é—´éš”è¿è§„ã€‚</p>
<p>æ‰€ä»¥æ¬ æ‹Ÿåˆæ—¶å¯ä»¥å¢å¤§<code>Î³</code>ï¼Œå¢å¤§<code>C</code></p>
</blockquote>
</li>
<li><p>ä½¿ç”¨ç°æœ‰çš„ QP è§£å†³æ–¹æ¡ˆï¼Œä½ åº”è¯¥æ€ä¹ˆæ ·è®¾ç½® QP å‚æ•°ï¼ˆ<code>H</code>ï¼Œ<code>f</code>ï¼Œ<code>A</code>ï¼Œå’Œ<code>b</code>ï¼‰å»è§£å†³ä¸€ä¸ªè½¯é—´éš”çº¿æ€§ SVM åˆ†ç±»å™¨é—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>è½¯é—´éš”åˆ†ç±»ï¼š</p>
<script type="math/tex; mode=display">
minimize\  \frac{1}{2} \omega^T\cdot \omega +C\sum_{i=1}^{m}\zeta^{(i)}\\

subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1-\zeta^{(i)}\ \  and \ \ \zeta^{(i)} \geq0 \ \  for \ i=1,2,3,\cdots , m</script><p>QP(äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå³çº¿æ€§çº¦æŸçš„å‡¸äºŒæ¬¡è§„åˆ’ä¼˜åŒ–é—®é¢˜)</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-5.gif" alt="img"></p>
<p>H æ˜¯ $n_p \times n_p$çš„å•ä½çŸ©é˜µï¼Œå·¦ä¸Šè§’ä¸º0ï¼ˆå¿½ç•¥åç½®å‘ï¼‰</p>
<p>p = $ï¼ˆb,\ \omega_1\ \cdots\ \omega_n)^T$</p>
<p>$f^T\cdot p \ = \     C\cdot max(1-p^T\cdot A_i,0))$</p>
<p>$b_i=1-max(1-p^T\cdot A_i,0)$</p>
<p>$a_i^j=x_j^{(i)}\  \  i=1\cdots n_c;\ j=1\cdots n_p$ ç¬¬iä¸ªå®ä¾‹çš„ç¬¬jä¸ªç‰¹å¾ï¼Œä½†$x^{(i)}$å¸¦ä¸€ä¸ª1çš„åç½®é¡¹ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨ä¸€ä¸ªçº¿æ€§å¯åˆ†çš„æ•°æ®é›†è®­ç»ƒä¸€ä¸ª<code>LinearSVC</code>ï¼Œå¹¶åœ¨åŒä¸€ä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª<code>SVC</code>å’Œ<code>SGDClassifier</code>ï¼Œçœ‹å®ƒä»¬æ˜¯å¦äº§ç”Ÿäº†å¤§è‡´ç›¸åŒæ•ˆæœçš„æ¨¡å‹ã€‚</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>åœ¨ MNIST æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª SVM åˆ†ç±»å™¨ã€‚å› ä¸º SVM åˆ†ç±»å™¨æ˜¯äºŒå…ƒçš„åˆ†ç±»ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€å¯¹å¤šï¼ˆone-versus-allï¼‰æ¥å¯¹ 10 ä¸ªæ•°å­—è¿›è¡Œåˆ†ç±»ã€‚ä½ å¯èƒ½éœ€è¦ä½¿ç”¨å°çš„éªŒè¯é›†æ¥è°ƒæ•´è¶…å‚æ•°ï¼Œä»¥åŠ å¿«è¿›ç¨‹ã€‚æœ€åä½ èƒ½è¾¾åˆ°å¤šå°‘å‡†ç¡®åº¦ï¼Ÿ</p>
</li>
<li><p>åœ¨åŠ åˆ©ç¦å°¼äºšä½å®…ï¼ˆCalifornia housingï¼‰æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª SVM å›å½’æ¨¡å‹</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬06ç« -å†³ç­–æ ‘"><a href="#ç¬¬06ç« -å†³ç­–æ ‘" class="headerlink" title="ç¬¬06ç«  å†³ç­–æ ‘"></a>ç¬¬06ç«  å†³ç­–æ ‘</h2><p>å†³ç­–æ ‘æ˜¯ä¸€ç§å¤šåŠŸèƒ½æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œ å³å¯ä»¥æ‰§è¡Œåˆ†ç±»ä»»åŠ¡ä¹Ÿå¯ä»¥æ‰§è¡Œå›å½’ä»»åŠ¡ï¼Œ ç”šè‡³åŒ…æ‹¬å¤šè¾“å‡ºï¼ˆmultioutputï¼‰ä»»åŠ¡ã€‚</p>
<h3 id="å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–"><a href="#å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–" class="headerlink" title="å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–"></a>å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–</h3><blockquote>
<p>å†³ç­–æ ‘çš„ä¼—å¤šç‰¹æ€§ä¹‹ä¸€å°±æ˜¯ï¼Œ å®ƒä¸éœ€è¦å¤ªå¤šçš„æ•°æ®é¢„å¤„ç†ï¼Œ å°¤å…¶æ˜¯ä¸éœ€è¦è¿›è¡Œç‰¹å¾çš„ç¼©æ”¾æˆ–è€…å½’ä¸€åŒ–ã€‚</p>
</blockquote>
<ul>
<li>èŠ‚ç‚¹çš„<code>samples</code>å±æ€§ç»Ÿè®¡å‡ºå®ƒåº”ç”¨äºå¤šå°‘ä¸ªè®­ç»ƒæ ·æœ¬å®ä¾‹ã€‚</li>
<li>èŠ‚ç‚¹çš„<code>value</code>å±æ€§ï¼šè¿™ä¸ªèŠ‚ç‚¹å¯¹äºæ¯ä¸€ä¸ªç±»åˆ«çš„æ ·ä¾‹æœ‰å¤šå°‘ä¸ªã€‚</li>
<li>èŠ‚ç‚¹çš„<code>Gini</code>å±æ€§ç”¨äºæµ‹é‡å®ƒçš„çº¯åº¦ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹åŒ…å«çš„æ‰€æœ‰è®­ç»ƒæ ·ä¾‹å…¨éƒ½æ˜¯åŒä¸€ç±»åˆ«çš„ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ˜¯çº¯çš„ï¼ˆ<code>Gini=0</code>ï¼‰ã€‚</li>
</ul>
<p><strong>Giniåˆ†æ•°$G_i$</strong></p>
<p>$G_i=1-\sum_{k=1}^{n}P_{i,k}^2$</p>
<p>$P_{i,k}$æ˜¯ç¬¬<code>i</code>ä¸ªèŠ‚ç‚¹ä¸­è®­ç»ƒå®ä¾‹ä¸ºçš„<code>k</code>ç±»å®ä¾‹çš„æ¯”ä¾‹ã€‚</p>
<blockquote>
<p>Scikit-Learn ç”¨çš„æ˜¯ CART ç®—æ³•ï¼Œ CART ç®—æ³•ä»…äº§ç”ŸäºŒå‰æ ‘ï¼šæ¯ä¸€ä¸ªéå¶èŠ‚ç‚¹æ€»æ˜¯åªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ˆåªæœ‰æ˜¯æˆ–å¦ä¸¤ä¸ªç»“æœï¼‰ã€‚ç„¶è€Œï¼Œåƒ ID3 è¿™æ ·çš„ç®—æ³•å¯ä»¥äº§ç”Ÿè¶…è¿‡ä¸¤ä¸ªå­èŠ‚ç‚¹çš„å†³ç­–æ ‘æ¨¡å‹ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/102" alt="1528081141956"></p>
<h3 id="ä¼°è®¡åˆ†ç±»æ¦‚ç‡"><a href="#ä¼°è®¡åˆ†ç±»æ¦‚ç‡" class="headerlink" title="ä¼°è®¡åˆ†ç±»æ¦‚ç‡"></a>ä¼°è®¡åˆ†ç±»æ¦‚ç‡</h3><p>å†³ç­–æ ‘è¿˜å¯ä»¥ä¼°è®¡æŸä¸ªå®ä¾‹å±äºç‰¹å®šç±»<code>k</code>çš„æ¦‚ç‡ï¼šé¦–å…ˆéå†æ ‘æ¥æŸ¥æ‰¾æ­¤å®ä¾‹çš„å¶èŠ‚ç‚¹ï¼Œç„¶åå®ƒè¿”å›æ­¤èŠ‚ç‚¹ä¸­ç±»<code>k</code>çš„è®­ç»ƒå®ä¾‹çš„æ¯”ä¾‹ã€‚</p>
<blockquote>
<p>å‡è®¾ä½ å‘ç°äº†ä¸€ä¸ªèŠ±ç“£é•¿ 5 å˜ç±³ï¼Œå®½ 1.5 å˜ç±³çš„èŠ±æœµã€‚ç›¸åº”çš„å¶èŠ‚ç‚¹æ˜¯æ·±åº¦ä¸º 2 çš„å·¦èŠ‚ç‚¹ï¼Œå› æ­¤å†³ç­–æ ‘åº”è¯¥è¾“å‡ºä»¥ä¸‹æ¦‚ç‡ï¼šIris-Setosa ä¸º 0%ï¼ˆ0/54ï¼‰ï¼ŒIris-Versicolor ä¸º 90.7%ï¼ˆ49/54ï¼‰ï¼ŒIris-Virginica ä¸º 9.3%ï¼ˆ5/54ï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦æ±‚å®ƒé¢„æµ‹å…·ä½“çš„ç±»ï¼Œå®ƒåº”è¯¥è¾“å‡º Iris-Versicolorï¼ˆç±»åˆ« 1ï¼‰ï¼Œå› ä¸ºå®ƒå…·æœ‰æœ€é«˜çš„æ¦‚ç‡ã€‚</p>
</blockquote>
<h3 id="CARTè®­ç»ƒç®—æ³•"><a href="#CARTè®­ç»ƒç®—æ³•" class="headerlink" title="CARTè®­ç»ƒç®—æ³•"></a>CARTè®­ç»ƒç®—æ³•</h3><p>Scikit-Learn ç”¨<strong>åˆ†è£‚å›å½’æ ‘ï¼ˆClassification And Regression Treeï¼Œç®€ç§° CARTï¼‰ç®—æ³•è®­ç»ƒå†³ç­–æ ‘ï¼ˆä¹Ÿå«â€œå¢é•¿æ ‘â€ï¼‰</strong>ã€‚</p>
<p>é¦–å…ˆä½¿ç”¨å•ä¸ªç‰¹å¾<code>k</code>å’Œé˜ˆå€¼ $t_k$ ä¾‹å¦‚ï¼Œï¼ˆâ€œèŠ±ç“£é•¿åº¦<code>â‰¤2.45cm</code>â€ï¼‰å°†è®­ç»ƒé›†åˆ†æˆä¸¤ä¸ªå­é›†ã€‚å®ƒå¦‚ä½•é€‰æ‹©<code>k</code>å’Œ $t_k$ ï¼Ÿå®ƒå¯»æ‰¾åˆ°èƒ½å¤Ÿäº§ç”Ÿæœ€çº¯ç²¹å­é›†çš„ä¸€å¯¹ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-32cb6265eb19ce4be37ecf6650ff766a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-32cb6265eb19ce4be37ecf6650ff766a.gif" alt="(k, t_k)"></a>ï¼Œç„¶åé€šè¿‡å­é›†å¤§å°åŠ æƒè®¡ç®—ã€‚</p>
<p>ç®—æ³•ä¼šå°è¯•æœ€å°åŒ–æˆæœ¬å‡½æ•°ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/104" alt="1528086977613"></p>
<blockquote>
<p>CART ç®—æ³•æ˜¯ä¸€ç§è´ªå©ªç®—æ³•ï¼šè´ªå©ªåœ°æœç´¢æœ€é«˜çº§åˆ«çš„æœ€ä½³åˆ†å‰²æ–¹å¼ï¼Œç„¶ååœ¨æ¯ä¸ªæ·±åº¦é‡å¤è¯¥è¿‡ç¨‹ã€‚ </p>
<p>ä¸æ£€æŸ¥åˆ†å‰²æ˜¯å¦èƒ½å¤Ÿåœ¨å‡ ä¸ªçº§åˆ«ä¸­çš„å…¨éƒ¨åˆ†å‰²å¯èƒ½ä¸­æ‰¾åˆ°æœ€ä½³æ–¹æ³•ã€‚</p>
<p>è´ªå©ªç®—æ³•é€šå¸¸ä¼šäº§ç”Ÿä¸€ä¸ªç›¸å½“å¥½çš„è§£å†³æ–¹æ³•ï¼Œä½†å®ƒä¸ä¿è¯è¿™æ˜¯å…¨å±€ä¸­çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h4 id="NPå®Œå…¨é—®é¢˜"><a href="#NPå®Œå…¨é—®é¢˜" class="headerlink" title="NPå®Œå…¨é—®é¢˜"></a>NPå®Œå…¨é—®é¢˜</h4><p>å¯»æ‰¾æœ€ä½³çš„å†³ç­–æ ‘æ˜¯NPå®Œæˆé—®é¢˜(<code>Non-deterministic Polynomial</code>ï¼Œå³å¤šé¡¹å¼å¤æ‚ç¨‹åº¦çš„éç¡®å®šæ€§é—®é¢˜)ï¼Œä¹Ÿä¼šç®€ç§°ä¸ºNP-Cé—®é¢˜ã€‚</p>
<p>å†³ç­–æ ‘çš„è¿™ä¸€ç‰¹ç‚¹ï¼Œè¯´æ˜æ— æ³•åˆ©ç”¨è®¡ç®—æœºåœ¨å¤šé¡¹å¼æ—¶é—´å†…ï¼Œæ‰¾å‡ºå…¨å±€æœ€ä¼˜çš„è§£ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œå¤§å¤šæ•°å†³ç­–æ ‘ç®—æ³•éƒ½é‡‡ç”¨å¯å‘å¼çš„ç®—æ³•ï¼Œå¦‚&amp;<strong>è´ªå¿ƒç®—æ³•</strong>ï¼Œæ¥æŒ‡å¯¼å¯¹å‡è®¾ç©ºé—´çš„æœç´¢ã€‚å¯ä»¥è¯´ï¼Œå†³ç­–æ ‘æœ€åçš„ç»“æœï¼Œæ˜¯åœ¨æ¯ä¸€æ­¥ã€æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šåšçš„å±€éƒ¨æœ€ä¼˜é€‰æ‹©ã€‚å†³ç­–æ ‘å¾—åˆ°çš„ç»“æœï¼Œæ— æ³•ä¿è¯æ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h5 id="Pç±»é—®é¢˜"><a href="#Pç±»é—®é¢˜" class="headerlink" title="Pç±»é—®é¢˜"></a>Pç±»é—®é¢˜</h5><blockquote>
<p> æ‰€æœ‰å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£çš„åˆ¤å®šé—®é¢˜æ„æˆ<strong>Pç±»é—®é¢˜</strong></p>
</blockquote>
<p><strong>åˆ¤å®šé—®é¢˜</strong>æ˜¯æŒ‡å›ç­”ç»“æœè¾“å‡ºä¸º<code>Yes</code>æˆ–<code>No</code>çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š3233æ˜¯å¦å¯ä»¥å†™æˆä¸¤ä¸ªå¤§äº1çš„æ•°å­—çš„ä¹˜ç§¯ï¼Ÿ</p>
<p>åœ¨è®¾è®¡ç¨‹åºæ—¶ï¼Œéœ€è¦è¯„ä¼°è¿™ä¸ªç¨‹åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå³è¡¡é‡å½“é—®é¢˜è§„æ¨¡å˜å¤§åï¼Œç¨‹åºæ‰§è¡Œæ‰€éœ€çš„æ—¶é—´å¢é•¿ä¼šæœ‰å¤šå¿«ã€‚å¦‚$O(1)$è¡¨ç¤ºå¸¸æ•°çº§åˆ«ï¼Œå³ä¸ç®¡é—®é¢˜çš„è§„æ¨¡å˜å¤§å¤šå°‘å€ï¼Œæ‰€è€—çš„æ—¶é—´ä¸ä¼šæ”¹å˜ï¼›$O(N^2)$è¡¨ç¤ºå¹³æ–¹çº§åˆ«ï¼Œå³å½“é—®é¢˜è§„æ¨¡å¢å¤§è‡³2å€æ—¶ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´åˆ™æ”¾å¤§è‡³4å€ï¼›$O(2^N)$è¡¨ç¤ºæŒ‡æ•°çº§åˆ«ï¼Œå³å½“é—®é¢˜è§„æ¨¡å€æ•°æ‰©å¤§æ—¶ï¼Œæ‰€ç”¨æ—¶é—´ä¼šå‘ˆæŒ‡æ•°æ”¾å¤§ã€‚</p>
<p><strong>å¤šé¡¹å¼æ—¶é—´</strong>åˆ™æ˜¯æŒ‡$O(1)ã€O(logN)ã€O(N^2)$ç­‰è¿™ç±»å¯ç”¨å¤šé¡¹å¼è¡¨ç¤ºçš„æ—¶é—´å¤æ‚åº¦ï¼Œé€šå¸¸è®¤ä¸ºè®¡ç®—æœºå¯è§£å†³çš„é—®é¢˜åªé™äºå¤šé¡¹å¼æ—¶é—´å†…ã€‚è€Œ$O(2^N)ã€O(N!)$è¿™ç±»éå¤šé¡¹å¼çº§åˆ«çš„é—®é¢˜ï¼Œå…¶å¤æ‚åº¦å¾€å¾€å·²ç»åˆ°äº†è®¡ç®—æœºéƒ½æ¥å—ä¸äº†çš„ç¨‹åº¦ã€‚</p>
<h5 id="NPç±»é—®é¢˜"><a href="#NPç±»é—®é¢˜" class="headerlink" title="NPç±»é—®é¢˜"></a>NPç±»é—®é¢˜</h5><blockquote>
<p>æ‰€æœ‰éç¡®å®šæ€§å¤šé¡¹å¼æ—¶é—´å†…å¯è§£çš„åˆ¤å®šé—®é¢˜æ„æˆ<strong>NPç±»é—®é¢˜</strong></p>
</blockquote>
<p>NPç±»é—®é¢˜å°†é—®é¢˜åˆ†ä¸ºæ±‚è§£å’ŒéªŒè¯ä¸¤ä¸ªé˜¶æ®µï¼Œé—®é¢˜çš„æ±‚è§£æ˜¯éç¡®å®šæ€§çš„ï¼Œæ— æ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¾—åˆ°ç­”æ¡ˆï¼Œè€Œé—®é¢˜çš„éªŒè¯å´æ˜¯ç¡®å®šçš„ï¼Œèƒ½å¤Ÿåœ¨å¤šé¡¹å¼æ—¶é—´é‡Œç¡®å®šç»“æœã€‚</p>
<p>æ¯”å¦‚ï¼šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå…¬å¼å¯ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªè´¨æ•°æ˜¯å¤šå°‘ï¼Ÿè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆç›®å‰æ˜¯æ— æ³•ç›´æ¥è®¡ç®—å‡ºæ¥çš„ï¼Œä½†æ˜¯å¦‚æœæŸäººç»™å‡ºäº†ä¸€ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å´å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´é‡Œå¯¹è¿™ä¸ªå…¬å¼è¿›è¡ŒéªŒè¯ã€‚</p>
<h5 id="NPå®Œå…¨é—®é¢˜-1"><a href="#NPå®Œå…¨é—®é¢˜-1" class="headerlink" title="NPå®Œå…¨é—®é¢˜"></a>NPå®Œå…¨é—®é¢˜</h5><blockquote>
<p>NPç±»é—®é¢˜çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œè¿™ç±»é—®é¢˜ä¸­æ¯ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸æ•´ä¸ªç±»çš„å¤æ‚åº¦æœ‰å…³è”æ€§ï¼Œå‡å¦‚å…¶ä¸­ä»»æ„ä¸€ä¸ªé—®é¢˜åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¯è§£çš„ï¼Œåˆ™è¿™ä¸€ç±»é—®é¢˜éƒ½æ˜¯å¤šé¡¹å¼æ—¶é—´å¯è§£ã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¸º<strong>NPå®Œå…¨é—®é¢˜</strong>ã€‚</p>
</blockquote>
<p>æ€»ç»“è¿™å‡ ç±»é—®é¢˜çš„ç‰¹ç‚¹ï¼Œå¯å‚è€ƒå¦‚ä¸‹è¿™ä¸ªè¡¨æ ¼ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>é—®é¢˜ç±»å‹</th>
<th>æ˜¯å¦èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£</th>
<th>æ˜¯å¦èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…éªŒè¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>P</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>NP</td>
<td>æ˜¯ or å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>NP-C</td>
<td>æœªçŸ¥</td>
<td>æ˜¯</td>
</tr>
</tbody>
</table>
</div>
<p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/dcb0b52f4935" target="_blank" rel="noopener">https://www.jianshu.com/p/dcb0b52f4935</a></p>
<h3 id="è®¡ç®—å¤æ‚åº¦"><a href="#è®¡ç®—å¤æ‚åº¦" class="headerlink" title="è®¡ç®—å¤æ‚åº¦"></a>è®¡ç®—å¤æ‚åº¦</h3><p>å»ºç«‹å¥½å†³ç­–æ ‘æ¨¡å‹åï¼Œ åšå‡º<strong>é¢„æµ‹</strong>éœ€è¦éå†å†³ç­–æ ‘ï¼Œ ä»æ ¹èŠ‚ç‚¹ä¸€ç›´åˆ°å¶èŠ‚ç‚¹ã€‚å†³ç­–æ ‘é€šå¸¸è¿‘ä¼¼å·¦å³å¹³è¡¡ï¼Œå› æ­¤éå†å†³ç­–æ ‘éœ€è¦ç»å†å¤§è‡´  $O(log_2m)$ä¸ªèŠ‚ç‚¹ã€‚ç”±äºæ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦æ£€æŸ¥ä¸€ä¸ªç‰¹å¾çš„å€¼ï¼Œå› æ­¤æ€»ä½“é¢„æµ‹å¤æ‚åº¦ä»…ä¸º $O(log_2m)$ï¼Œä¸ç‰¹å¾çš„æ•°é‡æ— å…³ã€‚</p>
<p><strong>è®­ç»ƒ</strong>ç®—æ³•çš„æ—¶å€™ï¼ˆè®­ç»ƒå’Œé¢„æµ‹ä¸åŒï¼‰éœ€è¦æ¯”è¾ƒæ‰€æœ‰ç‰¹å¾ï¼ˆå¦‚æœè®¾ç½®äº†<code>max_features</code>ä¼šæ›´å°‘ä¸€äº›ï¼‰åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰æ ·æœ¬ä¸Šã€‚è®­ç»ƒå¤æ‚åº¦ä¸º$O(nmlog_m)$</p>
<h3 id="åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ"><a href="#åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ" class="headerlink" title="åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ"></a>åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ</h3><p>é»˜è®¤ç®—æ³•ä½¿ç”¨ Gini ä¸çº¯åº¦æ¥è¿›è¡Œæ£€æµ‹ï¼Œ ä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡å°†æ ‡å‡†è¶…å‚æ•°è®¾ç½®ä¸º<code>&quot;entropy&quot;</code>æ¥ä½¿ç”¨ç†µä¸çº¯åº¦è¿›è¡Œæ£€æµ‹ã€‚</p>
<p><strong>ç†µçš„è®¡ç®—ï¼š</strong></p>
<script type="math/tex; mode=display">
H_i=-\sum_{k=1\ P_{i,k=!0}}^n{P_{i,k}}log(p_{i,k})</script><p>ç†µçš„å‡å°‘é€šå¸¸ç§°ä¸º<strong>ä¿¡æ¯å¢ç›Š</strong></p>
<blockquote>
<p>åŸºå°¼æŒ‡æ•°è®¡ç®—ç¨å¾®å¿«ä¸€ç‚¹ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤å€¼ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¹Ÿæœ‰çš„æ—¶å€™å®ƒä»¬ä¼šäº§ç”Ÿä¸åŒçš„æ ‘ï¼ŒåŸºå°¼æŒ‡æ•°ä¼šè¶‹äºåœ¨æ ‘çš„åˆ†æ”¯ä¸­å°†æœ€å¤šçš„ç±»éš”ç¦»å‡ºæ¥ï¼Œè€Œç†µæŒ‡æ•°è¶‹å‘äºäº§ç”Ÿç•¥å¾®å¹³è¡¡ä¸€äº›çš„å†³ç­–æ ‘æ¨¡å‹ã€‚</p>
</blockquote>
<h3 id="æ­£åˆ™åŒ–è¶…å‚æ•°"><a href="#æ­£åˆ™åŒ–è¶…å‚æ•°" class="headerlink" title="æ­£åˆ™åŒ–è¶…å‚æ•°"></a>æ­£åˆ™åŒ–è¶…å‚æ•°</h3><p>å†³ç­–æ ‘å‡ ä¹ä¸å¯¹è®­ç»ƒæ•°æ®åšä»»ä½•å‡è®¾ï¼ˆäºæ­¤ç›¸åçš„æ˜¯çº¿æ€§å›å½’ç­‰æ¨¡å‹ï¼Œè¿™ç±»æ¨¡å‹é€šå¸¸ä¼šå‡è®¾æ•°æ®æ˜¯ç¬¦åˆçº¿æ€§å…³ç³»çš„ï¼‰ã€‚è¿™ä¸€ç±»çš„æ¨¡å‹é€šå¸¸ä¼šè¢«ç§°ä¸º<strong>éå‚æ•°æ¨¡å‹&amp;</strong>ï¼Œè¿™ä¸æ˜¯å› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ï¼ˆé€šå¸¸ä¹Ÿæœ‰å¾ˆå¤šï¼‰ï¼Œè€Œæ˜¯å› ä¸º<strong>åœ¨è®­ç»ƒä¹‹å‰æ²¡æœ‰ç¡®å®šå‚æ•°çš„å…·ä½“æ•°é‡ï¼Œæ‰€ä»¥æ¨¡å‹ç»“æ„å¯ä»¥æ ¹æ®æ•°æ®çš„ç‰¹æ€§è‡ªç”±ç”Ÿé•¿ã€‚</strong></p>
<p>å¦‚æœä¸æ·»åŠ çº¦æŸï¼Œæ ‘ç»“æ„æ¨¡å‹é€šå¸¸å°†æ ¹æ®è®­ç»ƒæ•°æ®è°ƒæ•´è‡ªå·±ï¼Œä½¿è‡ªèº«èƒ½å¤Ÿå¾ˆå¥½çš„æ‹Ÿåˆæ•°æ®ï¼Œè€Œè¿™ç§æƒ…å†µä¸‹å¤§å¤šæ•°ä¼šå¯¼è‡´<strong>æ¨¡å‹è¿‡æ‹Ÿåˆ</strong>ã€‚</p>
<blockquote>
<p><strong><code>DecisionTreeClassifier</code>ç±»è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‚æ•°ç”¨äºé™åˆ¶æ ‘æ¨¡å‹çš„å½¢çŠ¶:</strong></p>
<p><code>min_samples_split</code>ï¼ˆèŠ‚ç‚¹åœ¨è¢«åˆ†è£‚ä¹‹å‰å¿…é¡»å…·æœ‰çš„æœ€å°æ ·æœ¬æ•°ï¼‰</p>
<p><code>min_samples_leaf</code>ï¼ˆå¶èŠ‚ç‚¹å¿…é¡»å…·æœ‰çš„æœ€å°æ ·æœ¬æ•°ï¼‰ï¼Œ<code>min_weight_fraction_leaf</code>ï¼ˆå’Œ<code>min_samples_leaf</code>ç›¸åŒï¼Œä½†è¡¨ç¤ºä¸ºåŠ æƒæ€»æ•°çš„ä¸€å°éƒ¨åˆ†å®ä¾‹ï¼‰</p>
<p><code>max_leaf_nodes</code>ï¼ˆå¶èŠ‚ç‚¹çš„æœ€å¤§æ•°é‡ï¼‰</p>
<p><code>max_features</code>ï¼ˆåœ¨æ¯ä¸ªèŠ‚ç‚¹è¢«è¯„ä¼°æ˜¯å¦åˆ†è£‚çš„æ—¶å€™ï¼Œå…·æœ‰çš„æœ€å¤§ç‰¹å¾æ•°é‡ï¼‰</p>
<p>å¢åŠ <code>min_* hyperparameters</code>æˆ–è€…å‡å°‘<code>max_* hyperparameters</code>ä¼šä½¿æ¨¡å‹æ­£åˆ™åŒ–ã€‚</p>
<p><strong>å‰ªæ</strong></p>
<p>åœ¨æ²¡æœ‰ä»»ä½•çº¦æŸæ¡ä»¶ä¸‹è®­ç»ƒå†³ç­–æ ‘æ¨¡å‹ï¼Œè®©æ¨¡å‹è‡ªç”±ç”Ÿé•¿ï¼Œç„¶åå†å¯¹ä¸éœ€è¦çš„èŠ‚ç‚¹è¿›è¡Œå‰ªæã€‚</p>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹çš„å…¨éƒ¨å­èŠ‚ç‚¹éƒ½æ˜¯å¶èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœå®ƒå¯¹çº¯åº¦çš„æå‡ä¸å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªåˆ†æ”¯æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<p>æ ‡å‡†çš„å‡è®¾æ£€éªŒï¼Œä¾‹å¦‚å¡æ–¹æ£€æµ‹ï¼Œé€šå¸¸ä¼šè¢«ç”¨äºè¯„ä¼°ä¸€ä¸ªæ¦‚ç‡å€¼ â€” å³æ”¹è¿›æ˜¯å¦çº¯ç²¹æ˜¯å¶ç„¶æ€§çš„ç»“æœï¼ˆä¹Ÿå«åŸå‡è®¾ï¼‰</p>
<p>å¦‚æœ p å€¼æ¯”ç»™å®šçš„é˜ˆå€¼æ›´é«˜ï¼ˆé€šå¸¸è®¾å®šä¸º 5%ï¼Œä¹Ÿå°±æ˜¯ 95% ç½®ä¿¡åº¦ï¼Œé€šè¿‡è¶…å‚æ•°è®¾ç½®ï¼‰ï¼Œé‚£ä¹ˆèŠ‚ç‚¹å°±è¢«è®¤ä¸ºæ˜¯éå¿…è¦çš„ï¼Œå®ƒçš„å­èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ã€‚</p>
<p>è¿™ç§å‰ªææ–¹å¼å°†ä¼šä¸€ç›´è¿›è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„éå¿…è¦èŠ‚ç‚¹éƒ½è¢«åˆ å…‰ã€‚</p>
</blockquote>
<h3 id="å›å½’"><a href="#å›å½’" class="headerlink" title="å›å½’"></a>å›å½’</h3><p>Scikit-Learn çš„<code>DecisionTreeRegressor</code>ç±»æ„å»ºå›å½’æ ‘ï¼Œä¸å†ä»¥æœ€å°åŒ–ä¸çº¯åº¦çš„æ–¹å¼åˆ†å‰²è®­ç»ƒé›†ï¼Œè€Œæ˜¯è¯•å›¾ä»¥æœ€å°åŒ– MSE çš„æ–¹å¼åˆ†å‰²è®­ç»ƒé›†ã€‚</p>
<blockquote>
<p> æ¯ä¸ªåŒºåŸŸçš„é¢„æµ‹å€¼æ€»æ˜¯è¯¥åŒºåŸŸä¸­å®ä¾‹çš„å¹³å‡ç›®æ ‡å€¼ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/108" alt="1528375227547"></p>
<h3 id="ä¸ç¨³å®šæ€§"><a href="#ä¸ç¨³å®šæ€§" class="headerlink" title="ä¸ç¨³å®šæ€§"></a>ä¸ç¨³å®šæ€§</h3><p>å†³ç­–æ ‘çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li><p>å®¹æ˜“ç†è§£å’Œè§£é‡Šï¼Œæ˜“äºä½¿ç”¨ä¸”åŠŸèƒ½ä¸°å¯Œè€Œå¼ºå¤§ã€‚</p>
</li>
<li><p>å†³ç­–æ ‘å¾ˆå–œæ¬¢è®¾å®šæ­£äº¤åŒ–çš„å†³ç­–è¾¹ç•Œï¼Œï¼ˆæ‰€æœ‰è¾¹ç•Œéƒ½æ˜¯å’ŒæŸä¸€ä¸ªè½´ç›¸å‚ç›´çš„ï¼‰ï¼Œè¿™ä½¿å¾—å®ƒå¯¹è®­ç»ƒæ•°æ®é›†çš„æ—‹è½¬å¾ˆæ•æ„Ÿã€‚</p>
<blockquote>
<p>è§£å†³åŠæ³•ï¼šä¸»æˆåˆ†åˆ†æPCA</p>
</blockquote>
</li>
<li><p>å†³ç­–æ—¶çš„ä¸»è¦é—®é¢˜æ˜¯å®ƒå¯¹è®­ç»ƒæ•°æ®çš„å¾®å°å˜åŒ–éå¸¸æ•æ„Ÿ</p>
</li>
</ol>
<h3 id="exercise"><a href="#exercise" class="headerlink" title="exercise"></a>exercise</h3><ol>
<li><p>åœ¨ 100 ä¸‡ä¾‹è®­ç»ƒé›†ä¸Šè®­ç»ƒï¼ˆæ²¡æœ‰é™åˆ¶ï¼‰çš„å†³ç­–æ ‘çš„è¿‘ä¼¼æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<blockquote>
<p>$log_2(m)$ï¼Œm=100ä¸‡æ—¶ï¼Œè¯¥å€¼å¤§çº¦ä¸º20</p>
</blockquote>
</li>
<li><p>èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°æ¯”èµ·å®ƒçš„çˆ¶èŠ‚ç‚¹æ˜¯æ›´é«˜è¿˜æ˜¯æ›´ä½ï¼Ÿå®ƒæ˜¯é€šå¸¸æƒ…å†µä¸‹æ›´é«˜/æ›´ä½ï¼Œè¿˜æ˜¯æ°¸è¿œæ›´é«˜/æ›´ä½ï¼Ÿ</p>
<blockquote>
<p>èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°é€šå¸¸ä½äºå…¶çˆ¶èŠ‚ç‚¹ï¼Œè¿™æ˜¯ç”±CARTæ•°çš„è®­ç»ƒæŸå¤±å‡½æ•°æ‰€ç¡®å®šçš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»è¿‡æœ€ä¼˜å±æ€§åˆ†å‰²ä¹‹åï¼Œå­èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°ä¹‹å’Œéƒ½ä¼šå°äºçˆ¶èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°ï¼Œç„¶è€Œå¦‚æœä¸€ä¸ªå­©å­èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°æ¯”å¦å¤–ä¸€ä¸ªçš„åŸºå°¼æŒ‡æ•°å°ï¼Œåˆ™å¯èƒ½æ¯”å…¶çˆ¶èŠ‚ç‚¹çš„åŸºå°¼ä¸çº¯åº¦æ›´å¤§ï¼Œä½†æ˜¯å…¶åŸºå°¼ä¸çº¯åº¦çš„å¢åŠ è‚¯å®šå°äºå¦å¤–å­©å­åŸºå°¼ä¸çº¯åº¦çš„å‡å°‘ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœå†³ç­–æ ‘è¿‡æ‹Ÿåˆäº†ï¼Œå‡å°‘æœ€å¤§æ·±åº¦æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ³•å—ï¼Ÿ</p>
<blockquote>
<p>æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå¯ä»¥å¯¹æ¨¡å‹è¿›è¡Œçº¦æŸï¼Œä½¿å…¶è§„èŒƒåŒ–</p>
</blockquote>
</li>
<li><p>å¦‚æœå†³ç­–æ ‘å¯¹è®­ç»ƒé›†æ¬ æ‹Ÿåˆäº†ï¼Œå°è¯•ç¼©æ”¾è¾“å…¥ç‰¹å¾æ˜¯å¦æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼Œå› ä¸ºå†³ç­–æ ‘å¯¹äºæ•°æ®çš„ç¼©æ”¾å¹¶ä¸æ•æ„Ÿ</p>
</blockquote>
</li>
<li><p>å¦‚æœå¯¹åŒ…å« 100 ä¸‡ä¸ªå®ä¾‹çš„æ•°æ®é›†è®­ç»ƒå†³ç­–æ ‘æ¨¡å‹éœ€è¦ä¸€ä¸ªå°æ—¶ï¼Œåœ¨åŒ…å« 1000 ä¸‡ä¸ªå®ä¾‹çš„åŸ¹è®­é›†ä¸Šè®­ç»ƒå¦ä¸€ä¸ªå†³ç­–æ ‘å¤§æ¦‚éœ€è¦å¤šå°‘æ—¶é—´å‘¢ï¼Ÿ</p>
<blockquote>
<p>è®­ç»ƒå¤æ‚åº¦$O(n\times m \log(m))$ï¼Œå¦‚æœå®ä¾‹må¢åŠ 10å€ï¼Œåˆ™å¤æ‚åº¦å˜ä¸º$10\times\log(10m)/\log(m)$ å€ï¼Œm=100ä¸‡æ—¶ï¼Œè¯¥å€¼ä¸º11.7ï¼Œæ‰€ä»¥éœ€è¦11.7ä¸ªå°æ—¶</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„è®­ç»ƒé›†åŒ…å« 100,000 ä¸ªå®ä¾‹ï¼Œè®¾ç½®<code>presort=True</code>ä¼šåŠ å¿«è®­ç»ƒçš„é€Ÿåº¦å—ï¼Ÿ</p>
<blockquote>
<p>åªæœ‰å½“æ•°æ®é›†å°äºå‡ åƒæ—¶ï¼Œæ‰ä¼šåŠ é€Ÿè®­ç»ƒå®ä¾‹ã€‚å¦‚æœå®ƒåŒ…å«100,000ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆè®¾ç½®presort=Trueçš„è®­ç»ƒå°†ä¼šæ…¢å¾—å¤šã€‚</p>
</blockquote>
</li>
<li><p>å¯¹<code>moons</code>æ•°æ®é›†è¿›è¡Œå†³ç­–æ ‘è®­ç»ƒå¹¶ä¼˜åŒ–æ¨¡å‹ã€‚</p>
<ol>
<li><p>é€šè¿‡è¯­å¥<code>make_moons(n_samples=10000, noise=0.4)</code>ç”Ÿæˆ<code>moons</code>æ•°æ®é›†</p>
</li>
<li><p>é€šè¿‡<code>train_test_split()</code>å°†æ•°æ®é›†åˆ†å‰²ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚</p>
</li>
<li><p>è¿›è¡Œäº¤å‰éªŒè¯ï¼Œå¹¶ä½¿ç”¨ç½‘æ ¼æœç´¢æ³•å¯»æ‰¾æœ€å¥½çš„è¶…å‚æ•°å€¼ï¼ˆä½¿ç”¨<code>GridSearchCV</code>ç±»çš„å¸®åŠ©æ–‡æ¡£ï¼‰</p>
<p>æç¤º: å°è¯•å„ç§å„æ ·çš„<code>max_leaf_nodes</code>å€¼</p>
</li>
<li><p>ä½¿ç”¨è¿™äº›è¶…å‚æ•°è®­ç»ƒå…¨éƒ¨çš„è®­ç»ƒé›†æ•°æ®ï¼Œå¹¶åœ¨æµ‹è¯•é›†ä¸Šæµ‹é‡æ¨¡å‹çš„è¡¨ç°ã€‚ä½ åº”è¯¥è·å¾—å¤§çº¦ 85% åˆ° 87% çš„å‡†ç¡®åº¦ã€‚</p>
</li>
</ol>
</li>
<li><p>ç”Ÿæˆæ£®æ—</p>
<ol>
<li>æ¥ç€å‰è¾¹çš„ç»ƒä¹ ï¼Œç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”Ÿæˆ 1,000 ä¸ªè®­ç»ƒé›†çš„å­é›†ï¼Œæ¯ä¸ªå­é›†åŒ…å« 100 ä¸ªéšæœºé€‰æ‹©çš„å®ä¾‹ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨ Scikit-Learn çš„<code>ShuffleSplit</code>ç±»ã€‚</li>
<li>ä½¿ç”¨ä¸Šé¢æ‰¾åˆ°çš„æœ€ä½³è¶…å‚æ•°å€¼ï¼Œåœ¨æ¯ä¸ªå­é›†ä¸Šè®­ç»ƒä¸€ä¸ªå†³ç­–æ ‘ã€‚åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•è¿™ 1000 ä¸ªå†³ç­–æ ‘ã€‚ç”±äºå®ƒä»¬æ˜¯åœ¨è¾ƒå°çš„é›†åˆä¸Šè¿›è¡Œäº†è®­ç»ƒï¼Œå› æ­¤è¿™äº›å†³ç­–æ ‘å¯èƒ½ä¼šæ¯”ç¬¬ä¸€ä¸ªå†³ç­–æ ‘æ•ˆæœæ›´å·®ï¼Œåªèƒ½è¾¾åˆ°çº¦ 80% çš„å‡†ç¡®åº¦ã€‚</li>
<li>è§è¯å¥‡è¿¹çš„æ—¶åˆ»åˆ°äº†ï¼å¯¹äºæ¯ä¸ªæµ‹è¯•é›†å®ä¾‹ï¼Œç”Ÿæˆ 1,000 ä¸ªå†³ç­–æ ‘çš„é¢„æµ‹ç»“æœï¼Œç„¶ååªä¿ç•™å‡ºç°æ¬¡æ•°æœ€å¤šçš„é¢„æµ‹ç»“æœï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ SciPy çš„<code>mode()</code>å‡½æ•°ï¼‰ã€‚è¿™ä¸ªå‡½æ•°ä½¿ä½ å¯ä»¥å¯¹æµ‹è¯•é›†è¿›è¡Œå¤šæ•°æŠ•ç¥¨é¢„æµ‹ã€‚</li>
<li>åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°è¿™äº›é¢„æµ‹ç»“æœï¼Œä½ åº”è¯¥è·å¾—äº†ä¸€ä¸ªæ¯”ç¬¬ä¸€ä¸ªæ¨¡å‹é«˜ä¸€ç‚¹çš„å‡†ç¡®ç‡ï¼Œï¼ˆå¤§çº¦ 0.5% åˆ° 1.5%ï¼‰ï¼Œæ­å–œï¼Œä½ å·²ç»å¼„å‡ºäº†ä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨æ¨¡å‹!</li>
</ol>
</li>
</ol>
<h2 id="ç¬¬07ç« -é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—"><a href="#ç¬¬07ç« -é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—" class="headerlink" title="ç¬¬07ç«  é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—"></a>ç¬¬07ç«  é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—</h2><p>åˆå¹¶äº†ä¸€ç»„åˆ†ç±»å™¨çš„é¢„æµ‹ï¼ˆåƒåˆ†ç±»æˆ–è€…å›å½’ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªæ¯”å•ä¸€åˆ†ç±»å™¨æ›´å¥½çš„é¢„æµ‹ç»“æœã€‚è¿™ä¸€ç»„åˆ†ç±»å™¨å°±å«åš<strong>é›†æˆ</strong>ï¼›å› æ­¤ï¼Œè¿™ä¸ªæŠ€æœ¯å°±å«åš<strong>é›†æˆå­¦ä¹ </strong>ï¼Œä¸€ä¸ªé›†æˆå­¦ä¹ ç®—æ³•å°±å«åš<strong>é›†æˆæ–¹æ³•</strong>ã€‚ä¸€ç§å†³ç­–æ ‘çš„é›†æˆå°±å«åš<strong>éšæœºæ£®æ—</strong>ã€‚</p>
<p>å³ä½¿æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½æ˜¯ä¸€ä¸ª<strong>å¼±å­¦ä¹ å™¨</strong>ï¼ˆæ„å‘³ç€å®ƒä»¬ä¹Ÿå°±æ¯”ççŒœå¥½ç‚¹ï¼‰ï¼Œé›†æˆåä»ç„¶æ˜¯ä¸€ä¸ª<strong>å¼ºå­¦ä¹ å™¨</strong>ï¼ˆé«˜å‡†ç¡®ç‡ï¼‰ï¼Œåªè¦æœ‰è¶³å¤Ÿæ•°é‡çš„å¼±å­¦ä¹ è€…ï¼Œä»–ä»¬å°±è¶³å¤Ÿå¤šæ ·åŒ–ã€‚</p>
<h3 id="æŠ•ç¥¨åˆ†ç±»"><a href="#æŠ•ç¥¨åˆ†ç±»" class="headerlink" title="æŠ•ç¥¨åˆ†ç±»"></a>æŠ•ç¥¨åˆ†ç±»</h3><p>ä¸€ä¸ªéå¸¸ç®€å•å»åˆ›å»ºä¸€ä¸ªæ›´å¥½çš„åˆ†ç±»å™¨çš„æ–¹æ³•å°±æ˜¯å»æ•´åˆæ¯ä¸€ä¸ªåˆ†ç±»å™¨çš„é¢„æµ‹ç„¶åç»è¿‡æŠ•ç¥¨å»é¢„æµ‹åˆ†ç±»ã€‚è¿™ç§åˆ†ç±»å™¨å°±å«åš<strong>ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨</strong></p>
<blockquote>
<p>æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½åœ¨åŒä¸€ä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒï¼Œå¯¼è‡´å…¶å¾ˆå¯èƒ½ä¼šå‘ç”Ÿè¿™æ ·çš„é”™è¯¯ã€‚ä»–ä»¬å¯èƒ½ä¼šçŠ¯åŒä¸€ç§é”™è¯¯ï¼Œæ‰€ä»¥ä¹Ÿä¼šæœ‰å¾ˆå¤šç¥¨æŠ•ç»™äº†é”™è¯¯ç±»åˆ«å¯¼è‡´é›†æˆçš„å‡†ç¡®ç‡ä¸‹é™ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åº”è¯¥ç”¨å®Œå…¨ä¸åŒçš„ç®—æ³•å¾—åˆ°å¤šæ ·çš„åˆ†ç±»å™¨ï¼Œä½¿å®ƒä»¬ä¼šåšå‡ºä¸åŒç§ç±»çš„é”™è¯¯ï¼Œæé«˜é›†æˆçš„æ­£ç¡®ç‡ã€‚</p>
<p>å¦‚æœæ‰€æœ‰çš„åˆ†ç±»å™¨éƒ½èƒ½å¤Ÿé¢„æµ‹ç±»åˆ«çš„æ¦‚ç‡ï¼ˆæœ‰ä¸€ä¸ª<code>predict_proba()</code>æ–¹æ³•ï¼‰ï¼Œå¯ä»¥è®© sklearn ä»¥æœ€é«˜çš„ç±»æ¦‚ç‡æ¥é¢„æµ‹è¿™ä¸ªç±»ï¼Œå¹³å‡åœ¨æ‰€æœ‰çš„åˆ†ç±»å™¨ä¸Šã€‚è¿™ç§æ–¹å¼å«åš<strong>è½¯æŠ•ç¥¨</strong>ã€‚å…¶è¡¨ç°æ¯”ç¡¬æŠ•ç¥¨æ›´å¥½ï¼Œå› ä¸ºç»™äºˆé«˜è‡ªä¿¡çš„æŠ•ç¥¨æ›´å¤§çš„æƒé‡ã€‚</p>
<h3 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h3><p><strong>æœ‰æ”¾å›é‡‡æ ·è¢«ç§°ä¸ºè£…è¢‹ï¼ˆ<em>Bagging</em>ï¼Œæ˜¯ <em>bootstrap aggregating</em> çš„ç¼©å†™ï¼‰ã€‚æ— æ”¾å›é‡‡æ ·ç§°ä¸ºç²˜è´´ï¼ˆ<em>pasting</em>ï¼‰</strong></p>
<p>Bagging å’Œ Pasting éƒ½å…è®¸åœ¨å¤šä¸ªåˆ†ç±»å™¨é—´å¯¹è®­ç»ƒé›†è¿›è¡Œå¤šæ¬¡é‡‡æ ·ï¼Œä½†åªæœ‰ Baggingå¯ä»¥é€šè¿‡ä½¿ç”¨ä¸åŒçš„è®­ç»ƒç®—æ³•å»å¾—åˆ°ä¸€äº›ä¸åŒçš„åˆ†ç±»å™¨ã€‚ Pastingæ˜¯å¯¹æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„è®­ç»ƒç®—æ³•ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„è®­ç»ƒé›†ä¸Šå»è®­ç»ƒã€‚</p>
<blockquote>
<p>å½“æ‰€æœ‰çš„åˆ†ç±»å™¨è¢«è®­ç»ƒåï¼Œé›†æˆå¯ä»¥é€šè¿‡å¯¹æ‰€æœ‰åˆ†ç±»å™¨ç»“æœçš„ç®€å•èšåˆæ¥å¯¹æ–°çš„å®ä¾‹è¿›è¡Œé¢„æµ‹ã€‚<strong>èšåˆå‡½æ•°</strong>é€šå¸¸å¯¹åˆ†ç±»æ˜¯<em>ç»Ÿè®¡æ¨¡å¼</em>ï¼ˆä¾‹å¦‚ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨ï¼‰æˆ–è€…å¯¹å›å½’æ˜¯å¹³å‡ã€‚</p>
<p>æ¯ä¸€ä¸ªå•ç‹¬çš„åˆ†ç±»å™¨åœ¨å¦‚æœåœ¨åŸå§‹è®­ç»ƒé›†ä¸Šéƒ½æ˜¯é«˜åå·®ï¼Œä½†æ˜¯èšåˆé™ä½äº†åå·®å’Œæ–¹å·®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé›†æˆçš„ç»“æœæ˜¯æœ‰ä¸€ä¸ªç›¸ä¼¼çš„åå·®ï¼Œä½†æ˜¯å¯¹æ¯”ä¸åœ¨åŸå§‹è®­ç»ƒé›†ä¸Šçš„å•ä¸€åˆ†ç±»å™¨æ¥è®²æœ‰æ›´å°çš„æ–¹å·®ã€‚</p>
</blockquote>
<p>å¦‚æœåŸºåˆ†ç±»å™¨å¯ä»¥é¢„æµ‹ç±»åˆ«æ¦‚ç‡ï¼ˆä¾‹å¦‚å®ƒæ‹¥æœ‰<code>predict_proba()</code>æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆ<code>BaggingClassifier</code>ä¼šè‡ªåŠ¨çš„è¿è¡Œè½¯æŠ•ç¥¨ã€‚</p>
<h4 id="Out-of-bag"><a href="#Out-of-bag" class="headerlink" title="Out-of-bag"></a>Out-of-bag</h4><p>å¯¹äº Bagging æ¥è¯´ï¼Œä¸€äº›å®ä¾‹å¯èƒ½è¢«ä¸€äº›åˆ†ç±»å™¨é‡å¤é‡‡æ ·ï¼Œä½†å…¶ä»–çš„æœ‰å¯èƒ½ä¸ä¼šè¢«é‡‡æ ·ã€‚<code>BaggingClassifier</code>é»˜è®¤æ˜¯æœ‰æ”¾å›çš„é‡‡æ ·<code>m</code>ä¸ªå®ä¾‹ ï¼ˆ<code>bootstrap=True</code>ï¼‰ã€‚æ„å‘³ç€å¹³å‡ä¸‹æ¥åªæœ‰63%çš„è®­ç»ƒå®ä¾‹è¢«æ¯ä¸ªåˆ†ç±»å™¨é‡‡æ ·ï¼Œå‰©ä¸‹çš„37%ä¸ªæ²¡æœ‰è¢«é‡‡æ ·çš„è®­ç»ƒå®ä¾‹å°±å«åš <em>Out-of-Bag</em> å®ä¾‹ã€‚æ³¨æ„å¯¹äºæ¯ä¸€ä¸ªçš„åˆ†ç±»å™¨å®ƒä»¬çš„ 37% ä¸æ˜¯ç›¸åŒçš„ã€‚</p>
<p>å¯ä»¥æ‹¿å‡ºæ¯ä¸€ä¸ªåˆ†ç±»å™¨çš„ oob æ¥è¯„ä¼°é›†æˆæœ¬èº«ã€‚</p>
<h4 id="éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´"><a href="#éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´" class="headerlink" title="éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´"></a>éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´</h4><p><code>BaggingClassifier</code>ä¹Ÿæ”¯æŒé‡‡æ ·ç‰¹å¾ã€‚</p>
<p>å¯¹è®­ç»ƒå®ä¾‹å’Œç‰¹å¾çš„é‡‡æ ·è¢«å«åšéšæœºè´´ç‰‡ã€‚ä¿ç•™äº†æ‰€æœ‰çš„è®­ç»ƒå®ä¾‹ï¼ˆä¾‹å¦‚<code>bootstrap=False</code>å’Œ<code>max_samples=1.0</code>ï¼‰ï¼Œä½†æ˜¯å¯¹ç‰¹å¾é‡‡æ ·ï¼ˆ<code>bootstrap_features=True</code>å¹¶ä¸”/æˆ–è€…<code>max_features</code>å°äº 1.0ï¼‰å«åšéšæœºå­ç©ºé—´ã€‚</p>
<p><strong>é‡‡æ ·ç‰¹å¾å¯¼è‡´æ›´å¤šçš„é¢„æµ‹å¤šæ ·æ€§ï¼Œç”¨é«˜åå·®æ¢ä½æ–¹å·®ã€‚</strong></p>
<h3 id="éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰"><a href="#éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰" class="headerlink" title="éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰"></a>éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰</h3><p>éšæœºæ£®æ—ç®—æ³•åœ¨æ ‘ç”Ÿé•¿æ—¶å¼•å…¥äº†é¢å¤–çš„éšæœºï¼›ä¸åœ¨èŠ‚ç‚¹åˆ†è£‚æ—¶éœ€è¦æ‰¾åˆ°æœ€å¥½åˆ†è£‚ç‰¹å¾ç›¸åï¼ˆè¯¦è§ç¬¬å…­ç« ï¼‰ï¼Œå®ƒ<strong>åœ¨ä¸€ä¸ªéšæœºçš„ç‰¹å¾é›†ä¸­æ‰¾æœ€å¥½çš„ç‰¹å¾ï¼Œ</strong>å¯¼è‡´äº†æ ‘çš„å·®å¼‚æ€§ï¼Œ<strong>å†ä¸€æ¬¡ç”¨é«˜åå·®æ¢ä½æ–¹å·®</strong>ï¼Œæ€»çš„æ¥è¯´æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹ã€‚</p>
<h4 id="æç«¯éšæœºæ ‘"><a href="#æç«¯éšæœºæ ‘" class="headerlink" title="æç«¯éšæœºæ ‘"></a>æç«¯éšæœºæ ‘</h4><p>åœ¨éšæœºæ£®æ—ä¸Šç”Ÿé•¿æ ‘æ—¶ï¼Œåœ¨æ¯ä¸ªç»“ç‚¹åˆ†è£‚æ—¶åªè€ƒè™‘éšæœºç‰¹å¾é›†ä¸Šçš„ç‰¹å¾ã€‚å¯ä»¥é€šè¿‡å¯¹ç‰¹å¾ä½¿ç”¨éšæœºé˜ˆå€¼ä½¿æ ‘æ›´åŠ éšæœºã€‚<strong>è¿™ç§æç«¯éšæœºçš„æ ‘è¢«ç§°ä¸ºExtremely Randomized Treesç®€ç§°ä¸º <em>Extra-Tree</em>ã€‚</strong></p>
<blockquote>
<p>å› ä¸ºåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰¾åˆ°æ¯ä¸ªç‰¹å¾çš„æœ€ä½³é˜ˆå€¼æ˜¯ç”Ÿé•¿æ ‘æœ€è€—æ—¶çš„ä»»åŠ¡ä¹‹ä¸€ï¼Œæ‰€ä»¥ <em>Extra-Tree</em> æ¯”è§„åˆ™çš„éšæœºæ£®æ—è®­ç»ƒæ›´å¿«ã€‚</p>
</blockquote>
<h4 id="ç‰¹å¾é‡è¦åº¦"><a href="#ç‰¹å¾é‡è¦åº¦" class="headerlink" title="ç‰¹å¾é‡è¦åº¦"></a>ç‰¹å¾é‡è¦åº¦</h4><p><strong>é‡è¦çš„ç‰¹å¾ä¼šå‡ºç°åœ¨å•ä¸€å†³ç­–æ ‘æ›´é è¿‘æ ¹éƒ¨çš„ä½ç½®ï¼Œè€Œä¸é‡è¦çš„ç‰¹å¾ä¼šç»å¸¸å‡ºç°åœ¨é è¿‘å¶å­çš„ä½ç½®ã€‚å› æ­¤å¯ä»¥é€šè¿‡è®¡ç®—ä¸€ä¸ªç‰¹å¾åœ¨æ£®æ—çš„å…¨éƒ¨æ ‘ä¸­å‡ºç°çš„å¹³å‡æ·±åº¦æ¥é¢„æµ‹ç‰¹å¾çš„é‡è¦æ€§ã€‚</strong></p>
<p>éšæœºæ£®æ—å¯ä»¥éå¸¸æ–¹ä¾¿å¿«é€Ÿå¾—äº†è§£å“ªäº›ç‰¹å¾å®é™…ä¸Šæ˜¯é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯ä½ éœ€è¦è¿›è¡Œç‰¹å¾é€‰æ‹©çš„æ—¶å€™ã€‚</p>
<h3 id="æå‡"><a href="#æå‡" class="headerlink" title="æå‡"></a>æå‡</h3><p>æå‡ï¼ˆBoostingï¼Œæœ€åˆç§°ä¸º<em>å‡è®¾å¢å¼º</em>ï¼‰æŒ‡çš„æ˜¯å¯ä»¥å°†å‡ ä¸ªå¼±å­¦ä¹ è€…ç»„åˆæˆå¼ºå­¦ä¹ è€…çš„é›†æˆæ–¹æ³•ã€‚å¯¹äºå¤§å¤šæ•°çš„æå‡æ–¹æ³•çš„æ€æƒ³å°±æ˜¯æŒ‰é¡ºåºå»è®­ç»ƒåˆ†ç±»å™¨ï¼Œæ¯ä¸€ä¸ªéƒ½è¦å°è¯•ä¿®æ­£å‰é¢çš„åˆ†ç±»ã€‚ç°å¦‚ä»Šå·²ç»æœ‰å¾ˆå¤šçš„æå‡æ–¹æ³•äº†ï¼Œä½†æœ€è‘—åçš„å°±æ˜¯ <em>Adaboost</em>ï¼ˆé€‚åº”æ€§æå‡ï¼Œæ˜¯ <em>Adaptive Boosting</em> çš„ç®€ç§°ï¼‰ å’Œ <em>Gradient Boosting</em>ï¼ˆæ¢¯åº¦æå‡ï¼‰ã€‚</p>
<h4 id="Adaboost"><a href="#Adaboost" class="headerlink" title="Adaboost"></a>Adaboost</h4><p>ä½¿ä¸€ä¸ªæ–°çš„åˆ†ç±»å™¨å»ä¿®æ­£ä¹‹å‰åˆ†ç±»ç»“æœçš„æ–¹æ³•å°±æ˜¯<strong>å¯¹ä¹‹å‰åˆ†ç±»ç»“æœé”™è¯¯çš„è®­ç»ƒå®ä¾‹å¤šåŠ å…³æ³¨</strong>ã€‚è¿™å¯¼è‡´æ–°çš„é¢„æµ‹å› å­è¶Šæ¥è¶Šå¤šåœ°èšç„¦äºè¿™ç§æƒ…å†µã€‚è¿™æ˜¯ <em>Adaboost</em> ä½¿ç”¨çš„æŠ€æœ¯ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/7-7.png" alt="å›¾7-7"></p>
<blockquote>
<p>åºåˆ—å­¦ä¹ æŠ€æœ¯çš„ä¸€ä¸ªé‡è¦çš„<strong>ç¼ºç‚¹</strong>æ˜¯ï¼šå®ƒä¸èƒ½è¢«å¹¶è¡ŒåŒ–ï¼ˆåªèƒ½æŒ‰æ­¥éª¤ï¼‰ï¼Œå› ä¸ºæ¯ä¸ªåˆ†ç±»å™¨åªèƒ½åœ¨ä¹‹å‰çš„åˆ†ç±»å™¨å·²ç»è¢«è®­ç»ƒå’Œè¯„ä»·åå†è¿›è¡Œè®­ç»ƒã€‚</p>
</blockquote>
<p><strong>Adaboostçš„ç®—æ³•</strong></p>
<p>æ¯ä¸€ä¸ªå®ä¾‹çš„æƒé‡<code>wi</code>åˆå§‹éƒ½è¢«è®¾ä¸º<code>1/m</code></p>
<p>ç¬¬ä¸€ä¸ªåˆ†ç±»å™¨è¢«è®­ç»ƒåï¼Œåœ¨è®­ç»ƒé›†ä¸Šç®—å‡ºæƒé‡è¯¯å·®ç‡<code>r1</code>ï¼š</p>
<p><strong>ç¬¬jä¸ªåˆ†ç±»å™¨çš„æƒé‡è¯¯å·®ç‡ï¼š</strong></p>
<script type="math/tex; mode=display">
r_j\ = \ \frac{\sum_{i=1,\hat y_j^{(i)}\neq y^{(i)}}^m \omega^{(i)}}{\sum _{i=1}^m \omega^{(i)}}</script><p>$\hat y_j^i$ æ˜¯ç¬¬jä¸ªåˆ†ç±»å™¨å¯¹äºç¬¬iä¸ªå®ä¾‹çš„é¢„æµ‹ã€‚</p>
<p><strong>åˆ†ç±»å™¨çš„æƒé‡</strong></p>
<p>å…¶ä¸­<code>Î·</code>æ˜¯è¶…å‚æ•°å­¦ä¹ ç‡ï¼ˆé»˜è®¤ä¸º 1ï¼‰ã€‚åˆ†ç±»å™¨å‡†ç¡®ç‡è¶Šé«˜ï¼Œå®ƒçš„æƒé‡å°±è¶Šé«˜ã€‚</p>
<script type="math/tex; mode=display">
\alpha_j = \eta \log \frac{1-r_j}{r_j}</script><p><strong>æƒé‡æ›´æ–°è§„åˆ™</strong></p>
<p>å¯¹äº<code>i=1, 2, ..., m</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/E7-3.png" alt="å…¬å¼7-3"></p>
<p>éšåæ‰€æœ‰å®ä¾‹çš„æƒé‡éƒ½è¢«å½’ä¸€åŒ–ã€‚</p>
<p>ä¸ºäº†è¿›è¡Œé¢„æµ‹ï¼ŒAdaboost é€šè¿‡åˆ†ç±»å™¨æƒé‡ $Î±_{j}$ç®€å•çš„è®¡ç®—äº†æ‰€æœ‰çš„åˆ†ç±»å™¨å’Œæƒé‡ã€‚é¢„æµ‹ç±»åˆ«ä¼šæ˜¯æƒé‡æŠ•ç¥¨ä¸­ä¸»è¦çš„ç±»åˆ«ã€‚</p>
<p><strong>Adaboost åˆ†ç±»å™¨</strong></p>
<script type="math/tex; mode=display">
\hat y(x)\ = \ {argmax}_k \ \ \sum^N_{j=1,\hat y_j(x)=k} \alpha_j</script><p>å…¶ä¸­<code>N</code>æ˜¯åˆ†ç±»å™¨çš„æ•°é‡ã€‚</p>
<blockquote>
<p>sklearn é€šå¸¸ä½¿ç”¨ Adaboost çš„å¤šåˆ†ç±»ç‰ˆæœ¬ <em>SAMME</em>ï¼ˆ<em>åˆ†æ®µåŠ å»ºæ¨¡ä½¿ç”¨å¤šç±»æŒ‡æ•°æŸå¤±å‡½æ•°</em>ï¼‰ã€‚å¦‚æœåªæœ‰ä¸¤ç±»åˆ«ï¼Œé‚£ä¹ˆ <em>SAMME</em> æ˜¯ä¸ Adaboost ç›¸åŒçš„ã€‚å¦‚æœåˆ†ç±»å™¨å¯ä»¥é¢„æµ‹ç±»åˆ«æ¦‚ç‡ï¼ˆæœ‰<code>predict_proba()</code>ï¼‰ï¼Œå¦‚æœ sklearn å¯ä»¥ä½¿ç”¨ <em>SAMME</em> å«åš<code>SAMME.R</code>çš„å˜é‡ï¼ˆR ä»£è¡¨â€œREALâ€ï¼‰ï¼Œè¿™ç§ä¾èµ–äºç±»åˆ«æ¦‚ç‡çš„é€šå¸¸æ¯”ä¾èµ–äºåˆ†ç±»å™¨çš„æ›´å¥½ã€‚</p>
</blockquote>
<p>å¦‚æœ Adaboost é›†æˆ<strong>è¿‡æ‹Ÿåˆ</strong>ï¼Œå¯ä»¥å°è¯•<strong>å‡å°‘åŸºåˆ†ç±»å™¨çš„æ•°é‡</strong>æˆ–è€…<strong>å¯¹åŸºåˆ†ç±»å™¨ä½¿ç”¨æ›´å¼ºçš„æ­£åˆ™åŒ–</strong>ã€‚</p>
<h4 id="æ¢¯åº¦æå‡"><a href="#æ¢¯åº¦æå‡" class="headerlink" title="æ¢¯åº¦æå‡"></a>æ¢¯åº¦æå‡</h4><p>æ¢¯åº¦æå‡ä¹Ÿæ˜¯é€šè¿‡å‘é›†æˆä¸­é€æ­¥å¢åŠ åˆ†ç±»å™¨è¿è¡Œçš„ï¼Œæ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½ä¿®æ­£ä¹‹å‰çš„åˆ†ç±»ç»“æœã€‚ç„¶è€Œï¼Œå¹¶ä¸åƒ Adaboost é‚£æ ·æ¯ä¸€æ¬¡è¿­ä»£éƒ½æ›´æ”¹å®ä¾‹çš„æƒé‡ï¼Œè¿™ä¸ªæ–¹æ³•<strong>ä½¿ç”¨æ–°çš„åˆ†ç±»å™¨å»æ‹Ÿåˆå‰é¢åˆ†ç±»å™¨é¢„æµ‹çš„<em>æ®‹å·®</em> </strong>ã€‚</p>
<p><strong>æ¢¯åº¦æå‡å›å½’æ ‘</strong>ï¼ˆGBRTï¼Œ<em>Gradient Tree Boosting</em> æˆ–è€… <em>Gradient Boosted Regression Trees</em>ï¼‰</p>
<p><strong>æ¢¯åº¦æå‡å†³ç­–æ ‘</strong> (GBDTï¼Œ <em>Gradient Boosted Decision Trees</em>)æ˜¯æ¢¯åº¦æå‡(GB)ç®—æ³•é™å®šåŸºå­¦ä¹ å™¨æ˜¯<strong>å›å½’å†³ç­–æ ‘æ—¶çš„æ¨¡å‹ï¼Œå°¤å…¶æ˜¯CARTå›å½’æ ‘</strong>ã€‚</p>
<p>sklean ä¸­çš„<code>GradientBoostingRegressor</code>å¯ä»¥ç”¨æ¥è®­ç»ƒ GBRT é›†æˆï¼Œä¹Ÿæœ‰è¶…å‚æ•°å»æ§åˆ¶é›†æˆè®­ç»ƒï¼Œä¾‹å¦‚åŸºåˆ†ç±»å™¨çš„æ•°é‡ï¼ˆ<code>n_estimators</code>ï¼‰ã€‚è¶…å‚æ•°<code>learning_rate</code> ç¡®ç«‹äº†æ¯ä¸ªæ ‘çš„è´¡çŒ®ã€‚</p>
<blockquote>
<p>å¦‚æœæŠŠ<code>learning_rate</code>è®¾ç½®ä¸ºä¸€ä¸ªå¾ˆå°çš„æ ‘ï¼Œä¾‹å¦‚ 0.1ï¼Œåœ¨é›†æˆä¸­å°±éœ€è¦æ›´å¤šçš„æ ‘å»æ‹Ÿåˆè®­ç»ƒé›†ï¼Œä½†é¢„æµ‹é€šå¸¸ä¼šæ›´å¥½ã€‚è¿™ä¸ªæ­£åˆ™åŒ–æŠ€æœ¯å«åš <strong><em>shrinkage</em></strong>ã€‚</p>
</blockquote>
<h5 id="Early-stop-æ—©åœ"><a href="#Early-stop-æ—©åœ" class="headerlink" title="Early stop(æ—©åœ)"></a>Early stop(æ—©åœ)</h5><p><code>GradientBoostingRegressor</code>æœ‰æ–¹æ³•<code>staged_predict()</code>ï¼šå®ƒåœ¨è®­ç»ƒçš„æ¯ä¸ªé˜¶æ®µè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<p>ä¸å…ˆåœ¨ä¸€å¤§å †æ ‘ä¸­è®­ç»ƒï¼Œç„¶åå†å›å¤´å»æ‰¾æœ€ä¼˜æ•°ç›®ç›¸åã€‚å¯ä»¥é€šè¿‡è®¾ç½®<code>warm_start=True</code>æ¥å®ç° æ—©åœï¼Œè¿™ä½¿å¾—å½“<code>fit()</code>æ–¹æ³•è¢«è°ƒç”¨æ—¶ sklearn ä¿ç•™ç°æœ‰æ ‘ï¼Œå¹¶å…è®¸å¢é‡è®­ç»ƒã€‚</p>
<p><code>GradientBoostingRegressor</code>ä¹Ÿæ”¯æŒæŒ‡å®šç”¨äºè®­ç»ƒæ¯æ£µæ ‘çš„è®­ç»ƒå®ä¾‹æ¯”ä¾‹çš„è¶…å‚æ•°<code>subsample</code>ã€‚ä¾‹å¦‚å¦‚æœ<code>subsample=0.25</code>ï¼Œé‚£ä¹ˆæ¯ä¸ªæ ‘éƒ½ä¼šåœ¨ 25% éšæœºé€‰æ‹©çš„è®­ç»ƒå®ä¾‹ä¸Šè®­ç»ƒã€‚è¿™ä¹Ÿæ˜¯ä¸ªé«˜åå·®æ¢ä½æ–¹å·®çš„ä½œç”¨ã€‚åŒæ ·ä¹ŸåŠ é€Ÿäº†è®­ç»ƒã€‚è¿™ä¸ªæŠ€æœ¯å«åš<strong><em>éšæœºæ¢¯åº¦æå‡</em></strong>ã€‚</p>
<h4 id="æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰"><a href="#æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰" class="headerlink" title="æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰"></a>æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰</h4><ol>
<li>æå‡æ ‘åªä½¿ç”¨äº†ä¸€é˜¶æ³°å‹’å±•å¼€ï¼Œè€ŒXGBoostä½¿ç”¨äº†äºŒé˜¶æ³°å‹’å±•å¼€ã€‚</li>
<li>xgbooståœ¨<strong>ä»£ä»·å‡½æ•°é‡ŒåŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦</strong>ã€‚</li>
<li><strong>åˆ—æŠ½æ ·ï¼ˆcolumn subsamplingï¼‰</strong>ã€‚xgboostå€Ÿé‰´äº†éšæœºæ£®æ—çš„åšæ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·ï¼ˆå³æ¯æ¬¡çš„è¾“å…¥ç‰¹å¾ä¸æ˜¯å…¨éƒ¨ç‰¹å¾ï¼‰ï¼Œä¸ä»…èƒ½é™ä½è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½å‡å°‘è®¡ç®—</li>
<li><strong>å¹¶è¡ŒåŒ–å¤„ç†</strong>ï¼šåœ¨è®­ç»ƒä¹‹å‰ï¼Œé¢„å…ˆå¯¹æ¯ä¸ªç‰¹å¾å†…éƒ¨è¿›è¡Œäº†æ’åºæ‰¾å‡ºå€™é€‰åˆ‡å‰²ç‚¹ï¼Œç„¶åä¿å­˜ä¸ºblockç»“æ„ï¼Œåé¢çš„è¿­ä»£ä¸­é‡å¤åœ°ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œå¤§å¤§å‡å°è®¡ç®—é‡ã€‚</li>
</ol>
<p>xgboostå·¥å…·æ”¯æŒè‡ªå®šä¹‰ä»£ä»·å‡½æ•°ï¼Œåªè¦å‡½æ•°å¯ä¸€é˜¶å’ŒäºŒé˜¶æ±‚å¯¼ã€‚ä¾‹å¦‚ï¼Œxgboostæ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œè¿™ä¸ªæ—¶å€™xgboostç›¸å½“äºå¸¦L1å’ŒL2æ­£åˆ™åŒ–é¡¹çš„é€»è¾‘æ–¯è’‚å›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–è€…çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰</p>
<p><a href="https://zhuanlan.zhihu.com/p/57814935" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<h3 id="Stacking"><a href="#Stacking" class="headerlink" title="Stacking"></a>Stacking</h3><p><strong><em>Stacking</em>ï¼ˆ<em>stacked generalization</em> çš„ç¼©å†™ï¼‰ï¼Œè¿™ä¸ªç®—æ³•ä¸ä½¿ç”¨çç¢çš„å‡½æ•°ï¼ˆå¦‚ç¡¬æŠ•ç¥¨ï¼‰æ¥èšåˆé›†åˆä¸­æ‰€æœ‰åˆ†ç±»å™¨çš„é¢„æµ‹ï¼Œæˆ‘ç›´æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥æ‰§è¡Œè¿™ä¸ªèšåˆã€‚</strong></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/7-12.png" alt="å›¾7-12"></p>
<p>ä¸ºäº†è®­ç»ƒè¿™ä¸ª <em>blender</em> ï¼Œä¸€ä¸ªé€šç”¨çš„æ–¹æ³•æ˜¯<strong>é‡‡ç”¨ä¿æŒé›†</strong>ã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œè®­ç»ƒé›†è¢«åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼Œç¬¬ä¸€ä¸ªå­é›†è¢«ç”¨ä½œè®­ç»ƒç¬¬ä¸€å±‚ã€‚</li>
<li>ç¬¬ä¸€å±‚çš„åˆ†ç±»å™¨è¢«ç”¨æ¥é¢„æµ‹ç¬¬äºŒä¸ªå­é›†ï¼ˆä¿æŒé›†ï¼‰ã€‚</li>
<li>ä½¿ç”¨è¿™äº›é¢„æµ‹ç»“æœä½œä¸ºè¾“å…¥ç‰¹å¾æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è®­ç»ƒé›†ï¼Œä¿æŒç›®æ ‡æ•°å€¼ä¸å˜ï¼Œéšå <em>blender</em> åœ¨è¿™ä¸ªæ–°çš„è®­ç»ƒé›†ä¸Šè®­ç»ƒã€‚</li>
</ol>
<p>sklearn å¹¶ä¸ç›´æ¥æ”¯æŒ stacking ï¼Œä½†å¯ä»¥ä½¿ç”¨å¼€æºé¡¹ç›®<a href="https://github.com/Menelau/DESlib" target="_blank" rel="noopener">DESlib</a>ï¼ˆåŸºäºsklearnï¼‰</p>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å¦‚æœä½ åœ¨ç›¸åŒè®­ç»ƒé›†ä¸Šè®­ç»ƒ 5 ä¸ªä¸åŒçš„æ¨¡å‹ï¼Œå®ƒä»¬éƒ½æœ‰ 95% çš„å‡†ç¡®ç‡ï¼Œé‚£ä¹ˆä½ æ˜¯å¦å¯ä»¥é€šè¿‡ç»„åˆè¿™ä¸ªæ¨¡å‹æ¥å¾—åˆ°æ›´å¥½çš„ç»“æœï¼Ÿå¦‚æœå¯ä»¥é‚£æ€ä¹ˆåšå‘¢ï¼Ÿå¦‚æœä¸å¯ä»¥è¯·ç»™å‡ºç†ç”±ã€‚</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡é›†æˆå­¦ä¹ å°†5ä¸ªæ¨¡å‹é›†æˆåœ¨ä¸€èµ·</p>
<p>é€šè¿‡æŠ•ç¥¨çš„æ–¹å¼é¢„æµ‹</p>
</blockquote>
</li>
<li><p>è½¯æŠ•ç¥¨å’Œç¡¬æŠ•ç¥¨åˆ†ç±»å™¨ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<blockquote>
<p>ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨è®¡ç®—é›†åˆä¸­æ¯ä¸ªåˆ†ç±»å™¨çš„æŠ•ç¥¨ï¼Œå¹¶é€‰æ‹©å¾—åˆ°æœ€å¤šé€‰ç¥¨çš„ç±»ã€‚</p>
<p>è½¯æŠ•ç¥¨åˆ†ç±»å™¨è®¡ç®—æ¯ä¸ªç±»çš„å¹³å‡ä¼°è®¡ç±»æ¦‚ç‡ï¼Œå¹¶é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„ç±»ï¼Œä¹Ÿå°±æ˜¯ç»™ç½®ä¿¡åº¦é«˜çš„ç±»æ›´é«˜çš„æƒé‡ï¼Œä½†æ˜¯å‰ææ˜¯å¯ä»¥å¾—åˆ°æ¯ä¸ªç±»çš„æ¦‚ç‡ã€‚</p>
</blockquote>
</li>
<li><p>æ˜¯å¦æœ‰å¯èƒ½é€šè¿‡åˆ†é…å¤šä¸ªæœåŠ¡å™¨æ¥åŠ é€Ÿ bagging é›†æˆç³»ç»Ÿçš„è®­ç»ƒï¼Ÿpasting é›†æˆï¼Œboosting é›†æˆï¼Œéšæœºæ£®æ—ï¼Œæˆ– stacking é›†æˆæ€ä¹ˆæ ·ï¼Ÿ</p>
<blockquote>
<p>baggingï¼Œpastingå’Œstackingéƒ½å¯ä»¥å¹¶è¡Œï¼Œéšæœºæ£®æ—ç®—bagging</p>
<p>boostingæ˜¯åºåˆ—å­¦ä¹ æŠ€æœ¯ï¼Œä¸èƒ½å¹¶è¡Œã€‚</p>
</blockquote>
</li>
<li><p>out-of-bag è¯„ä»·çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>åŒ…å¤–é›†æˆä¸­çš„æ¯ä¸ªé¢„æµ‹å™¨éƒ½ä½¿ç”¨å®ƒæ²¡æœ‰ç»è¿‡è®­ç»ƒçš„å®ä¾‹è¿›è¡Œè¯„ä¼°ï¼Œä¸éœ€è¦é¢å¤–çš„éªŒè¯é›†ã€‚</p>
</blockquote>
</li>
<li><p>æ˜¯ä»€ä¹ˆä½¿ Extra-Tree æ¯”è§„åˆ™éšæœºæ£®æ—æ›´éšæœºå‘¢ï¼Ÿè¿™ä¸ªé¢å¤–çš„éšæœºæœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿé‚£è¿™ä¸ª Extra-Tree æ¯”è§„åˆ™éšæœºæ£®æ—è°æ›´å¿«å‘¢ï¼Ÿ</p>
<blockquote>
<p>Extra-Treeåœ¨éšæœºæ£®æ—ä¸Šç”Ÿé•¿æ ‘æ—¶ï¼Œåœ¨æ¯ä¸ªç»“ç‚¹åˆ†è£‚æ—¶åªè€ƒè™‘éšæœºç‰¹å¾é›†ä¸Šçš„ç‰¹å¾ï¼Œé¢ä¸æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰¾åˆ°æ¯ä¸ªç‰¹å¾çš„æœ€ä½³é˜ˆå€¼ï¼Œæ‰€ä»¥è®­ç»ƒæ—¶ <em>Extra-Tree</em> æ¯”è§„åˆ™çš„éšæœºæ£®æ—æ›´å¿«ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„ Adaboost æ¨¡å‹æ¬ æ‹Ÿåˆï¼Œé‚£ä¹ˆä½ éœ€è¦æ€ä¹ˆè°ƒæ•´è¶…å‚æ•°ï¼Ÿ</p>
<blockquote>
<p>å¦‚æœ Adaboost é›†æˆ<strong>è¿‡æ‹Ÿåˆ</strong>ï¼Œå¯ä»¥å°è¯•<strong>å‡å°‘åŸºåˆ†ç±»å™¨çš„æ•°é‡</strong>æˆ–è€…<strong>å¯¹åŸºåˆ†ç±»å™¨ä½¿ç”¨æ›´å¼ºçš„æ­£åˆ™åŒ–</strong>ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„æ¢¯åº¦æå‡è¿‡æ‹Ÿåˆï¼Œé‚£ä¹ˆä½ åº”è¯¥è°ƒé«˜è¿˜æ˜¯è°ƒä½å­¦ä¹ ç‡å‘¢ï¼Ÿ</p>
<blockquote>
<p>é™ä½å­¦ä¹ ç‡ï¼Œæˆ–ä½¿ç”¨æ—©åœçš„æ–¹æ³•æ¥å¯»æ‰¾æ­£ç¡®æ•°é‡çš„åŸºå­¦ä¹ å™¨ã€‚</p>
</blockquote>
</li>
<li><p>å¯¼å…¥ MNIST æ•°æ®ï¼ˆç¬¬ä¸‰ç« ä¸­ä»‹ç»ï¼‰ï¼ŒæŠŠå®ƒåˆ‡åˆ†è¿›ä¸€ä¸ªè®­ç»ƒé›†ï¼Œä¸€ä¸ªéªŒè¯é›†ï¼Œå’Œä¸€ä¸ªæµ‹è¯•é›†ï¼ˆä¾‹å¦‚ 40000 ä¸ªå®ä¾‹è¿›è¡Œè®­ç»ƒï¼Œ10000 ä¸ªè¿›è¡ŒéªŒè¯ï¼Œ10000 ä¸ªè¿›è¡Œæµ‹è¯•ï¼‰ã€‚ç„¶åè®­ç»ƒå¤šä¸ªåˆ†ç±»å™¨ï¼Œä¾‹å¦‚ä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œä¸€ä¸ª Extra-Tree åˆ†ç±»å™¨å’Œä¸€ä¸ª SVMã€‚æ¥ä¸‹æ¥ï¼Œå°è¯•å°†å®ƒä»¬ç»„åˆæˆé›†æˆï¼Œä½¿ç”¨è½¯æˆ–ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨æ¥èƒœè¿‡éªŒè¯é›†ä¸Šçš„æ‰€æœ‰é›†åˆã€‚ä¸€æ—¦æ‰¾åˆ°äº†ï¼Œå°±åœ¨æµ‹è¯•é›†ä¸Šå®éªŒã€‚ä¸å•ä¸ªåˆ†ç±»å™¨ç›¸æ¯”ï¼Œå®ƒçš„æ€§èƒ½æœ‰å¤šå¥½ï¼Ÿ</p>
</li>
<li><p>ä»ç»ƒä¹  8 ä¸­è¿è¡Œä¸ªä½“åˆ†ç±»å™¨æ¥å¯¹éªŒè¯é›†è¿›è¡Œé¢„æµ‹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è®­ç»ƒé›†å¹¶ç”Ÿæˆé¢„æµ‹ï¼šæ¯ä¸ªè®­ç»ƒå®ä¾‹æ˜¯ä¸€ä¸ªå‘é‡ï¼ŒåŒ…å«æ¥è‡ªæ‰€æœ‰åˆ†ç±»å™¨çš„å›¾åƒçš„é¢„æµ‹é›†ï¼Œç›®æ ‡æ˜¯å›¾åƒç±»åˆ«ã€‚ç¥è´ºä½ ï¼Œä½ åˆšåˆšè®­ç»ƒäº†ä¸€ä¸ª <em>blender</em> ï¼Œå’Œåˆ†ç±»å™¨ä¸€èµ·ç»„æˆäº†ä¸€ä¸ªå åŠ ç»„åˆï¼ç°åœ¨è®©æˆ‘ä»¬æ¥è¯„ä¼°æµ‹è¯•é›†ä¸Šçš„é›†åˆã€‚å¯¹äºæµ‹è¯•é›†ä¸­çš„æ¯ä¸ªå›¾åƒï¼Œç”¨æ‰€æœ‰åˆ†ç±»å™¨è¿›è¡Œé¢„æµ‹ï¼Œç„¶åå°†é¢„æµ‹é¦ˆé€åˆ° <em>blender</em> ä»¥è·å¾—é›†åˆçš„é¢„æµ‹ã€‚å®ƒä¸ä½ æ—©æœŸè®­ç»ƒè¿‡çš„æŠ•ç¥¨åˆ†ç±»å™¨ç›¸æ¯”å¦‚ä½•ï¼Ÿ</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬08ç« -é™ç»´"><a href="#ç¬¬08ç« -é™ç»´" class="headerlink" title="ç¬¬08ç«  é™ç»´"></a>ç¬¬08ç«  é™ç»´</h2><blockquote>
<p>è­¦å‘Šï¼šé™ç»´ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œå› æ­¤å³ä½¿è¿™ç§æ–¹æ³•å¯ä»¥åŠ å¿«è®­ç»ƒçš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©ç³»ç»Ÿè¡¨ç°çš„ç¨å¾®å·®ä¸€ç‚¹ã€‚é™ç»´ä¼šè®©å·¥ä½œæµæ°´çº¿æ›´å¤æ‚å› è€Œæ›´éš¾ç»´æŠ¤ã€‚æ‰€æœ‰åº”è¯¥å…ˆå°è¯•ä½¿ç”¨åŸå§‹çš„æ•°æ®æ¥è®­ç»ƒï¼Œå¦‚æœè®­ç»ƒé€Ÿåº¦å¤ªæ…¢çš„è¯å†è€ƒè™‘ä½¿ç”¨é™ç»´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé™ä½è®­ç»ƒé›†æ•°æ®çš„ç»´åº¦å¯èƒ½ä¼šç­›é€‰æ‰ä¸€äº›å™ªéŸ³å’Œä¸å¿…è¦çš„ç»†èŠ‚ï¼Œè¿™å¯èƒ½ä¼šè®©ç»“æœæ¯”é™ç»´ä¹‹å‰æ›´å¥½ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸ä¸ä¼šå‘ç”Ÿï¼›å®ƒåªä¼šåŠ å¿«è®­ç»ƒçš„é€Ÿåº¦ï¼‰ã€‚</p>
</blockquote>
<p>é™ç»´é™¤äº†å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦å¤–ï¼Œåœ¨æ•°æ®å¯è§†åŒ–æ–¹é¢ï¼ˆæˆ–è€… DataVizï¼‰ä¹Ÿååˆ†æœ‰ç”¨ã€‚é™ä½ç‰¹å¾ç»´åº¦åˆ° 2ï¼ˆæˆ–è€… 3ï¼‰ç»´ä»è€Œå¯ä»¥åœ¨å›¾ä¸­ç”»å‡ºä¸€ä¸ªé«˜ç»´åº¦çš„è®­ç»ƒé›†ï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡è§†è§‰ç›´è§‚çš„å‘ç°ä¸€äº›éå¸¸é‡è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚èšç±»ã€‚</p>
<p><strong>ä¸¤ç§ä¸»è¦çš„é™ç»´æ–¹æ³•ï¼šæŠ•å½±ï¼ˆprojectionï¼‰å’Œæµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰ï¼Œä¸‰ç§æµè¡Œçš„é™ç»´æŠ€æœ¯ï¼šä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ï¼Œæ ¸ä¸»æˆåˆ†åˆ†æï¼ˆKernel PCAï¼‰å’Œå±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰ã€‚</strong></p>
<h3 id="ç»´æ•°ç¾éš¾ï¼ˆcurse-of-dimentionalityï¼‰"><a href="#ç»´æ•°ç¾éš¾ï¼ˆcurse-of-dimentionalityï¼‰" class="headerlink" title="ç»´æ•°ç¾éš¾ï¼ˆcurse of dimentionalityï¼‰"></a>ç»´æ•°ç¾éš¾ï¼ˆcurse of dimentionalityï¼‰</h3><p>ä¸€ä¸ª 1,0000 ç»´çš„å•ä½è¶…æ­£æ–¹ä½“ä¸­ï¼Œéšæœºé€‰çš„ç‚¹ç¦»æ‰€æœ‰è¾¹ç•Œå¤§äº 0.001ï¼ˆé è¿‘ä¸­é—´ä½ç½®ï¼‰çš„æ¦‚ç‡ï¼ˆ$1-0.998^{10000}$ï¼‰ï¼Œè¿‘ä¼¼äº1ï¼Œåœ¨é«˜ç»´è¶…æ­£æ–¹ä½“ä¸­ï¼Œå¤§å¤šæ•°ç‚¹éƒ½åˆ†å¸ƒåœ¨è¾¹ç•Œå¤„ã€‚</p>
<p>åœ¨ä¸€ä¸ª 1,000,000 ç»´è¶…ç«‹æ–¹ä½“ä¸­éšæœºæŠ½å–ä¸¤ç‚¹çš„å¹³å‡è·ç¦»ï¼Œå¤§æ¦‚ä¸º 408.25ï¼ˆå¤§è‡´ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-50eeccb6ef846e2d0af5daef5cab1fa0.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-50eeccb6ef846e2d0af5daef5cab1fa0.gif" alt="\sqrt{1,000,000/6}"></a>ï¼‰</p>
<p>è¡¨æ˜é«˜ç»´æ•°æ®é›†æœ‰å¾ˆå¤§é£é™©åˆ†å¸ƒçš„éå¸¸ç¨€ç–ï¼šå¤§å¤šæ•°è®­ç»ƒå®ä¾‹å¯èƒ½å½¼æ­¤è¿œç¦»ã€‚ä¹Ÿæ„å‘³ç€ä¸€ä¸ªæ–°å®ä¾‹å¯èƒ½è¿œç¦»ä»»ä½•è®­ç»ƒå®ä¾‹ï¼Œä½¿å¾—é¢„æµ‹çš„å¯é æ€§è¿œä½äºè¾ƒä½ç»´åº¦æ•°æ®çš„é¢„æµ‹ï¼Œå› ä¸ºå®ƒä»¬å°†åŸºäºæ›´å¤§çš„æ¨æµ‹ï¼ˆextrapolationsï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè®­ç»ƒé›†çš„ç»´åº¦è¶Šé«˜ï¼Œè¿‡æ‹Ÿåˆçš„é£é™©å°±è¶Šå¤§ã€‚</p>
<p>ç†è®ºä¸Šæ¥è¯´ï¼Œç»´æ•°çˆ†ç‚¸çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å¢åŠ è®­ç»ƒé›†çš„å¤§å°ä»è€Œè¾¾åˆ°æ‹¥æœ‰è¶³å¤Ÿå¯†åº¦çš„è®­ç»ƒé›†ã€‚</p>
<h3 id="é™ç»´çš„ä¸»è¦æ–¹æ³•"><a href="#é™ç»´çš„ä¸»è¦æ–¹æ³•" class="headerlink" title="é™ç»´çš„ä¸»è¦æ–¹æ³•"></a>é™ç»´çš„ä¸»è¦æ–¹æ³•</h3><h4 id="æŠ•å½±ï¼ˆProjectionï¼‰"><a href="#æŠ•å½±ï¼ˆProjectionï¼‰" class="headerlink" title="æŠ•å½±ï¼ˆProjectionï¼‰"></a>æŠ•å½±ï¼ˆProjectionï¼‰</h4><p>å¤§å¤šæ•°ç°å®ç”Ÿæ´»çš„é—®é¢˜ä¸­ï¼Œè®­ç»ƒå®ä¾‹å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰ç»´åº¦ä¸Šå‡åŒ€åˆ†å¸ƒçš„ï¼Œè®¸å¤šç‰¹å¾å‡ ä¹æ˜¯å¸¸æ•°ï¼Œè€Œå…¶ä»–ç‰¹å¾åˆ™é«˜åº¦ç›¸å…³ï¼ˆå¦‚å‰é¢è®¨è®ºçš„ MNISTï¼‰ã€‚<strong>æ‰€æœ‰è®­ç»ƒå®ä¾‹å®é™…ä¸Šä½äºï¼ˆæˆ–æ¥è¿‘ï¼‰é«˜ç»´ç©ºé—´çš„ä½ç»´å­ç©ºé—´å†…ã€‚</strong></p>
<p>æŠ•å½±å¹¶ä¸æ€»æ˜¯é™ç»´çš„æœ€ä½³æ–¹æ³•ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå­ç©ºé—´å¯èƒ½ä¼šæ‰­æ›²å’Œè½¬åŠ¨ã€‚</p>
<h4 id="æµå½¢å­¦ä¹ ï¼ˆManifold-Learningï¼‰"><a href="#æµå½¢å­¦ä¹ ï¼ˆManifold-Learningï¼‰" class="headerlink" title="æµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰"></a>æµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰</h4><p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-4.jpeg" alt="img"></p>
<p>ç‘å£«å·ä¸€ä¸ªæ˜¯äºŒç»´æµå½¢çš„ä¾‹å­ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒäºŒç»´æµå½¢æ˜¯ä¸€ç§äºŒç»´å½¢çŠ¶ï¼Œå®ƒå¯ä»¥åœ¨æ›´é«˜ç»´ç©ºé—´ä¸­å¼¯æ›²æˆ–æ‰­æ›²ã€‚ä¸€ä¸ª<code>d</code>ç»´æµå½¢æ˜¯ç±»ä¼¼äº<code>d</code>ç»´è¶…å¹³é¢çš„<code>n</code>ç»´ç©ºé—´ï¼ˆå…¶ä¸­<code>d &lt; n</code>ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ç‘å£«å·æœ‰äº›åƒ 2D å¹³é¢ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šæ˜¯åœ¨ç¬¬ä¸‰ç»´ä¸­å·æ›²ã€‚</p>
<p><strong>é€šè¿‡å¯¹è®­ç»ƒå®ä¾‹æ‰€åœ¨çš„æµå½¢è¿›è¡Œå»ºæ¨¡ä»è€Œè¾¾åˆ°é™ç»´ç›®çš„ï¼Œå«åšæµå½¢å­¦ä¹ ã€‚</strong>å®ƒä¾èµ–äºæµå½¢çŒœæƒ³ï¼ˆmanifold assumptionï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºæµå½¢å‡è®¾ï¼ˆmanifold hypothesisï¼‰ï¼Œè®¤ä¸ºå¤§å¤šæ•°ç°å®ä¸–ç•Œçš„é«˜ç»´æ•°æ®é›†å¤§éƒ½é è¿‘ä¸€ä¸ªæ›´ä½ç»´çš„æµå½¢ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-6.jpeg" alt="img"></p>
<p>å¦‚æœåœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰é™ä½è®­ç»ƒé›†çš„ç»´æ•°ï¼Œé‚£è®­ç»ƒé€Ÿåº¦è‚¯å®šä¼šåŠ å¿«ï¼Œä½†å¹¶ä¸æ€»æ˜¯ä¼šå¾—å‡ºæ›´å¥½çš„è®­ç»ƒæ•ˆæœï¼›è¿™ä¸€åˆ‡éƒ½å–å†³äºæ•°æ®é›†ã€‚</p>
<h3 id="é™ç»´æŠ€æœ¯"><a href="#é™ç»´æŠ€æœ¯" class="headerlink" title="é™ç»´æŠ€æœ¯"></a>é™ç»´æŠ€æœ¯</h3><h4 id="ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰"><a href="#ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰" class="headerlink" title="ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰"></a>ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰</h4><p>ä¸»æˆåˆ†åˆ†æï¼ˆPrincipal Component Analysisï¼‰æ˜¯ç›®å‰ä¸ºæ­¢æœ€æµè¡Œçš„é™ç»´ç®—æ³•ã€‚é¦–å…ˆå®ƒæ‰¾åˆ°æ¥è¿‘æ•°æ®é›†åˆ†å¸ƒçš„è¶…å¹³é¢ï¼Œç„¶åå°†æ‰€æœ‰çš„æ•°æ®éƒ½æŠ•å½±åˆ°è¿™ä¸ªè¶…å¹³é¢ä¸Šã€‚</p>
<h5 id="ä¿ç•™æœ€å¤§æ–¹å·®"><a href="#ä¿ç•™æœ€å¤§æ–¹å·®" class="headerlink" title="ä¿ç•™æœ€å¤§æ–¹å·®"></a>ä¿ç•™æœ€å¤§æ–¹å·®</h5><p>é€‰æ‹©ä¿æŒæœ€å¤§æ–¹å·®çš„è½´å°†åŸå§‹æ•°æ®é›†æŠ•å½±åˆ°è¯¥è½´ä¸Šçš„å‡æ–¹è·ç¦»æœ€å°ï¼ŒæŸå¤±æ›´å°‘çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-7.jpeg" alt="img"></p>
<h5 id="ä¸»æˆåˆ†ï¼ˆPrinciple-Componetsï¼‰"><a href="#ä¸»æˆåˆ†ï¼ˆPrinciple-Componetsï¼‰" class="headerlink" title="ä¸»æˆåˆ†ï¼ˆPrinciple Componetsï¼‰"></a>ä¸»æˆåˆ†ï¼ˆPrinciple Componetsï¼‰</h5><p> å®šä¹‰ç¬¬<code>i</code>ä¸ªè½´çš„å•ä½çŸ¢é‡è¢«ç§°ä¸ºç¬¬<code>i</code>ä¸ªä¸»æˆåˆ†ï¼ˆPCï¼‰ã€‚</p>
<p><strong>å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰</strong>çš„æ ‡å‡†çŸ©é˜µåˆ†è§£ï¼šå°†è®­ç»ƒé›†çŸ©é˜µ<code>X</code>åˆ†è§£ä¸ºä¸‰ä¸ªçŸ©é˜µ<code>UÂ·Î£Â·V^T</code>çš„ç‚¹ç§¯ï¼Œå…¶ä¸­<code>V^T</code>åŒ…å«æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰ä¸»æˆåˆ†ï¼Œ</p>
<blockquote>
<p>PCA å‡å®šæ•°æ®é›†ä»¥åŸç‚¹ä¸ºä¸­å¿ƒã€‚Scikit-Learn çš„<code>PCA</code>ç±»è´Ÿè´£æ•°æ®é›†ä¸­å¿ƒåŒ–å¤„ç†ã€‚ä½†æ˜¯ï¼Œå¦‚æœè‡ªå·±å®ç° PCAï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–åº“ï¼Œé¦–å…ˆè¦å…ˆå¯¹æ•°æ®åšä¸­å¿ƒåŒ–å¤„ç†ã€‚</p>
</blockquote>
<h5 id="æŠ•å½±åˆ°dç»´ç©ºé—´"><a href="#æŠ•å½±åˆ°dç»´ç©ºé—´" class="headerlink" title="æŠ•å½±åˆ°dç»´ç©ºé—´"></a>æŠ•å½±åˆ°<code>d</code>ç»´ç©ºé—´</h5><script type="math/tex; mode=display">
X_{d-proj} = X\cdot W_d</script><p>$W_d$å®šä¹‰ä¸ºåŒ…å«å‰<code>d</code>ä¸ªä¸»æˆåˆ†çš„çŸ©é˜µï¼ˆå³ç”±<code>V^T</code>çš„å‰<code>d</code>åˆ—ç»„æˆçš„çŸ©é˜µï¼‰</p>
<h5 id="æ–¹å·®è§£é‡Šç‡ï¼ˆExplained-Variance-Ratioï¼‰"><a href="#æ–¹å·®è§£é‡Šç‡ï¼ˆExplained-Variance-Ratioï¼‰" class="headerlink" title="æ–¹å·®è§£é‡Šç‡ï¼ˆExplained Variance Ratioï¼‰"></a>æ–¹å·®è§£é‡Šç‡ï¼ˆExplained Variance Ratioï¼‰</h5><p>æ¯ä¸ªä¸»æˆåˆ†çš„æ–¹å·®è§£é‡Šç‡ï¼Œå¯é€šè¿‡<code>explained_variance_ratio_</code>å˜é‡è·å¾—ã€‚å®ƒè¡¨ç¤ºä½äºæ¯ä¸ªä¸»æˆåˆ†è½´ä¸Šçš„æ•°æ®é›†æ–¹å·®çš„æ¯”ä¾‹ã€‚</p>
<h5 id="é€‰æ‹©æ­£ç¡®çš„ç»´åº¦"><a href="#é€‰æ‹©æ­£ç¡®çš„ç»´åº¦" class="headerlink" title="é€‰æ‹©æ­£ç¡®çš„ç»´åº¦"></a>é€‰æ‹©æ­£ç¡®çš„ç»´åº¦</h5><p>å€¾å‘äºé€‰æ‹©åŠ èµ·æ¥åˆ°æ–¹å·®è§£é‡Šç‡èƒ½å¤Ÿè¾¾åˆ°è¶³å¤Ÿå æ¯”ï¼ˆä¾‹å¦‚ 95%ï¼‰çš„ç»´åº¦çš„æ•°é‡ï¼Œè€Œä¸æ˜¯ä»»æ„é€‰æ‹©è¦é™ä½åˆ°çš„ç»´åº¦æ•°é‡ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-8.jpeg" alt="img"></p>
<h5 id="PCAå‹ç¼©"><a href="#PCAå‹ç¼©" class="headerlink" title="PCAå‹ç¼©"></a>PCAå‹ç¼©</h5><p>åŸå§‹æ•°æ®å’Œé‡æ„æ•°æ®ä¹‹é—´çš„å‡æ–¹è·ç¦»ï¼ˆå‹ç¼©ç„¶åè§£å‹ç¼©ï¼‰è¢«ç§°ä¸ºé‡æ„è¯¯å·®ï¼ˆreconstruction errorï¼‰ã€‚</p>
<p>PCAé€†å˜æ¢</p>
<script type="math/tex; mode=display">
X_{recovered} = X_{d-proj}\cdot W_d^T</script><h5 id="å¢é‡-PCAï¼ˆIncremental-PCAï¼‰"><a href="#å¢é‡-PCAï¼ˆIncremental-PCAï¼‰" class="headerlink" title="å¢é‡ PCAï¼ˆIncremental PCAï¼‰"></a>å¢é‡ PCAï¼ˆIncremental PCAï¼‰</h5><p>æœ‰äº›ç®—æ³•å¦‚SVDéœ€è¦åœ¨å†…å­˜ä¸­å¤„ç†æ•´ä¸ªè®­ç»ƒé›†ã€‚å¯ä»¥å°†è®­ç»ƒé›†åˆ†æ‰¹ï¼Œä¸€æ¬¡åªå¯¹ä¸€ä¸ªæ‰¹é‡ä½¿ç”¨ IPCA ç®—æ³•ã€‚è¿™å¯¹å¤§å‹è®­ç»ƒé›†éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨çº¿åº”ç”¨ PCAï¼ˆå³åœ¨æ–°å®ä¾‹åˆ°è¾¾æ—¶å³æ—¶è¿è¡Œï¼‰ã€‚</p>
<h5 id="éšæœº-PCAï¼ˆRandomized-PCAï¼‰"><a href="#éšæœº-PCAï¼ˆRandomized-PCAï¼‰" class="headerlink" title="éšæœº PCAï¼ˆRandomized PCAï¼‰"></a>éšæœº PCAï¼ˆRandomized PCAï¼‰</h5><p>è¿™æ˜¯ä¸€ç§éšæœºç®—æ³•ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°å‰dä¸ªä¸»æˆåˆ†çš„è¿‘ä¼¼å€¼ã€‚å®ƒçš„è®¡ç®—å¤æ‚åº¦æ˜¯<code>O(m Ã— d^2) + O(d^3)</code>ï¼Œè€Œä¸æ˜¯<code>O(m Ã— n^2) + O(n^3)</code>ï¼Œæ‰€ä»¥å½“<code>d</code>è¿œå°äº<code>n</code>æ—¶ï¼Œå®ƒæ¯”ä¹‹å‰çš„ç®—æ³•å¿«å¾—å¤šã€‚</p>
<h4 id="æ ¸-PCAï¼ˆKernel-PCAï¼‰"><a href="#æ ¸-PCAï¼ˆKernel-PCAï¼‰" class="headerlink" title="æ ¸ PCAï¼ˆKernel PCAï¼‰"></a>æ ¸ PCAï¼ˆKernel PCAï¼‰</h4><p>æ ¸æŠ€å·§ï¼Œä¸€ç§å°†å®ä¾‹éšå¼æ˜ å°„åˆ°éå¸¸é«˜ç»´ç©ºé—´ï¼ˆç§°ä¸ºç‰¹å¾ç©ºé—´ï¼‰çš„æ•°å­¦æŠ€æœ¯ï¼Œè®©æ”¯æŒå‘é‡æœºå¯ä»¥åº”ç”¨äºéçº¿æ€§åˆ†ç±»å’Œå›å½’ã€‚é«˜ç»´ç‰¹å¾ç©ºé—´ä¸­çš„çº¿æ€§å†³ç­–è¾¹ç•Œå¯¹åº”äºåŸå§‹ç©ºé—´ä¸­çš„å¤æ‚éçº¿æ€§å†³ç­–è¾¹ç•Œã€‚</p>
<p>åŒæ ·çš„æŠ€å·§å¯ä»¥åº”ç”¨äº PCAï¼Œä»è€Œå¯ä»¥æ‰§è¡Œå¤æ‚çš„éçº¿æ€§æŠ•å½±æ¥é™ä½ç»´åº¦ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ ¸ PCAï¼ˆkPCAï¼‰ã€‚å®ƒé€šå¸¸èƒ½å¤Ÿå¾ˆå¥½åœ°ä¿ç•™æŠ•å½±åçš„ç°‡ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥å±•å¼€åˆ†å¸ƒè¿‘ä¼¼äºæ‰­æ›²æµå½¢çš„æ•°æ®é›†ã€‚</p>
<p><strong>å¦‚ä½•é€‰æ‹©ä¸€ç§æ ¸å¹¶è°ƒæ•´å‚æ•°</strong></p>
<blockquote>
<ol>
<li>ç½‘æ ¼æœç´¢</li>
<li>éç›‘ç£å­¦ä¹ </li>
</ol>
</blockquote>
<h4 id="å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰"><a href="#å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰" class="headerlink" title="å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰"></a>å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰</h4><p>å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLocally Linear Embeddingï¼‰æ˜¯ä¸€ç§éçº¿æ€§é™ç»´ï¼ˆNLDRï¼‰æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ç§æµå½¢å­¦ä¹ æŠ€æœ¯ã€‚</p>
<p>LLE é¦–å…ˆæµ‹é‡æ¯ä¸ªè®­ç»ƒå®ä¾‹ä¸å…¶æœ€è¿‘é‚»ï¼ˆc.n.ï¼‰ä¹‹é—´çš„çº¿æ€§å…³ç³»ï¼Œç„¶åå¯»æ‰¾èƒ½æœ€å¥½åœ°ä¿ç•™è¿™äº›å±€éƒ¨å…³ç³»çš„è®­ç»ƒé›†çš„ä½ç»´è¡¨ç¤ºã€‚</p>
<blockquote>
<p>æ“…é•¿å±•å¼€æ²¡æœ‰å¤ªå¤šå™ªéŸ³çš„æ‰­æ›²çš„æµå½¢ã€‚</p>
</blockquote>
<h5 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h5><p>å¯¹äºæ¯ä¸ªè®­ç»ƒå®ä¾‹ $x^{(i)}$ï¼Œè¯¥ç®—æ³•è¯†åˆ«å…¶æœ€è¿‘çš„<code>k</code>ä¸ªé‚»å±…ï¼Œç„¶åå°è¯•å°† $x^{(i)}$é‡æ„ä¸ºè¿™äº›é‚»å±…çš„çº¿æ€§å‡½æ•°ã€‚æ‰¾åˆ°æƒé‡ $w_{i,j}$ä»è€Œä½¿  $x^{(i)}$å’Œ $\sum_{j=1}^{m}w_{i,j} x^{(j)}$ä¹‹é—´çš„å¹³æ–¹è·ç¦»å°½å¯èƒ½çš„å°ï¼Œå‡è®¾å¦‚æœ $x^{(j)}$ä¸æ˜¯ $x^{(i)}$çš„<code>k</code>ä¸ªæœ€è¿‘é‚»æ—¶ $w_{i,j}=0$ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¯¹å±€éƒ¨å…³ç³»è¿›è¡Œçº¿æ€§å»ºæ¨¡ </p>
<p>$W=argmin_w\ \sum_{i=1}^m | x^{(i)}-\sum_{j=1}^m w_{i,j}x^{(j)}| ^2 \\ subject \ to \ \left \{  \begin{array}{cc} w_{i,j}=0&amp;\ \ if \ x^{j} \  is \ not \ one \ of \ the \ k \ c.n. \ of \ x^{i} \\ \sum_{j=1}^m w_{i,j}=1&amp; for\ i=1,2, \cdots ,m\end{array}\right.$</p>
<p>ç¬¬äºŒä¸ªçº¦æŸç®€å•åœ°å¯¹æ¯ä¸ªè®­ç»ƒå®ä¾‹ $x^{(i)}$çš„æƒé‡è¿›è¡Œå½’ä¸€åŒ–ã€‚</p>
<p>æƒé‡çŸ©é˜µ $\widehat{W}$åŒ…å«æƒé‡ $\hat{w_{i,j}}$]å¯¹è®­ç»ƒå®ä¾‹çš„çº¿å½¢å…³ç³»è¿›è¡Œç¼–ç ã€‚ç¬¬äºŒæ­¥æ˜¯å°†è®­ç»ƒå®ä¾‹æŠ•å½±åˆ°ä¸€ä¸ª<code>d</code>ç»´ç©ºé—´ï¼ˆ<code>d &lt; n</code>ï¼‰ä¸­å»ï¼ŒåŒæ—¶å°½å¯èƒ½çš„ä¿ç•™è¿™äº›å±€éƒ¨å…³ç³»ã€‚å¦‚æœ $z^{(i)}$æ˜¯ $x^{(i)}$]åœ¨è¿™ä¸ª<code>d</code>ç»´ç©ºé—´çš„å›¾åƒï¼Œé‚£ä¹ˆéœ€è¦ $z^{(i)}$å’Œ $\sum_{j=1}^{m}\hat{w_{i,j}}\ z^{(j)}$ä¹‹é—´çš„å¹³æ–¹è·ç¦»å°½å¯èƒ½çš„å°ã€‚çœ‹èµ·æ¥ä¸ç¬¬ä¸€æ­¥éå¸¸ç›¸ä¼¼ï¼Œä½†ä¸æ˜¯ä¿æŒå®ä¾‹å›ºå®šå¹¶æ‰¾åˆ°æœ€ä½³æƒé‡ï¼Œè€Œæ˜¯<strong>ä¿æŒæƒé‡ä¸å˜ï¼Œå¹¶åœ¨ä½ç»´ç©ºé—´ä¸­æ‰¾åˆ°å®ä¾‹å›¾åƒçš„æœ€ä½³ä½ç½®</strong>ã€‚<code>Z</code>æ˜¯åŒ…å«æ‰€æœ‰ $z^{(i)}$]çš„çŸ©é˜µã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šä¿æŒå…³ç³»çš„åŒæ—¶è¿›è¡Œé™ç»´</p>
<p>$W=argmin_z\ \sum_{i=1}^m | z^{(i)}-\sum_{j=1}^m w_{i,j}z^{(j)}| ^2 $</p>
<p>Scikit-Learn çš„ LLE å®ç°å…·æœ‰å¦‚ä¸‹çš„è®¡ç®—å¤æ‚åº¦ï¼šæŸ¥æ‰¾<code>k</code>ä¸ªæœ€è¿‘é‚»ä¸º<code>O(m log(m) n log(k))</code>ï¼Œä¼˜åŒ–æƒé‡ä¸º<code>O(m n k^3)</code>ï¼Œå»ºç«‹ä½ç»´è¡¨ç¤ºä¸º<code>O(d m^2)</code>ã€‚</p>
<h4 id="å…¶ä»–é™ç»´æ–¹æ³•"><a href="#å…¶ä»–é™ç»´æ–¹æ³•" class="headerlink" title="å…¶ä»–é™ç»´æ–¹æ³•"></a>å…¶ä»–é™ç»´æ–¹æ³•</h4><ul>
<li>å¤šç»´ç¼©æ”¾ï¼ˆMDSï¼‰åœ¨å°è¯•ä¿æŒå®ä¾‹ä¹‹é—´è·ç¦»çš„åŒæ—¶é™ä½äº†ç»´åº¦</li>
<li>Isomap é€šè¿‡å°†æ¯ä¸ªå®ä¾‹è¿æ¥åˆ°æœ€è¿‘çš„é‚»å±…æ¥åˆ›å»ºå›¾å½¢ï¼Œç„¶ååœ¨å°è¯•ä¿æŒå®ä¾‹ä¹‹é—´çš„æµ‹åœ°è·ç¦»æ—¶é™ä½ç»´åº¦ã€‚</li>
<li>t-åˆ†å¸ƒéšæœºé‚»åŸŸåµŒå…¥ï¼ˆt-Distributed Stochastic Neighbor Embeddingï¼Œ<strong>t-SNE</strong>ï¼‰å¯ä»¥ç”¨äºé™ä½ç»´åº¦ï¼ŒåŒæ—¶è¯•å›¾ä¿æŒç›¸ä¼¼çš„å®ä¾‹ä¸´è¿‘å¹¶å°†ä¸ç›¸ä¼¼çš„å®ä¾‹åˆ†å¼€ã€‚å®ƒä¸»è¦ç”¨äºå¯è§†åŒ–ï¼Œå°¤å…¶æ˜¯ç”¨äºå¯è§†åŒ–é«˜ç»´ç©ºé—´ä¸­çš„å®ä¾‹ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥å°†MNISTå›¾åƒé™ç»´åˆ° 2D å¯è§†åŒ–ï¼‰ã€‚</li>
<li>çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLinear Discriminant Analysisï¼ŒLDAï¼‰å®é™…ä¸Šæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œä½†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šå­¦ä¹ ç±»ä¹‹é—´æœ€æœ‰åŒºåˆ«çš„è½´ï¼Œç„¶åä½¿ç”¨è¿™äº›è½´æ¥å®šä¹‰ç”¨äºæŠ•å½±æ•°æ®çš„è¶…å¹³é¢ã€‚LDA çš„å¥½å¤„æ˜¯æŠ•å½±ä¼šå°½å¯èƒ½åœ°ä¿æŒå„ä¸ªç±»ä¹‹é—´è·ç¦»ï¼Œæ‰€ä»¥åœ¨è¿è¡Œå¦ä¸€ç§åˆ†ç±»ç®—æ³•ï¼ˆå¦‚ SVM åˆ†ç±»å™¨ï¼‰ä¹‹å‰ï¼ŒLDA æ˜¯å¾ˆå¥½çš„é™ç»´æŠ€æœ¯ã€‚</li>
</ul>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å‡å°‘æ•°æ®é›†ç»´åº¦çš„ä¸»è¦åŠ¨æœºæ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>åŠ¨æœºï¼š</p>
<ol>
<li>åŠ å¿«è®­ç»ƒé€Ÿåº¦(ç­›é€‰æ‰ä¸€äº›å™ªéŸ³å’Œä¸å¿…è¦çš„ç»†èŠ‚ï¼Œå¯èƒ½ä¼šè®©ç»“æœæ¯”é™ç»´ä¹‹å‰æ›´å¥½)</li>
<li>æ•°æ®å¯è§†åŒ–æ–¹é¢ï¼šé™ä½ç‰¹å¾ç»´åº¦åˆ° 2ï¼ˆæˆ–è€… 3ï¼‰ç»´ä»è€Œå¯ä»¥åœ¨å›¾ä¸­ç”»å‡ºä¸€ä¸ªé«˜ç»´åº¦çš„è®­ç»ƒé›†ï¼Œå¯ä»¥é€šè¿‡è§†è§‰ç›´è§‚çš„å‘ç°ä¸€äº›éå¸¸é‡è¦çš„ä¿¡æ¯</li>
<li>èŠ‚çœç©ºé—´</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œé™ä½ç®—æ³•åç»­æ€§èƒ½</li>
<li>ä½¿å·¥ä½œæµæ°´çº¿æ›´å¤æ‚å› è€Œæ›´éš¾ç»´æŠ¤</li>
<li>é™ä½å¯è§£é‡Šæ€§</li>
</ol>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯ç»´åº¦çˆ†ç‚¸ï¼Ÿ</p>
<blockquote>
<p>ç»´åº¦çˆ†ç‚¸æ˜¯æŒ‡é«˜ç»´ç©ºé—´ä¸­å‡ºç°äº†è®¸å¤šä½ç»´ç©ºé—´ä¸å­˜åœ¨çš„é—®é¢˜ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„è¡¨ç°æ˜¯ï¼Œéšæœºé‡‡æ ·çš„é«˜ç»´å‘é‡é€šå¸¸éå¸¸ç¨€ç–ï¼Œå¢åŠ äº†è¿‡åº¦æ‹Ÿåˆçš„é£é™©ï¼Œä½¿å¾—åœ¨æ²¡æœ‰å¤§é‡è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹å¾ˆéš¾è¯†åˆ«æ•°æ®ä¸­çš„æ¨¡å¼ã€‚</p>
</blockquote>
</li>
<li><p>ä¸€æ—¦å¯¹æŸæ•°æ®é›†é™ç»´ï¼Œæˆ‘ä»¬å¯èƒ½æ¢å¤å®ƒå—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œæ€æ ·åšæ‰èƒ½æ¢å¤ï¼Ÿå¦‚æœä¸å¯ä»¥ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸€æ—¦æ•°æ®é›†é€šè¿‡é™ç»´é™åˆ°äº†ä¸€ä¸ªè¾ƒå°çš„ç»´åº¦ï¼Œå°±å‡ ä¹ä¸ä¼šå®Œå…¨å¤ç°ï¼Œå› ä¸ºåœ¨ç»´åº¦å‡å°çš„è¿‡ç¨‹ä¸­ï¼ŒæŸå¤±äº†ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼ŒPCAæœ‰é€†è¿‡ç¨‹ï¼Œå¯ä»¥é‡æ„ä¸€ä¸ªå’ŒåŸå§‹æ•°æ®é›†æ¯”è¾ƒç›¸ä¼¼çš„æ•°æ®é›†ï¼Œä½†æ˜¯t-SNEæ²¡æœ‰ã€‚</p>
</blockquote>
</li>
<li><p>PCA å¯ä»¥ç”¨äºé™ä½ä¸€ä¸ªé«˜åº¦éçº¿æ€§å¯¹æ•°æ®é›†å—ï¼Ÿ</p>
<blockquote>
<p>PCAå¯ä»¥æ˜¾è‘—é™ä½å¤§å¤šæ•°æ•°æ®é›†çš„ç»´æ•°ï¼Œå³ä½¿ä»–ä»¬æ˜¯é«˜åº¦éçº¿æ€§çš„ï¼Œå› ä¸ºå®ƒè‡³å°‘å¯ä»¥æ¶ˆé™¤æ— ç”¨çš„ç»´åº¦ï¼Œç„¶è€Œå¦‚æœæ²¡æœ‰æ— ç”¨çš„ç»´åº¦ï¼Œä¾‹å¦‚â€ç‘å£«å·â€ï¼Œä½¿ç”¨PCAé™ç»´å°†ä¼šæŸå¤±è®¸å¤šä¿¡æ¯ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ å¯¹ä¸€ä¸ª 1000 ç»´çš„æ•°æ®é›†åº”ç”¨ PCAï¼ŒåŒæ—¶è®¾ç½®æ–¹å·®è§£é‡Šç‡ä¸º 95%ï¼Œä½ çš„æœ€ç»ˆæ•°æ®é›†å°†ä¼šæœ‰å¤šå°‘ç»´ï¼Ÿ</p>
<blockquote>
<p>å–å†³äºæ•°æ®é›†</p>
<p>å¦‚æœæ•°æ®é›†ç”±å‡ ä¹å®Œå…¨å¯¹é½çš„ç‚¹ç»„æˆï¼Œè¯¥æƒ…å†µä¸‹ï¼ŒPCAå¯ä»¥æŠŠæ•°æ®é™åˆ°ä¸€ç»´ï¼Œå¹¶ä¿æŒ95%çš„æ–¹å·®ç»“å®ç‡</p>
<p>å¦‚æœæ•°æ®é›†ä¸­çš„ç‚¹å®Œå…¨éšæœºï¼Œåˆ™è¯¥æƒ…å†µä¸‹ï¼Œéœ€è¦é™åˆ°æ‰€æœ‰ç»´åº¦ï¼Œå¹¶ä¸”æ¯ä¸€ç»´åº¦éƒ½æœ‰95%çš„æ–¹å·®ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-8.jpeg" alt="img"></p>
</blockquote>
</li>
<li><p>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨æ™®é€šçš„ PCAï¼Œå¢é‡ PCAï¼Œéšæœº PCA å’Œæ ¸ PCAï¼Ÿ</p>
<blockquote>
<p>ä¸€èˆ¬é»˜è®¤ä½¿ç”¨æ™®é€šçš„PCAï¼Œä½†å®ƒåªåœ¨æ•°æ®é›†é€‚åˆå†…å­˜çš„æƒ…å†µä¸‹å·¥ä½œã€‚</p>
<p>å¢é‡PCAå¯¹äºä¸é€‚åˆå†…å­˜çš„å¤§å‹æ•°æ®é›†æœ‰ç”¨ï¼Œå¯ä»¥åˆ†æ‰¹è®­ç»ƒï¼Œä¸€æ¬¡åªå¯¹ä¸€ä¸ªæ‰¹é‡ä½¿ç”¨ IPCA ç®—æ³•ã€‚ä½†å®ƒæ¯”å¸¸è§„PCAè¦æ…¢ï¼Œæ‰€ä»¥å¦‚æœæ•°æ®é›†é€‚åˆå†…å­˜åº”è¯¥é€‰æ‹©å¸¸è§„çš„PCAã€‚å¢é‡PCAä¹Ÿé€‚ç”¨äºåœ¨çº¿ä»»åŠ¡ï¼Œå½“ä¸æ–­æœ‰æ–°å®ä¾‹åˆ°è¾¾ï¼Œéœ€è¦åŠ¨æ€åº”ç”¨PCAæ—¶ã€‚</p>
<p>éšæœºPCAï¼šå½“æƒ³è¦å¤§å¤§å‡å°‘ç»´åº¦å¹¶ä¸”æ•°æ®é›†é€‚åˆæ—¶ï¼Œå®ƒæ¯”æ™®é€šPCAå¿«å¾—å¤šã€‚</p>
<p>æ•°æ®å‘ˆç°å¤æ‚çš„é«˜ç»´éçº¿æ€§æ—¶ï¼Œä½¿ç”¨æ ¸PCA</p>
</blockquote>
</li>
<li><p>ä½ è¯¥å¦‚ä½•è¯„ä»·ä½ çš„é™ç»´ç®—æ³•åœ¨ä½ æ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼Ÿ</p>
<blockquote>
<p>ä¸€ä¸ªé™ç»´ç®—æ³•åœ¨ä¸ä¸¢å¤±å¤ªå¤šä¿¡æ¯çš„æƒ…å†µä¸‹ä»æ•°æ®é›†ä¸­æ¶ˆé™¤äº†å¤§é‡çš„ç»´æ•°ï¼Œé‚£ä¹ˆå®ƒçš„æ€§èƒ½å°±ä¼šå¾ˆå¥½ã€‚</p>
<p>ä¸€ç§æµ‹é‡æ–¹æ³•æ˜¯åº”ç”¨åå‘å˜æ¢å¹¶æµ‹é‡é‡æ„è¯¯å·®ã€‚ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é™ç»´ç®—æ³•éƒ½æä¾›äº†åå‘è½¬æ¢ã€‚</p>
<p>å¦‚æœå°†é™ç»´ä½œä¸ºå¦ä¸€ç§æœºå™¨å­¦ä¹ ç®—æ³•å‰çš„é¢„å¤„ç†æ­¥éª¤ï¼Œé‚£ä¹ˆå¯ä»¥ç®€å•åœ°æµ‹é‡ç¬¬äºŒç§ç®—æ³•çš„æ€§èƒ½;å¦‚æœé™ç»´ä¸ä¼šä¸¢å¤±å¤ªå¤šä¿¡æ¯ï¼Œé‚£ä¹ˆç®—æ³•çš„æ€§èƒ½åº”è¯¥ä¸ä½¿ç”¨åŸå§‹æ•°æ®é›†æ—¶ä¸€æ ·å¥½ã€‚</p>
</blockquote>
</li>
<li><p>å°†ä¸¤ä¸ªä¸åŒçš„é™ç»´ç®—æ³•ä¸²è”ä½¿ç”¨æœ‰æ„ä¹‰å—ï¼Ÿ</p>
<blockquote>
<p>æœ‰</p>
<p>ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ä½¿ç”¨PCAå¿«é€Ÿæ‘†è„±å¤§é‡æ— ç”¨çš„ç»´æ•°ï¼Œç„¶ååº”ç”¨å¦ä¸€ç§æ…¢å¾—å¤šçš„é™ç»´ç®—æ³•ï¼Œå¦‚LLEã€‚è¿™ç§åˆ†ä¸¤æ­¥çš„æ–¹æ³•å¯èƒ½ä¼šäº§ç”Ÿä¸ä»…ä½¿ç”¨LLEç›¸åŒçš„æ€§èƒ½ï¼Œä½†å¤§å¤§ç¼©çŸ­äº†æ—¶é—´ã€‚</p>
</blockquote>
</li>
<li><p>åŠ è½½ MNIST æ•°æ®é›†ï¼ˆåœ¨ç¬¬ 3 ç« ä¸­ä»‹ç»ï¼‰ï¼Œå¹¶å°†å…¶åˆ†æˆä¸€ä¸ªè®­ç»ƒé›†å’Œä¸€ä¸ªæµ‹è¯•é›†ï¼ˆå°†å‰ 60,000 ä¸ªå®ä¾‹ç”¨äºè®­ç»ƒï¼Œå…¶ä½™ 10,000 ä¸ªç”¨äºæµ‹è¯•ï¼‰ã€‚åœ¨æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œå¹¶è®°å½•äº†èŠ±è´¹å¤šé•¿æ—¶é—´ï¼Œç„¶ååœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ PCA é™ä½æ•°æ®é›†çš„ç»´åº¦ï¼Œè®¾ç½®æ–¹å·®è§£é‡Šç‡ä¸º 95%ã€‚åœ¨é™ç»´åçš„æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªæ–°çš„éšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œå¹¶æŸ¥çœ‹éœ€è¦å¤šé•¿æ—¶é—´ã€‚è®­ç»ƒé€Ÿåº¦æ›´å¿«ï¼Ÿæ¥ä¸‹æ¥è¯„ä¼°æµ‹è¯•é›†ä¸Šçš„åˆ†ç±»å™¨ï¼šå®ƒä¸ä»¥å‰çš„åˆ†ç±»å™¨æ¯”è¾ƒèµ·æ¥å¦‚ä½•ï¼Ÿ</p>
</li>
<li><p>ä½¿ç”¨ t-SNE å°† MNIST æ•°æ®é›†ç¼©å‡åˆ°äºŒç»´ï¼Œå¹¶ä½¿ç”¨ Matplotlib ç»˜åˆ¶ç»“æœå›¾ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ 10 ç§ä¸åŒé¢œè‰²çš„æ•£ç‚¹å›¾æ¥è¡¨ç¤ºæ¯ä¸ªå›¾åƒçš„ç›®æ ‡ç±»åˆ«ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥åœ¨æ¯ä¸ªå®ä¾‹çš„ä½ç½®å†™å…¥å½©è‰²æ•°å­—ï¼Œç”šè‡³å¯ä»¥ç»˜åˆ¶æ•°å­—å›¾åƒæœ¬èº«çš„é™ç»´ç‰ˆæœ¬ï¼ˆå¦‚æœç»˜åˆ¶æ‰€æœ‰æ•°å­—ï¼Œåˆ™å¯è§†åŒ–å¯èƒ½ä¼šè¿‡äºæ··ä¹±ï¼Œå› æ­¤æ‚¨åº”è¯¥ç»˜åˆ¶éšæœºæ ·æœ¬æˆ–åªåœ¨å‘¨å›´æ²¡æœ‰å…¶ä»–å®ä¾‹è¢«ç»˜åˆ¶çš„æƒ…å†µä¸‹ç»˜åˆ¶ï¼‰ã€‚ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªåˆ†éš”è‰¯å¥½çš„çš„å¯è§†åŒ–æ•°å­—é›†ç¾¤ã€‚å°è¯•ä½¿ç”¨å…¶ä»–é™ç»´ç®—æ³•ï¼Œå¦‚ PCAï¼ŒLLE æˆ– MDSï¼Œå¹¶æ¯”è¾ƒå¯è§†åŒ–ç»“æœã€‚</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬09ç« -éç›‘ç£å­¦ä¹ "><a href="#ç¬¬09ç« -éç›‘ç£å­¦ä¹ " class="headerlink" title="ç¬¬09ç«  éç›‘ç£å­¦ä¹ "></a>ç¬¬09ç«  éç›‘ç£å­¦ä¹ </h2><p>é™ç»´å°±æ˜¯æœ€å¸¸ç”¨çš„éç›‘ç£æœºå™¨å­¦ä¹ æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<h3 id="èšç±»ï¼ˆclusteringï¼‰"><a href="#èšç±»ï¼ˆclusteringï¼‰" class="headerlink" title="èšç±»ï¼ˆclusteringï¼‰"></a>èšç±»ï¼ˆclusteringï¼‰</h3><p>å°†ç›¸ä¼¼çš„å®ä¾‹èšé›†åœ¨ä¸€èµ·</p>
<p><strong>å’Œåˆ†ç±»çš„åŒºåˆ«ï¼šåˆ†ç±»é—®é¢˜æœ‰æ ‡ç­¾ï¼Œè€Œèšç±»é—®é¢˜æ²¡æœ‰æ ‡ç­¾ã€‚</strong></p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<p>é™ç»´ï¼ŒåŠç›‘ç£å­¦ä¹ ï¼Œå›¾åƒåˆ†ç±»ï¼Œæ¨èç³»ç»Ÿï¼Œæœç´¢å¼•æ“ï¼Œå®¢æˆ·ç»†åˆ†ç­‰</p>
<p>ä¹Ÿå¯ä»¥ç”¨äºå¼‚å¸¸æ£€æµ‹ï¼šæ•°æ®èšç±»åï¼Œå’Œæ‰€æœ‰clusterç›¸èšå¾ˆè¿œçš„æ•°æ®ç‚¹å¯èƒ½æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
<p>åŠç›‘ç£å­¦ä¹ ï¼šåªæœ‰è‹¥å¹²æ•°æ®æœ‰æ ‡ç­¾ï¼Œå¯ä»¥èšç±»åå°†æ ‡ç­¾ä¼ é€’ç»™åŒä¸€cluster</p>
<p>æœç´¢å¼•æ“ï¼šä¾‹å¦‚æœç´¢å›¾ç‰‡ï¼Œå°†æ‰€æœ‰å›¾ç‰‡èšç±»ï¼Œç„¶åæ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œåˆ¤æ–­åœ¨å“ªä¸€ä¸ªclusterã€‚</p>
<p>image segmentationï¼šæ•°æ®ç›‘æµ‹ï¼Œè¿½è¸ªï¼Œç›‘æµ‹ç‰©ä½“çš„è¾¹ç•Œ</p>
<blockquote>
<p> å‚è€ƒï¼š<a href="https://www.cnblogs.com/LittleHann/p/6595148.html" target="_blank" rel="noopener">https://www.cnblogs.com/LittleHann/p/6595148.html</a></p>
<p>â€‹            <a href="https://zhuanlan.zhihu.com/p/150333968" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/150333968</a></p>
</blockquote>
<p>ä¸€äº›ç®—æ³•æœ‰ä¸­å¿ƒï¼šcentroid ï¼ˆK-Meansï¼‰</p>
<p>ä¸€äº›ç®—æ³•åˆ†å±‚ï¼šhierarchical</p>
<p>ä¸€äº›ç®—æ³•åŸºäºå¯†åº¦ï¼šDBSCAN</p>
<p>ä¸€äº›ç®—æ³•åŸºäºæ¦‚ç‡ï¼šGMMï¼ˆé«˜æ–¯æ··åˆæ¨¡å‹ï¼‰</p>
<h4 id="K-Means"><a href="#K-Means" class="headerlink" title="K-Means"></a>K-Means</h4><p>1957å¹´ï¼ŒStuart Lloydåœ¨Bell Labsæå‡ºã€‚è¯¥ç®—æ³•ä¸€èˆ¬æ˜¯æœ€å¿«çš„èšç±»æ–¹æ³•ï¼Œä¸”ä¸€å®šä¼šæ”¶æ•›ï¼Œä¸ä¼šæ°¸è¿œéœ‡è¡ã€‚</p>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼ˆæ•°æ®å…·æœ‰clustering structureï¼‰å’Œå®ä¾‹çš„ä¸ªæ•°mä»¥åŠç±»çš„ä¸ªæ•°kå‘ˆçº¿æ€§å…³ç³»ã€‚å¦åˆ™ï¼Œæœ€åçš„æƒ…å†µï¼ŒæŒ‡æ•°å¢é•¿ï¼ˆä¸€èˆ¬å¾ˆå°‘å‘ç”Ÿï¼‰ã€‚</p>
<p><strong>ç®—æ³•ï¼š</strong></p>
<ol>
<li>åˆå§‹åŒ–ä¸­å¿ƒï¼Œç„¶åå°†æ•°æ®åˆ†åˆ°æœ€è¿‘é‚»çš„ç±»ä¸­ã€‚</li>
<li>æŠŠæ‰€æœ‰å®ä¾‹åˆ†åˆ°ç›¸åº”çš„ç±»ä¸­ï¼Œè®¡ç®—æ•°æ®ä¸­å¿ƒ</li>
<li>æŒ‰ç…§æ–°çš„ä¸­å¿ƒï¼Œé‡æ–°å°†å®ä¾‹åˆ†åˆ°ç›¸åº”çš„ç±»ä¸­ï¼Œè®¡ç®—æ•°æ®ä¸­å¿ƒ</li>
<li>é‡å¤2,3ï¼ŒçŸ¥é“ä¸­å¿ƒä¸å‘ç”Ÿå˜åŒ–</li>
</ol>
<p><strong>hard-clusteringå’Œsoft-clustering</strong></p>
<p>hard-clusteringå°†å®ä¾‹åˆ†åˆ°ä¸€ä¸ªclusterä¸­</p>
<p>soft-clusteringç»™å‡ºæ¯ä¸ªå®ä¾‹åœ¨æ¯ä¸€ä¸ªclusterä¸­çš„è¯„åˆ†ï¼Œå¯ä»¥æ˜¯è·ç¦»ï¼Œæˆ–è€…RBFç­‰ç­‰</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>è™½ç„¶K-Meansä¸€å®šä¼šæ”¶æ•›ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£ï¼Œå’Œåˆå§‹ä¸­å¿ƒçš„è®¾ç½®æœ‰å¾ˆå¤§çš„å…³ç³»ã€‚</p>
<p><strong>è§£å†³åŠæ³•ï¼š</strong></p>
<p>åˆå§‹åŒ–èšç±»ä¸­å¿ƒçš„æ–¹æ³•ï¼š</p>
<ol>
<li><p>æå‰çŸ¥é“å¤§æ¦‚çš„ä¸­å¿ƒä½ç½®ï¼Œå¯ä»¥ç”¨<code>init</code>å‚æ•°ä¼ é€’ç»™KMeans</p>
</li>
<li><p>å¤šæ¬¡è¿è¡Œkmeansï¼Œä¿ç•™æœ€å¥½çš„ç»“æœã€‚<code>n_initï¼Œ</code>sklearnä¸­é»˜è®¤ä¸º10ï¼Œç”¨intertiaï¼ˆæ‰€æœ‰å®ä¾‹è·ç¦»å…¶æœ€è¿‘é‚»èšç±»ä¸­å¿ƒçš„è·ç¦»çš„å¹³æ–¹å’Œï¼‰åˆ¤å®šå¥½åï¼ˆè¶Šå°è¶Šå¥½ï¼‰</p>
<blockquote>
<p>sklearnä¸­çš„scoreéµå¾ªâ€œgreater is betterâ€çš„å‡†åˆ™ï¼Œæ‰€ä»¥scoreæ˜¯intertiaçš„è´Ÿæ•°ã€‚</p>
</blockquote>
</li>
<li><p>æ”¹è¿›ç®—æ³•ï¼š<strong>K-Means++</strong>ï¼ˆ2006å¹´ï¼Œç”±David Arthur and Sergei Vassilvitskiiæå‡ºï¼‰</p>
<blockquote>
<p>åˆå§‹åŒ–èšç±»ä¸­å¿ƒå°½å¯èƒ½å½¼æ­¤è¿œç¦»ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å±€éƒ¨æœ€ä¼˜è§£ã€‚</p>
<ol>
<li>éšæœºé€‰å–ç¬¬ä¸€ä¸ªä¸­å¿ƒ$c^{(1)}$</li>
<li>ä»¥æ¦‚ç‡$D(x^{(i)})^2/\sum_{j=1}^m D(x^{(j)})^2$ é€‰å–å®ä¾‹ä½œä¸ºæ–°çš„ä¸­å¿ƒ$c^{(i)}$ï¼Œ$D(x^{(i)})$è¡¨ç¤ºå®ä¾‹è·ç¦»å·²ç»é€‰å®šçš„ä¸­å¿ƒçš„è·ç¦»ã€‚</li>
<li>é‡å¤2ç›´åˆ°ç¡®å®šæ‰€æœ‰ä¸­å¿ƒ</li>
</ol>
</blockquote>
<p>sklearnä¸­é»˜è®¤ä½¿ç”¨è¿™ç§ç®—æ³•ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®<code>init=random</code>ä½¿ç”¨åŸç”ŸK-Means</p>
</li>
</ol>
<h4 id="åŠ é€ŸK-Meansç®—æ³•"><a href="#åŠ é€ŸK-Meansç®—æ³•" class="headerlink" title="åŠ é€ŸK-Meansç®—æ³•"></a>åŠ é€ŸK-Meansç®—æ³•</h4><blockquote>
<p>ç”±Charles Elkanäº2003å¹´æå‡ºã€‚åˆ©ç”¨<strong>ä¸‰è§’ä¸ç­‰å¼çš„æ€§è´¨ï¼ˆtriangle inequalityï¼‰ï¼Œè®°å½•å®ä¾‹å’Œèšç±»ä¸­å¿ƒè·ç¦»çš„ä¸Šé™å’Œä¸‹é™ï¼ˆlower and upper boundsï¼‰åŠ é€ŸK-Meansï¼Œ</strong>é¿å…è®¸å¤šæ— ç”¨çš„è·ç¦»è®¡ç®—.</p>
<p>sklearnä¸­é»˜è®¤ä½¿ç”¨è¿™ç§ç®—æ³•ã€‚</p>
</blockquote>
<h4 id="mini-batch-K-Meansç®—æ³•"><a href="#mini-batch-K-Meansç®—æ³•" class="headerlink" title="mini-batch K-Meansç®—æ³•"></a>mini-batch K-Meansç®—æ³•</h4><blockquote>
<p>2000å¹´ç”±David Sculleyæå‡ºï¼Œå¯ä»¥å¤„ç†å†…å­˜å¤„ç†ä¸ä¸‹çš„æ•°æ®ï¼ˆä¹Ÿå¯ä»¥memmapï¼‰ï¼Œä¸regular K-Meansç›¸æ¯”ï¼Œå¿«3-4å€ï¼Œä½†intertiaè¾ƒå·®ã€‚</p>
<p>sklearnä¸­æœ‰MiniBatchKMeansç±»ã€‚</p>
</blockquote>
<h4 id="ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°"><a href="#ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°" class="headerlink" title="ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°"></a>ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°</h4><p>ä¸èƒ½ç”¨intertiaï¼Œå› ä¸ºç±»è¶Šå¤šï¼Œintertiaè¶Šå°ã€‚é€‰å–intertia-kçš„è‚˜éƒ¨ç‚¹ã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0908.png" alt="mls2 0908"></p>
<h4 id="silhouette-scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰"><a href="#silhouette-scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰" class="headerlink" title="silhouette scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰"></a><em>silhouette scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰</em></h4><p>silhouette scoreï¼šæ‰€æœ‰å®ä¾‹silhouette efficientï¼ˆè½®å»“ç³»æ•°ï¼‰çš„å¹³å‡ã€‚</p>
<p>è½®å»“ç³»æ•°ï¼ˆ-1~1ï¼‰ï¼š(b â€“ a) / max(a, b)ï¼Œaæ˜¯åŒç±»ä¸­å…¶ä»–å®ä¾‹è·ç¦»çš„å¹³å‡ï¼ˆthe mean intra-cluster distanceï¼‰ï¼Œbæ˜¯åˆ°æœ€è¿‘é‚»ç±»ä¸­å…¶ä»–å®ä¾‹çš„å¹³å‡è·ç¦»ï¼ˆthe mean nearest-cluster distance ï¼‰ï¼Œæ¥è¿‘+1,æ„å‘³ç€å®ä¾‹éƒ½å¤„äºå½“å‰ç±»ä¸­ï¼Œæ¥è¿‘-1ï¼Œæ„å‘³ç€å®ä¾‹è¢«åˆ†ç±»åˆ°äº†é”™è¯¯çš„ç±»ï¼Œæ¥è¿‘0ï¼Œæ„å‘³ç€æ•°æ®ç‚¹åœ¨è¾¹ç•Œã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0909.png" alt="mls2 0909"></p>
<p>è¿˜å¯ä»¥ç”»å‡ºsilhouette diagramï¼šç®—å‡ºæ¯ä¸ªå®ä¾‹çš„è½®å»“ç³»æ•°ï¼Œå¹¶å°†å®ƒä»¬åˆ†åˆ°ç›¸åº”çš„ç±»é‡Œï¼š</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0910.png" alt="mls2 0910"></p>
<p>çº¢è‰²è™šçº¿è¡¨ç¤ºsilhouette scoreï¼Œå‡¡æ˜¯å¤„äºè™šçº¿å·¦ä¾§çš„åˆ€å‹å›¾ï¼Œè¡¨ç¤ºè¯¥ç±»çš„å®ä¾‹å’Œå…¶ä»–ç±»è·ç¦»è¿‡è¿‘ã€‚</p>
<p>k=4å’Œ5ä¸­ç±»çš„å¤§å°ä¸ä¸€æ ·ï¼Œ4ä¸­æ©™è‰²çš„ç±»æ˜æ˜¾æ›´å¤§ï¼Œè€Œ5ä¸­ç±»æ›´å‡åŒ€ï¼Œæ‰€ä»¥å³ä½¿4çš„silhouette scoreæ›´å¤§ï¼Œçœ‹ä¸Šå»5çš„è¡¨ç°æ›´å¥½ã€‚</p>
<h4 id="K-Meansçš„å±€é™æ€§"><a href="#K-Meansçš„å±€é™æ€§" class="headerlink" title="K-Meansçš„å±€é™æ€§"></a>K-Meansçš„å±€é™æ€§</h4><ol>
<li><p>éœ€è¦æå‰è·‘å‡ æ¬¡ï¼Œé˜²æ­¢é™·å…¥è¿‡æ‹Ÿåˆ</p>
</li>
<li><p>éœ€è¦è‡ªå·±ç¡®å®šç±»çš„ä¸ªæ•°</p>
</li>
<li><p>å½“ç±»çš„å¤§å°ä¸å‡ä¸€ï¼Œæˆ–è€…å¯†åº¦ä¸ä¸€ï¼Œæˆ–è€…åˆ†å¸ƒä¸æ˜¯çƒå½¢æ—¶ï¼Œè¡¨ç°ä¸å¥½</p>
<blockquote>
<p>æ¤­åœ†åˆ†å¸ƒï¼ˆelliptical clustersï¼‰ï¼ŒGaussian mixture modelè¡¨ç°æ›´å¥½</p>
<p>è¿è¡ŒK-Meansä¹‹å‰ï¼Œscale the feature</p>
</blockquote>
</li>
</ol>
<h4 id="K-Meansçš„å…·ä½“åº”ç”¨"><a href="#K-Meansçš„å…·ä½“åº”ç”¨" class="headerlink" title="K-Meansçš„å…·ä½“åº”ç”¨"></a>K-Meansçš„å…·ä½“åº”ç”¨</h4><p><strong>å›¾åƒåˆ†å‰²</strong> <em>Image segmentation</em> ï¼šå°†å›¾åƒåˆ†æˆè‹¥å¹²éƒ¨åˆ†ã€‚</p>
<blockquote>
<ol>
<li>è¯­ä¹‰åˆ†å‰²ï¼ˆsemantic segmentationï¼‰</li>
<li>å®ä¾‹åˆ†å‰²ï¼ˆinstance segmentationï¼‰</li>
</ol>
<p>ä¸€èˆ¬åŸºäºCNNå®ç°ã€‚</p>
</blockquote>
<p>é¢œè‰²åˆ†å‰²ï¼ˆcolor segmentationï¼‰ï¼šåº”ç”¨åœºæ™¯ï¼šä»å«æ˜Ÿå›¾è®¡ç®—æ£®æ—é¢ç§¯çš„å¤§å°ã€‚</p>
<p><strong>æ•°æ®é¢„å¤„ç†</strong></p>
<p>ç›‘ç£å­¦ä¹ å‰ä½¿ç”¨K-Meanså¯¹æ•°æ®è¿›è¡Œèšç±»ã€‚é™ä½äº†æ•°æ®çš„ç»´åº¦ï¼Œæ›´é‡è¦çš„æ˜¯èšç±»å¾—åˆ°çš„ç‰¹å¾æ›´åŠ çº¿æ€§å¯åˆ†ã€‚</p>
<p><strong>ç”¨äºåŠç›‘ç£å­¦ä¹ </strong></p>
<p>å½“æœ‰å¾ˆå¤šæ²¡æœ‰æ ‡ç­¾çš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨K-Meanså¯¹æœ‰æ ‡ç­¾çš„æ•°æ®è¿›è¡Œèšç±»ï¼Œå°†æœ€æ¥è¿‘ä¸­å¿ƒçš„å›¾ç‰‡ï¼ˆæˆ–å…¶ä»–ï¼‰ï¼ˆrepresentative imageï¼‰è¡¨ç¤ºå‡ºæ¥ã€‚å°†æ ‡ç­¾ä¼ é€’ç»™ç±»ä¸­å…¶ä»–æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšlabel  propagationã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¾¹ç•Œä¸Šçš„æ•°æ®ç‚¹å¯èƒ½è¢«é”™è¯¯çš„åˆ†ç±»äº†ï¼Œæ‰€ä»¥æ ‡ç­¾ä¼ é€’æœ€å¥½ä¼ é€’ç»™è·ç¦»èšç±»ä¸­å¿ƒæœ€è¿‘çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆæ¯”å¦‚20%ï¼‰</p>
</blockquote>
<h4 id="ä¸»åŠ¨å­¦ä¹ -active-learning"><a href="#ä¸»åŠ¨å­¦ä¹ -active-learning" class="headerlink" title="ä¸»åŠ¨å­¦ä¹ (active learning)"></a>ä¸»åŠ¨å­¦ä¹ (active learning)</h4><p>ä¸ç¡®å®šåº¦é‡‡æ ·<code>Uncertainty Sampling</code></p>
<ol>
<li>ç”¨ä»…æœ‰çš„æœ‰æ ‡ç­¾æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œç”¨è¯¥æ¨¡å‹é¢„æµ‹æ‰€æœ‰æ— æ ‡ç­¾æ•°æ®</li>
<li>å°†é¢„æµ‹ç»“æœä¸­æœ€ä¸å‡†ç¡®ï¼ˆæ¦‚ç‡æœ€ä½ï¼‰çš„å®ä¾‹æ‹¿å‡ºæ¥ç»™ä¸“å®¶è´´æ ‡ç­¾</li>
<li>é‡å¤ä¸Šè¿°è¿‡ç¨‹</li>
</ol>
<p>æ›´æ·±å…¥äº†è§£å¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_39856931/article/details/106433187" target="_blank" rel="noopener">https://blog.csdn.net/qq_39856931/article/details/106433187</a></p>
<h4 id="KNNå’ŒK-Meansçš„åŒºåˆ«"><a href="#KNNå’ŒK-Meansçš„åŒºåˆ«" class="headerlink" title="KNNå’ŒK-Meansçš„åŒºåˆ«"></a>KNNå’ŒK-Meansçš„åŒºåˆ«</h4><div class="table-container">
<table>
<thead>
<tr>
<th><strong>KNN</strong></th>
<th><strong>K-Means</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1.KNNæ˜¯åˆ†ç±»ç®—æ³•  2.ç›‘ç£å­¦ä¹  3.å–‚ç»™å®ƒçš„æ•°æ®é›†æ˜¯å¸¦labelçš„æ•°æ®ï¼Œå·²ç»æ˜¯å®Œå…¨æ­£ç¡®çš„æ•°æ®</td>
<td>1.K-Meansæ˜¯èšç±»ç®—æ³•  2.éç›‘ç£å­¦ä¹  3.å–‚ç»™å®ƒçš„æ•°æ®é›†æ˜¯æ— labelçš„æ•°æ®ï¼Œæ˜¯æ‚ä¹±æ— ç« çš„ï¼Œç»è¿‡èšç±»åæ‰å˜å¾—æœ‰ç‚¹é¡ºåºï¼Œå…ˆæ— åºï¼Œåæœ‰åº</td>
</tr>
<tr>
<td>æ²¡æœ‰æ˜æ˜¾çš„å‰æœŸè®­ç»ƒè¿‡ç¨‹ï¼Œå±äºmemory-based learning</td>
<td>æœ‰æ˜æ˜¾çš„å‰æœŸè®­ç»ƒè¿‡ç¨‹</td>
</tr>
<tr>
<td>Kçš„å«ä¹‰ï¼šæ¥äº†ä¸€ä¸ªæ ·æœ¬xï¼Œè¦ç»™å®ƒåˆ†ç±»ï¼Œå³æ±‚å‡ºå®ƒçš„yï¼Œå°±ä»æ•°æ®é›†ä¸­ï¼Œåœ¨xé™„è¿‘æ‰¾ç¦»å®ƒæœ€è¿‘çš„Kä¸ªæ•°æ®ç‚¹ï¼Œè¿™Kä¸ªæ•°æ®ç‚¹ï¼Œç±»åˆ«cå çš„ä¸ªæ•°æœ€å¤šï¼Œå°±æŠŠxçš„labelè®¾ä¸ºc</td>
<td>Kçš„å«ä¹‰ï¼šKæ˜¯äººå·¥å›ºå®šå¥½çš„æ•°å­—ï¼Œå‡è®¾æ•°æ®é›†åˆå¯ä»¥åˆ†ä¸ºKä¸ªç°‡ï¼Œç”±äºæ˜¯ä¾é äººå·¥å®šå¥½ï¼Œéœ€è¦ä¸€ç‚¹å…ˆéªŒçŸ¥è¯†</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>ç›¸ä¼¼ç‚¹ï¼šéƒ½åŒ…å«è¿™æ ·çš„è¿‡ç¨‹ï¼Œç»™å®šä¸€ä¸ªç‚¹ï¼Œåœ¨æ•°æ®é›†ä¸­æ‰¾ç¦»å®ƒæœ€è¿‘çš„ç‚¹ã€‚å³äºŒè€…éƒ½ç”¨åˆ°äº†NN(Nears Neighbor)ç®—æ³•ï¼Œä¸€èˆ¬ç”¨KDæ ‘æ¥å®ç°NNã€‚</td>
</tr>
</tbody>
</table>
</div>
<h4 id="DBSCANï¼ˆDensity-Based-Spatial-Clustering-of-Applications-with-Noiseï¼‰"><a href="#DBSCANï¼ˆDensity-Based-Spatial-Clustering-of-Applications-with-Noiseï¼‰" class="headerlink" title="DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰"></a>DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰</h4><p>åŸºäºå±€éƒ¨å¯†åº¦ä¼°è®¡ï¼ˆlocal density estimationï¼‰ï¼Œè¯¥ç®—æ³•å…è®¸å¯¹ä»»æ„å½¢çŠ¶çš„æ•°æ®è¿›è¡Œèšç±»ã€‚</p>
<ol>
<li>å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹ï¼Œç®—æ³•è®¡ç®—ä¸€ä¸ªå°èŒƒå›´$\epsilon$ å†…æœ‰å¤šå°‘å®ä¾‹ï¼Œè¯¥èŒƒå›´å«åšï¼šå®ä¾‹çš„$\epsilon$-neighborhood</li>
<li>å¦‚æœä¸€ä¸ªå®ä¾‹çš„$\epsilon$-neighborhoodä¸­æœ‰è¶…è¿‡min_samplesä¸ªå®ä¾‹ï¼Œåˆ™è¯¥å®ä¾‹ä¸ºcore instance</li>
<li>æ‰€æœ‰åœ¨åŒä¸€ä¸ªcore instanceå‘¨å›´çš„å®ä¾‹å±äºåŒä¸€ä¸ªç±»ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªcore instanceçš„å‘¨å›´æœ‰å…¶ä»–core instanceã€‚å› æ­¤ï¼Œä¸€ç³»åˆ—ç›¸é‚»çš„core instanceå½¢æˆä¸€ä¸ªcluster</li>
<li>ä»»ä½•å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯core instanceï¼Œå…¶ç›¸é‚»èŒƒå›´å†…ä¹Ÿæ²¡æœ‰core instanceï¼Œä¼šè¢«è®¤ä¸ºæ˜¯å¼‚å¸¸æ•°æ®</li>
</ol>
<p>å½“æ•°æ®çš„å¯ä»¥è¢«ä½å¯†åº¦åŒºåŸŸåˆ†å¼€æ—¶ï¼ŒDBSCANå˜ç°å¾—å¾ˆå¥½ã€‚</p>
<blockquote>
<p>sklearnä¸­çš„DBSCANæ²¡æœ‰predictæ–¹æ³•ï¼Œå¯ä»¥ç”¨DBSCANçš„èšç±»ä¸­å¿ƒï¼ˆæˆ–è€…å…¨éƒ¨æ•°æ®ï¼Œæˆ–è€…é™¤äº†å¼‚å¸¸æ•°æ®çš„å…¶ä»–æ•°æ®ï¼‰è®­ç»ƒå…¶ä»–ç®—æ³•ï¼ˆä¾‹å¦‚KNNï¼‰ï¼Œå†é¢„æµ‹æ–°çš„æ•°æ®ã€‚</p>
</blockquote>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0915.png" alt="mls2 0915"></p>
<p>å…¶å®æœ‰ä¸¤ä¸ªæ•°æ®éœ€è¦è¢«åˆ¤å®šä¸ºå¼‚å¸¸å€¼ã€‚</p>
<p>DBSCANæ˜¯ä¸€ä¸ªç®€å•ä½†æ˜¯å¼ºå¤§çš„èšç±»ç®—æ³•ï¼Œå¯ä»¥å¯¹ä¸è§„åˆ™å½¢çŠ¶åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œèšç±»ï¼Œå¹¶ä¸”åªæœ‰ä¸¤ä¸ªè¶…å‚æ•°epså’Œmin_samplesï¼Œä½†å¦‚æœç±»ä¸­å¯†åº¦å˜åŒ–å¾ˆå¤§ï¼ŒDBSCANçš„è¡¨ç°å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¥½ã€‚</p>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šO(m log m)</p>
<h4 id="å…¶ä»–èšç±»ç®—æ³•"><a href="#å…¶ä»–èšç±»ç®—æ³•" class="headerlink" title="å…¶ä»–èšç±»ç®—æ³•"></a>å…¶ä»–èšç±»ç®—æ³•</h4><h5 id="å±‚æ¬¡èšç±»-Agglomerative-clustering"><a href="#å±‚æ¬¡èšç±»-Agglomerative-clustering" class="headerlink" title="å±‚æ¬¡èšç±»(Agglomerative clustering)"></a>å±‚æ¬¡èšç±»(Agglomerative clustering)</h5><p>æ˜¯ä¸€ç§è‡ªåº•è€Œä¸Šçš„å±‚æ¬¡èšç±»æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®æŒ‡å®šçš„ç›¸ä¼¼åº¦æˆ–è·ç¦»å®šä¹‰è®¡ç®—å‡ºç±»ä¹‹é—´çš„è·ç¦»ã€‚</p>
<ol>
<li>å°†æ¯ä¸€ä¸ªå…ƒç´ å•ç‹¬å®šä¸ºä¸€ç±»</li>
<li>é‡å¤ï¼šæ¯ä¸€è½®éƒ½åˆå¹¶æŒ‡å®šè·ç¦»(å¯¹æŒ‡å®šè·ç¦»çš„ç†è§£å¾ˆé‡è¦)æœ€å°çš„ç±»</li>
<li>ç›´åˆ°æ‰€æœ‰çš„å…ƒç´ éƒ½å½’ä¸ºåŒä¸€ç±»</li>
</ol>
<blockquote>
<p>ç±»ä¼¼æ°´é¢ä¸Šçš„æ³¡æ³¡ï¼Œä¼šä¸ç›¸é‚»çš„æ³¡æ³¡åˆå¹¶</p>
</blockquote>
<p>ä¾æ®å¯¹ç›¸ä¼¼åº¦ï¼ˆè·ç¦»ï¼‰çš„ä¸åŒå®šä¹‰ï¼Œå°†Agglomerative Clusteringçš„èšç±»æ–¹æ³•åˆ†ä¸ºä¸‰ç§ï¼šSingle-linkage, Complete-linkageå’ŒGroup average.<br><strong>Single-linkage</strong>:è¦æ¯”è¾ƒçš„è·ç¦»ä¸ºå…ƒç´ å¯¹ä¹‹é—´çš„æœ€å°è·ç¦»<br><strong>Complete-linkage</strong>:è¦æ¯”è¾ƒçš„è·ç¦»ä¸ºå…ƒç´ å¯¹ä¹‹é—´çš„æœ€å¤§è·ç¦»<br><strong>Group average</strong>ï¼šè¦æ¯”è¾ƒçš„è·ç¦»ä¸ºç±»ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼ˆå¹³å‡è·ç¦»çš„å®šä¹‰ä¸è®¡ç®—ï¼šå‡è®¾æœ‰Aï¼ŒBä¸¤ä¸ªç±»ï¼ŒAä¸­æœ‰nä¸ªå…ƒç´ ï¼ŒBä¸­æœ‰mä¸ªå…ƒç´ ã€‚åœ¨Aä¸Bä¸­å„å–ä¸€ä¸ªå…ƒç´ ï¼Œå¯å¾—åˆ°ä»–ä»¬ä¹‹é—´çš„è·ç¦»ã€‚å°†nmä¸ªè¿™æ ·çš„è·ç¦»ç›¸åŠ ï¼Œå¾—åˆ°è·ç¦»å’Œã€‚æœ€åè·ç¦»å’Œé™¤ä»¥nmå¾—åˆ°Aï¼ŒBä¸¤ä¸ªç±»çš„å¹³å‡è·ç¦»ã€‚ï¼‰</p>
<h5 id="BIRCH"><a href="#BIRCH" class="headerlink" title="BIRCH"></a>BIRCH</h5><p>Balanced Iterative Reducing and Clustering using Hierarchiesï¼Œåˆ©ç”¨å±‚æ¬¡æ–¹æ³•çš„å¹³è¡¡è¿­ä»£è§„çº¦å’Œèšç±»ï¼Œé’ˆå¯¹large databaseï¼Œå¹¶ä¸”æ¯”batch-K Meanså¿«</p>
<p>BIRCHç®—æ³•åˆ©ç”¨äº†ä¸€ä¸ªæ ‘ç»“æ„æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„èšç±»ï¼Œè¿™ä¸ªæ•°ç»“æ„ç±»ä¼¼äºå¹³è¡¡B+æ ‘ï¼Œä¸€èˆ¬å°†å®ƒç§°ä¹‹ä¸ºèšç±»ç‰¹å¾æ ‘(Clustering Feature Treeï¼Œç®€ç§°CF Tree)ã€‚è¿™é¢—æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç”±è‹¥å¹²ä¸ªèšç±»ç‰¹å¾(Clustering Featureï¼Œç®€ç§°CF)ç»„æˆã€‚</p>
<p>å¯å‚è€ƒï¼š<a href="https://www.cnblogs.com/pinard/p/6179132.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinard/p/6179132.html</a></p>
<h5 id="Mean-Shift"><a href="#Mean-Shift" class="headerlink" title="Mean-Shift"></a>Mean-Shift</h5><p>ä¹Ÿå«åšå‡å€¼æ¼‚ç§»ï¼Œåœ¨ç›®æ ‡è¿½è¸ªä¸­åº”ç”¨å¹¿æ³›ã€‚æœ¬èº«å…¶å®æ˜¯ä¸€ç§<strong>åŸºäºå¯†åº¦</strong>çš„èšç±»ç®—æ³•ã€‚</p>
<p>ä¸»è¦æ€è·¯æ˜¯ï¼šä¸­å¿ƒå‘ç€å¯†åº¦é«˜çš„åœ°æ–¹ç§»åŠ¨ï¼Œç›´åˆ°ç§»åŠ¨åˆ°local density maximum</p>
<ol>
<li>è®¡ç®—æŸä¸€å®ä¾‹(A)ä¸å…¶å‘¨å›´åŠå¾„Rå†…çš„å‘é‡è·ç¦»çš„å¹³å‡å€¼Mï¼Œè®¡ç®—å‡ºè¯¥ç‚¹ä¸‹ä¸€æ­¥æ¼‚ç§»ï¼ˆç§»åŠ¨ï¼‰çš„æ–¹å‘ï¼ˆA=M+Aï¼‰ã€‚</li>
<li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰çš„ç‚¹ä¸å†ç§»åŠ¨æ—¶ï¼Œå…¶ä¸å‘¨å›´ç‚¹å½¢æˆä¸€ä¸ªç±»ç°‡ï¼Œ</li>
<li>è®¡ç®—è¿™ä¸ªç±»ç°‡ä¸å†å²ç±»ç°‡çš„è·ç¦»ï¼Œæ»¡è¶³å°äºé˜ˆå€¼Då³åˆå¹¶ä¸ºåŒä¸€ä¸ªç±»ç°‡ï¼Œä¸æ»¡è¶³åˆ™è‡ªèº«å½¢æˆä¸€ä¸ªç±»ç°‡ã€‚ç›´åˆ°æ‰€æœ‰çš„æ•°æ®ç‚¹é€‰å–å®Œæ¯•ã€‚</li>
</ol>
<blockquote>
<p>å½“ç°‡çš„å†…éƒ¨å…·æœ‰å¯†åº¦ä¸å‡åŒ€æ—¶ï¼ŒMean-shiftå€¾å‘äºå°†è¯¥ç°‡åˆ†ä¸ºå‡ ç‰‡</p>
<p>è®¡ç®—å¤æ‚åº¦ï¼š$O(m^2)$,ä¸é€‚åˆå¤§çš„æ•°æ®é›†</p>
</blockquote>
<h5 id="Affinity-propagation"><a href="#Affinity-propagation" class="headerlink" title="Affinity propagation"></a>Affinity propagation</h5><p>AP(Affinity Propagation)é€šå¸¸è¢«ç¿»è¯‘ä¸ºè¿‘é‚»ä¼ æ’­ç®—æ³•æˆ–è€…äº²å’ŒåŠ›ä¼ æ’­ç®—æ³•ã€‚</p>
<p><strong>ä¸€ç§æŠ•ç¥¨æœºåˆ¶</strong>ï¼Œæ¯ä¸ªå®ä¾‹å¯¹ç›¸ä¼¼çš„å®ä¾‹æŠ•ç¥¨ï¼Œé€‰å‡ºä»£è¡¨ï¼ˆrepresentativesï¼‰ä¸€æ—¦ç®—æ³•æ”¶æ•›ï¼Œæ¯ä¸ªä»£è¡¨å’Œå…¶æŠ•ç¥¨è€…èšæˆä¸€ç°‡ã€‚</p>
<blockquote>
<p>è®¡ç®—å¤æ‚åº¦ï¼š$O(m^2)$,ä¸é€‚åˆå¤§çš„æ•°æ®é›†</p>
<p>APç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†å…¨éƒ¨æ•°æ®ç‚¹éƒ½å½“ä½œæ½œåœ¨çš„èšç±»ä¸­å¿ƒ(ç§°ä¹‹ä¸ºexemplar)ï¼Œç„¶åæ•°æ®ç‚¹ä¸¤ä¸¤ä¹‹é—´è¿çº¿æ„æˆä¸€ä¸ªç½‘ç»œ(ç›¸ä¼¼åº¦çŸ©é˜µ)ï¼Œå†é€šè¿‡ç½‘ç»œä¸­å„æ¡è¾¹çš„æ¶ˆæ¯(responsibilityå’Œavailability)ä¼ é€’è®¡ç®—å‡ºå„æ ·æœ¬çš„èšç±»ä¸­å¿ƒã€‚</p>
<p>èšç±»è¿‡ç¨‹ä¸­ï¼Œå…±æœ‰ä¸¤ç§æ¶ˆæ¯åœ¨å„èŠ‚ç‚¹é—´ä¼ é€’ï¼Œåˆ†åˆ«æ˜¯å¸å¼•åº¦ï¼ˆresponsibilityï¼‰å’Œå½’å±åº¦ï¼ˆavailabilityï¼‰ã€‚</p>
<p>APç®—æ³•é€šè¿‡è¿­ä»£è¿‡ç¨‹ä¸æ–­æ›´æ–°æ¯ä¸€ä¸ªç‚¹çš„å¸å¼•åº¦å’Œå½’å±åº¦ï¼Œç›´åˆ°äº§ç”Ÿmä¸ªé«˜è´¨é‡çš„Exemplarï¼ˆç›¸å½“äºè´¨å¿ƒï¼‰ï¼ŒåŒæ—¶å°†å…¶ä½™çš„æ•°æ®ç‚¹åˆ†é…åˆ°ç›¸åº”çš„èšç±»ä¸­ã€‚</p>
<p>å¯å‚è€ƒï¼š<a href="https://www.biaodianfu.com/affinity-propagation.html" target="_blank" rel="noopener">https://www.biaodianfu.com/affinity-propagation.html</a></p>
</blockquote>
<h5 id="è°±èšç±»"><a href="#è°±èšç±»" class="headerlink" title="è°±èšç±»"></a>è°±èšç±»</h5><p>Spectral clusteringï¼Œå®ƒçš„ä¸»è¦æ€æƒ³æ˜¯æŠŠæ‰€æœ‰çš„æ•°æ®çœ‹åšç©ºé—´ä¸­çš„ç‚¹ï¼Œè¿™äº›ç‚¹ä¹‹é—´å¯ä»¥ç”¨è¾¹è¿æ¥èµ·æ¥ã€‚è·ç¦»è¾ƒè¿œçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒä½ï¼Œè€Œè·ç¦»è¾ƒè¿‘çš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒé«˜ï¼Œé€šè¿‡å¯¹æ‰€æœ‰æ•°æ®ç‚¹ç»„æˆçš„å›¾è¿›è¡Œåˆ‡å›¾ï¼Œè®©åˆ‡å›¾åä¸åŒçš„å­å›¾é—´è¾¹æƒé‡å’Œå°½å¯èƒ½çš„ä½ï¼Œè€Œå­å›¾å†…çš„è¾¹æƒé‡å’Œå°½å¯èƒ½çš„é«˜ï¼Œä»è€Œè¾¾åˆ°èšç±»çš„ç›®çš„ã€‚</p>
<h3 id="é«˜æ–¯æ··åˆæ¨¡å‹-Gaussian-mixtures"><a href="#é«˜æ–¯æ··åˆæ¨¡å‹-Gaussian-mixtures" class="headerlink" title="é«˜æ–¯æ··åˆæ¨¡å‹ Gaussian mixtures"></a>é«˜æ–¯æ··åˆæ¨¡å‹ Gaussian mixtures</h3><p><em>Gaussian mixture model</em> (GMM)ï¼šå¤šä¸ªé«˜æ–¯åˆ†å¸ƒçš„çº¿æ€§å åŠ èƒ½æ‹Ÿåˆéå¸¸å¤æ‚çš„å¯†åº¦å‡½æ•°ï¼›é€šè¿‡è¶³å¤Ÿå¤šçš„é«˜æ–¯åˆ†å¸ƒå åŠ ï¼Œå¹¶è°ƒèŠ‚å®ƒä»¬çš„å‡å€¼ï¼Œåæ–¹å·®çŸ©é˜µï¼Œä»¥åŠçº¿æ€§ç»„åˆçš„ç³»æ•°ï¼Œå¯ä»¥ç²¾ç¡®åœ°é€¼è¿‘ä»»æ„è¿ç»­å¯†åº¦ã€‚</p>
<p> <code>GaussianMixture</code> class: éœ€è¦ç¡®å®šæ•°æ®æœ‰å‡ ä¸ªé«˜æ–¯åˆ†å¸ƒç”Ÿæˆ</p>
<blockquote>
<ol>
<li>å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹ï¼Œä»kä¸ªé«˜æ–¯åˆ†å¸ƒï¼ˆä»£è¡¨ç€kä¸ªç°‡ï¼‰ä¸­éšæœºé€‰æ‹©ï¼Œé€‰æ‹©ç¬¬jä¸ªé«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡$\phi^{(j)}$, ç¬¬iä¸ªå®ä¾‹é€‰æ‹©çš„é«˜æ–¯åˆ†å¸ƒè®°ä½œ$z^{(i)}$</li>
<li>å¦‚æœ$z^{(i)}=j$æ„å‘³ç€ç¬¬iä¸ªå®ä¾‹è¢«åˆ†åˆ°äº†ç¬¬jä¸ªç°‡ä¸­ï¼Œå®ä¾‹$x^{(i)}~ N(\mu^{(j)},\sum^{(j)})$</li>
</ol>
</blockquote>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0916.png" alt="mls2 0916"></p>
<h4 id="EMç®—æ³•"><a href="#EMç®—æ³•" class="headerlink" title="EMç®—æ³•"></a>EMç®—æ³•</h4><p>sklearnä¸­çš„ç±»<code>GaussianMixture</code>ä¾æ®çš„æ˜¯EMç®—æ³•ã€‚</p>
<blockquote>
<p>å’ŒK-Meansç®—æ³•ç±»ä¼¼</p>
<ol>
<li>expectation step</li>
</ol>
<p>è®¡ç®—æ¯ä¸ªå®ä¾‹å±äºå„ä¸ªç°‡çš„æ¦‚ç‡ï¼ˆè½¯åˆ†ç±»ï¼‰</p>
<ol>
<li>maximization step</li>
</ol>
<p>è¿­ä»£</p>
<p>EMåŒæ ·ä¼šæ”¶æ•›åˆ°ä¸å¥½çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦å¤šè·‘å‡ æ¬¡ï¼Œä¿å­˜æœ€å¥½çš„ç»“æœï¼Œ<code>n_init=10</code></p>
</blockquote>
<p>GMMæ˜¯ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚</p>
<p>è¿˜å¯ä»¥é¢„æµ‹æ¯ä¸ªå®ä¾‹å‘¨å›´çš„å¯†åº¦ï¼Œ<code>score_samples()</code>æ–¹æ³•ï¼Œè®¡ç®—å®ä¾‹çš„PDFï¼ˆprobability density functionï¼‰çš„lå¯¹æ•°ã€‚</p>
<p>å¯¹äºé«˜ç»´æ•°æ®ï¼ŒGMMå¯èƒ½é™·å…¥å›°éš¾ï¼Œéœ€è¦å¯¹æ¨¡å‹åŠ ä»¥é™åˆ¶ï¼ˆå‡å°‘è‡ªç”±åº¦ï¼Œé™åˆ¶åˆ†å¸ƒçš„å½¢çŠ¶ï¼Œå¤§å°å’Œå–å‘ï¼‰ï¼Œé€šè¿‡è¶…å‚æ•°<code>`covariance_type</code> `</p>
<blockquote>
<p>å–å€¼å¯ä»¥æ˜¯ï¼šsphereï¼Œdiagï¼Œtied defaultï¼šfull</p>
</blockquote>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šå–å†³äºå®ä¾‹çš„ä¸ªæ•°mï¼Œæ•°æ®çš„ç»´åº¦nï¼Œä»¥åŠç°‡çš„ä¸ªæ•°kï¼Œè¿˜æœ‰å¯¹åæ–¹å·®çŸ©é˜µçš„é™åˆ¶ã€‚</p>
<blockquote>
<p>diag or sphericalï¼š$O(kmn)$</p>
<p>tied or full: $O()kmn^2+kn^3$</p>
</blockquote>
<h4 id="å¼‚å¸¸å€¼æ£€æµ‹"><a href="#å¼‚å¸¸å€¼æ£€æµ‹" class="headerlink" title="å¼‚å¸¸å€¼æ£€æµ‹"></a>å¼‚å¸¸å€¼æ£€æµ‹</h4><p>GMMç”¨äºå¼‚å¸¸å€¼æ£€æµ‹ï¼ˆanomaly detectionï¼‰ä¹Ÿå«åšoutlier detectionã€‚</p>
<blockquote>
<p>å¤„åœ¨GMMä½å¯†åº¦åŒºåŸŸçš„å®ä¾‹å¯ä»¥è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚å¯ä»¥è‡ªå·±è§„å®šé˜ˆå€¼ã€‚</p>
</blockquote>
<p>è§‚å¯Ÿå­¦ä¹ â€œæ­£å¸¸ï¼ˆnormalï¼‰â€çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæ¥æ£€æµ‹å‡ºå¼‚å¸¸æ•°æ®ï¼ˆåº”ç”¨åœºæ™¯ï¼šç”Ÿäº§çº¿äº§å“éƒ¨ä»¶çš„æ£€æµ‹&amp;å¼‚å¸¸è®¿é—®ï¼‰</p>
<h4 id="æ–°é¢–æ€§æ£€æµ‹"><a href="#æ–°é¢–æ€§æ£€æµ‹" class="headerlink" title="æ–°é¢–æ€§æ£€æµ‹"></a>æ–°é¢–æ€§æ£€æµ‹</h4><p>novelty detectionï¼šæ£€æµ‹æ–°è§‚å¯Ÿæ˜¯å¦æ˜¯å¼‚å¸¸å€¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å€¼ä¹Ÿè¢«ç§°ä¸ºæ–°é¢–ç‚¹ï¼ˆa noveltyï¼‰ã€‚æ˜¯ä¸€ç§åŠç›‘ç£çš„å¼‚å¸¸æ£€æµ‹æ–¹æ³•ï¼Œåœ¨æ–°é¢–æ€§æ£€æµ‹çš„èƒŒæ™¯ä¸‹ï¼Œæ–°é¢–ç‚¹å¯ä»¥å½¢æˆå¯†é›†çš„ç°‡ï¼Œåªè¦å®ƒä»¬å¤„äºè®­ç»ƒæ•°æ®çš„ä½å¯†åº¦åŒºåŸŸä¸­ã€‚</p>
<p>GMMå°è¯•fitæ‰€æœ‰çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¼‚å¸¸å€¼ï¼Œå¦‚æœå¼‚å¸¸ç‚¹è¿‡å¤šï¼Œå¯ä»¥</p>
<blockquote>
<ol>
<li>å»é™¤æœ€å¤–ä¾§çš„å¼‚å¸¸å€¼ï¼Œåœ¨cleaned-upçš„æ•°æ®é›†ä¸Šå†æ¬¡è®­ç»ƒæ¨¡å‹</li>
<li>ä½¿ç”¨æ›´é²æ£’çš„ç®—æ³•ï¼šEllipticEnvelope ï¼ˆé€‚åˆäºå¯¹æ•°æ®çš„é²æ£’åæ–¹å·®ä¼°è®¡ï¼Œä»è€Œå°†æ¤­åœ†é€‚é…åˆ°ä¸­å¤®æ•°æ®ç‚¹ï¼Œå¿½ç•¥ä¸­å¤®æ¨¡å¼ä¹‹å¤–çš„ç‚¹ã€‚ï¼‰</li>
</ol>
</blockquote>
<h4 id="å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°"><a href="#å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°" class="headerlink" title="å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°"></a>å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°</h4><p>å¯¹äºå¤§å°ä¸ä¸€è‡´æˆ–è€…éçƒå‹åˆ†å¸ƒçš„æ•°æ®ï¼ŒK-Meansä¸­ç”¨æ¥ç¡®å®šclusteræ•°ç›®çš„inertiaå’Œè½®å»“ç³»æ•°éƒ½ä¸å¯è¡Œã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡<strong>æœ€å°åŒ–ç†è®ºä¿¡æ¯æ ‡å‡†ï¼ˆtheoretical information criterionï¼‰ï¼Œå¦‚èµ¤æ± ä¿¡æ¯é‡ï¼ˆ<em>Akaike information criterion</em> ï¼ŒAICï¼‰,è´å¶æ–¯ä¿¡æ¯é‡ï¼ˆBICï¼Œ<em>Bayesian information criterion</em>ï¼‰</strong></p>
<p>å®šä¹‰ï¼š(mæ˜¯å®ä¾‹çš„ä¸ªæ•°ï¼Œpæ˜¯æ¨¡å‹çš„å‚æ•°ï¼Œ$\hat L$ æ˜¯æ¨¡å‹ä¼¼ç„¶å‡½æ•°ï¼ˆlikelihood functionï¼‰çš„æœ€å¤§å€¼)</p>
<p>$BIC\ = \ \log(m)p-2\ \log(\hat L) \\ AIC  \ = 2p-2\ \log(\hat L)$</p>
<p>BICå’ŒAICå¯¹å‚æ•°å¤šæ¨¡å‹åŠ ä¸Špenaltyï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒBICé€‰æ‹©çš„æ¨¡å‹æ¯”AICç®€å•ï¼Œä½†æ˜¯ä¸å¦‚AICçš„æ¨¡å‹å’Œæ•°æ®å»åˆå¾—å¥½ã€‚</p>
<p><strong>ä¼¼ç„¶å‡½æ•°</strong></p>
<p>æ¦‚ç‡ï¼ˆprobabilityï¼‰æ˜¯æŒ‡ï¼šç»™å®šæ¨¡å‹çš„å‚æ•°ï¼Œè¾“å‡ºxçš„å¯ä¿¡ç¨‹åº¦ã€‚ï¼ˆä¸‹å›¾æ°´å¹³é»‘çº¿ï¼Œå’ŒPDFå›¾ï¼‰</p>
<p>ä¼¼ç„¶ï¼ˆlikelihoodï¼‰æ˜¯æŒ‡ï¼šä¸€ç›´è¾“å‡ºxçš„å‰æä¸‹ï¼Œæ¨¡å‹çš„å‚æ•°æœ‰å¤šå¯ä¿¡ã€‚ï¼ˆä¸‹å›¾å‚ç›´è“è‰²çº¿ï¼Œå’Œä¼¼ç„¶å‡½æ•°å›¾ï¼‰</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0920.png" alt="mls2 0920"></p>
<h4 id="Bayesian-Gaussian-Mixture-Models"><a href="#Bayesian-Gaussian-Mixture-Models" class="headerlink" title="Bayesian Gaussian Mixture Models"></a>Bayesian Gaussian Mixture Models</h4><p>å¯ä»¥èµ‹äºˆä¸é‡è¦çš„ç°‡æƒé‡0ï¼Œå¯ä»¥é€šè¿‡n_componentsé¢„è®¾ç°‡çš„æœ€å¤§å€¼ã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0922.png" alt="mls2 0922"></p>
<p>Stick-Breaking Process (SBP)</p>
<p>Wishart distribution</p>
<p><strong>è´å¶æ–¯å®šç†</strong></p>
<p>$p(z|X)=posterior=\frac{likelihood\times prior}{evidence}=\frac{p(X|z)p(z)}{p(X)}$</p>
<p>$p(X)=\int p(X|z)p(z)dz$</p>
<h3 id="å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•"><a href="#å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•" class="headerlink" title="å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•"></a>å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•</h3><h4 id="PCA"><a href="#PCA" class="headerlink" title="PCA"></a>PCA</h4><p>æ•°æ®é‡å»ºï¼Œæ­£å¸¸å€¼é‡å»ºåä¸åŸå§‹æ•°æ®å·®è·å°ï¼Œè€Œå¼‚å¸¸å€¼é‡å»ºåä¸å¼‚å¸¸å€¼å·®è·å¤§</p>
<h4 id="Fast-MCD"><a href="#Fast-MCD" class="headerlink" title="Fast-MCD"></a>Fast-MCD</h4><p>minimum covariance determinantï¼Œ</p>
<p>è®¤ä¸ºæ­£å¸¸å€¼ï¼ˆinliersï¼‰æ˜¯ç”±å•ä¸€çš„é«˜æ–¯æ¨¡å‹äº§ç”Ÿçš„ï¼Œä¸æ˜¯ç”±è¯¥å•ä¸€é«˜æ–¯æ¨¡å‹äº§ç”Ÿçš„æ•°æ®ç‚¹è¢«è®¤ä¸ºæ˜¯outliers</p>
<h4 id="Isolation-Forest"><a href="#Isolation-Forest" class="headerlink" title="Isolation Forest"></a>Isolation Forest</h4><p>å­¤ç«‹æ£®æ—ï¼š æ˜¯ä¸€ä¸ªåŸºäºEnsembleçš„å¿«é€Ÿå¼‚å¸¸æ£€æµ‹æ–¹æ³•ï¼Œå…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦å’Œé«˜ç²¾å‡†åº¦ï¼Œæ˜¯ç¬¦åˆå¤§æ•°æ®å¤„ç†è¦æ±‚çš„state-of-the-artç®—æ³•ã€‚é€‚ç”¨äº<strong>è¿ç»­æ•°æ®ï¼ˆContinuous numerical dataï¼‰çš„å¼‚å¸¸æ£€æµ‹</strong>ï¼Œå°†å¼‚å¸¸å®šä¹‰ä¸ºâ€œå®¹æ˜“è¢«å­¤ç«‹çš„ç¦»ç¾¤ç‚¹ (more likely to be separated)â€â€”â€”å¯ä»¥ç†è§£ä¸ºåˆ†å¸ƒç¨€ç–ä¸”ç¦»å¯†åº¦é«˜çš„ç¾¤ä½“è¾ƒè¿œçš„ç‚¹ã€‚</p>
<p>æ„å»ºéšæœºæ£®æ—ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå†³ç­–æ ‘éƒ½æ˜¯éšæœºçš„ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ï¼Œéšæœºçš„é€‰æ‹©ç‰¹å¾å’Œé˜ˆå€¼ï¼Œå°†æ•°æ®åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p>
<p>é€‚ç”¨äºé«˜ç»´æ•°æ®</p>
<h4 id="Local-Outlier-Factoerï¼ˆLOFï¼‰"><a href="#Local-Outlier-Factoerï¼ˆLOFï¼‰" class="headerlink" title="Local Outlier Factoerï¼ˆLOFï¼‰"></a>Local Outlier Factoerï¼ˆLOFï¼‰</h4><p>ä¸€ä¸ªæ ·æœ¬ç‚¹å‘¨å›´çš„æ ·æœ¬ç‚¹æ‰€å¤„ä½ç½®çš„å¹³å‡å¯†åº¦æ¯”ä¸Šè¯¥æ ·æœ¬ç‚¹æ‰€åœ¨ä½ç½®çš„å¯†åº¦ã€‚æ¯”å€¼è¶Šå¤§äº1ï¼Œåˆ™è¯¥ç‚¹æ‰€åœ¨ä½ç½®çš„å¯†åº¦è¶Šå°äºå…¶å‘¨å›´æ ·æœ¬æ‰€åœ¨ä½ç½®çš„å¯†åº¦ï¼Œè¿™ä¸ªç‚¹å°±è¶Šæœ‰å¯èƒ½æ˜¯å¼‚å¸¸ç‚¹ã€‚</p>
<h4 id="One-class-SVM"><a href="#One-class-SVM" class="headerlink" title="One-class SVM"></a>One-class SVM</h4><p>å•åˆ†ç±»ç®—æ³•ï¼Œå¯»æ‰¾ä¸€ä¸ªè¶…å¹³é¢å°†æ ·æœ¬ä¸­çš„æ­£ä¾‹åœˆå‡ºæ¥ï¼Œé¢„æµ‹å°±æ˜¯ç”¨è¿™ä¸ªè¶…å¹³é¢åšå†³ç­–ï¼Œåœ¨åœˆå†…çš„æ ·æœ¬å°±è®¤ä¸ºæ˜¯æ­£æ ·æœ¬ã€‚ç”±äº<strong>æ ¸å‡½æ•°</strong>è®¡ç®—æ¯”è¾ƒè€—æ—¶ï¼Œåœ¨æµ·é‡æ•°æ®çš„åœºæ™¯ç”¨çš„å¹¶ä¸å¤šï¼›</p>
<p><strong>é€‚ç”¨äºæ–°é¢–æ€§æ£€æµ‹</strong></p>
<p><img src="https://img2018.cnblogs.com/blog/1226410/201904/1226410-20190424112057869-1957699378.png" alt="img"></p>
<h3 id="å¯†åº¦ä¼°è®¡ï¼ˆdensity-estimationï¼‰"><a href="#å¯†åº¦ä¼°è®¡ï¼ˆdensity-estimationï¼‰" class="headerlink" title="å¯†åº¦ä¼°è®¡ï¼ˆdensity estimationï¼‰"></a>å¯†åº¦ä¼°è®¡ï¼ˆdensity estimationï¼‰</h3><p>ç”¨æ¥ä¼°è®¡éšæœºè¿‡ç¨‹çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆprobability density functionï¼ˆPDFï¼‰ï¼‰ï¼ˆåº”ç”¨åœºæ™¯ï¼šå¼‚å¸¸æ£€æµ‹ï¼ˆå¯†åº¦ä½çš„åœ°æ–¹å¼‚å¸¸çš„æ¦‚ç‡å¤§ï¼‰ï¼Œæ•°æ®åˆ†æå’Œå¯è§†åŒ–ï¼‰</p>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>How would you define clustering? Can you name a few clustering algorithms?</p>
<blockquote>
<p>èšç±»æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ ï¼Œå°†å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å®ä¾‹èšé›†åœ¨ä¸€èµ·ã€‚</p>
<p>K-Means, DBSCANï¼Œå±‚æ¬¡èšç±»ï¼ŒBRICHï¼ŒMean-shiftï¼ŒAffinity propagationå’Œè°±èšç±»</p>
</blockquote>
</li>
<li><p>What are some of the main applications of clustering algorithms?</p>
<blockquote>
<p>åŠç›‘ç£å­¦ä¹ </p>
<p>å›¾åƒåˆ†å‰²</p>
<p>æ•°æ®é¢„å¤„ç†</p>
<p>å¼‚å¸¸å€¼æ£€æµ‹</p>
<p>æ–°é¢–æ€§æ£€æµ‹</p>
</blockquote>
</li>
<li><p>Describe two techniques to select the right number of clusters when using K-Means.</p>
<blockquote>
<ol>
<li>ç”»å‡ºk-inertiaå›¾åƒï¼Œé€‰æ‹©è‚˜éƒ¨</li>
<li>ç”»å‡ºk-è½®å»“ç³»æ•°å›¾åƒï¼Œé€‰æ‹©æœ€é«˜ç‚¹</li>
</ol>
</blockquote>
</li>
<li><p>What is label propagation? Why would you implement it, and how?</p>
<blockquote>
<p>å› ä¸ºæ‰“æ ‡ç­¾æ˜¯éå¸¸è€—æ—¶çš„ï¼Œæ‰€ä»¥å®é™…æƒ…å†µä¸‹ï¼Œæ•°æ®é›†ä¸­å¯èƒ½åªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ†æœ‰æ ‡ç­¾ï¼Œå¤§éƒ¨åˆ†æ•°æ®éƒ½æ²¡æœ‰æ ‡ç­¾ï¼Œæ ‡ç­¾ä¼ é€’å¯ä»¥å¾—åˆ°æ›´å¤šçš„å¸¦æ ‡ç­¾çš„æ•°æ®ï¼Œå¯ä»¥è¿›è¡Œç›‘ç£å­¦ä¹ ï¼ˆè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯éç›‘ç£å­¦ä¹ ï¼‰</p>
<p>å½“æ•°æ®ä¸­ä»…æœ‰å°‘éƒ¨åˆ†å…·æœ‰æ ‡ç­¾çš„æ•°æ®æ—¶ï¼Œå¯ä»¥å…ˆè¿›è¡Œèšç±»ï¼Œç„¶åå°†æ ‡ç­¾æ‰“åˆ°å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å®ä¾‹ä¸Šï¼ˆç¦»èšç±»ä¸­å¿ƒæœ€è¿‘çš„æœ‰æ ‡ç­¾æ•°æ®ï¼‰ã€‚</p>
</blockquote>
</li>
<li><p>Can you name two clustering algorithms that can scale to large datasets? And two that look for regions of high density?</p>
<blockquote>
<p>K-Meanså’ŒBRICHå¯ä»¥ç”¨äºå¤§çš„æ•°æ®é›†</p>
<p>DBSCANå’ŒMean-shiftï¼ˆä¸­å¿ƒå‘ç€å¯†åº¦é«˜çš„æ–¹å‘ç§»åŠ¨ï¼‰å¯»æ‰¾åŒºåŸŸå†…é«˜å¯†åº¦çš„ä½ç½®</p>
</blockquote>
</li>
<li><p>Can you think of a use case where active learning would be useful? How would you implement it?</p>
<blockquote>
<p>ä¸æ˜¯éšæœºçš„é€‰æ‹©æ•°æ®æ‰“æ ‡ç­¾ï¼Œè€Œæ˜¯äººç±»ä¸“å®¶å‚ä¸ç®—æ³•çš„å­¦ä¹ ï¼Œä¸ºç‰¹å®šçš„å®ä¾‹æä¾›æ ‡ç­¾ã€‚</p>
<p>ä¸ç¡®å®šé‡‡æ ·</p>
</blockquote>
</li>
<li><p>What is the difference between anomaly detection and novelty detection?</p>
<blockquote>
<p>å¼‚å¸¸å€¼æ£€æµ‹ä¸­ï¼šæ¨¡å‹åœ¨åŒ…å«å¼‚å¸¸å€¼çš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œï¼ˆå­¤ç«‹æ£®æ—ï¼‰</p>
<p>æ–°é¢–æ€§æ£€æµ‹ä¸­ï¼šæ¨¡å‹åœ¨ä¸€ä¸ªcleançš„æ•°æ®åŠä¸Šè®­ç»ƒï¼Œï¼ˆå•åˆ†ç±»-SVMï¼‰</p>
</blockquote>
</li>
<li><p>What is a Gaussian mixture? What tasks can you use it for?</p>
<blockquote>
<p>GMMæ˜¯ä¸€ç§æ¦‚ç‡æ¨¡å‹ï¼Œå‡è®¾å®ä¾‹æ˜¯ç”±è‹¥å¹²ä¸ªé«˜æ–¯æ¨¡å‹æ··åˆç”Ÿæˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œå‡è®¾æ•°æ®å±äºè‹¥å¹²æ¤­åœ†ç±»ï¼Œä½†å¤§å°ï¼Œæ–¹å‘ï¼Œå½¢çŠ¶å’Œå¯†åº¦éƒ½ä¸ç¡®å®šã€‚</p>
<p>å¯ä»¥ç”¨æ¥å¯†åº¦æ£€æµ‹ï¼Œå¼‚å¸¸å€¼æ£€æµ‹ï¼Œèšç±»ã€‚</p>
</blockquote>
</li>
<li><p>Can you name two techniques to find the right number of clusters when using a Gaussian mixture model?</p>
<blockquote>
<p>ç”»å‡ºk-AICæˆ–è€…k-BICçš„å›¾åƒï¼Œé€‰æ‹©ä½¿AICæˆ–è€…BICæ•°å€¼æœ€å°çš„èšç±»ä¸ªæ•°ã€‚</p>
</blockquote>
</li>
<li><p>The classic Olivetti faces dataset contains 400 grayscale 64 Ã— 64â€“pixel images of faces. Each image is flattened to a 1D vector of size 4,096. 40 different people were photographed (10 times each), and the usual task is to train a model that can predict which person is represented in each picture. Load the dataset using the <code>sklearn.datasets.fetch_olivetti_faces()</code> function, then split it into a training set, a validation set, and a test set (note that the dataset is already scaled between 0 and 1). Since the dataset is quite small, you probably want to use stratified sampling to ensure that there are the same number of images per person in each set. Next, cluster the images using K-Means, and ensure that you have a good number of clusters (using one of the techniques discussed in this chapter). Visualize the clusters: do you see similar faces in each cluster?</p>
</li>
<li><p>Continuing with the Olivetti faces dataset, train a classifier to predict which person is represented in each picture, and evaluate it on the validation set. Next, use K-Means as a dimensionality reduction tool, and train a classifier on the reduced set. Search for the number of clusters that allows the classifier to get the best performance: what performance can you reach? What if you append the features from the reduced set to the original features (again, searching for the best number of clusters)?</p>
</li>
<li><p>Train a Gaussian mixture model on the Olivetti faces dataset. To speed up the algorithm, you should probably reduce the datasetâ€™s dimensionality (e.g., use PCA, preserving 99% of the variance). Use the model to generate some new faces (using the <code>sample()</code> method), and visualize them (if you used PCA, you will need to use its <code>inverse_transform()</code> method). Try to modify some images (e.g., rotate, flip, darken) and see if the model can detect the anomalies (i.e., compare the output of the <code>score_samples()</code> method for normal images and for anomalies).</p>
</li>
<li><p>Some dimensionality reduction techniques can also be used for anomaly detection. For example, take the Olivetti faces dataset and reduce it with PCA, preserving 99% of the variance. Then compute the reconstruction error for each image. Next, take some of the modified images you built in the previous exercise, and look at their reconstruction error: notice how much larger the reconstruction error is. If you plot a reconstructed image, you will see why: it tries to reconstruct a normal face.</p>
</li>
</ol>
]]></content>
      <categories>
        <category>æ•°æ®åˆ†æ</category>
      </categories>
      <tags>
        <tag>sklearn</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šåˆ©ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æã€‹å­¦ä¹ </title>
    <url>/2020/08/23/%E3%80%8A%E5%88%A9%E7%94%A8Python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>ç®€ä¹¦ï¼š <a href="https://www.jianshu.com/p/04d180d90a3f" target="_blank" rel="noopener">https://www.jianshu.com/p/04d180d90a3f</a></p>
<p>githubï¼š <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fiamseancheney%2Fpython_for_data_analysis_2nd_chinese_version" target="_blank" rel="noopener">https://github.com/iamseancheney/python_for_data_analysis_2nd_chinese_version</a></p>
<p>gitbookï¼š <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fseancheney.gitbook.io%2Fpython-for-data-analysis-2nd%2F" target="_blank" rel="noopener">https://seancheney.gitbook.io/python-for-data-analysis-2nd/</a></p>
<p>[TOC]</p>
<h2 id="ç¬¬2ç« -Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter-Notebooks"><a href="#ç¬¬2ç« -Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter-Notebooks" class="headerlink" title="ç¬¬2ç«  Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter Notebooks"></a>ç¬¬2ç«  Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter Notebooks</h2><h3 id="IPythoné”®ç›˜å¿«æ·é”®"><a href="#IPythoné”®ç›˜å¿«æ·é”®" class="headerlink" title="IPythoné”®ç›˜å¿«æ·é”®"></a>IPythoné”®ç›˜å¿«æ·é”®</h3><a id="more"></a>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9ed3866ea25c11f8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e179f5ea00e50691.png?imageMogr2/auto-orient/strip|imageView2/2/w/491/format/webp" alt="img"></p>
<h3 id="IPythoné­”æœ¯å‘½ä»¤"><a href="#IPythoné­”æœ¯å‘½ä»¤" class="headerlink" title="IPythoné­”æœ¯å‘½ä»¤"></a>IPythoné­”æœ¯å‘½ä»¤</h3><p>IPythonä¸­ç‰¹æ®Šçš„å‘½ä»¤ï¼ˆPythonä¸­æ²¡æœ‰ï¼‰è¢«ç§°ä½œâ€œé­”æœ¯â€å‘½ä»¤ã€‚</p>
<p>line magic %</p>
<p>cell magic %%</p>
<p><code>%timeit</code>å¯ä»¥æµ‹é‡ä»»ä½•Pythonè¯­å¥çš„æ‰§è¡Œæ—¶é—´ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">20</span>]: a = np.random.randn(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: %timeit np.dot(a, a)</span><br><span class="line"><span class="number">10000</span> loops, best of <span class="number">3</span>: <span class="number">20.9</span> Âµs per loop</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c72b11add9b8ccf8.png?imageMogr2/auto-orient/strip|imageView2/2/w/695/format/webp" alt="img"></p>
<h3 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h3><p>IPythonä¸­é›†æˆäº†æ•°æ®å¯è§†åŒ–å’Œå…¶å®ƒç”¨æˆ·ç•Œé¢åº“ï¼Œæ¯”å¦‚matplotlibã€‚</p>
<p><code>%matplotlib</code>é­”æœ¯å‡½æ•°é…ç½®äº†IPython shellå’ŒJupyter notebookä¸­çš„matplotlibã€‚</p>
<p>åœ¨JUpyterä¸­ï¼Œå‘½ä»¤æœ‰æ‰€ä¸åŒï¼š<code>%matplotlib inline</code></p>
<h3 id="Pythonè¯­æ³•åŸºç¡€"><a href="#Pythonè¯­æ³•åŸºç¡€" class="headerlink" title="Pythonè¯­æ³•åŸºç¡€"></a>Pythonè¯­æ³•åŸºç¡€</h3><h4 id="ä½¿ç”¨ç¼©è¿›"><a href="#ä½¿ç”¨ç¼©è¿›" class="headerlink" title="ä½¿ç”¨ç¼©è¿›"></a>ä½¿ç”¨ç¼©è¿›</h4><p>å»ºè®®ä½¿ç”¨å››ä¸ªç©ºæ ¼ä½œä¸ºé»˜è®¤çš„ç¼©è¿›ï¼Œå¯ä»¥ä½¿ç”¨tabä»£æ›¿å››ä¸ªç©ºæ ¼ã€‚</p>
<h4 id="ä¸‡ç‰©çš†å¯¹è±¡"><a href="#ä¸‡ç‰©çš†å¯¹è±¡" class="headerlink" title="ä¸‡ç‰©çš†å¯¹è±¡"></a>ä¸‡ç‰©çš†å¯¹è±¡</h4><h4 id="ä½ç½®å’Œå…³é”®è¯å‚æ•°"><a href="#ä½ç½®å’Œå…³é”®è¯å‚æ•°" class="headerlink" title="ä½ç½®å’Œå…³é”®è¯å‚æ•°"></a>ä½ç½®å’Œå…³é”®è¯å‚æ•°</h4><p><code>result = f(a, b, c, d=5, e=&#39;foo&#39;)</code></p>
<h4 id="å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š"><a href="#å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š" class="headerlink" title="å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š"></a>å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = a</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-3e3a8c6b9c5040fc.png?imageMogr2/auto-orient/strip|imageView2/2/w/892/format/webp" alt="img"></p>
<p>åœ¨Pythonä¸­ï¼Œaå’Œbå®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡.èµ‹å€¼ä¹Ÿè¢«ç§°ä½œç»‘å®šï¼Œæˆ‘ä»¬æ˜¯æŠŠä¸€ä¸ªåå­—ç»‘å®šç»™ä¸€ä¸ªå¯¹è±¡ã€‚å˜é‡åæœ‰æ—¶å¯èƒ½è¢«ç§°ä¸ºç»‘å®šå˜é‡ã€‚</p>
<p>å°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæ–°çš„å±€åŸŸå˜é‡åˆ›å»ºäº†å¯¹åŸå§‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¤åˆ¶ã€‚å¦‚æœåœ¨å‡½æ•°é‡Œç»‘å®šä¸€ä¸ªæ–°å¯¹è±¡åˆ°ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜åŠ¨ä¸ä¼šåæ˜ åˆ°ä¸Šä¸€å±‚ã€‚</p>
<h4 id="å¼ºç±»å‹åŒ–è¯­è¨€"><a href="#å¼ºç±»å‹åŒ–è¯­è¨€" class="headerlink" title="å¼ºç±»å‹åŒ–è¯­è¨€"></a>å¼ºç±»å‹åŒ–è¯­è¨€</h4><p><code>&#39;5&#39; + 5</code> ä¼šæŠ¥é”™ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ˜ç¡®çš„ç±»å‹ï¼ˆæˆ–ç±»ï¼‰ï¼Œé»˜è®¸è½¬æ¢åªä¼šå‘ç”Ÿåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">17</span>]: a = <span class="number">4.5</span></span><br><span class="line">In [<span class="number">18</span>]: b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># String formatting, to be visited later</span></span><br><span class="line">In [<span class="number">19</span>]: print(<span class="string">'a is &#123;0&#125;, b is &#123;1&#125;'</span>.format(type(a), type(b)))</span><br><span class="line">a is &lt;class 'float'&gt;, b is &lt;class 'int'&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: a / b</span><br><span class="line">Out[<span class="number">20</span>]: <span class="number">2.25</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨<code>isinstance</code>å‡½æ•°æ£€æŸ¥å¯¹è±¡æ˜¯æŸä¸ªç±»å‹çš„å®ä¾‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">isinstance(a, int) <span class="comment">#æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹çš„å®ä¾‹</span></span><br><span class="line">isinstance(a, (int, float)) <span class="comment">#æ£€æŸ¥å¯¹è±¡çš„ç±»å‹æ˜¯å¦åœ¨å…ƒç»„ä¸­</span></span><br></pre></td></tr></table></figure>
<h4 id="å±æ€§å’Œæ–¹æ³•"><a href="#å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å±æ€§å’Œæ–¹æ³•"></a>å±æ€§å’Œæ–¹æ³•</h4><p>Pythonçš„å¯¹è±¡é€šå¸¸éƒ½æœ‰å±æ€§ï¼ˆå…¶å®ƒå­˜å‚¨åœ¨å¯¹è±¡å†…éƒ¨çš„Pythonå¯¹è±¡ï¼‰å’Œæ–¹æ³•ï¼ˆå¯¹è±¡çš„é™„å±å‡½æ•°å¯ä»¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼‰</p>
<p>å¯ä»¥ç”¨<code>obj.attribute_name</code>è®¿é—®å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨<code>getattr</code>å‡½æ•°ï¼Œé€šè¿‡åå­—è®¿é—®å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h4 id="é¸­å­ç±»å‹"><a href="#é¸­å­ç±»å‹" class="headerlink" title="é¸­å­ç±»å‹"></a>é¸­å­ç±»å‹</h4><p>ä¸å…³å¿ƒå¯¹è±¡çš„ç±»å‹ï¼Œåªå…³å¿ƒå¯¹è±¡æ˜¯å¦æœ‰æŸäº›æ–¹æ³•æˆ–ç”¨é€”ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œé¸­å­ç±»å‹â€ï¼Œæ¥è‡ªâ€œèµ°èµ·æ¥åƒé¸­å­ã€å«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€çš„è¯´æ³•ã€‚</p>
<p>é€šè¿‡éªŒè¯ä¸€ä¸ªå¯¹è±¡æ˜¯å¦éµå¾ªè¿­ä»£åè®®ï¼Œåˆ¤æ–­å®ƒæ˜¯å¯è¿­ä»£çš„ã€‚å¯¹äºè®¸å¤šå¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸€ä¸ª<code>__iter__</code>é­”æœ¯æ–¹æ³•ï¼Œå…¶å®ƒæ›´å¥½çš„åˆ¤æ–­æ–¹æ³•æ˜¯ä½¿ç”¨<code>iter</code>å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isiterable</span><span class="params">(obj)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        iter(obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> TypeError: <span class="comment"># not iterable</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨è¿™ä¸ªåŠŸèƒ½ç¼–å†™å¯ä»¥æ¥å—å¤šç§è¾“å…¥ç±»å‹çš„å‡½æ•°ã€‚ä¾‹å¦‚ç¼–å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„åºåˆ—ï¼ˆlistã€tupleã€ndarrayï¼‰æˆ–æ˜¯è¿­ä»£å™¨ã€‚å…ˆæ£€éªŒå¯¹è±¡æ˜¯å¦æ˜¯åˆ—è¡¨ï¼ˆæˆ–æ˜¯NUmPyæ•°ç»„ï¼‰ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°†å…¶è½¬å˜æˆåˆ—è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> isinstance(x, list) <span class="keyword">and</span> isiterable(x):</span><br><span class="line">    x = list(x)</span><br></pre></td></tr></table></figure>
<h4 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h4><h4 id="äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"><a href="#äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"></a>äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦</h4><p>è¦åˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>is</code>æ–¹æ³•ï¼Œ<code>is not</code>å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸åŒçš„ã€‚ä½¿ç”¨<code>is</code>æ¯”è¾ƒä¸<code>==</code>è¿ç®—ç¬¦ä¸åŒï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">35</span>]: a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: b = a</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: c = list(a) <span class="comment"># å› ä¸ºlistæ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Pythonåˆ—è¡¨ï¼ˆå³å¤åˆ¶ï¼‰</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: a <span class="keyword">is</span> b</span><br><span class="line">Out[<span class="number">38</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: a <span class="keyword">is</span> <span class="keyword">not</span> c</span><br><span class="line">Out[<span class="number">39</span>]: <span class="literal">True</span></span><br><span class="line">       </span><br><span class="line">In [<span class="number">40</span>]: a == c</span><br><span class="line">Out[<span class="number">40</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9fb5f25b33166acf.png?imageMogr2/auto-orient/strip|imageView2/2/w/811/format/webp" alt="img"></p>
<h4 id="å¯å˜ä¸ä¸å¯å˜å¯¹è±¡"><a href="#å¯å˜ä¸ä¸å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜ä¸ä¸å¯å˜å¯¹è±¡"></a>å¯å˜ä¸ä¸å¯å˜å¯¹è±¡</h4><p>Pythonä¸­çš„å¤§å¤šæ•°å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å­—å…¸ã€NumPyæ•°ç»„ï¼Œå’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼ˆç±»ï¼‰ï¼Œéƒ½æ˜¯å¯å˜çš„ï¼Œæ„å‘³ç€è¿™äº›å¯¹è±¡æˆ–åŒ…å«çš„å€¼å¯ä»¥è¢«ä¿®æ”¹ã€‚å…¶å®ƒä¾‹å¦‚<strong>å­—ç¬¦ä¸²å’Œå…ƒç»„</strong> ï¼Œæ˜¯ä¸å¯å˜çš„ã€‚</p>
<h4 id="æ ‡é‡ç±»å‹"><a href="#æ ‡é‡ç±»å‹" class="headerlink" title="æ ‡é‡ç±»å‹"></a>æ ‡é‡ç±»å‹</h4><p>Pythonçš„æ ‡å‡†åº“ä¸­æœ‰ä¸€äº›å†…å»ºçš„ç±»å‹ï¼Œç”¨äºå¤„ç†æ•°å€¼æ•°æ®ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼Œå’Œæ—¥æœŸæ—¶é—´ã€‚è¿™äº›å•å€¼ç±»å‹è¢«ç§°ä¸ºæ ‡é‡ç±»å‹ã€‚</p>
<p>æ—¥æœŸå’Œæ—¶é—´å¤„ç†ä¼šæ˜¯ç”±æ ‡å‡†åº“çš„<code>datetime</code>æ¨¡å—æä¾›çš„ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-27a30ac3e7d262a1.png?imageMogr2/auto-orient/strip|imageView2/2/w/808/format/webp" alt="img"></p>
<h4 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h4><p>Pythonçš„ä¸»è¦æ•°å€¼ç±»å‹æ˜¯<code>int</code>å’Œ<code>float</code></p>
<h4 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h4><p>åæ–œæ æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ„æ€æ˜¯å®ƒè¢«ç”¨æ¥è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦ã€‚</p>
<p>å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«è®¸å¤šåæ–œæ ï¼Œä½†æ²¡æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥åœ¨å­—ç¬¦ä¸²å‰é¢åŠ ä¸€ä¸ªrï¼Œè¡¨æ˜å­—ç¬¦å°±æ˜¯å®ƒè‡ªèº«ã€‚</p>
<p>å­—ç¬¦ä¸²çš„æ¨¡æ¿åŒ–æˆ–æ ¼å¼åŒ–ï¼š</p>
<ol>
<li><p><code>format</code>æ–¹æ³•ï¼Œå¯ä»¥æ›¿æ¢æ ¼å¼åŒ–çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">74</span>]: template = <span class="string">'&#123;0:.2f&#125; &#123;1:s&#125; are worth US$&#123;2:d&#125;'</span></span><br><span class="line">In [<span class="number">75</span>]: template.format(<span class="number">4.5560</span>, <span class="string">'Argentine Pesos'</span>, <span class="number">1</span>)</span><br><span class="line">Out[<span class="number">75</span>]: <span class="string">'4.56 Argentine Pesos are worth US$1'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="å­—èŠ‚å’ŒUnicode"><a href="#å­—èŠ‚å’ŒUnicode" class="headerlink" title="å­—èŠ‚å’ŒUnicode"></a>å­—èŠ‚å’ŒUnicode</h4><p>åœ¨Python 3åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒUnicodeæ˜¯ä¸€çº§çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ›´ä¸€è‡´çš„å¤„ç†ASCIIå’ŒNon-ASCIIæ–‡æœ¬ã€‚åœ¨è€çš„Pythonç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²éƒ½æ˜¯å­—èŠ‚ï¼Œä¸ä½¿ç”¨Unicodeç¼–ç ã€‚</p>
<p>å¯ä»¥ç”¨<code>encode</code>å°†Unicodeå­—ç¬¦ä¸²ç¼–ç ä¸ºUTF-8ï¼Œ<code>decode</code> å°†UTF-8è§£ç ä¸ºUnicodeç¼–ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">76</span>]: val = <span class="string">"espaÃ±ol"</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">77</span>]: val</span><br><span class="line">Out[<span class="number">77</span>]: <span class="string">'espaÃ±ol'</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">78</span>]: val_utf8 = val.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">79</span>]: val_utf8</span><br><span class="line">Out[<span class="number">79</span>]: <span class="string">b'espa\xc3\xb1ol'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">80</span>]: type(val_utf8)</span><br><span class="line">Out[<span class="number">80</span>]: bytes</span><br><span class="line"></span><br><span class="line">In [<span class="number">81</span>]: val_utf8.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">Out[<span class="number">81</span>]: <span class="string">'espaÃ±ol'</span></span><br></pre></td></tr></table></figure>
<p><strong>å¯ä»¥åœ¨å­—èŠ‚æ–‡æœ¬å‰åŠ ä¸Šb</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">85</span>]: bytes_val = <span class="string">b'this is bytes'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">86</span>]: bytes_val</span><br><span class="line">Out[<span class="number">86</span>]: <span class="string">b'this is bytes'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">87</span>]: decoded = bytes_val.decode(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">88</span>]: decoded  <span class="comment"># this is str (Unicode) now</span></span><br><span class="line">Out[<span class="number">88</span>]: <span class="string">'this is bytes'</span></span><br></pre></td></tr></table></figure>
<h4 id="None"><a href="#None" class="headerlink" title="None"></a>None</h4><p>Noneæ˜¯Pythonçš„ç©ºå€¼ç±»å‹ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰æ˜ç¡®çš„è¿”å›å€¼ï¼Œå°±ä¼šé»˜è®¤è¿”å›Noneï¼ŒNoneä¹Ÿå¸¸å¸¸ä½œä¸ºå‡½æ•°çš„é»˜è®¤å‚æ•°ã€‚</p>
<h4 id="æ—¶é—´å’Œæ—¥æœŸ"><a href="#æ—¶é—´å’Œæ—¥æœŸ" class="headerlink" title="æ—¶é—´å’Œæ—¥æœŸ"></a>æ—¶é—´å’Œæ—¥æœŸ</h4><p>Pythonå†…å»ºçš„<code>datetime</code>æ¨¡å—æä¾›äº†<code>datetime</code>ã€<code>date</code>å’Œ<code>time</code>ç±»å‹ã€‚<code>datetime</code>ç±»å‹ç»“åˆäº†<code>date</code>å’Œ<code>time</code>ï¼Œæ˜¯æœ€å¸¸ä½¿ç”¨çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">102</span>]: <span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, date, time</span><br><span class="line"></span><br><span class="line">In [<span class="number">103</span>]: dt = datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">104</span>]: dt.day</span><br><span class="line">Out[<span class="number">104</span>]: <span class="number">29</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">105</span>]: dt.minute</span><br><span class="line">Out[<span class="number">105</span>]: <span class="number">30</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">106</span>]: dt.date()</span><br><span class="line">Out[<span class="number">106</span>]: datetime.date(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: dt.time()</span><br><span class="line">Out[<span class="number">107</span>]: datetime.time(<span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br></pre></td></tr></table></figure>
<p><code>strftime</code>æ–¹æ³•å¯ä»¥å°†datetimeæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">108</span>]: dt.strftime(<span class="string">'%m/%d/%Y %H:%M'</span>)</span><br><span class="line">Out[<span class="number">108</span>]: <span class="string">'10/29/2011 20:30'</span></span><br></pre></td></tr></table></figure>
<p><code>strptime</code>å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢æˆ<code>datetime</code>å¯¹è±¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">109</span>]: datetime.strptime(<span class="string">'20091031'</span>, <span class="string">'%Y%m%d'</span>)</span><br><span class="line">Out[<span class="number">109</span>]: datetime.datetime(<span class="number">2009</span>, <span class="number">10</span>, <span class="number">31</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-100f9a20c1536553.png?imageMogr2/auto-orient/strip|imageView2/2/w/692/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># repalceè¿›è¡Œæ›¿æ¢</span></span><br><span class="line">In [<span class="number">110</span>]: dt.replace(minute=<span class="number">0</span>, second=<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">110</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># ä¸¤ä¸ªdatetimeå¯¹è±¡çš„å·®ä¼šäº§ç”Ÿä¸€ä¸ªdatetime.timedeltaç±»å‹ï¼š</span></span><br><span class="line">In [<span class="number">111</span>]: dt2 = datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">30</span>)</span><br><span class="line">In [<span class="number">112</span>]: delta = dt2 - dt</span><br><span class="line">In [<span class="number">113</span>]: delta</span><br><span class="line">Out[<span class="number">113</span>]: datetime.timedelta(<span class="number">17</span>, <span class="number">7179</span>) <span class="comment"># 17å¤©ã€7179ç§’</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">114</span>]: type(delta)</span><br><span class="line">Out[<span class="number">114</span>]: datetime.timedelta</span><br><span class="line"><span class="comment"># å¯ä»¥å°†timedeltaæ·»åŠ åˆ°datetimeï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„åç§»datetime </span></span><br><span class="line">In [<span class="number">115</span>]: dt</span><br><span class="line">Out[<span class="number">115</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">116</span>]: dt + delta</span><br><span class="line">Out[<span class="number">116</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">30</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h4><h5 id="ifè¯­å¥ï¼š"><a href="#ifè¯­å¥ï¼š" class="headerlink" title="ifè¯­å¥ï¼š"></a>ifè¯­å¥ï¼š</h5><p>if elif else</p>
<h5 id="forå¾ªç¯ï¼š"><a href="#forå¾ªç¯ï¼š" class="headerlink" title="forå¾ªç¯ï¼š"></a>forå¾ªç¯ï¼š</h5><p>å¯ä»¥ç”¨continueä½¿forå¾ªç¯æå‰ï¼Œè·³è¿‡å‰©ä¸‹çš„éƒ¨åˆ†ï¼›å¯ä»¥ç”¨<code>break</code>è·³å‡ºforå¾ªç¯ï¼Œbreakåªä¸­æ–­forå¾ªç¯çš„æœ€å†…å±‚ï¼Œå…¶ä½™çš„forå¾ªç¯ä»ä¼šè¿è¡Œã€‚</p>
<h5 id="whileå¾ªç¯ï¼š"><a href="#whileå¾ªç¯ï¼š" class="headerlink" title="whileå¾ªç¯ï¼š"></a>whileå¾ªç¯ï¼š</h5><h5 id="passï¼š"><a href="#passï¼š" class="headerlink" title="passï¼š"></a>passï¼š</h5><p>Pythonä¸­çš„éæ“ä½œè¯­å¥ã€‚ä»£ç å—ä¸éœ€è¦ä»»ä½•åŠ¨ä½œæ—¶å¯ä»¥ä½¿ç”¨ï¼ˆä½œä¸ºæœªæ‰§è¡Œä»£ç çš„å ä½ç¬¦ï¼‰ï¼›å› ä¸ºPythonéœ€è¦ä½¿ç”¨ç©ºç™½å­—ç¬¦åˆ’å®šä»£ç å—ï¼Œæ‰€ä»¥éœ€è¦passã€‚</p>
<h4 id="ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="ä¸‰å…ƒè¡¨è¾¾å¼"></a>ä¸‰å…ƒè¡¨è¾¾å¼</h4><p>Pythonä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼å¯ä»¥å°†if-elseè¯­å¥æ”¾åˆ°ä¸€è¡Œé‡Œï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">value = true-expr <span class="keyword">if</span> condition <span class="keyword">else</span> false-expr</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬3ç« -Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶"><a href="#ç¬¬3ç« -Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶" class="headerlink" title="ç¬¬3ç«  Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶"></a>ç¬¬3ç«  Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶</h2><h3 id="æ•°æ®ç»“æ„å’Œåºåˆ—"><a href="#æ•°æ®ç»“æ„å’Œåºåˆ—" class="headerlink" title="æ•°æ®ç»“æ„å’Œåºåˆ—"></a>æ•°æ®ç»“æ„å’Œåºåˆ—</h3><h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å…ƒç»„æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦ï¼Œä¸å¯æ”¹å˜çš„Pythonåºåˆ—å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå…ƒç»„</span></span><br><span class="line">tup = <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span></span><br><span class="line"><span class="comment"># å½“ç”¨å¤æ‚çš„è¡¨è¾¾å¼å®šä¹‰å…ƒç»„ï¼Œæœ€å¥½å°†å€¼æ”¾åˆ°åœ†æ‹¬å·å†…</span></span><br><span class="line">nested_tup = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line"><span class="comment"># ç”¨tupleå¯ä»¥å°†ä»»æ„åºåˆ—æˆ–è¿­ä»£å™¨è½¬æ¢æˆå…ƒç»„</span></span><br><span class="line">tuple([<span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>]) <span class="comment"># (4, 0, 2)</span></span><br><span class="line">tup = tuple(<span class="string">'string'</span>) <span class="comment"># ('s', 't', 'r', 'i', 'n', 'g')</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨æ–¹æ‹¬å·è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œåºåˆ—æ˜¯ä»0å¼€å§‹</span></span><br><span class="line">tup[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># å…ƒç»„ä¸­å­˜å‚¨çš„å¯¹è±¡å¯èƒ½æ˜¯å¯å˜å¯¹è±¡ã€‚ä¸€æ—¦åˆ›å»ºäº†å…ƒç»„ï¼Œå…ƒç»„ä¸­çš„å¯¹è±¡å°±ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">tup = tuple([<span class="string">'foo'</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="literal">True</span>])</span><br><span class="line">tup[<span class="number">2</span>] = <span class="literal">False</span>  <span class="comment"># ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># å¦‚æœå…ƒç»„ä¸­çš„æŸä¸ªå¯¹è±¡æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œå¯ä»¥åœ¨åŸä½è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">tup[<span class="number">1</span>].append(<span class="number">3</span>) <span class="comment"># ('foo', [1, 2, 3], True)</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨åŠ å·è¿ç®—ç¬¦å°†å…ƒç»„ä¸²è”èµ·æ¥</span></span><br><span class="line">(<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>) + (<span class="number">6</span>, <span class="number">0</span>) + (<span class="string">'bar'</span>,) <span class="comment"># (4, None, 'foo', 6, 0, 'bar')</span></span><br><span class="line"><span class="comment"># å…ƒç»„ä¹˜ä»¥ä¸€ä¸ªæ•´æ•°ï¼Œåƒåˆ—è¡¨ä¸€æ ·ï¼Œä¼šå°†å‡ ä¸ªå…ƒç»„çš„å¤åˆ¶ä¸²è”èµ·æ¥</span></span><br><span class="line">(<span class="string">'foo'</span>, <span class="string">'bar'</span>) * <span class="number">4</span> <span class="comment"># ('foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar')</span></span><br><span class="line"><span class="comment"># å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰è¢«å¤åˆ¶ï¼Œåªæ˜¯å¼•ç”¨äº†å®ƒ</span></span><br></pre></td></tr></table></figure>
<h5 id="æ‹†åˆ†å…ƒç»„"><a href="#æ‹†åˆ†å…ƒç»„" class="headerlink" title="æ‹†åˆ†å…ƒç»„"></a>æ‹†åˆ†å…ƒç»„</h5><p>å°†å…ƒç»„èµ‹å€¼ç»™ç±»ä¼¼å…ƒç»„çš„å˜é‡ï¼ŒPythonä¼šè¯•å›¾æ‹†åˆ†ç­‰å·å³è¾¹çš„å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tup = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">a,b,c = tup</span><br><span class="line">tup = <span class="number">4</span>, <span class="number">5</span>, (<span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">a, b, (c, d) = tup</span><br><span class="line"><span class="comment"># å˜é‡æ‹†åˆ†å¸¸ç”¨æ¥è¿­ä»£å…ƒç»„æˆ–åˆ—è¡¨åºåˆ—</span></span><br><span class="line">seq = [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line"><span class="keyword">for</span> a, b, c <span class="keyword">in</span> seq:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># å¦ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é«˜çº§çš„å…ƒç»„æ‹†åˆ†åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œä»å…ƒç»„çš„å¼€å¤´â€œæ‘˜å–â€å‡ ä¸ªå…ƒç´ ã€‚å®ƒä½¿ç”¨äº†ç‰¹æ®Šçš„è¯­æ³•*rest</span></span><br><span class="line">values = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line">a, b, *rest = values</span><br><span class="line">rest <span class="comment"># [3, 4, 5]</span></span><br><span class="line"><span class="comment"># restçš„éƒ¨åˆ†æ˜¯æƒ³è¦èˆå¼ƒçš„éƒ¨åˆ†ï¼Œrestçš„åå­—ä¸é‡è¦ã€‚ä½œä¸ºæƒ¯ç”¨å†™æ³•ï¼Œè®¸å¤šPythonç¨‹åºå‘˜ä¼šå°†ä¸éœ€è¦çš„å˜é‡ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š</span></span><br><span class="line">a, b, *_ = values</span><br></pre></td></tr></table></figure>
<p>åœ¨Pythonä¸­ï¼Œæ›¿æ¢å¯ä»¥è¿™æ ·åš:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b, a = a, b</span><br></pre></td></tr></table></figure>
<h5 id="tupleæ–¹æ³•"><a href="#tupleæ–¹æ³•" class="headerlink" title="tupleæ–¹æ³•"></a>tupleæ–¹æ³•</h5><p>å…ƒç»„çš„å¤§å°å’Œå†…å®¹ä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥å…¶å®ä¾‹æ–¹æ³•éƒ½å¾ˆè½»é‡ã€‚å…¶ä¸­ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å°±æ˜¯<code>count</code>ï¼ˆä¹Ÿé€‚ç”¨äºåˆ—è¡¨ï¼‰ï¼Œå®ƒå¯ä»¥ç»Ÿè®¡æŸä¸ªå€¼å¾—å‡ºç°é¢‘ç‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line">a.count(<span class="number">2</span>) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><p>åˆ—è¡¨çš„é•¿åº¦å¯å˜ã€å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ã€‚å¯ä»¥ç”¨æ–¹æ‹¬å·å®šä¹‰ï¼Œæˆ–ç”¨<code>list</code>å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a_list = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="literal">None</span>]</span><br><span class="line">tup = (<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>)</span><br><span class="line">b_list = list(tup) <span class="comment"># ['foo', 'bar', 'baz']</span></span><br></pre></td></tr></table></figure>
<p><code>list</code>å‡½æ•°å¸¸ç”¨æ¥åœ¨æ•°æ®å¤„ç†ä¸­å®ä½“åŒ–è¿­ä»£å™¨æˆ–ç”Ÿæˆå™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">gen = range(<span class="number">10</span>)</span><br><span class="line">list(gen) <span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>
<p><code>append</code>åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ </p>
<p><code>insert</code>åœ¨ç‰¹å®šçš„ä½ç½®æ’å…¥å…ƒç´ ï¼Œæ’å…¥çš„åºå·å¿…é¡»åœ¨0å’Œåˆ—è¡¨é•¿åº¦ä¹‹é—´</p>
<p><strong>æ³¨æ„ï¼š</strong> è­¦å‘Šï¼šä¸<code>append</code>ç›¸æ¯”ï¼Œ<code>insert</code>è€—è´¹çš„è®¡ç®—é‡å¤§ï¼Œå› ä¸ºéœ€è¦å¯¹åç»­å…ƒç´ çš„å¼•ç”¨å¿…é¡»åœ¨å†…éƒ¨è¿ç§»ï¼Œä»¥ä¾¿ä¸ºæ–°å…ƒç´ æä¾›ç©ºé—´ã€‚å¦‚æœè¦åœ¨åºåˆ—çš„å¤´éƒ¨å’Œå°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨åŒå°¾éƒ¨é˜Ÿåˆ—<code>collections.deque</code>ã€‚</p>
<p><code>pop</code>, <code>insert</code>çš„é€†è¿ç®—ï¼Œç§»é™¤å¹¶è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ </p>
<p><code>remove</code>å»é™¤æŸä¸ªå€¼ï¼Œ<code>remove</code>ä¼šå…ˆå¯»æ‰¾ç¬¬ä¸€ä¸ªå€¼å¹¶é™¤å»</p>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä¸è€ƒè™‘æ€§èƒ½ï¼Œä½¿ç”¨<code>append</code>å’Œ<code>remove</code>ï¼Œå¯ä»¥æŠŠPythonçš„åˆ—è¡¨å½“åšå®Œç¾çš„â€œå¤šé‡é›†â€æ•°æ®ç»“æ„ã€‚</p>
<p><code>in</code> å’Œ<code>not in</code>æ£€æŸ¥åˆ—è¡¨æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼Œ </p>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨åˆ—è¡¨ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼è¿œæ¯”å­—å…¸å’Œé›†åˆé€Ÿåº¦æ…¢ï¼Œå› ä¸ºPythonæ˜¯çº¿æ€§æœç´¢åˆ—è¡¨ä¸­çš„å€¼ï¼Œä½†åœ¨å­—å…¸å’Œé›†åˆä¸­ï¼Œåœ¨åŒæ ·çš„æ—¶é—´å†…è¿˜å¯ä»¥æ£€æŸ¥å…¶å®ƒé¡¹ï¼ˆåŸºäºå“ˆå¸Œè¡¨ï¼‰</p>
<h5 id="ä¸²è”å’Œç»„åˆåˆ—è¡¨"><a href="#ä¸²è”å’Œç»„åˆåˆ—è¡¨" class="headerlink" title="ä¸²è”å’Œç»„åˆåˆ—è¡¨"></a>ä¸²è”å’Œç»„åˆåˆ—è¡¨</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨åŠ å·å°†ä¸¤ä¸ªåˆ—è¡¨ä¸²è”èµ·æ¥</span></span><br><span class="line">[<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>] + [<span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line">[<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>, <span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="comment"># ç”¨extendæ–¹æ³•å¯ä»¥è¿½åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line">x = [<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>]</span><br><span class="line">x.extend([<span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="comment">## é€šè¿‡åŠ æ³•å°†åˆ—è¡¨ä¸²è”çš„è®¡ç®—é‡è¾ƒå¤§ï¼Œå› ä¸ºè¦æ–°å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”è¦å¤åˆ¶å¯¹è±¡ã€‚ç”¨extendè¿½åŠ å…ƒç´ ï¼Œå°¤å…¶æ˜¯åˆ°ä¸€ä¸ªå¤§åˆ—è¡¨ä¸­ï¼Œæ›´ä¸ºå¯å–ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨sortå‡½æ•°å°†ä¸€ä¸ªåˆ—è¡¨åŸåœ°æ’åºï¼ˆä¸åˆ›å»ºæ–°çš„å¯¹è±¡ï¼‰</span></span><br><span class="line">a = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">a.sort()</span><br><span class="line"><span class="comment"># sort äºŒçº§æ’åºkey</span></span><br><span class="line">b = [<span class="string">'saw'</span>, <span class="string">'small'</span>, <span class="string">'He'</span>, <span class="string">'foxes'</span>, <span class="string">'six'</span>]</span><br><span class="line">b.sort(key=len)</span><br><span class="line"><span class="comment"># sortedå‡½æ•°ï¼Œå®ƒå¯ä»¥äº§ç”Ÿä¸€ä¸ªæ’å¥½åºçš„åºåˆ—å‰¯æœ¬</span></span><br></pre></td></tr></table></figure>
<h5 id="äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨"><a href="#äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨" class="headerlink" title="äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨"></a>äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨</h5><p><code>bisect</code>æ¨¡å—æ”¯æŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå’Œå‘å·²æ’åºçš„åˆ—è¡¨æ’å…¥å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</span><br><span class="line"><span class="comment"># bisect.bisectå¯ä»¥æ‰¾åˆ°æ’å…¥å€¼åä»ä¿è¯æ’åºçš„ä½ç½®</span></span><br><span class="line">bisect.bisect(c, <span class="number">5</span>) <span class="comment"># 6</span></span><br><span class="line"><span class="comment"># bisect.insortå‘è¿™ä¸ªä½ç½®æ’å…¥å€¼</span></span><br><span class="line">bisect.insort(c, <span class="number">6</span>)</span><br><span class="line"><span class="comment">##  bisectæ¨¡å—ä¸ä¼šæ£€æŸ¥åˆ—è¡¨æ˜¯å¦å·²æ’å¥½åºï¼Œè¿›è¡Œæ£€æŸ¥çš„è¯ä¼šè€—è´¹å¤§é‡è®¡ç®—ã€‚å› æ­¤ï¼Œå¯¹æœªæ’åºçš„åˆ—è¡¨ä½¿ç”¨bisectä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼Œä½†ç»“æœä¸ä¸€å®šæ­£ç¡®ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h5><p>ç”¨åˆ‡è¾¹å¯ä»¥é€‰å–å¤§å¤šæ•°åºåˆ—ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œåˆ‡ç‰‡çš„åŸºæœ¬å½¢å¼æ˜¯åœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨<code>start:stop</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">seq = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">seq[<span class="number">1</span>:<span class="number">5</span>] <span class="comment"># [2, 3, 7, 5]</span></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡ä¹Ÿå¯ä»¥è¢«åºåˆ—èµ‹å€¼</span></span><br><span class="line">seq[<span class="number">3</span>:<span class="number">4</span>] = [<span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># startæˆ–stopéƒ½å¯ä»¥è¢«çœç•¥ï¼Œçœç•¥ä¹‹åï¼Œåˆ†åˆ«é»˜è®¤åºåˆ—çš„å¼€å¤´å’Œç»“å°¾</span></span><br><span class="line">seq[<span class="number">3</span>:] </span><br><span class="line"><span class="comment"># è´Ÿæ•°è¡¨æ˜ä»åå‘å‰åˆ‡ç‰‡</span></span><br><span class="line">seq[<span class="number">-4</span>:]  <span class="comment"># [5, 6, 0, 1]</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªå†’å·åé¢ä½¿ç”¨stepï¼Œå¯ä»¥éš”å‡ ä¸ªå–ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">seq[::<span class="number">2</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨-1ï¼Œå®ƒå¯ä»¥å°†åˆ—è¡¨æˆ–å…ƒç»„é¢ å€’è¿‡æ¥</span></span><br><span class="line">seq[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-522e2b688b755ff3.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="åºåˆ—å‡½æ•°"><a href="#åºåˆ—å‡½æ•°" class="headerlink" title="åºåˆ—å‡½æ•°"></a>åºåˆ—å‡½æ•°</h4><p>Pythonæœ‰ä¸€äº›æœ‰ç”¨çš„åºåˆ—å‡½æ•°ã€‚</p>
<h5 id="enumerateå‡½æ•°"><a href="#enumerateå‡½æ•°" class="headerlink" title="enumerateå‡½æ•°"></a>enumerateå‡½æ•°</h5><p>è¿­ä»£ä¸€ä¸ªåºåˆ—æ—¶ï¼Œæƒ³è¦è·Ÿè¸ªå½“å‰é¡¹çš„åºå·ï¼Œå¯ä»¥ä½¿ç”¨Pythonå†…å»ºçš„<code>enumerate</code>å‡½æ•°ï¼Œå¯ä»¥è¿”å›<code>(i, value)</code>å…ƒç»„åºåˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate(collection):</span><br><span class="line">   <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>ç´¢å¼•æ•°æ®æ—¶ï¼Œä½¿ç”¨<code>enumerate</code>çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯è®¡ç®—åºåˆ—ï¼ˆå”¯ä¸€çš„ï¼‰<code>dict</code>æ˜ å°„åˆ°ä½ç½®çš„å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> enumerate(some_list):</span><br><span class="line">    mapping[v] = i</span><br><span class="line">mapping <span class="comment">#  &#123;'bar': 1, 'baz': 2, 'foo': 0&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="sortedå‡½æ•°"><a href="#sortedå‡½æ•°" class="headerlink" title="sortedå‡½æ•°"></a>sortedå‡½æ•°</h5><p>è¿”å›ä¸€ä¸ª<strong>æ–°çš„</strong> æ’å¥½åºçš„åˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br><span class="line">b = sorted(a)</span><br><span class="line">b <span class="comment"># [0, 1, 2, 2, 3, 6, 7]</span></span><br><span class="line">a <span class="comment"># [7, 1, 2, 6, 0, 3, 2]</span></span><br></pre></td></tr></table></figure>
<h5 id="zipå‡½æ•°"><a href="#zipå‡½æ•°" class="headerlink" title="zipå‡½æ•°"></a>zipå‡½æ•°</h5><p>å°†å¤šä¸ªåˆ—è¡¨ã€å…ƒç»„æˆ–å…¶å®ƒåºåˆ—æˆå¯¹ç»„åˆæˆä¸€ä¸ªå…ƒç»„åˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">seq1 = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br><span class="line">seq2 = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]</span><br><span class="line">zipped = zip(seq1, seq2)</span><br><span class="line">list(zipped) <span class="comment"># [('foo', 'one'), ('bar', 'two'), ('baz', 'three')]</span></span><br><span class="line"><span class="comment"># zipå¯ä»¥å¤„ç†ä»»æ„å¤šçš„åºåˆ—ï¼Œå…ƒç´ çš„ä¸ªæ•°å–å†³äºæœ€çŸ­çš„åºåˆ—</span></span><br><span class="line">seq3 = [<span class="literal">False</span>, <span class="literal">True</span>]</span><br><span class="line">list(zip(seq1, seq2, seq3)) <span class="comment">#  [('foo', 'one', False), ('bar', 'two', True)]</span></span><br></pre></td></tr></table></figure>
<p><code>zip</code>å¯ä»¥è¢«ç”¨æ¥è§£å‹åºåˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pitchers = [(<span class="string">'Nolan'</span>, <span class="string">'Ryan'</span>), (<span class="string">'Roger'</span>, <span class="string">'Clemens'</span>), (<span class="string">'Schilling'</span>, <span class="string">'Curt'</span>)]</span><br><span class="line">first_names, last_names = zip(*pitchers)</span><br><span class="line">first_names  <span class="comment"># ('Nolan', 'Roger', 'Schilling')</span></span><br><span class="line">last_names   <span class="comment"># ('Ryan', 'Clemens', 'Curt')</span></span><br></pre></td></tr></table></figure>
<p><code>zip</code>çš„å¸¸è§ç”¨æ³•ä¹‹ä¸€æ˜¯åŒæ—¶è¿­ä»£å¤šä¸ªåºåˆ—ï¼Œå¯èƒ½ç»“åˆ<code>enumerate</code>ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, (a, b) <span class="keyword">in</span> enumerate(zip(seq1, seq2)):     </span><br><span class="line">    print(<span class="string">'&#123;0&#125;: &#123;1&#125;, &#123;2&#125;'</span>.format(i, a, b))</span><br><span class="line"><span class="number">0</span>: foo, one</span><br><span class="line"><span class="number">1</span>: bar, two</span><br><span class="line"><span class="number">2</span>: baz, three</span><br></pre></td></tr></table></figure>
<h5 id="reversedå‡½æ•°"><a href="#reversedå‡½æ•°" class="headerlink" title="reversedå‡½æ•°"></a>reversedå‡½æ•°</h5><p><code>reversed</code>æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼ˆzipä¹Ÿæ˜¯ï¼‰ï¼Œå¯ä»¥ä»åå‘å‰è¿­ä»£ä¸€ä¸ªåºåˆ—ã€‚æ³¨æ„ï¼šåªæœ‰å®ä½“åŒ–ï¼ˆå³åˆ—è¡¨æˆ–forå¾ªç¯ï¼‰ä¹‹åæ‰èƒ½åˆ›å»ºç¿»è½¬çš„åºåˆ—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list(reversed(range(<span class="number">10</span>))) <span class="comment"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span></span><br></pre></td></tr></table></figure>
<h4 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h4><p>ä¹Ÿç§°ä¸ºï¼šå“ˆå¸Œæ˜ å°„æˆ–å…³è”æ•°ç»„ã€‚å®ƒæ˜¯é”®å€¼å¯¹çš„å¤§å°å¯å˜é›†åˆï¼Œé”®å’Œå€¼éƒ½æ˜¯Pythonå¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”±&#123;&#125;å®šä¹‰</span></span><br><span class="line">d1 = &#123;<span class="string">'a'</span> : <span class="string">'some value'</span>, <span class="string">'b'</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;</span><br><span class="line"><span class="comment"># æ·»åŠ </span></span><br><span class="line">d1[<span class="number">7</span>] = <span class="string">'an integer'</span></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">d1[<span class="string">'b'</span>]  <span class="comment"># [1,2,3,4]</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦åŒ…å«æŸä¸ªé”®</span></span><br><span class="line"><span class="string">'b'</span> <span class="keyword">in</span> d1</span><br><span class="line"><span class="comment"># ç”¨delå…³é”®å­—æˆ–popæ–¹æ³•ï¼ˆè¿”å›å€¼çš„åŒæ—¶åˆ é™¤é”®ï¼‰åˆ é™¤å€¼</span></span><br><span class="line"><span class="keyword">del</span> d1[<span class="string">'b'</span>]</span><br><span class="line">ret = d1.pop(<span class="string">'b'</span>)  <span class="comment"># ret: [1, 2, 3, 4]</span></span><br><span class="line"><span class="comment"># keyså’Œvaluesæ˜¯å­—å…¸çš„é”®å’Œå€¼çš„è¿­ä»£å™¨æ–¹æ³•ã€‚è™½ç„¶é”®å€¼å¯¹æ²¡æœ‰é¡ºåºï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ç”¨ç›¸åŒçš„é¡ºåºè¾“å‡ºé”®å’Œå€¼ï¼š</span></span><br><span class="line">list(d1.keys()) <span class="comment"># ['a', 'b', 7]</span></span><br><span class="line">list(d1.values()) <span class="comment"># ['some value', [1, 2, 3, 4], 'an integer']</span></span><br><span class="line"><span class="comment"># updateæ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå­—å…¸ä¸å¦ä¸€ä¸ªèåˆ</span></span><br><span class="line">d1.update(&#123;<span class="string">'b'</span> : <span class="string">'foo'</span>, <span class="string">'c'</span> : <span class="number">12</span>&#125;) <span class="comment"># é”®'b'å¯¹åº”çš„å€¼ä¼šæ”¹å˜</span></span><br><span class="line"><span class="comment"># updateæ–¹æ³•æ˜¯åŸåœ°æ”¹å˜å­—å…¸ï¼Œä»»ä½•ä¼ é€’ç»™updateçš„é”®çš„æ—§çš„å€¼éƒ½ä¼šè¢«èˆå¼ƒã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="ç”¨åºåˆ—åˆ›å»ºå­—å…¸"><a href="#ç”¨åºåˆ—åˆ›å»ºå­—å…¸" class="headerlink" title="ç”¨åºåˆ—åˆ›å»ºå­—å…¸"></a>ç”¨åºåˆ—åˆ›å»ºå­—å…¸</h5><p>å°†ä¸¤ä¸ªåºåˆ—é…å¯¹ç»„åˆæˆå­—å…¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> zip(key_list, value_list):</span><br><span class="line">    mapping[key] = val</span><br></pre></td></tr></table></figure>
<p>å­—å…¸æœ¬è´¨ä¸Šæ˜¯2å…ƒå…ƒç»„çš„é›†åˆï¼Œæ‰€ä»¥dictå¯ä»¥æ¥å—2å…ƒå…ƒç»„çš„åˆ—è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping = dict(zip(range(<span class="number">5</span>), reversed(range(<span class="number">5</span>))))</span><br></pre></td></tr></table></figure>
<h5 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h5><p>dictçš„æ–¹æ³•getå’Œpopå¯ä»¥å–é»˜è®¤å€¼è¿›è¡Œè¿”å›ã€‚geté»˜è®¤ä¼šè¿”å›Noneï¼Œå¦‚æœä¸å­˜åœ¨é”®ï¼Œpopä¼šæŠ›å‡ºä¸€ä¸ªä¾‹å¤–ã€‚</p>
<p><code>value = some_dict.get(key, default_value)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">words = [<span class="string">'apple'</span>, <span class="string">'bat'</span>, <span class="string">'bar'</span>, <span class="string">'atom'</span>, <span class="string">'book'</span>]</span><br><span class="line">by_letter = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    letter = word[<span class="number">0</span>]</span><br><span class="line">    by_letter.setdefault(letter, []).append(word)</span><br></pre></td></tr></table></figure>
<p><code>collections</code>æ¨¡å—æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç±»ï¼Œ<code>defaultdict</code>ï¼Œå®ƒå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä¸Šé¢ã€‚ä¼ é€’ç±»å‹æˆ–å‡½æ•°ä»¥ç”Ÿæˆæ¯ä¸ªä½ç½®çš„é»˜è®¤å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">by_letter = defaultdict(list)</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    by_letter[word[<span class="number">0</span>]].append(word)</span><br></pre></td></tr></table></figure>
<h5 id="æœ‰æ•ˆçš„é”®å¯¹ç±»å‹"><a href="#æœ‰æ•ˆçš„é”®å¯¹ç±»å‹" class="headerlink" title="æœ‰æ•ˆçš„é”®å¯¹ç±»å‹"></a>æœ‰æ•ˆçš„é”®å¯¹ç±»å‹</h5><p>å­—å…¸çš„å€¼å¯ä»¥æ˜¯ä»»æ„Pythonå¯¹è±¡ï¼Œè€Œé”®é€šå¸¸æ˜¯ä¸å¯å˜çš„æ ‡é‡ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹å‹ã€å­—ç¬¦ä¸²ï¼‰æˆ–å…ƒç»„ï¼ˆå…ƒç»„ä¸­çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚è¿™è¢«ç§°ä¸º<strong>â€œå¯å“ˆå¸Œæ€§â€</strong> ã€‚å¯ä»¥ç”¨<code>hash</code>å‡½æ•°æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯å“ˆå¸Œçš„ï¼ˆå¯è¢«ç”¨ä½œå­—å…¸çš„é”®ï¼‰ï¼š</p>
<h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><p>æ— åºçš„ä¸å¯é‡å¤çš„å…ƒç´ çš„é›†åˆã€‚å¯çœ‹æˆåªæœ‰é”®æ²¡æœ‰å€¼çš„å­—å…¸ã€‚å¯ä»¥é€šè¿‡setå‡½æ•°æˆ–ä½¿ç”¨å°–æ‹¬å·setè¯­å¥åˆ›å»ºé›†åˆï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">set([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>]) <span class="comment"># &#123;1, 2, 3&#125;</span></span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>&#125; <span class="comment"># &#123;1, 2, 3&#125;</span></span><br></pre></td></tr></table></figure>
<p>é›†åˆæ”¯æŒåˆå¹¶ã€äº¤é›†ã€å·®åˆ†å’Œå¯¹ç§°å·®ç­‰æ•°å­¦é›†åˆè¿ç®—ã€‚</p>
<h5 id="åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…-è¿ç®—ç¬¦ï¼‰"><a href="#åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…-è¿ç®—ç¬¦ï¼‰" class="headerlink" title="åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…|è¿ç®—ç¬¦ï¼‰"></a>åˆå¹¶ï¼ˆ<code>union</code>æ–¹æ³•ï¼Œæˆ–è€…<code>|</code>è¿ç®—ç¬¦ï¼‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.union(b) <span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br><span class="line">a | b <span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="äº¤é›†ï¼ˆintersectionæˆ–-amp-è¿ç®—ç¬¦ï¼‰"><a href="#äº¤é›†ï¼ˆintersectionæˆ–-amp-è¿ç®—ç¬¦ï¼‰" class="headerlink" title="äº¤é›†ï¼ˆintersectionæˆ–&amp;è¿ç®—ç¬¦ï¼‰"></a>äº¤é›†ï¼ˆ<code>intersection</code>æˆ–<code>&amp;</code>è¿ç®—ç¬¦ï¼‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.intersection(b) <span class="comment"># &#123;3, 4, 5&#125;</span></span><br><span class="line">a &amp; b <span class="comment"># &#123;3, 4, 5&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-980efe5d98ecc4d6.png?imageMogr2/auto-orient/strip|imageView2/2/w/695/format/webp" alt="img"></p>
<p>æ‰€æœ‰é€»è¾‘é›†åˆæ“ä½œéƒ½æœ‰å¦å¤–çš„åŸåœ°å®ç°æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç”¨ç»“æœæ›¿ä»£é›†åˆçš„å†…å®¹ï¼Œå¯¹äºå¤§çš„é›†åˆï¼Œè¿™ä¹ˆåšæ•ˆç‡æ›´é«˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">b = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br><span class="line">c = a.copy()  <span class="comment"># ç¡¬copy</span></span><br><span class="line">c |= b</span><br><span class="line">d = a.copy()</span><br><span class="line">d &amp;= b</span><br></pre></td></tr></table></figure>
<p>ä¸å­—å…¸çš„é”®ç±»ä¼¼ï¼Œé›†åˆå…ƒç´ é€šå¸¸éƒ½æ˜¯ä¸å¯å˜çš„ã€‚è¦è·å¾—ç±»ä¼¼åˆ—è¡¨çš„å…ƒç´ ï¼Œå¿…é¡»è½¬æ¢æˆå…ƒç»„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">my_set = &#123;tuple(my_data)&#125;</span><br><span class="line"><span class="comment"># ç›´æ¥ my_set = &#123;[1, 2, 3, 4]&#125; ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼"><a href="#åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼" class="headerlink" title="åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼"></a>åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼</h5><p>è¯¥ç‰¹æ€§å…è®¸ç”¨æˆ·ä»ä¸€ä¸ªé›†åˆè¿‡æ»¤å…ƒç´ ï¼Œå½¢æˆåˆ—è¡¨ï¼Œé›†åˆæˆ–å­—å…¸ï¼Œåœ¨ä¼ é€’å‚æ•°çš„è¿‡ç¨‹ä¸­è¿˜å¯ä»¥ä¿®æ”¹å…ƒç´ ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—è¡¨æ¨å¯¼å¼</span></span><br><span class="line">[expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition]</span><br><span class="line"><span class="comment"># å­—å…¸æ¨å¯¼å¼</span></span><br><span class="line">dict_comp = &#123;key-expr : value-expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125;</span><br><span class="line"><span class="comment"># ä¾‹å­</span></span><br><span class="line">loc_mapping = &#123;val : index <span class="keyword">for</span> index, val <span class="keyword">in</span> enumerate(strings)&#125;</span><br><span class="line"><span class="comment"># é›†åˆæ¨å¯¼å¼</span></span><br><span class="line">set_comp = &#123;expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125;</span><br><span class="line"><span class="comment"># mapå‡½æ•°</span></span><br><span class="line">strings = [<span class="string">'a'</span>, <span class="string">'as'</span>, <span class="string">'bat'</span>, <span class="string">'car'</span>, <span class="string">'dove'</span>, <span class="string">'python'</span>]</span><br><span class="line">unique_lengths = &#123;len(x) <span class="keyword">for</span> x <span class="keyword">in</span> strings&#125;</span><br><span class="line">set(map(len, strings)) <span class="comment"># map è¿”å›å¯è¿­ä»£å™¨ï¼Œä¹Ÿå¯ä»¥list(map(len,strings))</span></span><br></pre></td></tr></table></figure>
<h5 id="åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼"><a href="#åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼" class="headerlink" title="åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼"></a>åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_data = [[<span class="string">'John'</span>, <span class="string">'Emily'</span>, <span class="string">'Michael'</span>, <span class="string">'Mary'</span>, <span class="string">'Steven'</span>],[<span class="string">'Maria'</span>, <span class="string">'Juan'</span>, <span class="string">'Javier'</span>, <span class="string">'Natalia'</span>, <span class="string">'Pilar'</span>]]</span><br><span class="line">result = [name <span class="keyword">for</span> names <span class="keyword">in</span> all_data <span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">if</span> name.count(<span class="string">'e'</span>) &gt;= <span class="number">2</span>]</span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªæ•´æ•°å…ƒç»„çš„åˆ—è¡¨æ‰å¹³åŒ–æˆäº†ä¸€ä¸ªæ•´æ•°åˆ—è¡¨</span></span><br><span class="line">some_tuples = [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line">flattened = [x <span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples <span class="keyword">for</span> x <span class="keyword">in</span> tup]</span><br><span class="line">[[x <span class="keyword">for</span> x <span class="keyword">in</span> tup] <span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples] <span class="comment"># è¿™æ ·äº§ç”Ÿä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line"><span class="comment"># forè¡¨è¾¾å¼çš„é¡ºåºæ˜¯ä¸åµŒå¥—forå¾ªç¯çš„é¡ºåºä¸€æ ·</span></span><br><span class="line">flattened = []</span><br><span class="line"><span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples:</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> tup:</span><br><span class="line">        flattened.append(x)</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>å‡½æ•°æ˜¯Pythonä¸­æœ€ä¸»è¦ä¹Ÿæ˜¯æœ€é‡è¦çš„<strong>ä»£ç ç»„ç»‡å’Œå¤ç”¨æ‰‹æ®µ</strong> ã€‚å¦‚æœè¦<strong>é‡å¤ä½¿ç”¨ç›¸åŒæˆ–éå¸¸ç±»ä¼¼çš„ä»£ç </strong>ï¼Œå°±éœ€è¦å†™ä¸€ä¸ªå‡½æ•°ã€‚é€šè¿‡ç»™å‡½æ•°èµ·ä¸€ä¸ªåå­—ï¼Œè¿˜å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>å‡½æ•°ä½¿ç”¨<code>def</code>å…³é”®å­—å£°æ˜ï¼Œç”¨<code>return</code>å…³é”®å­—è¿”å›å€¼ï¼šå¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šæ¡returnè¯­å¥ã€‚å¦‚æœåˆ°è¾¾å‡½æ•°æœ«å°¾æ—¶æ²¡æœ‰é‡åˆ°ä»»ä½•ä¸€æ¡returnè¯­å¥ï¼Œåˆ™è¿”å›Noneã€‚</p>
<p>ä½ç½®å‚æ•°ï¼ˆpositionalï¼‰å’Œä¸€äº›å…³é”®å­—å‚æ•°ï¼ˆkeywordï¼‰ã€‚å…³é”®å­—å‚æ•°é€šå¸¸ç”¨äºæŒ‡å®šé»˜è®¤å€¼æˆ–å¯é€‰å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span><span class="params">(x, y, z=<span class="number">1.5</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> z &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> z * (x + y)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> z / (x + y)</span><br><span class="line"><span class="comment"># zæ˜¯å…³é”®å­—å‚æ•°</span></span><br><span class="line">my_function(<span class="number">5</span>, <span class="number">6</span>, z=<span class="number">0.7</span>)</span><br><span class="line">my_function(<span class="number">3.14</span>, <span class="number">7</span>, <span class="number">3.5</span>)</span><br><span class="line">my_function(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="comment"># å…³é”®å­—å‚æ•°å¿…é¡»ä½äºä½ç½®å‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¹‹åï¼Œå…³é”®å­—å‚æ•°é¡ºåºå¯ä»¥éšä¾¿</span></span><br></pre></td></tr></table></figure>
<h4 id="å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°"><a href="#å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°" class="headerlink" title="å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°"></a>å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°</h4><p>å‡½æ•°å¯ä»¥è®¿é—®ä¸¤ç§ä¸åŒä½œç”¨åŸŸä¸­çš„å˜é‡ï¼šå…¨å±€ï¼ˆglobalï¼‰å’Œå±€éƒ¨ï¼ˆlocalï¼‰</p>
<p>Pythonä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ç”¨äºæè¿°å˜é‡ä½œç”¨åŸŸçš„åç§°ã€‚ä»»ä½•åœ¨å‡½æ•°ä¸­èµ‹å€¼çš„å˜é‡é»˜è®¤éƒ½è¢«åˆ†é…åˆ°å±€éƒ¨å‘½åç©ºé—´ï¼ˆlocal namespaceï¼‰ä¸­ã€‚å±€éƒ¨å‘½åç©ºé—´æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»ºçš„ï¼Œå‡½æ•°å‚æ•°ä¼šç«‹å³å¡«å…¥è¯¥å‘½åç©ºé—´ã€‚åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå±€éƒ¨å‘½åç©ºé—´å°±ä¼šè¢«é”€æ¯ã€‚</p>
<h4 id="è¿”å›å¤šä¸ªå€¼"><a href="#è¿”å›å¤šä¸ªå€¼" class="headerlink" title="è¿”å›å¤šä¸ªå€¼"></a>è¿”å›å¤šä¸ªå€¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    a = <span class="number">5</span></span><br><span class="line">    b = <span class="number">6</span></span><br><span class="line">    c = <span class="number">7</span></span><br><span class="line">    <span class="keyword">return</span> a, b, c</span><br><span class="line">    <span class="comment">#return &#123;'a' : a, 'b' : b, 'c' : c&#125; #ä¹Ÿå¯ä»¥è¿”å›å­—å…¸</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å…¶å®åªè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæœ€åè¯¥å…ƒç»„ä¼šè¢«æ‹†åŒ…åˆ°å„ä¸ªç»“æœå˜é‡ä¸­ã€‚</p>
<h4 id="å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡"><a href="#å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡" class="headerlink" title="å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡"></a>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</h4><p>æ•°æ®æ¸…æ´—ï¼š</p>
<p>ä¸ºäº†å¾—åˆ°ä¸€ç»„èƒ½ç”¨äºåˆ†æå·¥ä½œçš„æ ¼å¼ç»Ÿä¸€çš„å­—ç¬¦ä¸²ï¼Œéœ€è¦åšå¾ˆå¤šäº‹æƒ…ï¼šå»é™¤ç©ºç™½ç¬¦ã€åˆ é™¤å„ç§æ ‡ç‚¹ç¬¦å·ã€æ­£ç¡®çš„å¤§å†™æ ¼å¼ç­‰ã€‚åšæ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨å†…å»ºçš„å­—ç¬¦ä¸²æ–¹æ³•å’Œæ­£åˆ™è¡¨è¾¾å¼<code>re</code>æ¨¡å—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_strings</span><span class="params">(strings)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> strings:</span><br><span class="line">        value = value.strip()</span><br><span class="line">        value = re.sub(<span class="string">'[!#?]'</span>, <span class="string">''</span>, value)</span><br><span class="line">        value = value.title()</span><br><span class="line">        result.append(value)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">clean_strings(states)</span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove_punctuation</span><span class="params">(value)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> re.sub(<span class="string">'[!#?]'</span>, <span class="string">''</span>, value)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_strings</span><span class="params">(strings, ops)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> strings:</span><br><span class="line">        <span class="keyword">for</span> function <span class="keyword">in</span> ops:</span><br><span class="line">            value = function(value)</span><br><span class="line">        result.append(value)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">clean_ops = [str.strip, remove_punctuation, str.title]</span><br><span class="line">clean_strings(states, clean_ops)</span><br></pre></td></tr></table></figure>
<h4 id="åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°"><a href="#åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°" class="headerlink" title="åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°"></a>åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°</h4><p>Pythonæ”¯æŒä¸€ç§è¢«ç§°ä¸ºåŒ¿åå‡½æ•°ï¼ˆlambdaå‡½æ•°ï¼Œè¿™ç§å‡½æ•°å¯¹è±¡æœ¬èº«æ˜¯æ²¡æœ‰æä¾›åç§°<strong>name</strong>å±æ€§ï¼‰ã€‚ä»…ç”±å•æ¡è¯­å¥ç»„æˆï¼Œè¯¥è¯­å¥çš„ç»“æœå°±æ˜¯è¿”å›å€¼ã€‚é€šè¿‡lambdaå…³é”®å­—å®šä¹‰çš„ï¼Œè¯¥å…³é”®å­—æ²¡æœ‰å«ä¹‰ï¼Œä»…ä»…è¡¨æ˜â€œæ­£åœ¨å£°æ˜çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°â€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_to_list</span><span class="params">(some_list, f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [f(x) <span class="keyword">for</span> x <span class="keyword">in</span> some_list]</span><br><span class="line"></span><br><span class="line">ints = [<span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">apply_to_list(ints, <span class="keyword">lambda</span> x: x * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨"><a href="#æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨" class="headerlink" title="æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨"></a>æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨</h4><p>æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰æ˜¯ä¸€ä¸ªè®¡ç®—æœºç§‘å­¦æœ¯è¯­ï¼Œæ˜¯æŒ‡é€šè¿‡â€œéƒ¨åˆ†å‚æ•°åº”ç”¨â€ï¼ˆpartial argument applicationï¼‰ä»ç°æœ‰å‡½æ•°æ´¾ç”Ÿå‡ºæ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æœ‰ä¸€ä¸ªæ‰§è¡Œä¸¤æ•°ç›¸åŠ çš„ç®€å•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_numbers</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"><span class="comment"># é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°</span></span><br><span class="line">add_five = <span class="keyword">lambda</span> y: add_numbers(<span class="number">5</span>, y)</span><br><span class="line"><span class="comment"># add_numbersçš„ç¬¬äºŒä¸ªå‚æ•°ç§°ä¸ºâ€œæŸ¯é‡ŒåŒ–çš„â€ï¼ˆcurriedï¼‰</span></span><br></pre></td></tr></table></figure>
<p>æœ¬è´¨ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥è°ƒç”¨ç°æœ‰å‡½æ•°çš„æ–°å‡½æ•°è€Œå·²ã€‚å†…ç½®çš„functoolsæ¨¡å—å¯ä»¥ç”¨partialå‡½æ•°å°†æ­¤è¿‡ç¨‹ç®€åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line">add_five = partial(add_numbers, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h4><p>Pythonå¯ä»¥ä»¥ä¸€ç§ä¸€è‡´çš„æ–¹å¼å¯¹åºåˆ—è¿›è¡Œè¿­ä»£ï¼ˆæ¯”å¦‚åˆ—è¡¨ä¸­çš„å¯¹è±¡æˆ–æ–‡ä»¶ä¸­çš„è¡Œï¼‰ã€‚è¿™æ˜¯é€šè¿‡ä¸€ç§å«åšè¿­ä»£å™¨åè®®ï¼ˆiterator protocolï¼Œå®ƒæ˜¯ä¸€ç§ä½¿å¯¹è±¡å¯è¿­ä»£çš„é€šç”¨æ–¹å¼ï¼‰çš„æ–¹å¼å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŸç”Ÿçš„ä½¿å¯¹è±¡å¯è¿­ä»£çš„æ–¹æ³•ã€‚</p>
<p>è¿­ä»£å™¨æ˜¯ä¸€ç§ç‰¹æ®Šå¯¹è±¡ï¼Œå®ƒå¯ä»¥åœ¨è¯¸å¦‚forå¾ªç¯ä¹‹ç±»çš„ä¸Šä¸‹æ–‡ä¸­å‘Pythonè§£é‡Šå™¨è¾“é€å¯¹è±¡ã€‚å¤§éƒ¨åˆ†èƒ½æ¥å—åˆ—è¡¨ä¹‹ç±»çš„å¯¹è±¡çš„æ–¹æ³•ä¹Ÿéƒ½å¯ä»¥æ¥å—ä»»ä½•å¯è¿­ä»£å¯¹è±¡ã€‚æ¯”å¦‚minã€maxã€sumç­‰å†…ç½®æ–¹æ³•ä»¥åŠlistã€tupleç­‰ç±»å‹æ„é€ å™¨ã€‚</p>
<p>ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰æ˜¯æ„é€ æ–°çš„å¯è¿­ä»£å¯¹è±¡çš„ä¸€ç§ç®€å•æ–¹å¼ã€‚ä¸€èˆ¬çš„å‡½æ•°æ‰§è¡Œä¹‹ååªä¼šè¿”å›å•ä¸ªå€¼ï¼Œè€Œç”Ÿæˆå™¨åˆ™æ˜¯ä»¥å»¶è¿Ÿçš„æ–¹å¼è¿”å›ä¸€ä¸ªå€¼åºåˆ—ï¼Œå³æ¯è¿”å›ä¸€ä¸ªå€¼ä¹‹åæš‚åœï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªå€¼è¢«è¯·æ±‚æ—¶å†ç»§ç»­ã€‚è¦åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨ï¼Œåªéœ€å°†å‡½æ•°ä¸­çš„returnæ›¿æ¢ä¸ºyeildå³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squares</span><span class="params">(n=<span class="number">10</span>)</span>:</span></span><br><span class="line">    print(<span class="string">'Generating squares from 1 to &#123;0&#125;'</span>.format(n ** <span class="number">2</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">yield</span> i ** <span class="number">2</span></span><br><span class="line">              </span><br><span class="line"><span class="comment"># è°ƒç”¨è¯¥ç”Ÿæˆå™¨æ—¶ï¼Œæ²¡æœ‰ä»»ä½•ä»£ç ä¼šè¢«ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">gen = squares()</span><br><span class="line"><span class="comment"># ç›´åˆ°ä»è¯¥ç”Ÿæˆå™¨ä¸­è¯·æ±‚å…ƒç´ æ—¶ï¼Œå®ƒæ‰ä¼šå¼€å§‹æ‰§è¡Œå…¶ä»£ç </span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> gen:</span><br><span class="line">    print(x,end=<span class="string">' '</span> )</span><br></pre></td></tr></table></figure>
<h5 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator-expressionï¼‰"><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator-expressionï¼‰" class="headerlink" title="ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator expressionï¼‰"></a>ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator expressionï¼‰</h5><p>å¦ä¸€ç§æ›´ç®€æ´çš„æ„é€ ç”Ÿæˆå™¨çš„æ–¹æ³•ã€‚ç±»ä¼¼äºåˆ—è¡¨ã€å­—å…¸ã€é›†åˆæ¨å¯¼å¼çš„ç”Ÿæˆå™¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…¶åˆ›å»ºæ–¹å¼ä¸ºï¼ŒæŠŠåˆ—è¡¨æ¨å¯¼å¼ä¸¤ç«¯çš„æ–¹æ‹¬å·æ”¹æˆåœ†æ‹¬å·</span></span><br><span class="line">gen = (x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>))</span><br><span class="line"><span class="comment"># ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_make_gen</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">        <span class="keyword">yield</span> x ** <span class="number">2</span></span><br><span class="line">gen = _make_gen()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å–ä»£åˆ—è¡¨æ¨å¯¼å¼ï¼Œä½œä¸ºå‡½æ•°å‚æ•°</span></span><br><span class="line">sum(x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>))</span><br><span class="line">dict((i, i **<span class="number">2</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h5 id="itertoolsæ¨¡å—"><a href="#itertoolsæ¨¡å—" class="headerlink" title="itertoolsæ¨¡å—"></a>itertoolsæ¨¡å—</h5><p>æ ‡å‡†åº“itertoolsæ¨¡å—ä¸­æœ‰ä¸€ç»„ç”¨äºè®¸å¤šå¸¸è§æ•°æ®ç®—æ³•çš„ç”Ÿæˆå™¨ã€‚ä¾‹å¦‚ï¼Œgroupbyå¯ä»¥æ¥å—ä»»ä½•åºåˆ—å’Œä¸€ä¸ªå‡½æ•°ã€‚å®ƒæ ¹æ®å‡½æ•°çš„è¿”å›å€¼å¯¹åºåˆ—ä¸­çš„<strong>è¿ç»­å…ƒç´ è¿›è¡Œåˆ†ç»„</strong> ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">first_letter = <span class="keyword">lambda</span> x: x[<span class="number">0</span>]</span><br><span class="line">names = [<span class="string">'Alan'</span>, <span class="string">'Adam'</span>, <span class="string">'Wes'</span>, <span class="string">'Will'</span>, <span class="string">'Albert'</span>, <span class="string">'Steven'</span>]</span><br><span class="line"><span class="keyword">for</span> letter, names <span class="keyword">in</span> itertools.groupby(names, first_letter):</span><br><span class="line">    print(letter, list(names)) <span class="comment"># names is a generator</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-111823d8767a104d.png?imageMogr2/auto-orient/strip|imageView2/2/w/696/format/webp" alt="img"></p>
<h4 id="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†"><a href="#é”™è¯¯å’Œå¼‚å¸¸å¤„ç†" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†"></a>é”™è¯¯å’Œå¼‚å¸¸å¤„ç†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åªæƒ³å¤„ç†ValueErrorï¼Œå…¶ä»–é”™è¯¯å¯èƒ½æ˜¯åˆç†çš„bug    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span> TypeError:</span><br><span class="line">    <span class="comment"># another thing  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯ä»¥ç”¨å…ƒç»„åŒ…å«å¤šä¸ªå¼‚å¸¸    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span> (TypeError, ValueError):</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##  ä¸æƒ³æŠ‘åˆ¶å¼‚å¸¸ï¼Œæ— è®ºtryéƒ¨åˆ†çš„ä»£ç æ˜¯å¦æˆåŠŸï¼Œéƒ½æ‰§è¡Œä¸€æ®µä»£ç    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¾‹å­</span></span><br><span class="line">f = open(path, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    write_to_file(f)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Failed'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Succeeded'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure>
<h4 id="IPythonçš„å¼‚å¸¸"><a href="#IPythonçš„å¼‚å¸¸" class="headerlink" title="IPythonçš„å¼‚å¸¸"></a>IPythonçš„å¼‚å¸¸</h4><p>åœ¨%runä¸€ä¸ªè„šæœ¬æˆ–ä¸€æ¡è¯­å¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼ŒIPythoné»˜è®¤ä¼šæ‰“å°å®Œæ•´çš„è°ƒç”¨æ ˆï¼ˆtracebackï¼‰ï¼Œåœ¨æ ˆçš„æ¯ä¸ªç‚¹éƒ½ä¼šæœ‰å‡ è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<p>IPythonä¸­ä»¥ç”¨é­”æœ¯å‘½ä»¤<code>%xmode</code>ï¼Œä»Plainï¼ˆä¸Pythonæ ‡å‡†è§£é‡Šå™¨ç›¸åŒï¼‰åˆ°Verboseï¼ˆå¸¦æœ‰å‡½æ•°çš„å‚æ•°å€¼ï¼‰æ§åˆ¶æ–‡æœ¬æ˜¾ç¤ºçš„æ•°é‡ã€‚å‘ç”Ÿé”™è¯¯ä¹‹åï¼Œï¼ˆç”¨%debugæˆ–%pdb magicsï¼‰å¯ä»¥è¿›å…¥stackè¿›è¡Œäº‹åè°ƒè¯•ã€‚</p>
<h3 id="æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ"><a href="#æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ"></a>æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path = <span class="string">'examples/segismundo.txt'</span></span><br><span class="line">f = open(path)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æ˜¯ä»¥åªè¯»æ¨¡å¼ï¼ˆâ€™râ€™ï¼‰æ‰“å¼€çš„ã€‚ç„¶åï¼Œå¯ä»¥åƒå¤„ç†åˆ—è¡¨é‚£æ ·æ¥å¤„ç†æ–‡ä»¶å¥æŸ„fï¼Œæ¯”å¦‚å¯¹è¡Œè¿›è¡Œè¿­ä»£ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># è¿˜å¯ä»¥</span></span><br><span class="line">lines = [x.rstrip() <span class="keyword">for</span> x <span class="keyword">in</span> open(path)]</span><br></pre></td></tr></table></figure>
<p>ä»æ–‡ä»¶ä¸­å–å‡ºçš„è¡Œéƒ½å¸¦æœ‰å®Œæ•´çš„è¡Œç»“æŸç¬¦ï¼ˆEOLï¼‰ã€‚</p>
<p>ä½¿ç”¨openåˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼Œä¸€å®šè¦ç”¨closeå…³é—­ã€‚å…³é—­æ–‡ä»¶å¯ä»¥è¿”å›æ“ä½œç³»ç»Ÿèµ„æºã€‚</p>
<p>ç”¨withè¯­å¥å¯ä»¥åœ¨é€€å‡ºä»£ç å—æ—¶ï¼Œè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œæ›´å®¹æ˜“åœ°æ¸…ç†æ‰“å¼€çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</span><br><span class="line">    lines = [x.rstrip() <span class="keyword">for</span> x <span class="keyword">in</span> f]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-28274484129f0ea7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="å¸¸ç”¨æ–¹æ³•-readã€seekã€tell"><a href="#å¸¸ç”¨æ–¹æ³•-readã€seekã€tell" class="headerlink" title="å¸¸ç”¨æ–¹æ³• readã€seekã€tell"></a>å¸¸ç”¨æ–¹æ³• readã€seekã€tell</h4><p>readä¼šä»æ–‡ä»¶è¿”å›å­—ç¬¦ã€‚å­—ç¬¦çš„å†…å®¹æ˜¯ç”±æ–‡ä»¶çš„ç¼–ç å†³å®šçš„ï¼ˆå¦‚UTF-8ï¼‰ï¼Œå¦‚æœæ˜¯äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„å°±æ˜¯åŸå§‹å­—èŠ‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = open(path)</span><br><span class="line">f.read(<span class="number">10</span>) <span class="comment"># 'SueÃ±a el r'</span></span><br><span class="line"></span><br><span class="line">f2 = open(path, <span class="string">'rb'</span>)  <span class="comment"># Binary mode</span></span><br><span class="line">f2.read(<span class="number">10</span>) <span class="comment"># b'Sue\xc3\xb1a el '</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#readæ¨¡å¼ä¼šå°†æ–‡ä»¶å¥æŸ„çš„ä½ç½®æå‰ï¼Œæå‰çš„æ•°é‡æ˜¯è¯»å–çš„å­—èŠ‚æ•°ã€‚tellå¯ä»¥ç»™å‡ºå½“å‰çš„ä½ç½®ï¼š</span></span><br><span class="line">f.tell() <span class="comment"># 11</span></span><br><span class="line">f2.tell() <span class="comment"># 10</span></span><br><span class="line"><span class="comment"># seekå°†æ–‡ä»¶ä½ç½®æ›´æ”¹ä¸ºæ–‡ä»¶ä¸­çš„æŒ‡å®šå­—èŠ‚</span></span><br><span class="line">f.seek(<span class="number">3</span>) <span class="comment"># 3</span></span><br><span class="line">f.read(<span class="number">1</span>) <span class="comment"># Ã±</span></span><br></pre></td></tr></table></figure>
<p>å‘æ–‡ä»¶å†™å…¥ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶çš„writeæˆ–writelinesæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'tmp.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> handle:</span><br><span class="line">    handle.writelines(x <span class="keyword">for</span> x <span class="keyword">in</span> open(path) <span class="keyword">if</span> len(x) &gt; <span class="number">1</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ— ç©ºè¡Œç‰ˆæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d25bd6e730afeb39.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode"><a href="#æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode" class="headerlink" title="æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode"></a>æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode</h4><p>Pythonæ–‡ä»¶çš„é»˜è®¤æ“ä½œæ˜¯â€œæ–‡æœ¬æ¨¡å¼â€ï¼Œå³å¤„ç†Pythonçš„å­—ç¬¦ä¸²ï¼ˆå³Unicodeï¼‰ã€‚äºŒè¿›åˆ¶æ¨¡å¼éœ€è¦åœ¨æ–‡ä»¶æ¨¡å¼ååŠ ä¸€ä¸ªbã€‚</p>
<p>UTF-8æ˜¯é•¿åº¦å¯å˜çš„Unicodeç¼–ç ï¼Œå½“ä»æ–‡ä»¶è¯·æ±‚ä¸€å®šæ•°é‡çš„å­—ç¬¦æ—¶ï¼ŒPythonä¼šä»æ–‡ä»¶è¯»å–è¶³å¤Ÿå¤šï¼ˆå¯èƒ½å°‘è‡³10æˆ–å¤šè‡³40å­—èŠ‚ï¼‰çš„å­—èŠ‚è¿›è¡Œè§£ç ã€‚å¦‚æœä»¥â€œrbâ€æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œåˆ™è¯»å–ç¡®åˆ‡çš„è¯·æ±‚å­—èŠ‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</span><br><span class="line">    chars = f.read(<span class="number">10</span>)  <span class="comment"># 'SueÃ±a el r'</span></span><br><span class="line"><span class="keyword">with</span> open(path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = f.read(<span class="number">10</span>)   <span class="comment"># b'Sue\xc3\xb1a el '</span></span><br><span class="line"><span class="comment"># å¯ä»¥å°†å­—èŠ‚è§£ç ä¸ºstrå¯¹è±¡ï¼Œä½†åªæœ‰å½“æ¯ä¸ªç¼–ç çš„Unicodeå­—ç¬¦éƒ½å®Œå…¨æˆå½¢æ—¶æ‰èƒ½è¿™ä¹ˆåšï¼š</span></span><br><span class="line">    data.decode(<span class="string">'utf8'</span>) <span class="comment"># 'SueÃ±a el '</span></span><br><span class="line"><span class="comment"># ä¸è¦åœ¨äºŒè¿›åˆ¶æ¨¡å¼ä¸­ä½¿ç”¨seekã€‚å¦‚æœæ–‡ä»¶ä½ç½®ä½äºå®šä¹‰Unicodeå­—ç¬¦çš„å­—èŠ‚çš„ä¸­é—´ä½ç½®ï¼Œè¯»å–åé¢ä¼šäº§ç”Ÿé”™è¯¯ï¼š</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬4ç« -NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—"><a href="#ç¬¬4ç« -NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—" class="headerlink" title="ç¬¬4ç«  NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—"></a>ç¬¬4ç«  NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—</h2><p>NumPyï¼ˆNumerical Pythonçš„ç®€ç§°ï¼‰æ˜¯Pythonæ•°å€¼è®¡ç®—æœ€é‡è¦çš„åŸºç¡€åŒ…ã€‚å¤§å¤šæ•°æä¾›ç§‘å­¦è®¡ç®—çš„åŒ…éƒ½æ˜¯ç”¨NumPyçš„æ•°ç»„ä½œä¸ºæ„å»ºåŸºç¡€ã€‚</p>
<p>NumPyå¯ä»¥é«˜æ•ˆå¤„ç†å¤§æ•°ç»„çš„æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>NumPyæ˜¯åœ¨ä¸€ä¸ªè¿ç»­çš„å†…å­˜å—ä¸­å­˜å‚¨æ•°æ®ï¼Œç‹¬ç«‹äºå…¶ä»–Pythonå†…ç½®å¯¹è±¡ã€‚NumPyçš„Cè¯­è¨€ç¼–å†™çš„ç®—æ³•åº“å¯ä»¥æ“ä½œå†…å­˜ï¼Œè€Œä¸å¿…è¿›è¡Œç±»å‹æ£€æŸ¥æˆ–å…¶å®ƒå‰æœŸå·¥ä½œã€‚æ¯”èµ·Pythonçš„å†…ç½®åºåˆ—ï¼ŒNumPyæ•°ç»„ä½¿ç”¨çš„å†…å­˜æ›´å°‘ã€‚</li>
<li>NumPyå¯ä»¥åœ¨æ•´ä¸ªæ•°ç»„ä¸Šæ‰§è¡Œå¤æ‚çš„è®¡ç®—ï¼Œè€Œä¸éœ€è¦Pythonçš„forå¾ªç¯ã€‚</li>
</ul>
<h3 id="å¤šç»´æ•°ç»„å¯¹è±¡ndarray"><a href="#å¤šç»´æ•°ç»„å¯¹è±¡ndarray" class="headerlink" title="å¤šç»´æ•°ç»„å¯¹è±¡ndarray"></a>å¤šç»´æ•°ç»„å¯¹è±¡ndarray</h3><p>ndarrayæ˜¯ä¸€ä¸ªé€šç”¨çš„åŒæ„æ•°æ®å¤šç»´å®¹å™¨ï¼Œæ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒç±»å‹çš„ã€‚</p>
<h4 id="åˆ›å»ºndarray"><a href="#åˆ›å»ºndarray" class="headerlink" title="åˆ›å»ºndarray"></a>åˆ›å»ºndarray</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨np.arrayå‡½æ•°åˆ›å»ºã€‚å®ƒæ¥å—ä¸€åˆ‡åºåˆ—å‹çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å…¶ä»–æ•°ç»„ï¼‰ï¼Œç„¶åäº§ç”Ÿä¸€ä¸ªæ–°çš„å«æœ‰ä¼ å…¥æ•°æ®çš„NumPyæ•°ç»„</span></span><br><span class="line">data1 = [<span class="number">6</span>, <span class="number">7.5</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">arr1 = np.array(data1)</span><br><span class="line"><span class="comment"># åµŒå¥—åºåˆ—ï¼ˆæ¯”å¦‚ç”±ä¸€ç»„ç­‰é•¿åˆ—è¡¨ç»„æˆçš„åˆ—è¡¨ï¼‰å°†ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå¤šç»´æ•°ç»„ï¼š</span></span><br><span class="line">data2 = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]</span><br><span class="line">arr2 = np.array(data2)</span><br><span class="line"><span class="comment"># å±æ€§ï¼šdtypeï¼Œshapeï¼Œndim</span></span><br></pre></td></tr></table></figure>
<p>zeros, oneså’Œemptyå¯ä»¥åˆ›å»ºæŒ‡å®šé•¿åº¦æˆ–å½¢çŠ¶çš„å…¨0ï¼Œå…¨1æˆ–è€…ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å…·ä½“å€¼çš„æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.zeros(<span class="number">10</span>)</span><br><span class="line">np.zeros((<span class="number">3</span>, <span class="number">6</span>))</span><br><span class="line">np.empty((<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>arangeæ˜¯Pythonå†…ç½®å‡½æ•°rangeçš„æ•°ç»„ç‰ˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.arange(<span class="number">15</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-78ab11f67e7077a6.png?imageMogr2/auto-orient/strip|imageView2/2/w/696/format/webp" alt="img"></p>
<p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œæ•°æ®ç±»å‹åŸºæœ¬éƒ½æ˜¯float64ï¼ˆæµ®ç‚¹æ•°ï¼‰ã€‚</p>
<h4 id="ndarrayçš„æ•°æ®ç±»å‹"><a href="#ndarrayçš„æ•°æ®ç±»å‹" class="headerlink" title="ndarrayçš„æ•°æ®ç±»å‹"></a>ndarrayçš„æ•°æ®ç±»å‹</h4><p>dtypeï¼ˆæ•°æ®ç±»å‹ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒå«æœ‰ndarrayå°†ä¸€å—å†…å­˜è§£é‡Šä¸ºç‰¹å®šæ•°æ®ç±»å‹æ‰€éœ€çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.float64)</span><br><span class="line">arr2 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int32)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-2f2d7406a8bc076c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-5cc31115615737b7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>å¯ä»¥é€šè¿‡ndarrayçš„<code>astype</code>æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ä»ä¸€ä¸ªdtypeè½¬æ¢æˆå¦ä¸€ä¸ªdtype</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">arr.dtype <span class="comment"># dtype('int64')</span></span><br><span class="line">float_arr = arr.astype(np.float64) <span class="comment"># ä¹Ÿå¯ä»¥å†™floatï¼ŒNumPyä¼šå°†Pythonç±»å‹æ˜ å°„åˆ°ç­‰ä»·çš„dtypeä¸Šã€‚ä¹Ÿå¯ç”¨ç®€æ´ç±»å‹ä»£ç è¡¨ç¤ºdtypeï¼Œf4</span></span><br><span class="line"><span class="comment"># å¦‚æœå°†æµ®ç‚¹æ•°è½¬æ¢æˆæ•´æ•°ï¼Œåˆ™å°æ•°éƒ¨åˆ†å°†ä¼šè¢«æˆªå–åˆ é™¤</span></span><br><span class="line"><span class="comment"># å¦‚æœæŸå­—ç¬¦ä¸²æ•°ç»„è¡¨ç¤ºçš„å…¨æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨astypeå°†å…¶è½¬æ¢ä¸ºæ•°å€¼å½¢å¼</span></span><br><span class="line">numeric_strings = np.array([<span class="string">'1.25'</span>, <span class="string">'-9.6'</span>, <span class="string">'42'</span>], dtype=np.string_)</span><br><span class="line">numeric_strings.astype(float)</span><br></pre></td></tr></table></figure>
<h4 id="NumPyæ•°ç»„çš„è¿ç®—"><a href="#NumPyæ•°ç»„çš„è¿ç®—" class="headerlink" title="NumPyæ•°ç»„çš„è¿ç®—"></a>NumPyæ•°ç»„çš„è¿ç®—</h4><p>ä¸ç¼–å†™å¾ªç¯ï¼Œä½¿ç”¨æ•°ç»„å³å¯å¯¹æ•°æ®æ‰§è¡Œæ‰¹é‡è¿ç®—ã€‚NumPyç”¨æˆ·ç§°å…¶ä¸º<strong>çŸ¢é‡åŒ–ï¼ˆvectorizationï¼‰</strong> </p>
<ul>
<li>å¤§å°ç›¸ç­‰çš„æ•°ç»„ä¹‹é—´çš„ä»»ä½•ç®—æœ¯è¿ç®—éƒ½ä¼šå°†è¿ç®—åº”ç”¨åˆ°å…ƒç´ çº§</li>
<li>æ•°ç»„ä¸æ ‡é‡çš„ç®—æœ¯è¿ç®—ä¼šå°†æ ‡é‡å€¼ä¼ æ’­åˆ°å„ä¸ªå…ƒç´ </li>
<li>å¤§å°ç›¸åŒçš„æ•°ç»„ä¹‹é—´çš„æ¯”è¾ƒä¼šç”Ÿæˆå¸ƒå°”å€¼æ•°ç»„</li>
<li>ä¸åŒå¤§å°çš„æ•°ç»„ä¹‹é—´çš„è¿ç®—å«åš<strong>å¹¿æ’­ï¼ˆbroadcastingï¼‰</strong> </li>
</ul>
<h4 id="åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡"><a href="#åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡" class="headerlink" title="åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡"></a>åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡</h4><h5 id="ä¸€ç»´æ•°ç»„"><a href="#ä¸€ç»´æ•°ç»„" class="headerlink" title="ä¸€ç»´æ•°ç»„"></a>ä¸€ç»´æ•°ç»„</h5><p>ä¸€ç»´æ•°ç»„å’Œåˆ—è¡¨æœ€é‡è¦çš„åŒºåˆ«åœ¨äºï¼šæ•°ç»„åˆ‡ç‰‡æ˜¯åŸå§‹æ•°ç»„çš„è§†å›¾ï¼Œå³æ•°æ®ä¸ä¼šè¢«å¤åˆ¶ï¼Œè§†å›¾ä¸Šçš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šç›´æ¥åæ˜ åˆ°æºæ•°ç»„ä¸Šã€‚è¿™æ˜¯å› ä¸ºNumPyçš„è®¾è®¡ç›®çš„æ˜¯å¤„ç†å¤§æ•°æ®ï¼Œå‡å¦‚NumPyåšæŒè¦å°†æ•°æ®å¤åˆ¶ä¼šäº§ç”Ÿæ€§èƒ½å’Œå†…å­˜é—®é¢˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªæ ‡é‡å€¼èµ‹å€¼ç»™ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œè¯¥å€¼ä¼šè‡ªåŠ¨ä¼ æ’­ï¼ˆå³â€œå¹¿æ’­â€ï¼‰åˆ°æ•´ä¸ªé€‰åŒº</span></span><br><span class="line">arr[<span class="number">5</span>:<span class="number">8</span>] = <span class="number">12</span>  <span class="comment"># array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])</span></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡[ : ]ä¼šç»™æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼èµ‹å€¼</span></span><br><span class="line"><span class="comment"># æ•°ç»„åˆ‡ç‰‡æ˜¯åŸå§‹æ•°ç»„çš„è§†å›¾</span></span><br><span class="line">arr_slice = arr[<span class="number">5</span>:<span class="number">8</span>]</span><br><span class="line">arr_slice[<span class="number">1</span>] = <span class="number">12345</span> <span class="comment"># arrä¹Ÿä¼šå‘ç”Ÿå˜åŒ–</span></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³è¦å¾—åˆ°ndarrayåˆ‡ç‰‡çš„å‰¯æœ¬è€Œéè§†å›¾</span></span><br><span class="line">arr[<span class="number">5</span>:<span class="number">8</span>].copy()</span><br></pre></td></tr></table></figure>
<h5 id="é«˜ç»´åº¦æ•°ç»„"><a href="#é«˜ç»´åº¦æ•°ç»„" class="headerlink" title="é«˜ç»´åº¦æ•°ç»„"></a>é«˜ç»´åº¦æ•°ç»„</h5><p><strong>äºŒç»´æ•°ç»„</strong> ä¸­ï¼Œå„ç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä¸æ˜¯æ ‡é‡è€Œæ˜¯ä¸€ç»´æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># å¯¹å„ä¸ªå…ƒç´ è¿›è¡Œé€’å½’è®¿é—®</span></span><br><span class="line">arr2d[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line"><span class="comment"># ä¼ å…¥ä¸€ä¸ªä»¥é€—å·éš”å¼€çš„ç´¢å¼•åˆ—è¡¨æ¥é€‰å–å•ä¸ªå…ƒç´ </span></span><br><span class="line">arr2d[<span class="number">0</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-0a641536f73f560e.png?imageMogr2/auto-orient/strip|imageView2/2/w/745/format/webp" alt="img"></p>
<p>åœ¨<strong>å¤šç»´æ•°ç»„</strong> ä¸­ï¼Œå¦‚æœçœç•¥äº†åé¢çš„ç´¢å¼•ï¼Œåˆ™è¿”å›å¯¹è±¡ä¼šæ˜¯ä¸€ä¸ªç»´åº¦ä½ä¸€ç‚¹çš„ndarrayï¼ˆå®ƒå«æœ‰é«˜ä¸€çº§ç»´åº¦ä¸Šçš„æ‰€æœ‰æ•°æ®ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr3d = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], [[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]]])</span><br><span class="line"><span class="comment"># æ ‡é‡å€¼å’Œæ•°ç»„éƒ½å¯ä»¥è¢«èµ‹å€¼ç»™arr3d[0]ï¼š</span></span><br><span class="line">old_values = arr3d[<span class="number">0</span>].copy()</span><br><span class="line">arr3d[<span class="number">0</span>] = <span class="number">42</span></span><br><span class="line">arr3d[<span class="number">0</span>] = old_values</span><br></pre></td></tr></table></figure>
<h5 id="åˆ‡ç‰‡ç´¢å¼•"><a href="#åˆ‡ç‰‡ç´¢å¼•" class="headerlink" title="åˆ‡ç‰‡ç´¢å¼•"></a>åˆ‡ç‰‡ç´¢å¼•</h5><p>ä¸€ç»´ndarrayçš„åˆ‡ç‰‡è¯­æ³•è·ŸPythonåˆ—è¡¨å·®ä¸å¤šã€‚</p>
<p>äºŒç»´ndarrayçš„åˆ‡ç‰‡æ–¹å¼ç¨æ˜¾ä¸åŒã€‚åˆ‡ç‰‡æ˜¯æ²¿ç€ä¸€ä¸ªè½´å‘é€‰å–å…ƒç´ ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line">arr2d[:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># array([[1, 2, 3],   # ç¬¬ä¸€ä¸ªè½´åˆ‡ç‰‡ï¼Œå–äº†å‰ä¸¤è¡Œ</span></span><br><span class="line"><span class="comment">#       [4, 5, 6]])</span></span><br><span class="line">arr2d[:<span class="number">2</span>, <span class="number">1</span>:]</span><br><span class="line"><span class="comment"># array([[2, 3],   # ç¬¬ä¸€ä¸ªè½´åˆ‡ç‰‡ï¼Œå†ç¬¬äºŒä¸ªè½´åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment">#       [5, 6]])</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åˆ‡ç‰‡åªèƒ½å¾—åˆ°ç›¸åŒç»´æ•°çš„æ•°ç»„è§†å›¾ã€‚é€šè¿‡å°†æ•´æ•°ç´¢å¼•å’Œåˆ‡ç‰‡æ··åˆï¼Œå¯ä»¥å¾—åˆ°ä½ç»´åº¦çš„åˆ‡ç‰‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d[<span class="number">1</span>, :<span class="number">2</span>]  <span class="comment"># array([4, 5])</span></span><br><span class="line">arr2d[:<span class="number">2</span>, <span class="number">2</span>]  <span class="comment"># array([3, 6])</span></span><br></pre></td></tr></table></figure>
<p><strong>â€œåªæœ‰å†’å·â€è¡¨ç¤ºé€‰å–æ•´ä¸ªè½´</strong> </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d[:, :<span class="number">1</span>]</span><br><span class="line"><span class="comment"># array([[1],</span></span><br><span class="line"><span class="comment">#       [4],</span></span><br><span class="line"><span class="comment">#       [7]])</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9da32d2f4629c304.png?imageMogr2/auto-orient/strip|imageView2/2/w/867/format/webp" alt="img"></p>
<p><strong>å¯¹åˆ‡ç‰‡è¡¨è¾¾å¼çš„èµ‹å€¼æ“ä½œä¹Ÿä¼šè¢«æ‰©æ•£åˆ°æ•´ä¸ªé€‰åŒº</strong></p>
<h5 id="å¸ƒå°”å‹ç´¢å¼•"><a href="#å¸ƒå°”å‹ç´¢å¼•" class="headerlink" title="å¸ƒå°”å‹ç´¢å¼•"></a>å¸ƒå°”å‹ç´¢å¼•</h5><p>å¸ƒå°”å‹æ•°ç»„çš„é•¿åº¦å¿…é¡»è·Ÿè¢«ç´¢å¼•çš„è½´é•¿åº¦ä¸€è‡´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</span><br><span class="line">data = np.random.randn(<span class="number">7</span>, <span class="number">4</span>)</span><br><span class="line">data[names == <span class="string">'Bob'</span>]  <span class="comment"># å¯ä»¥é€‰å‡ºå¯¹åå­—"Bob"å¯¹åº”çš„æ‰€æœ‰è¡Œ</span></span><br><span class="line"><span class="comment"># å¸ƒå°”å‹æ•°ç»„å¯ä»¥å’Œåˆ‡ç‰‡ã€æ•´æ•°ï¼ˆæˆ–æ•´æ•°åºåˆ—ï¼‰æ··åˆä½¿ç”¨</span></span><br><span class="line">data[names == <span class="string">'Bob'</span>, <span class="number">2</span>:]  <span class="comment"># array([[ 0.769 ,  1.2464], [-0.5397,  0.477 ]])</span></span><br><span class="line">data[names == <span class="string">'Bob'</span>, <span class="number">3</span>]   <span class="comment"># array([ 1.2464,  0.477 ])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨ä¸ç­‰äºç¬¦å·ï¼ˆ!=ï¼‰ï¼Œæˆ–é€šè¿‡~å¯¹æ¡ä»¶è¿›è¡Œå¦å®š</span></span><br><span class="line">data[~(names == <span class="string">'Bob'</span>)]</span><br><span class="line">data[names != <span class="string">'Bob'</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨&amp;ï¼ˆå’Œï¼‰ã€|ï¼ˆæˆ–ï¼‰ä¹‹ç±»çš„å¸ƒå°”ç®—æœ¯è¿ç®—ç¬¦</span></span><br><span class="line">data[mask = (names == <span class="string">'Bob'</span>) | (names == <span class="string">'Will'</span>)]</span><br><span class="line"><span class="comment"># é€šè¿‡å¸ƒå°”å‹æ•°ç»„è®¾ç½®å€¼ã€‚ä¾‹å¦‚å°†dataä¸­çš„æ‰€æœ‰è´Ÿå€¼éƒ½è®¾ç½®ä¸º0</span></span><br><span class="line">data[data &lt; <span class="number">0</span>] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¸ƒå°”å‹ç´¢å¼•é€‰å–æ•°ç»„ä¸­çš„æ•°æ®ï¼Œæ€»æ˜¯åˆ›å»ºæ•°æ®çš„å‰¯æœ¬ã€‚</li>
<li>Pythonå…³é”®å­—andå’Œoråœ¨å¸ƒå°”å‹æ•°ç»„ä¸­æ— æ•ˆã€‚è¦ä½¿ç”¨&amp;ä¸|ã€‚</li>
<li>è¿™ç±»äºŒç»´æ•°æ®çš„æ“ä½œä¹Ÿå¯ä»¥ç”¨pandas</li>
</ul>
<h5 id="èŠ±å¼ç´¢å¼•"><a href="#èŠ±å¼ç´¢å¼•" class="headerlink" title="èŠ±å¼ç´¢å¼•"></a>èŠ±å¼ç´¢å¼•</h5><p>èŠ±å¼ç´¢å¼•ï¼ˆFancy indexingï¼‰æ˜¯ä¸€ä¸ªNumPyæœ¯è¯­ï¼Œæ˜¯æŒ‡åˆ©ç”¨æ•´æ•°æ•°ç»„è¿›è¡Œç´¢å¼•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.empty((<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>):</span><br><span class="line">     arr[i] = i</span><br><span class="line"><span class="comment"># å¯ä»¥ä¼ å…¥ä¸€ä¸ªç”¨äºæŒ‡å®šé¡ºåºçš„æ•´æ•°åˆ—è¡¨æˆ–ndarrayï¼Œç‰¹å®šé¡ºåºé€‰å–è¡Œå­é›†</span></span><br><span class="line">arr[[<span class="number">4</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="comment"># ä½¿ç”¨è´Ÿæ•°ç´¢å¼•å°†ä¼šä»æœ«å°¾å¼€å§‹é€‰å–è¡Œ</span></span><br><span class="line">arr[[<span class="number">-3</span>, <span class="number">-5</span>, <span class="number">-7</span>]]</span><br></pre></td></tr></table></figure>
<ul>
<li>æ— è®ºæ•°ç»„æ˜¯å¤šå°‘ç»´çš„ï¼ŒèŠ±å¼ç´¢å¼•æ€»æ˜¯ä¸€ç»´çš„</li>
<li>èŠ±å¼ç´¢å¼•æ€»æ˜¯å°†æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€æ¬¡ä¼ å…¥å¤šä¸ªç´¢å¼•æ•°ç»„çš„è¿”å›æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„</span></span><br><span class="line">arr = np.arange(<span class="number">32</span>).reshape((<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]] <span class="comment"># array([ 4, 23, 29, 10])</span></span><br><span class="line"><span class="comment"># è¦æƒ³çš„åˆ°çŸ©é˜µ</span></span><br><span class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>]][:, [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢"><a href="#æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢" class="headerlink" title="æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢"></a>æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢</h4><ul>
<li>è½¬ç½®æ˜¯é‡å¡‘çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œè¿”å›æºæ•°æ®çš„è§†å›¾ï¼ˆä¸ä¼šè¿›è¡Œä»»ä½•å¤åˆ¶æ“ä½œï¼‰ã€‚</li>
</ul>
<p>æ•°ç»„ä¸ä»…æœ‰transposeæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„Tå±æ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">arr.T</span><br><span class="line">arr.transpose()</span><br></pre></td></tr></table></figure>
<p>å¯¹äºé«˜ç»´æ•°ç»„ï¼Œtransposeéœ€è¦å¾—åˆ°ä¸€ä¸ªç”±è½´ç¼–å·ç»„æˆçš„å…ƒç»„æ‰èƒ½å¯¹è¿™äº›è½´è¿›è¡Œè½¬ç½®.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">arr.transpose((<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªè½´è¢«æ¢æˆäº†ç¬¬äºŒä¸ªï¼Œç¬¬äºŒä¸ªè½´è¢«æ¢æˆäº†ç¬¬ä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªè½´ä¸å˜</span></span><br><span class="line">arr.swapaxes(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment"># swapaxesæ–¹æ³•ï¼Œå®ƒéœ€è¦æ¥å—ä¸€å¯¹è½´ç¼–å·</span></span><br></pre></td></tr></table></figure>
<ul>
<li>swapaxesä¹Ÿæ˜¯è¿”å›æºæ•°æ®çš„è§†å›¾ï¼ˆä¸ä¼šè¿›è¡Œä»»ä½•å¤åˆ¶æ“ä½œï¼‰</li>
</ul>
<h3 id="é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°"><a href="#é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°" class="headerlink" title="é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°"></a>é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°</h3><p>é€šç”¨å‡½æ•°ï¼ˆå³ufuncï¼‰æ˜¯ä¸€ç§å¯¹ndarrayä¸­çš„æ•°æ®æ‰§è¡Œå…ƒç´ çº§è¿ç®—çš„å‡½æ•°ã€‚å¯ä»¥çœ‹åšç®€å•å‡½æ•°ï¼ˆæ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡å€¼ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡å€¼ï¼‰çš„<strong>çŸ¢é‡åŒ–åŒ…è£…å™¨</strong>ã€‚</p>
<ul>
<li><p>ä¸€å…ƒï¼ˆunaryï¼‰ufunc,å¦‚sqrtå’Œexp,è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„</p>
</li>
<li><p>äºŒå…ƒï¼ˆbinaryï¼‰ufuncï¼Œå¦‚addæˆ–maximumæ¥å—2ä¸ªæ•°ç»„,å¹¶è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„</p>
</li>
<li><p>æœ‰äº›ufuncå¯ä»¥è¿”å›å¤šä¸ªæ•°ç»„ï¼Œä¾‹å¦‚modï¼ˆPythonå†…ç½®å‡½æ•°divmodçš„çŸ¢é‡åŒ–ç‰ˆæœ¬ï¼‰ï¼Œè¿”å›æµ®ç‚¹æ•°æ•°ç»„çš„å°æ•°å’Œæ•´æ•°éƒ¨åˆ†</p>
</li>
<li><p>Ufuncså¯ä»¥æ¥å—ä¸€ä¸ªoutå¯é€‰å‚æ•°ï¼Œè¿™æ ·å°±èƒ½åœ¨æ•°ç»„åŸåœ°è¿›è¡Œæ“ä½œã€‚</p>
</li>
<li><p>```python<br>arr = array([-3.2623, -6.0915, -6.663 ,  5.3731,  3.6182,  3.45  ,  5.0077])<br>np.sqrt(arr)</p>
<h1 id="array-nan-nan-nan-2-318-1-9022-1-8574-2-2378"><a href="#array-nan-nan-nan-2-318-1-9022-1-8574-2-2378" class="headerlink" title="array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])"></a>array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-1d494e73b61c7ced.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-2be79faf68ab6ff8.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-4e38d02a66481530.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-eff1e61e5464159f.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-236dba83b6a420cc.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">### åˆ©ç”¨æ•°ç»„è¿›è¡Œæ•°æ®å¤„ç†</span><br><span class="line"></span><br><span class="line">ç”¨æ•°ç»„è¡¨è¾¾å¼ä»£æ›¿å¾ªç¯çš„åšæ³•ï¼Œé€šå¸¸è¢«ç§°ä¸º**çŸ¢é‡åŒ–**ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒçŸ¢é‡åŒ–æ•°ç»„è¿ç®—è¦æ¯”ç­‰ä»·çš„çº¯Pythonæ–¹å¼å¿«ä¸Šä¸€ä¸¤ä¸ªæ•°é‡çº§ï¼ˆç”šè‡³æ›´å¤šï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">#### å°†æ¡ä»¶é€»è¾‘è¡¨è¿°ä¸ºæ•°ç»„è¿ç®—</span><br><span class="line"></span><br><span class="line">&#96;numpy.where&#96;å‡½æ•°æ˜¯ä¸‰å…ƒè¡¨è¾¾å¼&#96;x if condition else y&#96;çš„çŸ¢é‡åŒ–ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">xarr &#x3D; np.array([1.1, 1.2, 1.3, 1.4, 1.5])</span><br><span class="line">yarr &#x3D; np.array([2.1, 2.2, 2.3, 2.4, 2.5])</span><br><span class="line">cond &#x3D; np.array([True, False, True, True, False])</span><br><span class="line"># æ ¹æ®condä¸­çš„å€¼é€‰å–xarrå’Œyarrçš„å€¼ï¼šå½“condä¸­çš„å€¼ä¸ºTrueæ—¶ï¼Œé€‰å–xarrçš„å€¼ï¼Œå¦åˆ™ä»yarrä¸­é€‰å–ã€‚</span><br><span class="line"># åˆ—è¡¨æ¨å¯¼å¼çš„å†™æ³•  ç¼ºç‚¹ï¼š1, å¯¹å¤§æ•°ç»„çš„å¤„ç†é€Ÿåº¦ä¸æ˜¯å¾ˆå¿«ã€‚2,æ— æ³•ç”¨äºå¤šç»´æ•°ç»„</span><br><span class="line">result &#x3D; [(x if c else y) for x, y, c in zip(xarr, yarr, cond)]</span><br><span class="line">#</span><br><span class="line">result &#x3D; np.where(cond, xarr, yarr)</span><br><span class="line"># ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯æ ‡é‡å€¼</span><br><span class="line">arr &#x3D; np.random.randn(4, 4)</span><br><span class="line">np.where(arr &gt; 0, 2, -2) # set positive values to 2, negative values to -2.</span><br><span class="line"># å¯ä»¥å°†æ ‡é‡å’Œæ•°ç»„ç»“åˆèµ·æ¥</span><br><span class="line">np.where(arr &gt; 0, 2, arr) # set only positive values to 2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•"><a href="#æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•" class="headerlink" title="æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•"></a>æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•</h4><p>é€šè¿‡æ•°ç»„ä¸Šçš„ä¸€ç»„æ•°å­¦å‡½æ•°å¯¹æ•´ä¸ªæ•°ç»„æˆ–æŸä¸ªè½´å‘çš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—</p>
<p>sumã€mean, æ ‡å‡†å·®stdç­‰èšåˆè®¡ç®—ï¼ˆaggregationï¼Œé€šå¸¸å«åšçº¦ç®€ï¼ˆreductionï¼‰ï¼‰æ—¢å¯ä»¥å½“åšæ•°ç»„çš„å®ä¾‹æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“åšé¡¶çº§NumPyå‡½æ•°ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.random.randn(<span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line">arr.mean()</span><br><span class="line">np.mean(arr)</span><br><span class="line"><span class="comment"># meanå’Œsumè¿™ç±»çš„å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªaxisé€‰é¡¹å‚æ•°ï¼Œç”¨äºè®¡ç®—è¯¥è½´å‘ä¸Šçš„ç»Ÿè®¡å€¼ï¼Œæœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªä½ä¸€ç»´çš„æ•°ç»„</span></span><br><span class="line">arr.mean(axis=<span class="number">1</span>) <span class="comment"># ç®—è¡Œçš„å¹³å‡å€¼</span></span><br><span class="line">arr.sum(axis=<span class="number">0</span>) <span class="comment"># è®¡ç®—æ¯åˆ—çš„å’Œ</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–å¦‚cumsumï¼ˆç´¯åŠ ï¼‰å’Œcumprodï¼ˆç´¯ä¹˜ï¼‰ä¹‹ç±»çš„æ–¹æ³•åˆ™ä¸èšåˆï¼Œè€Œæ˜¯äº§ç”Ÿä¸€ä¸ªç”±ä¸­é—´ç»“æœç»„æˆçš„æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line">arr.cumsum()  <span class="comment"># array([ 0,  1,  3,  6, 10, 15, 21, 28])</span></span><br><span class="line"><span class="comment"># å¤šç»´æ•°ç»„ï¼Œè¿”å›åŒæ ·å¤§å°çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç»´çš„åˆ‡ç‰‡æ²¿ç€æ ‡è®°è½´è®¡ç®—éƒ¨åˆ†èšç±»</span></span><br><span class="line">arr = np.array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line">arr.cumsum(axis=<span class="number">0</span>) <span class="comment"># åˆ—ä¸Šç´¯åŠ </span></span><br><span class="line">arr.cumprod(axis=<span class="number">1</span>) <span class="comment"># è¡Œä¸Šç´¯ä¹˜</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a6c6df3ca8e0b98e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-866fcde885b1d357.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•"><a href="#ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•" class="headerlink" title="ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•"></a>ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•</h4><p>åœ¨ä¸Šé¢è¿™äº›æ–¹æ³•ä¸­ï¼Œå¸ƒå°”å€¼ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸º1ï¼ˆTrueï¼‰å’Œ0ï¼ˆFalseï¼‰</p>
<ul>
<li><p>sumç»å¸¸è¢«ç”¨æ¥å¯¹å¸ƒå°”å‹æ•°ç»„ä¸­çš„Trueå€¼è®¡æ•°ï¼š</p>
</li>
<li><p>```python<br>arr = np.random.randn(100)<br>(arr &gt; 0).sum()</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">+ anyç”¨äºæµ‹è¯•æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªTrue</span><br><span class="line"></span><br><span class="line">+ allåˆ™æ£€æŸ¥æ•°ç»„ä¸­æ‰€æœ‰å€¼æ˜¯å¦éƒ½æ˜¯True</span><br><span class="line"></span><br><span class="line">+ any,all ç”¨äºéå¸ƒå°”å‹æ•°ç»„æ—¶ï¼Œæ‰€æœ‰é0å…ƒç´ å°†ä¼šè¢«å½“åšTrue</span><br><span class="line"></span><br><span class="line">#### æ’åº</span><br><span class="line"></span><br><span class="line">å¤šç»´æ•°ç»„å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªè½´å‘ä¸Šè¿›è¡Œæ’åºï¼Œåªéœ€å°†è½´ç¼–å·ä¼ ç»™sortå³å¯</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">arr &#x3D; np.random.randn(5, 3)</span><br><span class="line">arr.sort(1)  # å®‰è¡Œæ’åºï¼Œåœ°æ’åºåˆ™ä¼šä¿®æ”¹æ•°ç»„æœ¬èº«</span><br><span class="line">np.sum(arr,1) # è¿”å›çš„æ˜¯æ•°ç»„çš„å·²æ’åºå‰¯æœ¬</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘"><a href="#å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘" class="headerlink" title="å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘"></a>å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘</h4><p>NumPyæä¾›äº†ä¸€äº›é’ˆå¯¹ä¸€ç»´ndarrayçš„åŸºæœ¬é›†åˆè¿ç®—ã€‚</p>
<ul>
<li>np.uniqueç”¨äºæ‰¾å‡ºæ•°ç»„ä¸­çš„å”¯ä¸€å€¼å¹¶è¿”å›å·²æ’åºçš„ç»“æœï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</span><br><span class="line">np.unique(names)  <span class="comment"># array(['Bob', 'Joe', 'Will'], dtype='&lt;U4')</span></span><br><span class="line"><span class="comment"># çº¯pythonä»£ç ä¹Ÿå¯ä»¥</span></span><br><span class="line">sorted(set(names)) <span class="comment"># ['Bob', 'Joe', 'Will']</span></span><br></pre></td></tr></table></figure>
<ul>
<li>np.in1dç”¨äºæµ‹è¯•ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­çš„æˆå‘˜èµ„æ ¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">values = np.array([<span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">np.in1d(values, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>]) <span class="comment"># array([ True, False, False,  True,  True, False,  True], dtype=bool)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-80e85ae6b9c89ada.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º"><a href="#ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º" class="headerlink" title="ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º"></a>ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º</h3><p>NumPyçš„å†…ç½®äºŒè¿›åˆ¶æ ¼å¼ï¼Œä½¿ç”¨pandasæˆ–å…¶å®ƒå·¥å…·åŠ è½½æ–‡æœ¬æˆ–è¡¨æ ¼æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿å­˜ï¼Œdefaultï¼šæ•°ç»„ä»¥æœªå‹ç¼©çš„åŸå§‹äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åœ¨æ‰©å±•åä¸º.npyçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœæ–‡ä»¶è·¯å¾„æœ«å°¾æ²¡æœ‰æ‰©å±•å.npyï¼Œåˆ™è¯¥æ‰©å±•åä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line">np.save(<span class="string">'some_array'</span>, arr)</span><br><span class="line"><span class="comment"># è¯»å–</span></span><br><span class="line">np.load(<span class="string">'some_array.npy'</span>)</span><br><span class="line"><span class="comment"># å°†å¤šä¸ªæ•°ç»„ä¿å­˜åˆ°ä¸€ä¸ªæœªå‹ç¼©æ–‡ä»¶ä¸­ï¼Œå°†æ•°ç»„ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¼ å…¥</span></span><br><span class="line">np.savez(<span class="string">'array_archive.npz'</span>, a=arr, b=arr)</span><br><span class="line"><span class="comment"># åŠ è½½.npzæ–‡ä»¶æ—¶ï¼Œå¾—åˆ°ä¸€ä¸ªç±»ä¼¼å­—å…¸çš„å¯¹è±¡</span></span><br><span class="line">arch = np.load(<span class="string">'array_archive.npz'</span>)</span><br><span class="line">arch[<span class="string">'b'</span>] <span class="comment"># array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span></span><br><span class="line"><span class="comment"># æ•°æ®å‹ç¼©</span></span><br><span class="line">np.savez_compressed(<span class="string">'arrays_compressed.npz'</span>, a=arr, b=arr)</span><br></pre></td></tr></table></figure>
<h3 id="çº¿æ€§ä»£æ•°"><a href="#çº¿æ€§ä»£æ•°" class="headerlink" title="çº¿æ€§ä»£æ•°"></a>çº¿æ€§ä»£æ•°</h3><p>çº¿æ€§ä»£æ•°ï¼ˆå¦‚çŸ©é˜µä¹˜æ³•ã€çŸ©é˜µåˆ†è§£ã€è¡Œåˆ—å¼ä»¥åŠå…¶ä»–æ–¹é˜µæ•°å­¦ç­‰ï¼‰æ˜¯ä»»ä½•æ•°ç»„åº“çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>ç‚¹ç§¯np.dot(a,y)æˆ–è€…x.dot(y)ï¼Œ@ç¬¦ç”¨ä½œä¸­ç¼€è¿ç®—ç¬¦ï¼Œè¿›è¡ŒçŸ©é˜µä¹˜æ³•</p>
<p><strong>numpy.linalgæ¨¡å—</strong> ï¼šæ ‡å‡†çš„çŸ©é˜µåˆ†è§£è¿ç®—åŒ…æ‹¬æ±‚é€†å’Œè¡Œåˆ—å¼ä¹‹ç±»ï¼Œä½¿ç”¨è¡Œä¸šæ ‡å‡†çº¿æ€§ä»£æ•°åº“ï¼Œå¦‚BLASã€LAPACKã€Intel MKLï¼ˆMath Kernel Libraryï¼Œå¯èƒ½æœ‰ï¼Œå–å†³äºNumPyç‰ˆæœ¬ï¼‰ç­‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-dcdb66e49e5f70ea.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ä¼ªéšæœºæ•°ç”Ÿæˆ"><a href="#ä¼ªéšæœºæ•°ç”Ÿæˆ" class="headerlink" title="ä¼ªéšæœºæ•°ç”Ÿæˆ"></a>ä¼ªéšæœºæ•°ç”Ÿæˆ</h3><p><strong>numpy.randomæ¨¡å—</strong>:å¯¹Pythonå†…ç½®çš„randomè¿›è¡Œäº†è¡¥å……ï¼Œå¢åŠ äº†ä¸€äº›ç”¨äºé«˜æ•ˆç”Ÿæˆå¤šç§æ¦‚ç‡åˆ†å¸ƒçš„æ ·æœ¬å€¼çš„å‡½æ•°</p>
<p>éƒ½æ˜¯é€šè¿‡ç®—æ³•åŸºäºéšæœºæ•°ç”Ÿæˆå™¨ç§å­ï¼Œåœ¨ç¡®å®šæ€§çš„æ¡ä»¶ä¸‹ç”Ÿæˆçš„ä¼ªéšæœºæ•°ã€‚å¯ä»¥ç”¨NumPyçš„np.random.seedæ›´æ”¹éšæœºæ•°ç”Ÿæˆç§å­</p>
<p>numpy.randomçš„æ•°æ®ç”Ÿæˆå‡½æ•°ä½¿ç”¨å…¨å±€éšæœºç§å­ã€‚ä½¿ç”¨numpy.random.RandomState åˆ›å»ºä¸€ä¸ªä¸å…¶å®ƒéš”ç¦»çš„éšæœºæ•°ç”Ÿæˆå™¨,é¿å…å…¨å±€çŠ¶æ€</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-97ba09c96dab93a2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-6ed04fae3d1178e2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥"><a href="#ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥" class="headerlink" title="ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥"></a>ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥</h3><p>ç®€å•çš„éšæœºæ¼«æ­¥çš„ä¾‹å­ï¼šä»0å¼€å§‹ï¼Œæ­¥é•¿1å’Œï¼1å‡ºç°çš„æ¦‚ç‡ç›¸ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">position = <span class="number">0</span></span><br><span class="line">walk = [position]</span><br><span class="line">steps = <span class="number">1000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(steps):</span><br><span class="line">    step = <span class="number">1</span> <span class="keyword">if</span> random.randint(<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">    position += step</span><br><span class="line">    walk.append(position)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨ä¸€ä¸ªæ•°ç»„è¿ç®—æ¥å®ç°</span></span><br><span class="line">nsteps = <span class="number">1000</span></span><br><span class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=nsteps)</span><br><span class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">walk = steps.cumsum()</span><br><span class="line">walk.min()</span><br><span class="line">walk.max()</span><br></pre></td></tr></table></figure>
<p>ç»Ÿè®¡é¦–æ¬¡ç©¿è¶Šæ—¶é—´ï¼Œå³éšæœºæ¼«æ­¥è¿‡ç¨‹ä¸­ç¬¬ä¸€æ¬¡åˆ°è¾¾æŸä¸ªç‰¹å®šå€¼çš„æ—¶é—´ã€‚å‡è®¾æƒ³è¦çŸ¥é“æœ¬æ¬¡éšæœºæ¼«æ­¥éœ€è¦å¤šä¹…æ‰èƒ½è·ç¦»åˆå§‹0ç‚¹è‡³å°‘10æ­¥è¿œï¼ˆä»»ä¸€æ–¹å‘å‡å¯ï¼‰ã€‚</p>
<p>np.abs(walk)&gt;=10å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯è·ç¦»æ˜¯å¦è¾¾åˆ°æˆ–è¶…è¿‡10ï¼Œè€Œæˆ‘ä»¬æƒ³è¦çŸ¥é“çš„æ˜¯ç¬¬ä¸€ä¸ª10æˆ–ï¼10çš„ç´¢å¼•ã€‚</p>
<p>å¯ä»¥ç”¨argmaxæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒè¿”å›çš„æ˜¯è¯¥å¸ƒå°”å‹æ•°ç»„ç¬¬ä¸€ä¸ªæœ€å¤§å€¼çš„ç´¢å¼•ï¼ˆTrueå°±æ˜¯æœ€å¤§å€¼ï¼‰ï¼š<code>(np.abs(walk) &gt;= 10).argmax()</code></p>
<ul>
<li>æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨argmaxå¹¶ä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œå› ä¸ºå®ƒæ— è®ºå¦‚ä½•éƒ½ä¼šå¯¹æ•°ç»„è¿›è¡Œå®Œå…¨æ‰«æã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œåªè¦å‘ç°äº†ä¸€ä¸ªTrueï¼Œé‚£æˆ‘ä»¬å°±çŸ¥é“å®ƒæ˜¯ä¸ªæœ€å¤§å€¼äº†ã€‚</li>
</ul>
<h4 id="ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥"><a href="#ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥" class="headerlink" title="ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥"></a>ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ‹Ÿ5000ä¸ªéšæœºæ¼«æ­¥è¿‡ç¨‹</span></span><br><span class="line">nwalks = <span class="number">5000</span></span><br><span class="line">nsteps = <span class="number">1000</span></span><br><span class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=(nwalks, nsteps)) <span class="comment"># 0 or 1</span></span><br><span class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">walks = steps.cumsum(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—30æˆ–ï¼30çš„æœ€å°ç©¿è¶Šæ—¶é—´</span></span><br><span class="line">hits30 = (np.abs(walks) &gt;= <span class="number">30</span>).any(<span class="number">1</span>)  <span class="comment"># æŒ‰ç…§è¡Œæ¥æŸ¥è¯¢ï¼Œä¸€è¡Œä¸­åªè¦æœ‰ä¸€ä¸ªtrueï¼Œåˆ™ä¸ºtrue</span></span><br><span class="line">hits30.sum()  <span class="comment"># 5000ä¸ªéšæœºè¿‡ç¨‹ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªè¾¾åˆ°30ï¼Œsumå¸ƒå°”å€¼æ—¶ï¼ŒTrueä¸º1</span></span><br><span class="line">crossing_times = (np.abs(walks[hits30]) &gt;= <span class="number">30</span>).argmax(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬5ç« -pandaså…¥é—¨"><a href="#ç¬¬5ç« -pandaså…¥é—¨" class="headerlink" title="ç¬¬5ç«  pandaså…¥é—¨"></a>ç¬¬5ç«  pandaså…¥é—¨</h2><p>pandasæ˜¯ä¸“é—¨ä¸ºå¤„ç†è¡¨æ ¼å’Œæ··æ‚æ•°æ®è®¾è®¡çš„ï¼Œè€ŒNumPyæ›´é€‚åˆå¤„ç†ç»Ÿä¸€çš„æ•°å€¼æ•°ç»„æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</span><br></pre></td></tr></table></figure>
<h3 id="pandasçš„æ•°æ®ç»“æ„ä»‹ç»"><a href="#pandasçš„æ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="pandasçš„æ•°æ®ç»“æ„ä»‹ç»"></a>pandasçš„æ•°æ®ç»“æ„ä»‹ç»</h3><h4 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h4><p>ä¸€ç§ç±»ä¼¼äºä¸€ç»´æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒç”±ä¸€ç»„æ•°æ®ï¼ˆå„ç§NumPyæ•°æ®ç±»å‹ï¼‰ä»¥åŠä¸€ç»„ä¸ä¹‹ç›¸å…³çš„æ•°æ®æ ‡ç­¾ï¼ˆå³ç´¢å¼•ï¼‰ç»„æˆ</p>
<p>å¯ä»¥å°†Seriesçœ‹æˆæ˜¯ä¸€ä¸ªå®šé•¿çš„æœ‰åºå­—å…¸ï¼Œå› ä¸ºå®ƒæ˜¯ç´¢å¼•å€¼åˆ°æ•°æ®å€¼çš„ä¸€ä¸ªæ˜ å°„ã€‚å®ƒå¯ä»¥ç”¨åœ¨è®¸å¤šåŸæœ¬éœ€è¦å­—å…¸å‚æ•°çš„å‡½æ•°ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡Series çš„valueså’Œindexå±æ€§è·å–å…¶æ•°ç»„è¡¨ç¤ºå½¢å¼å’Œç´¢å¼•å¯¹è±¡</span></span><br><span class="line">obj.values <span class="comment"># array([ 4,  7, -5,  3])</span></span><br><span class="line">obj.index  <span class="comment"># like range(4)  RangeIndex(start=0, stop=4, step=1)</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">obj2 = pd.Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>], index=[<span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># ç›´æ¥é€šè¿‡è¿™ä¸ªå­—å…¸æ¥åˆ›å»ºSeries</span></span><br><span class="line">sdata = &#123;<span class="string">'Ohio'</span>: <span class="number">35000</span>, <span class="string">'Texas'</span>: <span class="number">71000</span>, <span class="string">'Oregon'</span>: <span class="number">16000</span>, <span class="string">'Utah'</span>: <span class="number">5000</span>&#125;</span><br><span class="line">obj3 = pd.Series(sdata)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">states = [<span class="string">'California'</span>, <span class="string">'Ohio'</span>, <span class="string">'Oregon'</span>, <span class="string">'Texas'</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line"><span class="comment"># sdataä¸­è·Ÿstatesç´¢å¼•ç›¸åŒ¹é…çš„é‚£3ä¸ªå€¼ä¼šè¢«æ‰¾å‡ºæ¥å¹¶æ”¾åˆ°ç›¸åº”çš„ä½ç½®ä¸Šï¼Œä½†ç”±äº"California"æ‰€å¯¹åº”çš„sdataå€¼æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å…¶ç»“æœå°±ä¸ºNaNï¼ˆå³â€œéæ•°å­—â€ï¼ˆnot a numberï¼‰ï¼Œåœ¨pandasä¸­ï¼Œå®ƒç”¨äºè¡¨ç¤ºç¼ºå¤±æˆ–NAå€¼ï¼‰ã€‚å› ä¸ºâ€˜Utahâ€™ä¸åœ¨statesä¸­ï¼Œå®ƒè¢«ä»ç»“æœä¸­é™¤å»ã€‚</span></span><br><span class="line">pd.isnull(obj4)  <span class="comment"># pandasçš„isnullå’Œnotnullå‡½æ•°å¯ç”¨äºæ£€æµ‹ç¼ºå¤±æ•°æ®</span></span><br><span class="line">pd.notnull(obj4)</span><br><span class="line">obj4.isnull()   <span class="comment"># Seriesä¹Ÿæœ‰ç±»ä¼¼çš„å®ä¾‹æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<p>Seriesæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼Œå®ƒä¼šæ ¹æ®è¿ç®—çš„ç´¢å¼•æ ‡ç­¾è‡ªåŠ¨å¯¹é½æ•°æ®ï¼Œç±»ä¼¼æ•°æ®åº“çš„joinçš„æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">37</span>]: obj3 + obj4</span><br><span class="line">Out[<span class="number">37</span>]: </span><br><span class="line">California         NaN</span><br><span class="line">Ohio           <span class="number">70000.0</span></span><br><span class="line">Oregon         <span class="number">32000.0</span></span><br><span class="line">Texas         <span class="number">142000.0</span></span><br><span class="line">Utah               NaN</span><br><span class="line"><span class="comment"># Serieså¯¹è±¡æœ¬èº«åŠå…¶ç´¢å¼•éƒ½æœ‰ä¸€ä¸ªnameå±æ€§</span></span><br><span class="line">obj4.name = <span class="string">'population'</span></span><br><span class="line">obj4.index.name = <span class="string">'state'</span></span><br></pre></td></tr></table></figure>
<h4 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h4><p>ä¸€ä¸ª<strong>è¡¨æ ¼å‹çš„æ•°æ®ç»“æ„</strong>ï¼Œå«æœ‰ä¸€ç»„æœ‰åºçš„åˆ—ï¼Œæ¯åˆ—å¯ä»¥æ˜¯ä¸åŒçš„å€¼ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰ã€‚DataFrameæ—¢æœ‰è¡Œç´¢å¼•ä¹Ÿæœ‰åˆ—ç´¢å¼•ï¼Œå¯ä»¥çœ‹åšç”±Seriesç»„æˆçš„å­—å…¸ï¼ˆå…±ç”¨åŒä¸€ä¸ªç´¢å¼•ï¼‰ã€‚DataFrameä¸­çš„æ•°æ®æ˜¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªäºŒç»´å—å­˜æ”¾çš„ï¼ˆè€Œä¸æ˜¯åˆ—è¡¨ã€å­—å…¸æˆ–åˆ«çš„ä¸€ç»´æ•°æ®ç»“æ„ï¼‰ã€‚</p>
<p>pandasä¸­è®¸å¤šé«˜çº§æ•°æ®å¤„ç†åŠŸèƒ½çš„å…³é”®è¦ç´ ï¼Œ<strong>å±‚æ¬¡åŒ–ç´¢å¼•çš„è¡¨æ ¼å‹ç»“æ„</strong>  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">data = &#123;<span class="string">'state'</span>: [<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],</span><br><span class="line">        <span class="string">'year'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">'pop'</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame = pd.DataFrame(data)</span><br><span class="line"><span class="comment"># æŒ‰ç…§æŒ‡å®šé¡ºåºè¿›è¡Œæ’åˆ—</span></span><br><span class="line">pd.DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>]) </span><br><span class="line"><span class="comment"># ä¼ å…¥çš„åˆ—åœ¨æ•°æ®ä¸­æ‰¾ä¸åˆ°ï¼Œå°±ä¼šåœ¨ç»“æœä¸­äº§ç”Ÿç¼ºå¤±å€¼</span></span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>, <span class="string">'debt'</span>],index=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>,<span class="string">'five'</span>, <span class="string">'six'</span>])</span><br><span class="line"><span class="comment"># é€šè¿‡ç±»ä¼¼å­—å…¸æ ‡è®°çš„æ–¹å¼æˆ–å±æ€§çš„æ–¹å¼ï¼Œå¯ä»¥å°†DataFrameçš„åˆ—è·å–ä¸ºä¸€ä¸ªSeries</span></span><br><span class="line">frame2[<span class="string">'state'</span>]</span><br><span class="line">frame2.year</span><br><span class="line"><span class="comment"># è¡Œä¹Ÿå¯ä»¥é€šè¿‡ä½ç½®æˆ–åç§°çš„æ–¹å¼è¿›è¡Œè·å–ï¼Œæ¯”å¦‚ç”¨locå±æ€§</span></span><br><span class="line">frame2.loc[<span class="string">'three'</span>]</span><br><span class="line"><span class="comment"># åˆ—å¯ä»¥é€šè¿‡èµ‹å€¼çš„æ–¹å¼è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">frame2[<span class="string">'debt'</span>] = <span class="number">16.5</span></span><br><span class="line">frame2[<span class="string">'debt'</span>] = np.arange(<span class="number">6.</span>)</span><br><span class="line">val = pd.Series([<span class="number">-1.2</span>, <span class="number">-1.5</span>, <span class="number">-1.7</span>], index=[<span class="string">'two'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</span><br><span class="line">frame2[<span class="string">'debt'</span>] = val</span><br><span class="line"><span class="comment"># æ ¹æ®stateæ˜¯å¦ä¸º'Ohio'ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å¸ƒå°”å€¼çš„åˆ—</span></span><br><span class="line">frame2[<span class="string">'eastern'</span>] = frame2.state == <span class="string">'Ohio'</span></span><br><span class="line"><span class="comment"># å…³é”®å­—delç”¨äºåˆ é™¤åˆ—</span></span><br><span class="line"><span class="keyword">del</span> frame2[<span class="string">'eastern'</span>] </span><br><span class="line"><span class="comment"># æ–¹æ³•</span></span><br><span class="line">frame.head() <span class="comment"># å‰äº”è¡Œ</span></span><br></pre></td></tr></table></figure>
<ul>
<li>frame2[column]é€‚ç”¨äºä»»ä½•åˆ—çš„åï¼Œä½†æ˜¯frame2.columnåªæœ‰åœ¨åˆ—åæ˜¯ä¸€ä¸ªåˆç†çš„Pythonå˜é‡åæ—¶æ‰é€‚ç”¨ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åµŒå¥—å­—å…¸</span></span><br><span class="line">pop = &#123;<span class="string">'Nevada'</span>: &#123;<span class="number">2001</span>: <span class="number">2.4</span>, <span class="number">2002</span>: <span class="number">2.9</span>&#125;,<span class="string">'Ohio'</span>: &#123;<span class="number">2000</span>: <span class="number">1.5</span>, <span class="number">2001</span>: <span class="number">1.7</span>, <span class="number">2002</span>: <span class="number">3.6</span>&#125;&#125;</span><br><span class="line">frame3 = pd.DataFrame(pop)</span><br><span class="line"><span class="comment"># å¯¹DataFrameè¿›è¡Œè½¬ç½®ï¼ˆäº¤æ¢è¡Œå’Œåˆ—ï¼‰</span></span><br><span class="line">frame3.T</span><br><span class="line"><span class="comment"># ç”±Seriesç»„æˆçš„å­—å…¸</span></span><br><span class="line">pdata = &#123;<span class="string">'Ohio'</span>: frame3[<span class="string">'Ohio'</span>][:<span class="number">-1</span>],<span class="string">'Nevada'</span>: frame3[<span class="string">'Nevada'</span>][:<span class="number">2</span>]&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-106835b28c0cea5a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1075/format/webp" alt="img"></p>
<p>å¦‚æœè®¾ç½®äº†DataFrameçš„indexå’Œcolumnsçš„nameå±æ€§ï¼Œåˆ™è¿™äº›ä¿¡æ¯ä¹Ÿä¼šè¢«æ˜¾ç¤ºå‡ºæ¥:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame3.index.name = <span class="string">'year'</span>; frame3.columns.name = <span class="string">'state'</span></span><br></pre></td></tr></table></figure>
<h4 id="ç´¢å¼•å¯¹è±¡"><a href="#ç´¢å¼•å¯¹è±¡" class="headerlink" title="ç´¢å¼•å¯¹è±¡"></a>ç´¢å¼•å¯¹è±¡</h4><h4 id="é‡æ–°ç´¢å¼•"><a href="#é‡æ–°ç´¢å¼•" class="headerlink" title="é‡æ–°ç´¢å¼•"></a>é‡æ–°ç´¢å¼•</h4><p>åœ¨å¯¹Seriesæˆ–DataFrameé‡æ–°ç´¢å¼•æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå¡«å……å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1.reindex(columns=df2.columns, fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹"><a href="#ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹" class="headerlink" title="ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹"></a>ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤åˆ é™¤è¡Œï¼ˆindexï¼‰</span></span><br><span class="line">data.drop([<span class="string">'Colorado'</span>, <span class="string">'Ohio'</span>])</span><br><span class="line"><span class="comment"># é€šè¿‡ä¼ é€’axis=1æˆ–axis='columns'å¯ä»¥åˆ é™¤åˆ—çš„å€¼</span></span><br><span class="line">data.drop(<span class="string">'two'</span>, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å°±åœ°ä¿®æ”¹å¯¹è±¡ï¼Œä¸ä¼šè¿”å›æ–°çš„å¯¹è±¡</span></span><br><span class="line">obj.drop(<span class="string">'c'</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤"><a href="#ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤" class="headerlink" title="ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤"></a>ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤</h4><p>Seriesï¼šåˆ©ç”¨æ ‡ç­¾çš„åˆ‡ç‰‡è¿ç®—ä¸æ™®é€šçš„Pythonåˆ‡ç‰‡è¿ç®—ä¸åŒï¼Œå…¶æœ«ç«¯æ˜¯åŒ…å«çš„ã€‚</p>
<p>DataFrameï¼šé»˜è®¤åˆ—æ ‡ç­¾çš„ç´¢å¼•</p>
<h4 id="ç”¨locå’Œilocè¿›è¡Œé€‰å–"><a href="#ç”¨locå’Œilocè¿›è¡Œé€‰å–" class="headerlink" title="ç”¨locå’Œilocè¿›è¡Œé€‰å–"></a>ç”¨locå’Œilocè¿›è¡Œé€‰å–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…ˆè¡Œååˆ—</span></span><br><span class="line">data.loc[<span class="string">'Colorado'</span>, [<span class="string">'two'</span>, <span class="string">'three'</span>]] <span class="comment">#è¡Œæ˜¯å¿…é¡»çš„</span></span><br><span class="line">data.iloc[<span class="number">2</span>, [<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="comment"># åˆ‡ç‰‡</span></span><br><span class="line">data.loc[:<span class="string">'Utah'</span>, <span class="string">'two'</span>]</span><br><span class="line">data.iloc[:, :<span class="number">3</span>][data.three &gt; <span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-64354f2ab777bd8c.png?imageMogr2/auto-orient/strip|imageView2/2/w/929/format/webp" alt="img"></p>
<h4 id="æ•´æ•°ç´¢å¼•"><a href="#æ•´æ•°ç´¢å¼•" class="headerlink" title="æ•´æ•°ç´¢å¼•"></a>æ•´æ•°ç´¢å¼•</h4><p>locå’Œiloc</p>
<h4 id="ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½"><a href="#ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½" class="headerlink" title="ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½"></a>ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½</h4><p>pandasæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼Œå®ƒå¯ä»¥å¯¹ä¸åŒç´¢å¼•çš„å¯¹è±¡è¿›è¡Œç®—æœ¯è¿ç®—ã€‚åœ¨å°†å¯¹è±¡ç›¸åŠ æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¸åŒçš„ç´¢å¼•å¯¹ï¼Œåˆ™ç»“æœçš„ç´¢å¼•å°±æ˜¯è¯¥ç´¢å¼•å¯¹çš„å¹¶é›†ã€‚</p>
<p>è‡ªåŠ¨çš„æ•°æ®å¯¹é½æ“ä½œåœ¨ä¸é‡å çš„ç´¢å¼•å¤„å¼•å…¥äº†NAå€¼ã€‚ç¼ºå¤±å€¼ä¼šåœ¨ç®—æœ¯è¿ç®—è¿‡ç¨‹ä¸­ä¼ æ’­</p>
<h4 id="åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼"><a href="#åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼" class="headerlink" title="åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼"></a>åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼</h4><p>ä¸¤ä¸ªDataFrameç›¸åŠ æ—¶ï¼Œæ²¡æœ‰é‡å çš„ä½ç½®å°±ä¼šäº§ç”ŸNAå€¼ï¼Œå¯ä»¥ä½¿ç”¨addæ–¹æ³•å¡«å……ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆæ¯”å¦‚0ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1.add(df2, fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-16857a1021f98d1f.png?imageMogr2/auto-orient/strip|imageView2/2/w/388/format/webp" alt="img"></p>
<ul>
<li>ä»¥å­—æ¯rå¼€å¤´ï¼Œå®ƒä¼šç¿»è½¬å‚æ•°ã€‚</li>
</ul>
<h4 id="DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—"><a href="#DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—" class="headerlink" title="DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—"></a>DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—</h4><p>å¹¿æ’­ï¼ˆbroadcastingï¼‰</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDataFrameå’ŒSeriesä¹‹é—´çš„ç®—æœ¯è¿ç®—ä¼šå°†Seriesçš„ç´¢å¼•åŒ¹é…åˆ°DataFrameçš„åˆ—ï¼Œç„¶åæ²¿ç€è¡Œä¸€ç›´å‘ä¸‹å¹¿æ’­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),columns=list(<span class="string">'bde'</span>),index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</span><br><span class="line">series = frame.iloc[<span class="number">0</span>]</span><br><span class="line">frame - series</span><br><span class="line"><span class="string">""" output</span></span><br><span class="line"><span class="string">          b    d    e</span></span><br><span class="line"><span class="string">Utah    0.0  0.0  0.0</span></span><br><span class="line"><span class="string">Ohio    3.0  3.0  3.0</span></span><br><span class="line"><span class="string">Texas   6.0  6.0  6.0</span></span><br><span class="line"><span class="string">Oregon  9.0  9.0  9.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæŸä¸ªç´¢å¼•å€¼åœ¨DataFrameçš„åˆ—æˆ–Seriesçš„ç´¢å¼•ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™å‚ä¸è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡å°±ä¼šè¢«é‡æ–°ç´¢å¼•ä»¥å½¢æˆå¹¶é›†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">series2 = pd.Series(range(<span class="number">3</span>), index=[<span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>])</span><br><span class="line">frame + series2</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">          b   d     e   f</span></span><br><span class="line"><span class="string">Utah    0.0 NaN   3.0 NaN</span></span><br><span class="line"><span class="string">Ohio    3.0 NaN   6.0 NaN</span></span><br><span class="line"><span class="string">Texas   6.0 NaN   9.0 NaN</span></span><br><span class="line"><span class="string">Oregon  9.0 NaN  12.0 NaN</span></span><br><span class="line"><span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ç®—æœ¯è¿ç®—æ–¹æ³•åŒ¹é…è¡Œä¸”åœ¨åˆ—ä¸Šå¹¿æ’­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame.sub(series3, axis=<span class="string">'index'</span>) <span class="comment"># æˆ–è€… axis=0</span></span><br></pre></td></tr></table></figure>
<h4 id="å‡½æ•°åº”ç”¨å’Œæ˜ å°„"><a href="#å‡½æ•°åº”ç”¨å’Œæ˜ å°„" class="headerlink" title="å‡½æ•°åº”ç”¨å’Œæ˜ å°„"></a>å‡½æ•°åº”ç”¨å’Œæ˜ å°„</h4><p>DataFrameçš„applyæ–¹æ³•å¯ä»¥å°†å‡½æ•°åº”ç”¨åˆ°ç”±å„åˆ—æˆ–è¡Œæ‰€å½¢æˆçš„ä¸€ç»´æ•°ç»„ä¸Šã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), columns=list(<span class="string">'bde'</span>),index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</span><br><span class="line">f = <span class="keyword">lambda</span> x: x.max() - x.min()</span><br><span class="line">frame.apply(f) <span class="comment"># æ¯åˆ—</span></span><br><span class="line">frame.apply(f, axis=<span class="string">'columns'</span>) <span class="comment"># æ¯è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> pd.Series([x.min(), x.max()], index=[<span class="string">'min'</span>, <span class="string">'max'</span>])</span><br><span class="line">frame.apply(f)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            b         d         e</span></span><br><span class="line"><span class="string">min -0.555730  0.281746 -1.296221</span></span><br><span class="line"><span class="string">max  1.246435  1.965781  1.393406</span></span><br><span class="line"><span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>DataFrameçš„applymapæ–¹æ³•å¯ä»¥ä½¿ç”¨å…ƒç´ çº§çš„Pythonå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">format = <span class="keyword">lambda</span> x: <span class="string">'%.2f'</span> % x</span><br><span class="line">frame.applymap(format)</span><br></pre></td></tr></table></figure>
<p>Seriesæœ‰ä¸€ä¸ªç”¨äºåº”ç”¨å…ƒç´ çº§å‡½æ•°çš„mapæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame[<span class="string">'e'</span>].map(format)</span><br></pre></td></tr></table></figure>
<h4 id="æ’åºå’Œæ’å"><a href="#æ’åºå’Œæ’å" class="headerlink" title="æ’åºå’Œæ’å"></a>æ’åºå’Œæ’å</h4><p>DataFrameå’ŒSeriesä¸­çš„sort_indexæ–¹æ³•å¯¹è¡Œæˆ–åˆ—ç´¢å¼•è¿›è¡Œæ’åºï¼ˆæŒ‰å­—å…¸é¡ºåºï¼Œé»˜è®¤å‡åºï¼‰ï¼Œè¿”å›ä¸€ä¸ªå·²æ’åºçš„æ–°å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series(range(<span class="number">4</span>), index=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">obj.sort_index()</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">8</span>).reshape((<span class="number">2</span>, <span class="number">4</span>)),index=[<span class="string">'three'</span>, <span class="string">'one'</span>], columns=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">frame.sort_index()  <span class="comment"># index</span></span><br><span class="line">frame.sort_index(axis=<span class="number">1</span>, ascending=<span class="literal">False</span>) <span class="comment"># columns</span></span><br></pre></td></tr></table></figure>
<p>è‹¥è¦æŒ‰å€¼å¯¹Seriesè¿›è¡Œæ’åºï¼Œå¯ä½¿ç”¨å…¶sort_valuesæ–¹æ³•,ä»»ä½•ç¼ºå¤±å€¼é»˜è®¤éƒ½ä¼šè¢«æ”¾åˆ°Seriesçš„æœ«å°¾ã€‚</p>
<p>DataFrameæ’åºæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ä¸­çš„å€¼è¿›è¡Œæ’åºã€‚å°†ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„åå­—ä¼ é€’ç»™sort_valuesçš„byé€‰é¡¹å³å¯è¾¾åˆ°è¯¥ç›®çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]&#125;)</span><br><span class="line">frame.sort_values(by=<span class="string">'b'</span>)</span><br><span class="line">frame.sort_values(by=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br></pre></td></tr></table></figure>
<p><strong>Serieså’ŒDataFrameçš„rankæ–¹æ³•</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œrankæ˜¯é€šè¿‡â€œä¸ºå„ç»„åˆ†é…ä¸€ä¸ªå¹³å‡æ’åâ€çš„æ–¹å¼ç ´åå¹³çº§å…³ç³»çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">7</span>, <span class="number">-5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>])</span><br><span class="line">obj.rank() <span class="comment"># æ’åå¹¶åˆ—ä¼šå¹³å‡</span></span><br><span class="line">obj.rank(method=<span class="string">'first'</span>) <span class="comment"># æ’åå¹¶åˆ—ä¼šé€‰æ‹©å°çš„æ•°å€¼</span></span><br><span class="line">obj.rank(ascending=<span class="literal">False</span>, method=<span class="string">'max'</span>) <span class="comment"># æ’åå¹¶åˆ—é€‰æ‹©å¤§çš„æ•°å€¼</span></span><br><span class="line"></span><br><span class="line">frame = pd.DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4.3</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], <span class="string">'c'</span>: [<span class="number">-2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">-2.5</span>]&#125;) </span><br><span class="line">frame.rank(axis=<span class="string">'columns'</span>) <span class="comment"># å³axis=1ï¼Œ é»˜è®¤axis=0</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-7edfab5b4a147581.png?imageMogr2/auto-orient/strip|imageView2/2/w/653/format/webp" alt="img"></p>
<h4 id="å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•"><a href="#å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•" class="headerlink" title="å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•"></a>å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•</h4><p>pandaså‡½æ•°ï¼ˆå¦‚reindexï¼‰éƒ½è¦æ±‚æ ‡ç­¾å”¯ä¸€ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series(range(<span class="number">5</span>), index=[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># æ£€æŸ¥æ ‡ç­¾æ˜¯å¦å”¯ä¸€</span></span><br><span class="line">obj.index.is_unique</span><br><span class="line"><span class="comment"># å¦‚æœæŸä¸ªç´¢å¼•å¯¹åº”å¤šä¸ªå€¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªSeries</span></span><br><span class="line"><span class="comment"># å¯¹DataFrameçš„è¡Œè¿›è¡Œç´¢å¼•æ—¶ï¼Œè¿”å›DataFrame</span></span><br></pre></td></tr></table></figure>
<h3 id="æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡"><a href="#æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡" class="headerlink" title="æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡"></a>æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡</h3><p><img src="https://upload-images.jianshu.io/upload_images/7178691-af35e3809278410e.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>æœ‰äº›æ–¹æ³•ï¼ˆå¦‚idxminå’Œidxmaxï¼‰è¿”å›çš„æ˜¯é—´æ¥ç»Ÿè®¡ï¼ˆæ¯”å¦‚è¾¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼çš„ç´¢å¼•ï¼‰ï¼Œå¦ä¸€äº›æ–¹æ³•åˆ™æ˜¯ç´¯è®¡å‹çš„ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-11fa967f658ac314.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ç›¸å…³ç³»æ•°ä¸åæ–¹å·®"><a href="#ç›¸å…³ç³»æ•°ä¸åæ–¹å·®" class="headerlink" title="ç›¸å…³ç³»æ•°ä¸åæ–¹å·®"></a>ç›¸å…³ç³»æ•°ä¸åæ–¹å·®</h4><h4 id="å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼"><a href="#å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼" class="headerlink" title="å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼"></a>å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>])</span><br><span class="line">uniques = obj.unique()</span><br><span class="line">obj.value_counts()</span><br><span class="line"><span class="comment"># isinç”¨äºåˆ¤æ–­çŸ¢é‡åŒ–é›†åˆçš„æˆå‘˜èµ„æ ¼</span></span><br><span class="line">mask = obj.isin([<span class="string">'b'</span>, <span class="string">'c'</span>])</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b53c4a9d65a2db32.png?imageMogr2/auto-orient/strip|imageView2/2/w/848/format/webp" alt="img"></p>
<h2 id="ç¬¬6ç« -æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼"><a href="#ç¬¬6ç« -æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼" class="headerlink" title="ç¬¬6ç«  æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼"></a>ç¬¬6ç«  æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼</h2><h3 id="è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®"><a href="#è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®" class="headerlink" title="è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®"></a>è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®</h3><p><img src="https://upload-images.jianshu.io/upload_images/7178691-958f849e6067b19b.png?imageMogr2/auto-orient/strip|imageView2/2/w/778/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.read_csv(<span class="string">'examples/ex1.csv'</span>)</span><br><span class="line">pd.read_table(<span class="string">'examples/ex1.csv'</span>, sep=<span class="string">','</span>)</span><br><span class="line"><span class="comment"># å¦‚æœæ–‡ä»¶æ²¡æœ‰æ ‡é¢˜è¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, header=<span class="literal">None</span>)</span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, names=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'message'</span>])</span><br><span class="line"><span class="comment"># å°†æŸåˆ—è®¾ç½®ä¸ºç´¢å¼•</span></span><br><span class="line">names = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'message'</span>]</span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, names=names, index_col=<span class="string">'message'</span>)</span><br><span class="line"><span class="comment"># å±‚æ¬¡åŒ–ç´¢å¼•</span></span><br><span class="line">parsed = pd.read_csv(<span class="string">'examples/csv_mindex.csv'</span>, index_col=[<span class="string">'key1'</span>, <span class="string">'key2'</span>])</span><br><span class="line"><span class="comment"># æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºåˆ†éš”</span></span><br><span class="line">result = pd.read_table(<span class="string">'examples/ex3.txt'</span>, sep=<span class="string">'\s+'</span>)</span><br><span class="line"><span class="comment"># ç”¨skiprowsè·³è¿‡æ–‡ä»¶çš„æŒ‡å®šè¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex4.csv'</span>, skiprows=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>ç¼ºå¤±å€¼å¤„ç†æ˜¯æ–‡ä»¶è§£æä»»åŠ¡ä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç¼ºå¤±æ•°æ®ç»å¸¸æ˜¯è¦ä¹ˆæ²¡æœ‰ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œè¦ä¹ˆç”¨æŸä¸ªæ ‡è®°å€¼è¡¨ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œpandasä¼šç”¨ä¸€ç»„ç»å¸¸å‡ºç°çš„æ ‡è®°å€¼è¿›è¡Œè¯†åˆ«ï¼Œæ¯”å¦‚NAåŠNULLï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># na_valueså¯ä»¥ç”¨ä¸€ä¸ªåˆ—è¡¨æˆ–é›†åˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºç¼ºå¤±å€¼</span></span><br><span class="line">result = pd.read_csv(<span class="string">'examples/ex5.csv'</span>, na_values=[<span class="string">'NULL'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: !cat examples/ex5.csv</span><br><span class="line">something,a,b,c,d,message</span><br><span class="line">one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,NA</span><br><span class="line">two,<span class="number">5</span>,<span class="number">6</span>,,<span class="number">8</span>,world</span><br><span class="line">three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br><span class="line">In [<span class="number">26</span>]: result = pd.read_csv(<span class="string">'examples/ex5.csv'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-082daf4a00ed9494.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-f2bcc0a703c7236f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-597327ade3e94c7a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶"><a href="#é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶" class="headerlink" title="é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶"></a>é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®pandasæ˜¾ç¤ºåœ°æ›´ç´§äº›</span></span><br><span class="line">pd.options.display.max_rows = <span class="number">10</span></span><br><span class="line"><span class="comment"># åªè¯»å–å‡ è¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex6.csv'</span>, nrows=<span class="number">5</span>)</span><br><span class="line"><span class="comment"># è¦é€å—è¯»å–æ–‡ä»¶</span></span><br><span class="line">chunker = pd.read_csv(<span class="string">'ch06/ex6.csv'</span>, chunksize=<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>è¿”å›å¯è¿­ä»£çš„TextParserå¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tot = pd.Series([])</span><br><span class="line"><span class="keyword">for</span> piece <span class="keyword">in</span> chunker:</span><br><span class="line">    tot = tot.add(piece[<span class="string">'key'</span>].value_counts(), fill_value=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">tot = tot.sort_values(ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼"><a href="#å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼" class="headerlink" title="å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼"></a>å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.to_csv(<span class="string">'examples/out.csv'</span>)</span><br><span class="line">data.to_csv(sys.stdout, sep=<span class="string">'|'</span>) <span class="comment"># å†™å‡ºåˆ°sys.stdoutï¼Œä»…ä»…æ‰“å°å‡ºæ–‡æœ¬ç»“æœ</span></span><br><span class="line"><span class="comment"># é»˜è®¤ç¼ºå¤±å€¼åœ¨è¾“å‡ºç»“æœä¸­ä¼šè¢«è¡¨ç¤ºä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">data.to_csv(sys.stdout, na_rep=<span class="string">'NULL'</span>)</span><br><span class="line"><span class="comment"># é»˜è®¤å†™å‡ºè¡Œå’Œåˆ—çš„æ ‡ç­¾</span></span><br><span class="line">data.to_csv(sys.stdout, index=<span class="literal">False</span>, header=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># åªå†™å‡ºä¸€éƒ¨åˆ†</span></span><br><span class="line">data.to_csv(sys.stdout, index=<span class="literal">False</span>, columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># Seriesä¹Ÿæœ‰ä¸€ä¸ªto_csvæ–¹æ³•</span></span><br><span class="line">dates = pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">7</span>)</span><br><span class="line">ts = pd.Series(np.arange(<span class="number">7</span>), index=dates)</span><br><span class="line">ts.to_csv(<span class="string">'examples/tseries.csv'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¤„ç†åˆ†éš”ç¬¦æ ¼å¼"><a href="#å¤„ç†åˆ†éš”ç¬¦æ ¼å¼" class="headerlink" title="å¤„ç†åˆ†éš”ç¬¦æ ¼å¼"></a>å¤„ç†åˆ†éš”ç¬¦æ ¼å¼</h4><p>æ‰‹åŠ¨å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">54</span>]: !cat examples/ex7.csv</span><br><span class="line"><span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span></span><br><span class="line"><span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span></span><br><span class="line"><span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥ä½¿ç”¨Pythonå†…ç½®çš„csvæ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">f = open(<span class="string">'examples/ex7.csv'</span>)</span><br><span class="line">reader = csv.reader(f)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> reader:</span><br><span class="line">    print(line)</span><br><span class="line"><span class="comment"># è¯»å–æ–‡ä»¶åˆ°ä¸€ä¸ªå¤šè¡Œçš„åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'examples/ex7.csv'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    lines = list(csv.reader(f))</span><br><span class="line"><span class="comment"># å°†è¿™äº›è¡Œåˆ†ä¸ºæ ‡é¢˜è¡Œå’Œæ•°æ®è¡Œ    </span></span><br><span class="line">header, values = lines[<span class="number">0</span>], lines[<span class="number">1</span>:]</span><br><span class="line"><span class="comment"># ç”¨å­—å…¸æ„é€ å¼å’Œzip(*values)ï¼Œåè€…å°†è¡Œè½¬ç½®ä¸ºåˆ—ï¼Œåˆ›å»ºæ•°æ®åˆ—çš„å­—å…¸</span></span><br><span class="line">data_dict = &#123;h: v <span class="keyword">for</span> h, v <span class="keyword">in</span> zip(header, zip(*values))&#125;</span><br></pre></td></tr></table></figure>
<p>CSVæ–‡ä»¶çš„å½¢å¼æœ‰å¾ˆå¤šã€‚åªéœ€å®šä¹‰csv.Dialectçš„ä¸€ä¸ªå­ç±»å³å¯å®šä¹‰å‡ºæ–°æ ¼å¼ï¼ˆå¦‚ä¸“é—¨çš„åˆ†éš”ç¬¦ã€å­—ç¬¦ä¸²å¼•ç”¨çº¦å®šã€è¡Œç»“æŸç¬¦ç­‰ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">my_dialect</span><span class="params">(csv.Dialect)</span>:</span></span><br><span class="line">    lineterminator = <span class="string">'\n'</span></span><br><span class="line">    delimiter = <span class="string">';'</span></span><br><span class="line">    quotechar = <span class="string">'"'</span></span><br><span class="line">    quoting = csv.QUOTE_MINIMAL</span><br><span class="line">reader = csv.reader(f, dialect=my_dialect)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-7a1cee622459072b.png?imageMogr2/auto-orient/strip|imageView2/2/w/1187/format/webp" alt="img"></p>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>é€šè¿‡json.loadså³å¯å°†JSONå­—ç¬¦ä¸²è½¬æ¢æˆPythonå½¢å¼</p>
<p>json.dumpsåˆ™å°†Pythonå¯¹è±¡è½¬æ¢æˆJSONæ ¼å¼</p>
<p>JSONå¯¹è±¡è½¬æ¢ä¸ºDataFrameï¼šå‘DataFrameæ„é€ å™¨ä¼ å…¥ä¸€ä¸ªå­—å…¸çš„åˆ—è¡¨ï¼ˆå°±æ˜¯åŸå…ˆçš„JSONå¯¹è±¡ï¼‰ï¼Œå¹¶é€‰å–æ•°æ®å­—æ®µçš„å­é›†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = json.loads(obj)</span><br><span class="line">siblings = pd.DataFrame(result[<span class="string">'siblings'</span>], columns=[<span class="string">'name'</span>, <span class="string">'age'</span>])</span><br></pre></td></tr></table></figure>
<p>pandas.read_jsonå¯ä»¥è‡ªåŠ¨å°†ç‰¹åˆ«æ ¼å¼çš„JSONæ•°æ®é›†è½¬æ¢ä¸ºSeriesæˆ–DataFrame</p>
<p>å°†æ•°æ®ä»pandasè¾“å‡ºåˆ°JSONï¼Œå¯ä»¥ä½¿ç”¨to_jsonæ–¹æ³•</p>
<h4 id="XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†"><a href="#XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†" class="headerlink" title="XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†"></a>XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†</h4><p>pandasæœ‰ä¸€ä¸ªå†…ç½®çš„åŠŸèƒ½ï¼Œread_htmlï¼Œå®ƒå¯ä»¥ä½¿ç”¨lxmlå’ŒBeautiful Soupè‡ªåŠ¨å°†HTMLæ–‡ä»¶ä¸­çš„è¡¨æ ¼è§£æä¸ºDataFrameå¯¹è±¡ã€‚</p>
<h3 id="äºŒè¿›åˆ¶æ•°æ®æ ¼å¼"><a href="#äºŒè¿›åˆ¶æ•°æ®æ ¼å¼" class="headerlink" title="äºŒè¿›åˆ¶æ•°æ®æ ¼å¼"></a>äºŒè¿›åˆ¶æ•°æ®æ ¼å¼</h3><p>å®ç°æ•°æ®çš„é«˜æ•ˆäºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æœ€ç®€å•çš„åŠæ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨Pythonå†…ç½®çš„pickleåºåˆ—åŒ–</p>
<p>read_pickleå’Œto_pickle</p>
<ul>
<li>pickleä»…å»ºè®®ç”¨äºçŸ­æœŸå­˜å‚¨æ ¼å¼ã€‚å…¶åŸå› æ˜¯å¾ˆéš¾ä¿è¯è¯¥æ ¼å¼æ°¸è¿œæ˜¯ç¨³å®šçš„</li>
</ul>
<p>pandaså†…ç½®æ”¯æŒä¸¤ä¸ªäºŒè¿›åˆ¶æ•°æ®æ ¼å¼ï¼šHDF5å’ŒMessagePackã€‚</p>
<p>pandasæˆ–NumPyæ•°æ®çš„å…¶å®ƒå­˜å‚¨æ ¼å¼æœ‰ï¼š</p>
<ul>
<li>bcolzï¼šä¸€ç§å¯å‹ç¼©çš„åˆ—å­˜å‚¨äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŸºäºBloscå‹ç¼©åº“ã€‚</li>
<li>Featherï¼šä¸€ç§è·¨è¯­è¨€çš„åˆ—å­˜å‚¨æ–‡ä»¶æ ¼å¼ã€‚Featherä½¿ç”¨äº†Apache Arrowçš„åˆ—å¼å†…å­˜æ ¼å¼ã€‚</li>
</ul>
<h4 id="HDF5æ ¼å¼"><a href="#HDF5æ ¼å¼" class="headerlink" title="HDF5æ ¼å¼"></a>HDF5æ ¼å¼</h4><p>HDF5æ˜¯ä¸€ç§å­˜å‚¨å¤§è§„æ¨¡ç§‘å­¦æ•°ç»„æ•°æ®çš„éå¸¸å¥½çš„æ–‡ä»¶æ ¼å¼ã€‚</p>
<p>HDF5å¯ä»¥é«˜æ•ˆåœ°åˆ†å—è¯»å†™</p>
<p>å¯ä»¥ç”¨PyTablesæˆ–h5pyåº“ç›´æ¥è®¿é—®HDF5æ–‡ä»¶ï¼Œpandasæä¾›äº†æ›´ä¸ºé«˜çº§çš„æ¥å£</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'a'</span>: np.random.randn(<span class="number">100</span>)&#125;)</span><br><span class="line">store[<span class="string">'obj1'</span>] = frame</span><br><span class="line">store[<span class="string">'obj1_col'</span>] = frame[<span class="string">'a'</span>]</span><br><span class="line">store = pd.HDFStore(<span class="string">'mydata.h5'</span>)</span><br><span class="line"><span class="comment"># HDFStoreæ”¯æŒä¸¤ç§å­˜å‚¨æ¨¡å¼ï¼Œ'fixed'å’Œ'table'ã€‚åè€…é€šå¸¸ä¼šæ›´æ…¢ï¼Œä½†æ˜¯æ”¯æŒä½¿ç”¨ç‰¹æ®Šè¯­æ³•è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼š</span></span><br><span class="line">store.put(<span class="string">'obj2'</span>, frame, format=<span class="string">'table'</span>)</span><br><span class="line">store.select(<span class="string">'obj2'</span>, where=[<span class="string">'index &gt;= 10 and index &lt;= 15'</span>])</span><br><span class="line"></span><br><span class="line">frame.to_hdf(<span class="string">'mydata.h5'</span>, <span class="string">'obj3'</span>, format=<span class="string">'table'</span>)</span><br><span class="line">pd.read_hdf(<span class="string">'mydata.h5'</span>, <span class="string">'obj3'</span>, where=[<span class="string">'index &lt; 5'</span>])</span><br></pre></td></tr></table></figure>
<h4 id="è¯»å–Microsoft-Excelæ–‡ä»¶"><a href="#è¯»å–Microsoft-Excelæ–‡ä»¶" class="headerlink" title="è¯»å–Microsoft Excelæ–‡ä»¶"></a>è¯»å–Microsoft Excelæ–‡ä»¶</h4><p>pandasçš„ExcelFileç±»æˆ–pandas.read_excelå‡½æ•°æ”¯æŒè¯»å–å­˜å‚¨åœ¨Excel 2003ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ä¸­çš„è¡¨æ ¼å‹æ•°æ®ã€‚è¿™ä¸¤ä¸ªå·¥å…·åˆ†åˆ«ä½¿ç”¨æ‰©å±•åŒ…xlrdå’Œopenpyxlè¯»å–XLSå’ŒXLSXæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯»å–</span></span><br><span class="line">xlsx = pd.ExcelFile(<span class="string">'examples/ex1.xlsx'</span>)</span><br><span class="line">pd.read_excel(xlsx, <span class="string">'Sheet1'</span>)</span><br><span class="line">frame = pd.read_excel(<span class="string">'examples/ex1.xlsx'</span>, <span class="string">'Sheet1'</span>)</span><br><span class="line"><span class="comment"># å†™å…¥</span></span><br><span class="line">writer = pd.ExcelWriter(<span class="string">'examples/ex2.xlsx'</span>)</span><br><span class="line">frame.to_excel(writer, <span class="string">'Sheet1'</span>)</span><br><span class="line">writer.save()</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">frame.to_excel(<span class="string">'examples/ex2.xlsx'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Web-APIsäº¤äº’"><a href="#Web-APIsäº¤äº’" class="headerlink" title="Web APIsäº¤äº’"></a>Web APIsäº¤äº’</h3><h3 id="æ•°æ®åº“äº¤äº’"><a href="#æ•°æ®åº“äº¤äº’" class="headerlink" title="æ•°æ®åº“äº¤äº’"></a>æ•°æ®åº“äº¤äº’</h3><p>å°†æ•°æ®ä»SQLåŠ è½½åˆ°DataFrameçš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œæ­¤å¤–pandasè¿˜æœ‰ä¸€äº›èƒ½å¤Ÿç®€åŒ–è¯¥è¿‡ç¨‹çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘å°†ä½¿ç”¨SQLiteæ•°æ®åº“ï¼ˆé€šè¿‡Pythonå†…ç½®çš„sqlite3é©±åŠ¨å™¨ï¼‰</p>
<p>ã€‚<a href="http://www.sqlalchemy.org/" target="_blank" rel="noopener">SQLAlchemyé¡¹ç›®</a>æ˜¯ä¸€ä¸ªæµè¡Œçš„Python SQLå·¥å…·ï¼Œå®ƒæŠ½è±¡å‡ºäº†SQLæ•°æ®åº“ä¸­çš„è®¸å¤šå¸¸è§å·®å¼‚ã€‚pandasæœ‰ä¸€ä¸ªread_sqlå‡½æ•°ï¼Œå¯ä»¥è®©ä½ è½»æ¾çš„ä»SQLAlchemyè¿æ¥è¯»å–æ•°æ®ã€‚</p>
<h2 id="ç¬¬7ç« -æ•°æ®æ¸…æ´—å’Œå‡†å¤‡"><a href="#ç¬¬7ç« -æ•°æ®æ¸…æ´—å’Œå‡†å¤‡" class="headerlink" title="ç¬¬7ç«  æ•°æ®æ¸…æ´—å’Œå‡†å¤‡"></a>ç¬¬7ç«  æ•°æ®æ¸…æ´—å’Œå‡†å¤‡</h2><h3 id="å¤„ç†ç¼ºå¤±æ•°æ®"><a href="#å¤„ç†ç¼ºå¤±æ•°æ®" class="headerlink" title="å¤„ç†ç¼ºå¤±æ•°æ®"></a>å¤„ç†ç¼ºå¤±æ•°æ®</h3><p>å¯¹äºæ•°å€¼æ•°æ®ï¼Œpandasä½¿ç”¨æµ®ç‚¹å€¼NaNï¼ˆNot a Numberï¼‰è¡¨ç¤ºç¼ºå¤±æ•°æ®ï¼Œç§°å…¶ä¸ºå“¨å…µå€¼ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ£€æµ‹å‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">string_data = pd.Series([<span class="string">'aardvark'</span>, <span class="string">'artichoke'</span>, np.nan, <span class="string">'avocado'</span>])</span><br><span class="line">string_data.isnull()</span><br><span class="line">string_data[<span class="number">0</span>] = <span class="literal">None</span></span><br><span class="line">string_data.isnull()</span><br></pre></td></tr></table></figure>
<p>pandasé‡‡ç”¨äº†Rè¯­è¨€ä¸­çš„æƒ¯ç”¨æ³•ï¼Œå³å°†ç¼ºå¤±å€¼è¡¨ç¤ºä¸ºNAï¼Œå®ƒè¡¨ç¤ºä¸å¯ç”¨not availableã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-1a0f73e5bb26ea21.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ»¤é™¤ç¼ºå¤±æ•°æ®"><a href="#æ»¤é™¤ç¼ºå¤±æ•°æ®" class="headerlink" title="æ»¤é™¤ç¼ºå¤±æ•°æ®"></a>æ»¤é™¤ç¼ºå¤±æ•°æ®</h4><p>é€šè¿‡pandas.isnullæˆ–å¸ƒå°”ç´¢å¼•çš„æ‰‹å·¥æ–¹æ³•ï¼Œæˆ–è€…dropnaã€‚å¯¹äºä¸€ä¸ªSeriesï¼Œdropnaè¿”å›ä¸€ä¸ªä»…å«éç©ºæ•°æ®å’Œç´¢å¼•å€¼çš„Series</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</span><br><span class="line">data = pd.Series([<span class="number">1</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>]) </span><br><span class="line">data.dropna()</span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line">data[data.notnull()]</span><br></pre></td></tr></table></figure>
<p>å¯¹äºDataFrameå¯¹è±¡ï¼Œdropnaé»˜è®¤ä¸¢å¼ƒä»»ä½•å«æœ‰ç¼ºå¤±å€¼çš„è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame([[<span class="number">1.</span>, <span class="number">6.5</span>, <span class="number">3.</span>], [<span class="number">1.</span>, NA, NA], [NA, NA, NA], [NA, <span class="number">6.5</span>, <span class="number">3.</span>]])</span><br><span class="line">cleaned = data.dropna()</span><br><span class="line"><span class="comment"># ä¸¢å¼ƒå…¨ä¸ºNAçš„é‚£äº›è¡Œ</span></span><br><span class="line">data.dropna(how=<span class="string">'all'</span>)</span><br><span class="line"><span class="comment"># ä¸¢å¼ƒåˆ—</span></span><br><span class="line">data.dropna(axis=<span class="number">1</span>, how=<span class="string">'all'</span>)</span><br><span class="line"><span class="comment"># æ»¤é™¤DataFrameè¡Œçš„é—®é¢˜æ¶‰åŠæ—¶é—´åºåˆ—æ•°æ®ï¼Œè‡³æ»¤é™¤ç¬¦åˆæ¡ä»¶çš„å‰ä¸¤è¡Œ</span></span><br><span class="line">df.dropna(thresh=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¡«å……ç¼ºå¤±æ•°æ®"><a href="#å¡«å……ç¼ºå¤±æ•°æ®" class="headerlink" title="å¡«å……ç¼ºå¤±æ•°æ®"></a>å¡«å……ç¼ºå¤±æ•°æ®</h4><p>fillnaå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.fillna(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># å®ç°å¯¹ä¸åŒçš„åˆ—å¡«å……ä¸åŒçš„å€¼</span></span><br><span class="line">df.fillna(&#123;<span class="number">1</span>: <span class="number">0.5</span>, <span class="number">2</span>: <span class="number">0</span>&#125;)</span><br><span class="line"><span class="comment"># å¯¹ç°æœ‰å¯¹è±¡è¿›è¡Œå°±åœ°ä¿®æ”¹</span></span><br><span class="line"> _ = df.fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#å¯¹reindexingæœ‰æ•ˆçš„é‚£äº›æ’å€¼æ–¹æ³•ä¹Ÿå¯ç”¨äºfillna    </span></span><br><span class="line">df.fillna(method=<span class="string">'ffill'</span>)</span><br><span class="line">df.fillna(method=<span class="string">'ffill'</span>, limit=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># ä¼ å…¥å¹³å‡å€¼</span></span><br><span class="line">data.fillna(data.mean())</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-0bf235386a64c3b5.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4edd39e68f4dc530.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h3><h4 id="ç§»é™¤é‡å¤æ•°æ®"><a href="#ç§»é™¤é‡å¤æ•°æ®" class="headerlink" title="ç§»é™¤é‡å¤æ•°æ®"></a>ç§»é™¤é‡å¤æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(&#123;<span class="string">'k1'</span>: [<span class="string">'one'</span>, <span class="string">'two'</span>] * <span class="number">3</span> + [<span class="string">'two'</span>],<span class="string">'k2'</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]&#125;)</span><br><span class="line"><span class="comment"># duplicatedæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å‹Seriesï¼Œè¡¨ç¤ºå„è¡Œæ˜¯å¦å’Œå‰é¢å‡ºç°è¿‡çš„è¡Œé‡å¤</span></span><br><span class="line">data.duplicated()</span><br><span class="line"><span class="comment"># drop_duplicatesæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªDataFrameï¼Œé‡å¤çš„æ•°ç»„ä¼šæ ‡ä¸ºFalse</span></span><br><span class="line">data.drop_duplicates()</span><br><span class="line"><span class="comment"># æŒ‡å®šéƒ¨åˆ†åˆ—è¿›è¡Œé‡å¤é¡¹åˆ¤æ–­</span></span><br><span class="line">data.drop_duplicates([<span class="string">'k1'</span>])</span><br><span class="line"><span class="comment"># duplicatedå’Œdrop_duplicatesé»˜è®¤ä¿ç•™çš„æ˜¯ç¬¬ä¸€ä¸ªå‡ºç°çš„å€¼ç»„åˆã€‚ä¼ å…¥keep='last'åˆ™ä¿ç•™æœ€åä¸€ä¸ª</span></span><br><span class="line">data.drop_duplicates([<span class="string">'k1'</span>, <span class="string">'k2'</span>], keep=<span class="string">'last'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢"><a href="#åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢" class="headerlink" title="åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢"></a>åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(&#123;<span class="string">'food'</span>: [<span class="string">'bacon'</span>, <span class="string">'pulled pork'</span>, <span class="string">'bacon'</span>,</span><br><span class="line"><span class="string">'Pastrami'</span>, <span class="string">'corned beef'</span>, <span class="string">'Bacon'</span>,<span class="string">'pastrami'</span>, <span class="string">'honey ham'</span>, <span class="string">'nova lox'</span>],<span class="string">'ounces'</span>: [<span class="number">4</span>, <span class="number">3</span>, <span class="number">12</span>, <span class="number">6</span>, <span class="number">7.5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>]&#125;)</span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€åˆ—è¡¨ç¤ºè¯¥è‚‰ç±»é£Ÿç‰©æ¥æºçš„åŠ¨ç‰©ç±»å‹</span></span><br><span class="line"><span class="comment"># ç¼–å†™ä¸€ä¸ªä¸åŒè‚‰ç±»åˆ°åŠ¨ç‰©çš„æ˜ å°„</span></span><br><span class="line">meat_to_animal = &#123;</span><br><span class="line">  <span class="string">'bacon'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'pulled pork'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'pastrami'</span>: <span class="string">'cow'</span>,</span><br><span class="line">  <span class="string">'corned beef'</span>: <span class="string">'cow'</span>,</span><br><span class="line">  <span class="string">'honey ham'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'nova lox'</span>: <span class="string">'salmon'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># å…ˆå°†å­—æ¯è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line">lowercased = data[<span class="string">'food'</span>].str.lower()</span><br><span class="line">data[<span class="string">'animal'</span>] = lowercased.map(meat_to_animal)</span><br><span class="line"><span class="comment"># ä¼ å…¥ä¸€ä¸ªèƒ½å¤Ÿå®Œæˆå…¨éƒ¨è¿™äº›å·¥ä½œçš„å‡½æ•°ï¼š</span></span><br><span class="line">data[<span class="string">'food'</span>].map(<span class="keyword">lambda</span> x: meat_to_animal[x.lower()])</span><br></pre></td></tr></table></figure>
<h4 id="æ›¿æ¢å€¼"><a href="#æ›¿æ¢å€¼" class="headerlink" title="æ›¿æ¢å€¼"></a>æ›¿æ¢å€¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.Series([<span class="number">1.</span>, <span class="number">-999.</span>, <span class="number">2.</span>, <span class="number">-999.</span>, <span class="number">-1000.</span>, <span class="number">3.</span>])</span><br><span class="line">data.replace(<span class="number">-999</span>, np.nan)</span><br><span class="line"><span class="comment"># ä¼ å…¥å¤šä¸ªå€¼</span></span><br><span class="line">data.replace([<span class="number">-999</span>, <span class="number">-1000</span>], np.nan)</span><br><span class="line">data.replace([<span class="number">-999</span>, <span class="number">-1000</span>], [np.nan, <span class="number">0</span>])</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä¼ å…¥å­—å…¸</span></span><br><span class="line">data.replace(&#123;<span class="number">-999</span>: np.nan, <span class="number">-1000</span>: <span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>data.replaceæ–¹æ³•ä¸data.str.replaceä¸åŒï¼Œåè€…åšçš„æ˜¯å­—ç¬¦ä¸²çš„å…ƒç´ çº§æ›¿æ¢</li>
</ul>
<h4 id="é‡å‘½åè½´ç´¢å¼•"><a href="#é‡å‘½åè½´ç´¢å¼•" class="headerlink" title="é‡å‘½åè½´ç´¢å¼•"></a>é‡å‘½åè½´ç´¢å¼•</h4><p>è½´æ ‡ç­¾å¯ä»¥é€šè¿‡å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œè½¬æ¢ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ä¸åŒæ ‡ç­¾çš„å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>])</span><br><span class="line">transform = <span class="keyword">lambda</span> x: x[:<span class="number">4</span>].upper()</span><br><span class="line">data.index.map(transform)</span><br><span class="line"><span class="comment"># å¯¹DataFrameå°±åœ°ä¿®æ”¹</span></span><br><span class="line">data.index = data.index.map(transform)</span><br><span class="line"><span class="comment"># ç”¨renameæ–¹æ³•åˆ›å»ºæ•°æ®é›†çš„è½¬æ¢ç‰ˆï¼ˆè€Œä¸æ˜¯ä¿®æ”¹åŸå§‹æ•°æ®ï¼‰</span></span><br><span class="line">data.rename(index=str.title, columns=str.upper)</span><br><span class="line"><span class="comment"># renameå¯ä»¥ç»“åˆå­—å…¸å‹å¯¹è±¡å®ç°å¯¹éƒ¨åˆ†è½´æ ‡ç­¾çš„æ›´æ–°</span></span><br><span class="line">data.rename(index=&#123;<span class="string">'OHIO'</span>: <span class="string">'INDIANA'</span>&#125;,columns=&#123;<span class="string">'three'</span>: <span class="string">'peekaboo'</span>&#125;)</span><br><span class="line"><span class="comment"># å°±åœ°ä¿®æ”¹</span></span><br><span class="line">data.rename(index=&#123;<span class="string">'OHIO'</span>: <span class="string">'INDIANA'</span>&#125;, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†"><a href="#ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†" class="headerlink" title="ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†"></a>ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†</h4><p>ä¸ºäº†ä¾¿äºåˆ†æï¼Œè¿ç»­æ•°æ®å¸¸å¸¸è¢«ç¦»æ•£åŒ–æˆ–æ‹†åˆ†ä¸ºâ€œé¢å…ƒâ€ï¼ˆbinï¼‰ã€‚</p>
<p>cutå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹´é¾„åˆ†ç»„</span></span><br><span class="line">ages = [<span class="number">20</span>, <span class="number">22</span>, <span class="number">25</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">37</span>, <span class="number">31</span>, <span class="number">61</span>, <span class="number">45</span>, <span class="number">41</span>, <span class="number">32</span>]</span><br><span class="line">bins = [<span class="number">18</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">60</span>, <span class="number">100</span>]</span><br><span class="line">cats = pd.cut(ages, bins)</span><br><span class="line"><span class="comment"># è¿”å›çš„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Categoricalå¯¹è±¡</span></span><br><span class="line">cats.codes <span class="comment"># array([0, 0, 0, 1, 0, 0, 2, 1, 3, 2, 2, 1], dtype=int8)</span></span><br><span class="line">cats.categories </span><br><span class="line"><span class="string">""" IntervalIndex([(18, 25], (25, 35], (35, 60], (60, 100]]</span></span><br><span class="line"><span class="string">              closed='right',</span></span><br><span class="line"><span class="string">              dtype='interval[int64]')"""</span></span><br><span class="line"><span class="comment"># pd.value_counts(cats)æ˜¯pandas.cutç»“æœçš„é¢å…ƒè®¡æ•°</span></span><br><span class="line">pd.value_counts(cats)</span><br><span class="line"></span><br><span class="line">pd.cut(ages, [<span class="number">18</span>, <span class="number">26</span>, <span class="number">36</span>, <span class="number">61</span>, <span class="number">100</span>], right=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªåˆ—è¡¨æˆ–æ•°ç»„åˆ°labelsï¼Œè®¾ç½®é¢å…ƒåç§°</span></span><br><span class="line">group_names = [<span class="string">'Youth'</span>, <span class="string">'YoungAdult'</span>, <span class="string">'MiddleAged'</span>, <span class="string">'Senior'</span>]</span><br><span class="line">pd.cut(ages, bins, labels=group_names)</span><br><span class="line"><span class="comment"># å‘cutä¼ å…¥çš„æ˜¯é¢å…ƒçš„æ•°é‡</span></span><br><span class="line">data = np.random.rand(<span class="number">20</span>)</span><br><span class="line">pd.cut(data, <span class="number">4</span>, precision=<span class="number">2</span>) <span class="comment"># é€‰é¡¹precision=2ï¼Œé™å®šå°æ•°åªæœ‰ä¸¤ä½</span></span><br></pre></td></tr></table></figure>
<p>qcutéå¸¸ç±»ä¼¼cutï¼Œå®ƒå¯ä»¥æ ¹æ®æ ·æœ¬åˆ†ä½æ•°å¯¹æ•°æ®è¿›è¡Œé¢å…ƒåˆ’åˆ†ã€‚æ ¹æ®æ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œcutå¯èƒ½æ— æ³•ä½¿å„ä¸ªé¢å…ƒä¸­å«æœ‰ç›¸åŒæ•°é‡çš„æ•°æ®ç‚¹ã€‚è€Œqcutç”±äºä½¿ç”¨çš„æ˜¯æ ·æœ¬åˆ†ä½æ•°ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°å¤§å°åŸºæœ¬ç›¸ç­‰çš„é¢å…ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = np.random.randn(<span class="number">1000</span>)</span><br><span class="line">cats = pd.qcut(data, <span class="number">4</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ä¼ é€’è‡ªå®šä¹‰çš„åˆ†ä½æ•°ï¼ˆ0åˆ°1ä¹‹é—´çš„æ•°å€¼ï¼ŒåŒ…å«ç«¯ç‚¹ï¼‰</span></span><br><span class="line">pd.qcut(data, [<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">1.</span>])</span><br></pre></td></tr></table></figure>
<h4 id="æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼"><a href="#æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼" class="headerlink" title="æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼"></a>æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼</h4><p>è¿‡æ»¤æˆ–å˜æ¢å¼‚å¸¸å€¼ï¼ˆoutlierï¼‰åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå°±æ˜¯è¿ç”¨æ•°ç»„è¿ç®—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(np.random.randn(<span class="number">1000</span>, <span class="number">4</span>))</span><br><span class="line">data.describe()</span><br><span class="line"><span class="comment"># æ‰¾å‡ºæŸåˆ—ä¸­ç»å¯¹å€¼å¤§å°è¶…è¿‡3çš„å€¼</span></span><br><span class="line">col = data[<span class="number">2</span>] <span class="comment"># ç¬¬äºŒåˆ—</span></span><br><span class="line">col[np.abs(col) &gt; <span class="number">3</span>]</span><br><span class="line"><span class="comment"># é€‰å‡ºå…¨éƒ¨å«æœ‰â€œè¶…è¿‡3æˆ–ï¼3çš„å€¼â€çš„è¡Œ</span></span><br><span class="line">data[(np.abs(data) &gt; <span class="number">3</span>).any(<span class="number">1</span>)]</span><br><span class="line">data[np.abs(data) &gt; <span class="number">3</span>] = np.sign(data) * <span class="number">3</span></span><br><span class="line"><span class="comment"># æ ¹æ®æ•°æ®çš„å€¼æ˜¯æ­£è¿˜æ˜¯è´Ÿï¼Œnp.sign(data)å¯ä»¥ç”Ÿæˆ1å’Œ-1ï¼š</span></span><br><span class="line">np.sign(data).head()</span><br></pre></td></tr></table></figure>
<h4 id="æ’åˆ—å’Œéšæœºé‡‡æ ·"><a href="#æ’åˆ—å’Œéšæœºé‡‡æ ·" class="headerlink" title="æ’åˆ—å’Œéšæœºé‡‡æ ·"></a>æ’åˆ—å’Œéšæœºé‡‡æ ·</h4><p>åˆ©ç”¨numpy.random.permutationå‡½æ•°å¯ä»¥å®ç°å¯¹Seriesæˆ–DataFrameçš„åˆ—çš„æ’åˆ—å·¥ä½œï¼ˆpermutingï¼Œéšæœºé‡æ’åºï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(np.arange(<span class="number">5</span> * <span class="number">4</span>).reshape((<span class="number">5</span>, <span class="number">4</span>)))</span><br><span class="line">sampler = np.random.permutation(<span class="number">5</span>)</span><br><span class="line">df.take(sampler)</span><br><span class="line"><span class="comment"># å¯ä»¥åœ¨Serieså’ŒDataFrameä¸Šä½¿ç”¨sampleæ–¹æ³•</span></span><br><span class="line">df.sample(n=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># è¦é€šè¿‡æ›¿æ¢çš„æ–¹å¼äº§ç”Ÿæ ·æœ¬ï¼ˆå…è®¸é‡å¤é€‰æ‹©ï¼‰ï¼Œå¯ä»¥ä¼ é€’replace=Trueåˆ°sample</span></span><br><span class="line">choices = pd.Series([<span class="number">5</span>, <span class="number">7</span>, <span class="number">-1</span>, <span class="number">6</span>, <span class="number">4</span>])</span><br><span class="line">draws = choices.sample(n=<span class="number">10</span>, replace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è®¡ç®—æŒ‡æ ‡-å“‘å˜é‡"><a href="#è®¡ç®—æŒ‡æ ‡-å“‘å˜é‡" class="headerlink" title="è®¡ç®—æŒ‡æ ‡/å“‘å˜é‡"></a>è®¡ç®—æŒ‡æ ‡/å“‘å˜é‡</h4><p>å¦ä¸€ç§å¸¸ç”¨äºç»Ÿè®¡å»ºæ¨¡æˆ–æœºå™¨å­¦ä¹ çš„è½¬æ¢æ–¹å¼æ˜¯ï¼šå°†åˆ†ç±»å˜é‡ï¼ˆcategorical variableï¼‰è½¬æ¢ä¸ºâ€œå“‘å˜é‡â€æˆ–â€œæŒ‡æ ‡çŸ©é˜µâ€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>],<span class="string">'data1'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line"><span class="comment"># ç»™æŒ‡æ ‡DataFrameçš„åˆ—åŠ ä¸Šä¸€ä¸ªå‰ç¼€ï¼Œä»¥ä¾¿èƒ½å¤Ÿè·Ÿå…¶ä»–æ•°æ®è¿›è¡Œåˆå¹¶</span></span><br><span class="line">dummies = pd.get_dummies(df[<span class="string">'key'</span>], prefix=<span class="string">'key'</span>)</span><br><span class="line">df_with_dummy = df[[<span class="string">'data1'</span>]].join(dummies)</span><br><span class="line"><span class="comment"># å¦‚æœDataFrameä¸­çš„æŸè¡ŒåŒå±äºå¤šä¸ªåˆ†ç±»ï¼Œåˆ™äº‹æƒ…å°±ä¼šæœ‰ç‚¹å¤æ‚</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.random.seed(<span class="number">12345</span>)</span><br><span class="line">values = np.random.rand(<span class="number">10</span>)</span><br><span class="line">bins = [<span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1</span>]</span><br><span class="line">pd.get_dummies(pd.cut(values, bins))</span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">val = <span class="string">'a,b,  guido'</span></span><br><span class="line">pieces = [x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> val.split(<span class="string">','</span>)]</span><br><span class="line"><span class="string">'::'</span>.join(pieces) <span class="comment"># ç­‰ä»·äº first + '::' + second + '::' + third</span></span><br><span class="line"><span class="comment"># å­ä¸²å®šä½</span></span><br><span class="line"><span class="string">'guido'</span> <span class="keyword">in</span> val</span><br><span class="line">val.index(<span class="string">','</span>) <span class="comment"># æ‰¾ä¸åˆ°å­—ç¬¦ä¸²ï¼Œindexå°†ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">val.find(<span class="string">':'</span>)  <span class="comment"># æ‰¾ä¸åˆ°è¿”å›-1</span></span><br><span class="line">val.count(<span class="string">','</span>)</span><br><span class="line">val.replace(<span class="string">','</span>, <span class="string">'::'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-087fe67bf6db0701.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d1f0d4ed3e895016.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h4><p>reæ¨¡å—çš„å‡½æ•°å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå¤§ç±»ï¼šæ¨¡å¼åŒ¹é…ã€æ›¿æ¢ä»¥åŠæ‹†åˆ†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">text = <span class="string">"foo    bar\t baz  \tqux"</span></span><br><span class="line">re.split(<span class="string">'\s+'</span>, text)</span><br><span class="line"><span class="comment"># è°ƒç”¨re.split('\s+',text)æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šå…ˆè¢«ç¼–è¯‘ï¼Œç„¶åå†åœ¨textä¸Šè°ƒç”¨å…¶splitæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœæ‰“ç®—å¯¹è®¸å¤šå­—ç¬¦ä¸²åº”ç”¨åŒä¸€æ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¼ºçƒˆå»ºè®®é€šè¿‡re.compileåˆ›å»ºregexå¯¹è±¡ã€‚è¿™æ ·å°†å¯ä»¥èŠ‚çœå¤§é‡çš„CPUæ—¶é—´ã€‚</span></span><br><span class="line">regex = re.compile(<span class="string">'\s+'</span>)</span><br><span class="line">regex.split(text)</span><br><span class="line">regex.findall(text)</span><br><span class="line"><span class="comment"># findallè¿”å›å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„åŒ¹é…é¡¹ï¼Œsearchè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚matchåªåŒ¹é…å­—ç¬¦ä¸²çš„é¦–éƒ¨</span></span><br><span class="line">text = <span class="string">"""Dave dave@google.com</span></span><br><span class="line"><span class="string">Steve steve@gmail.com</span></span><br><span class="line"><span class="string">Rob rob@gmail.com</span></span><br><span class="line"><span class="string">Ryan ryan@yahoo.com</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">pattern = <span class="string">r'[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]&#123;2,4&#125;'</span></span><br><span class="line"><span class="comment"># re.IGNORECASE makes the regex case-insensitive</span></span><br><span class="line">regex = re.compile(pattern, flags=re.IGNORECASE)</span><br><span class="line"></span><br><span class="line">regex.findall(text)</span><br><span class="line">m = regex.search(text)</span><br><span class="line"><span class="comment"># &lt;_sre.SRE_Match object; span=(5, 20), match='dave@google.com'&gt;</span></span><br><span class="line">text[m.start():m.end()]</span><br><span class="line">regex.match(text) <span class="comment"># ç»“æœä¸ºNone,åªåŒ¹é…å‡ºç°åœ¨å­—ç¬¦ä¸²å¼€å¤´çš„æ¨¡å¼</span></span><br><span class="line">regex.sub(<span class="string">'REDACTED'</span>, text)</span><br><span class="line"><span class="comment"># åˆ†æ®µçš„æ¨¡å¼</span></span><br><span class="line">pattern = <span class="string">r'([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.([A-Z]&#123;2,4&#125;)'</span></span><br><span class="line">m = regex.match(<span class="string">'wesm@bright.net'</span>)</span><br><span class="line">m.groups()</span><br><span class="line"><span class="comment"># ('wesm', 'bright', 'net')</span></span><br><span class="line">regex.findall(text) <span class="comment"># å¯¹äºå¸¦æœ‰åˆ†ç»„åŠŸèƒ½çš„æ¨¡å¼ï¼Œfindallè¿”å›ä¸€ä¸ªå…ƒç»„åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># subèƒ½é€šè¿‡è¯¸å¦‚\1ã€\2ä¹‹ç±»çš„ç‰¹æ®Šç¬¦å·è®¿é—®å„åŒ¹é…é¡¹ä¸­çš„åˆ†ç»„</span></span><br><span class="line">regex.sub(<span class="string">r'Username: \1, Domain: \2, Suffix: \3'</span>, text)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-efbb80a793759fc0.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°"><a href="#pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°"></a>pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°</h4><p>é€šè¿‡data.mapï¼Œæ‰€æœ‰å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•éƒ½èƒ½è¢«åº”ç”¨äºï¼ˆä¼ å…¥lambdaè¡¨è¾¾å¼æˆ–å…¶ä»–å‡½æ•°ï¼‰å„ä¸ªå€¼ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨NAï¼ˆnullï¼‰å°±ä¼šæŠ¥é”™ã€‚</p>
<p>å«æœ‰å­—ç¬¦ä¸²çš„åˆ—æœ‰æ—¶è¿˜å«æœ‰ç¼ºå¤±æ•°æ®,ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSeriesæœ‰ä¸€äº›èƒ½å¤Ÿè·³è¿‡NAå€¼çš„é¢å‘æ•°ç»„æ–¹æ³•ï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚é€šè¿‡Seriesçš„strå±æ€§å³å¯è®¿é—®è¿™äº›æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.str.contains(<span class="string">'gmail'</span>)</span><br><span class="line">data.str.findall(pattern, flags=re.IGNORECASE)</span><br><span class="line">matches = data.str.match(pattern, flags=re.IGNORECASE)</span><br><span class="line">data.str[:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a634364ed6d5d5c5.png?imageMogr2/auto-orient/strip|imageView2/2/w/870/format/webp" alt="img"></p>
<h2 id="ç¬¬8ç« -æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘"><a href="#ç¬¬8ç« -æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘" class="headerlink" title="ç¬¬8ç«  æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘"></a>ç¬¬8ç«  æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘</h2><h3 id="å±‚æ¬¡åŒ–ç´¢å¼•"><a href="#å±‚æ¬¡åŒ–ç´¢å¼•" class="headerlink" title="å±‚æ¬¡åŒ–ç´¢å¼•"></a>å±‚æ¬¡åŒ–ç´¢å¼•</h3><p>å±‚æ¬¡åŒ–ç´¢å¼•ï¼ˆhierarchical indexingï¼‰æ˜¯pandasçš„ä¸€é¡¹é‡è¦åŠŸèƒ½ï¼Œåœ¨ä¸€ä¸ªè½´ä¸Šæ‹¥æœ‰å¤šä¸ªï¼ˆä¸¤ä¸ªä»¥ä¸Šï¼‰ç´¢å¼•çº§åˆ«ï¼Œä»¥ä½ç»´åº¦å½¢å¼å¤„ç†é«˜ç»´åº¦æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.Series(np.random.randn(<span class="number">9</span>),index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="comment"># å¤–å±‚æ“ä½œ</span></span><br><span class="line">data[<span class="string">'b'</span>]</span><br><span class="line"><span class="comment"># å†…å±‚æ“ä½œ</span></span><br><span class="line">data.loc[:, <span class="number">2</span>]</span><br><span class="line"><span class="comment"># é€šè¿‡unstackæ–¹æ³•å°†è¿™æ®µæ•°æ®é‡æ–°å®‰æ’åˆ°ä¸€ä¸ªDataFrameä¸­</span></span><br><span class="line">data.unstack()</span><br><span class="line">data.unstack().stack()</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">å¯¹äºä¸€ä¸ªDataFrameï¼Œæ¯æ¡è½´éƒ½å¯ä»¥æœ‰åˆ†å±‚ç´¢å¼•ï¼š</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]],columns=[[<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>],[<span class="string">'Green'</span>, <span class="string">'Red'</span>, <span class="string">'Green'</span>]])</span><br><span class="line"><span class="comment"># å„å±‚éƒ½å¯ä»¥æœ‰åå­—</span></span><br><span class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</span><br><span class="line">frame.columns.names = [<span class="string">'state'</span>, <span class="string">'color'</span>]</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">frame[<span class="string">'Ohio'</span>]</span><br><span class="line">frame.loc[<span class="string">'a'</span>]</span><br></pre></td></tr></table></figure>
<h4 id="é‡æ’ä¸åˆ†çº§æ’åº"><a href="#é‡æ’ä¸åˆ†çº§æ’åº" class="headerlink" title="é‡æ’ä¸åˆ†çº§æ’åº"></a>é‡æ’ä¸åˆ†çº§æ’åº</h4><p>swaplevelæ¥å—ä¸¤ä¸ªçº§åˆ«ç¼–å·æˆ–åç§°ï¼Œå¹¶è¿”å›ä¸€ä¸ªäº’æ¢äº†çº§åˆ«çš„æ–°å¯¹è±¡ï¼ˆä½†æ•°æ®ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</span><br><span class="line">frame.columns.names = [<span class="string">'state'</span>, <span class="string">'color'</span>]</span><br><span class="line"><span class="comment"># sort_indexåˆ™æ ¹æ®å•ä¸ªçº§åˆ«ä¸­çš„å€¼å¯¹æ•°æ®è¿›è¡Œæ’åº</span></span><br><span class="line">frame.sort_index(level=<span class="number">1</span>)</span><br><span class="line">frame.swaplevel(<span class="number">0</span>, <span class="number">1</span>).sort_index(level=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡"><a href="#æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡" class="headerlink" title="æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡"></a>æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®è¡Œæˆ–åˆ—ä¸Šçš„çº§åˆ«æ¥è¿›è¡Œæ±‚å’Œ</span></span><br><span class="line">frame.sum(level=<span class="string">'key2'</span>)</span><br><span class="line">frame.sum(level=<span class="string">'color'</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•"><a href="#ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•" class="headerlink" title="ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•"></a>ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•</h4><p>DataFrameçš„set_indexå‡½æ•°ä¼šå°†å…¶ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è½¬æ¢ä¸ºè¡Œç´¢å¼•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„DataFrame</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'a'</span>: range(<span class="number">7</span>), <span class="string">'b'</span>: range(<span class="number">7</span>, <span class="number">0</span>, <span class="number">-1</span>),<span class="string">'c'</span>: [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>], <span class="string">'d'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">frame2 = frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>])</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œé‚£äº›åˆ—ä¼šä»DataFrameä¸­ç§»é™¤ï¼Œä½†ä¹Ÿå¯ä»¥å°†å…¶ä¿ç•™ä¸‹æ¥</span></span><br><span class="line">frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>], drop=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># reset_indexçš„åŠŸèƒ½è·Ÿset_indexåˆšå¥½ç›¸åï¼Œå±‚æ¬¡åŒ–ç´¢å¼•çš„çº§åˆ«ä¼šè¢«è½¬ç§»åˆ°åˆ—é‡Œé¢</span></span><br><span class="line">frame2.reset_index()</span><br></pre></td></tr></table></figure>
<h3 id="åˆå¹¶æ•°æ®é›†"><a href="#åˆå¹¶æ•°æ®é›†" class="headerlink" title="åˆå¹¶æ•°æ®é›†"></a>åˆå¹¶æ•°æ®é›†</h3><p>pandaså¯¹è±¡ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼è¿›è¡Œåˆå¹¶ï¼š</p>
<ul>
<li>pandas.mergeå¯æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªé”®å°†ä¸åŒDataFrameä¸­çš„è¡Œè¿æ¥èµ·æ¥ã€‚</li>
<li>pandas.concatå¯ä»¥æ²¿ç€ä¸€æ¡è½´å°†å¤šä¸ªå¯¹è±¡å †å åˆ°ä¸€èµ·ã€‚</li>
<li>å®ä¾‹æ–¹æ³•combine_firstå¯ä»¥å°†é‡å¤æ•°æ®æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡ä¸­çš„å€¼å¡«å……å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„ç¼ºå¤±å€¼ã€‚</li>
</ul>
<h4 id="æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶"><a href="#æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶" class="headerlink" title="æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶"></a>æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶</h4><p>æ•°æ®é›†çš„åˆå¹¶ï¼ˆmergeï¼‰æˆ–è¿æ¥ï¼ˆjoinï¼‰è¿ç®—æ˜¯é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªé”®å°†è¡Œè¿æ¥èµ·æ¥çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>],<span class="string">'data1'</span>: range(<span class="number">7</span>)&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>],<span class="string">'data2'</span>: range(<span class="number">3</span>)&#125;)</span><br><span class="line"><span class="comment"># å¤šå¯¹ä¸€çš„åˆå¹¶</span></span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œmergeä¼šå°†é‡å åˆ—çš„åˆ—åå½“åšé”®</span></span><br><span class="line">pd.merge(df1, df2)</span><br><span class="line"><span class="comment"># åˆ—åå¯ä»¥æŒ‡å®š</span></span><br><span class="line">pd.merge(df1, df2, on=<span class="string">'key'</span>)</span><br><span class="line"><span class="comment">#å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„åˆ—åä¸åŒï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«è¿›è¡ŒæŒ‡å®š</span></span><br><span class="line">pd.merge(df3, df4, left_on=<span class="string">'lkey'</span>, right_on=<span class="string">'rkey'</span>)</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œmergeåšçš„æ˜¯â€œå†…è¿æ¥â€ï¼›ç»“æœä¸­çš„é”®æ˜¯äº¤é›†</span></span><br><span class="line"><span class="comment"># ä»–æ–¹å¼è¿˜æœ‰"left"ã€"right"ä»¥åŠ"outer"ã€‚å¤–è¿æ¥æ±‚å–çš„æ˜¯é”®çš„å¹¶é›†ï¼Œç»„åˆäº†å·¦è¿æ¥å’Œå³è¿æ¥çš„æ•ˆæœ</span></span><br><span class="line">pd.merge(df1, df2, how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e49b3341f4a3c90e.png?imageMogr2/auto-orient/strip|imageView2/2/w/739/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šå¯¹å¤šçš„åˆå¹¶</span></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>], <span class="string">'data1'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>],<span class="string">'data2'</span>: range(<span class="number">5</span>)&#125;)</span><br><span class="line">pd.merge(df1, df2, on=<span class="string">'key'</span>, how=<span class="string">'left'</span>)</span><br><span class="line"><span class="comment"># å¤šå¯¹å¤šè¿æ¥äº§ç”Ÿçš„æ˜¯è¡Œçš„ç¬›å¡å°”ç§¯</span></span><br><span class="line"><span class="comment"># ç”±äºå·¦è¾¹çš„DataFrameæœ‰3ä¸ª"b"è¡Œï¼Œå³è¾¹çš„æœ‰2ä¸ªï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœä¸­å°±æœ‰6ä¸ª"b"è¡Œã€‚</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®å¤šä¸ªé”®è¿›è¡Œåˆå¹¶ï¼Œä¼ å…¥ä¸€ä¸ªç”±åˆ—åç»„æˆçš„åˆ—è¡¨</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'foo'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], <span class="string">'key2'</span>: [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>], <span class="string">'lval'</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'foo'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'bar'</span>],<span class="string">'key2'</span>: [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>],<span class="string">'rval'</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]&#125;)</span><br><span class="line">pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p>åˆå¹¶è¿ç®—å¯¹é‡å¤åˆ—åçš„å¤„ç†ï¼šmergeæœ‰ä¸€ä¸ªæ›´å®ç”¨çš„suffixesé€‰é¡¹ï¼Œç”¨äºæŒ‡å®šé™„åŠ åˆ°å·¦å³ä¸¤ä¸ªDataFrameå¯¹è±¡çš„é‡å åˆ—åä¸Šçš„å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.merge(left, right, on=<span class="string">'key1'</span>)</span><br><span class="line">pd.merge(left, right, on=<span class="string">'key1'</span>, suffixes=(<span class="string">'_left'</span>, <span class="string">'_right'</span>))</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-35ca716a4f1b8475.png?imageMogr2/auto-orient/strip|imageView2/2/w/1180/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c86672e733ceccd9.png?imageMogr2/auto-orient/strip|imageView2/2/w/1180/format/webp" alt="img"></p>
<h4 id="ç´¢å¼•ä¸Šçš„åˆå¹¶"><a href="#ç´¢å¼•ä¸Šçš„åˆå¹¶" class="headerlink" title="ç´¢å¼•ä¸Šçš„åˆå¹¶"></a>ç´¢å¼•ä¸Šçš„åˆå¹¶</h4><p>æœ‰æ—¶å€™ï¼ŒDataFrameä¸­çš„è¿æ¥é”®ä½äºå…¶ç´¢å¼•ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä¼ å…¥left_index=Trueæˆ–right_index=Trueï¼ˆæˆ–ä¸¤ä¸ªéƒ½ä¼ ï¼‰ä»¥è¯´æ˜ç´¢å¼•åº”è¯¥è¢«ç”¨ä½œè¿æ¥é”®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">left1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>],<span class="string">'value'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line">right1 = pd.DataFrame(&#123;<span class="string">'group_val'</span>: [<span class="number">3.5</span>, <span class="number">7</span>]&#125;, index=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line">pd.merge(left1, right1, left_on=<span class="string">'key'</span>, right_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå±‚æ¬¡åŒ–ç´¢å¼•çš„æ•°æ®ï¼Œç´¢å¼•çš„åˆå¹¶é»˜è®¤æ˜¯å¤šé”®åˆå¹¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lefth = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],<span class="string">'key2'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>], <span class="string">'data'</span>: np.arange(<span class="number">5.</span>)&#125;)</span><br><span class="line">righth = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">6</span>, <span class="number">2</span>)),index=[[<span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>,<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>],[<span class="number">2001</span>, <span class="number">2000</span>, <span class="number">2000</span>, <span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>]],  columns=[<span class="string">'event1'</span>, <span class="string">'event2'</span>])</span><br><span class="line"><span class="comment"># ä»¥åˆ—è¡¨çš„å½¢å¼æŒ‡æ˜ç”¨ä½œåˆå¹¶é”®çš„å¤šä¸ªåˆ—</span></span><br><span class="line">pd.merge(lefth, righth, left_on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], right_index=<span class="literal">True</span>)</span><br><span class="line">pd.merge(lefth, righth, left_on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], right_index=<span class="literal">True</span>,how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p>DataFrameè¿˜æœ‰ä¸€ä¸ªä¾¿æ·çš„joinå®ä¾‹æ–¹æ³•ï¼Œå®ƒèƒ½æ›´ä¸ºæ–¹ä¾¿åœ°å®ç°æŒ‰ç´¢å¼•åˆå¹¶ã€‚å®ƒè¿˜å¯ç”¨äºåˆå¹¶å¤šä¸ªå¸¦æœ‰ç›¸åŒæˆ–ç›¸ä¼¼ç´¢å¼•çš„DataFrameå¯¹è±¡ï¼Œä½†è¦æ±‚æ²¡æœ‰é‡å çš„åˆ—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŒæ—¶ä½¿ç”¨åˆå¹¶åŒæ–¹çš„ç´¢å¼•</span></span><br><span class="line">pd.merge(left2, right2, how=<span class="string">'outer'</span>, left_index=<span class="literal">True</span>, right_index=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># joiné»˜è®¤ä½¿ç”¨çš„æ˜¯å·¦è¿æ¥ï¼Œä¿ç•™å·¦è¾¹è¡¨çš„è¡Œç´¢å¼•</span></span><br><span class="line">left2.join(right2, how=<span class="string">'outer'</span>)</span><br><span class="line"><span class="comment"># æ”¯æŒåœ¨è°ƒç”¨çš„DataFrameçš„åˆ—ä¸Šï¼Œè¿æ¥ä¼ é€’çš„DataFrameç´¢å¼•</span></span><br><span class="line">left1.join(right1, on=<span class="string">'key'</span>)</span><br><span class="line"><span class="comment"># ç›¸å½“äº</span></span><br><span class="line">pd.merge(left1,right1, left_on=<span class="string">'key'</span>, right_index=<span class="literal">True</span>,how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è½´å‘è¿æ¥"><a href="#è½´å‘è¿æ¥" class="headerlink" title="è½´å‘è¿æ¥"></a>è½´å‘è¿æ¥</h4><p>è¿æ¥ï¼ˆconcatenationï¼‰ã€ç»‘å®šï¼ˆbindingï¼‰æˆ–å †å ï¼ˆstackingï¼‰ã€‚NumPyçš„concatenationå‡½æ•°å¯ä»¥ç”¨NumPyæ•°ç»„æ¥åš</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">np.concatenate([arr, arr], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºpandaså¯¹è±¡ï¼ˆå¦‚Serieså’ŒDataFrameï¼‰ï¼Œè¿˜éœ€è¦è€ƒè™‘ä»¥ä¸‹è¿™äº›æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœå¯¹è±¡åœ¨å…¶å®ƒè½´ä¸Šçš„ç´¢å¼•ä¸åŒï¼Œåº”è¯¥åˆå¹¶è¿™äº›è½´çš„ä¸åŒå…ƒç´ è¿˜æ˜¯åªä½¿ç”¨äº¤é›†ï¼Ÿ</li>
<li>è¿æ¥çš„æ•°æ®é›†æ˜¯å¦éœ€è¦åœ¨ç»“æœå¯¹è±¡ä¸­å¯è¯†åˆ«ï¼Ÿ</li>
<li>è¿æ¥è½´ä¸­ä¿å­˜çš„æ•°æ®æ˜¯å¦éœ€è¦ä¿ç•™ï¼Ÿè®¸å¤šæƒ…å†µä¸‹ï¼ŒDataFrameé»˜è®¤çš„æ•´æ•°æ ‡ç­¾æœ€å¥½åœ¨è¿æ¥æ—¶åˆ æ‰ã€‚</li>
</ul>
<p>pandasçš„concatå‡½æ•°æä¾›äº†ä¸€ç§èƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜çš„å¯é æ–¹å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s1 = pd.Series([<span class="number">0</span>, <span class="number">1</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line">s2 = pd.Series([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</span><br><span class="line">s3 = pd.Series([<span class="number">5</span>, <span class="number">6</span>], index=[<span class="string">'f'</span>, <span class="string">'g'</span>])</span><br><span class="line">pd.concat([s1, s2, s3])</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œconcatæ˜¯åœ¨axis=0ä¸Šå·¥ä½œçš„ï¼Œæœ€ç»ˆäº§ç”Ÿä¸€ä¸ªæ–°çš„Seriesã€‚å¦‚æœä¼ å…¥axis=1ï¼Œåˆ™ç»“æœå°±ä¼šå˜æˆä¸€ä¸ªDataFrameï¼ˆaxis=1æ˜¯åˆ—ï¼‰</span></span><br><span class="line">s4 = pd.concat([s1, s3])</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>)</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>, join=<span class="string">'inner'</span>)</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>, join_axes=[[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>]])</span><br><span class="line"><span class="comment"># åœ¨è¿æ¥è½´ä¸Šåˆ›å»ºä¸€ä¸ªå±‚æ¬¡åŒ–ç´¢å¼•</span></span><br><span class="line">result = pd.concat([s1, s1, s3], keys=[<span class="string">'one'</span>,<span class="string">'two'</span>, <span class="string">'three'</span>])</span><br><span class="line">pd.concat([s1, s2, s3], axis=<span class="number">1</span>, keys=[<span class="string">'one'</span>,<span class="string">'two'</span>, <span class="string">'three'</span>])</span><br><span class="line"><span class="comment"># å¦‚æœä¼ å…¥çš„ä¸æ˜¯åˆ—è¡¨è€Œæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œåˆ™å­—å…¸çš„é”®å°±ä¼šè¢«å½“åškeysé€‰é¡¹çš„å€¼</span></span><br><span class="line">pd.concat(&#123;<span class="string">'level1'</span>: df1, <span class="string">'level2'</span>: df2&#125;, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨nameså‚æ•°å‘½ååˆ›å»ºçš„è½´çº§åˆ«</span></span><br><span class="line">pd.concat([df1, df2], axis=<span class="number">1</span>, keys=[<span class="string">'level1'</span>, <span class="string">'level2'</span>],names=[<span class="string">'upper'</span>, <span class="string">'lower'</span>])</span><br><span class="line"><span class="comment"># DataFrameçš„è¡Œç´¢å¼•ä¸åŒ…å«ä»»ä½•ç›¸å…³æ•°æ®ï¼Œç›´æ¥åˆå¹¶index</span></span><br><span class="line">pd.concat([df1, df2], ignore_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-339436563b519415.png?imageMogr2/auto-orient/strip|imageView2/2/w/1167/format/webp" alt="img"></p>
<h4 id="åˆå¹¶é‡å æ•°æ®"><a href="#åˆå¹¶é‡å æ•°æ®" class="headerlink" title="åˆå¹¶é‡å æ•°æ®"></a>åˆå¹¶é‡å æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = pd.Series([np.nan, <span class="number">2.5</span>, np.nan, <span class="number">3.5</span>, <span class="number">4.5</span>, np.nan], index=[<span class="string">'f'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>])</span><br><span class="line">b = pd.Series(np.arange(len(a), dtype=np.float64), index=[<span class="string">'f'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>])</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬11ç« -æ—¶é—´åºåˆ—"><a href="#ç¬¬11ç« -æ—¶é—´åºåˆ—" class="headerlink" title="ç¬¬11ç«  æ—¶é—´åºåˆ—"></a>ç¬¬11ç«  æ—¶é—´åºåˆ—</h2><p>æ—¶é—´åºåˆ—æ•°æ®çš„æ„ä¹‰å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>æ—¶é—´æˆ³ï¼ˆtimestampï¼‰ï¼Œç‰¹å®šçš„æ—¶åˆ»ã€‚</li>
<li>å›ºå®šæ—¶æœŸï¼ˆperiodï¼‰ï¼Œå¦‚2007å¹´1æœˆæˆ–2010å¹´å…¨å¹´ã€‚</li>
<li>æ—¶é—´é—´éš”ï¼ˆintervalï¼‰ï¼Œç”±èµ·å§‹å’Œç»“æŸæ—¶é—´æˆ³è¡¨ç¤ºã€‚æ—¶æœŸï¼ˆperiodï¼‰å¯ä»¥è¢«çœ‹åšé—´éš”ï¼ˆintervalï¼‰çš„ç‰¹ä¾‹ã€‚</li>
<li>å®éªŒæˆ–è¿‡ç¨‹æ—¶é—´ï¼Œæ¯ä¸ªæ—¶é—´ç‚¹éƒ½æ˜¯ç›¸å¯¹äºç‰¹å®šèµ·å§‹æ—¶é—´çš„ä¸€ä¸ªåº¦é‡ã€‚ä¾‹å¦‚ï¼Œä»æ”¾å…¥çƒ¤ç®±æ—¶èµ·ï¼Œæ¯ç§’é’Ÿé¥¼å¹²çš„ç›´å¾„ã€‚</li>
</ul>
<h3 id="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·"><a href="#æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·"></a>æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># ä»¥æ¯«ç§’å½¢å¼å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">now = datetime.now() <span class="comment"># datetime.datetime(2017, 9, 25, 14, 5, 52, 72973)</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line">start = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>)</span><br><span class="line">datetime.timedelta(<span class="number">926</span>, <span class="number">56700</span>) <span class="comment"># day and second</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4af261a305a70aeb.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h4 id="å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢"><a href="#å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢"></a>å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢</h4><p><code>datetime.strptime</code>æ˜¯é€šè¿‡å·²çŸ¥æ ¼å¼è¿›è¡Œæ—¥æœŸè§£æçš„æœ€ä½³æ–¹å¼ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦ç¼–å†™æ ¼å¼å®šä¹‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stamp = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">str(stamp) <span class="comment"># '2011-01-03 00:00:00'</span></span><br><span class="line">stamp.strftime(<span class="string">'%Y-%m-%d'</span>) <span class="comment">#'2011-01-03'</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-50c751823754df58.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-de0181e1f6b45eaf.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">value = <span class="string">'2011-01-03'</span></span><br><span class="line">datetime.strptime(value, <span class="string">'%Y-%m-%d'</span>) <span class="comment"># datetime.datetime(2011, 1, 3, 0, 0)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dateutil.parser <span class="keyword">import</span> parse</span><br><span class="line">parse(<span class="string">'2011-01-03'</span>) <span class="comment"># datetime.datetime(2011, 1, 3, 0, 0)</span></span><br><span class="line">parse(<span class="string">'Jan 31, 1997 10:45 PM'</span>)</span><br><span class="line">parse(<span class="string">'6/12/2011'</span>, dayfirst=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›å¸¸è§çš„æ—¥æœŸæ ¼å¼å¯ä»¥ç”¨dateutilè¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…ä¸­çš„parser.parseæ–¹æ³•ã€‚</p>
<p>pandasé€šå¸¸æ˜¯ç”¨äºå¤„ç†æˆç»„æ—¥æœŸçš„ï¼Œä¸ç®¡è¿™äº›æ—¥æœŸæ˜¯DataFrameçš„è½´ç´¢å¼•è¿˜æ˜¯åˆ—ã€‚to_datetimeæ–¹æ³•å¯ä»¥è§£æå¤šç§ä¸åŒçš„æ—¥æœŸè¡¨ç¤ºå½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">datestrs = [<span class="string">'2011-07-06 12:00:00'</span>, <span class="string">'2011-08-06 00:00:00'</span>]</span><br><span class="line">pd.to_datetime(datestrs) <span class="comment"># DatetimeIndex(['2011-07-06 12:00:00', '2011-08-06 00:00:00'], dtype='datetime64[ns]', freq=None)</span></span><br></pre></td></tr></table></figure>
<p>NaTï¼ˆNot a Timeï¼‰æ˜¯pandasä¸­æ—¶é—´æˆ³æ•°æ®çš„nullå€¼ã€‚</p>
<ul>
<li><p>æ³¨æ„ï¼šdateutil.parseræ˜¯ä¸€ä¸ªå®ç”¨ä½†ä¸å®Œç¾çš„å·¥å…·ã€‚æ¯”å¦‚è¯´ï¼Œå®ƒä¼šæŠŠä¸€äº›åŸæœ¬ä¸æ˜¯æ—¥æœŸçš„å­—ç¬¦ä¸²è®¤ä½œæ˜¯æ—¥æœŸï¼ˆæ¯”å¦‚â€42â€ä¼šè¢«è§£æä¸º2042å¹´çš„ä»Šå¤©ï¼‰ã€‚</p>
<p>ç‰¹å®šäºå½“å‰ç¯å¢ƒï¼ˆä½äºä¸åŒå›½å®¶æˆ–ä½¿ç”¨ä¸åŒè¯­è¨€çš„ç³»ç»Ÿï¼‰çš„æ—¥æœŸæ ¼å¼</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cf0119398273e2b0.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h3 id="æ—¶é—´åºåˆ—åŸºç¡€"><a href="#æ—¶é—´åºåˆ—åŸºç¡€" class="headerlink" title="æ—¶é—´åºåˆ—åŸºç¡€"></a>æ—¶é—´åºåˆ—åŸºç¡€</h3><p>pandasç”¨NumPyçš„datetime64æ•°æ®ç±»å‹ä»¥çº³ç§’å½¢å¼å­˜å‚¨æ—¶é—´æˆ³ã€‚</p>
<p>datetimeå¯¹è±¡ç”¨ä½œindexæ—¶ï¼Œå®é™…ä¸Šè¢«æ”¾åœ¨ä¸€ä¸ªDatetimeIndexä¸­ï¼Œå…¶ä¸­çš„å„ä¸ªæ ‡é‡å€¼æ˜¯pandasçš„Timestampå¯¹è±¡ã€‚</p>
<h4 id="ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ "><a href="#ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ " class="headerlink" title="ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ "></a>ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ </h4><p>æ ¹æ®æ ‡ç­¾ç´¢å¼•é€‰å–æ•°æ®æ—¶ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stamp = ts.index[<span class="number">2</span>] </span><br><span class="line">ts[stamp]</span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™ç§æ ¼å¼ä¹Ÿå¯ä»¥</span></span><br><span class="line">ts[<span class="string">'1/10/2011'</span>]</span><br><span class="line">ts[<span class="string">'20110110'</span>]</span><br><span class="line"><span class="comment"># å¯¹äºè¾ƒé•¿çš„æ—¶é—´åºåˆ—ï¼Œåªéœ€ä¼ å…¥â€œå¹´â€æˆ–â€œå¹´æœˆâ€å³å¯è½»æ¾é€‰å–æ•°æ®çš„åˆ‡ç‰‡</span></span><br><span class="line">longer_ts = pd.Series(np.random.randn(<span class="number">1000</span>),index=pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">1000</span>))</span><br><span class="line">longer_ts[<span class="string">'2001'</span>]</span><br><span class="line">longer_ts[<span class="string">'2001-05'</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨datetimeå¯¹è±¡è¿›è¡Œåˆ‡ç‰‡</span></span><br><span class="line">ts[datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>):]</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ç”¨ä¸å­˜åœ¨äºè¯¥æ—¶é—´åºåˆ—ä¸­çš„æ—¶é—´æˆ³å¯¹å…¶è¿›è¡Œåˆ‡ç‰‡ï¼ˆå³èŒƒå›´æŸ¥è¯¢ï¼‰</span></span><br><span class="line">ts[<span class="string">'1/6/2011'</span>:<span class="string">'1/11/2011'</span>] <span class="comment"># äº§ç”Ÿçš„æ˜¯åŸæ—¶é—´åºåˆ—çš„è§†å›¾</span></span><br><span class="line">ts.truncate(after=<span class="string">'1/9/2011'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—"><a href="#å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—" class="headerlink" title="å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—"></a>å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—</h4><p>å¤šä¸ªè§‚æµ‹æ•°æ®è½åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹ä¸Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dates = pd.DatetimeIndex([<span class="string">'1/1/2000'</span>, <span class="string">'1/2/2000'</span>, <span class="string">'1/2/2000'</span>,<span class="string">'1/2/2000'</span>, <span class="string">'1/3/2000'</span>])</span><br><span class="line">dup_ts = pd.Series(np.arange(<span class="number">5</span>), index=dates)</span><br><span class="line">dup_ts.index.is_unique</span><br><span class="line"><span class="comment"># å¯¹å…·æœ‰éå”¯ä¸€æ—¶é—´æˆ³çš„æ•°æ®è¿›è¡Œèšåˆ</span></span><br><span class="line">grouped = dup_ts.groupby(level=<span class="number">0</span>)</span><br><span class="line">grouped.mean()</span><br><span class="line">grouped.count()</span><br></pre></td></tr></table></figure>
<h3 id="æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨"><a href="#æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨" class="headerlink" title="æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨"></a>æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨</h3><p>pandasä¸­çš„åŸç”Ÿæ—¶é—´åºåˆ—æ²¡æœ‰å›ºå®šçš„é¢‘ç‡,ä¸€èˆ¬è¢«è®¤ä¸ºæ˜¯ä¸è§„åˆ™çš„ã€‚ä½†pandasæœ‰ä¸€æ•´å¥—æ ‡å‡†æ—¶é—´åºåˆ—é¢‘ç‡ä»¥åŠç”¨äºé‡é‡‡æ ·ã€é¢‘ç‡æ¨æ–­ã€ç”Ÿæˆå›ºå®šé¢‘ç‡æ—¥æœŸèŒƒå›´çš„å·¥å…·ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">resampler = ts.resample(<span class="string">'D'</span>)</span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²â€œDâ€æ˜¯æ¯å¤©çš„æ„æ€</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆæ—¥æœŸèŒƒå›´"><a href="#ç”Ÿæˆæ—¥æœŸèŒƒå›´" class="headerlink" title="ç”Ÿæˆæ—¥æœŸèŒƒå›´"></a>ç”Ÿæˆæ—¥æœŸèŒƒå›´</h4><p><code>pandas.date_range</code>å¯ç”¨äºæ ¹æ®æŒ‡å®šçš„é¢‘ç‡ç”ŸæˆæŒ‡å®šé•¿åº¦çš„DatetimeIndex.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2012-04-01'</span>, <span class="string">'2012-06-01'</span>)</span><br><span class="line">pd.date_range(start=<span class="string">'2012-04-01'</span>, periods=<span class="number">20</span>)</span><br><span class="line">pd.date_range(end=<span class="string">'2012-06-01'</span>, periods=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªç”±æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥ç»„æˆçš„æ—¥æœŸç´¢å¼•</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-12-01'</span>, freq=<span class="string">'BM'</span>) <span class="comment">#"BM"é¢‘ç‡business end of month</span></span><br></pre></td></tr></table></figure>
<p>date_rangeé»˜è®¤ä¼šä¿ç•™èµ·å§‹å’Œç»“æŸæ—¶é—´æˆ³çš„æ—¶é—´ä¿¡æ¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2012-05-02 12:56:31'</span>, periods=<span class="number">5</span>)</span><br><span class="line"><span class="comment"># æ¯ä¸ªæ—¥æœŸéƒ½æœ‰12:56:31,å¯ä»¥å…³æ‰</span></span><br><span class="line">pd.date_range(<span class="string">'2012-05-02 12:56:31'</span>, periods=<span class="number">5</span>, normalize=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="é¢‘ç‡å’Œæ—¥æœŸåç§»é‡"><a href="#é¢‘ç‡å’Œæ—¥æœŸåç§»é‡" class="headerlink" title="é¢‘ç‡å’Œæ—¥æœŸåç§»é‡"></a>é¢‘ç‡å’Œæ—¥æœŸåç§»é‡</h4><p>pandasä¸­çš„é¢‘ç‡æ˜¯ç”±ä¸€ä¸ªåŸºç¡€é¢‘ç‡ï¼ˆbase frequencyï¼‰å’Œä¸€ä¸ªä¹˜æ•°ç»„æˆçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> Hour, Minute</span><br><span class="line">hour = Hour()</span><br><span class="line">four_hours = Hour(<span class="number">4</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨åˆ«å"H"æˆ–"4H"</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-01-03 23:59'</span>, freq=<span class="string">'4h'</span>)</span><br><span class="line"><span class="comment"># åç§»é‡å¯¹è±¡éƒ½å¯é€šè¿‡åŠ æ³•è¿›è¡Œè¿æ¥</span></span><br><span class="line">Hour(<span class="number">2</span>) + Minute(<span class="number">30</span>) <span class="comment"># &lt;150 * Minutes&gt;</span></span><br><span class="line"><span class="comment"># ä¼ å…¥é¢‘ç‡å­—ç¬¦ä¸²</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, periods=<span class="number">10</span>, freq=<span class="string">'1h30min'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c8614ddbd10793ca.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-8da46ba96544b071.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-3ca410609195edc4.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h4 id="WOMæ—¥æœŸ"><a href="#WOMæ—¥æœŸ" class="headerlink" title="WOMæ—¥æœŸ"></a>WOMæ—¥æœŸ</h4><p>WOMï¼ˆWeek Of Monthï¼‰æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„é¢‘ç‡ç±»ï¼Œè·å¾—è¯¸å¦‚â€œæ¯æœˆç¬¬3ä¸ªæ˜ŸæœŸäº”â€ä¹‹ç±»çš„æ—¥æœŸã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'2012-01-01'</span>, <span class="string">'2012-09-01'</span>, freq=<span class="string">'WOM-3FRI'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®"><a href="#ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®" class="headerlink" title="ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®"></a>ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®</h4><p>ç§»åŠ¨ï¼ˆshiftingï¼‰æŒ‡çš„æ˜¯æ²¿ç€æ—¶é—´è½´å°†æ•°æ®å‰ç§»æˆ–åç§»ã€‚Serieså’ŒDataFrameéƒ½æœ‰shiftæ–¹æ³•ç”¨äºæ‰§è¡Œå•çº¯çš„å‰ç§»æˆ–åç§»æ“ä½œï¼Œ<strong>ä¿æŒç´¢å¼•ä¸å˜</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ts = pd.Series(np.random.randn(<span class="number">4</span>),index=pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">4</span>, freq=<span class="string">'M'</span>))</span><br><span class="line"><span class="comment"># æ•°æ®ä½ç§»ï¼Œä¼šåœ¨æ—¶é—´åºåˆ—çš„å‰é¢æˆ–åé¢äº§ç”Ÿç¼ºå¤±æ•°æ®</span></span><br><span class="line">ts.shift(<span class="number">2</span>)</span><br><span class="line">ts.shift(<span class="number">-2</span>)</span><br><span class="line"><span class="comment"># å®ç°å¯¹æ—¶é—´æˆ³è¿›è¡Œä½ç§»è€Œä¸æ˜¯å¯¹æ•°æ®è¿›è¡Œç®€å•ä½ç§»</span></span><br><span class="line">ts.shift(<span class="number">2</span>, freq=<span class="string">'M'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»"><a href="#é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»" class="headerlink" title="é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»"></a>é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»</h4><p>pandasçš„æ—¥æœŸåç§»é‡è¿˜å¯ä»¥ç”¨åœ¨datetimeæˆ–Timestampå¯¹è±¡ä¸Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> Day, MonthEnd</span><br><span class="line">now = datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">17</span>)</span><br><span class="line">now + <span class="number">3</span> * Day() <span class="comment"># Timestamp('2011-11-20 00:00:00')</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨é”šç‚¹åç§»é‡</span></span><br><span class="line">now + MonthEnd() <span class="comment"># Timestamp('2011-12-31 00:00:00')</span></span><br><span class="line"><span class="comment"># é€šè¿‡é”šç‚¹åç§»é‡çš„rollforwardå’Œrollbackæ–¹æ³•ï¼Œå¯æ˜ç¡®åœ°å°†æ—¥æœŸå‘å‰æˆ–å‘åâ€œæ»šåŠ¨â€</span></span><br><span class="line">offset = MonthEnd()</span><br><span class="line">offset.rollforward(now) <span class="comment"># Timestamp('2011-11-30 00:00:00')</span></span><br><span class="line">offset.rollback(now) <span class="comment"># Timestamp('2011-10-31 00:00:00')</span></span><br></pre></td></tr></table></figure>
<h3 id="æ—¶åŒºå¤„ç†"><a href="#æ—¶åŒºå¤„ç†" class="headerlink" title="æ—¶åŒºå¤„ç†"></a>æ—¶åŒºå¤„ç†</h3><h4 id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢"><a href="#æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢" class="headerlink" title="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢"></a>æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢</h4><p>åœ¨Pythonä¸­ï¼Œæ—¶åŒºä¿¡æ¯æ¥è‡ªç¬¬ä¸‰æ–¹åº“pytzï¼Œå®ƒä½¿Pythonå¯ä»¥ä½¿ç”¨Olsonæ•°æ®åº“ï¼ˆæ±‡ç¼–äº†ä¸–ç•Œæ—¶åŒºä¿¡æ¯ï¼‰ã€‚pandasåŒ…è£…äº†pytzçš„åŠŸèƒ½ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pytz</span><br><span class="line">pytz.common_timezones[<span class="number">-5</span>:]<span class="comment"># ['US/Eastern', 'US/Hawaii', 'US/Mountain', 'US/Pacific', 'UTC']</span></span><br><span class="line">tz = pytz.timezone(<span class="string">'America/New_York'</span>) <span class="comment"># &lt;DstTzInfo 'America/New_York' LMT-1 day, 19:04:00 STD&gt;</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œpandasä¸­çš„æ—¶é—´åºåˆ—æ˜¯å•çº¯ï¼ˆnaiveï¼‰çš„æ—¶åŒº,å…¶ç´¢å¼•çš„tzå­—æ®µä¸ºNoneã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'3/9/2012 9:30'</span>, periods=<span class="number">6</span>, freq=<span class="string">'D'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">print(ts.index.tz) <span class="comment"># None</span></span><br><span class="line"><span class="comment"># å¯ä»¥æŒ‡å®šæ—¶åŒº</span></span><br><span class="line">pd.date_range(<span class="string">'3/9/2012 9:30'</span>, periods=<span class="number">10</span>, freq=<span class="string">'D'</span>, tz=<span class="string">'UTC'</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡tz_localizeæ–¹æ³•ä»å•çº¯è½¬æ¢åˆ°æœ¬åœ°åŒ–</span></span><br><span class="line">ts_utc = ts.tz_localize(<span class="string">'UTC'</span>)</span><br><span class="line"><span class="comment"># è¢«æœ¬åœ°åŒ–åˆ°æŸä¸ªç‰¹å®šæ—¶åŒºï¼Œå°±å¯ä»¥ç”¨tz_convertå°†å…¶è½¬æ¢åˆ°åˆ«çš„æ—¶åŒº</span></span><br><span class="line">ts_utc.tz_convert(<span class="string">'America/New_York'</span>)</span><br><span class="line"><span class="comment"># ç‹¬ç«‹çš„Timestampå¯¹è±¡ä¹Ÿèƒ½è¢«ä»å•çº¯å‹ï¼ˆnaiveï¼‰æœ¬åœ°åŒ–ä¸ºæ—¶åŒºæ„è¯†å‹ï¼ˆtime zone-awareï¼‰</span></span><br><span class="line">stamp = pd.Timestamp(<span class="string">'2011-03-12 04:00'</span>)</span><br><span class="line">stamp_utc = stamp.tz_localize(<span class="string">'utc'</span>)</span><br><span class="line">stamp_utc.tz_convert(<span class="string">'America/New_York'</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸¤ä¸ªæ—¶é—´åºåˆ—çš„æ—¶åŒºä¸åŒï¼Œåœ¨å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·æ—¶ï¼Œæœ€ç»ˆç»“æœå°±ä¼šæ˜¯UTC</p>
 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'3/7/2012 9:30'</span>, periods=<span class="number">10</span>, freq=<span class="string">'B'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">ts1 = ts[:<span class="number">7</span>].tz_localize(<span class="string">'Europe/London'</span>)</span><br><span class="line">ts2 = ts1[<span class="number">2</span>:].tz_convert(<span class="string">'Europe/Moscow'</span>)</span><br><span class="line">result = ts1 + ts2</span><br></pre></td></tr></table></figure>
<h3 id="æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—"><a href="#æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—" class="headerlink" title="æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—"></a>æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—</h3><p>æ—¶æœŸï¼ˆperiodï¼‰è¡¨ç¤ºçš„æ˜¯æ—¶é—´åŒºé—´ï¼Œæ¯”å¦‚æ•°æ—¥ã€æ•°æœˆã€æ•°å­£ã€æ•°å¹´ç­‰ã€‚Periodç±»æ‰€è¡¨ç¤ºçš„å°±æ˜¯è¿™ç§æ•°æ®ç±»å‹ï¼Œå…¶æ„é€ å‡½æ•°éœ€è¦ç”¨åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•´æ•°ï¼Œä»¥åŠé¢‘ç‡ç¬¦å·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = pd.Period(<span class="number">2007</span>, freq=<span class="string">'A-DEC'</span>) <span class="comment">#è¡¨ç¤ºçš„æ˜¯ä»2007å¹´1æœˆ1æ—¥åˆ°2007å¹´12æœˆ31æ—¥ä¹‹é—´çš„æ•´æ®µæ—¶é—´</span></span><br><span class="line"><span class="comment"># å¯¹Periodå¯¹è±¡åŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªæ•´æ•°å³å¯è¾¾åˆ°æ ¹æ®å…¶é¢‘ç‡è¿›è¡Œä½ç§»çš„æ•ˆæœ</span></span><br><span class="line">p + <span class="number">5</span>  <span class="comment"># Period('2012', 'A-DEC')</span></span><br><span class="line"><span class="comment"># period_rangeå‡½æ•°å¯ç”¨äºåˆ›å»ºè§„åˆ™çš„æ—¶æœŸèŒƒå›´</span></span><br><span class="line">rng = pd.period_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-06-30'</span>, freq=<span class="string">'M'</span>) <span class="comment"># è¿”å›PeriodIndexå¯¹è±¡</span></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨PeriodIndexç±»ï¼š</span></span><br><span class="line">values = [<span class="string">'2001Q3'</span>, <span class="string">'2002Q2'</span>, <span class="string">'2003Q1'</span>]</span><br><span class="line">index = pd.PeriodIndex(values, freq=<span class="string">'Q-DEC'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ—¶æœŸçš„é¢‘ç‡è½¬æ¢"><a href="#æ—¶æœŸçš„é¢‘ç‡è½¬æ¢" class="headerlink" title="æ—¶æœŸçš„é¢‘ç‡è½¬æ¢"></a>æ—¶æœŸçš„é¢‘ç‡è½¬æ¢</h4><p>Periodå’ŒPeriodIndexå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡å…¶asfreqæ–¹æ³•è¢«è½¬æ¢æˆåˆ«çš„é¢‘ç‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = pd.Period(<span class="string">'2007'</span>, freq=<span class="string">'A-DEC'</span>)<span class="comment"># Period('2007', 'A-DEC')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, how=<span class="string">'start'</span>)<span class="comment"># Period('2007-01', 'M')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, how=<span class="string">'end'</span>)<span class="comment">#  Period('2007-12', 'M')</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">p = pd.Period(<span class="string">'2007'</span>, freq=<span class="string">'A-JUN'</span>)</span><br><span class="line">p.asfreq(<span class="string">'M'</span>, <span class="string">'start'</span>)  <span class="comment"># Period('2006-07', 'M')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, <span class="string">'end'</span>) <span class="comment"># Period('2007-06', 'M')</span></span><br><span class="line"><span class="comment"># å®Œæ•´çš„PeriodIndexæˆ–TimeSeriesçš„é¢‘ç‡è½¬æ¢æ–¹å¼ä¹Ÿæ˜¯å¦‚æ­¤</span></span><br><span class="line">rng = pd.period_range(<span class="string">'2006'</span>, <span class="string">'2009'</span>, freq=<span class="string">'A-DEC'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">ts.asfreq(<span class="string">'M'</span>, how=<span class="string">'start'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d201200d0e65676f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡"><a href="#æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡" class="headerlink" title="æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡"></a>æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡</h4><p>æ—¶æœŸâ€2012Q4â€æ ¹æ®è´¢å¹´æœ«çš„ä¸åŒä¼šæœ‰ä¸åŒçš„å«ä¹‰ã€‚pandasæ”¯æŒ12ç§å¯èƒ½çš„å­£åº¦å‹é¢‘ç‡ï¼Œå³Q-JANåˆ°Q-DEC.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»¥1æœˆç»“æŸçš„è´¢å¹´ä¸­ï¼Œ2012Q4æ˜¯ä»11æœˆåˆ°1æœˆï¼ˆå°†å…¶è½¬æ¢ä¸ºæ—¥å‹é¢‘ç‡å°±æ˜ç™½äº†ï¼‰</span></span><br><span class="line">p = pd.Period(<span class="string">'2012Q4'</span>, freq=<span class="string">'Q-JAN'</span>) <span class="comment"># Period('2012Q4', 'Q-JAN')</span></span><br><span class="line">p.asfreq(<span class="string">'D'</span>, <span class="string">'start'</span>) <span class="comment"># Period('2011-11-01', 'D')</span></span><br><span class="line">p.asfreq(<span class="string">'D'</span>, <span class="string">'end'</span>) <span class="comment"># Period('2012-01-31', 'D')</span></span><br><span class="line"><span class="comment"># è·å–è¯¥å­£åº¦å€’æ•°ç¬¬äºŒä¸ªå·¥ä½œæ—¥ä¸‹åˆ4ç‚¹çš„æ—¶é—´æˆ³</span></span><br><span class="line">p4pm = (p.asfreq(<span class="string">'B'</span>, <span class="string">'e'</span>) - <span class="number">1</span>).asfreq(<span class="string">'T'</span>, <span class="string">'s'</span>) + <span class="number">16</span> * <span class="number">60</span> <span class="comment"># Period('2012-01-30 16:00', 'T')</span></span><br><span class="line">p4pm.to_timestamp() <span class="comment"># Timestamp('2012-01-30 16:00:00')</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e2e1d52c9766f6ff.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰"><a href="#å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰" class="headerlink" title="å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰"></a>å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰</h4><p>to_periodæ–¹æ³•ï¼Œå¯ä»¥å°†ç”±æ—¶é—´æˆ³ç´¢å¼•çš„Serieså’ŒDataFrameå¯¹è±¡è½¬æ¢ä¸ºä»¥æ—¶æœŸç´¢å¼•ï¼Œè¦è½¬æ¢å›æ—¶é—´æˆ³ï¼Œä½¿ç”¨to_timestampã€‹</p>
<h4 id="é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex"><a href="#é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex" class="headerlink" title="é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex"></a>é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex</h4>]]></content>
      <categories>
        <category>æ•°æ®åˆ†æ</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>numpy</tag>
        <tag>pandas</tag>
      </tags>
  </entry>
</search>
