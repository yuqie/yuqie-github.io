<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Chromeä¹¦ç­¾åŒæ­¥</title>
    <url>/2020/08/27/Chrome%E4%B9%A6%E7%AD%BE%E5%90%8C%E6%AD%A5/</url>
    <content><![CDATA[<p>æœ€è¿‘ä¸€ç›´åœ¨ç”¨è‡ªå·±çš„ç¬”è®°æœ¬å·¥ä½œï¼Œæœ‰äº›ä¹¦ç­¾æ²¡æœ‰åŒæ­¥åˆ°åŠå…¬å®¤ç”µè„‘ä¸Šï¼Œä»Šå¤©åˆšå¥½åˆ°åŠå…¬å®¤äº†ï¼Œè®¾ç½®å¥½VPNï¼Œç‚¹å‡»åŒæ­¥ï¼Œç«Ÿç„¶æ²¡æœ‰åŒæ­¥ï¼Œåç»­åˆ é™¤è´¦å·å†é‡æ–°ç™»å½•ä¹Ÿæ²¡èƒ½è§£å†³ã€‚</p>
<a id="more"></a>
<p><strong>æ‰‹åŠ¨å¤§æ³•</strong>: å°†ç¬”è®°æœ¬ç”µè„‘ä¸Šçš„bookmarksï¼ˆä¸€èˆ¬åœ¨C:\Users\username\AppData\Local\Google\Chrome\User Data\Defaultï¼‰æ‹·è´åˆ°å°å¼æœºç›¸åº”çš„æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p><strong>å¦‚ä½•æ¢å¤ä¹¦ç­¾</strong>ï¼š C:\Users\username\AppData\Local\Google\Chrome\User Data\Default è¯¥ç›®å½•ä¸‹ä¸€èˆ¬ä¼šæœ‰å‡ å¤©å‰çš„å¤‡ä»½æ–‡ä»¶bookmarks.bakï¼Œå°†å…¶é‡å‘½åä¸ºbookmarkså³å¯ã€‚</p>
<p>PSï¼šæœ€ååˆ é™¤è´¦å·ï¼Œé‡æ–°æ·»åŠ æå®šäº†ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹è¡¨æ ¼</title>
    <url>/2020/07/25/Markdown%E4%B9%8B%E8%A1%A8%E6%A0%BC/</url>
    <content><![CDATA[<h2 id="1-Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•"><a href="#1-Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•" class="headerlink" title="1. Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•"></a>1. Markdownè‡ªå¸¦è¡¨æ ¼ç¼–è¾‘è¯­æ³•</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"> |æ°´æœ        | ä»·æ ¼    |  æ•°é‡  |</span><br><span class="line"> |:--------   | -----:   | :----: |</span><br><span class="line">|é¦™è•‰        | $1      |   5    |</span><br><span class="line"> |è‹¹æœ        | $1      |   6    |</span><br><span class="line"> |è‰è“        | $1      |   7    |</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>æ•ˆæœï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">æ°´æœ</th>
<th style="text-align:right">ä»·æ ¼</th>
<th style="text-align:center">æ•°é‡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">é¦™è•‰</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:left">è‹¹æœ</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:left">è‰è“</td>
<td style="text-align:right">$1</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-HTMLè¡¨æ ¼"><a href="#2-HTMLè¡¨æ ¼" class="headerlink" title="2. HTMLè¡¨æ ¼"></a>2. HTMLè¡¨æ ¼</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">caption</span>&gt;</span>å­¦ç”Ÿæˆç»©è¡¨<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>å­¦å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æœŸä¸­<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æœŸæœ«<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>001<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>88<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>90<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>002<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>96<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>97<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<th>å’Œ<td>æ ‡ç­¾éƒ½å¯ä»¥æ˜¾ç¤ºè¡¨æ ¼å•å…ƒæ ¼ã€‚ä¸åŒçš„æ˜¯<th>åœ¨å•å…ƒæ ¼ä¸­åŠ ç²—æ˜¾ç¤ºã€‚

**<th>ï¼šå®šä¹‰è¡¨æ ¼å†…çš„è¡¨å¤´å•å…ƒæ ¼ã€‚æ­¤thå…ƒç´ å†…éƒ¨çš„æ–‡æœ¬é€šå¸¸ä¼šå‘ˆç°ä¸ºç²—ä½“ã€‚**



æ•ˆæœï¼š

<table>
<caption>å­¦ç”Ÿæˆç»©è¡¨</caption>
<tr>

<th>å­¦å·</th>
<th>æœŸä¸­</th>
<th>æœŸæœ«</th>

<p>&lt;/tr&gt;</p>
<tr>

<td>001</td>
<td>88</td>
<td>90</td>

<p>&lt;/tr&gt; </p>
<tr>

<td>002</td>
<td>96</td>
<td>97</td>

<p>&lt;/tr&gt;<br>&lt;/table&gt;</p>
<h2 id="3-Excelè¡¨æ ¼"><a href="#3-Excelè¡¨æ ¼" class="headerlink" title="3. Excelè¡¨æ ¼"></a>3. Excelè¡¨æ ¼</h2><p>markdownæ”¯æŒhtmlè¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä½¿ç”¨Excelç”Ÿæˆéœ€è¦çš„è¡¨æ ¼ï¼Œå•å‡»å¦å­˜ä¸ºï¼Œé€‰æ‹©å¯¼å‡ºæ ¼å¼ä¸ºhtmlï¼Œæ­¤æ—¶å¯é€‰æ‹©æ‰€éœ€è¡¨æ ¼åŒºé—´ã€‚ä¿å­˜åæ‰“å¼€ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œå°†å…¶ä¸­<code>&lt;table&gt;&lt;/table&gt;</code> é—´çš„æ•°æ®å¤åˆ¶åˆ°markdownä¸­å³å¯ã€‚</p>
<p><strong>æ­¤æ–¹å¼å¯ä»¥åˆ›å»ºå¤æ‚çš„è¡¨æ ¼ï¼Œæ¯”å¦‚åˆå¹¶å•å…ƒæ ¼ç­‰ã€‚</strong></p>
<h2 id="4-exceltkå·¥å…·"><a href="#4-exceltkå·¥å…·" class="headerlink" title="4. exceltkå·¥å…·"></a>4. exceltkå·¥å…·</h2><p><a href="[http://fanfeilong.github.io/](http://fanfeilong.github.io/">èŒƒé£é¾™</a>)å¼€å‘çš„<a href="https://github.com/fanfeilong/exceltk" target="_blank" rel="noopener">exceltkå·¥å…·</a>ï¼Œé€šè¿‡ç®€å•çš„cmdå‘½ä»¤å³å¯æŠŠexcelè¡¨æ ¼ä¸­çš„å†…å®¹è½¬æ¢ä¸ºMarkdownæ‰€èƒ½è¯†åˆ«çš„æ ¼å¼ï¼Œç›´æ¥æŠŠè½¬æ¢åçš„mdæ ¼å¼å†…å®¹å¤åˆ¶åˆ°ç®€ä¹¦å³å¯è¾“å‡ºæœŸæœ›çš„è¡¨æ ¼æ ·å¼ã€‚</p>
<pre><code>exceltkç”¨ä¾‹
æ•´ä¸ªè¡¨æ ¼ï¼š exceltk.exe -t md -xls xxx.xls  
          exceltk.exe -t md -xls xxx.xlsx
æŒ‡å®šsheetï¼š
          exceltk.exe -t md -xls xx.xls -sheet sheetname   
          exceltk.exe -t md -xls xx.xlsx -sheet sheetnameexceltk
</code></pre><h2 id="5-åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ"><a href="#5-åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ" class="headerlink" title="5. åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ"></a>5. åœ¨çº¿Markdownè¡¨æ ¼ç”Ÿæˆ</h2><p>â€‹      <a href="https://tableconvert.com/" target="_blank" rel="noopener">tableconvert</a>å¯ä»¥åœ¨çº¿åˆ¶ä½œè¡¨æ ¼ï¼Œå¹¶å°†å…¶è½¬ä¸ºMarkdownï¼ŒCSVï¼ŒExcelï¼ŒXMLï¼ŒHTMLç­‰æ ¼å¼ã€‚</p>
<hr>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹éšè—å†…å®¹</title>
    <url>/2020/07/25/Markdown%E4%B9%8B%E9%9A%90%E8%97%8F%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<h2 id="1-HTMLæ ‡ç­¾éšè—"><a href="#1-HTMLæ ‡ç­¾éšè—" class="headerlink" title="1. HTMLæ ‡ç­¾éšè—"></a>1. HTMLæ ‡ç­¾éšè—</h2><p>Markdownå†…åµŒhtmlè¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç”¨éšè—çš„htmlæ ‡ç­¾ã€‚</p>
<a id="more"></a>
<p><strong>æ³¨æ„ï¼šå‰é¢éœ€ç©ºä¸€è¡Œ</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">'display: none'</span>&gt;</span></span><br><span class="line">æ³¨é‡Š</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<div style='display: none'>
æ³¨é‡Š
</div>

<h2 id="2-HTMLæ³¨é‡Šéšè—"><a href="#2-HTMLæ³¨é‡Šéšè—" class="headerlink" title="2. HTMLæ³¨é‡Šéšè—"></a>2. HTMLæ³¨é‡Šéšè—</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å¤šæ®µ</span></span><br><span class="line"><span class="comment">æ³¨é‡Šï¼Œ</span></span><br><span class="line"><span class="comment">ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<!--æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚-->
<!--
å¤šæ®µ
æ³¨é‡Šï¼Œ
ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚
-->
<h2 id="3-hack-æ–¹æ³•éšè—"><a href="#3-hack-æ–¹æ³•éšè—" class="headerlink" title="3. hack æ–¹æ³•éšè—"></a>3. hack æ–¹æ³•éšè—</h2><p>hackæ–¹æ³•åˆ©ç”¨markdownçš„è§£æåŸç†æ¥å®ç°æ³¨é‡Šã€‚ä¸€èˆ¬æœ‰çš„markdownè§£æå™¨ä¸æ”¯æŒä¸Šé¢çš„æ³¨é‡Šæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨hackæ–¹æ³•ã€‚</p>
<p>hackæ–¹æ³•æ¯”ä¸Šé¢2ç§æ–¹æ³•ç¨³å®šï¼Œä½†æ˜¯è¯­ä¹‰åŒ–å¤ªå·®ã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[comment]: <span class="tag">&lt;&gt;</span> (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br><span class="line">[//]: <span class="tag">&lt;&gt;</span> (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br><span class="line">[//]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>å…¶ä¸­ï¼Œè¿™ç§æ–¹æ³•æœ€ç¨³å®šï¼Œé€‚ç”¨æ€§æœ€å¼ºï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[//]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>è¿˜å¯ä»¥ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">[^_^]: # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)</span><br></pre></td></tr></table></figure><br>æµ‹è¯•ï¼ˆåœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°å³ä¸ºæˆåŠŸï¼‰ï¼š</p>
<blockquote id="fn__^">
<sup>_^</sup>. # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)<a href="#reffn__^" title="Jump back to footnote [_^] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn__^">
<sup>_^</sup>. # (æ³¨é‡Šï¼Œä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºã€‚)<a href="#reffn__^" title="Jump back to footnote [_^] in the text."> &#8617;</a>
</blockquote>
<h2 id="4-HTMLæ ‡ç­¾æŠ˜å "><a href="#4-HTMLæ ‡ç­¾æŠ˜å " class="headerlink" title="4. HTMLæ ‡ç­¾æŠ˜å "></a>4. HTMLæ ‡ç­¾æŠ˜å </h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">summary</span>&gt;</span><span class="tag">&lt;<span class="name">mark</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">darkred</span>&gt;</span>æ‘˜è¦<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">mark</span>&gt;</span><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> -title<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span>  </span><br><span class="line">   éšè—ä»£ç å—</span><br><span class="line">  <span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>summaryï¼šæŠ˜å è¯­æ³•å±•ç¤ºçš„æ‘˜è¦</p>
<p>detailsï¼šæŠ˜å è¯­æ³•æ ‡ç­¾</p>
<p>preï¼šä»¥åŸæœ‰æ ¼å¼æ˜¾ç¤ºå…ƒç´ å†…çš„æ–‡å­—æ˜¯å·²ç»æ ¼å¼åŒ–çš„æ–‡æœ¬ã€‚</p>
<p>blockcodeï¼šè¡¨ç¤ºç¨‹åºçš„ä»£ç å—ã€‚</p>
<p>codeï¼šæŒ‡å®šä»£ç èŒƒä¾‹ã€‚</p>
<p><strong>éšè—å†…å®¹ä¹Ÿå¯ä»¥æ˜¯markdownæ ¼å¼ã€‚</strong></p>
<p><strong><em>æ•ˆæœ</em></strong>ï¼š</p>
<details>
<summary><mark><font color=darkred>markdownéšè—å†…å®¹</font></mark></summary>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;details&gt;</span><br><span class="line">&lt;summary&gt;&lt;mark&gt;&lt;font color&#x3D;darkred&gt;æ‘˜è¦&lt;&#x2F;font&gt;&lt;&#x2F;mark&gt;&lt;&#x2F;summary&gt;</span><br><span class="line"></span><br><span class="line">éšè—å†…å®¹</span><br><span class="line">&lt;&#x2F;details&gt;</span><br></pre></td></tr></table></figure>

</details>

<hr>
<p>æ¥æºï¼š<a href="https://www.imooc.com/article/23400" target="_blank" rel="noopener">æ…•è¯¾ç½‘CandyBullet</a></p>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2>]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹å­—ä½“é¢œè‰²ä»¥åŠèƒŒæ™¯è‰²</title>
    <url>/2020/07/26/Markdown%E4%B9%8B%E5%AD%97%E4%BD%93%E9%A2%9C%E8%89%B2%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF%E8%89%B2/</url>
    <content><![CDATA[<h2 id="å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²"><a href="#å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²" class="headerlink" title="å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²"></a>å­—ä½“ï¼Œå¤§å°å’Œé¢œè‰²</h2><a id="more"></a>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"é»‘ä½“"</span>&gt;</span></span>æˆ‘æ˜¯é»‘ä½“å­—<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"å¾®è½¯é›…é»‘"</span>&gt;</span></span>æˆ‘æ˜¯å¾®è½¯é›…é»‘<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"STCAIYUN"</span>&gt;</span></span>æˆ‘æ˜¯åæ–‡å½©äº‘<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span></span>æˆ‘æ˜¯çº¢è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#008000</span>&gt;</span></span>æˆ‘æ˜¯ç»¿è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">Blue</span>&gt;</span></span>æˆ‘æ˜¯è“è‰²<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span></span>æˆ‘æ˜¯å°ºå¯¸<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">"é»‘ä½“"</span> <span class="attr">color</span>=<span class="string">green</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span></span>æˆ‘æ˜¯é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š </p>
<font face="é»‘ä½“">æˆ‘æ˜¯é»‘ä½“å­—</font>
<font face="å¾®è½¯é›…é»‘">æˆ‘æ˜¯å¾®è½¯é›…é»‘</font>
<font face="STCAIYUN">æˆ‘æ˜¯åæ–‡å½©äº‘</font>
<font color="red">æˆ‘æ˜¯çº¢è‰²</font>
<font color="#008000">æˆ‘æ˜¯ç»¿è‰²</font>
<font color="Blue">æˆ‘æ˜¯è“è‰²</font>
<font size="5">æˆ‘æ˜¯å°ºå¯¸</font>
<font face="é»‘ä½“" color="green" size="5">æˆ‘æ˜¯é»‘ä½“ï¼Œç»¿è‰²ï¼Œå°ºå¯¸ä¸º5</font>

<h2 id="æ–‡å­—èƒŒæ™¯è‰²"><a href="#æ–‡å­—èƒŒæ™¯è‰²" class="headerlink" title="æ–‡å­—èƒŒæ™¯è‰²"></a>æ–‡å­—èƒŒæ™¯è‰²</h2><p>ç”±äº Markdownä¸­ä¸æ”¯æŒ style æ ‡ç­¾å’Œ style å±æ€§ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½æ˜¯é€šè¿‡ table, tr, td ç­‰è¡¨æ ¼æ ‡ç­¾çš„ bgcolor å±æ€§æ¥å®ç°èƒŒæ™¯è‰²ï¼Œå°†ä¸€æ•´è¡Œçœ‹ä½œä¸€ä¸ªè¡¨æ ¼ï¼Œæ›´æ”¹å•å…ƒæ ¼çš„èƒŒæ™¯è‰²ï¼ˆbgcolorï¼‰</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">blue</span>&gt;</span></span>é¢œè‰²æµ‹è¯•<span class="xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<table><tr><td bgcolor="blue">é¢œè‰²æµ‹è¯•</td></tr></table>

<h2 id="å›¾ç‰‡å±…ä¸­"><a href="#å›¾ç‰‡å±…ä¸­" class="headerlink" title="å›¾ç‰‡å±…ä¸­"></a>å›¾ç‰‡å±…ä¸­</h2><p>å°†æ–‡ä»¶æ”¾åœ¨ <em>/source/image</em> æ–‡ä»¶å¤¹ä¸‹,  å¯ä»¥å®ç°å›¾ç‰‡æ˜¾ç¤º, ä½†æ˜¯è¿™ç§å¼•ç”¨åœ¨æœ¬åœ°markdown ç¼–è¾‘å™¨ä¸­ä¼šæ— æ³•é¢„è§ˆ,å› ä¸ºç›¸å¯¹è·¯å¾„ä¸ä¸€è‡´,æ‰¾ä¸åˆ°æ–‡ä»¶ã€‚</p>
<p>ä½¿ç”¨imgæ ‡ç­¾</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">right</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/timg.jfif"</span> <span class="attr">width</span>=<span class="string">"50%"</span> <span class="attr">height</span>=<span class="string">"50%"</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<div align="right"><img src="/.com//timg.jfif" width="50%" height="50%"></div>

<p>ä½¿ç”¨divæ ‡ç­¾+cssæ§åˆ¶å›¾ç‰‡æ˜¾ç¤º</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width: 200px; margin: auto"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<div style="width: 200px; margin: auto"></div>

<hr>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/heimu24/article/details/81189700" target="_blank" rel="noopener">https://blog.csdn.net/heimu24/article/details/81189700</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ–‡ä»¶æ¢å¤</title>
    <url>/2020/08/29/Markdown%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D/</url>
    <content><![CDATA[<p>å¿˜äº†ç‚¹ä¿å­˜ï¼Œæ‰“å¼€ä¸€çœ‹æ–‡ä»¶æ˜¯ç©ºçš„ã€‚</p>
<ol>
<li>æ‰“å¼€Typora $\rightarrow $ æ–‡ä»¶$\rightarrow $ åå¥½è®¾ç½®</li>
<li>å‘ä¸‹æ»šåŠ¨åˆ° â€œä¿å­˜ &amp; æ¢å¤â€ åŒºåŸŸ</li>
<li>ç‚¹å‡» â€œæ¢å¤æœªä¿å­˜çš„è‰ç¨¿â€</li>
</ol>
<p>æ–¹æ³•å‚è€ƒï¼š<a href="https://blog.csdn.net/makesomethings/article/details/90181198" target="_blank" rel="noopener">https://blog.csdn.net/makesomethings/article/details/90181198</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownä¹‹è¡¨æƒ…ï¼Œåˆ é™¤çº¿å’Œä»»åŠ¡åˆ—è¡¨</title>
    <url>/2020/08/29/Markdown%E4%B9%8B%E8%A1%A8%E6%83%85%EF%BC%8C%E5%88%A0%E9%99%A4%E7%BA%BF%E5%92%8C%E4%BB%BB%E5%8A%A1%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<h3 id="è¡¨æƒ…"><a href="#è¡¨æƒ…" class="headerlink" title="è¡¨æƒ…"></a>è¡¨æƒ…</h3><p><strong>aliasesç¼–ç ï¼šè¯­æ³•ï¼š</strong> <code>:&lt;emoji&gt;:</code></p>
<p>ğŸ”½ ğŸ˜“ğŸ˜„</p>
<a id="more"></a>
<p>å¯æŸ¥è¡¨ï¼š</p>
<p><a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">https://www.webfx.com/tools/emoji-cheat-sheet/</a></p>
<p><a href="https://www.cnblogs.com/minghaiJ/p/10685965.html" target="_blank" rel="noopener">https://www.cnblogs.com/minghaiJ/p/10685965.html</a></p>
<p><strong>hexdecimalç¼–ç ï¼šè¯­æ³•ï¼š</strong> <code>&amp;#xCODE;</code> </p>
<p>å¯ä»¥ä» <a href="https://link.zhihu.com/?target=https%3A//apps.timwhitlock.info/emoji/tables/unicode%23block-4-enclosed-characters">Emoji Unicode Tables</a> ä¸­æŸ¥åˆ°è¡¨æƒ…çš„Unicodeç¼–ç ï¼Œå»æ‰å¼€å¤´U+å³ä¸ºcodeã€‚(typoraä¸æ”¯æŒORZ)</p>
<h3 id="ä¸‹åˆ’çº¿"><a href="#ä¸‹åˆ’çº¿" class="headerlink" title="ä¸‹åˆ’çº¿"></a>ä¸‹åˆ’çº¿</h3><p>ç”¨HTMLçš„è¯­æ³•<code>&lt;u&gt;Underline&lt;/u&gt;</code>å°†äº§ç”Ÿä¸‹åˆ’çº¿<u>Underline</u>.</p>
<h3 id="ä»»åŠ¡çº¿"><a href="#ä»»åŠ¡çº¿" class="headerlink" title="ä»»åŠ¡çº¿"></a>ä»»åŠ¡çº¿</h3><p>GFMæ·»åŠ äº†åˆ é™¤æ–‡æœ¬çš„è¯­æ³•ï¼Œè¿™æ˜¯æ ‡å‡†çš„Markdownè¯­æ³•æœ¨æœ‰çš„ã€‚ä½¿ç”¨<code>~~</code>åŒ…è£¹çš„æ–‡æœ¬å°†ä¼šå…·æœ‰åˆ é™¤çš„æ ·å¼ï¼Œä¾‹å¦‚<code>~åˆ é™¤æ–‡æœ¬~</code>å°†äº§ç”Ÿ<del>åˆ é™¤æ–‡æœ¬</del>çš„æ ·å¼ã€‚</p>
<h3 id="ä»»åŠ¡åˆ—è¡¨"><a href="#ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="ä»»åŠ¡åˆ—è¡¨"></a>ä»»åŠ¡åˆ—è¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- [ ] åƒé¥­</span><br><span class="line">- [ ] é€›è¡—</span><br><span class="line">- [ ] çœ‹ç”µå½±</span><br><span class="line">- [ ] çº¦æ³¡</span><br></pre></td></tr></table></figure>
<ul>
<li>[ ] åƒé¥­</li>
<li>[ ] é€›è¡—</li>
<li>[ ] çœ‹ç”µå½±</li>
<li>[ ] çº¦æ³¡</li>
</ul>
<h3 id="æœ€å¤§åŒ–å¿«æ·é”®"><a href="#æœ€å¤§åŒ–å¿«æ·é”®" class="headerlink" title="æœ€å¤§åŒ–å¿«æ·é”®"></a>æœ€å¤§åŒ–å¿«æ·é”®</h3><p>è¿›å»é€€å‡ºæœ€å¤§åŒ–ï¼šF11</p>
<p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/092de536d948" target="_blank" rel="noopener">https://www.jianshu.com/p/092de536d948</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¹‹csv</title>
    <url>/2020/07/25/python%E4%B9%8Bcsv/</url>
    <content><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯csvï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯csvï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯csvï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯csvï¼Ÿ</h2><p><strong>Comma Separated Values</strong> (CSV), also called called <strong>Character Separated Values</strong> or <strong>Comma Delimited files</strong>, is a file format for data storage which looks like a text file, which contains a list of data separated by commas or other characters.</p>
<a id="more"></a>
<details>
<summary><mark><font color=darkred>csvçš„æ ¼å¼ç‰¹ç‚¹</font></mark></summary>

- One line for each record
- Comma separated fields
- Space-characters adjacent to commas are ignored
- Fields with in-built commas are separated by double quote characters
- Fields with double quote characters must be surrounded by double quotes. Each inbuilt double quote must be represented by a pair of consecutive quotes
- Fields that contain inbuilt line-breaks must be surrounded by double quotes

</details>

<h2 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆä½¿ç”¨csvæ–‡ä»¶ï¼Ÿ</h2><p>CSVç»“æ„ç®€å•ï¼Œæ˜¯çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œå’Œtxtçš„åŒºåˆ«ä»…åœ¨äºåç¼€åä¸åŒã€‚ç”¨æ¥åšæ•°æ®å­˜å‚¨ï¼Œå®¹é‡æ¯”XMLå°ï¼ˆå…¶æ•°æ®ç”±key-valueç»„æˆï¼‰ï¼ŒåŠŸèƒ½æ¯”TXTå¼ºå¤§ï¼Œå¦å¤–Excelä¹Ÿç›´æ¥æ”¯æŒCSVæ–‡ä»¶çš„æŸ¥çœ‹å’Œç”Ÿæˆã€‚</p>
<h3 id="Excel-æ‰“å¼€-CSV-æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚"><a href="#Excel-æ‰“å¼€-CSV-æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚" class="headerlink" title="Excel æ‰“å¼€  CSV æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚"></a>Excel æ‰“å¼€  CSV æ–‡ä»¶æ—¶é‡åˆ°çš„é—®é¢˜ã€‚</h3><p>ç›´æ¥ç”¨ Excel æ‰“å¼€ UTF-8 ç¼–ç çš„ CSV æ–‡ä»¶ä¼šå¯¼è‡´æ±‰å­—éƒ¨åˆ†å‡ºç°ä¹±ç ï¼ŒåŸå› æ˜¯ Excel ä»¥ ANSI æ ¼å¼æ‰“å¼€ï¼Œä¸ä¼šåšç¼–ç è¯†åˆ«ã€‚æ‰“å¼€ UTF-8 ç¼–ç çš„ CSV æ–‡ä»¶çš„æ–¹æ³•ï¼š</p>
<h4 id="1-ä»æ•°æ®å¯¼å…¥æ–‡æœ¬"><a href="#1-ä»æ•°æ®å¯¼å…¥æ–‡æœ¬" class="headerlink" title="1. ä»æ•°æ®å¯¼å…¥æ–‡æœ¬"></a>1. ä»æ•°æ®å¯¼å…¥æ–‡æœ¬</h4><ul>
<li>æ‰“å¼€ Excel </li>
<li>æ‰§è¡Œâ€œæ•°æ®â€-&gt;â€œè‡ªæ–‡æœ¬â€</li>
</ul>
<ul>
<li>é€‰æ‹© CSV æ–‡ä»¶ï¼Œå‡ºç°æ–‡æœ¬å¯¼å…¥å‘å¯¼</li>
<li>é€‰æ‹©â€œåˆ†éš”ç¬¦å·â€ï¼Œä¸‹ä¸€æ­¥</li>
<li>å‹¾é€‰â€œé€—å·â€ï¼Œå»æ‰â€œ Tab é”®â€ï¼Œä¸‹ä¸€æ­¥ï¼Œå®Œæˆ</li>
<li>åœ¨â€œå¯¼å…¥æ•°æ®â€å¯¹è¯æ¡†é‡Œï¼Œç›´æ¥ç‚¹ç¡®å®š</li>
</ul>
<h4 id="2-è½¬å­˜ä¸ºANSIæ ¼å¼"><a href="#2-è½¬å­˜ä¸ºANSIæ ¼å¼" class="headerlink" title="2. è½¬å­˜ä¸ºANSIæ ¼å¼"></a>2. è½¬å­˜ä¸ºANSIæ ¼å¼</h4><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€CSVæ–‡ä»¶ï¼Œå¦å­˜ä¸ºANSIæ ¼å¼ï¼Œå†ç”¨Excelæ‰“å¼€ã€‚</p>
<h2 id="3-pythonè‡ªå¸¦æ¨¡å—csv"><a href="#3-pythonè‡ªå¸¦æ¨¡å—csv" class="headerlink" title="3. pythonè‡ªå¸¦æ¨¡å—csv"></a>3. pythonè‡ªå¸¦æ¨¡å—csv</h2><p><a href="https://docs.python.org/zh-cn/3/library/csv.html#module-csv" target="_blank" rel="noopener"><code>csv</code></a> æ¨¡å—å®ç°äº† CSV æ ¼å¼è¡¨å•æ•°æ®çš„è¯»å†™ã€‚å…¶æä¾›äº†è¯¸å¦‚â€œä»¥å…¼å®¹ Excel çš„æ–¹å¼è¾“å‡ºæ•°æ®æ–‡ä»¶â€æˆ–â€œè¯»å– Excel ç¨‹åºè¾“å‡ºçš„æ•°æ®æ–‡ä»¶â€çš„åŠŸèƒ½ï¼Œ</p>
<p><code>csv</code>å®šä¹‰äº†ä»¥ä¸‹å‡½æ•°ï¼š</p>
<blockquote>
<p><code>csv.reader</code>(<em>csvfile</em>, <em>dialect=â€™excelâ€™</em>, **fmtparams)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'eggs.csv'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csvfile:</span><br><span class="line">    spamreader = csv.reader(csvfile, delimiter=<span class="string">' '</span>, quotechar=<span class="string">'|'</span>)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> spamreader:</span><br><span class="line">        print(<span class="string">', '</span>.join(row))</span><br></pre></td></tr></table></figure>
<p><code>csv.writer</code>(<em>csvfile</em>, <em>dialect=â€™excelâ€™</em>, **fmtparams)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'eggs.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> csvfile:</span><br><span class="line">    spamwriter = csv.writer(csvfile, delimiter=<span class="string">' '</span>,</span><br><span class="line">                            quotechar=<span class="string">'|'</span>, quoting=csv.QUOTE_MINIMAL)</span><br><span class="line">    spamwriter.writerow([<span class="string">'Spam'</span>] * <span class="number">5</span> + [<span class="string">'Baked Beans'</span>])</span><br><span class="line">    spamwriter.writerow([<span class="string">'Spam'</span>, <span class="string">'Lovely Spam'</span>, <span class="string">'Wonderful Spam'</span>])</span><br></pre></td></tr></table></figure>
</blockquote>
<p><code>csv</code>å®šä¹‰äº†ä»¥ä¸‹ç±»ï¼š</p>
<blockquote>
<p>class csv.DictReader(<em>f</em>, <em>fieldnames=None</em>, <em>restkey=None</em>, <em>restval=None</em>, <em>dialect=â€™excelâ€™</em>, <em>args, *</em>kwds) </p>
<p>å°†csvæ•°æ®è¯»å–ä¸ºå­—å…¸</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:right">Age</th>
<th style="text-align:center">Class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">A</td>
<td style="text-align:right">20</td>
<td style="text-align:center">two</td>
</tr>
<tr>
<td style="text-align:left">B</td>
<td style="text-align:right">21</td>
<td style="text-align:center">one</td>
</tr>
<tr>
<td style="text-align:left">C</td>
<td style="text-align:right">22</td>
<td style="text-align:center">one</td>
</tr>
<tr>
<td style="text-align:left">D</td>
<td style="text-align:right">23</td>
<td style="text-align:center">three</td>
</tr>
<tr>
<td style="text-align:left">E</td>
<td style="text-align:right">24</td>
<td style="text-align:center">one</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"csv.csv"</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line"> reader = csv.reader(f)</span><br><span class="line"> fieldnames = next(reader)<span class="comment">#è·å–æ•°æ®çš„ç¬¬ä¸€åˆ—ï¼Œä½œä¸ºåç»­è¦è½¬ä¸ºå­—å…¸çš„é”®å ç”Ÿæˆå™¨ï¼Œnextæ–¹æ³•è·å–</span></span><br><span class="line"> <span class="comment"># print(fieldnames)</span></span><br><span class="line"> csv_reader = csv.DictReader(f,fieldnames=fieldnames) <span class="comment">#self._fieldnames = fieldnames # list of keys for the dict ä»¥listçš„å½¢å¼å­˜æ”¾é”®å</span></span><br><span class="line"> <span class="keyword">for</span> row <span class="keyword">in</span> csv_reader:</span><br><span class="line">  d=&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> row.items():</span><br><span class="line">   d[k]=v</span><br><span class="line">  print(d)</span><br></pre></td></tr></table></figure>
<p>class csv.DictWriter(<em>f</em>, <em>fieldnames=None</em>, <em>extrasaction=â€™raiseâ€™</em>, <em>dialect=â€™excelâ€™</em>, <em>args, *</em>kwds)</p>
<p>å°†å­—å…¸å†™å…¥csvæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">file_path = <span class="string">r"E:\new.csv"</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">"w"</span>, newline=<span class="string">""</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    fieldnames = [<span class="string">"ä¹¦å"</span>, <span class="string">"ä½œè€…"</span>, <span class="string">"å‡ºç‰ˆæ—¶é—´"</span>, <span class="string">"ä»·æ ¼"</span>, <span class="string">"è¯„åˆ†"</span>, <span class="string">"è¯„ä»·äººæ•°"</span>]</span><br><span class="line">    f_csv = csv.DictWriter(f, fieldnames)</span><br><span class="line">    f_csv.writeheader()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(time_list)):</span><br><span class="line">        f_csv.writerow(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"ä¹¦å"</span>: book_name_list[i],</span><br><span class="line">                <span class="string">"ä½œè€…"</span>: author_list[i],</span><br><span class="line">                <span class="string">"å‡ºç‰ˆæ—¶é—´"</span>: time_list[i],</span><br><span class="line">                <span class="string">"ä»·æ ¼"</span>: price_list[i],</span><br><span class="line">                <span class="string">"è¯„åˆ†"</span>: score_list[i],</span><br><span class="line">                <span class="string">"è¯„ä»·äººæ•°"</span>: evaluator_list[i]</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>
</blockquote>
<p>å‚è€ƒèµ„æºï¼š</p>
<p><a href="https://docs.python.org/zh-cn/3/library/csv.html#module-csv" target="_blank" rel="noopener">Pythonä¸­æ–‡æ–‡æ¡£-module csv</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>csv</tag>
        <tag>æ•°æ®å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ•°å­¦ç¬¦å·å’Œå…¬å¼</title>
    <url>/2020/08/29/Markdown%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E5%92%8C%E5%85%AC%E5%BC%8F%20193445/</url>
    <content><![CDATA[<p>Markdownä¸­æ•°å­¦ç¬¦å·å’Œå…¬å¼çš„ä¹¦å†™è§„åˆ™å’Œ<code>latex</code>éå¸¸åƒã€‚</p>
<p>è¡Œå†…å…¬å¼æˆ–æ•°å­¦ç¬¦å·ä½¿ç”¨<code>$</code>ç¬¦å·åŒ…è£¹Texå‘½ä»¤å³å¯ã€‚</p>
<p>å•ç‹¬çš„å…¬å¼æ®µè½å¯ä»¥ç”¨$$$$åŒ…è£¹ï¼Œæˆ–è€…ç‚¹å‡»â€œæ®µè½â€ $\rightarrow$ â€œå…¬å¼å—â€ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”®Shift+Ctrl+M</p>
<a id="more"></a>
<p>å¸¸ç”¨çš„æ•°å­¦ç¬¦å·ï¼š</p>
<h3 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h3><p><strong>å°å†™</strong> \alpha \beta \chi \delta \epsilon \eta \gamma \kappa \lambda \mu \nu \omega \tau \theta \xi \zeta </p>
<p>$\alpha \beta \chi \delta \epsilon \eta \gamma \kappa \lambda \mu \nu \omega \tau \theta \xi \zeta $</p>
<p><strong>å¤§å†™</strong> å°†ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™å³å¯ï¼š $\Alpha \Beta \Chi \Delta \Epsilon $</p>
<h3 id="æ“ä½œç¬¦-å…³ç³»ç¬¦"><a href="#æ“ä½œç¬¦-å…³ç³»ç¬¦" class="headerlink" title="æ“ä½œç¬¦ å…³ç³»ç¬¦"></a>æ“ä½œç¬¦ å…³ç³»ç¬¦</h3><p>å¸¸ç”¨çš„æœ‰ ï¼š</p>
<p>\cdot  \pm \leq \geq \gg \ll \times \div \oplus \otimes \equiv \approx \because \therefore</p>
<p>$\cdot  \pm \leq \geq \gg \ll \times \div \oplus \otimes \equiv \approx \because \therefore$</p>
<h3 id="æ•°å­¦ç€é‡å·"><a href="#æ•°å­¦ç€é‡å·" class="headerlink" title="æ•°å­¦ç€é‡å·"></a>æ•°å­¦ç€é‡å·</h3><p>\ddot{a} \bar{a} \dot{a} \hat{a} \vec{a} \check{a}</p>
<p>$\ddot{a} \bar{a} \dot{a} \hat{a} \vec{a} \check{a}$</p>
<h3 id="å„å¼ç®­å¤´"><a href="#å„å¼ç®­å¤´" class="headerlink" title="å„å¼ç®­å¤´"></a>å„å¼ç®­å¤´</h3><p>\leftarrow \rightarrow \uparrow \downarrow</p>
<p>$\leftarrow \rightarrow \uparrow \downarrow$</p>
<p>\Leftarrow \Rightarrow \Uparrow \Downarrow</p>
<p>$\Leftarrow \Rightarrow \Uparrow \Downarrow$</p>
<p>\longleftarrow \longrightarrow </p>
<p>$\longleftarrow \longrightarrow $</p>
<p>\leftrightarrow  \updownarrow</p>
<p>$\leftrightarrow  \updownarrow$</p>
<h3 id="å…¶ä»–ç¬¦å·"><a href="#å…¶ä»–ç¬¦å·" class="headerlink" title="å…¶ä»–ç¬¦å·"></a>å…¶ä»–ç¬¦å·</h3><p>\infty  \forall \nabla \partial \varnothing \hbar \exists</p>
<p>$\infty  \forall \nabla \partial \varnothing \hbar \exists$</p>
<p>\sum  \int  \prod \oint  \iint</p>
<p>$\sum  \int  \prod \oint  \iint$</p>
<h3 id="æ•°å­¦ç»“æ„"><a href="#æ•°å­¦ç»“æ„" class="headerlink" title="æ•°å­¦ç»“æ„"></a>æ•°å­¦ç»“æ„</h3><p>\frac{a}{b} $\frac{a}{b}$</p>
<p>\sqrt[n]{a} $\sqrt[n]{a} $</p>
<p>\overline{abc} $\overline{abc}$</p>
<p>\widehat{abc} $\widehat{abc}$</p>
<p>\overrightarrow{abc} $\overrightarrow{abc}$</p>
<p>\left\{ a b c\}\right</p>
<p>a = \left \{ \begin{array}{c} x^2 \\ 2x \\0 \end{array} \right. \} $a = \left \{ \begin{array}{c} x^2 \\ 2x \\0 \end{array} \right.$</p>
<p>\left ( \begin{array}{cc} a &amp; b \\ c &amp; d\end{array} \right) $\left ( \begin{array}{cc} a &amp; b \\ c &amp; d\end{array} \right)$</p>
<hr>
<p>å‚è€ƒï¼š</p>
<p><a href="https://blog.csdn.net/wait_for_eva/article/details/84307306" target="_blank" rel="noopener">typora-æ•°å­¦ç¬¦å·</a> </p>
<p><a href="https://blog.csdn.net/mingzhuo_126/article/details/82722455" target="_blank" rel="noopener">ä½¿ç”¨Typoraæ·»åŠ æ•°å­¦å…¬å¼</a></p>
<p><a href="https://www.cnblogs.com/waleswood/p/6401232.html" target="_blank" rel="noopener">å¸Œè…Šå­—æ¯ã€æ‹‰ä¸å­—æ¯ã€Markdownã€æ‹¼å†™ä¸è¯»éŸ³ä¸­è‹±å¯¹ç…§è¡¨</a></p>
<p><a href="https://blog.csdn.net/katherine_hsr/article/details/79179622" target="_blank" rel="noopener">Markdownæ•°å­¦ç¬¦å·&amp;å…¬å¼</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¹‹å­—ç¬¦ä¸²å’Œåˆ—è¡¨ä¹‹é—´çš„è½¬æ¢</title>
    <url>/2020/07/28/python%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%88%97%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<h2 id="str-to-list"><a href="#str-to-list" class="headerlink" title="str to list"></a>str to list</h2><a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str1 = <span class="string">"12345"</span></span><br><span class="line">list1 = list(str1)</span><br><span class="line">print(list1)  <span class="comment"># ['1', '2', '3', '4', '5']</span></span><br><span class="line"></span><br><span class="line">str2 = <span class="string">"123 sjhid dhi"</span></span><br><span class="line">list2 = str2.split() <span class="comment">#or list2 = str2.split(" ")</span></span><br><span class="line">print(list2)   <span class="comment"># ['123', 'sjhid', 'dhi']</span></span><br><span class="line"> </span><br><span class="line">str3 = <span class="string">"www.google.com"</span></span><br><span class="line">list3 = str3.split(<span class="string">"."</span>)</span><br><span class="line">print(list3)   <span class="comment"># ['www', 'google', 'com']</span></span><br></pre></td></tr></table></figure>
<h2 id="list-to-str"><a href="#list-to-str" class="headerlink" title="list to str"></a>list to str</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">str4 = <span class="string">""</span>.join(list3)</span><br><span class="line">print(str4)    <span class="comment"># wwwgooglecom</span></span><br><span class="line">str5 = <span class="string">"."</span>.join(list3)  <span class="comment"># www.google.com</span></span><br><span class="line">print(str5)</span><br><span class="line">str6 = <span class="string">" "</span>.join(list3)   <span class="comment"># www google com</span></span><br><span class="line"><span class="keyword">print</span> (str6)</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://blog.csdn.net/roytao2/article/details/53433373" target="_blank" rel="noopener">https://blog.csdn.net/roytao2/article/details/53433373</a></p>
<p><a href="https://www.jb51.net/article/107092.htm" target="_blank" rel="noopener">https://www.jb51.net/article/107092.htm</a></p>
<div style='display: none'>

å°è¯•çˆ¬å–åšå®¢é¡µé¢

</div>]]></content>
      <categories>
        <category>python</category>
      </categories>
  </entry>
  <entry>
    <title>pythonå­—ç¬¦ä¸²è¿‡æ»¤ä»…ä¿ç•™æ•°å­—</title>
    <url>/2020/07/25/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%87%E6%BB%A4%E4%BB%85%E4%BF%9D%E7%95%99%E6%95%B0%E5%AD%97/</url>
    <content><![CDATA[<h2 id="1-å†…ç½®-filter-å‡½æ•°"><a href="#1-å†…ç½®-filter-å‡½æ•°" class="headerlink" title="1. å†…ç½® filter() å‡½æ•°"></a>1. å†…ç½® filter() å‡½æ•°</h2><p><code>filter(function, iterable)</code>å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ç”±ç¬¦åˆæ¡ä»¶å…ƒç´ ç»„æˆçš„æ–°åˆ—è¡¨ï¼Œ<font face="é»‘ä½“" color=green > <strong>æ³¨æ„:</strong> Pyhton2.7 è¿”å›åˆ—è¡¨ï¼ŒPython3.x è¿”å›è¿­ä»£å™¨å¯¹è±¡</font>ã€‚</p>
<a id="more"></a>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿‡æ»¤å‡ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¥‡æ•°ï¼š</span></span><br><span class="line">newlist = filter(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])</span><br><span class="line"><span class="comment"># è¿‡æ»¤å‡º1~100ä¸­å¹³æ–¹æ ¹æ˜¯æ•´æ•°çš„æ•°ï¼š</span></span><br><span class="line">newlist = filter(is_sqr, range(<span class="number">1</span>, <span class="number">101</span>))</span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²è¿‡æ»¤ä»…ä¿ç•™æ•°å­—å’Œå­—æ¯</span></span><br><span class="line">string = <span class="string">'abc5fg67.!aa99'</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isdigit,string))) <span class="comment">#åªä¿ç•™æ•°å­—</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isalpha,string))) <span class="comment">#åªä¿ç•™å­—æ¯</span></span><br><span class="line">string_new = <span class="string">''</span>.join(list(filter(str.isalnum,string))) <span class="comment">#ä¿ç•™æ•°å­—å’Œå­—æ¯</span></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³ä¿ç•™æ•°å­—0-9å’Œå°æ•°ç‚¹â€™.â€™ åˆ™éœ€è¦è‡ªå®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="string">''</span>.join(list(filter(<span class="keyword">lambda</span> ch: ch <span class="keyword">in</span> <span class="string">'1234567890.'</span>, string)))</span><br></pre></td></tr></table></figure>
<h2 id="2-æ­£åˆ™è¡¨è¾¾å¼"><a href="#2-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="2. æ­£åˆ™è¡¨è¾¾å¼"></a>2. æ­£åˆ™è¡¨è¾¾å¼</h2><p>pythonè‡ªå¸¦<code>re</code> æ¨¡å—ï¼Œä½¿ Python è¯­è¨€æ‹¥æœ‰å…¨éƒ¨çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½ã€‚</p>
<p>ä»å­—ç¬¦ä¸²ä¸­æå–æ•°å­—ï¼Œä¸€èˆ¬å½¢å¼å¦‚ï¼šâ€”-.â€”ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">string=<span class="string">"A1.45ï¼Œb5ï¼Œ6.45ï¼Œ8.82"</span></span><br><span class="line"><span class="keyword">print</span> re.findall(<span class="string">r"\d+.?\d*"</span>,string)</span><br><span class="line"><span class="comment"># \d+åŒ¹é…1æ¬¡æˆ–è€…å¤šæ¬¡æ•°å­—</span></span><br><span class="line"><span class="comment"># \.?åŒ¹é…å°æ•°ç‚¹ï¼Œå¯èƒ½æœ‰æˆ–è€…æ²¡æœ‰</span></span><br><span class="line"><span class="comment"># \d* åŒ¹é…å°æ•°ç‚¹ä¹‹åçš„æ•°å­—ï¼Œé›¶åˆ°ä»»æ„ã€‚</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ol>
<li><p><a href="https://blog.csdn.net/huoyuanshen/article/details/83106608" target="_blank" rel="noopener">https://blog.csdn.net/huoyuanshen/article/details/83106608</a></p>
</li>
<li><p><a href="https://www.runoob.com/python/python-func-filter.html" target="_blank" rel="noopener">https://www.runoob.com/python/python-func-filter.html</a></p>
<p>â€‹</p>
</li>
</ol>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>å†…ç½®å‡½æ•°</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
        <tag>re</tag>
        <tag>filter()</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«ä¹‹å®æˆ˜é—®é¢˜</title>
    <url>/2020/08/03/python%E7%88%AC%E8%99%AB%E4%B9%8B%E5%AE%9E%E6%88%98%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="1-seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•"><a href="#1-seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•" class="headerlink" title="1. seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•"></a>1. seleniumè°ƒç”¨Chromeæ‰“å¼€æ·˜å®æ—¶éœ€è¦ç™»å½•</h2><a id="more"></a>
<p>ç”±äºéœ€è¦ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œå¯¼è‡´çˆ¬è™«ç¨‹åºè¢«æ‰“æ–­ï¼Œå¯ä»¥å†ä½¿ç”¨seleniumå»æ¨¡æ‹Ÿäººçš„ç™»å½•ï¼Œè¾“å…¥è´¦å·å’Œå¯†ç ä»¥åŠæ»‘åŠ¨ï¼Œä½†æ˜¯è§‰å¾—å¾ˆéº»çƒ¦è¿˜ä¼šæœ‰å„ç§å„æ ·çš„bugï¼Œæ‰€ä»¥å†³å®šç”¨ç±»ä¼¼äºcookieçš„æ–¹æ³•å³åˆ©ç”¨ä¿å­˜åœ¨ç”µè„‘ä¸Šçš„chromeç”¨æˆ·ä¿¡æ¯æ¥ç™»å½•æ·˜å®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">chrome_options = webdriver.ChromeOptions()        <span class="comment">#åˆå§‹åŒ–</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)         <span class="comment">#è®¾ç½®æµè§ˆå™¨æ— å¤´æ¨¡å¼</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--disable-gpu'</span>)      <span class="comment">#é¿å…ä¸€äº›æŠ¥é”™</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--no-sandbox'</span>)       <span class="comment">#é¿å…å‡ºé”™</span></span><br><span class="line">chrome_options.add_argument(<span class="string">r'user-data-dir=C:\Users\username\AppData\Local\Google\Chrome\User Data'</span>)</span><br><span class="line">browser = webdriver.Chrome(options=chrome_options)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>æ³¨æ„ï¼š</strong> ä¸ºchromeæµè§ˆå™¨è®¾ç½®å‚æ•°,å¦‚æœä½¿ç”¨ç”¨æˆ·ä¿¡æ¯ï¼Œä¸ä¼šè°ƒèµ·æ–°çš„chromeï¼Œæ‰€ä»¥éœ€è¦å°†Chromeæ‰€æœ‰çª—å£å…³é—­ï¼Œå¦åˆ™å› ä¸ºå ç”¨ä¼šå‡ºé”™ã€‚</li>
</ul>
<p>å¦å¤–è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥cookiesã€‚æˆ–è€…ï¼Œæˆ–è€…ä½¿ç”¨requests.post() ä¼ å…¥è´¦å·ï¼Œå¯†ç ã€‚</p>
<h2 id="2-æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”"><a href="#2-æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”" class="headerlink" title="2. æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”"></a>2. æ·˜å®æœç´¢buttonï¼Œä½¿ç”¨clickç‚¹å‡»æ— ååº”</h2><p>æœ‰äº›éœ€è¦enter</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">driver.get(url)</span><br><span class="line">input = driver.find_element_by_xpath(<span class="string">'//*[@id="q"]'</span>)</span><br><span class="line">input.clear()  <span class="comment"># æ¸…ç©ºæœç´¢æ¡†æ•°æ®</span></span><br><span class="line">input.send_keys(<span class="string">'ipad'</span>)  <span class="comment"># è¾“å…¥æ£€ç´¢è¯</span></span><br><span class="line">input.send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure>
<h2 id="3-æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥"><a href="#3-æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥" class="headerlink" title="3.æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥"></a>3.æ·˜å®æœç´¢ç»“æœçš„ä¸‹ä¸€é¡µç‚¹å‡»å¤±è´¥</h2><p>è§£å†³æ–¹æ³•ï¼šåœ¨é¡µç æ¡†è¾“å…¥é¡µç ï¼Œç„¶åç‚¹å‡»ç¡®å®š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input = wait.until(EC.presence_of_element_located((By.XPATH, <span class="string">'//*[@id="mainsrp-pager"]/div/div/div/div[2]/input'</span>))) <span class="comment"># è¾“å…¥æ¡†</span></span><br><span class="line">submit = wait.until(EC.element_to_be_clickable((By.XPATH, <span class="string">'//*[@id="mainsrp-pager"]/div/div/div/div[2]/span[3]'</span>))) <span class="comment"># ç¡®å®šæŒ‰é’®</span></span><br><span class="line">input.clear()</span><br><span class="line">input.send_keys(str(page))</span><br><span class="line">submit.click()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>å®æˆ˜</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ </title>
    <url>/2020/07/24/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E6%9C%AC%E5%BA%93%E5%92%8C%E8%A7%A3%E6%9E%90%E5%BA%93/</url>
    <content><![CDATA[<h2 id="1-å‰æœŸå‡†å¤‡"><a href="#1-å‰æœŸå‡†å¤‡" class="headerlink" title="1.å‰æœŸå‡†å¤‡"></a>1.å‰æœŸå‡†å¤‡</h2><h3 id="1-anacondaå®‰è£…"><a href="#1-anacondaå®‰è£…" class="headerlink" title="1. anacondaå®‰è£…"></a>1. anacondaå®‰è£…</h3><ol>
<li><p>é…ç½®ç¯å¢ƒï¼Œå°†pythonå†™å…¥ç¯å¢ƒå˜é‡ã€‚</p>
<a id="more"></a>
</li>
</ol>
<h3 id="2-IDEï¼š-pycharmå®‰è£…"><a href="#2-IDEï¼š-pycharmå®‰è£…" class="headerlink" title="2. IDEï¼š pycharmå®‰è£…"></a>2. IDEï¼š pycharmå®‰è£…</h3><ol>
<li>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆvirtual environmentï¼‰</li>
<li>settings å®‰è£…pythonåŒ…ï¼Œå¯ä»¥ç›´æ¥ä»anacondaä¸­æŠŠå®‰è£…åŒ…ç›´æ¥æ‹·åˆ°Lib-site_packageä¸‹ï¼Œå¦‚æœç½‘é€Ÿé™åˆ¶ï¼Œå¯ä»¥æ›¿æ¢é•œåƒæºã€‚</li>
</ol>
<h2 id="2-urllib"><a href="#2-urllib" class="headerlink" title="2. urllib"></a>2. urllib</h2><p><code>urllib</code> æ˜¯Python å†…ç½®çš„ HTTP è¯·æ±‚åº“ï¼ŒåŒ…å«å¦‚4 ä¸ªæ¨¡å—ï¼š<code>request</code>, <code>error</code>, <code>parse</code>, <code>robotparser</code></p>
<h3 id="request"><a href="#request" class="headerlink" title="request"></a>request</h3><p>è¯¥æ¨¡å—å¯ä»¥å‘é€è¯·æ±‚å¹¶å¾—åˆ°å“åº”ã€‚</p>
<ol>
<li><p><code>urlopen</code></p>
<p>å…¶ç»“æœè¿”å›ä¸€ä¸ª HTTPResposne ç±»å‹çš„å¯¹è±¡ï¼Œä¸»è¦åŒ…å« <code>readã€getheaderã€getheaders</code>ç­‰æ–¹æ³•ï¼Œä»¥åŠ <code>msgã€versionã€statusã€reason</code>ç­‰å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">data = response.read().decode()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p><code>response.status</code> 1**ï¼šä¿¡æ¯çŠ¶æ€ï¼Œ2**ï¼šæˆåŠŸçŠ¶æ€ï¼Œè¯·æ±‚æˆåŠŸä¸º200 ï¼Œ3**ï¼šé‡å®šå‘ï¼Œ4**ï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œ400ä»£è¡¨è§£æå¤±è´¥ï¼Œ404 ä»£è¡¨ç½‘é¡µæœªæ‰¾åˆ°ã€‚</p>
<p><code>response.getheaders()</code> å¾—åˆ°headers</p>
</blockquote>
<ol>
<li><p><code>Request</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">req = request.Request(url=url, data=data, headers=headers, method=<span class="string">'POST'</span>)  </span><br><span class="line">response = request.urlopen(req)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>build_opener</code> å’Œ <code>Handler</code> å¯ä»¥å®ç°ä»£ç†ï¼Œå¯†ç ç™»å½•ç­‰å¤æ‚è¯·æ±‚ï¼Œä¾‹å­å¯<a href="https://python3webspider.cuiqingcai.com/3.1-shi-yong-urllib#2-request" target="_blank" rel="noopener">å‚è€ƒ</a></p>
</li>
</ol>
<h3 id="error"><a href="#error" class="headerlink" title="error"></a>error</h3><p>è¯¥æ¨¡å—å®šä¹‰äº†ç”± request æ¨¡å—äº§ç”Ÿçš„å¼‚å¸¸ã€‚</p>
<ol>
<li><p><code>URLError</code> æœ‰ä¸€ä¸ªå±æ€§<code>reason</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:  </span><br><span class="line">    response = request.urlopen(<span class="number">404</span>_url)  </span><br><span class="line"><span class="keyword">except</span> error.URLError <span class="keyword">as</span> e:  </span><br><span class="line">    print(e.reason)  <span class="comment">#  Not Found ï¼ˆå¯¹åº”403ï¼‰</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>HTTPError</code> ä¸“é—¨å¤„ç†HTTPè¯·æ±‚çš„é”™è¯¯ï¼Œå…·æœ‰<code>code</code>, <code>reason</code>, <code>headers</code> ä¸‰ä¸ªå±æ€§</p>
</li>
</ol>
<h3 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h3><p>è¯¥æ¨¡å—å®šä¹‰äº†å¤„ç† URL çš„æ ‡å‡†æ¥å£ï¼Œä¾‹å¦‚å®ç° URL å„éƒ¨åˆ†çš„æŠ½å–ã€åˆå¹¶ä»¥åŠé“¾æ¥è½¬æ¢ã€‚</p>
<ol>
<li><p><code>quote</code> å°†å†…å®¹è½¬åŒ–ä¸º URL ç¼–ç çš„æ ¼å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = <span class="string">"å°è¯´"</span></span><br><span class="line">key_ASCII = quote(key)</span><br><span class="line">print(key_ASCII)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>unquote</code> å°† URL æ ¼å¼å†…å®¹è§£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">key = <span class="string">"%E5%B0%8F%E8%AF%B4"</span></span><br><span class="line">print(unqoute(key))</span><br></pre></td></tr></table></figure>
<p><strong><code>request</code> ä¸­ä¹Ÿæœ‰qoute</strong></p>
</li>
</ol>
<h3 id="robotparser"><a href="#robotparser" class="headerlink" title="robotparser"></a>robotparser</h3><p>è¯¥æ¨¡å—å¯ä»¥å®ç°ç½‘ç«™ Robots åè®®çš„åˆ†æã€‚</p>
<p>requestsæ˜¯ç”¨äºçˆ¬å–ç½‘é¡µæºç çš„ä¸€ä¸ªåº“ã€‚</p>
<h2 id="3-requests"><a href="#3-requests" class="headerlink" title="3. requests"></a>3. requests</h2><h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p><code>get</code> æ–¹æ³•ä»¥ GET æ–¹å¼è¯·æ±‚ç½‘é¡µï¼Œè¿”å›å¾—åˆ°ä¸€ä¸ª Response å¯¹è±¡ï¼Œæœ‰<code>status_codeï¼Œtextï¼Œcookies</code> ç­‰å±æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">response=requests.get(url) </span><br><span class="line">data=response.text</span><br><span class="line">file_path = <span class="string">r"E:\pycharm\test.html"</span>  <span class="comment"># 'r'æ˜¯é˜²æ­¢å­—ç¬¦è½¬ä¹‰,å¦åˆ™\éœ€è¦å˜æˆ/</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f: </span><br><span class="line">    f.write(data)</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>å› ä¸ºWindowsæ“ä½œç³»ç»Ÿé»˜è®¤å­—ç¬¦ç¼–ç ä¸ºGBKï¼Œè€ŒPythoné»˜è®¤Unicode.utf-8ï¼Œå¦‚æœä¸å†™â€œencoding=â€˜utf-8â€™ â€å°±ä¼šæŠ¥é”™ã€‚</p>
<p>å¯¹äºäºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨<code>content</code> å±æ€§ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œç›´æ¥è·å¾—å›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†å±ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">"https://github.com/favicon.ico"</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'favicon.ico'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f: <span class="comment"># wb ä»¥äºŒè¿›åˆ¶æ–¹å¼å†™å…¥</span></span><br><span class="line">    f.write(r.content)</span><br></pre></td></tr></table></figure>
<p>æœ‰äº›ç½‘ç«™ç¦æ­¢æŠ“å–ï¼Œå¦‚Bç«™ï¼Œå¯ä»¥ä½¿ç”¨headersåŒ…å« User-Agent å­—æ®µä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨æ ‡è¯†ä¿¡æ¯ã€‚<a href="https://www.jianshu.com/p/da6a44d0791e" target="_blank" rel="noopener" title="User-agentå¤§å…¨">User-agentå¤§å…¨</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># urllib.error.HTTPError: HTTP Error 403: Forbidden</span></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">data = response.read().decode() </span><br><span class="line"><span class="comment"># æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">response=requests.get(url) </span><br><span class="line">data=response.text</span><br></pre></td></tr></table></figure>
<p>åœ¨è®¾ç½® Headers ä½¿ç”¨Cookieæ¥ç»´æŒç™»å½•çŠ¶æ€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'Cookie'</span>: <span class="string">'cookie_content'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œ<code>request</code>è¿˜æœ‰<code>put, post, delete, options</code> ç­‰æ–¹æ³•å®ç° POSTã€PUTã€DELETEã€OPTIONS ç­‰è¯·æ±‚ã€‚</p>
<h3 id="sessionä¼šè¯ç»´æŒ"><a href="#sessionä¼šè¯ç»´æŒ" class="headerlink" title="sessionä¼šè¯ç»´æŒ"></a>sessionä¼šè¯ç»´æŒ</h3><p>é€šè¿‡ç”¨ get æ–¹æ³•ç™»å½•æŸä¸ªç½‘ç«™ï¼Œç”¨ get æ–¹æ³•ç¬¬äºŒæ¬¡å»è¯·æ±‚ä¸ªäººä¿¡æ¯é¡µé¢ï¼Œå¹¶ä¸èƒ½æˆåŠŸã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">requests.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.text) <span class="comment"># cookies æ˜¯ç©ºå­—å…¸</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•è®¾ç½®ä¸€æ¬¡cookiesï¼Œç»´æŒå¯¹è¯ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">r = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure>
<h2 id="4-ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨"><a href="#4-ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨" class="headerlink" title="4. ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨"></a>4. ä½¿ç”¨Seleniumè°ƒç”¨æµè§ˆå™¨</h2><p><a href="[http://www.selenium.org.cn/](http://www.selenium.org.cn/">Selenium</a>)æ˜¯webè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é›†ï¼ŒåŒ…æ‹¬IDEã€Gridã€RCï¼ˆselenium 1.0ï¼‰ã€WebDriverï¼ˆselenium 2.0ï¼‰ç­‰ã€‚</p>
<p> <a href="[https://blog.csdn.net/huilan_same/article/details/52615123](https://blog.csdn.net/huilan_same/article/details/52615123">seleniumè‡ªåŠ¨åŒ–èµ„æºæ•´ç†</a>)</p>
<h3 id="1-è°ƒç”¨Chromeæµè§ˆå™¨"><a href="#1-è°ƒç”¨Chromeæµè§ˆå™¨" class="headerlink" title="1. è°ƒç”¨Chromeæµè§ˆå™¨"></a>1. è°ƒç”¨Chromeæµè§ˆå™¨</h3><ol>
<li><p>æŸ¥çœ‹æœ¬åœ°Chromeç‰ˆæœ¬</p>
</li>
<li><p>ä¸‹è½½<a href="http://npm.taobao.org/mirrors/chromedriver" target="_blank" rel="noopener">Chromedriver</a></p>
</li>
<li><p>å°†chromedriver.exeæ”¾åˆ°python pathä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> selenium.webdriver</span><br><span class="line"></span><br><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line"></span><br><span class="line">driver = selenium.webdriver.Chrome()</span><br><span class="line">driver.get(url)</span><br><span class="line">data = driver.page_source</span><br><span class="line"></span><br><span class="line">file_path = <span class="string">r"E:\pycharm-çˆ¬è™«\bilibili\é¦–é¡µ_selenium.html"</span></span><br><span class="line"><span class="keyword">with</span> open(file_path, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data)</span><br><span class="line"></span><br><span class="line">driver.close()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-è°ƒç”¨FireFoxæµè§ˆå™¨"><a href="#2-è°ƒç”¨FireFoxæµè§ˆå™¨" class="headerlink" title="2. è°ƒç”¨FireFoxæµè§ˆå™¨"></a>2. è°ƒç”¨FireFoxæµè§ˆå™¨</h3><ol>
<li>ä¸‹è½½<a href="https://github.com/mozilla/geckodriver/releases" target="_blank" rel="noopener">geckodriver</a>ï¼Œå¹¶å°†å…¶æ”¾å…¥PATHä¸­ã€‚</li>
<li>driver = selenium.webdriver.Firefox()</li>
</ol>
<h2 id="5-bs4-BeautifulSoupè§£æHTML"><a href="#5-bs4-BeautifulSoupè§£æHTML" class="headerlink" title="5. bs4.BeautifulSoupè§£æHTML"></a>5. bs4.BeautifulSoupè§£æHTML</h2><p>bs4å³<a href="http://www.crummy.com/software/BeautifulSoup/" target="_blank" rel="noopener">BeautifulSoup4</a> ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ä»HTMLæˆ–XMLæ–‡ä»¶ä¸­æå–æ•°æ®çš„Pythonåº“ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">data = <span class="string">'&lt;b class="boldest"&gt;Extremely bold&lt;/b&gt;'</span></span><br><span class="line">soup = BeautifulSoup(data, <span class="string">"html.parser"</span>) <span class="comment"># dataä¸ºhtmlæ ¼å¼çš„æ•°æ®</span></span><br></pre></td></tr></table></figure>
<p>Beautiful Soupå°†å¤æ‚HTMLæ–‡æ¡£è½¬æ¢æˆä¸€ä¸ªå¤æ‚çš„æ ‘å½¢ç»“æ„,æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯Pythonå¯¹è±¡,æ‰€æœ‰å¯¹è±¡å¯ä»¥å½’çº³ä¸º4ç§: <code>Tag</code>, <code>NavigableString</code> , <code>BeautifulSoup</code> , <code>Comment</code> ã€‚</p>
<h3 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h3><p><code>tag</code> çš„å±æ€§æœ‰<code>name</code> å’Œ <code>attributes</code>ï¼Œæ–¹æ³•<code>get()</code> , å¦‚æœä¸ç¡®å®šæŸä¸ªå±æ€§æ˜¯å¦å­˜åœ¨æ—¶,ç”¨ <code>tag.get(&#39;attr&#39;)</code> æ–¹æ³•å»è·å–å®ƒ,è·Ÿè·å–Pythonå­—å…¸çš„keyä¸€æ ·&gt;</p>
<p>ä¸€ä¸ª<code>tag</code> å¯èƒ½æœ‰å¾ˆå¤šå±æ€§ï¼Œå±æ€§çš„æ“ä½œä¸<strong>å­—å…¸</strong>ç›¸åŒï¼Œå¯ä»¥è¢«æ·»åŠ ï¼Œåˆ é™¤æˆ–ä¿®æ”¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tag = soup.b <span class="comment"># tag b</span></span><br><span class="line">tag.name  <span class="comment"># 'b'</span></span><br><span class="line">tag.name = <span class="string">"blockquote"</span> <span class="comment"># tag &lt;blockquote class="boldest"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">tag[<span class="string">'class'</span>] <span class="comment"># boldest</span></span><br><span class="line">tag.attrs <span class="comment"># &#123;'class': 'boldest'&#125;</span></span><br><span class="line">tag[<span class="string">'class'</span>] = <span class="string">'verybold'</span> <span class="comment"># ä¿®æ”¹ &lt;blockquote class="verybold" &gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line">tag[<span class="string">'id'</span>] = <span class="number">1</span>   <span class="comment"># æ·»åŠ  &lt;blockquote class="verybold" id="1"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="keyword">del</span> tag[<span class="string">'class'</span>] <span class="comment"># &lt;blockquote id="1"&gt;Extremely bold&lt;/blockquote&gt;</span></span><br><span class="line"><span class="keyword">del</span> tag[<span class="string">'id'</span>]    <span class="comment"># &lt;blockquote&gt;Extremely bold&lt;/blockquote&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>HTML5</code> ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—å¯ä»¥åŒ…å«å¤šä¸ªå€¼çš„å±æ€§ï¼Œ<code>class</code> (ä¸€ä¸ªtagå¯ä»¥æœ‰å¤šä¸ªCSSçš„class). <code>rel</code>  <code>rev</code> ï¼Œ <code>accept-charset</code> ï¼Œ <code>headers</code> ï¼Œ <code>accesskey</code> ç­‰ã€‚</p>
<p>å¤šå€¼å±æ€§çš„è¿”å›å€¼ä¸ºlistï¼Œ éå¤šå€¼å±æ€§çš„è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ï¼š</p>
<p><strong>æ³¨æ„ï¼šXMLæ ¼å¼çš„tagä¸åŒ…å«å¤šå€¼å±æ€§ã€‚</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šå€¼å±æ€§class</span></span><br><span class="line">css_soup = BeautifulSoup(<span class="string">'&lt;p class="body strikeout"&gt;&lt;/p&gt;'</span>)</span><br><span class="line">css_soup.p[<span class="string">'class'</span>]</span><br><span class="line"><span class="comment"># ["body", "strikeout"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éå¤šå€¼å±æ€§id</span></span><br><span class="line">id_soup = BeautifulSoup(<span class="string">'&lt;p id="my id"&gt;&lt;/p&gt;'</span>)</span><br><span class="line">id_soup.p[<span class="string">'id'</span>]</span><br><span class="line"><span class="comment"># 'my id'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šå€¼å±æ€§ä¿®æ”¹æ—¶</span></span><br><span class="line">rel_soup = BeautifulSoup(<span class="string">'&lt;p&gt;Back to the &lt;a rel="index"&gt;homepage&lt;/a&gt;&lt;/p&gt;'</span>)</span><br><span class="line">rel_soup.a[<span class="string">'rel'</span>] = [<span class="string">'index'</span>, <span class="string">'contents'</span>]</span><br><span class="line">print(rel_soup.p)</span><br><span class="line"><span class="comment"># &lt;p&gt;Back to the &lt;a rel="index contents"&gt;homepage&lt;/a&gt;&lt;/p&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h3><p>å­—ç¬¦ä¸²å¸¸è¢«åŒ…å«åœ¨<code>tag</code> å†…ã€‚Beautiful Soupç”¨<code>NavigableString</code>ç±»æ¥åŒ…è£…tagä¸­çš„å­—ç¬¦ä¸²: <code>tag.string</code></p>
<p>tagä¸­åŒ…å«çš„å­—ç¬¦ä¸²ä¸èƒ½ç¼–è¾‘,ä½†æ˜¯å¯ä»¥ç”¨ <code>replace_with()</code> æ–¹æ³•æ›¿æ¢æˆå…¶å®ƒçš„å­—ç¬¦ä¸²</p>
<h3 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h3><p><code>BeautifulSoup</code> å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å…¨éƒ¨å†…å®¹.å¤§éƒ¨åˆ†æ—¶å€™,å¯ä»¥æŠŠå®ƒå½“ä½œ <code>Tag</code> å¯¹è±¡ï¼Œå®ƒæ”¯æŒ éå†æ–‡æ¡£æ ‘ å’Œ æœç´¢æ–‡æ¡£æ ‘ ä¸­æè¿°çš„å¤§éƒ¨åˆ†çš„æ–¹æ³•ã€‚</p>
<h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><p>å¤„ç†HTMLå’ŒXMLä¸­çš„æ³¨é‡Šéƒ¨åˆ†ï¼Œ<code>Comment</code> å¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ <code>NavigableString</code> å¯¹è±¡ï¼Œä½†æ˜¯å½“å®ƒå‡ºç°åœ¨HTMLæ–‡æ¡£ä¸­æ—¶, <code>Comment</code> å¯¹è±¡ä¼šä½¿ç”¨ç‰¹æ®Šçš„æ ¼å¼è¾“å‡ºã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">markup = <span class="string">"&lt;b&gt;&lt;!--Hey, buddy. Want to buy a used parser?--&gt;&lt;/b&gt;"</span></span><br><span class="line">soup = BeautifulSoup(markup)</span><br><span class="line">comment = soup.b.string</span><br><span class="line">type(comment)</span><br><span class="line"><span class="comment"># &lt;class 'bs4.element.Comment'&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="éå†æ–‡æ¡£æ ‘"><a href="#éå†æ–‡æ¡£æ ‘" class="headerlink" title="éå†æ–‡æ¡£æ ‘"></a>éå†æ–‡æ¡£æ ‘</h3><p>ä¸€ä¸ª<code>tag</code> å¯èƒ½åŒ…å«å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…¶ä»–<code>tag</code> ï¼Œè¿™äº›éƒ½æ˜¯è¯¥<code>tag</code> çš„å­èŠ‚ç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç‚¹å–å±æ€§çš„æ–¹å¼åªèƒ½è·å¾—å½“å‰åå­—çš„ç¬¬ä¸€ä¸ªtag</span></span><br><span class="line">soup.head</span><br><span class="line">soup.body.b</span><br><span class="line"><span class="comment"># æƒ³è¦å¾—åˆ°æ‰€æœ‰çš„&lt;a&gt;æ ‡ç­¾</span></span><br><span class="line">soup.find_all(<span class="string">'a'</span>) <span class="comment"># è¿”å›list</span></span><br></pre></td></tr></table></figure>
<h4 id="å­èŠ‚ç‚¹"><a href="#å­èŠ‚ç‚¹" class="headerlink" title="å­èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹</h4><h5 id="contents-å’Œ-children"><a href="#contents-å’Œ-children" class="headerlink" title=".contents å’Œ .children"></a>.contents å’Œ .children</h5><p><code>tag</code> çš„ <code>.contents</code> å±æ€§å¯ä»¥å°†<code>tag</code> çš„å­èŠ‚ç‚¹ä»¥åˆ—è¡¨çš„æ–¹å¼è¾“å‡º:</p>
<p>é€šè¿‡<code>tag</code> çš„ <code>.children</code> ç”Ÿæˆå™¨,å¯ä»¥å¯¹<code>tag</code> çš„å­èŠ‚ç‚¹è¿›è¡Œå¾ªç¯:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">head_tag = soup.head  <span class="comment"># &lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line">title_tag = head_tag.contents[<span class="number">0</span>]  <span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line">title_tag.contents    <span class="comment"># [u'The Dormouse's story']</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> title_tag.children:</span><br><span class="line">    print(child)      <span class="comment"># The Dormouse's story</span></span><br></pre></td></tr></table></figure>
<h5 id="descendants"><a href="#descendants" class="headerlink" title=".descendants"></a>.descendants</h5><p><code>.contents</code> å’Œ <code>.children</code> å±æ€§ä»…åŒ…å«tagçš„ç›´æ¥å­èŠ‚ç‚¹.ä¾‹å¦‚,<head>æ ‡ç­¾åªæœ‰ä¸€ä¸ªç›´æ¥å­èŠ‚ç‚¹<code>&lt;title&gt;</code> ä½†<code>&lt;title&gt;</code> æ ‡ç­¾ä¹ŸåŒ…å«ä¸€ä¸ªå­èŠ‚ç‚¹:å­—ç¬¦ä¸² â€œThe Dormouseâ€™s storyâ€ï¼Œè¿™ç§æƒ…å†µä¸‹å­—ç¬¦ä¸² â€œThe Dormouseâ€™s storyâ€ä¹Ÿå±äº<code>&lt;head&gt;</code> æ ‡ç­¾çš„å­å­™èŠ‚ç‚¹. <code>.descendants</code> å±æ€§å¯ä»¥å¯¹æ‰€æœ‰tagçš„å­å­™èŠ‚ç‚¹è¿›è¡Œé€’å½’å¾ªç¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> head_tag.descendants:</span><br><span class="line">    print(child)</span><br><span class="line">    <span class="comment"># &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line">    <span class="comment"># The Dormouse's story</span></span><br></pre></td></tr></table></figure>
<h5 id="string"><a href="#string" class="headerlink" title=".string"></a>.string</h5><p>å¦‚æœ<code>tag</code> åªæœ‰ä¸€ä¸ª <code>NavigableString</code> ç±»å‹å­èŠ‚ç‚¹,é‚£ä¹ˆè¿™ä¸ª<code>tag</code> å¯ä»¥ä½¿ç”¨ <code>.string</code> å¾—åˆ°å­èŠ‚ç‚¹</p>
<p>å¦åˆ™ï¼Œ<code>.string</code> çš„è¾“å‡ºç»“æœæ˜¯ <code>None</code></p>
<p>è¾“å‡ºçš„å­—ç¬¦ä¸²ä¸­å¯èƒ½åŒ…å«äº†å¾ˆå¤šç©ºæ ¼æˆ–ç©ºè¡Œ,ä½¿ç”¨ <code>.stripped_strings</code> å¯ä»¥å»é™¤å¤šä½™ç©ºç™½å†…å®¹</p>
<h6 id="bs4-element-get-text"><a href="#bs4-element-get-text" class="headerlink" title="bs4.element.get_text()"></a>bs4.element.get_text()</h6><p> Get all child strings, concatenated using the given separator (é»˜è®¤æ˜¯ç©ºæ ¼)</p>
<h4 id="çˆ¶èŠ‚ç‚¹"><a href="#çˆ¶èŠ‚ç‚¹" class="headerlink" title="çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹</h4><h5 id="parent"><a href="#parent" class="headerlink" title=".parent"></a>.parent</h5><h5 id="parents"><a href="#parents" class="headerlink" title=".parents"></a>.parents</h5><p>é€šè¿‡å…ƒç´ çš„ <code>.parents</code> å±æ€§å¯ä»¥é€’å½’å¾—åˆ°å…ƒç´ çš„æ‰€æœ‰çˆ¶è¾ˆèŠ‚ç‚¹</p>
<h5 id="å…„å¼ŸèŠ‚ç‚¹"><a href="#å…„å¼ŸèŠ‚ç‚¹" class="headerlink" title="å…„å¼ŸèŠ‚ç‚¹"></a>å…„å¼ŸèŠ‚ç‚¹</h5><p>åŒä¸€ä¸ªå…ƒç´ çš„å­èŠ‚ç‚¹</p>
<h5 id="next-sibling-å’Œ-previous-sibling"><a href="#next-sibling-å’Œ-previous-sibling" class="headerlink" title=".next_sibling å’Œ .previous_sibling"></a>.next_sibling å’Œ .previous_sibling</h5><p>åœ¨æ–‡æ¡£æ ‘ä¸­,ä½¿ç”¨ <code>.next_sibling</code> å’Œ <code>.previous_sibling</code> å±æ€§æ¥æŸ¥è¯¢å…„å¼ŸèŠ‚ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sibling_soup = BeautifulSoup(<span class="string">"&lt;a&gt;&lt;b&gt;text1&lt;/b&gt;&lt;c&gt;text2&lt;/c&gt;&lt;/b&gt;&lt;/a&gt;"</span>)</span><br><span class="line">sibling_soup.b.next_sibling  <span class="comment"># &lt;c&gt;text2&lt;/c&gt;</span></span><br><span class="line">sibling_soup.c.previous_sibling <span class="comment"># &lt;b&gt;text1&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="next-siblings-å’Œ-previous-siblings"><a href="#next-siblings-å’Œ-previous-siblings" class="headerlink" title=".next_siblings å’Œ .previous_siblings"></a>.next_siblings å’Œ .previous_siblings</h5><p>å¯¹å½“å‰èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹è¿­ä»£è¾“å‡º</p>
<h3 id="æœç´¢æ–‡æ¡£æ ‘"><a href="#æœç´¢æ–‡æ¡£æ ‘" class="headerlink" title="æœç´¢æ–‡æ¡£æ ‘"></a>æœç´¢æ–‡æ¡£æ ‘</h3><p><code>Beautiful Soup</code> ä¸­å®šä¹‰çš„æœç´¢æ–¹æ³•ï¼Œæ¯”å¦‚ <code>find()</code> å’Œ <code>find_all()</code></p>
<h4 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h4><p>find_all()</p>
<p>å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ—è¡¨ï¼ŒTrueï¼Œæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.find_all(<span class="string">'b'</span>) <span class="comment"># b æ ‡ç­¾</span></span><br><span class="line">soup.find_all(re.compile(<span class="string">"^b"</span>)) <span class="comment"># ä»¥bå¼€å¤´çš„æ ‡ç­¾</span></span><br><span class="line">soup.find_all([<span class="string">"a"</span>, <span class="string">"b"</span>]) <span class="comment"># å«æœ‰aæˆ–bçš„æ ‡ç­¾</span></span><br><span class="line">soup.find_all(<span class="literal">True</span>) <span class="comment"># True å¯ä»¥åŒ¹é…ä»»ä½•å€¼,æ‰¾åˆ°æ‰€æœ‰çš„tag,ä½†æ˜¯ä¸ä¼šè¿”å›å­—ç¬¦ä¸²èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"># æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_class_but_no_id</span><span class="params">(tag)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">'class'</span>) <span class="keyword">and</span> <span class="keyword">not</span> tag.has_attr(<span class="string">'id'</span>) <span class="comment"># æœ‰classï¼Œæ— id</span></span><br><span class="line">soup.find_all(has_class_but_no_id)</span><br></pre></td></tr></table></figure>
<h4 id="find-all"><a href="#find-all" class="headerlink" title="find_all())"></a>find_all())</h4><p><code>find_all(name, attrs, recursive , text , **kwargs)</code></p>
<ol>
<li><p>å¦‚æœä¸€ä¸ªæŒ‡å®šåå­—çš„å‚æ•°ä¸æ˜¯æœç´¢å†…ç½®çš„å‚æ•°å,æœç´¢æ—¶ä¼šæŠŠè¯¥å‚æ•°å½“ä½œæŒ‡å®šåå­—<code>tag</code> çš„å±æ€§æ¥æœç´¢<code>soup.find_all(id=&#39;link2&#39;)</code> </p>
</li>
<li><p>æœ‰äº›tagå±æ€§åœ¨æœç´¢ä¸èƒ½ä½¿ç”¨,æ¯”å¦‚HTML5ä¸­çš„ data-* å±æ€§,ä½†æ˜¯å¯ä»¥é€šè¿‡ <code>find_all()</code> æ–¹æ³•çš„ <code>attrs</code> å‚æ•°å®šä¹‰ä¸€ä¸ªå­—å…¸å‚æ•°æ¥æœç´¢åŒ…å«ç‰¹æ®Šå±æ€§çš„tag: <code>data_soup.find_all(attrs={&quot;data-foo&quot;: &quot;value&quot;})</code></p>
</li>
<li><p>æŒ‰ç…§CSSç±»åæœç´¢<code>tag</code> , ä½†æ ‡è¯†CSSç±»åçš„å…³é”®å­— <code>class</code> åœ¨Pythonä¸­æ˜¯ä¿ç•™å­—,ä½¿ç”¨ <code>class</code> åšå‚æ•°ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯.ä»<code>Beautiful Soup</code> çš„4.1.1ç‰ˆæœ¬å¼€å§‹,å¯ä»¥é€šè¿‡ class_ å‚æ•°æœç´¢æœ‰æŒ‡å®šCSSç±»åçš„<code>tag</code> : <code>soup.find_all(&quot;a&quot;, class_=&quot;sister&quot;)</code></p>
</li>
<li><p>é€šè¿‡ <code>text</code> å‚æ•°å¯ä»¥æœæœæ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²å†…å®¹</p>
</li>
<li><p><code>find_all()</code> æ–¹æ³•è¿”å›å…¨éƒ¨çš„æœç´¢ç»“æ„,å¦‚æœæ–‡æ¡£æ ‘å¾ˆå¤§é‚£ä¹ˆæœç´¢ä¼šå¾ˆæ…¢.å¦‚æœä¸éœ€è¦å…¨éƒ¨ç»“æœ,å¯ä»¥ä½¿ç”¨ <code>limit</code> å‚æ•°é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡.æ•ˆæœä¸SQLä¸­çš„limitå…³é”®å­—ç±»ä¼¼,å½“æœç´¢åˆ°çš„ç»“æœæ•°é‡è¾¾åˆ° <code>limit</code> çš„é™åˆ¶æ—¶,å°±åœæ­¢æœç´¢è¿”å›ç»“æœ.  <code>soup.find_all(&quot;a&quot;, limit=2)</code></p>
</li>
<li><p>recursive é»˜è®¤ä¸ºTrueï¼Œæ£€ç´¢å½“å‰tagçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œ<code>soup.html.find_all(&quot;title&quot;, recursive=False)</code> æœç´¢<code>tag</code> çš„ç›´æ¥å­èŠ‚ç‚¹</p>
</li>
<li><p>```python</p>
<h1 id="è¿™ä¸¤è¡Œä»£ç ç­‰ä»·"><a href="#è¿™ä¸¤è¡Œä»£ç ç­‰ä»·" class="headerlink" title="è¿™ä¸¤è¡Œä»£ç ç­‰ä»·"></a>è¿™ä¸¤è¡Œä»£ç ç­‰ä»·</h1><p>soup.find_all(â€œaâ€)<br>soup(â€œaâ€)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#### find()</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line"># è¿™ä¸¤è¡Œä»£ç å‡ ä¹ç­‰ä»·</span><br><span class="line">soup.find_all(&#39;title&#39;, limit&#x3D;1) # è¿”å›åˆ—è¡¨</span><br><span class="line">soup.find(&#39;title&#39;) # è¿”å›ç»“æœ ç­‰ä»·äº soup.title</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="selector-CSSé€‰æ‹©å™¨-çš„ç”¨æ³•"><a href="#selector-CSSé€‰æ‹©å™¨-çš„ç”¨æ³•" class="headerlink" title="selector (CSSé€‰æ‹©å™¨) çš„ç”¨æ³•"></a>selector (CSSé€‰æ‹©å™¨) çš„ç”¨æ³•</h4><p>Beautiful Soupæ”¯æŒå¤§éƒ¨åˆ†çš„CSSï¼ˆCSSï¼Œå…¨ç§°å«ä½œ Cascading Style Sheetsï¼Œå³å±‚å æ ·å¼è¡¨ï¼‰é€‰æ‹©å™¨ï¼Œ åœ¨ Tag æˆ– BeautifulSoup å¯¹è±¡çš„ .select() æ–¹æ³•ä¸­ä¼ å…¥å­—ç¬¦ä¸²å‚æ•°, å³å¯ä½¿ç”¨CSSé€‰æ‹©å™¨çš„è¯­æ³•æ‰¾åˆ°tagã€‚</p>
<h5 id="CSSæ ·å¼"><a href="#CSSæ ·å¼" class="headerlink" title="CSSæ ·å¼"></a>CSSæ ·å¼</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#head_wrapper</span><span class="selector-class">.s-ps-islite</span> <span class="selector-class">.s-p-top</span> &#123;   </span><br><span class="line">    <span class="attribute">position</span>: absolute;  </span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40px</span>;  </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;  </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">181px</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡¨ç¤º id =head_wrapper ä¸”ï¼ˆæ²¡æœ‰ç©ºæ ¼è¡¨æ˜¯&amp;ï¼‰class ä¸º s-ps-isliteçš„èŠ‚ç‚¹ï¼Œç„¶åå†é€‰ä¸­å…¶å†…éƒ¨ï¼ˆæœ‰ç©ºæ ¼è¡¨ç¤ºå†…éƒ¨ï¼‰çš„ class ä¸º s-p-top çš„èŠ‚ç‚¹ã€‚å­—å…¸å®šä¹‰äº†è¿™ä¸ªå…ƒç´ çš„å¸ƒå±€æ–¹å¼</p>
<p>è°·æ­Œæµè§ˆå™¨â†’å³é”®â†’æ£€æŸ¥â†’é¼ æ ‡æ”¾åˆ°ç½‘é¡µä¹¦åä¸Šï¼Œåœ¨æ£€æŸ¥çª—å£å³é”®â†’copyâ†’copy selectorï¼Œç»“æœå¦‚ä¸‹(&gt; æ‰¾åˆ°æŸä¸ªtagæ ‡ç­¾ä¸‹çš„å­æ ‡ç­¾)ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#subject_list</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(1)</span> &gt; <span class="selector-tag">div</span><span class="selector-class">.info</span> &gt; <span class="selector-tag">h2</span> &gt; <span class="selector-tag">a</span></span><br></pre></td></tr></table></figure>
<h5 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h5><ul>
<li>CSS é€‰æ‹©å™¨ç”¨æ¥å®šä½èŠ‚ç‚¹ï¼Œæ ¹æ® <strong>idã€classã€æ ‡ç­¾åç­›é€‰</strong>æ˜¯å…¶ä¸­æœ€å¸¸ç”¨çš„3ç§è¡¨ç¤ºæ–¹å¼ã€‚</li>
<li>CSS é€‰æ‹©å™¨è¿˜æ”¯æŒåµŒå¥—é€‰æ‹©ï¼Œå„ä¸ªé€‰æ‹©å™¨ä¹‹é—´<strong>ç©ºæ ¼åˆ†éš”</strong>ä»£è¡¨<strong>åµŒå¥—å…³ç³»</strong>ï¼Œå¦‚æœ<strong>ä¸åŠ ç©ºæ ¼</strong>ï¼Œä»£è¡¨<strong>å¹¶åˆ—</strong>å…³ç³»ã€‚</li>
<li><code>ul &gt; li</code>è¡¨ç¤ºé€‰æ‹©çˆ¶èŠ‚ç‚¹ä¸º ul èŠ‚ç‚¹çš„æ‰€æœ‰ li èŠ‚ç‚¹</li>
<li><code>li:nth-child(n)</code> è¡¨ç¤ºé€‰æ‹©å±äºå…¶çˆ¶èŠ‚ç‚¹çš„ç¬¬nä¸ªå­èŠ‚ç‚¹çš„æ‰€æœ‰ li èŠ‚ç‚¹</li>
<li>CSSé€‰æ‹©å™¨åŠå…¶ä»–è¯­æ³•è§„åˆ™å‚è§<a href="https://python3webspider.cuiqingcai.com/2.2web-wang-ye-ji-chu#2-2-4-xuan-ze-qi" target="_blank" rel="noopener">è¯¥è¡¨æ ¼</a></li>
</ul>
<h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><p>é€šè¿‡get_text()å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç å¾—åˆ°æ¯ä¸€é¡µé¢çš„ä¹¦åï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">book_name_list = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">21</span>): <span class="comment"># æ¯é¡µ20æœ¬ä¹¦</span></span><br><span class="line">        book_name = soup.select(<span class="string">"#subject_list &gt; ul &gt; li:nth-child("</span> + str(j) + <span class="string">") &gt; div.info &gt; h2 &gt; a"</span>)  </span><br><span class="line">        <span class="comment"># ç¬¬29é¡µåªæœ‰19æœ¬ä¹¦</span></span><br><span class="line">        <span class="keyword">for</span> book_name <span class="keyword">in</span> book_name:</span><br><span class="line">            book_name_list.append(book_name.get_text().replace(<span class="string">" "</span>,<span class="string">""</span>).replace(<span class="string">"\r"</span>, <span class="string">""</span>).replace(<span class="string">"\n"</span>, <span class="string">""</span>))</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹æ–‡æ¡£æ ‘"><a href="#ä¿®æ”¹æ–‡æ¡£æ ‘" class="headerlink" title="ä¿®æ”¹æ–‡æ¡£æ ‘"></a>ä¿®æ”¹æ–‡æ¡£æ ‘</h3><h3 id="è§£æéƒ¨åˆ†æ–‡æ¡£"><a href="#è§£æéƒ¨åˆ†æ–‡æ¡£" class="headerlink" title="è§£æéƒ¨åˆ†æ–‡æ¡£"></a>è§£æéƒ¨åˆ†æ–‡æ¡£</h3><p>å¦‚æœä»…ä»…å› ä¸ºæƒ³è¦æŸ¥æ‰¾æ–‡æ¡£ä¸­çš„<a>æ ‡ç­¾è€Œå°†æ•´ç‰‡æ–‡æ¡£è¿›è¡Œè§£æ,å®åœ¨æ˜¯æµªè´¹å†…å­˜å’Œæ—¶é—´.æœ€å¿«çš„æ–¹æ³•æ˜¯ä»ä¸€å¼€å§‹å°±æŠŠ<a>æ ‡ç­¾ä»¥å¤–çš„ä¸œè¥¿éƒ½å¿½ç•¥æ‰. <code>SoupStrainer</code> ç±»å¯ä»¥å®šä¹‰æ–‡æ¡£çš„æŸæ®µå†…å®¹,è¿™æ ·æœç´¢æ–‡æ¡£æ—¶å°±ä¸å¿…å…ˆè§£ææ•´ç¯‡æ–‡æ¡£,åªä¼šè§£æåœ¨ <code>SoupStrainer</code> ä¸­å®šä¹‰è¿‡çš„æ–‡æ¡£. åˆ›å»ºä¸€ä¸ª <code>SoupStrainer</code> å¯¹è±¡å¹¶ä½œä¸º <code>parse_only</code> å‚æ•°ç»™ <code>BeautifulSoup</code> çš„æ„é€ æ–¹æ³•å³å¯.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> SoupStrainer</span><br><span class="line">only_a_tags = SoupStrainer(<span class="string">"a"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-è§£æåº“pyquery"><a href="#6-è§£æåº“pyquery" class="headerlink" title="6. è§£æåº“pyquery"></a>6. è§£æåº“pyquery</h2><p>ç”¨æ³•å’ŒJQueryç±»ä¼¼</p>
<h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><h4 id="å­—ç¬¦ä¸²åˆå§‹åŒ–"><a href="#å­—ç¬¦ä¸²åˆå§‹åŒ–" class="headerlink" title="å­—ç¬¦ä¸²åˆå§‹åŒ–"></a>å­—ç¬¦ä¸²åˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html = <span class="string">" &lt;html blabla"</span></span><br><span class="line">pq(html)</span><br></pre></td></tr></table></figure>
<h4 id="URLåˆå§‹åŒ–"><a href="#URLåˆå§‹åŒ–" class="headerlink" title="URLåˆå§‹åŒ–"></a>URLåˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br><span class="line">doc = pq(url=<span class="string">'http://cuiqingcai.com'</span>)</span><br><span class="line">print(doc(<span class="string">'title'</span>))</span><br></pre></td></tr></table></figure>
<p>PyQuery å¯¹è±¡ä¼šé¦–å…ˆè¯·æ±‚è¿™ä¸ª URLï¼Œç„¶åç”¨å¾—åˆ°çš„ HTML å†…å®¹å®Œæˆåˆå§‹åŒ–ï¼Œè¿™å…¶å®å°±ç›¸å½“äºç”¨ç½‘é¡µçš„æºä»£ç ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’ç»™ PyQuery ç±»æ¥åˆå§‹åŒ–ã€‚</p>
<p>ç›¸å½“äºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">doc = pq(requests.get(<span class="string">'http://cuiqingcai.com'</span>).text)</span><br><span class="line">print(doc(<span class="string">'title'</span>))</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡ä»¶åˆå§‹åŒ–"><a href="#æ–‡ä»¶åˆå§‹åŒ–" class="headerlink" title="æ–‡ä»¶åˆå§‹åŒ–"></a>æ–‡ä»¶åˆå§‹åŒ–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pq(filename=<span class="string">'dem.html'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="CSSé€‰æ‹©å™¨-1"><a href="#CSSé€‰æ‹©å™¨-1" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">doc=pq(html)</span><br><span class="line">print(doc(<span class="string">"#content .info name"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h3><h4 id="å­èŠ‚ç‚¹-1"><a href="#å­èŠ‚ç‚¹-1" class="headerlink" title="å­èŠ‚ç‚¹"></a>å­èŠ‚ç‚¹</h4><h5 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h5><p>æŸ¥æ‰¾æ‰€æœ‰å­å­™èŠ‚ç‚¹</p>
<p>ä¼šæ‰¾åˆ°æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå’ŒBeautifulSoupä¸­çš„find()ä¸åŒï¼Œç±»ä¼¼äºBSä¸­çš„find_all()</p>
<h5 id="children"><a href="#children" class="headerlink" title="children()"></a>children()</h5><p>åªæŸ¥æ‰¾å­èŠ‚ç‚¹ ï¼Œ æ”¯æŒCSSé€‰æ‹©å™¨</p>
<h4 id="çˆ¶èŠ‚ç‚¹-1"><a href="#çˆ¶èŠ‚ç‚¹-1" class="headerlink" title="çˆ¶èŠ‚ç‚¹"></a>çˆ¶èŠ‚ç‚¹</h4><h5 id="parent-1"><a href="#parent-1" class="headerlink" title="parent()"></a>parent()</h5><p>ç›´æ¥çˆ¶èŠ‚ç‚¹</p>
<h5 id="parents-1"><a href="#parents-1" class="headerlink" title="parents()"></a>parents()</h5><p>ç¥–è´¤çˆ¶èŠ‚ç‚¹</p>
<h4 id="å…„å¼ŸèŠ‚ç‚¹-1"><a href="#å…„å¼ŸèŠ‚ç‚¹-1" class="headerlink" title="å…„å¼ŸèŠ‚ç‚¹"></a>å…„å¼ŸèŠ‚ç‚¹</h4><h5 id="sublings"><a href="#sublings" class="headerlink" title="sublings()"></a>sublings()</h5><h3 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h3><p>PyQueryçš„é€‰æ‹©ç»“æœä¸ä¼šåƒBeautifulSoupä¸€æ ·è¿”å›listï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å¤šä¸ªæˆ–å•ä¸ªèŠ‚ç‚¹</p>
<p>è¿”å›å•ä¸ªèŠ‚ç‚¹å¯ä»¥ç›´æ¥ç”¨str()uè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œ</p>
<p>è¿”å›å¤šä¸ªèŠ‚ç‚¹éœ€è¦éå†ï¼Œæ–¯å¥¥ç”¨items()æ–¹æ³•ï¼Œè¿”å›ç”Ÿæˆå™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lis = doc(<span class="string">'li'</span>).items()</span><br><span class="line">print(type(lis)) <span class="comment"># class 'generator'</span></span><br><span class="line"><span class="keyword">for</span> li <span class="keyword">in</span> lis:</span><br><span class="line">    print(li, type(li))</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ä¿¡æ¯"><a href="#è·å–ä¿¡æ¯" class="headerlink" title="è·å–ä¿¡æ¯"></a>è·å–ä¿¡æ¯</h3><h4 id="è·å–å±æ€§attr"><a href="#è·å–å±æ€§attr" class="headerlink" title="è·å–å±æ€§attr()"></a>è·å–å±æ€§attr()</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = doc(<span class="string">'a'</span>)</span><br><span class="line">a.attr(<span class="string">'href'</span>)  <span class="comment"># åªä¼šè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ ‡ç­¾ï¼ˆèŠ‚ç‚¹ï¼‰çš„hrefå±æ€§</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè·å–æ‰€æœ‰èŠ‚ç‚¹çš„å±æ€§ï¼Œéœ€è¦è°ƒç”¨items()éå†ã€‚</p>
<h4 id="è·å–æ–‡æœ¬"><a href="#è·å–æ–‡æœ¬" class="headerlink" title="è·å–æ–‡æœ¬"></a>è·å–æ–‡æœ¬</h4><p>text()æ–¹æ³•è¿”å›<strong>æ‰€æœ‰</strong>èŠ‚ç‚¹ä¸‹çº¯æ–‡å­—å†…å®¹ï¼Œå³ä¸éœ€è¦éå†ã€‚</p>
<p>html()æ–¹æ³•è¿”å›HTMLæ–‡æœ¬ï¼Œå¤šä¸ªèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦<strong>éå†</strong>ã€‚</p>
<h3 id="èŠ‚ç‚¹æ“ä½œ"><a href="#èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="èŠ‚ç‚¹æ“ä½œ"></a>èŠ‚ç‚¹æ“ä½œ</h3><h4 id="addClass-å’Œ-removeClass"><a href="#addClass-å’Œ-removeClass" class="headerlink" title="addClass å’Œ removeClass"></a>addClass å’Œ removeClass</h4><p>æ·»åŠ ï¼Œåˆ é™¤classè¿™ä¸ªå±æ€§</p>
<h4 id="attrã€textã€html"><a href="#attrã€textã€html" class="headerlink" title="attrã€textã€html"></a>attrã€textã€html</h4><p>attræ“ä½œå…¶ä»–å±æ€§ï¼Œ<code>li.attr(&#39;name&#39;, &#39;link&#39;)</code> å°†nameå±æ€§çš„å€¼ä¿®æ”¹ä¸ºlinkï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ”¹å±æ€§ã€‚</p>
<p>å¦‚æœ attr æ–¹æ³•åªä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°çš„å±æ€§åï¼Œåˆ™æ˜¯è·å–è¿™ä¸ªå±æ€§å€¼ï¼›å¦‚æœä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨æ¥ä¿®æ”¹å±æ€§å€¼ã€‚text å’Œ html æ–¹æ³•å¦‚æœä¸ä¼ å‚æ•°ï¼Œåˆ™æ˜¯è·å–èŠ‚ç‚¹å†…çº¯æ–‡æœ¬å’Œ HTML æ–‡æœ¬ï¼›å¦‚æœä¼ å…¥å‚æ•°ï¼Œåˆ™è¿›è¡Œèµ‹å€¼ã€‚</p>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><p><strong>ä¸ºæå–ä¿¡æ¯å¸¦æ¥ä¾¿åˆ©</strong></p>
<h3 id="ä¼ªç±»é€‰æ‹©å™¨"><a href="#ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="ä¼ªç±»é€‰æ‹©å™¨"></a>ä¼ªç±»é€‰æ‹©å™¨</h3><p>CSSé€‰æ‹©å™¨æ”¯æŒå„ç§å„æ ·çš„ä¼ªç±»é€‰æ‹©å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">doc = pq(html)</span><br><span class="line">li = doc(<span class="string">'li:first-child'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:last-child'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:nth-child(2)'</span>)</span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:gt(2)'</span>) <span class="comment"># ä¸‰ä¸ªä»¥åçš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:nth-child(2n)'</span>) <span class="comment"># å¶æ•°ä½ç½®çš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br><span class="line">li = doc(<span class="string">'li:contains(second)'</span>) <span class="comment">#åŒ…å«secondçš„lièŠ‚ç‚¹</span></span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure>
<h2 id="7-ä½¿ç”¨ä»£ç†IP"><a href="#7-ä½¿ç”¨ä»£ç†IP" class="headerlink" title="7. ä½¿ç”¨ä»£ç†IP"></a>7. ä½¿ç”¨ä»£ç†IP</h2><p>å¾ˆå¤šç½‘ç«™å¯¹äºçˆ¬è™«åšäº†ä¸€å®šé™åˆ¶ï¼ŒIPå®¹æ˜“è¿›å°é»‘å±‹ï¼Œæ‰€ä»¥éœ€è¦é‡‡ç”¨ä»£ç†IPã€‚</p>
<h3 id="ä»£ç†çš„ç§ç±»"><a href="#ä»£ç†çš„ç§ç±»" class="headerlink" title="ä»£ç†çš„ç§ç±»"></a>ä»£ç†çš„ç§ç±»</h3><ul>
<li><p><strong>é€æ˜ä»£ç† (Transparent Proxy)</strong>: ä¸ä½†æ”¹åŠ¨äº†æ•°æ®åŒ…ï¼Œè¿˜ä¼šå‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯çš„çœŸå®IPï¼Œçº¦ç­‰äºæ²¡ç”¨ã€‚</p>
<ul>
<li>REMOTE_ADDR = Proxy IP</li>
<li>HTTP_VIA = Proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = Your IP</li>
</ul>
</li>
<li><p><strong>æ™®é€šåŒ¿åä»£ç† (Anonymous Proxy)</strong>ï¼šä¼šåœ¨æ•°æ®åŒ…ä¸Šåšä¸€äº›æ”¹åŠ¨ï¼ŒæœåŠ¡å™¨ä¸Šå‘ç°è¿™æ˜¯ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸æ¸…æ¥šçœŸå®IPåœ°å€ï¼ˆæœ‰ä¸€å®šå‡ ç‡èƒ½è¿½æŸ¥åˆ°ï¼‰ã€‚</p>
<ul>
<li>REMOTE_ADDR = proxy IP</li>
<li>HTTP_VIA = proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = proxy IP</li>
</ul>
</li>
<li><p><strong>æ··æ·†ä»£ç†(Distorting Proxies)</strong>ï¼šä¼šåœ¨æ•°æ®åŒ…ä¸Šåšä¸€äº›æ”¹åŠ¨ï¼ŒæœåŠ¡å™¨ä¸Šå‘ç°è¿™æ˜¯ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œä½†ä¼šå¾—åˆ°ä¸€ä¸ªå‡çš„IPåœ°å€.</p>
<ul>
<li>REMOTE_ADDR = proxy IP</li>
<li>HTTP_VIA = proxy IP</li>
<li>HTTP_X_FORWARDED_FOR = Random IP address</li>
</ul>
</li>
<li><p><strong>é«˜åŒ¿ä»£ç†(Elite proxyæˆ–High Anonymity Proxy)</strong>ï¼šä¼šå°†æ•°æ®åŒ…åŸå°ä¸åŠ¨çš„è½¬å‘ï¼Œåœ¨æœåŠ¡ç«¯çœ‹æ¥å°±å¥½åƒçœŸçš„æ˜¯ä¸€ä¸ªæ™®é€šå®¢æˆ·ç«¯åœ¨è®¿é—®ï¼Œè€Œè®°å½•çš„IPåˆ™æ˜¯ä»£ç†æœåŠ¡å™¨çš„IPã€‚</p>
<ul>
<li>REMOTE_ADDR = Proxy IP</li>
<li>HTTP_VIA = not determined</li>
<li>HTTP_X_FORWARDED_FOR = not determined</li>
</ul>
<p><strong>å‚è€ƒ</strong>ï¼š<a href="https://blog.csdn.net/a19860903/article/details/47146715" target="_blank" rel="noopener">https://blog.csdn.net/a19860903/article/details/47146715</a></p>
</li>
</ul>
<h3 id="ä»£ç†IPç½‘ç«™"><a href="#ä»£ç†IPç½‘ç«™" class="headerlink" title="ä»£ç†IPç½‘ç«™"></a>ä»£ç†IPç½‘ç«™</h3><ol>
<li><a href="https://www.kuaidaili.com/ops/proxylist/1/" target="_blank" rel="noopener">å¿«ä»£ç†</a></li>
<li><a href="http://www.66ip.cn/index.html" target="_blank" rel="noopener">66ä»£ç†</a></li>
</ol>
<h3 id="å»ºç«‹ä»£ç†IPæ± "><a href="#å»ºç«‹ä»£ç†IPæ± " class="headerlink" title="å»ºç«‹ä»£ç†IPæ± "></a>å»ºç«‹ä»£ç†IPæ± </h3><p>ä»¥<a href="https://www.kuaidaili.com/ops/proxylist/1/" target="_blank" rel="noopener">å¿«ä»£ç†</a>ä¸ºä¾‹ï¼š</p>
<details>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_proxy</span><span class="params">(headers)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    è·å–ä»£ç†IPåˆ—è¡¨</span></span><br><span class="line"><span class="string">    :return: ip_list [&#123;"https": ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">     """</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    ip_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">        <span class="comment"># å¿«ä»£ç†</span></span><br><span class="line">        base_url = <span class="string">"https://www.kuaidaili.com/ops/proxylist/"</span> + str(i)</span><br><span class="line">        html = requests.get(base_url, headers=headers).text</span><br><span class="line"> </span><br><span class="line">        pattern = <span class="string">'\d+\.\d+\.\d+\.\d+'</span></span><br><span class="line">        re_list = re.findall(pattern, html)</span><br><span class="line">        <span class="keyword">for</span> ip_port <span class="keyword">in</span> re_list:</span><br><span class="line">            ip_list.append(&#123;<span class="string">"https"</span>: ip_port&#125;)</span><br><span class="line">    <span class="keyword">return</span> ip_list</span><br><span class="line"><span class="comment"># å¿«ä»£ç† ä¸Šæœ‰äº›IPç±»å‹ä»…ä¸ºhttpï¼Œæœ‰äº›ä¸ºhttpï¼Œhttps</span></span><br></pre></td></tr></table></figure>

</details>

<h3 id="æµ‹è¯•ä»£ç†IP"><a href="#æµ‹è¯•ä»£ç†IP" class="headerlink" title="æµ‹è¯•ä»£ç†IP"></a>æµ‹è¯•ä»£ç†IP</h3><p>é€šè¿‡requestç›´æ¥è¯·æ±‚ä¸€ä¸ªç½‘å€ï¼Œçœ‹æ˜¯å¦é€šè¿‡æˆ–è€…çœ‹çŠ¶æ€ç æ˜¯å¦ä¸º200(<strong><code>request.status_code == 200</code></strong>)</p>
<p><details></p>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_proxy</span><span class="params">(ip_list, headers, test_url)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æµ‹è¯•ä»£ç†IP</span></span><br><span class="line"><span class="string">    :param ip_list:</span></span><br><span class="line"><span class="string">    :return: ip_list [&#123;"https": ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> proxy <span class="keyword">in</span> ip_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = requests.get(test_url, headers=headers, proxies=proxy, timeout=<span class="number">5</span>)  </span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.ConnectTimeout:</span><br><span class="line">            ip_list.pop(i)</span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ip_list</span><br></pre></td></tr></table></figure>
<p><details><br><strong>ä½†æ˜¯ä¸Šè¿°ä»£ç çš„é—®é¢˜æ˜¯è®¾ç½®äº†ä»£ç†IPï¼Œè¯·æ±‚ç½‘ç«™é€šè¿‡ï¼Œä¹Ÿä¸ä»£è¡¨IPæœ‰æ•ˆï¼Œå› ä¸ºæœ‰å¯èƒ½ä¸æ˜¯ç”¨äº†è®¾ç½®çš„ä»£ç†IPè€Œæ˜¯ç”¨äº†è‡ªå·±å…¬ç½‘ä¸‹çš„IPï¼ˆå¯ä»¥ç”¨ifconfigæŸ¥è¯¢æ‰€åœ¨å±€åŸŸç½‘ä¸‹çš„IPï¼ŒåŠç§ç½‘IPï¼‰</strong><a href="https://blog.csdn.net/Chenftli/article/details/86701563" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<p><details></p>
<summary><mark>æŸ¥çœ‹éšè—ä»£ç </mark></summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_proxy_3</span><span class="params">(ip_list)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æµ‹è¯•æ˜¯ç†IP</span></span><br><span class="line"><span class="string">    :param ip_list:</span></span><br><span class="line"><span class="string">    :return ip_valid_list: [&#123;https: ip&#125;,â€¦]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    ip_valid_list = []</span><br><span class="line">    test_url =  <span class="string">"http://httpbin.org/get"</span> <span class="comment"># æ”¹ç½‘ç«™å¯æµ‹è¯•ç›®å‰è¯·æ±‚çš„IP</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> proxy <span class="keyword">in</span> ip_list:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            res = requests.get(test_url, proxies=proxy, headers=headers, timeout=<span class="number">8</span>)</span><br><span class="line">            data = response.text.strip()</span><br><span class="line">            proxyIP = json.loads(data)[<span class="string">'origin'</span>]</span><br><span class="line">            <span class="keyword">if</span> proxyIP != proxy[<span class="string">"https"</span>]:</span><br><span class="line">                ip_list.pop(i)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="comment">#print("proxy invalid")</span></span><br><span class="line">            ip_list.pop(i)</span><br><span class="line">        i = i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ip_valid_list</span><br></pre></td></tr></table></figure>
<details>

<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p><details></p>
<summary><mark>éšè—</mark></summary>

<p>Max retries exceeded with url</p>
<ol>
<li><p>requests.exceptions.<strong>ProxyError</strong>: HTTPConnectionPool(host=â€™**<em>â€˜, port=443): Max retries exceeded with url: \</em>** (Caused by ProxyError(â€˜Cannot connect to proxy.â€™, NewConnectionError(â€˜<urllib3.connection.HTTPConnection object at 0x0000015363189190>: </p>
<blockquote>
<p>IPä»£ç†ä½¿ç”¨çš„åè®®ä¸æ­£å¸¸ï¼Œhttpå’Œhttpsä¸èƒ½å†™é”™ã€‚</p>
</blockquote>
</li>
<li><p>requests.exceptions.<strong>ConnectionError</strong>: HTTPSConnectionPool(host=<em>**, , port=443): Max retries exceeded with url: \</em>** (Caused by NewConnectionError(â€˜<urllib3.connection.VerifiedHTTPSConnection object at 0x7fb51433af98>:</p>
<blockquote>
<p>httpçš„è¿æ¥æ•°è¶…è¿‡æœ€å¤§é™åˆ¶ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹è¿æ¥æ˜¯Keep-aliveçš„ï¼Œæ‰€ä»¥å¯¼è‡´æœåŠ¡å™¨ä¿æŒäº†å¤ªå¤šè¿æ¥è€Œä¸èƒ½å†æ–°å»ºè¿æ¥ã€‚</p>
</blockquote>
</li>
<li><p>HTTPSConnectionPool(host=â€™***â€˜, port=443): Max retries exceeded with url: ***(Caused by SSLError(SSLError(1, uâ€™[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:579)â€™),))</p>
<blockquote>
<p>Requests å¯ä»¥ä¸º HTTPS è¯·æ±‚éªŒè¯ SSL è¯ä¹¦ï¼Œå°±åƒ web æµè§ˆå™¨ä¸€æ ·ã€‚SSL éªŒè¯é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œå¦‚æœè¯ä¹¦éªŒè¯å¤±è´¥ï¼ŒRequests ä¼šæŠ›å‡º SSLErrorã€‚</p>
<ul>
<li><p>ä¸ç”¨sslè¯ä¹¦éªŒè¯ï¼Œå°†verify è®¾ç½®ä¸º Falseï¼Œ<strong>page=requests.get(urlï¼Œverify=False)</strong></p>
</li>
<li><p>requestsé»˜è®¤æ˜¯keep-aliveçš„ï¼Œå¯èƒ½æ²¡æœ‰é‡Šæ”¾ï¼ŒåŠ å‚æ•° headers={â€˜Connectionâ€™:â€™closeâ€™}</p>
</li>
<li><p>å¢åŠ è¿æ¥é‡è¯•æ¬¡æ•°ï¼š<code>requests.adapters.DEFAULT_RETRIES = 5</code> </p>
</li>
<li><p>å…³é—­å¤šä½™çš„è¿æ¥ï¼šrequestsä½¿ç”¨äº†urllib3åº“ï¼Œé»˜è®¤çš„http connectionæ˜¯keep-aliveçš„ï¼Œrequestsè®¾ç½®Falseå…³é—­ã€‚<code>s = requests.session()       s.keep_alive = False</code> </p>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/wdh315172/article/details/80491668" target="_blank" rel="noopener">https://blog.csdn.net/wdh315172/article/details/80491668</a></p>
</li>
</ul>
</blockquote>
<details>

</li>
</ol>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><ul>
<li><a href="https://github.com/Hopetree/Jobs-search" target="_blank" rel="noopener">æ‹›è˜ç½‘ç«™çˆ¬è™«</a></li>
<li><a href="https://github.com/Hopetree/E-commerce-crawlers" target="_blank" rel="noopener">ç”µå•†ç½‘ç«™çˆ¬è™«</a></li>
<li><a href="https://github.com/Hopetree/Spiders100" target="_blank" rel="noopener">Spiders100</a></li>
<li><a href="https://github.com/Hopetree/MyTools" target="_blank" rel="noopener">ä¸€äº›ç•Œé¢åŒ–çš„çˆ¬è™«å°å·¥å…·</a></li>
</ul>
<hr>
<h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><ol>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/" target="_blank" rel="noopener">BeautifulSoup4å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</a></li>
<li><a href="[https://www.jianshu.com/p/2b783f7914c6](https://www.jianshu.com/p/2b783f7914c6">bs4æ¨¡å—ä½¿ç”¨æŒ‡å—</a>)</li>
<li><a href="https://python3webspider.cuiqingcai.com/" target="_blank" rel="noopener">Python3ç½‘ç»œçˆ¬è™«å¼€å‘å®æˆ˜</a>â€‹</li>
</ol>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>requests</tag>
        <tag>BeautifulSoup</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ ä¹‹Ajax,Selenium,Splash</title>
    <url>/2020/07/29/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8BAjax/</url>
    <content><![CDATA[<h2 id="å¼‚æ­¥æ•°æ®åŠ è½½"><a href="#å¼‚æ­¥æ•°æ®åŠ è½½" class="headerlink" title="å¼‚æ­¥æ•°æ®åŠ è½½"></a>å¼‚æ­¥æ•°æ®åŠ è½½</h2><p>å‘ç½‘ç«™è¿›è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œä¸€æ¬¡åªä¼ éƒ¨åˆ†æ•°æ®ã€‚å¦‚ï¼šæœ‰äº›ç½‘é¡µä¸éœ€è¦ç‚¹å‡»ä¸‹ä¸€é¡µï¼Œå…¶å†…å®¹ä¹Ÿå¯ä»¥æºæºä¸æ–­åœ°åŠ è½½ã€‚</p>
<h2 id="Ajaxæ•°æ®çˆ¬å–"><a href="#Ajaxæ•°æ®çˆ¬å–" class="headerlink" title="Ajaxæ•°æ®çˆ¬å–"></a>Ajaxæ•°æ®çˆ¬å–</h2><a id="more"></a>
<h3 id="ä»€ä¹ˆæ˜¯Ajax"><a href="#ä»€ä¹ˆæ˜¯Ajax" class="headerlink" title="ä»€ä¹ˆæ˜¯Ajax"></a>ä»€ä¹ˆæ˜¯Ajax</h3><p>Ajaxï¼Œå…¨ç§°ä¸º Asynchronous JavaScript and XMLï¼Œå³å¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚å®ƒä¸æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯åˆ©ç”¨ JavaScript ï¼ˆJavaScript å¯ä»¥å®ç°é¡µé¢çš„å„ç§äº¤äº’åŠŸèƒ½ï¼‰åœ¨ä¿è¯é¡µé¢ä¸è¢«åˆ·æ–°ã€é¡µé¢é“¾æ¥ä¸æ”¹å˜çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</p>
<p>ä¸€èˆ¬å‡ºç°åœ¨é¡µé¢åº•éƒ¨æœ‰â€œåŠ è½½æ›´å¤šâ€ï¼Œè¿™å…¶å®å°±æ˜¯ JavaScript å‘æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ª Ajax è¯·æ±‚ï¼Œç„¶åè·å–æ–°çš„å¾®åšæ•°æ®ï¼Œå°†å…¶è§£æï¼Œå¹¶å°†å…¶æ¸²æŸ“åœ¨ç½‘é¡µä¸­ã€‚</p>
<h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><p>ç®€å•åˆ†ä¸ºä»¥ä¸‹ 3 æ­¥ï¼š</p>
<ul>
<li><p>å‘é€è¯·æ±‚ï¼šAjax æœ‰å…¶ç‰¹æ®Šçš„è¯·æ±‚ç±»å‹ï¼Œå«ä½œ xhrï¼ˆXMLHttpRequestï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlhttp;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">    <span class="comment">//code for IE7+, Firefox, Chrome, Opera, Safari</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> XMLHttpRequest();&#125; <span class="keyword">else</span> &#123;<span class="comment">//code for IE6, IE5</span></span><br><span class="line">    xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>) &#123;<span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(<span class="string">"POST"</span>,<span class="string">"/ajax/"</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºäº† XMLHttpRequest å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ onreadystatechange å±æ€§è®¾ç½®äº†ç›‘å¬ï¼Œç„¶åè°ƒç”¨ open() å’Œ send() æ–¹æ³•å‘æŸä¸ªé“¾æ¥ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡å™¨ï¼‰å‘é€äº†è¯·æ±‚ã€‚</p>
<p>å‰é¢ç”¨ Python å®ç°è¯·æ±‚å‘é€ä¹‹åï¼Œå¯ä»¥å¾—åˆ°å“åº”ç»“æœï¼Œä½†è¿™é‡Œè¯·æ±‚çš„å‘é€å˜æˆ JavaScript æ¥å®Œæˆã€‚ç”±äºè®¾ç½®äº†ç›‘å¬ï¼Œæ‰€ä»¥å½“æœåŠ¡å™¨è¿”å›å“åº”æ—¶ï¼Œonreadystatechange å¯¹åº”çš„æ–¹æ³•ä¾¿ä¼šè¢«è§¦å‘ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢è§£æå“åº”å†…å®¹å³å¯ã€‚</p>
</li>
<li><p>è§£æå†…å®¹</p>
<p>å¾—åˆ°å“åº”ä¹‹åï¼Œonreadystatechange å±æ€§å¯¹åº”çš„æ–¹æ³•ä¾¿ä¼šè¢«è§¦å‘ï¼Œæ­¤æ—¶åˆ©ç”¨ xmlhttp çš„ responseText å±æ€§ä¾¿å¯å–åˆ°å“åº”å†…å®¹ã€‚è¿™ç±»ä¼¼äº Python ä¸­åˆ©ç”¨ requests å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç„¶åå¾—åˆ°å“åº”çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆè¿”å›å†…å®¹å¯èƒ½æ˜¯ HTMLï¼Œå¯èƒ½æ˜¯ JSONï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨æ–¹æ³•ä¸­ç”¨ JavaScript è¿›ä¸€æ­¥å¤„ç†å³å¯ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ˜¯ JSON çš„è¯ï¼Œå¯ä»¥è¿›è¡Œè§£æå’Œè½¬åŒ–ã€‚</p>
</li>
<li><p>æ¸²æŸ“ç½‘é¡µ</p>
<p>JavaScript æœ‰æ”¹å˜ç½‘é¡µå†…å®¹çš„èƒ½åŠ›ï¼Œè§£æå®Œå“åº”å†…å®¹ä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨ JavaScript æ¥é’ˆå¯¹è§£æå®Œçš„å†…å®¹å¯¹ç½‘é¡µè¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†äº†ã€‚æ¯”å¦‚ï¼Œé€šè¿‡ document.getElementById().innerHTML è¿™æ ·çš„æ“ä½œï¼Œä¾¿å¯ä»¥å¯¹æŸä¸ªå…ƒç´ å†…çš„æºä»£ç è¿›è¡Œæ›´æ”¹ï¼Œè¿™æ ·ç½‘é¡µæ˜¾ç¤ºçš„å†…å®¹å°±æ”¹å˜äº†ï¼Œè¿™æ ·çš„æ“ä½œä¹Ÿè¢«ç§°ä½œ DOM æ“ä½œï¼Œå³å¯¹ Document ç½‘é¡µæ–‡æ¡£è¿›è¡Œæ“ä½œï¼Œå¦‚æ›´æ”¹ã€åˆ é™¤ç­‰ã€‚</p>
<p><code>document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText</code> ä¾¿å°† ID ä¸º myDiv çš„èŠ‚ç‚¹å†…éƒ¨çš„ HTML ä»£ç æ›´æ”¹ä¸ºæœåŠ¡å™¨è¿”å›çš„å†…å®¹ï¼Œè¿™æ · myDiv å…ƒç´ å†…éƒ¨ä¾¿ä¼šå‘ˆç°å‡ºæœåŠ¡å™¨è¿”å›çš„æ–°æ•°æ®ï¼Œç½‘é¡µçš„éƒ¨åˆ†å†…å®¹çœ‹ä¸Šå»å°±æ›´æ–°äº†ã€‚</p>
</li>
</ul>
<h2 id="åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–"><a href="#åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–" class="headerlink" title="åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–"></a>åŠ¨æ€æ¸²æŸ“é¡µé¢æŠ“å–</h2><p>JavaScript åŠ¨æ€æ¸²æŸ“çš„é¡µé¢ä¸æ­¢ Ajax è¿™ä¸€ç§ï¼Œå¹¶ä¸”æ·˜å®è¿™ç§é¡µé¢ï¼Œå®ƒå³ä½¿æ˜¯ Ajax è·å–çš„æ•°æ®ï¼Œä½†æ˜¯å…¶ Ajax æ¥å£å«æœ‰å¾ˆå¤šåŠ å¯†å‚æ•°ï¼Œæˆ‘ä»¬éš¾ä»¥ç›´æ¥æ‰¾å‡ºå…¶è§„å¾‹ï¼Œä¹Ÿå¾ˆéš¾ç›´æ¥åˆ†æ Ajax æ¥æŠ“å–ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ç›´æ¥ä½¿ç”¨æ¨¡æ‹Ÿæµè§ˆå™¨è¿è¡Œçš„æ–¹å¼æ¥å®ç°</strong> ï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ˜¯ä»€ä¹ˆæ ·ï¼ŒæŠ“å–çš„æºç å°±æ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯å¯è§å³å¯çˆ¬ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å†å»ç®¡ç½‘é¡µå†…éƒ¨çš„ JavaScript ç”¨äº†ä»€ä¹ˆç®—æ³•æ¸²æŸ“é¡µé¢ï¼Œä¸ç”¨ç®¡ç½‘é¡µåå°çš„ Ajax æ¥å£åˆ°åº•æœ‰å“ªäº›å‚æ•°ã€‚</p>
<h3 id="Selenium"><a href="#Selenium" class="headerlink" title="Selenium"></a>Selenium</h3><p><a href="[http://www.selenium.org.cn/](http://www.selenium.org.cn/">Selenium</a>)æ˜¯webè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é›†ï¼ŒåŒ…æ‹¬IDEã€Gridã€RCï¼ˆselenium 1.0ï¼‰ã€WebDriverï¼ˆselenium 2.0ï¼‰ç­‰ã€‚åˆ©ç”¨å®ƒå¯ä»¥é©±åŠ¨æµè§ˆå™¨æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œå¦‚ç‚¹å‡»ã€ä¸‹æ‹‰ç­‰æ“ä½œï¼ŒåŒæ—¶è¿˜å¯ä»¥è·å–æµè§ˆå™¨å½“å‰å‘ˆç°çš„é¡µé¢çš„æºä»£ç ï¼Œåšåˆ°å¯è§å³å¯çˆ¬ã€‚å¯¹äºä¸€äº› JavaScript åŠ¨æ€æ¸²æŸ“çš„é¡µé¢æ¥è¯´ï¼Œæ­¤ç§æŠ“å–æ–¹å¼éå¸¸æœ‰æ•ˆã€‚</p>
<p> <a href="[https://blog.csdn.net/huilan_same/article/details/52615123](https://blog.csdn.net/huilan_same/article/details/52615123">seleniumè‡ªåŠ¨åŒ–èµ„æºæ•´ç†</a>)</p>
<p>[][<a href="https://selenium-python.readthedocs.io/][Seleniumä½¿ç”¨æ–‡æ¡£](https://selenium-python.readthedocs.io/" target="_blank" rel="noopener">https://selenium-python.readthedocs.io/][Seleniumä½¿ç”¨æ–‡æ¡£](https://selenium-python.readthedocs.io/</a>)</p>
<h4 id="å£°æ˜æµè§ˆå™¨å¯¹è±¡"><a href="#å£°æ˜æµè§ˆå™¨å¯¹è±¡" class="headerlink" title="å£°æ˜æµè§ˆå™¨å¯¹è±¡"></a>å£°æ˜æµè§ˆå™¨å¯¹è±¡</h4><p>Selenium æ”¯æŒéå¸¸å¤šçš„æµè§ˆå™¨ï¼Œå¦‚ Chromeã€Firefoxã€Edge ç­‰ï¼Œè¿˜æœ‰ Androidã€BlackBerry ç­‰æ‰‹æœºç«¯çš„æµè§ˆå™¨ã€‚å¦å¤–ï¼Œä¹Ÿæ”¯æŒæ— ç•Œé¢æµè§ˆå™¨ PhantomJSã€‚åˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> selenium.webdriver</span><br><span class="line"></span><br><span class="line">driver = selenium.webdriver.Chrome()</span><br><span class="line">browser = webdriver.Firefox()</span><br><span class="line">browser = webdriver.Edge()</span><br><span class="line">browser = webdriver.Safari()</span><br><span class="line"><span class="comment"># æµè§ˆå™¨å¯¹è±¡çš„åˆå§‹åŒ–å¹¶å°†å…¶èµ‹å€¼ä¸º browser å¯¹è±¡ï¼Œæ¥ä¸‹æ¥ï¼Œå¯ä»¥è°ƒç”¨ browser å¯¹è±¡ï¼Œè®©å…¶æ‰§è¡Œå„ä¸ªåŠ¨ä½œä»¥æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œã€‚</span></span><br><span class="line"><span class="comment"># è¦ä¸‹è½½æµè§ˆå™¨ç›¸åº”çš„é©±åŠ¨ï¼Œå¹¶å°†å…¶æ”¾å…¥PATHä¸­ã€‚ä¾‹å¦‚ï¼ŒFireFoxéœ€è¦ä¸‹è½½geckodriver</span></span><br></pre></td></tr></table></figure>
<h4 id="PhantomJS"><a href="#PhantomJS" class="headerlink" title="PhantomJS"></a>PhantomJS</h4><p>PhantomJSæ˜¯ä¸€ä¸ªæ— ç•Œé¢æµè§ˆå™¨ã€‚æŠ“å–æ—¶ï¼Œä¸ä¼šå¼¹å‡ºçª—å£.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">browser = webdriver.PhantomJS()</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå®ƒè¿˜æ”¯æŒå‘½ä»¤è¡Œé…ç½®ã€‚æ¯”å¦‚ï¼Œå¯ä»¥è®¾ç½®ç¼“å­˜å’Œç¦ç”¨å›¾ç‰‡åŠ è½½çš„åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æé«˜çˆ¬å–æ•ˆç‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SERVICE_ARGS &#x3D; [&#39;--load-images&#x3D;false&#39;, &#39;--disk-cache&#x3D;true&#39;]</span><br><span class="line">browser &#x3D; webdriver.PhantomJS(service_args&#x3D;SERVICE_ARGS)</span><br></pre></td></tr></table></figure>
<ul>
<li>éœ€è¦ â€œæ­¤ç”µè„‘&gt;å±æ€§&gt;é«˜çº§ç³»ç»Ÿè®¾ç½®&gt;é«˜çº§&gt;ç¯å¢ƒå˜é‡&gt;ç³»ç»Ÿå˜é‡&gt;Pathâ€é‡Œæ·»åŠ phantomjs.exeçš„è§£å‹è·¯å¾„</li>
<li>éœ€è¦å°†æŒ‡å®šå‚æ•°executable_path=râ€™D:\software_apk\phantomjs-2.1.1-windows\bin\phantomjs.exeâ€™å¦åˆ™ä¼šæŠ¥é”™</li>
</ul>
<h4 id="Chrome-Headless-æ¨¡å¼"><a href="#Chrome-Headless-æ¨¡å¼" class="headerlink" title="Chrome Headless æ¨¡å¼"></a>Chrome Headless æ¨¡å¼</h4><p>ä» Chrome 59 ç‰ˆæœ¬å¼€å§‹ï¼Œå·²ç»å¼€å§‹æ”¯æŒ Headless æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ— ç•Œé¢æ¨¡å¼ï¼Œè¿™æ ·çˆ¬å–çš„æ—¶å€™å°±ä¸ä¼šå¼¹å‡ºæµè§ˆå™¨äº†ã€‚å¦‚æœè¦ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œè¯·æŠŠ Chrome å‡çº§åˆ° 59 ç‰ˆæœ¬åŠä»¥ä¸Šã€‚å¯ç”¨ Headless æ¨¡å¼çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br></pre></td></tr></table></figure>
<h4 id="è®¿é—®é¡µé¢"><a href="#è®¿é—®é¡µé¢" class="headerlink" title="è®¿é—®é¡µé¢"></a>è®¿é—®é¡µé¢</h4><p>ç”¨ get() æ–¹æ³•æ¥è¯·æ±‚ç½‘é¡µï¼Œå‚æ•°ä¼ å…¥é“¾æ¥ URL å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">url = <span class="string">"https://www.bilibili.com/"</span></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(url)</span><br><span class="line">print(browser.page_source)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h4><p>Selenium å¯ä»¥é©±åŠ¨æµè§ˆå™¨å®Œæˆå„ç§æ“ä½œï¼Œæ¯”å¦‚å¡«å……è¡¨å•ã€æ¨¡æ‹Ÿç‚¹å‡»ç­‰ã€‚</p>
<p> Selenium æä¾›äº†ä¸€ç³»åˆ—æŸ¥æ‰¾èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ¥è·å–æƒ³è¦çš„èŠ‚ç‚¹ï¼Œä»¥ä¾¿ä¸‹ä¸€æ­¥æ‰§è¡Œä¸€äº›åŠ¨ä½œæˆ–è€…æå–ä¿¡æ¯ã€‚</p>
<h5 id="å•ä¸ªèŠ‚ç‚¹ï¼š-æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª"><a href="#å•ä¸ªèŠ‚ç‚¹ï¼š-æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª" class="headerlink" title="å•ä¸ªèŠ‚ç‚¹ï¼š æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª"></a>å•ä¸ªèŠ‚ç‚¹ï¼š æŸ¥æ‰¾çš„ç›®æ ‡åœ¨ç½‘é¡µä¸­åªæœ‰ä¸€ä¸ª</h5><p>find_element_by_name() æ˜¯æ ¹æ® name å€¼è·å–ï¼Œfind_element_by_id() æ˜¯æ ¹æ® id è·å–ã€‚å¦å¤–ï¼Œè¿˜æœ‰æ ¹æ® XPathã€CSS é€‰æ‹©å™¨ç­‰è·å–çš„æ–¹å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»æ·˜å®é¡µé¢ä¸­æå–æœç´¢æ¡†è¿™ä¸ªèŠ‚ç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">input_first = browser.find_element_by_id(<span class="string">'q'</span>)</span><br><span class="line">input_second = browser.find_element_by_css_selector(<span class="string">'#q'</span>)</span><br><span class="line">input_third = browser.find_element_by_xpath(<span class="string">'//*[@id="q"]'</span>)</span><br><span class="line">input_forth = browser.find_element(By.ID, <span class="string">'q'</span>)</span><br><span class="line">print(input_first, input_second, input_third, input_forth)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>
<h5 id="å¤šä¸ªèŠ‚ç‚¹"><a href="#å¤šä¸ªèŠ‚ç‚¹" class="headerlink" title="å¤šä¸ªèŠ‚ç‚¹"></a>å¤šä¸ªèŠ‚ç‚¹</h5><p>å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œå†ç”¨ find_element() æ–¹æ³•æŸ¥æ‰¾ï¼Œå°±åªèƒ½å¾—åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹äº†ã€‚å¦‚æœè¦æŸ¥æ‰¾æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼Œéœ€è¦ç”¨ find_elements() è¿™æ ·çš„æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lis = browser.find_elements_by_css_selector(<span class="string">'.service-bd li'</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºåˆ—è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯WebElementç±»å‹ã€‚</p>
<p>å…¶ä»–è·å–å¤šä¸ªèŠ‚ç‚¹çš„æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">find_element_by_id</span><br><span class="line">find_element_by_name</span><br><span class="line">find_element_by_xpath</span><br><span class="line">find_element_by_link_text</span><br><span class="line">find_element_by_partial_link_text</span><br><span class="line">find_element_by_tag_name</span><br><span class="line">find_element_by_class_name</span><br><span class="line">find_element_by_css_selector</span><br><span class="line">find_elements(By.CSS_SELECTOR, <span class="string">'.service-bd li'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="èŠ‚ç‚¹äº¤äº’"><a href="#èŠ‚ç‚¹äº¤äº’" class="headerlink" title="èŠ‚ç‚¹äº¤äº’"></a>èŠ‚ç‚¹äº¤äº’</h4><p>Selenium å¯ä»¥é©±åŠ¨æµè§ˆå™¨æ¥æ‰§è¡Œä¸€äº›æ“ä½œã€‚æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•æœ‰ï¼šè¾“å…¥æ–‡å­—æ—¶ç”¨ send_keys æ–¹æ³•ï¼Œæ¸…ç©ºæ–‡å­—æ—¶ç”¨ clear æ–¹æ³•ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ç”¨ click æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">input = browser.find_element_by_id(<span class="string">'q'</span>)</span><br><span class="line">input.send_keys(<span class="string">'iPhone'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">input.clear()</span><br><span class="line">input.send_keys(<span class="string">'iPad'</span>)</span><br><span class="line">button = browser.find_element_by_class_name(<span class="string">'btn-search'</span>)</span><br><span class="line">button.click()</span><br></pre></td></tr></table></figure>
<h4 id="åŠ¨ä½œé“¾"><a href="#åŠ¨ä½œé“¾" class="headerlink" title="åŠ¨ä½œé“¾"></a>åŠ¨ä½œé“¾</h4><p>æœ‰ä¸€äº›æ“ä½œï¼Œå®ƒä»¬<strong>æ²¡æœ‰ç‰¹å®šçš„æ‰§è¡Œå¯¹è±¡</strong> ï¼Œæ¯”å¦‚é¼ æ ‡æ‹–æ›³ã€é”®ç›˜æŒ‰é”®ç­‰ï¼Œè¿™äº›åŠ¨ä½œç”¨å¦ä¸€ç§æ–¹å¼æ¥æ‰§è¡Œï¼Œé‚£å°±æ˜¯<strong>åŠ¨ä½œé“¾</strong> ã€‚</p>
<p>æ¯”å¦‚ï¼Œå®ç°ä¸€ä¸ªèŠ‚ç‚¹çš„æ‹–æ›³æ“ä½œï¼Œå°†æŸä¸ªèŠ‚ç‚¹ä»ä¸€å¤„æ‹–æ›³åˆ°å¦å¤–ä¸€å¤„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(<span class="string">'iframeResult'</span>)</span><br><span class="line">source = browser.find_element_by_css_selector(<span class="string">'#draggable'</span>)</span><br><span class="line">target = browser.find_element_by_css_selector(<span class="string">'#droppable'</span>)</span><br><span class="line">actions = ActionChains(browser)</span><br><span class="line">actions.drag_and_drop(source, target)</span><br><span class="line">actions.perform()</span><br></pre></td></tr></table></figure>
<h4 id="æ‰§è¡Œ-JavaScript"><a href="#æ‰§è¡Œ-JavaScript" class="headerlink" title="æ‰§è¡Œ JavaScript"></a>æ‰§è¡Œ JavaScript</h4><p>Selenium API å¹¶æ²¡æœ‰æä¾›<strong>ä¸‹æ‹‰è¿›åº¦æ¡</strong> ç­‰æ“ä½œï¼Œä½†å¯ä»¥ç›´æ¥æ¨¡æ‹Ÿè¿è¡Œ JavaScriptï¼Œæ­¤æ—¶ä½¿ç”¨ execute_script() æ–¹æ³•å³å¯å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.zhihu.com/explore'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'window.scrollTo(0, document.body.scrollHeight)'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'alert("To Bottom")'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è·å–èŠ‚ç‚¹ä¿¡æ¯"><a href="#è·å–èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="è·å–èŠ‚ç‚¹ä¿¡æ¯"></a>è·å–èŠ‚ç‚¹ä¿¡æ¯</h4><ul>
<li>é€šè¿‡ <code>page_source</code> å±æ€§å¯ä»¥è·å–ç½‘é¡µçš„æºä»£ç ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Selenium æä¾›çš„é€‰æ‹©èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œç›´æ¥æå–èŠ‚ç‚¹ä¿¡æ¯ã€‚</li>
</ul>
<ul>
<li>å…ˆé€šè¿‡æŸ¥æ‰¾èŠ‚ç‚¹ï¼Œè·å–WebElementç±»å‹ï¼Œå†é€šè¿‡get_attribute() æ–¹æ³•ï¼Œ.textå±æ€§ï¼Œ.idå±æ€§ï¼Œ.locationå±æ€§ï¼Œ.tag_nameå±æ€§ï¼Œ.sizeå±æ€§ï¼Œè·å–å±æ€§ã€æ–‡æœ¬ã€ IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°</li>
</ul>
<h4 id="åˆ‡æ¢-Frame"><a href="#åˆ‡æ¢-Frame" class="headerlink" title="åˆ‡æ¢ Frame"></a>åˆ‡æ¢ Frame</h4><p>ç½‘é¡µä¸­æœ‰ä¸€ç§èŠ‚ç‚¹å«ä½œ <strong>iframe</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>å­ Frame</strong>ï¼Œç›¸å½“äºé¡µé¢çš„<strong>å­é¡µé¢</strong>ï¼Œå®ƒçš„ç»“æ„å’Œå¤–éƒ¨ç½‘é¡µçš„ç»“æ„å®Œå…¨ä¸€è‡´ã€‚Selenium æ‰“å¼€é¡µé¢åï¼Œå®ƒé»˜è®¤æ˜¯åœ¨çˆ¶çº§ Frame é‡Œé¢æ“ä½œï¼Œè€Œæ­¤æ—¶å¦‚æœé¡µé¢ä¸­è¿˜æœ‰å­ Frameï¼Œå®ƒæ˜¯ä¸èƒ½è·å–åˆ°å­ Frame é‡Œé¢çš„èŠ‚ç‚¹çš„ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨ <code>switch_to.frame()</code> æ–¹æ³•æ¥åˆ‡æ¢ Frameã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> NoSuchElementException</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(<span class="string">'iframeResult'</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    logo = browser.find_element_by_class_name(<span class="string">'logo'</span>)</span><br><span class="line"><span class="keyword">except</span> NoSuchElementException:</span><br><span class="line">    print(<span class="string">'NO LOGO'</span>)</span><br><span class="line">browser.switch_to.parent_frame()</span><br><span class="line">logo = browser.find_element_by_class_name(<span class="string">'logo'</span>)</span><br><span class="line">print(logo)</span><br><span class="line">print(logo.text)</span><br></pre></td></tr></table></figure>
<h4 id="å»¶æ—¶ç­‰å¾…"><a href="#å»¶æ—¶ç­‰å¾…" class="headerlink" title="å»¶æ—¶ç­‰å¾…"></a>å»¶æ—¶ç­‰å¾…</h4><p>get() æ–¹æ³•ä¼šåœ¨ç½‘é¡µæ¡†æ¶åŠ è½½ç»“æŸåç»“æŸæ‰§è¡Œï¼Œæ­¤æ—¶å¦‚æœè·å– page_sourceï¼Œå¯èƒ½å¹¶ä¸æ˜¯æµè§ˆå™¨å®Œå…¨åŠ è½½å®Œæˆçš„é¡µé¢ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œéœ€è¦å»¶æ—¶ç­‰å¾…ä¸€å®šæ—¶é—´ï¼Œç¡®ä¿èŠ‚ç‚¹å·²ç»åŠ è½½å‡ºæ¥ã€‚</p>
<h5 id="éšå¼ç­‰å¾…"><a href="#éšå¼ç­‰å¾…" class="headerlink" title="éšå¼ç­‰å¾…"></a>éšå¼ç­‰å¾…</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(<span class="string">'https://www.zhihu.com/explore'</span>)</span><br><span class="line">input = browser.find_element_by_class_name(<span class="string">'zu-top-add-question'</span>)</span><br><span class="line">print(input)</span><br></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨éšå¼ç­‰å¾… (<code>implicitly_wait()</code>) æ‰§è¡Œæµ‹è¯•æ—¶ï¼Œå¦‚æœ Selenium æ²¡æœ‰åœ¨ DOM ä¸­æ‰¾åˆ°èŠ‚ç‚¹ï¼Œå°†ç»§ç»­ç­‰å¾…ï¼Œè¶…å‡ºè®¾å®šæ—¶é—´åï¼Œåˆ™æŠ›å‡ºæ‰¾ä¸åˆ°èŠ‚ç‚¹çš„å¼‚å¸¸ã€‚æ¢å¥è¯è¯´ï¼Œå½“æŸ¥æ‰¾èŠ‚ç‚¹è€ŒèŠ‚ç‚¹å¹¶æ²¡æœ‰ç«‹å³å‡ºç°çš„æ—¶å€™ï¼Œéšå¼ç­‰å¾…å°†ç­‰å¾…ä¸€æ®µæ—¶é—´å†æŸ¥æ‰¾ DOMï¼Œé»˜è®¤çš„æ—¶é—´æ˜¯ 0ã€‚</p>
<h5 id="æ˜¾å¼ç­‰å¾…"><a href="#æ˜¾å¼ç­‰å¾…" class="headerlink" title="æ˜¾å¼ç­‰å¾…"></a>æ˜¾å¼ç­‰å¾…</h5><p>æ˜¾å¼ç­‰å¾…æ–¹æ³•ï¼ŒæŒ‡å®šè¦æŸ¥æ‰¾çš„èŠ‚ç‚¹ï¼Œç„¶å<strong>æŒ‡å®šä¸€ä¸ªæœ€é•¿ç­‰å¾…æ—¶é—´</strong>ã€‚å¦‚æœåœ¨è§„å®šæ—¶é—´å†…åŠ è½½å‡ºæ¥äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œå°±è¿”å›æŸ¥æ‰¾çš„èŠ‚ç‚¹ï¼›å¦‚æœåˆ°äº†è§„å®šæ—¶é—´ä¾ç„¶æ²¡æœ‰åŠ è½½å‡ºè¯¥èŠ‚ç‚¹ï¼Œåˆ™æŠ›å‡ºè¶…æ—¶å¼‚å¸¸ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com/'</span>)</span><br><span class="line">wait = WebDriverWait(browser, <span class="number">10</span>)</span><br><span class="line">input = wait.until(EC.presence_of_element_located((By.ID, <span class="string">'q'</span>)))</span><br><span class="line">button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, <span class="string">'.btn-search'</span>)))</span><br><span class="line">print(input, button)</span><br></pre></td></tr></table></figure>
<p>å¼•å…¥ WebDriverWait å¯¹è±¡ï¼ŒæŒ‡å®šæœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œè°ƒç”¨å…¶ until() æ–¹æ³•ï¼Œä¼ å…¥è¦ç­‰å¾…æ¡ä»¶ expected_conditionsã€‚æ¯”å¦‚ï¼Œä¼ å…¥ presence_of_element_located ï¼Œå…¶å‚æ•°æ˜¯èŠ‚ç‚¹çš„å®šä½å…ƒç»„( ID ä¸º q çš„èŠ‚ç‚¹æœç´¢æ¡†)ã€‚10 ç§’å†…å¦‚æœ ID ä¸º q çš„èŠ‚ç‚¹ï¼ˆå³æœç´¢æ¡†ï¼‰æˆåŠŸåŠ è½½å‡ºæ¥ï¼Œå°±è¿”å›è¯¥èŠ‚ç‚¹ï¼›å¦åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>æŒ‰é’®å¯ä»¥ä½¿ç”¨ element_to_be_clickableï¼Œ( CSS é€‰æ‹©å™¨ä¸º.btn-search çš„æŒ‰é’®)ï¼Œå¦‚æœ 10 ç§’å†…æˆåŠŸåŠ è½½å‡ºæ¥ï¼Œå³å¯ç‚¹å‡»ï¼Œå°±è¿”å›è¯¥æŒ‰é’®èŠ‚ç‚¹ï¼›å¦åˆ™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h6 id="å…¶ä»–ç­‰å¾…æ¡ä»¶"><a href="#å…¶ä»–ç­‰å¾…æ¡ä»¶" class="headerlink" title="å…¶ä»–ç­‰å¾…æ¡ä»¶"></a>å…¶ä»–ç­‰å¾…æ¡ä»¶</h6><p><a href="https://python3webspider.cuiqingcai.com/7.1selenium-de-shi-yong#xian-shi-deng-dai" target="_blank" rel="noopener">https://python3webspider.cuiqingcai.com/7.1selenium-de-shi-yong#xian-shi-deng-dai</a></p>
<h4 id="å‰è¿›åé€€"><a href="#å‰è¿›åé€€" class="headerlink" title="å‰è¿›åé€€"></a>å‰è¿›åé€€</h4><p>back() å’Œ forward() æ–¹æ³• </p>
<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><p>get_cookies() æ–¹æ³•è·å–æ‰€æœ‰çš„ Cookiesï¼Œadd_cookies() æ·»åŠ åˆ é™¤ï¼Œ delete_all_cookies() æ–¹æ³•åˆ é™¤æ‰€æœ‰çš„ Cookiesã€‚</p>
<h4 id="é€‰é¡¹å¡ç®¡ç†"><a href="#é€‰é¡¹å¡ç®¡ç†" class="headerlink" title="é€‰é¡¹å¡ç®¡ç†"></a>é€‰é¡¹å¡ç®¡ç†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line">browser.execute_script(<span class="string">'window.open()'</span>)</span><br><span class="line">print(browser.window_handles)</span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">1</span>])</span><br><span class="line">browser.get(<span class="string">'https://www.taobao.com'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">browser.switch_to_window(browser.window_handles[<span class="number">0</span>])</span><br><span class="line">browser.get(<span class="string">'https://python.org'</span>)</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨ execute_script() æ–¹æ³•ï¼Œä¼ å…¥ window.open() è¿™ä¸ª JavaScript è¯­å¥æ–°å¼€å¯ä¸€ä¸ªé€‰é¡¹å¡ã€‚</p>
<p>è°ƒç”¨ window_handles å±æ€§è·å–å½“å‰å¼€å¯çš„æ‰€æœ‰é€‰é¡¹å¡ï¼Œè°ƒç”¨ switch_to_window() æ–¹æ³•åˆ‡æ¢åˆ°è¯¥é€‰é¡¹å¡ã€‚</p>
<h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h4><p>ä½¿ç”¨ try except è¯­å¥æ¥æ•è·å„ç§å¼‚å¸¸ï¼Œéƒ½åœ¨selenium.common.exceptionsä¸‹ã€‚</p>
<p>TimeoutException</p>
<p>NoSuchElementException</p>
<h3 id="Splash"><a href="#Splash" class="headerlink" title="Splash"></a>Splash</h3><p><a href="https://splash.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener">Splash</a> æ˜¯ä¸€ä¸ª JavaScript æ¸²æŸ“æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªå¸¦æœ‰ HTTP API çš„è½»é‡çº§æµè§ˆå™¨ï¼ŒåŒæ—¶å®ƒå¯¹æ¥äº† Python ä¸­çš„ Twisted å’Œ QT åº“ã€‚</p>
<p>å¯ä»¥å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>å¼‚æ­¥æ–¹å¼å¤„ç†å¤šä¸ªç½‘é¡µæ¸²æŸ“è¿‡ç¨‹</li>
<li>è·å–æ¸²æŸ“åçš„é¡µé¢çš„æºä»£ç æˆ–æˆªå›¾</li>
<li>é€šè¿‡å…³é—­å›¾ç‰‡æ¸²æŸ“æˆ–è€…ä½¿ç”¨ Adblock è§„åˆ™æ¥åŠ å¿«é¡µé¢æ¸²æŸ“é€Ÿåº¦</li>
<li>å¯æ‰§è¡Œç‰¹å®šçš„ JavaScript è„šæœ¬</li>
<li>å¯é€šè¿‡ Lua è„šæœ¬æ¥æ§åˆ¶é¡µé¢æ¸²æŸ“è¿‡ç¨‹</li>
<li>è·å–æ¸²æŸ“çš„è¯¦ç»†è¿‡ç¨‹å¹¶é€šè¿‡ HARï¼ˆHTTP Archiveï¼‰æ ¼å¼å‘ˆç°</li>
</ul>
<p><a href="https://www.jianshu.com/p/feeb15f2e49b" target="_blank" rel="noopener">win10å®¶åº­ç‰ˆdockerå®‰è£…</a></p>
<ul>
<li>é‡åˆ°é—®é¢˜ï¼Œå®‰è£…è¿‡ç¨‹ä¸­å°†git bashå¸è½½äº†ã€‚</li>
</ul>
<p><a href="https://www.cnblogs.com/samwu/p/10360943.html" target="_blank" rel="noopener">win10å®¶åº­ç‰ˆå®‰è£…docker</a></p>
<ul>
<li>é‡åˆ°é—®é¢˜ï¼Œdocker desk æ— æ³•å¯åŠ¨ï¼Œout of memoryã€‚ã€‚ã€‚</li>
</ul>
<p><a href="https://blog.csdn.net/pp_lan/article/details/90692510" target="_blank" rel="noopener">https://blog.csdn.net/pp_lan/article/details/90692510</a></p>
<h4 id="Splash-Lua-è„šæœ¬"><a href="#Splash-Lua-è„šæœ¬" class="headerlink" title="Splash Lua è„šæœ¬"></a>Splash Lua è„šæœ¬</h4><p>Splash å¯ä»¥é€šè¿‡ Lua è„šæœ¬æ‰§è¡Œä¸€ç³»åˆ—æ¸²æŸ“æ“ä½œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ Splash æ¥æ¨¡æ‹Ÿç±»ä¼¼ Chromeã€PhantomJS çš„æ“ä½œäº†ã€‚</p>
<h5 id="å…¥å£åŠè¿”å›å€¼"><a href="#å…¥å£åŠè¿”å›å€¼" class="headerlink" title="å…¥å£åŠè¿”å›å€¼"></a>å…¥å£åŠè¿”å›å€¼</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">  splash:wait(<span class="number">0.5</span>)</span><br><span class="line">  <span class="keyword">local</span> title = splash:evaljs(<span class="string">"document.title"</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123;title=title&#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Splash ä¼šé»˜è®¤è°ƒç”¨main æ–¹æ³•ã€‚</li>
<li>è¿”å›å€¼å¯ä»¥æ˜¯å­—å…¸å½¢å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œæœ€åéƒ½ä¼šè½¬åŒ–ä¸º Splash HTTP Responseã€‚</li>
</ul>
<h5 id="å¼‚æ­¥å¤„ç†"><a href="#å¼‚æ­¥å¤„ç†" class="headerlink" title="å¼‚æ­¥å¤„ç†"></a>å¼‚æ­¥å¤„ç†</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="keyword">local</span> example_urls = &#123;<span class="string">"www.baidu.com"</span>, <span class="string">"www.taobao.com"</span>, <span class="string">"www.zhihu.com"</span>&#125;</span><br><span class="line">  <span class="keyword">local</span> urls = args.urls <span class="keyword">or</span> example_urls</span><br><span class="line">  <span class="keyword">local</span> results = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> index, url <span class="keyword">in</span> <span class="built_in">ipairs</span>(urls) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> ok, reason = splash:go(<span class="string">"http://"</span> .. url)</span><br><span class="line">    <span class="keyword">if</span> ok <span class="keyword">then</span></span><br><span class="line">      splash:wait(<span class="number">2</span>)</span><br><span class="line">      results[url] = splash:png()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> results</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåçš„è¿”å›ç»“æœæ˜¯ 3 ä¸ªç«™ç‚¹çš„æˆªå›¾</p>
<ul>
<li>å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œç¬¦<code>..</code>ï¼Œè€Œä¸æ˜¯pythonä¸­çš„<code>+</code></li>
<li>go æ–¹æ³•ä¼šè¿”å›åŠ è½½é¡µé¢çš„ç»“æœçŠ¶æ€ï¼Œå¦‚æœé¡µé¢å‡ºç° 4xx æˆ– 5xx çŠ¶æ€ç ï¼Œok å˜é‡å°±ä¸ºç©ºï¼Œå°±ä¸ä¼šè¿”å›åŠ è½½åçš„å›¾ç‰‡ã€‚</li>
</ul>
<h4 id="Splash-å¯¹è±¡å±æ€§"><a href="#Splash-å¯¹è±¡å±æ€§" class="headerlink" title="Splash å¯¹è±¡å±æ€§"></a>Splash å¯¹è±¡å±æ€§</h4><p>splashç±»ä¼¼äº Selenium ä¸­çš„ WebDriver å¯¹è±¡ã€‚</p>
<h5 id="args"><a href="#args" class="headerlink" title="args"></a>args</h5><h5 id="js-enabled"><a href="#js-enabled" class="headerlink" title="js_enabled"></a>js_enabled</h5><p>è¿™ä¸ªå±æ€§æ˜¯ Splash çš„ JavaScript æ‰§è¡Œå¼€å…³ï¼Œå¯ä»¥å°†å…¶é…ç½®ä¸º true æˆ– false æ¥æ§åˆ¶æ˜¯å¦æ‰§è¡Œ JavaScript ä»£ç ï¼Œé»˜è®¤ä¸º trueã€‚</p>
<h5 id="resource-timeout"><a href="#resource-timeout" class="headerlink" title="resource_timeout"></a>resource_timeout</h5><p>è®¾ç½®åŠ è½½çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚å¦‚æœè®¾ç½®ä¸º 0 æˆ– nilï¼ˆç±»ä¼¼ Python ä¸­çš„ Noneï¼‰ï¼Œä»£è¡¨ä¸æ£€æµ‹è¶…æ—¶ã€‚</p>
<h5 id="images-enabled"><a href="#images-enabled" class="headerlink" title="images_enabled"></a>images_enabled</h5><p>è®¾ç½®å›¾ç‰‡æ˜¯å¦åŠ è½½ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åŠ è½½çš„ã€‚ç¦ç”¨è¯¥å±æ€§åï¼Œå¯ä»¥èŠ‚çœç½‘ç»œæµé‡å¹¶æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦ã€‚</p>
<ul>
<li>ç¦ç”¨å›¾ç‰‡åŠ è½½å¯èƒ½ä¼šå½±å“ JavaScript æ¸²æŸ“ã€‚å› ä¸ºç¦ç”¨å›¾ç‰‡ä¹‹åï¼Œå®ƒçš„å¤–å±‚ DOM èŠ‚ç‚¹çš„é«˜åº¦ä¼šå—å½±å“ï¼Œè¿›è€Œå½±å“ DOM èŠ‚ç‚¹çš„ä½ç½®ã€‚å› æ­¤ï¼Œå¦‚æœ JavaScript å¯¹å›¾ç‰‡èŠ‚ç‚¹æœ‰æ“ä½œçš„è¯ï¼Œå…¶æ‰§è¡Œå°±ä¼šå—åˆ°å½±å“ã€‚</li>
<li>Splash ä½¿ç”¨äº†ç¼“å­˜ã€‚å¦‚æœä¸€å¼€å§‹åŠ è½½å‡ºæ¥äº†ç½‘é¡µå›¾ç‰‡ï¼Œç„¶åç¦ç”¨äº†å›¾ç‰‡åŠ è½½ï¼Œå†é‡æ–°åŠ è½½é¡µé¢ï¼Œä¹‹å‰åŠ è½½å¥½çš„å›¾ç‰‡å¯èƒ½è¿˜ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ—¶ç›´æ¥é‡å¯ Splash å³å¯ã€‚</li>
</ul>
<h5 id="plugins-enabled"><a href="#plugins-enabled" class="headerlink" title="plugins_enabled"></a>plugins_enabled</h5><p>æ§åˆ¶æµè§ˆå™¨æ’ä»¶ï¼ˆå¦‚ Flash æ’ä»¶ï¼‰æ˜¯å¦å¼€å¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤å±æ€§æ˜¯ falseã€‚</p>
<h5 id="scroll-position"><a href="#scroll-position" class="headerlink" title="scroll_position"></a>scroll_position</h5><p>æ§åˆ¶é¡µé¢ä¸Šä¸‹æˆ–å·¦å³æ»šåŠ¨</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash.scroll_position = &#123;y=<span class="number">400</span>&#125;</span><br><span class="line">splash.scroll_position = &#123;x=<span class="number">100</span>, y=<span class="number">200</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Splash-å¯¹è±¡æ–¹æ³•"><a href="#Splash-å¯¹è±¡æ–¹æ³•" class="headerlink" title="Splash å¯¹è±¡æ–¹æ³•"></a>Splash å¯¹è±¡æ–¹æ³•</h4><h5 id="go"><a href="#go" class="headerlink" title="go"></a>go</h5><p>è¯¥æ–¹æ³•ç”¨æ¥è¯·æ±‚æŸä¸ªé“¾æ¥ï¼Œè€Œä¸”å®ƒå¯ä»¥æ¨¡æ‹Ÿ GET å’Œ POST è¯·æ±‚ï¼ŒåŒæ—¶æ”¯æŒä¼ å…¥è¯·æ±‚å¤´ã€è¡¨å•ç­‰æ•°æ®ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:go&#123;url, baseurl=<span class="literal">nil</span>, headers=<span class="literal">nil</span>, http_method=<span class="string">"GET"</span>, body=<span class="literal">nil</span>, formdata=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¿”å›å€¼ä¸ºokå’Œreasonï¼Œå¦‚æœ ok ä¸ºç©ºï¼Œä»£è¡¨ç½‘é¡µåŠ è½½å‡ºç°äº†é”™è¯¯ï¼Œæ­¤æ—¶ reason å˜é‡ä¸­åŒ…å«äº†é”™è¯¯çš„åŸå› ï¼Œå¦åˆ™è¯æ˜é¡µé¢åŠ è½½æˆåŠŸã€‚</p>
<h5 id="wait"><a href="#wait" class="headerlink" title="wait"></a>wait</h5><p>æ§åˆ¶é¡µé¢ç­‰å¾…æ—¶é—´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:wait&#123;time, cancel_on_redirect=false, cancel_on_error=true&#125;</span><br></pre></td></tr></table></figure>
<h5 id="jsfunc"><a href="#jsfunc" class="headerlink" title="jsfunc"></a>jsfunc</h5><p>ç›´æ¥è°ƒç”¨ JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œä½†æ˜¯æ‰€è°ƒç”¨çš„æ–¹æ³•éœ€è¦ç”¨åŒä¸­æ‹¬å·åŒ…å›´ï¼Œè¿™ç›¸å½“äºå®ç°äº† JavaScript æ–¹æ³•åˆ° Lua è„šæœ¬çš„è½¬æ¢ã€‚</p>
<p>é¦–å…ˆï¼Œå£°æ˜äº† JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œç„¶ååœ¨é¡µé¢åŠ è½½æˆåŠŸåè°ƒç”¨äº†æ­¤æ–¹æ³•è®¡ç®—å‡ºäº†é¡µé¢ä¸­ div èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="keyword">local</span> get_div_count = splash:jsfunc(<span class="string">[[function () &#123;</span></span><br><span class="line"><span class="string">    var body = document.body;</span></span><br><span class="line"><span class="string">    var divs = body.getElementsByTagName('div');</span></span><br><span class="line"><span class="string">    return divs.length;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  ]]</span>)</span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  <span class="keyword">return</span> (<span class="string">"There are % s DIVs"</span>):<span class="built_in">format</span>(get_div_count())</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="evaljs"><a href="#evaljs" class="headerlink" title="evaljs"></a>evaljs</h5><p>æ‰§è¡Œ JavaScript ä»£ç å¹¶è¿”å›æœ€åä¸€æ¡ JavaScript è¯­å¥çš„è¿”å›ç»“æœã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">result = splash:evaljs(js)</span><br></pre></td></tr></table></figure>
<h5 id="runjs"><a href="#runjs" class="headerlink" title="runjs"></a>runjs</h5><p>æ‰§è¡Œ JavaScript ä»£ç ï¼Œå®ƒä¸ evaljs æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯æ›´åå‘äº<strong>æ‰§è¡ŒæŸäº›åŠ¨ä½œ</strong>æˆ–<strong>å£°æ˜æŸäº›æ–¹æ³•</strong>ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  splash:runjs(<span class="string">"foo = function() &#123;return 'bar'&#125;"</span>)</span><br><span class="line">  <span class="keyword">local</span> result = splash:evaljs(<span class="string">"foo()"</span>)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ç”¨ runjs æ–¹æ³•å…ˆå£°æ˜äº†ä¸€ä¸ª JavaScript å®šä¹‰çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ evaljs æ–¹æ³•æ¥è°ƒç”¨å¾—åˆ°çš„ç»“æœã€‚</p>
<h5 id="autoload"><a href="#autoload" class="headerlink" title="autoload"></a>autoload</h5><p>è®¾ç½®æ¯ä¸ªé¡µé¢è®¿é—®æ—¶è‡ªåŠ¨åŠ è½½çš„å¯¹è±¡ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ok, reason = splash:autoload&#123;source_or_url, source=<span class="literal">nil</span>, url=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•åªè´Ÿè´£åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚å¦‚æœè¦æ‰§è¡Œæ“ä½œï¼Œå¯ä»¥è°ƒç”¨ evaljs æˆ– runjs æ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:autoload(<span class="string">[[function get_document_title()&#123;return document.title;&#125;</span></span><br><span class="line"><span class="string">  ]]</span>)</span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:evaljs(<span class="string">"get_document_title()"</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ autoload æ–¹æ³•åŠ è½½æŸäº›æ–¹æ³•åº“ï¼Œå¦‚ jQueryï¼Œ</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  <span class="built_in">assert</span>(splash:autoload(<span class="string">"https://code.jquery.com/jquery-2.1.3.min.js"</span>))</span><br><span class="line">  <span class="built_in">assert</span>(splash:go(<span class="string">"https://www.taobao.com"</span>))</span><br><span class="line">  <span class="keyword">local</span> version = splash:evaljs(<span class="string">"$.fn.jquery"</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'JQuery version: '</span> .. version</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="call-later"><a href="#call-later" class="headerlink" title="call_later"></a>call_later</h5><p>è®¾ç½®å®šæ—¶ä»»åŠ¡å’Œå»¶è¿Ÿæ—¶é—´æ¥å®ç°ä»»åŠ¡å»¶æ—¶æ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ‰§è¡Œå‰é€šè¿‡ cancel æ–¹æ³•é‡æ–°æ‰§è¡Œå®šæ—¶ä»»åŠ¡ã€‚</p>
<h5 id="htttp-get"><a href="#htttp-get" class="headerlink" title="htttp_get"></a>htttp_get</h5><p>æ‹Ÿå‘é€ HTTP çš„ GET è¯·æ±‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">response = splash:http_get&#123;url, headers=<span class="literal">nil</span>, follow_redirects=<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="http-post"><a href="#http-post" class="headerlink" title="http_post"></a>http_post</h5><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">response = splash:http_post&#123;url, headers=<span class="literal">nil</span>, follow_redirects=<span class="literal">true</span>, body=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>bodyï¼Œå¯é€‰å‚æ•°ï¼Œé»˜è®¤ä¸ºç©ºï¼Œå³è¡¨å•æ•°æ®ã€‚</li>
</ul>
<h5 id="set-content"><a href="#set-content" class="headerlink" title="set_content"></a>set_content</h5><p>ç”¨æ¥è®¾ç½®é¡µé¢çš„å†…å®¹</p>
<h5 id="html"><a href="#html" class="headerlink" title="html"></a>html</h5><p>ç”¨æ¥è·å–ç½‘é¡µçš„æºä»£ç </p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash, args)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://httpbin.org/get"</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:html()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="png"><a href="#png" class="headerlink" title="png"></a>png</h5><p>è·å– PNG æ ¼å¼çš„ç½‘é¡µæˆªå›¾</p>
<h5 id="jpeg"><a href="#jpeg" class="headerlink" title="jpeg"></a>jpeg</h5><p>ç”¨æ¥è·å– JPEG æ ¼å¼çš„ç½‘é¡µæˆªå›¾</p>
<h5 id="har"><a href="#har" class="headerlink" title="har"></a>har</h5><p>ç”¨æ¥è·å–é¡µé¢åŠ è½½è¿‡ç¨‹æè¿°</p>
<h5 id="url"><a href="#url" class="headerlink" title="url"></a>url</h5><p>è·å–å½“å‰æ­£åœ¨è®¿é—®çš„ URL</p>
<h5 id="get-cokies"><a href="#get-cokies" class="headerlink" title="get_cokies"></a>get_cokies</h5><p>è·å–å½“å‰é¡µé¢çš„ Cookies</p>
<h5 id="add-cokies"><a href="#add-cokies" class="headerlink" title="add_cokies"></a>add_cokies</h5><p>ä¸ºå½“å‰é¡µé¢æ·»åŠ  Cookies</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">cookies = splash:add_cookie&#123;name, value, <span class="built_in">path</span>=<span class="literal">nil</span>, domain=<span class="literal">nil</span>, expires=<span class="literal">nil</span>, httpOnly=<span class="literal">nil</span>, secure=<span class="literal">nil</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="clear-cookies"><a href="#clear-cookies" class="headerlink" title="clear_cookies"></a>clear_cookies</h5><p>æ¸…é™¤æ‰€æœ‰çš„ Cookies</p>
<h5 id="get-viewport-size"><a href="#get-viewport-size" class="headerlink" title="get_viewport_size"></a>get_viewport_size</h5><p>è·å–å½“å‰æµè§ˆå™¨é¡µé¢çš„å¤§å°ï¼Œå³å®½é«˜</p>
<h5 id="set-viewport-size"><a href="#set-viewport-size" class="headerlink" title="set_viewport_size"></a>set_viewport_size</h5><p>è®¾ç½®å½“å‰æµè§ˆå™¨é¡µé¢çš„å¤§å°ï¼Œå³å®½é«˜</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_viewport_size(width, height)</span><br></pre></td></tr></table></figure>
<h5 id="set-viewport-full"><a href="#set-viewport-full" class="headerlink" title="set_viewport_full"></a>set_viewport_full</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®æµè§ˆå™¨å…¨å±æ˜¾ç¤º</p>
<h5 id="set-user-agent"><a href="#set-user-agent" class="headerlink" title="set_user_agent"></a>set_user_agent</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®æµè§ˆå™¨çš„ User-Agent</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_user_agent(<span class="string">'Splash'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="set-custom-headers"><a href="#set-custom-headers" class="headerlink" title="set_custom_headers()"></a>set_custom_headers()</h5><p>æ­¤æ–¹æ³•å¯ä»¥è®¾ç½®è¯·æ±‚çš„ Headers</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">splash:set_custom_headers(&#123;[<span class="string">"User-Agent"</span>] = <span class="string">"Splash"</span>,</span><br><span class="line">     [<span class="string">"Site"</span>] = <span class="string">"Splash"</span>,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="select"><a href="#select" class="headerlink" title="select"></a>select</h5><p>å¯ä»¥é€‰ä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹ç¬¦åˆæ¡ä»¶ï¼Œåˆ™åªä¼šè¿”å›ä¸€ä¸ªï¼Œå…¶å‚æ•°æ˜¯ CSS é€‰æ‹©å™¨ã€‚</p>
<h5 id="select-all"><a href="#select-all" class="headerlink" title="select_all()"></a>select_all()</h5><p>æ­¤æ–¹æ³•å¯ä»¥é€‰ä¸­æ‰€æœ‰çš„ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œå…¶å‚æ•°æ˜¯ CSS é€‰æ‹©å™¨ã€‚</p>
<h5 id="mouse-click"><a href="#mouse-click" class="headerlink" title="mouse_click"></a>mouse_click</h5><p>æ­¤æ–¹æ³•å¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ“ä½œï¼Œä¼ å…¥çš„å‚æ•°ä¸ºåæ ‡å€¼ xã€yï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€‰ä¸­æŸä¸ªèŠ‚ç‚¹ç›´æ¥è°ƒç”¨æ­¤æ–¹æ³•ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(splash)</span></span></span><br><span class="line">  splash:go(<span class="string">"https://www.baidu.com/"</span>)</span><br><span class="line">  <span class="built_in">input</span> = splash:<span class="built_in">select</span>(<span class="string">"#kw"</span>)</span><br><span class="line">  <span class="built_in">input</span>:send_text(<span class="string">'Splash'</span>)</span><br><span class="line">  submit = splash:<span class="built_in">select</span>(<span class="string">'#su'</span>)</span><br><span class="line">  submit:mouse_click()</span><br><span class="line">  splash:wait(<span class="number">3</span>)</span><br><span class="line">  <span class="keyword">return</span> splash:png()</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h4 id="Splash-API-è°ƒç”¨"><a href="#Splash-API-è°ƒç”¨" class="headerlink" title="Splash API è°ƒç”¨"></a>Splash API è°ƒç”¨</h4><p>ä¸Šè¿°Splash Lua è„šæœ¬çš„ç”¨æ³•ï¼Œæ˜¯åœ¨ Splash é¡µé¢é‡Œé¢æµ‹è¯•è¿è¡Œçš„ã€‚</p>
<p>Splash æä¾›äº†ä¸€äº› HTTP API æ¥å£ï¼Œè¯·æ±‚è¿™äº›æ¥å£å¹¶ä¼ é€’ç›¸åº”çš„å‚æ•°å³å¯è·å–é¡µé¢æ¸²æŸ“åçš„ç»“æœã€‚</p>
<h5 id="render-html"><a href="#render-html" class="headerlink" title="render.html"></a>render.html</h5><p>ç”¨äºè·å– JavaScript æ¸²æŸ“çš„é¡µé¢çš„ HTML ä»£ç ï¼Œæ¥å£åœ°å€å°±æ˜¯ Splash çš„è¿è¡Œåœ°å€åŠ æ­¤æ¥å£åç§°</p>
<p><code>url = &#39;http://localhost:8050/render.html?url=https://www.baidu.com&#39;</code></p>
<p><code>url = &#39;http://localhost:8050/render.html?url=https://www.taobao.com&amp;amp;wait=5&#39;</code></p>
<h5 id="render-png"><a href="#render-png" class="headerlink" title="render.png"></a>render.png</h5><p>æ­¤æ¥å£å¯ä»¥è·å–ç½‘é¡µæˆªå›¾,è¿”å›çš„æ˜¯ PNG æ ¼å¼çš„å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ®</p>
<p><code>&#39;http://localhost:8050/render.png?url=https://www.jd.com&amp;wait=5&amp;width=1000&amp;height=700&#39;</code></p>
<h5 id="render-jpeg"><a href="#render-jpeg" class="headerlink" title="render.jpeg"></a>render.jpeg</h5><p>å’Œ render.png ç±»ä¼¼ï¼Œè¿”å›çš„æ˜¯ JPEG æ ¼å¼çš„å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<p>å¦å¤–æ­¤æ¥å£ç›¸æ¯” render.png è¿˜å¤šäº†ä¸€ä¸ªå‚æ•° qualityï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®å›¾ç‰‡è´¨é‡ã€‚</p>
<h5 id="render-har"><a href="#render-har" class="headerlink" title="render.har"></a>render.har</h5><p>æ­¤æ¥å£ç”¨äºè·å–é¡µé¢åŠ è½½çš„ HAR æ•°æ®</p>
<p><code>http://localhost:8050/render.har?url=https://www.jd.com&amp;wait=5</code></p>
<h5 id="render-json"><a href="#render-json" class="headerlink" title="render.json"></a>render.json</h5><p>æ­¤æ¥å£åŒ…å«äº†å‰é¢æ¥å£çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿”å›ç»“æœæ˜¯ Json æ ¼å¼</p>
<p><code>http://localhost:8050/render.json?url=https://httpbin.org&amp;html=1&amp;har=1</code></p>
<p>å¯ä»¥é€šè¿‡ä¼ å…¥ä¸åŒå‚æ•°æ§åˆ¶å…¶è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œä¼ å…¥ html=1ï¼Œè¿”å›ç»“æœå³ä¼šå¢åŠ æºä»£ç æ•°æ®ï¼›ä¼ å…¥ png=1ï¼Œè¿”å›ç»“æœå³ä¼šå¢åŠ é¡µé¢ PNG æˆªå›¾æ•°æ®ï¼›ä¼ å…¥ har=1ï¼Œåˆ™ä¼šè·å¾—é¡µé¢ HAR æ•°æ®ã€‚</p>
<h5 id="execute"><a href="#execute" class="headerlink" title="execute"></a>execute</h5><p>ç”¨æ­¤æ¥å£ä¾¿å¯å®ç°ä¸ Lua è„šæœ¬çš„å¯¹æ¥ã€‚å®ç°ä¸€äº›äº¤äº’æ“ä½œã€‚</p>
<p>å°†luaè„šæœ¬è½¬åŒ–ä¸º URL ç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œæ‹¼æ¥åˆ° execute æ¥å£åé¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> quote</span><br><span class="line"></span><br><span class="line">lua = <span class="string">'''</span></span><br><span class="line"><span class="string">function main(splash)</span></span><br><span class="line"><span class="string">    return 'hello'</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://localhost:8050/execute?lua_source='</span> + quote(lua)</span><br><span class="line">response = requests.get(url)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>Ajax</tag>
        <tag>Selenium</tag>
        <tag>Slash</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬è™«å­¦ä¹ ä¹‹æ•°æ®å­˜å‚¨</title>
    <url>/2020/07/29/python%E7%88%AC%E8%99%AB%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[<h2 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h2><p>TXT, JSON, CSVç­‰ï¼Œä»¥åŠå…³ç³»å‹æ•°æ®åº“MySQLï¼Œè²å…³ç³»å‹æ•°æ®åº“MongoDBã€Redis ç­‰</p>
<a id="more"></a>
<h3 id="æ–‡ä»¶å­˜å‚¨"><a href="#æ–‡ä»¶å­˜å‚¨" class="headerlink" title="æ–‡ä»¶å­˜å‚¨"></a>æ–‡ä»¶å­˜å‚¨</h3><h4 id="TXTæ–‡æœ¬å­˜å‚¨"><a href="#TXTæ–‡æœ¬å­˜å‚¨" class="headerlink" title="TXTæ–‡æœ¬å­˜å‚¨"></a>TXTæ–‡æœ¬å­˜å‚¨</h4><p>æ–‡ä»¶å†™å…¥è¿˜æœ‰ä¸€ç§ç®€å†™æ–¹æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ with as è¯­æ³•ã€‚åœ¨ with æ§åˆ¶å—ç»“æŸæ—¶ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†è°ƒç”¨ close æ–¹æ³•äº†ã€‚è¿™ç§ä¿å­˜æ–¹å¼å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'explore.txt'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">'\n'</span>.join([question, author, answer]))</span><br><span class="line">    file.write(<span class="string">'\n'</span> + <span class="string">'='</span> * <span class="number">50</span> + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>JSONï¼Œå…¨ç§°ä¸º JavaScript Object Notation, ä¹Ÿå°±æ˜¯ JavaScript å¯¹è±¡æ ‡è®°ï¼Œå®ƒé€šè¿‡å¯¹è±¡å’Œæ•°ç»„çš„ç»„åˆæ¥è¡¨ç¤ºæ•°æ®ï¼Œæ„é€ ç®€æ´ä½†æ˜¯ç»“æ„åŒ–ç¨‹åº¦éå¸¸é«˜ï¼Œæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p>
<h5 id="å¯¹è±¡å’Œæ•°ç»„"><a href="#å¯¹è±¡å’Œæ•°ç»„" class="headerlink" title="å¯¹è±¡å’Œæ•°ç»„"></a>å¯¹è±¡å’Œæ•°ç»„</h5><p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰</p>
<p><strong>å¯¹è±¡</strong> ï¼šå®ƒåœ¨ JavaScript ä¸­æ˜¯ä½¿ç”¨èŠ±æ‹¬å· {} åŒ…è£¹èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„ä¸º {key1ï¼švalue1, key2ï¼švalue2, â€¦} çš„é”®å€¼å¯¹ç»“æ„ã€‚åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œkey ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œvalue ä¸ºå¯¹åº”çš„å€¼ã€‚é”®åå¯ä»¥ä½¿ç”¨æ•´æ•°å’Œå­—ç¬¦ä¸²æ¥è¡¨ç¤ºã€‚å€¼çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<p><strong>æ•°ç»„</strong> ï¼šæ•°ç»„åœ¨ JavaScript ä¸­æ˜¯æ–¹æ‹¬å· [] åŒ…è£¹èµ·æ¥çš„å†…å®¹ï¼Œæ•°æ®ç»“æ„ä¸º [â€œjavaâ€, â€œjavascriptâ€, â€œvbâ€, â€¦] çš„ç´¢å¼•ç»“æ„ã€‚åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå®ƒä¹Ÿå¯ä»¥åƒå¯¹è±¡é‚£æ ·ä½¿ç”¨é”®å€¼å¯¹ï¼Œä½†è¿˜æ˜¯ç´¢å¼•ç”¨å¾—å¤šã€‚åŒæ ·ï¼Œå€¼çš„ç±»å‹å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p>
<h5 id="è¯»å–å’Œå†™å…¥"><a href="#è¯»å–å’Œå†™å…¥" class="headerlink" title="è¯»å–å’Œå†™å…¥"></a>è¯»å–å’Œå†™å…¥</h5><p>loads() string to json # <strong>jsonæ•°æ®éœ€è¦ä½¿ç”¨åŒå¼•å·ï¼ˆ</strong>double quotes<strong>ï¼‰æ¥åŒ…å›´</strong></p>
<p>dumps() json to string <code>son.dumps(data, indent=2)</code></p>
<p>æ³¨æ„ï¼šæ–‡æœ¬å«æœ‰ä¸­æ–‡å­—ç¬¦æ—¶ï¼ŒæŒ‡å®šç¼–ç æ–¹å¼ä¸º<strong>utf-8</strong> å¹¶ä¸”å°†ensure_asciiè®¾ä¸ºFalseï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'MaoYan_result.txt'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(json.dumps(content, ensure_ascii=<span class="literal">False</span>) + <span class="string">'\n'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="CSV"><a href="#CSV" class="headerlink" title="CSV"></a>CSV</h4><p>è§å‰ç¯‡ï¼š<a href="https://yuqie.github.io/2020/07/25/python%E4%B9%8Bcsv/" target="_blank" rel="noopener">pythonä¹‹csv</a></p>
<h3 id="å…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“"></a>å…³ç³»å‹æ•°æ®åº“</h3><p>å…³ç³»å‹æ•°æ®åº“æ˜¯åŸºäº<strong>å…³ç³»æ¨¡å‹</strong>çš„æ•°æ®åº“ï¼Œè€Œå…³ç³»æ¨¡å‹æ˜¯é€šè¿‡äºŒç»´è¡¨æ¥ä¿å­˜çš„ï¼Œæ‰€ä»¥å®ƒçš„å­˜å‚¨æ–¹å¼å°±æ˜¯è¡Œåˆ—ç»„æˆçš„è¡¨ï¼Œæ¯ä¸€åˆ—æ˜¯ä¸€ä¸ªå­—æ®µï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€æ¡è®°å½•ã€‚è¡¨å¯ä»¥çœ‹ä½œæŸä¸ªå®ä½“çš„é›†åˆï¼Œè€Œå®ä½“ä¹‹é—´å­˜åœ¨è”ç³»ï¼Œè¿™å°±éœ€è¦è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»æ¥ä½“ç°ï¼Œå¦‚ä¸»é”®å¤–é”®çš„å…³è”å…³ç³»ã€‚å¤šä¸ªè¡¨ç»„æˆä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚</p>
<p>å…³ç³»å‹æ•°æ®åº“æœ‰å¤šç§ï¼Œå¦‚ SQLiteã€MySQLã€Oracleã€SQL Serverã€DB2 ç­‰ã€‚</p>
<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>åœ¨ Python 2 ä¸­ï¼Œè¿æ¥ MySQL çš„åº“å¤§å¤šæ˜¯ä½¿ç”¨ MySQLdbï¼Œä½†æ˜¯æ­¤åº“çš„å®˜æ–¹å¹¶ä¸æ”¯æŒ Python 3ï¼Œæ‰€ä»¥åœ¨Python3ä¸­ä½¿ç”¨ PyMySQL æ“ä½œ MySQL æ•°æ®åº“ã€‚</p>
<h5 id="åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š"><a href="#åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š" class="headerlink" title="åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š"></a>åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼š</h5><p><code>&quot;CREATE DATABASE spiders DEFAULT CHARACTER SET utf8&quot;</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql  </span><br><span class="line"></span><br><span class="line">db = pymysql.connect(host=<span class="string">'localhost'</span>,user=<span class="string">'root'</span>, password=<span class="string">'123456'</span>, port=<span class="number">3306</span>)  </span><br><span class="line">cursor = db.cursor()  </span><br><span class="line">cursor.execute(<span class="string">"CREATE DATABASE spiders DEFAULT CHARACTER SET utf8"</span>)  </span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<p>ä¹‹åé‡æ–°è¿æ¥æ•°æ®åº“ï¼ŒæŒ‡å®šå‚æ•°db</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = pymysql.connect(host=<span class="string">'localhost'</span>, user=<span class="string">'root'</span>, password=<span class="string">'123456'</span>, port=<span class="number">3306</span>, db=<span class="string">'spiders'</span>)</span><br><span class="line">cursor = db.cursor()</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºè¡¨ï¼š"><a href="#åˆ›å»ºè¡¨ï¼š" class="headerlink" title="åˆ›å»ºè¡¨ï¼š"></a>åˆ›å»ºè¡¨ï¼š</h5><p><code>&#39;CREATE TABLE IF NOT EXISTS students (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, age INT NOT NULL, PRIMARY KEY (id))&#39;</code></p>
<h5 id="æ’å…¥æ•°æ®ï¼š"><a href="#æ’å…¥æ•°æ®ï¼š" class="headerlink" title="æ’å…¥æ•°æ®ï¼š"></a>æ’å…¥æ•°æ®ï¼š</h5><p><code>&#39;INSERT INTO students(id, name, age) values(% s, % s, % s)&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">try:</span><br><span class="line">    cursor.execute(sql, (id, user, age))</span><br><span class="line">    db.commit()</span><br><span class="line">except:</span><br><span class="line">    db.rollback()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹äºæ•°æ®æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œéƒ½éœ€è¦æ‰§è¡Œ db å¯¹è±¡çš„ commit æ–¹æ³•æ‰èƒ½çœŸæ­£ç”Ÿæ•ˆï¼Œè¿™ä¸ªæ–¹æ³•æ‰æ˜¯çœŸæ­£å°†è¯­å¥æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œçš„æ–¹æ³•ã€‚</li>
<li>å¼‚å¸¸å¤„ç†ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œåˆ™è°ƒç”¨ rollback æ‰§è¡Œæ•°æ®å›æ»šï¼Œå¯ä»¥ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li>
<li>äº‹åŠ¡æœºåˆ¶å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯è¿™ä»¶äº‹è¦ä¹ˆå‘ç”Ÿäº†ï¼Œè¦ä¹ˆæ²¡æœ‰å‘ç”Ÿã€‚æ¯”å¦‚æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä¸ä¼šå­˜åœ¨æ’å…¥ä¸€åŠçš„æƒ…å†µï¼Œè¦ä¹ˆå…¨éƒ¨æ’å…¥ï¼Œè¦ä¹ˆéƒ½ä¸æ’å…¥ï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„åŸå­æ€§ã€‚</li>
<li>äº‹åŠ¡çš„ 4 ä¸ªå±æ€§ï¼Œä¹Ÿç§°ä¸º ACID ç‰¹æ€§ã€‚</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŸå­æ€§ï¼ˆatomicityï¼‰</td>
<td>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­åŒ…æ‹¬çš„è¯¸æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åš</td>
</tr>
<tr>
<td>ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰</td>
<td>äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚ä¸€è‡´æ€§ä¸åŸå­æ€§æ˜¯å¯†åˆ‡ç›¸å…³çš„</td>
</tr>
<tr>
<td>éš”ç¦»æ€§ï¼ˆisolationï¼‰</td>
<td>ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°</td>
</tr>
<tr>
<td>æŒä¹…æ€§ï¼ˆdurabilityï¼‰</td>
<td>æŒç»­æ€§ä¹Ÿç§°æ°¸ä¹…æ€§ï¼ˆpermanenceï¼‰ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“</td>
</tr>
</tbody>
</table>
</div>
<p><strong>åŠ¨æ€æ•°æ®ä¼ å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'id'</span>: <span class="string">'20120001'</span>,</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Bob'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">table = <span class="string">'students'</span></span><br><span class="line">keys = <span class="string">', '</span>.join(data.keys())</span><br><span class="line">values = <span class="string">', '</span>.join([<span class="string">'% s'</span>] * len(data))</span><br><span class="line">sql = <span class="string">'INSERT INTO &#123;table&#125;(&#123;keys&#125;) VALUES (&#123;values&#125;)'</span>.format(table=table, keys=keys, values=values)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="keyword">if</span> cursor.execute(sql, tuple(data.values())):</span><br><span class="line">       print(<span class="string">'Successful'</span>)</span><br><span class="line">       db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Failed'</span>)</span><br><span class="line">    db.rollback()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<h5 id="æ›´æ–°æ•°æ®ï¼š"><a href="#æ›´æ–°æ•°æ®ï¼š" class="headerlink" title="æ›´æ–°æ•°æ®ï¼š"></a>æ›´æ–°æ•°æ®ï¼š</h5><p>ç°ä¸€ç§å»é‡çš„æ–¹æ³•ï¼Œå¦‚æœæ•°æ®å­˜åœ¨ï¼Œåˆ™æ›´æ–°æ•°æ®ï¼›å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥æ•°æ®ã€‚</p>
<p><code>INSERT INTO students(id, name, age) VALUES (% s, % s, % s) ON DUPLICATE KEY UPDATE id = % s, name = % s, age = % s</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'INSERT INTO &#123;table&#125;(&#123;keys&#125;) VALUES (&#123;values&#125;) ON DUPLICATE KEY UPDATE'</span>.format(table=table, keys=keys, values=values)</span><br><span class="line">update = <span class="string">','</span>.join([<span class="string">"&#123;key&#125; = % s"</span>.format(key=key) <span class="keyword">for</span> key <span class="keyword">in</span> data])</span><br><span class="line">sql += update</span><br></pre></td></tr></table></figure>
<h5 id="åˆ é™¤æ•°æ®ï¼š"><a href="#åˆ é™¤æ•°æ®ï¼š" class="headerlink" title="åˆ é™¤æ•°æ®ï¼š"></a>åˆ é™¤æ•°æ®ï¼š</h5><p><code>&#39;DELETE FROM  {table} WHERE {condition}&#39;.format(table=table, condition=condition)</code></p>
<h5 id="æŸ¥è¯¢æ•°æ®ï¼š"><a href="#æŸ¥è¯¢æ•°æ®ï¼š" class="headerlink" title="æŸ¥è¯¢æ•°æ®ï¼š"></a>æŸ¥è¯¢æ•°æ®ï¼š</h5><p>æŸ¥è¯¢å¹´é¾„ 20 å²åŠä»¥ä¸Šçš„å­¦ç”Ÿ<code>&#39;SELECT * FROM students WHERE age &gt;= 20&#39;</code></p>
<p>fetchone æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è·å–ç»“æœçš„ç¬¬ä¸€æ¡æ•°æ®ï¼Œè¿”å›ç»“æœæ˜¯å…ƒç»„å½¢å¼.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'SELECT * FROM students WHERE age &gt;= 20'</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    print(<span class="string">'Count:'</span>, cursor.rowcount)</span><br><span class="line">    row = cursor.fetchone()</span><br><span class="line">    <span class="keyword">while</span> row:</span><br><span class="line">        print(<span class="string">'Row:'</span>, row)</span><br><span class="line">        row = cursor.fetchone()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Error'</span>)</span><br></pre></td></tr></table></figure>
<p>fetchall æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¾—åˆ°ç»“æœçš„æ‰€æœ‰æ•°æ®ã€‚ç„¶åå°†å…¶ç»“æœå’Œç±»å‹æ‰“å°å‡ºæ¥ï¼Œå®ƒæ˜¯äºŒé‡å…ƒç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€æ¡è®°å½•ï¼Œæˆ‘ä»¬å°†å…¶éå†è¾“å‡ºå‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sql = <span class="string">'SELECT * FROM students WHERE age &gt;= 20'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    results = cursor.fetchall()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">        print(row)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Error'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨"><a href="#éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨"></a>éå…³ç³»å‹æ•°æ®åº“å­˜å‚¨</h3><p>NoSQLï¼Œå…¨ç§° Not Only SQLï¼Œæ„ä¸ºä¸ä»…ä»…æ˜¯ SQLï¼Œæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ã€‚NoSQL æ˜¯åŸºäº<strong>é”®å€¼å¯¹</strong>çš„ï¼Œè€Œä¸”ä¸éœ€è¦ç»è¿‡ SQL å±‚çš„è§£æï¼Œæ•°æ®ä¹‹é—´æ²¡æœ‰è€¦åˆæ€§ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ä»£è¡¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>é”®å€¼å­˜å‚¨æ•°æ®åº“</td>
<td>Redisã€Voldemort å’Œ Oracle BDB ç­‰</td>
</tr>
<tr>
<td>åˆ—å­˜å‚¨æ•°æ®åº“</td>
<td>Cassandraã€HBase å’Œ Riak ç­‰</td>
</tr>
<tr>
<td>æ–‡æ¡£å‹æ•°æ®åº“</td>
<td>CouchDB å’Œ MongoDB ç­‰</td>
</tr>
<tr>
<td>å›¾å½¢æ•°æ®åº“</td>
<td>Neo4Jã€InfoGrid å’Œ Infinite Graph ç­‰</td>
</tr>
</tbody>
</table>
</div>
<p>å¯¹äº<strong>çˆ¬è™«çš„æ•°æ®å­˜å‚¨</strong>æ¥è¯´ï¼Œä¸€æ¡æ•°æ®å¯èƒ½å­˜åœ¨<strong>æŸäº›å­—æ®µæå–å¤±è´¥è€Œç¼ºå¤±</strong>çš„æƒ…å†µï¼Œè€Œä¸”<strong>æ•°æ®å¯èƒ½éšæ—¶è°ƒæ•´</strong>ã€‚å¦å¤–ï¼Œæ•°æ®ä¹‹é—´è¿˜å­˜åœ¨<strong>åµŒå¥—å…³ç³»</strong>ã€‚å¦‚æœä½¿ç”¨å…³ç³»å‹æ•°æ®åº“å­˜å‚¨ï¼Œä¸€æ˜¯éœ€è¦æå‰å»ºè¡¨ï¼ŒäºŒæ˜¯å¦‚æœå­˜åœ¨æ•°æ®åµŒå¥—å…³ç³»çš„è¯ï¼Œéœ€è¦è¿›è¡Œåºåˆ—åŒ–æ“ä½œæ‰å¯ä»¥å­˜å‚¨ï¼Œè¿™éå¸¸ä¸æ–¹ä¾¿ã€‚</p>
<h4 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h4><p>MongoDB æ˜¯ç”± <strong>C++ </strong> è¯­è¨€ç¼–å†™çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªåŸºäº<strong>åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨</strong> çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿï¼Œå…¶å†…å®¹å­˜å‚¨å½¢å¼ç±»ä¼¼ JSON å¯¹è±¡ï¼Œå®ƒçš„å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ã€æ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚</p>
<p><a href="https://www.jianshu.com/p/d99f6fd8b209" target="_blank" rel="noopener">å®‰è£…MongoDB</a></p>
<p>CMDå‘½ä»¤è¿›å…¥æŸä¸ªç›®å½•: è¿›å…¥æŸä¸ªç£ç›˜ï¼Œç›´æ¥ç›˜ç¬¦ä»£å·ï¼šå¦‚Dï¼šï¼Œä¸ç”¨CD å‘½ä»¤åˆ‡æ¢; è¿›å…¥é™¤æ ¹å½•ä»¥ä¸‹çš„æ–‡ä»¶å¤¹, cd æ–‡ä»¶å¤¹è·¯å¾„.</p>
<p>é‡åˆ°warningï¼šAccess control is not enabled for the database.</p>
<p>åŸå› åˆ†æï¼šæ–°ç‰ˆæœ¬çš„MongDBå¢åŠ äº†å®‰å…¨æ€§è®¾è®¡ï¼Œæ¨èç”¨æˆ·åˆ›å»ºä½¿ç”¨æ•°æ®åº“æ—¶è¿›è¡ŒéªŒè¯ã€‚å¦‚æœç”¨æˆ·æƒ³å»ºç«‹ç®€å•è¿æ¥ï¼Œåˆ™ä¼šæç¤ºè­¦ç¤ºä¿¡æ¯ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šåˆ›å»ºç®¡ç†å‘˜å¹¶è®¾ç½®å¯†ç </p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: "userAdmin", //ç”¨æˆ·å</span><br><span class="line">    pwd: "123", //å¯†ç </span><br><span class="line">    roles: [ &#123; role: "userAdminAnyDatabase", db: "admin" &#125; ] //æƒé™</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>é‡å¯MongoDBæœåŠ¡å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mongod --auth --port <span class="number">27017</span> --dbpath &lt;å…³è”è·¯å¾„:bin/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç«¯å£é»˜è®¤å°±æ˜¯27017å¯ä»¥ä¸æŒ‡å®š</p>
<p><a href="https://blog.csdn.net/ttxsely/article/details/77726164" target="_blank" rel="noopener">https://blog.csdn.net/ttxsely/article/details/77726164</a></p>
</li>
</ul>
<h5 id="è¿æ¥MongoDB"><a href="#è¿æ¥MongoDB" class="headerlink" title="è¿æ¥MongoDB"></a>è¿æ¥MongoDB</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line">client = pymongo.MongoClient(host=<span class="string">'localhost'</span>, port=<span class="number">27017</span>)</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">client = MongoClient(<span class="string">'mongodb://localhost:27017/'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="æŒ‡å®šæ•°æ®åº“"><a href="#æŒ‡å®šæ•°æ®åº“" class="headerlink" title="æŒ‡å®šæ•°æ®åº“"></a>æŒ‡å®šæ•°æ®åº“</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">db = client.test</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">db = client[test]</span><br></pre></td></tr></table></figure>
<h5 id="æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰"><a href="#æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰" class="headerlink" title="æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰"></a>æŒ‡å®šé›†åˆï¼ˆcollectionï¼‰</h5><p><strong>é›†åˆ</strong>ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„<strong>è¡¨</strong>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">collection = db.students</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">collection = db[<span class="string">'students'</span>]</span><br></pre></td></tr></table></figure>
<h5 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">student = &#123;</span><br><span class="line">    <span class="string">'id'</span>: <span class="string">'20170101'</span>,</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Jordan'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="string">'gender'</span>: <span class="string">'male'</span></span><br><span class="line">&#125;</span><br><span class="line">result = collection.insert(student)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>åœ¨ MongoDB ä¸­ï¼Œæ¯æ¡æ•°æ®å…¶å®éƒ½æœ‰ä¸€ä¸ª_id å±æ€§æ¥å”¯ä¸€æ ‡è¯†ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡æ˜è¯¥å±æ€§ï¼ŒMongoDB ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ª ObjectId ç±»å‹çš„_id å±æ€§ã€‚insert() æ–¹æ³•ä¼šåœ¨æ‰§è¡Œåè¿”å›_id å€¼ã€‚</p>
</li>
<li><p>ä»¥åˆ—è¡¨å½¢å¼ä¼ é€’å¯åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®ã€‚</p>
</li>
<li><p>PyMongo 3.x ç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹ä¸æ¨èä½¿ç”¨ insert() æ–¹æ³•ã€‚è€Œæ˜¯æ¨èä½¿ç”¨ insert_one() å’Œ insert_many() æ–¹æ³•æ¥åˆ†åˆ«æ’å…¥å•æ¡è®°å½•å’Œå¤šæ¡è®°å½•ã€‚</p>
<p>insert_one() ï¼ˆè¿”å›InsertOneResultå¯¹è±¡ï¼‰ï¼Œç”¨å…¶ inserted_id å±æ€§è·å–_idã€‚</p>
<p>insert_many() ï¼ˆè¿”å›çš„ç±»å‹æ˜¯ InsertManyResultï¼‰ï¼Œè°ƒç”¨ inserted_ids å±æ€§å¯ä»¥è·å–æ’å…¥æ•°æ®çš„_id åˆ—è¡¨ã€‚</p>
</li>
</ul>
<h5 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h5><ul>
<li>find_one() æŸ¥è¯¢å¾—åˆ°çš„æ˜¯å•ä¸ªç»“æœï¼Œç±»å‹ä¸ºå­—å…¸ï¼š<code>result = collection.find_one({&#39;name&#39;: &#39;Mike&#39;})</code></li>
<li>find() åˆ™è¿”ç»“æœæ˜¯ Cursor ç±»å‹ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªç”Ÿæˆå™¨ï¼š<code>results = collection.find({&#39;age&#39;: 20})</code></li>
<li>æ¯”è¾ƒç¬¦å·å’ŒåŠŸèƒ½ç¬¦å·ï¼š</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>$lt</td>
<td>å°äº</td>
<td>{â€˜ageâ€™: {â€˜$ltâ€™: 20}}</td>
</tr>
<tr>
<td>$gt</td>
<td>å¤§äº</td>
<td>{â€˜ageâ€™: {â€˜$gtâ€™: 20}}</td>
</tr>
<tr>
<td>$lte</td>
<td>å°äºç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$lteâ€™: 20}}</td>
</tr>
<tr>
<td>$gte</td>
<td>å¤§äºç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$gteâ€™: 20}}</td>
</tr>
<tr>
<td>$ne</td>
<td>ä¸ç­‰äº</td>
<td>{â€˜ageâ€™: {â€˜$neâ€™: 20}}</td>
</tr>
<tr>
<td>$in</td>
<td>åœ¨èŒƒå›´å†…</td>
<td>{â€˜ageâ€™: {â€˜$inâ€™: [20, 23]}}</td>
</tr>
<tr>
<td>$nin</td>
<td>ä¸åœ¨èŒƒå›´å†…</td>
<td>{â€˜ageâ€™: {â€˜$ninâ€™: [20, 23]}}</td>
</tr>
<tr>
<td>æ­£åˆ™åŒ¹é…æŸ¥è¯¢</td>
<td>ä»¥ M å¼€å¤´</td>
<td>{â€˜$regexâ€™: â€˜^M.*â€™}</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ç¤ºä¾‹</th>
<th>ç¤ºä¾‹å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>$regex</td>
<td>åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</td>
<td>{â€˜$regexâ€™: â€˜^M.*â€™}</td>
<td>name ä»¥ M å¼€å¤´</td>
</tr>
<tr>
<td>$exists</td>
<td>å±æ€§æ˜¯å¦å­˜åœ¨</td>
<td>{â€˜nameâ€™: {â€˜$existsâ€™: True}}</td>
<td>name å±æ€§å­˜åœ¨</td>
</tr>
<tr>
<td>$type</td>
<td>ç±»å‹åˆ¤æ–­</td>
<td>{â€˜ageâ€™: {â€˜$typeâ€™: â€˜intâ€™}}</td>
<td>age çš„ç±»å‹ä¸º int</td>
</tr>
<tr>
<td>$mod</td>
<td>æ•°å­—æ¨¡æ“ä½œ</td>
<td>{â€˜ageâ€™: {â€˜$modâ€™: [5, 0]}}</td>
<td>å¹´é¾„æ¨¡ 5 ä½™ 0</td>
</tr>
<tr>
<td>$text</td>
<td>æ–‡æœ¬æŸ¥è¯¢</td>
<td>{â€˜$textâ€™: {â€˜$searchâ€™: â€˜Mikeâ€™}}</td>
<td>text ç±»å‹çš„å±æ€§ä¸­åŒ…å« Mike å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>$where</td>
<td>é«˜çº§æ¡ä»¶æŸ¥è¯¢</td>
<td>{â€˜$whereâ€™: â€˜obj.fans_count == obj.follows_countâ€™}</td>
<td>è‡ªèº«ç²‰ä¸æ•°ç­‰äºå…³æ³¨æ•°</td>
</tr>
</tbody>
</table>
</div>
<h5 id="è®¡æ•°"><a href="#è®¡æ•°" class="headerlink" title="è®¡æ•°"></a>è®¡æ•°</h5><p><code>count = collection.find({&#39;age&#39;: 20}).count()</code></p>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING)</code></p>
<p>è°ƒç”¨ pymongo.ASCENDING æŒ‡å®šå‡åºã€‚å¦‚æœè¦é™åºæ’åˆ—ï¼Œå¯ä»¥ä¼ å…¥ pymongo.DESCENDINGã€‚</p>
<h5 id="åç§»"><a href="#åç§»" class="headerlink" title="åç§»"></a>åç§»</h5><p>ä¾‹å¦‚ï¼Œå¿½ç•¥å‰ä¸¤ä¸ªå…ƒç´ ï¼Œå¾—åˆ°ç¬¬ä¸‰ä¸ªåŠä»¥åçš„å…ƒç´ ï¼š</p>
<p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING).skip(2)</code></p>
<p>å¯ä»¥ç”¨ limit() æ–¹æ³•æŒ‡å®šè¦å–çš„ç»“æœä¸ªæ•°ï¼š</p>
<p><code>results = collection.find().sort(&#39;name&#39;, pymongo.ASCENDING).skip(2).limit(2)</code></p>
<ul>
<li><p>åœ¨æ•°æ®åº“æ•°é‡éå¸¸åºå¤§çš„æ—¶å€™ï¼Œå¦‚åƒä¸‡ã€äº¿çº§åˆ«ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨å¤§çš„åç§»é‡æ¥æŸ¥è¯¢æ•°æ®ï¼Œå› ä¸ºè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚è¿™æ—¶éœ€è¦è®°å½•å¥½ä¸Šæ¬¡æŸ¥è¯¢çš„_idï¼Œä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹æ“ä½œæ¥æŸ¥è¯¢:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from bson.objectid import ObjectId</span><br><span class="line">collection.find(&#123;&#39;_id&#39;: &#123;&#39;$gt&#39;: ObjectId(&#39;593278c815c2602678bb2b8d&#39;)&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h5><ul>
<li><p>update</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">condition = &#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;</span><br><span class="line">student = collection.find_one(condition)</span><br><span class="line">student[<span class="string">'age'</span>] = <span class="number">25</span></span><br><span class="line">result = collection.update(condition, student)</span><br><span class="line"><span class="comment"># ä½¿ç”¨ $set æ“ä½œç¬¦å¯¹æ•°æ®è¿›è¡Œæ›´æ–°</span></span><br><span class="line">result = collection.update(condition, &#123;<span class="string">'$set'</span>: student&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>update_one()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½å†ç›´æ¥ä¼ å…¥ä¿®æ”¹åçš„å­—å…¸,è€Œæ˜¯éœ€è¦ä½¿ç”¨ &#123;'$set': student&#125;</span></span><br><span class="line">condition = &#123;<span class="string">'age'</span>: &#123;<span class="string">'$gt'</span>: <span class="number">20</span>&#125;&#125;</span><br><span class="line">result = collection.update_one(condition, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'age'</span>: <span class="number">1</span>&#125;&#125;) <span class="comment"># æ‰§è¡Œä¹‹åä¼šå°†ç¬¬ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®å¹´é¾„åŠ  1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>update_many()ï¼Œåˆ™ä¼šå°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®éƒ½æ›´æ–°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.update_many(condition, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'age'</span>: <span class="number">1</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h5><ul>
<li><p>remove()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_one(&#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete_one()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_one(&#123;<span class="string">'name'</span>: <span class="string">'Kevin'</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete_many()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = collection.delete_many(&#123;<span class="string">'age'</span>: &#123;<span class="string">'$lt'</span>: <span class="number">25</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="å…¶ä»–æ“ä½œ"><a href="#å…¶ä»–æ“ä½œ" class="headerlink" title="å…¶ä»–æ“ä½œ"></a>å…¶ä»–æ“ä½œ</h5><ul>
<li>ç»„åˆæ–¹æ³•ï¼Œå¦‚ find_one_and_delete()ã€find_one_and_replace() å’Œ find_one_and_update(</li>
<li>å¯¹ç´¢å¼•è¿›è¡Œæ“ä½œï¼Œå¦‚ create_index()ã€create_indexes() å’Œ drop_index() ç­‰ã€‚</li>
</ul>
<h4 id="Redis-å­˜å‚¨"><a href="#Redis-å­˜å‚¨" class="headerlink" title="Redis å­˜å‚¨"></a>Redis å­˜å‚¨</h4><p>Redis æ˜¯ä¸€ä¸ªåŸºäº<strong>å†…å­˜</strong> çš„é«˜æ•ˆçš„é”®å€¼å‹éå…³ç³»å‹æ•°æ®åº“ï¼Œå­˜å–æ•ˆç‡æé«˜ï¼Œè€Œä¸”æ”¯æŒå¤šç§å­˜å‚¨æ•°æ®ç»“æ„ã€‚</p>
<p>StrictRedisï¼šsetå’Œgetæ“ä½œã€‚</p>
<h5 id="è¿æ¥-Redis"><a href="#è¿æ¥-Redis" class="headerlink" title="è¿æ¥ Redis"></a>è¿æ¥ Redis</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> StrictRedis  </span><br><span class="line"></span><br><span class="line">redis = StrictRedis(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>, password=<span class="string">'foobared'</span>)  <span class="comment"># defaultï¼š localhostã€6379ã€0 å’Œ None</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ ConnectionPool æ¥è¿æ¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> StrictRedis, ConnectionPool  </span><br><span class="line"></span><br><span class="line">pool = ConnectionPool(host=<span class="string">'localhost'</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>, password=<span class="string">'foobared'</span>)  </span><br><span class="line">redis = StrictRedis(connection_pool=pool)</span><br></pre></td></tr></table></figure>
<p>ConnectionPool è¿˜æ”¯æŒé€šè¿‡ URL æ¥æ„å»º, URL çš„æ ¼å¼æ”¯æŒæœ‰å¦‚ä¸‹ 3 ç§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># redis://[:password]@host:port/db   # åˆ›å»º Redis TCP è¿æ¥</span></span><br><span class="line"><span class="comment"># rediss://[:password]@host:port/db  # Redis TCP+SSL è¿æ¥</span></span><br><span class="line"><span class="comment"># unix://[:password]@/path/to/socket.sock?db=db # Redis UNIX socket è¿æ¥</span></span><br><span class="line">    </span><br><span class="line">url = <span class="string">'redis://:foobared@localhost:6379/0'</span>  </span><br><span class="line">pool = ConnectionPool.from_url(url)  </span><br><span class="line">redis = StrictRedis(connection_pool=pool)</span><br></pre></td></tr></table></figure>
<h5 id="é”®æ“ä½œ"><a href="#é”®æ“ä½œ" class="headerlink" title="é”®æ“ä½œ"></a>é”®æ“ä½œ</h5><h5 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h5><p>é”®å€¼å¯¹å½¢å¼å­˜å‚¨</p>
<p>set(name,value) </p>
<p>mset(name,value)</p>
<p>get(value)</p>
<p>mget(value)</p>
<p>getset(name, value)</p>
<p>incr(name, amount=1)  é”®åä¸º name çš„ value å¢å€¼æ“ä½œï¼Œé»˜è®¤ä¸º 1ï¼Œé”®ä¸å­˜åœ¨åˆ™è¢«åˆ›å»ºå¹¶è®¾ä¸º </p>
<p>decr(name, amount=1)</p>
<p>append(key, value)</p>
<h5 id="åˆ—è¡¨æ“ä½œ"><a href="#åˆ—è¡¨æ“ä½œ" class="headerlink" title="åˆ—è¡¨æ“ä½œ"></a>åˆ—è¡¨æ“ä½œ</h5><div class="table-container">
<table>
<thead>
<tr>
<th>æ–¹ã€€ã€€æ³•</th>
<th>ä½œã€€ã€€ç”¨</th>
<th>å‚æ•°è¯´æ˜</th>
<th>ç¤ºã€€ã€€ä¾‹</th>
<th>ç¤ºä¾‹è¯´æ˜</th>
<th>ç¤ºä¾‹ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpush(name, *values)</td>
<td>åœ¨é”®åä¸º name çš„åˆ—è¡¨æœ«å°¾æ·»åŠ å€¼ä¸º value çš„å…ƒç´ ï¼Œå¯ä»¥ä¼ å¤šä¸ª</td>
<td>nameï¼šé”®åï¼›valuesï¼šå€¼</td>
<td>redis.rpush(â€˜listâ€™, 1, 2, 3)</td>
<td>å‘é”®åä¸º list çš„åˆ—è¡¨å°¾æ·»åŠ  1ã€2ã€3</td>
<td>3ï¼Œåˆ—è¡¨å¤§å°</td>
</tr>
<tr>
<td>lpush(name, *values)</td>
<td>åœ¨é”®åä¸º name çš„åˆ—è¡¨å¤´æ·»åŠ å€¼ä¸º value çš„å…ƒç´ ï¼Œå¯ä»¥ä¼ å¤šä¸ª</td>
<td>nameï¼šé”®åï¼›valuesï¼šå€¼</td>
<td>redis.lpush(â€˜listâ€™, 0)</td>
<td>å‘é”®åä¸º list çš„åˆ—è¡¨å¤´éƒ¨æ·»åŠ  0</td>
<td>4ï¼Œåˆ—è¡¨å¤§å°</td>
</tr>
<tr>
<td>llen(name)</td>
<td>è¿”å›é”®åä¸º name çš„åˆ—è¡¨çš„é•¿åº¦</td>
<td>nameï¼šé”®å</td>
<td>redis.llen(â€˜listâ€™)</td>
<td>è¿”å›é”®åä¸º list çš„åˆ—è¡¨çš„é•¿åº¦</td>
<td>4</td>
</tr>
<tr>
<td>lrange(name, start, end)</td>
<td>è¿”å›é”®åä¸º name çš„åˆ—è¡¨ä¸­ start è‡³ end ä¹‹é—´çš„å…ƒç´ </td>
<td>nameï¼šé”®åï¼›startï¼šèµ·å§‹ç´¢å¼•ï¼›endï¼šç»ˆæ­¢ç´¢å¼•</td>
<td>redis.lrange(â€˜listâ€™, 1, 3)</td>
<td>è¿”å›èµ·å§‹ç´¢å¼•ä¸º 1 ç»ˆæ­¢ç´¢å¼•ä¸º 3 çš„ç´¢å¼•èŒƒå›´å¯¹åº”çš„åˆ—è¡¨</td>
<td>[bâ€™3â€™, bâ€™2â€™, bâ€™1â€™]</td>
</tr>
<tr>
<td>ltrim(name, start, end)</td>
<td>æˆªå–é”®åä¸º name çš„åˆ—è¡¨ï¼Œä¿ç•™ç´¢å¼•ä¸º start åˆ° end çš„å†…å®¹</td>
<td>nameï¼šé”®åï¼›startï¼šèµ·å§‹ç´¢å¼•ï¼›endï¼šç»ˆæ­¢ç´¢å¼•</td>
<td>ltrim(â€˜listâ€™, 1, 3)</td>
<td>ä¿ç•™é”®åä¸º list çš„ç´¢å¼•ä¸º 1 åˆ° 3 çš„å…ƒç´ </td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<h5 id="é›†åˆæ“ä½œ"><a href="#é›†åˆæ“ä½œ" class="headerlink" title="é›†åˆæ“ä½œ"></a>é›†åˆæ“ä½œ</h5><p>é›†åˆä¸­çš„å…ƒç´ éƒ½æ˜¯ä¸é‡å¤çš„</p>
<h5 id="æœ‰åºé›†åˆæ“ä½œ"><a href="#æœ‰åºé›†åˆæ“ä½œ" class="headerlink" title="æœ‰åºé›†åˆæ“ä½œ"></a>æœ‰åºé›†åˆæ“ä½œ</h5><p>æœ‰åºé›†åˆæ¯”é›†åˆå¤šäº†ä¸€ä¸ªåˆ†æ•°å­—æ®µï¼Œåˆ©ç”¨å®ƒå¯ä»¥å¯¹é›†åˆä¸­çš„æ•°æ®è¿›è¡Œæ’åº</p>
<h5 id="æ•£åˆ—æ“ä½œ"><a href="#æ•£åˆ—æ“ä½œ" class="headerlink" title="æ•£åˆ—æ“ä½œ"></a>æ•£åˆ—æ“ä½œ</h5><p>æ•£åˆ—è¡¨çš„æ•°æ®ç»“æ„</p>
<h5 id="RedisDump"><a href="#RedisDump" class="headerlink" title="RedisDump"></a>RedisDump</h5><p>æä¾›äº† Redis æ•°æ®çš„å¯¼å…¥å’Œå¯¼å‡ºåŠŸèƒ½ï¼Œredis-dump ç”¨äºå¯¼å‡ºæ•°æ®ï¼Œredis-load ç”¨äºå¯¼å…¥æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>csv</tag>
        <tag>æ•°æ®å¤„ç†</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>json</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°äººç”Ÿçš„ç¬¬ä¸€æ¬¡é¢è¯•</title>
    <url>/2020/07/21/%E8%AE%B0%E4%BA%BA%E7%94%9F%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1%E9%9D%A2%E8%AF%95/</url>
    <content><![CDATA[<p>å†™åœ¨æœ€å‰é¢ï¼šå¿«26å²é«˜é¾„æ‰ç»å†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡å·¥ä½œé¢è¯•ï¼Œå€¼å¾—å†™ç¯‡åšå®¢çºªå¿µä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h2 id="å½¢å¼ï¼š"><a href="#å½¢å¼ï¼š" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h2><p>ç½‘ç»œé¢è¯•ï¼›2ä¸ªHRï¼Œ10åˆ†é’Ÿã€‚</p>
<h2 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h2><ol>
<li><p>1åˆ†é’Ÿè‡ªæˆ‘ä»‹ç»ï¼›</p>
</li>
<li><p>é—®äº†æœ¬ç§‘é™¢ç³»æ˜¯ä¸‹å±é™¢ç³»ï¼ˆæ°‘åŠæŒ‚åï¼‰è¿˜æ˜¯æ­£ç»é™¢ç³»ï¼Ÿ</p>
<blockquote>
<p>åŸè¯ä¸å¤ªä¸€æ ·ï¼Œå¯¼è‡´ä¸€å¼€å§‹ç«Ÿç„¶æ²¡æœ‰å¬å‡ºæ¥HRçš„æ„æ€ï¼Œè¿˜ä¸€æœ¬æ­£ç»åœ°å‘HRä»‹ç»ã€‚</p>
</blockquote>
</li>
<li><p>ç ”ç©¶ç”Ÿå‡å­¦æ˜¯ä¿ç ”è¿˜æ˜¯è€ƒç ”ï¼Ÿ</p>
</li>
<li><p>ä¸ºä»€ä¹ˆé€‰æ‹©æ‹›å•†é“¶è¡Œï¼Œä¹‹åä¸æ‰“ç®—åšç ”ç©¶äº†ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸»è¦ä»æ‰€å­¦ä¸“ä¸šæ—¢å¯ä»¥ç»§ç»­åœ¨å®éªŒå®¤æ¢ç©¶æ›´å‰æ²¿çš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ä¸šï¼Œå·¥ä¸šç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”æˆ˜ç•¥å®¢æˆ·éƒ¨ï¼ˆæœ‰ç»†åˆ†ï¼Œæˆ¿åœ°äº§ï¼Œæ–°èƒ½æºï¼Œç”µåŠ›ç­‰ç­‰ï¼‰ä»¥åŠæŠ•èµ„é“¶è¡Œéƒ¨ï¼ˆæ¶‰åŠè¡Œä¸šç ”ç©¶ï¼‰çš„å²—ä½å’Œä¸“ä¸šæœ‰ç›¸å…³æ€§ï¼Œè¿™æ ·å¯ä»¥åšåˆ°å­¦ä»¥è‡´ç”¨ã€‚</p>
</blockquote>
</li>
<li><p>èƒ½å¦æ¥å—åŸå¸‚çš„è°ƒå‰‚ï¼Ÿ</p>
<blockquote>
<p>åªæœ‰åŒ—äº¬å’Œæ·±åœ³ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸ªäººæ— æ‰€è°“ï¼Œæ‰€ä»¥å›ç­”å¯ä»¥æ¥å—ã€‚</p>
</blockquote>
</li>
<li><p>èƒ½å¦æ¥å—å²—ä½çš„è°ƒå‰‚ï¼Ÿ</p>
<blockquote>
<p>æŠ¥åè¡¨éœ€è¦å¡«å†™ä¸‰ä¸ªå¿—æ„¿ï¼Œæˆ‘å…ˆè¡¨ç¤ºå¯ä»¥æ¥å—è°ƒå‰‚ï¼Œç„¶åé™ˆè¿°ç¬¬äºŒä¸ªå¿—æ„¿ä¸è‡ªå·±çš„å¥‘åˆç‚¹ï¼Œä½†ç¬¬ä¸‰ä¸ªå¿—æ„¿è¡¨ç°å¾—æœ‰ç‚¹ä¸å¤ªä¹æ„ï¼ŒHRé—®æˆ‘å¸®ä½ ä¿®æ”¹æˆå‰ä¸¤ä¸ªå¿—æ„¿å¯ä»¥ä¹ˆï¼Œæˆ‘è¡¨ç¤ºå¯ä»¥ORZã€‚æ·±åœ³çš„èŒä½å’ŒåŒ—äº¬çš„ä¸å¤ªä¸€æ ·ï¼ˆä¸ä¸€æ ·æ€ä¹ˆè°ƒå‰‚åŸå¸‚å‘¢ï¼‰ï¼Œå¿˜äº†é—®èƒ½ä¸èƒ½åŠ ä¸Šæ·±åœ³é‚£è¾¹çš„æŸä¸€ä¸ªå²—ä½ã€‚</p>
</blockquote>
</li>
</ol>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><ol>
<li>è¯­é€Ÿè¿‡å¿«ã€‚</li>
<li>æœ‰ç‚¹æŠ¢è¯ï¼Œæœ‰æ—¶å€™æ²¡æœ‰å¬å®ŒHRçš„é—®é¢˜å°±å¼€å§‹æ¥è¯å‡†å¤‡å›ç­”äº†ã€‚</li>
</ol>
<hr>
<p>è€å¿ƒç­‰å¾…ç»“æœï¼</p>
<p>â€‹</p>
<p>â€‹</p>
<p>â€‹</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠScikit-Learnä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹-ç¬¬äºŒéƒ¨åˆ†</title>
    <url>/2020/09/03/%E3%80%8AScikit-Learn%E4%B8%8ETensorFlow%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97%E3%80%8B-%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86/</url>
    <content><![CDATA[<p>å­¦ä¹ èµ„æ–™å‚è€ƒï¼š</p>
<p><a href="https://www.cntofu.com/book/27/docs/2.%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®.md</a></p>
<p><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">åŸä¹¦Githubä¸Šä»£ç </a></p>
<p><a href="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/" target="_blank" rel="noopener">Oreillyä¸ŠåŸä¹¦ç¬¬äºŒç‰ˆï¼ˆå¯ä»¥åœ¨çº¿é˜…è¯»ï¼‰</a></p>
<p><a href="https://github.com/apachecn/hands-on-ml-zh/blob/master/docs/1.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%A7%88.md" target="_blank" rel="noopener">ç¬¬ä¸€ç‰ˆç¿»è¯‘</a></p>
<p><a href="https://www.jianshu.com/p/3470a6efbe8d" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬ä¸€ç‰ˆ</a></p>
<p><a href="https://www.jianshu.com/p/86626c79814a" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬äºŒç‰ˆç¬¬äºŒéƒ¨åˆ†</a></p>
<p><a href="https://www.jianshu.com/p/4a94798f7dcc" target="_blank" rel="noopener">ç®€ä¹¦ã€ŠScikit-Learnã€Kerasä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹ç¬¬ä¸€ç‰ˆå’Œç¬¬äºŒç‰ˆå¯¹ç…§</a></p>
<p><a href="https://blog.csdn.net/jiaoyangwm/article/details/82387883#%E7%BB%83%E4%B9%A0%E9%A2%987" target="_blank" rel="noopener">ç»ƒä¹ é¢˜ç­”æ¡ˆå‚è€ƒ</a> <a href="https://blog.csdn.net/leowinbow/article/details/88581039" target="_blank" rel="noopener">å‚è€ƒ2</a></p>
<a id="more"></a>
<h2 id="ç¬¬10ç« -ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ"><a href="#ç¬¬10ç« -ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¬¬10ç«  ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ"></a>ç¬¬10ç«  ä½¿ç”¨Kerasæ­å»ºäººå·¥ç¥ç»ç½‘ç»œ</h2><p>éœ€è¦å®‰è£…<a href="https://www.jianshu.com/p/3a76e4f0504a" target="_blank" rel="noopener">Tensorflow</a>å’ŒKeras</p>
<p>äººå·¥ç¥ç»ç½‘ç»œæ˜¯å—å¤§è„‘ä¸­çš„ç”Ÿç‰©ç¥ç»å…ƒå¯å‘è€Œæ¥çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p>
<p>äººå·¥ç¥ç»ç½‘ç»œæ˜¯æ·±åº¦å­¦ä¹ çš„æ ¸å¿ƒï¼Œå®ƒä¸ä»…æ ·å¼å¤šæ ·ã€åŠŸèƒ½å¼ºå¤§ï¼Œè¿˜å…·æœ‰å¯ä¼¸ç¼©æ€§ï¼Œè¿™è®©äººå·¥ç¥ç»ç½‘ç»œé€‚å®œå¤„ç†åºå¤§ä¸”å¤æ‚çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œä¾‹å¦‚å¯¹æ•°åäº¿å¼ å›¾ç‰‡åˆ†ç±»ï¼ˆè°·æ­Œå›¾ç‰‡ï¼‰ã€è¯­éŸ³è¯†åˆ«ï¼ˆè‹¹æœSiriï¼‰ã€å‘æ•°äº¿ç”¨æˆ·æ¯å¤©æ¨èè§†é¢‘ï¼ˆYoutubeï¼‰ã€æˆ–è€…é€šè¿‡å­¦ä¹ å‡ ç™¾å›´æ£‹ä¸–ç•Œå† å†›ï¼ˆDeepMindçš„AlphaGoï¼‰ã€‚</p>
<h3 id="ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—"><a href="#ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—" class="headerlink" title="ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—"></a>ç¥ç»å…ƒçš„é€»è¾‘è®¡ç®—</h3><p>1943å¹´ç¥ç»ç”Ÿç†å­¦å®¶Warren McCullochå’Œæ•°å­¦å®¶Walter Pittsåœ¨ä»–ä»¬é‡Œç¨‹ç¢‘çš„è®ºæ–‡<a href="https://scholar.google.com/scholar?q=A+Logical+Calculus+of+Ideas+Immanent+in+Nervous+Activity+author%3Amcculloch" target="_blank" rel="noopener">ã€ŠA Logical Calculus of Ideas Immanent in Nervous Activityã€‹</a> ä¸­ä»‹ç»äº†ä¸€ä¸ªç®€å•çš„ç”Ÿç‰©ç¥ç»å…ƒæ¨¡å‹ï¼Œå®ƒåæ¥æ¼”åŒ–æˆäº†äººå·¥ç¥ç»å…ƒï¼šä¸€ä¸ªæˆ–å¤šä¸ªäºŒå…ƒï¼ˆå¼€æˆ–å…³ï¼‰è¾“å…¥ï¼Œä¸€ä¸ªäºŒå…ƒè¾“å‡ºã€‚å½“è¾¾åˆ°ä¸€å®šçš„è¾“å…¥é‡æ—¶ï¼Œç¥ç»å…ƒå°±ä¼šäº§ç”Ÿè¾“å‡ºã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-51a591f44c8f7bba.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰"><a href="#æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰" class="headerlink" title="æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰"></a>æ„ŸçŸ¥æœºï¼ˆå•ä¸ªTLUï¼‰</h3><p>æ„ŸçŸ¥æœºæ˜¯æœ€ç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œç»“æ„ä¹‹ä¸€ï¼Œç”± Frank Rosenblatt å‘æ˜äº 1957å¹´ã€‚</p>
<p>å®ƒåŸºäºä¸€ç§ç¨å¾®ä¸åŒçš„äººå·¥ç¥ç»å…ƒï¼Œé˜ˆå€¼é€»è¾‘å•å…ƒï¼ˆTLUï¼‰ï¼Œæˆ–ç§°ä¸ºçº¿æ€§é˜ˆå€¼å•å…ƒï¼ˆLTUï¼‰ï¼šè¾“å…¥å’Œè¾“å‡ºæ˜¯æ•°å­—ï¼ˆè€Œä¸æ˜¯äºŒå…ƒå¼€/å…³å€¼ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªè¾“å…¥è¿æ¥éƒ½ä¸€ä¸ªæƒé‡ã€‚TLUè®¡ç®—å…¶è¾“å…¥çš„åŠ æƒå’Œï¼ˆ$z = W_1x_1 + W_2x_2 + â€¦ + W_nx_n = x^TÂ·Wï¼‰$ï¼Œç„¶åå°†é˜¶è·ƒå‡½æ•°åº”ç”¨äºè¯¥å’Œï¼Œå¹¶è¾“å‡ºç»“æœï¼š$h_W(x) = step(z)$ï¼Œå…¶ä¸­$z = x^TÂ·W$ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c40c1380818019d3.png?imageMogr2/auto-orient/strip|imageView2/2/w/1113/format/webp" alt="img"></p>
<h4 id="é˜¶è·ƒå‡½æ•°ï¼š"><a href="#é˜¶è·ƒå‡½æ•°ï¼š" class="headerlink" title="é˜¶è·ƒå‡½æ•°ï¼š"></a><strong>é˜¶è·ƒå‡½æ•°</strong>ï¼š</h4><p>å•ä½é˜¶è·ƒå‡½æ•°ï¼ˆHeaviside step functionï¼‰:</p>
<script type="math/tex; mode=display">
heaviside(z)=\left \{ \begin{array} {ll} 0& if\ z<0\\1&if \ z\geq 0 \end{array} \right.\\
sgn(z)=\left \{ \begin{array} {ll} 0& if\ z<0\\0 & if\ z =0\\1&if \ z\gt 0 \end{array} \right.</script><p>å•ä¸€TLU å¯ç”¨äºç®€å•çš„çº¿æ€§äºŒå…ƒåˆ†ç±»ã€‚å®ƒè®¡ç®—è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œå¦‚æœç»“æœè¶…è¿‡é˜ˆå€¼ï¼Œå®ƒè¾“å‡ºæ­£ç±»æˆ–è€…è¾“å‡ºè´Ÿç±»ï¼ˆå°±åƒé€»è¾‘å›å½’åˆ†ç±»æˆ–çº¿æ€§SVMåˆ†ç±»ï¼‰ã€‚</p>
<p><strong>æ„ŸçŸ¥å™¨åªç”±ä¸€å±‚ TLU ç»„æˆï¼Œæ¯ä¸ªTLUè¿æ¥åˆ°æ‰€æœ‰è¾“å…¥</strong>ã€‚å½“ä¸€å±‚çš„ç¥ç»å…ƒè¿æ¥ç€å‰ä¸€å±‚çš„æ¯ä¸ªç¥ç»å…ƒæ—¶ï¼Œè¯¥å±‚è¢«ç§°ä¸º<strong>å…¨è¿æ¥å±‚ï¼Œæˆ–ç´§å¯†å±‚</strong>ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-878dec9a6b1e9c09.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>é€šå¸¸å†æ·»åŠ ä¸€ä¸ª<strong>åç½®ç‰¹å¾ï¼ˆ$X_0=1$ï¼‰</strong>ï¼šè¿™ç§åç½®ç‰¹æ€§é€šå¸¸ç”¨ä¸€ç§ç§°ä¸ºåç½®ç¥ç»å…ƒçš„ç‰¹æ®Šç±»å‹çš„ç¥ç»å…ƒæ¥è¡¨ç¤ºï¼Œå®ƒæ€»æ˜¯è¾“å‡º 1ã€‚</p>
<p>ä¸€ä¸ªå…¨è¿æ¥å±‚ç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼š$h_{W,b}(x) = \phi (XW+B)$</p>
<h4 id="Hebbè§„åˆ™"><a href="#Hebbè§„åˆ™" class="headerlink" title="Hebbè§„åˆ™"></a>Hebbè§„åˆ™</h4><p>å¦‚ä½•è®­ç»ƒæ„ŸçŸ¥æœºï¼šæ„ŸçŸ¥å™¨ä¸€æ¬¡è¢«é¦ˆé€ä¸€ä¸ªè®­ç»ƒå®ä¾‹ï¼Œå¯¹äºæ¯ä¸ªå®ä¾‹ï¼Œå®ƒè¿›è¡Œé¢„æµ‹ã€‚å¯¹äºæ¯ä¸€ä¸ªäº§ç”Ÿé”™è¯¯é¢„æµ‹çš„è¾“å‡ºç¥ç»å…ƒï¼Œä¿®æ­£è¾“å…¥çš„è¿æ¥æƒé‡ï¼Œä»¥è·å¾—æ­£ç¡®çš„é¢„æµ‹ã€‚</p>
<script type="math/tex; mode=display">
\omega_{i,j}^{(next \ step)}=\omega_{i,j}+\eta (y_j-\hat y_j)x_i</script><p><strong>æ¯ä¸ªè¾“å‡ºç¥ç»å…ƒçš„å†³ç­–è¾¹ç•Œæ˜¯çº¿æ€§çš„ï¼Œå› æ­¤æ„ŸçŸ¥å™¨ä¸èƒ½å­¦ä¹ å¤æ‚çš„æ¨¡å¼</strong>ï¼ˆæ¯”å¦‚ Logistic å›å½’åˆ†ç±»å™¨ï¼‰ã€‚å¦‚æœè®­ç»ƒå®ä¾‹æ˜¯çº¿æ€§å¯åˆ†çš„ï¼ŒRosenblatt è¯æ˜è¯¥ç®—æ³•å°†æ”¶æ•›åˆ°ä¸€ä¸ªè§£ã€‚è¿™è¢«ç§°ä¸º<strong>æ„ŸçŸ¥å™¨æ”¶æ•›å®šç†</strong>ã€‚</p>
<p><strong>æ„ŸçŸ¥æœºä¸è¾“å‡ºç±»æ¦‚ç‡ï¼Œè€Œæ˜¯åŸºäºç¡¬é˜ˆå€¼è¿›è¡Œé¢„æµ‹ã€‚</strong></p>
<h4 id="æ„ŸçŸ¥æœºçš„å±€é™æ€§"><a href="#æ„ŸçŸ¥æœºçš„å±€é™æ€§" class="headerlink" title="æ„ŸçŸ¥æœºçš„å±€é™æ€§"></a>æ„ŸçŸ¥æœºçš„å±€é™æ€§</h4><ol>
<li>ä¸èƒ½è§£å†³ä¸€äº›çç¢çš„é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå¼‚æˆ–ï¼ˆXORï¼‰åˆ†ç±»é—®é¢˜ï¼‰ï¼ˆçº¿æ€§åˆ†ç±»æ¨¡å‹éƒ½ä¸èƒ½è§£å†³å¼‚æˆ–é—®é¢˜ï¼‰</li>
</ol>
<p>å¯ä»¥é€šè¿‡å †å å¤šä¸ªæ„ŸçŸ¥æœºæ¶ˆé™¤ï¼Œç”±æ­¤äº§ç”Ÿçš„äººå·¥ç¥ç»ç½‘ç»œè¢«ç§°ä¸º<strong>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰</strong>ã€‚ç‰¹åˆ«åœ°ï¼ŒMLP å¯ä»¥è§£å†³ XOR é—®é¢˜ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a8b41a11c481fc03.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰"><a href="#å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰" class="headerlink" title="å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰"></a>å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰</h3><p>MLP ç”±ä¸€ä¸ªè¾“å…¥å±‚ã€ä¸€ä¸ªæˆ–å¤šä¸ªç§°ä¸ºéšè—å±‚çš„ TLU ç»„æˆï¼Œä¸€ä¸ª TLU å±‚ç§°ä¸ºè¾“å‡ºå±‚ï¼ˆè§å›¾ 10-7ï¼‰ã€‚é è¿‘è¾“å…¥å±‚çš„å±‚ï¼Œé€šå¸¸è¢«ç§°ä¸ºæµ…å±‚ï¼Œé è¿‘è¾“å‡ºå±‚çš„å±‚é€šå¸¸è¢«ç§°ä¸ºä¸Šå±‚ã€‚é™¤äº†è¾“å‡ºå±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ä¸€ä¸ªåç½®ç¥ç»å…ƒï¼Œå¹¶ä¸”å…¨è¿æ¥åˆ°ä¸‹ä¸€å±‚ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-eb971779e84208ec.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ä¿¡å·æ˜¯ä»è¾“å…¥åˆ°è¾“å‡ºå•å‘æµåŠ¨ï¼Œå› æ­¤è¿™ç§æ¶æ„è¢«ç§°ä¸º<strong>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFNNï¼‰</strong></p>
<p>å½“äººå·¥ç¥ç»ç½‘ç»œæœ‰å¤šä¸ªéšå«å±‚æ—¶ï¼Œç§°ä¸º<strong>æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰</strong></p>
<h3 id="åå‘ä¼ æ’­ï¼ˆBack-Propagationï¼‰"><a href="#åå‘ä¼ æ’­ï¼ˆBack-Propagationï¼‰" class="headerlink" title="åå‘ä¼ æ’­ï¼ˆBack Propagationï¼‰"></a>åå‘ä¼ æ’­ï¼ˆBack Propagationï¼‰</h3><p>ä¸€ç§è®­ç»ƒ MLP çš„æ–¹æ³•ï¼Œä½¿ç”¨äº†é«˜æ•ˆæ¢¯åº¦è®¡ç®—çš„æ¢¯åº¦ä¸‹é™ç®—æ³•åªéœ€è¦ä¸¤æ¬¡ç½‘ç»œä¼ æ’­ï¼ˆä¸€æ¬¡å‘å‰ï¼Œä¸€æ¬¡å‘åï¼‰ï¼Œå°±å¯ä»¥ç®—å‡ºç½‘ç»œè¯¯å·®çš„ã€å’Œæ¯ä¸ªç‹¬ç«‹æ¨¡å‹å‚æ•°ç›¸å…³çš„æ¢¯åº¦ã€‚</p>
<blockquote>
<ol>
<li>æ¯æ¬¡å¤„ç†ä¸€ä¸ªå¾®æ‰¹æ¬¡ï¼ˆå‡å¦‚æ¯ä¸ªæ‰¹æ¬¡åŒ…å«32ä¸ªå®ä¾‹ï¼‰ï¼Œç”¨è®­ç»ƒé›†å¤šæ¬¡è®­ç»ƒBPï¼Œæ¯æ¬¡è¢«ç§°ä¸ºä¸€ä¸ªå‘¨æœŸï¼ˆepochï¼‰ï¼›</li>
<li>æ¯ä¸ªå¾®æ‰¹æ¬¡å…ˆè¿›å…¥è¾“å…¥å±‚ï¼Œè¾“å…¥å±‚å†å°†å…¶å‘åˆ°ç¬¬ä¸€ä¸ªéšè—å±‚ã€‚è®¡ç®—å¾—åˆ°è¯¥å±‚æ‰€æœ‰ç¥ç»å…ƒçš„ï¼ˆå¾®æ‰¹æ¬¡çš„æ¯ä¸ªå®ä¾‹çš„ï¼‰è¾“å‡ºã€‚è¾“å‡ºæ¥ç€ä¼ åˆ°ä¸‹ä¸€å±‚ï¼Œç›´åˆ°å¾—åˆ°è¾“å‡ºå±‚çš„è¾“å‡ºã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>å‰å‘ä¼ æ’­</strong>ï¼šå°±åƒåšé¢„æµ‹ä¸€æ ·ï¼Œåªæ˜¯ä¿å­˜äº†æ¯ä¸ªä¸­é—´ç»“æœï¼Œä¸­é—´ç»“æœè¦ç”¨äºåå‘ä¼ æ’­ï¼›</li>
<li>ç„¶åè®¡ç®—è¾“å‡ºè¯¯å·®ï¼ˆä½¿ç”¨æŸå¤±å‡½æ•°æ¯”è¾ƒç›®æ ‡å€¼å’Œå®é™…è¾“å‡ºå€¼ï¼Œç„¶åè¿”å›è¯¯å·®ï¼‰ï¼›</li>
<li>é€šè¿‡<strong>é“¾å¼æ³•åˆ™</strong>ï¼ˆå¯¹å¤šä¸ªå˜é‡åšå¾®åˆ†ï¼‰è®¡ç®—æ¯ä¸ªè¾“å‡ºè¿æ¥å¯¹è¯¯å·®çš„è´¡çŒ®é‡ï¼›</li>
<li>ä½¿ç”¨<strong>é“¾å¼æ³•åˆ™</strong>ï¼Œè®¡ç®—æœ€åä¸€ä¸ªéšè—å±‚çš„æ¯ä¸ªè¿æ¥å¯¹è¯¯å·®çš„è´¡çŒ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸æ–­å‘åä¼ æ’­ï¼Œç›´åˆ°åˆ°è¾¾è¾“å…¥å±‚ã€‚</li>
<li>BPç®—æ³•åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ­¥éª¤ï¼Œç”¨åˆšåˆšè®¡ç®—çš„è¯¯å·®æ¢¯åº¦è°ƒæ•´æ‰€æœ‰è¿æ¥æƒé‡ã€‚</li>
</ol>
</blockquote>
<p>å¯¹æ¯ä¸ªè®­ç»ƒå®ä¾‹ï¼ŒBPç®—æ³•å…ˆåšä¸€æ¬¡é¢„æµ‹ï¼ˆå‰å‘ä¼ æ’­ï¼‰ï¼Œç„¶åè®¡ç®—è¯¯å·®ï¼Œç„¶ååå‘é€šè¿‡æ¯ä¸€å±‚ä»¥æµ‹é‡è¯¯å·®è´¡çŒ®é‡ï¼ˆåå‘ä¼ æ’­ï¼‰ï¼Œæœ€åè°ƒæ•´æ‰€æœ‰è¿æ¥æƒé‡ä»¥é™ä½è¯¯å·®ï¼ˆæ¢¯åº¦ä¸‹é™ï¼‰ã€‚ï¼ˆæ¯ä¸ªå¾ªç¯ï¼šå‘å‰ï¼Œå‘åï¼Œè°ƒæ•´å‚æ•°ï¼‰</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<blockquote>
<p><strong>è¦æœºåˆå§‹åŒ–éšè—å±‚çš„è¿æ¥æƒé‡</strong>ã€‚å‡å¦‚æ‰€æœ‰çš„æƒé‡å’Œåç½®éƒ½åˆå§‹åŒ–ä¸º0ï¼Œåˆ™åœ¨ç»™å®šä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒéƒ½æ˜¯ä¸€æ ·çš„ï¼ŒBPç®—æ³•å¯¹è¿™äº›ç¥ç»å…ƒçš„è°ƒæ•´ä¹Ÿä¼šæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯ï¼Œå°±ç®—æ¯å±‚æœ‰å‡ ç™¾ä¸ªç¥ç»å…ƒï¼Œæ¨¡å‹çš„æ•´ä½“è¡¨ç°å°±åƒæ¯å±‚åªæœ‰ä¸€ä¸ªç¥ç»å…ƒä¸€æ ·ï¼Œæ¨¡å‹ä¼šæ˜¾å¾—ç¬¨ç¬¨çš„ã€‚å¦‚æœæƒé‡æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œå°±å¯ä»¥æ‰“ç ´å¯¹ç§°æ€§ï¼Œè®­ç»ƒå‡ºä¸åŒçš„ç¥ç»å…ƒã€‚</p>
<p><strong>è‡ªåŠ¨è®¡ç®—æ¢¯åº¦è¢«ç§°ä¸ºè‡ªåŠ¨å¾®åˆ†ã€‚</strong>åå‘ä¼ æ’­ä½¿ç”¨çš„æ˜¯<strong>åå‘æ¨¡å¼è‡ªå¾®åˆ†</strong>ã€‚è¿™ç§æ–¹æ³•å¿«è€Œå‡†ï¼Œå½“å‡½æ•°æœ‰å¤šä¸ªå˜é‡ï¼ˆè¿æ¥æƒé‡ï¼‰å’Œå¤šä¸ªè¾“å‡ºï¼ˆæŸå¤±å‡½æ•°ï¼‰è¦å¾®åˆ†æ—¶ä¹Ÿèƒ½åº”å¯¹ã€‚</p>
</blockquote>
<h4 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h4><p>ç”¨å…¶ä»–æ¿€æ´»å‡½æ•°ä»£æ›¿é˜¶è·ƒå‡½æ•°ï¼ˆå› ä¸ºé˜¶è·ƒå‡½æ•°åªåŒ…å«å¹³å¦çš„æ®µï¼Œå› æ­¤æ²¡æœ‰æ¢¯åº¦ï¼Œè€Œ Logisticå‡½æ•°å¤„å¤„éƒ½æœ‰ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„éé›¶å¯¼æ•°ï¼Œå…è®¸æ¢¯åº¦ä¸‹é™åœ¨æ¯æ­¥ä¸Šå–å¾—ä¸€äº›è¿›å±•ã€‚ï¼‰</p>
<ul>
<li><p>sigmoidï¼ˆLogisticï¼‰å‡½æ•°ï¼šè¾“å‡ºèŒƒå›´0~1</p>
<p>$\sigma(z)=\frac{1}{1+\exp(-z)}$</p>
</li>
</ul>
<ul>
<li><p>åŒæ›²æ­£åˆ‡å‡½æ•°ï¼š Så½¢ï¼Œè¿ç»­å¯å¾®ï¼Œè¾“å‡ºèŒƒå›´-1~1</p>
<p>$\tanh (z) = 2Ïƒ(2z) â€“ 1$</p>
</li>
<li><p>ReLU å‡½æ•°ï¼šè¿ç»­ï¼Œä½†åœ¨<code>z=0</code>å¤„ä¸å¯å¾®ï¼Œæ²¡æœ‰æœ€å¤§è¾“å‡ºå€¼ï¼Œä½†æ•ˆæœå¥½ï¼Œè®¡ç®—å¿«é€Ÿ</p>
<p>$ReLU(z) = max(0, z)$</p>
</li>
<li><p>softpluså‡½æ•°ï¼šReLUå‡½æ•°çš„å¹³æ»‘å˜ä½“,zæ˜¯è´Ÿå€¼æ—¶ï¼Œsoftplusæ¥è¿‘0ï¼Œzæ˜¯æ­£å€¼æ—¶ï¼Œsoftplusæ¥è¿‘z</p>
<p>$softplus(z) = log(1 + exp(z))$</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cfc40648369f3b02.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>è®¾ç½®æ¿€æ´»å‡½æ•°çš„åŸå› </strong>ï¼š</p>
<p>å¦‚æœå°†å‡ ä¸ªçº¿æ€§å˜åŒ–é“¾å¼ç»„åˆèµ·æ¥ï¼Œå¾—åˆ°çš„è¿˜æ˜¯çº¿æ€§å˜æ¢ã€‚æ¯”å¦‚ï¼Œå¯¹äº <code>f(x) = 2x + 3</code> å’Œ <code>g(x) = 5x â€“ 1</code> ï¼Œä¸¤è€…ç»„åˆèµ·æ¥ä»æ˜¯çº¿æ€§å˜æ¢ï¼š<code>f(g(x)) = 2(5x â€“ 1) + 3 = 10x + 1</code>ã€‚<strong>å¦‚æœå±‚ä¹‹é—´ä¸å…·æœ‰éçº¿æ€§ï¼Œåˆ™æ·±å±‚ç½‘ç»œå’Œå•å±‚ç½‘ç»œå…¶å®æ˜¯ç­‰åŒçš„ï¼Œè¿™æ ·å°±ä¸èƒ½è§£å†³å¤æ‚é—®é¢˜ã€‚</strong>ç›¸åçš„ï¼Œè¶³å¤Ÿæ·±ä¸”æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„DNNï¼ˆæ·±åº¦ç¥ç»ç½‘ç»œï¼‰ï¼Œåœ¨ç†è®ºä¸Šå¯ä»¥è¿‘ä¼¼äºä»»æ„è¿ç»­å‡½æ•°ã€‚</p>
<h3 id="å›å½’MLP"><a href="#å›å½’MLP" class="headerlink" title="å›å½’MLP"></a>å›å½’MLP</h3><p>é¢„æµ‹ä¸€ä¸ªå•å€¼ï¼Œå°±åªéœ€è¦ä¸€ä¸ªè¾“å‡ºç¥ç»å…ƒï¼›ä¸€æ¬¡é¢„æµ‹å¤šä¸ªå€¼ï¼Œåˆ™æ¯ä¸€ç»´åº¦éƒ½è¦æœ‰ä¸€ä¸ªç¥ç»å…ƒã€‚</p>
<p>å›å½’é—®é¢˜å¯ä»¥ä¸ç”¨æ¿€æ´»å‡½æ•°ï¼Œå¦‚æœæƒ³é™åˆ¶è¾“å‡ºè½åˆ°ä¸€å®šèŒƒå›´å†…ï¼Œå¯ä»¥ä½¿ç”¨æ¿€æ´»å‡½æ•°ã€‚</p>
<p><strong>æŸå¤±å‡½æ•°</strong>ï¼šä¸€èˆ¬ä½¿ç”¨<strong>å‡æ–¹è¯¯å·®</strong>ï¼Œä½†å¦‚æœè®­ç»ƒé›†æœ‰è®¸å¤šå¼‚å¸¸å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<strong>å¹³å‡ç»å¯¹è¯¯å·®</strong>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>HuberæŸå¤±å‡½æ•°</strong>ï¼Œå®ƒæ˜¯å‰ä¸¤è€…çš„ç»„åˆã€‚</p>
<blockquote>
<p>æç¤ºï¼šå½“è¯¯å·®å°äºé˜ˆå€¼Î´æ—¶ï¼ˆä¸€èˆ¬ä¸º1ï¼‰ï¼ŒHuberæŸå¤±å‡½æ•°æ˜¯äºŒæ¬¡çš„ï¼›è¯¯å·®å¤§äºé˜ˆå€¼æ—¶ï¼ŒHuberæŸå¤±å‡½æ•°æ˜¯çº¿æ€§çš„ã€‚ç›¸æ¯”å‡æ–¹è¯¯å·®ï¼Œçº¿æ€§éƒ¨åˆ†å¯ä»¥è®©Huberå¯¹å¼‚å¸¸å€¼ä¸é‚£ä¹ˆæ•æ„Ÿï¼ŒäºŒæ¬¡éƒ¨åˆ†å¯ä»¥è®©æ”¶æ•›æ›´å¿«ï¼Œä¹Ÿæ¯”å‡ç»å¯¹è¯¯å·®æ›´ç²¾ç¡®ã€‚</p>
</blockquote>
<p><strong>å›å½’MLPçš„å…¸å‹æ¶æ„</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-51306abe073c8ea2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="åˆ†ç±»MLP"><a href="#åˆ†ç±»MLP" class="headerlink" title="åˆ†ç±»MLP"></a>åˆ†ç±»MLP</h3><p>äºŒå…ƒåˆ†ç±»é—®é¢˜ï¼šéœ€è¦ä¸€ä¸ªä½¿ç”¨Logisticæ¿€æ´»çš„è¾“å‡ºç¥ç»å…ƒï¼šè¾“å‡ºä¸€ä¸ª0å’Œ1ä¹‹é—´çš„å€¼ï¼Œä½œä¸ºæ­£ç±»çš„ä¼°è®¡æ¦‚ç‡ã€‚</p>
<p>å¤šæ ‡ç­¾äºŒå…ƒåˆ†ç±»é—®é¢˜ï¼šéœ€è¦ä¸ºæ¯ä¸ªæ­£ç±»é…ä¸€ä¸ªè¾“å‡ºç¥ç»å…ƒã€‚å¤šä¸ªè¾“å‡ºæ¦‚ç‡çš„å’Œä¸ä¸€å®šéè¦ç­‰äº1ã€‚</p>
<p>å¤šåˆ†ç±»ï¼šsoftmaxå‡½æ•°å¯ä»¥ä¿è¯ï¼Œæ¯ä¸ªä¼°è®¡æ¦‚ç‡ä½äº0å’Œ1ä¹‹é—´ï¼Œå¹¶ä¸”å„ä¸ªå€¼ç›¸åŠ ç­‰äº1ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-be616eb033cc7b19.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>æŸå¤±å‡½æ•°</strong>ï¼š é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰å•†æŸå¤±å‡½æ•°</p>
<p><strong>åˆ†ç±»MLPçš„å…¸å‹æ¶æ„</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9e017b74d26835cf.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç”¨Keraså®ç°MLP"><a href="#ç”¨Keraså®ç°MLP" class="headerlink" title="ç”¨Keraså®ç°MLP"></a>ç”¨Keraså®ç°MLP</h3><blockquote>
<p>Kerasæ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ é«˜çº§APIï¼Œå¯ä»¥ç”¨å®ƒè½»æ¾åœ°æ­å»ºã€è®­ç»ƒã€è¯„ä¼°å’Œè¿è¡Œå„ç§ç¥ç»ç½‘ç»œã€‚æ˜¯FranÃ§ois Cholletå¼€å‘çš„ï¼Œäº2015å¹´3æœˆå¼€æºã€‚ä¸ºäº†è¿›è¡Œç¥ç»ç½‘ç»œè®¡ç®—ï¼Œå¿…é¡»è¦æœ‰è®¡ç®—åç«¯çš„æ”¯æŒã€‚ç›®å‰å¯é€‰ä¸‰ä¸ªæµè¡Œåº“ï¼šTensorFlowã€CNTKå’ŒTheanoã€‚</p>
<p>TensorFlowæ†ç»‘äº†è‡ªèº«çš„Keraså®ç° â€”â€” tf.kerasï¼Œå®ƒåªæ”¯æŒTensorFlowä½œä¸ºåç«¯ï¼Œä½†æä¾›äº†æ›´å¤šä½¿ç”¨çš„åŠŸèƒ½ï¼šä¾‹å¦‚ï¼Œtf.kerasæ”¯æŒTensorFlowçš„Data APIï¼ŒåŠ è½½æ•°æ®æ›´è½»æ¾ï¼Œé¢„å¤„ç†æ•°æ®æ›´é«˜æ•ˆã€‚</p>
<p>æ’åœ¨Keraså’ŒTensorFlowä¹‹åæœ€æµè¡Œçš„æ·±åº¦å­¦ä¹ åº“ï¼Œæ˜¯Facebookçš„PyTorchã€‚</p>
</blockquote>
<p><strong>kerasä¸­<code>Sequential API</code>å¯ä»¥æ­å»ºåºåˆ—åŒ–çš„ç¥ç»ç½‘ç»œ</strong></p>
<p><strong>å¤æ‚æ¨¡å‹å¯ä»¥é€šè¿‡<code>Functional API</code>æ­å»º</strong></p>
<p>Wide &amp; Deepæ˜¯ä¸€ä¸ªéåºåˆ—åŒ–çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚ç”±Heng-Tze Chengåœ¨2016å¹´åœ¨æå‡ºã€‚è¿™ä¸ªæ¨¡å‹å¯ä»¥å°†å…¨éƒ¨æˆ–éƒ¨åˆ†è¾“å…¥ä¸è¾“å‡ºå±‚è¿èµ·æ¥ï¼Œæ—¢å¯ä»¥å­¦åˆ°æ·±å±‚æ¨¡å¼ï¼ˆä½¿ç”¨æ·±åº¦è·¯å¾„ï¼‰å’Œç®€å•è§„åˆ™ï¼ˆä½¿ç”¨çŸ­è·¯å¾„ï¼‰ã€‚ä½œä¸ºå¯¹æ¯”ï¼Œå¸¸è§„MLPä¼šå¼ºåˆ¶æ‰€æœ‰æ•°æ®æµç»æ‰€æœ‰å±‚ï¼Œå› æ­¤æ•°æ®ä¸­çš„ç®€å•æ¨¡å¼åœ¨å¤šæ¬¡å˜æ¢åä¼šè¢«æ‰­æ›²ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cc7f49f651ae6a8a.png?imageMogr2/auto-orient/strip|imageView2/2/w/951/format/webp" alt="img"></p>
<p><strong>ä½¿ç”¨Subclassing APIæ­å»ºåŠ¨æ€æ¨¡å‹</strong></p>
<p>Sequential APIå’ŒFunctional APIéƒ½æ˜¯å£°æ˜å¼çš„ï¼šåªæœ‰å£°æ˜åˆ›å»ºæ¯ä¸ªå±‚ä»¥åŠå±‚çš„è¿æ¥æ–¹å¼ï¼Œæ‰èƒ½ç»™æ¨¡å‹åŠ è½½æ•°æ®ä»¥è¿›è¡Œè®­ç»ƒå’Œæ¨æ–­ã€‚</p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šæ¨¡å‹å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä¿å­˜ã€å…‹éš†å’Œåˆ†äº«ï¼›æ¨¡å‹æ¶æ„å¾—ä»¥å±•ç¤ºï¼Œä¾¿äºåˆ†æï¼›æ¡†æ¶å¯ä»¥æ¨æ–­æ•°æ®å½¢çŠ¶å’Œç±»å‹ï¼Œä¾¿äºåŠæ—¶å‘ç°é”™è¯¯ï¼ˆåŠ è½½æ•°æ®ä¹‹å‰å°±èƒ½å‘ç°é”™è¯¯ï¼‰ã€‚è°ƒè¯•ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå› ä¸ºæ¨¡å‹æ˜¯å±‚çš„é™æ€å›¾ã€‚</p>
<p>ç¼ºç‚¹ï¼šæ¨¡å‹æ˜¯é™æ€çš„ã€‚ä¸é€‚åˆä¸€äº›æ¨¡å‹åŒ…å«å¾ªç¯ã€å¯å˜æ•°æ®å½¢çŠ¶ã€æ¡ä»¶åˆ†æ”¯ï¼Œå’Œå…¶å®ƒçš„åŠ¨æ€ç‰¹ç‚¹çš„æƒ…å†µã€‚</p>
</blockquote>
<p>å¯¹<code>Model</code>ç±»åˆ’åˆ†å­ç±»ï¼Œåœ¨æ„é€ å™¨ä¸­åˆ›å»ºéœ€è¦çš„å±‚ï¼Œè°ƒç”¨<code>call()</code>è¿›è¡Œè®¡ç®—ï¼Œã€‚</p>
<blockquote>
<p>ä¼˜ç‚¹æ˜¯ï¼š</p>
<ol>
<li>å°†å±‚çš„åˆ›å»ºå’Œå’Œä½¿ç”¨åˆ†å‰²äº†</li>
</ol>
<p>ä»£ä»·æ˜¯ï¼š</p>
<ol>
<li>æ¨¡å‹æ¶æ„éšè—åœ¨<code>call()</code>æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥Kerasä¸èƒ½å¯¹å…¶æ£€æŸ¥</li>
<li>ä¸èƒ½ä¿å­˜æˆ–å…‹éš†</li>
<li>å½“è°ƒç”¨<code>summary()</code>æ—¶ï¼Œå¾—åˆ°çš„åªæ˜¯å±‚çš„åˆ—è¡¨ï¼Œæ²¡æœ‰å±‚çš„è¿æ¥ä¿¡æ¯</li>
<li>Kerasä¸èƒ½æå‰æ£€æŸ¥æ•°æ®ç±»å‹å’Œå½¢çŠ¶ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“çŠ¯é”™ã€‚</li>
</ol>
</blockquote>
<h4 id="ä¿å­˜å’Œæ¢å¤æ¨¡å‹"><a href="#ä¿å­˜å’Œæ¢å¤æ¨¡å‹" class="headerlink" title="ä¿å­˜å’Œæ¢å¤æ¨¡å‹"></a>ä¿å­˜å’Œæ¢å¤æ¨¡å‹</h4><p>Kerasä½¿ç”¨HDF5æ ¼å¼ä¿å­˜æ¨¡å‹æ¶æ„ï¼ˆåŒ…æ‹¬æ¯å±‚çš„è¶…å‚æ•°ï¼‰å’Œæ¯å±‚çš„æ‰€æœ‰å‚æ•°å€¼ï¼ˆè¿æ¥æƒé‡å’Œåç½®é¡¹ï¼‰ã€‚è¿˜ä¿å­˜äº†ä¼˜åŒ–å™¨ï¼ˆåŒ…æ‹¬è¶…å‚æ•°å’ŒçŠ¶æ€ï¼‰ã€‚</p>
<p>åŠ è½½ï¼š<code>keras.models.load_model</code> </p>
<blockquote>
<p><strong>æ³¨æ„</strong> </p>
<p>è¿™ç§åŠ è½½æ¨¡å‹çš„æ–¹æ³•åªå¯¹Sequential APIæˆ–Functional APIæœ‰ç”¨ï¼Œä¸é€‚ç”¨äºSubclassing APIã€‚å¯¹äºåè€…ï¼Œå¯ä»¥ç”¨save_weights()å’Œload_weights()ä¿å­˜å‚æ•°ï¼Œå…¶å®ƒçš„å°±å¾—æ‰‹åŠ¨ä¿å­˜æ¢å¤äº†ã€‚</p>
</blockquote>
<h4 id="ä½¿ç”¨è°ƒå›"><a href="#ä½¿ç”¨è°ƒå›" class="headerlink" title="ä½¿ç”¨è°ƒå›"></a>ä½¿ç”¨è°ƒå›</h4><p>å¯¹äºå¤§æ•°æ®é›†ä¸Šï¼Œè®­ç»ƒæ—¶é—´é•¿çš„æƒ…å†µï¼Œä¸ä»…è¦åœ¨è®­ç»ƒç»“æŸæ—¶ä¿å­˜æ¨¡å‹æ£€æŸ¥ç‚¹ï¼Œåœ¨ä¸€å®šæ—¶é—´é—´éš”å†…ä¹Ÿè¦ä¿å­˜ï¼Œä»¥å…ç”µè„‘å®•æœºé€ æˆæŸå¤±ã€‚</p>
<p><code>fit()</code>æ–¹æ³•æ¥å—å‚æ•°<code>callbacks</code>ï¼Œå¯ä»¥è®©ç”¨æˆ·æŒ‡æ˜ä¸€ä¸ªKerasåˆ—è¡¨ï¼Œè®©Kerasåœ¨è®­ç»ƒå¼€å§‹å’Œç»“æŸã€æ¯ä¸ªå‘¨æœŸå¼€å§‹å’Œç»“æŸã€ç”šè‡³æ˜¯æ¯ä¸ªæ‰¹æ¬¡çš„å‰åè°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>ModelCheckpoint</code>å¯ä»¥åœ¨æ¯ä¸ªæ—¶é—´é—´éš”ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé»˜è®¤æ˜¯æ¯ä¸ªå‘¨æœŸç»“æŸä¹‹å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.compile(loss=<span class="string">"mse"</span>, optimizer=keras.optimizers.SGD(lr=<span class="number">1e-3</span>))</span><br><span class="line">checkpoint_cb = keras.callbacks.ModelCheckpoint(<span class="string">"my_keras_model.h5"</span>, save_best_only=<span class="literal">True</span>)</span><br><span class="line">history = model.fit(X_train, y_train, epochs=<span class="number">10</span>,</span><br><span class="line">                    validation_data=(X_valid, y_valid),</span><br><span class="line">                    callbacks=[checkpoint_cb])</span><br><span class="line">model = keras.models.load_model(<span class="string">"my_keras_model.h5"</span>) <span class="comment"># rollback to best model</span></span><br><span class="line">mse_test = model.evaluate(X_test, y_test)</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨TensorBoardè¿›è¡Œå¯è§†åŒ–"><a href="#ä½¿ç”¨TensorBoardè¿›è¡Œå¯è§†åŒ–" class="headerlink" title="ä½¿ç”¨TensorBoardè¿›è¡Œå¯è§†åŒ–"></a>ä½¿ç”¨TensorBoardè¿›è¡Œå¯è§†åŒ–</h3><p>è¦ä½¿ç”¨TensorBoardï¼Œå¿…é¡»ä¿®æ”¹ç¨‹åºï¼Œå°†è¦å¯è§†åŒ–çš„æ•°æ®è¾“å‡ºä¸ºäºŒè¿›åˆ¶çš„æ—¥å¿—æ–‡ä»¶event filesã€‚æ¯ä»½äºŒè¿›åˆ¶æ•°æ®ç§°ä¸ºæ‘˜è¦summaryï¼ŒTensorBoardæœåŠ¡å™¨ä¼šç›‘æµ‹æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼Œè‡ªåŠ¨åŠ è½½æ›´æ–°å¹¶å¯è§†åŒ–ï¼šè¿™æ ·å°±èƒ½çœ‹åˆ°å®æ—¶æ•°æ®ï¼ˆç¨æœ‰å»¶è¿Ÿï¼‰ï¼Œæ¯”å¦‚è®­ç»ƒæ—¶çš„å­¦ä¹ æ›²çº¿ã€‚é€šå¸¸ï¼Œå°†TensorBoardæœåŠ¡å™¨æŒ‡å‘æ ¹æ—¥å¿—ç›®å½•ï¼Œç¨‹åºçš„æ—¥å¿—å†™å…¥åˆ°å®ƒçš„å­ç›®å½•ï¼Œè¿™æ ·ä¸€ä¸ªTensorBoardæœåŠ¡å°±èƒ½å¯è§†åŒ–å¹¶æ¯”è¾ƒå¤šæ¬¡è¿è¡Œçš„æ•°æ®ï¼Œè€Œä¸ä¼šå°†å…¶ææ··ã€‚</p>
<h3 id="ç¥ç»ç½‘ç»œå‚æ•°å¾®è°ƒ"><a href="#ç¥ç»ç½‘ç»œå‚æ•°å¾®è°ƒ" class="headerlink" title="ç¥ç»ç½‘ç»œå‚æ•°å¾®è°ƒ"></a>ç¥ç»ç½‘ç»œå‚æ•°å¾®è°ƒ</h3><h4 id="å¾®è°ƒç¥ç»ç½‘ç»œçš„è¶…å‚æ•°"><a href="#å¾®è°ƒç¥ç»ç½‘ç»œçš„è¶…å‚æ•°" class="headerlink" title="å¾®è°ƒç¥ç»ç½‘ç»œçš„è¶…å‚æ•°"></a>å¾®è°ƒç¥ç»ç½‘ç»œçš„è¶…å‚æ•°</h4><ol>
<li>ç›´æ¥è¯•éªŒè¶…å‚æ•°çš„ç»„åˆï¼Œçœ‹å“ªä¸€ä¸ªåœ¨éªŒè¯é›†ï¼ˆæˆ–ä½¿ç”¨KæŠ˜äº¤å‰éªŒè¯ï¼‰çš„è¡¨ç°æœ€å¥½ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨<code>GridSearchCV</code>æˆ–<code>RandomizedSearchCV</code>æ¢ç´¢è¶…å‚æ•°ç©ºé—´</p>
<blockquote>
<p>å¿…é¡»å°†Kerasæ¨¡å‹åŒ…è£…è¿›æ¨¡ä»¿Scikit-Learnå›å½’å™¨çš„å¯¹è±¡ä¸­ã€‚ç¬¬ä¸€æ­¥æ˜¯ç»™å®šä¸€ç»„è¶…å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªæ­å»ºå’Œç¼–è¯‘Kerasæ¨¡å‹çš„å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">keras_reg = keras.wrappers.scikit_learn.KerasRegressor(build_model)</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºè¶…å‚æ•°å¤ªå¤šï¼Œæœ€å¥½ä½¿ç”¨éšæœºæœç´¢è€Œä¸æ˜¯ç½‘æ ¼æœç´¢</p>
</blockquote>
<ol>
<li><p>å…¶ä»–æ¢ç´¢è¶…å‚æ•°ç©ºé—´çš„æ–¹æ³•ï¼š</p>
<p>æ ¸å¿ƒæ€æƒ³ï¼šå½“æŸå—ç©ºé—´çš„åŒºåŸŸè¡¨ç°å¥½æ—¶ï¼Œå°±å¤šæ¢ç´¢è¿™å—åŒºåŸŸã€‚è¿™äº›æ–¹æ³•å¯ä»¥ä»£æ›¿ç”¨æˆ·åšâ€œæ”¾å¤§â€å·¥ä½œï¼Œå¯ä»¥åœ¨æ›´çŸ­çš„æ—¶é—´å¾—åˆ°æ›´å¥½çš„ç»“æœã€‚</p>
</li>
</ol>
<blockquote>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fhyperopt%2Fhyperopt" target="_blank" rel="noopener">Hyperopt</a><br>ä¸€ä¸ªå¯ä»¥ä¼˜åŒ–å„ç§å¤æ‚æœç´¢ç©ºé—´ï¼ˆåŒ…æ‹¬çœŸå®å€¼ï¼Œæ¯”å¦‚å­¦ä¹ ç‡å’Œç¦»æ•£å€¼ï¼Œæ¯”å¦‚å±‚æ•°ï¼‰çš„åº“ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fmaxpumperla%2Fhyperas" target="_blank" rel="noopener">Hyperas</a>ï¼Œ<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2FAvsecz%2Fkopt" target="_blank" rel="noopener">kopt</a> æˆ– <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fautonomio%2Ftalos" target="_blank" rel="noopener">Talos</a><br>ç”¨æ¥ä¼˜åŒ–Kerasæ¨¡å‹è¶…å‚æ•°çš„åº“ï¼ˆå‰ä¸¤ä¸ªæ˜¯åŸºäºHyperoptçš„ï¼‰ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fkerastuner" target="_blank" rel="noopener">Keras Tuner</a><br>Googleå¼€å‘çš„ç®€å•æ˜“ç”¨çš„Kerasè¶…å‚æ•°ä¼˜åŒ–åº“ï¼Œè¿˜æœ‰å¯è§†åŒ–å’Œåˆ†æåŠŸèƒ½ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fscikit-optimize.github.io%2F" target="_blank" rel="noopener">Scikit-Optimize (<code>skopt</code>)</a><br>ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–åº“ã€‚ç±»<code>BayesSearchCV</code>ä½¿ç”¨ç±»ä¼¼äº<code>GridSearchCV</code>çš„æ¥å£åšè´å¶æ–¯ä¼˜åŒ–ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2FJasperSnoek%2Fspearmint" target="_blank" rel="noopener">Spearmint</a><br>ä¸€ä¸ªè´å¶æ–¯ä¼˜åŒ–åº“ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fzygmuntz%2Fhyperband" target="_blank" rel="noopener">Hyperband</a><br>ä¸€ä¸ªå¿«é€Ÿè¶…å‚æ•°è°ƒèŠ‚åº“ï¼ŒåŸºäºLisha Liçš„è®ºæ–‡ ã€ŠHyperband: A Novel Bandit-Based Approach to Hyperparameter Optimizationã€‹ï¼Œ<a href="https://links.jianshu.com/go?to=https%3A%2F%2Farxiv.org%2Fabs%2F1603.06560" target="_blank" rel="noopener">https://arxiv.org/abs/1603.06560</a>ã€‚</p>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Frsteca%2Fsklearn-deap" target="_blank" rel="noopener">Sklearn-Deap</a><br>ä¸€ä¸ªåŸºäºè¿›åŒ–ç®—æ³•çš„è¶…å‚æ•°ä¼˜åŒ–åº“ï¼Œæ¥å£ç±»ä¼¼<code>GridSearchCV</code>ã€‚</p>
</blockquote>
<p>Googleçš„AutoMLå¥—é—´å·²ç»å¯ä»¥åœ¨äº‘æœåŠ¡ä¸Šä½¿ç”¨äº†</p>
<p>ç”¨è¿›åŒ–ç®—æ³•è®­ç»ƒç‹¬ç«‹çš„ç¥ç»ç½‘ç»œå¾ˆæˆåŠŸï¼Œå·²ç»å–ä»£æ¢¯åº¦ä¸‹é™äº†ã€‚</p>
<h4 id="éšè—å±‚"><a href="#éšè—å±‚" class="headerlink" title="éšè—å±‚"></a>éšè—å±‚</h4><p>å¯¹äºè®¸å¤šé—®é¢˜ï¼Œå¼€å§‹æ—¶åªç”¨ä¸€ä¸ªéšè—å±‚å°±èƒ½å¾—åˆ°ä¸é”™çš„ç»“æœã€‚åªè¦æœ‰è¶³å¤Ÿå¤šçš„ç¥ç»å…ƒï¼Œåªæœ‰ä¸€ä¸ªéšè—å±‚çš„MLPå°±å¯ä»¥å¯¹å¤æ‚å‡½æ•°å»ºæ¨¡ã€‚ä½†æ˜¯å¯¹äºå¤æ‚é—®é¢˜ï¼Œæ·±å±‚ç½‘ç»œæ¯”æµ…å±‚ç½‘ç»œæœ‰æ›´é«˜çš„å‚æ•°æ•ˆç‡ï¼šæ·±å±‚ç½‘ç»œå¯ä»¥ç”¨æŒ‡æ•°çº§åˆ«æ›´å°‘çš„ç¥ç»å…ƒå¯¹å¤æ‚å‡½æ•°å»ºæ¨¡ï¼Œå› æ­¤å¯¹äºåŒæ ·çš„è®­ç»ƒæ•°æ®é‡æ€§èƒ½æ›´å¥½ã€‚</p>
<p>çœŸå®ä¸–ç•Œçš„æ•°æ®é€šå¸¸éƒ½æ˜¯æœ‰å±‚æ¬¡åŒ–ç»“æ„çš„ï¼Œæ·±å±‚ç¥ç»ç½‘ç»œæ­£å¼åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼šæµ…éšè—å±‚å¯¹ä½çº§ç»“æ„ï¼ˆæ¯”å¦‚å„ç§å½¢çŠ¶çš„çº¿æ®µå’Œæ–¹å‘ï¼‰ï¼Œä¸­éšè—å±‚ç»“åˆè¿™äº›ä½çº§ç»“æ„å¯¹ä¸­çº§ç»“æ„ï¼ˆæ–¹ï¼Œåœ†ï¼‰å»ºæ¨¡ï¼Œæ·±éšè—å±‚å’Œè¾“å‡ºå±‚ç»“åˆä¸­çº§ç»“æ„å¯¹é«˜çº§ç»“æ„ï¼ˆæ¯”å¦‚ï¼Œè„¸ï¼‰å»ºæ¨¡ã€‚</p>
<p><strong>è¿ç§»å­¦ä¹ </strong>ï¼šå±‚çº§åŒ–çš„ç»“æ„ä¸ä»…å¸®åŠ©æ·±åº¦ç¥ç»ç½‘ç»œæ”¶æ•›æ›´å¿«ï¼Œä¹Ÿæé«˜äº†å¯¹æ–°æ•°æ®é›†çš„æ³›åŒ–èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªå›¾ç‰‡äººè„¸è¯†åˆ«çš„æ¨¡å‹ï¼Œç°åœ¨æƒ³è®­ç»ƒä¸€ä¸ªè¯†åˆ«å‘å‹çš„ç¥ç»ç½‘ç»œï¼Œå¯ä»¥å¤ç”¨ç¬¬ä¸€ä¸ªç½‘ç»œçš„æµ…å±‚ã€‚ç½‘ç»œä¸ç”¨ä»å¤šæ•°å›¾ç‰‡çš„ä½çº§ç»“æ„å¼€å§‹å­¦èµ·ï¼›åªè¦å­¦é«˜çº§ç»“æ„ï¼ˆå‘å‹ï¼‰å°±è¡Œäº†ã€‚</p>
<h4 id="æ¯ä¸ªéšè—å±‚çš„ç¥ç»å…ƒæ•°"><a href="#æ¯ä¸ªéšè—å±‚çš„ç¥ç»å…ƒæ•°" class="headerlink" title="æ¯ä¸ªéšè—å±‚çš„ç¥ç»å…ƒæ•°"></a>æ¯ä¸ªéšè—å±‚çš„ç¥ç»å…ƒæ•°</h4><p>è¾“å…¥å±‚å’Œè¾“å‡ºå±‚çš„ç¥ç»å…ƒæ•°æ˜¯ç”±ä»»åŠ¡ç¡®å®šçš„è¾“å…¥å’Œè¾“å‡ºç±»å‹å†³å®šçš„ã€‚</p>
<p>å¯¹äºéšè—å±‚ï¼Œæƒ¯ç”¨çš„æ–¹æ³•æ˜¯æ¨¡æ‹Ÿé‡‘å­—å¡”çš„å½¢çŠ¶ï¼Œç¥ç»å…ƒæ•°é€å±‚é€’å‡ â€”â€” åº•å±‚æ€æƒ³æ˜¯ï¼Œè®¸å¤šä½çº§ç‰¹å¾å¯ä»¥èšåˆæˆå°‘å¾—å¤šçš„é«˜çº§ç‰¹å¾ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å·²ç»è¢«æŠ›å¼ƒäº†ï¼Œå› ä¸ºæ‰€æœ‰éšè—å±‚ä½¿ç”¨åŒæ ·å¤šçš„ç¥ç»å…ƒä¸ä»…è¡¨ç°æ›´å¥½ï¼Œè¦è°ƒèŠ‚çš„è¶…å‚æ•°ä¹Ÿåªå˜æˆäº†ä¸€ä¸ªï¼Œè€Œä¸æ˜¯æ¯å±‚éƒ½æœ‰ä¸€ä¸ªã€‚</p>
<p>å’Œå±‚æ•°ç›¸åŒï¼Œå¯ä»¥é€æ­¥æé«˜ç¥ç»å…ƒçš„æ•°é‡ï¼Œç›´åˆ°å‘ç”Ÿè¿‡æ‹Ÿåˆä¸ºæ­¢ã€‚<strong>å®é™…ä¸­ï¼Œé€šå¸¸çš„ç®€ä¾¿è€Œé«˜æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨å±‚æ•°å’Œç¥ç»å…ƒæ•°éƒ½è¶…é‡çš„æ¨¡å‹ï¼Œç„¶åä½¿ç”¨æ—©åœå’Œå…¶å®ƒæ­£åˆ™æŠ€æœ¯é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œç§°è¿™ç§æ–¹æ³•ä¸ºâ€œå¼¹åŠ›è£¤â€</strong>ï¼šä¸æµªè´¹æ—¶é—´é€‰æ‹©å°ºå¯¸å®Œç¾åŒ¹é…çš„è£¤å­ï¼Œè€Œæ˜¯é€‰æ‹©ä¸€æ¡å¤§çš„å¼¹åŠ›è£¤ï¼Œå®ƒèƒ½è‡ªåŠ¨æ”¶ç¼©åˆ°åˆé€‚çš„å°ºå¯¸ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥é¿å…å½±å“æ¨¡å‹çš„ç“¶é¢ˆå±‚ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæŸå±‚çš„ç¥ç»å…ƒå¤ªå°‘ï¼Œå°±æ²¡æœ‰è¶³å¤Ÿå¼ºçš„è¡¨å¾èƒ½åŠ›ï¼Œä¿å­˜æ‰€æœ‰çš„è¾“å…¥ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼Œåªæœ‰ä¸¤ä¸ªç¥ç»å…ƒçš„çš„å±‚åªèƒ½è¾“å‡º2Dæ•°æ®ï¼Œå¦‚æœç”¨å®ƒå¤„ç†3Dæ•°æ®ï¼Œå°±ä¼šä¸¢å¤±ä¿¡æ¯ï¼‰ã€‚æ— è®ºæ¨¡å‹ç½‘ç»œçš„å…¶å®ƒéƒ¨åˆ†å¦‚ä½•å¼ºå¤§ï¼Œä¸¢å¤±çš„ä¿¡æ¯ä¹Ÿæ‰¾ä¸å›æ¥äº†ã€‚</p>
<blockquote>
<p>é€šå¸¸ï¼Œå¢åŠ å±‚æ•°æ¯”å¢åŠ æ¯å±‚çš„ç¥ç»å…ƒçš„æ”¶ç›Šæ›´é«˜ã€‚</p>
</blockquote>
<h4 id="å­¦ä¹ ç‡ï¼Œæ‰¹æ¬¡å¤§å°å’Œå…¶å®ƒè¶…å‚æ•°"><a href="#å­¦ä¹ ç‡ï¼Œæ‰¹æ¬¡å¤§å°å’Œå…¶å®ƒè¶…å‚æ•°" class="headerlink" title="å­¦ä¹ ç‡ï¼Œæ‰¹æ¬¡å¤§å°å’Œå…¶å®ƒè¶…å‚æ•°"></a>å­¦ä¹ ç‡ï¼Œæ‰¹æ¬¡å¤§å°å’Œå…¶å®ƒè¶…å‚æ•°</h4><p><strong>å­¦ä¹ ç‡</strong>ï¼š</p>
<blockquote>
<p>é€šå¸¸æœ€ä½³å­¦ä¹ ç‡æ˜¯æœ€å¤§å­¦ä¹ ç‡çš„ä¸€èˆ¬å·¦å³ï¼ˆæœ€å¤§å­¦ä¹ ç‡æ˜¯æŒ‡è¶…è¿‡ä¸€å®šå€¼ï¼Œè®­ç»ƒç®—æ³•å‘ç”Ÿåˆ†å‰çš„å­¦ä¹ ç‡ï¼‰ã€‚æ‰¾åˆ°æœ€ä½³å­¦ä¹ ç‡çš„æ–¹å¼ä¹‹ä¸€æ˜¯ä»ä¸€ä¸ªæå°å€¼å¼€å§‹ï¼ˆæ¯”å¦‚10-5ï¼‰è®­ç»ƒæ¨¡å‹å‡ ç™¾æ¬¡ï¼Œç›´åˆ°å­¦ä¹ ç‡è¾¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å€¼ï¼ˆæ¯”å¦‚10ï¼‰ã€‚é€šè¿‡æ¯æ¬¡è¿­ä»£ï¼Œå°†å­¦ä¹ ç‡ä¹˜ä»¥ä¸€ä¸ªå¸¸æ•°ï¼ˆä¾‹å¦‚ exp(log(106)/500ï¼Œé€šè¿‡500æ¬¡è¿­ä»£ï¼Œä»10-5åˆ°10 ï¼‰ã€‚å°†æŸå¤±ä½œä¸ºå­¦ä¹ ç‡çš„å‡½æ•°ç”»å‡ºæ¥ï¼ˆå­¦ä¹ ç‡ä½¿ç”¨logï¼‰ï¼Œå¯ä»¥çœ‹åˆ°æŸå¤±ä¸€å¼€å§‹æ˜¯ä¸‹é™çš„ã€‚ä¸€æ®µæ—¶é—´åï¼Œå­¦ä¹ ç‡ä¼šå˜å¾—éå¸¸é«˜ï¼ŒæŸå¤±ä¹Ÿä¼šå‡é«˜ã€‚æœ€ä½³å­¦ä¹ ç‡è¦æ¯”æŸå¤±å¼€å§‹å‡é«˜çš„ç‚¹ä½ä¸€ç‚¹ï¼ˆé€šå¸¸æ¯”æ‹ç‚¹ä½10å€ï¼‰ã€‚ç„¶åå°±å¯ä»¥é‡æ–°åˆå§‹åŒ–æ¨¡å‹ï¼Œç”¨è¿™ä¸ªå­¦ä¹ ç‡å¼€å§‹è®­ç»ƒäº†</p>
</blockquote>
<p><strong>ä¼˜åŒ–å™¨ï¼š</strong></p>
<blockquote>
<p>é€‰æ‹©ä¸€ä¸ªæ›´å¥½çš„ä¼˜åŒ–å™¨ï¼ˆå¹¶è°ƒèŠ‚è¶…å‚æ•°ï¼‰è€Œä¸æ˜¯ä¼ ç»Ÿçš„å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨</p>
</blockquote>
<p><strong>æ‰¹æ¬¡å¤§å°ï¼š</strong></p>
<blockquote>
<p>æ‰¹æ¬¡å¤§å°å¯¹æ¨¡å‹çš„è¡¨ç°å’Œè®­ç»ƒæ—¶é—´éå¸¸é‡è¦ã€‚ä½¿ç”¨å¤§æ‰¹æ¬¡çš„å¥½å¤„æ˜¯ç¡¬ä»¶ï¼ˆæ¯”å¦‚GPUï¼‰å¯ä»¥å¿«é€Ÿå¤„ç†ï¼Œæ¯ç§’å¯ä»¥å¤„ç†æ›´å¤šå®ä¾‹ã€‚å› æ­¤ï¼Œè®¸å¤šäººå»ºè®®æ‰¹æ¬¡å¤§å°å¼€åˆ°GPUå†…å­˜çš„æœ€å¤§å€¼ã€‚</p>
<p>ç¼ºç‚¹ï¼šåœ¨å®é™…ä¸­ï¼Œå¤§æ‰¹æ¬¡ä¼šå¯¼è‡´è®­ç»ƒä¸ç¨³å®šï¼Œç‰¹åˆ«æ˜¯åœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼Œå¹¶ä¸”ä¸å¦‚å°æ‰¹æ¬¡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å¥½ã€‚</p>
</blockquote>
<p>ä¸€ç§ç­–ç•¥æ˜¯é€šè¿‡å­¦ä¹ ç‡çƒ­èº«ä½¿ç”¨å¤§æ‰¹æ¬¡ï¼Œå¦‚æœè®­ç»ƒä¸ç¨³å®šæˆ–æ•ˆæœä¸å¥½ï¼Œå°±æ¢æˆå°æ‰¹æ¬¡ã€‚</p>
<p><strong>æ¿€æ´»å‡½æ•°ï¼š</strong></p>
<blockquote>
<p>é€šå¸¸æ¥è®²ï¼ŒReLUé€‚ç”¨äºæ‰€æœ‰éšè—å±‚ã€‚å¯¹äºè¾“å‡ºå±‚ï¼Œå–å†³äºä»»åŠ¡ã€‚</p>
</blockquote>
<p><strong>è¿­ä»£æ¬¡æ•°ï¼š</strong></p>
<blockquote>
<p>å¯¹äºå¤§å¤šæ•°æƒ…å†µï¼Œä¸ç”¨è°ƒèŠ‚è®­ç»ƒçš„è¿­ä»£æ¬¡æ•°ï¼šç›´æ¥ä½¿ç”¨æ—©åœã€‚</p>
</blockquote>
<h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fplayground.tensorflow.org%2F" target="_blank" rel="noopener">TensorFlow Playground</a>æ˜¯TensorFlowå›¢é˜Ÿæ¨å‡ºçš„ä¸€ä¸ªä¾¿åˆ©çš„ç¥ç»ç½‘ç»œæ¨¡æ‹Ÿå™¨ã€‚åªéœ€ç‚¹å‡»å‡ ä¸‹ï¼Œå°±èƒ½è®­ç»ƒå‡ºäºŒå…ƒåˆ†ç±»å™¨ï¼Œé€šè¿‡è°ƒæ•´æ¶æ„å’Œè¶…å‚æ•°ï¼Œå¯ä»¥ä»ç›´è§‚ä¸Šç†è§£ç¥ç»ç½‘ç»œæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠè¶…å‚æ•°çš„ä½œç”¨ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>a. ç¥ç»ç½‘ç»œå­¦åˆ°çš„æ¨¡å¼ã€‚ç‚¹å‡»å·¦ä¸Šçš„è¿è¡ŒæŒ‰é’®ï¼Œè®­ç»ƒé»˜è®¤çš„ç¥ç»ç½‘ç»œã€‚æ³¨æ„æ˜¯å¦‚ä½•æ‰¾åˆ°åˆ†ç±»ä»»åŠ¡çš„æœ€ä¼˜è§£çš„ã€‚ç¬¬ä¸€ä¸ªéšè—å±‚å­¦åˆ°äº†ç®€å•æ¨¡å¼ï¼Œç¬¬äºŒä¸ªéšè—å±‚å°†ç®€å•æ¨¡å¼ç»“åˆä¸ºæ›´å¤æ‚çš„æ¨¡å¼ã€‚é€šå¸¸ï¼Œå±‚æ•°è¶Šå¤šï¼Œå¾—åˆ°çš„æ¨¡å¼è¶Šå¤æ‚ã€‚</p>
<p>b. æ¿€æ´»å‡½æ•°ã€‚ç”¨ReLUæ¿€æ´»å‡½æ•°ä»£æ›¿tanhï¼Œå†è®­ç»ƒä¸€æ¬¡ç½‘ç»œã€‚æ³¨æ„ï¼Œæ‰¾åˆ°è§£å˜å¾—æ›´å¿«äº†ï¼Œä¸”æ˜¯çº¿æ€§çš„ï¼Œè¿™å½’åŠŸäºReLUå‡½æ•°çš„å½¢çŠ¶ã€‚</p>
<p>c. å±€éƒ¨æœ€å°å€¼çš„é£é™©ã€‚å°†ç½‘ç»œåªè®¾å®šä¸ºåªæœ‰ä¸€ä¸ªéšè—å±‚ï¼Œä¸”åªæœ‰3ä¸ªç¥ç»å…ƒã€‚è¿›è¡Œå¤šæ¬¡è®­ç»ƒï¼ˆé‡ç½®ç½‘ç»œæƒé‡ï¼Œç‚¹å‡»ResetæŒ‰é’®ï¼‰ã€‚å¯ä»¥çœ‹åˆ°è®­ç»ƒæ—¶é—´å˜åŒ–å¾ˆå¤§ï¼Œç”šè‡³æœ‰æ—¶å¡åœ¨äº†å±€éƒ¨æœ€å°å€¼ã€‚</p>
<p>d. ç¥ç»ç½‘ç»œå¤ªå°çš„çŠ¶å†µã€‚å»é™¤ä¸€ä¸ªç¥ç»å…ƒï¼Œåªå‰©ä¸‹ä¸¤ä¸ªã€‚å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿å°è¯•å¤šæ¬¡ï¼Œç¥ç»ç½‘ç»œç°ä¹Ÿä¸èƒ½æ‰¾åˆ°æœ€ä¼˜è§£ã€‚æ¨¡å‹çš„å‚æ•°å¤ªå°‘ï¼Œå¯¹è®­ç»ƒé›†æ•°æ®æ¬ æ‹Ÿåˆã€‚</p>
<p>e. ç¥ç»ç½‘ç»œè¶³å¤Ÿå¤§çš„çŠ¶å†µã€‚å°†ç¥ç»å…ƒæ•°è®¾ä¸º8ï¼Œå†å¤šæ¬¡è®­ç»ƒç¥ç»ç½‘ç»œã€‚å¯ä»¥çœ‹åˆ°è¿‡ç¨‹å¾ˆå¿«ä¸”ä¸ä¼šå¡ä½ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å‘ç°ï¼šå¤§ç¥ç»ç½‘ç»œå‡ ä¹ä»ä¸ä¼šå¡åœ¨å±€éƒ¨æœ€å°å€¼ï¼Œå³ä½¿å¡ä½äº†ï¼Œå±€éƒ¨æœ€å°å€¼é€šå¸¸ä¹Ÿæ˜¯å…¨å±€æœ€å°å€¼ã€‚ä½†æ˜¯ä»ç„¶å¯èƒ½åœ¨å¹³å°æœŸå¡ä½ç›¸å½“é•¿æ—¶é—´ã€‚</p>
<p>f. æ¢¯åº¦æ¶ˆå¤±çš„é£é™©ã€‚é€‰æ‹©spiralæ•°æ®é›†ï¼ˆå³ä¸‹è§’ä½äºDATAä¸‹é¢çš„æ•°æ®é›†ï¼‰ï¼Œæ¨¡å‹æ¶æ„å˜ä¸ºå››ä¸ªéšè—å±‚ï¼Œæ¯å±‚å…«ä¸ªç¥ç»å…ƒã€‚å¯ä»¥çœ‹åˆ°ï¼Œè®­ç»ƒè€—æ—¶å˜é•¿ï¼Œä¸”ç»å¸¸åœ¨å¹³å°æœŸå¡ä½å¾ˆé•¿æ—¶é—´ã€‚å¦å¤–ï¼Œæœ€é«˜å±‚ï¼ˆå³è¾¹ï¼‰çš„ç¥ç»å…ƒæ¯”æœ€åº•å±‚å˜å¾—å¿«ã€‚è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºâ€œæ¢¯åº¦æ¶ˆå¤±â€ï¼Œå¯ä»¥é€šè¿‡æ›´ä¼˜çš„æƒé‡åˆå§‹åŒ–ã€æ›´å¥½çš„ä¼˜åŒ–å™¨ï¼ˆæ¯”å¦‚AdaGradæˆ–Adamï¼‰ã€æˆ–æ‰¹æ¬¡æ­£æ€åŒ–ï¼ˆè§ç¬¬11ç« ï¼‰è§£å†³ã€‚</p>
<p>g. å†å°è¯•å°è¯•å…¶å®ƒå‚æ•°ã€‚</p>
</li>
<li><p>ç”¨åŸå§‹ç¥ç»å…ƒï¼ˆåƒå›¾10-3ä¸­çš„ç¥ç»å…ƒï¼‰ç”»ANNï¼Œå¯ä»¥è®¡ç®— A âŠ• B ï¼ˆ âŠ• è¡¨ç¤º XORæ“ä½œï¼‰ã€‚æç¤ºï¼šA âŠ• B = (A âˆ§ Â¬ B) âˆ¨ (Â¬ A âˆ§ B)æˆ–è€…<em>A</em> âŠ• <em>B</em> = (<em>A</em> âˆ¨ <em>B</em>) âˆ§ (Â¬ <em>A</em> âˆ¨ Â¬ <em>B</em>)</p>
<blockquote>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_aain01.png" alt="mls2 aain01"></p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆé€»è¾‘å›å½’æ¯”ç»å…¸æ„ŸçŸ¥æœºï¼ˆå³ä½¿ç”¨æ„ŸçŸ¥æœºè®­ç»ƒç®—æ³•è®­ç»ƒçš„å•å±‚çš„é˜ˆå€¼é€»è¾‘å•å…ƒï¼‰æ›´å¥½ï¼Ÿå¦‚ä½•è°ƒèŠ‚æ„ŸçŸ¥æœºï¼Œä½¿å…¶ç­‰åŒäºé€»è¾‘å›å½’åˆ†ç±»å™¨ï¼Ÿ</p>
<blockquote>
<p>é€»è¾‘å›å½’å¯ä»¥æ”¶æ•›è€Œä¸è¦æ±‚æ•°æ®é›†çº¿æ€§å¯åˆ†ï¼Œå¹¶ä¸”ç»™å‡ºå®ä¾‹å¤„äºä¸åŒç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
<p>ä½†ç»å…¸æ„ŸçŸ¥æœºåªæœ‰å½“æ•°æ®é›†æ˜¯çº¿æ€§å¯åˆ†æ—¶æ‰èƒ½æ”¶æ•›ï¼Œå¹¶ä¸”ä¸èƒ½ç»™å‡ºæ¦‚ç‡ã€‚</p>
<p>ä½¿ç”¨é€»è¾‘æ–¯è’‚å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼ˆå¦‚æœæœ‰å¤šä¸ªç±»åˆ«ï¼Œå¯ä»¥ç”¨softmaxå‡½æ•°ï¼‰ï¼Œå¹¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•è®­ç»ƒæ¨¡å‹ï¼Œå…¶ç»“æœç­‰åŒäºé€»è¾‘å›å½’åˆ†ç±»å™¨ã€‚</p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆé€»è¾‘æ¿€æ´»å‡½æ•°å¯¹è®­ç»ƒMLPçš„å‰å‡ å±‚å¾ˆé‡è¦ï¼Ÿ</p>
<blockquote>
<p>å› ä¸ºé€»è¾‘æ¿€æ´»å‡½æ•°å¤„å¤„å¯å¾®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™</p>
</blockquote>
</li>
<li><p>è¯´å‡ºä¸‰ç§æµè¡Œçš„æ¿€æ´»å‡½æ•°ï¼Œå¹¶ç”»å‡ºæ¥ã€‚</p>
<blockquote>
<p>sigmoid ReLU:  tanh:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cfc40648369f3b02.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
</blockquote>
</li>
<li><p>å‡è®¾ä¸€ä¸ªMLPçš„è¾“å…¥å±‚æœ‰10ä¸ªç¥ç»å…ƒï¼Œæ¥ä¸‹æ¥æ˜¯æœ‰50ä¸ªäººå·¥ç¥ç»å…ƒçš„çš„éšè—å±‚ï¼Œæœ€åæ˜¯ä¸€ä¸ªæœ‰3ä¸ªäººå·¥ç¥ç»å…ƒçš„è¾“å‡ºå±‚ã€‚æ‰€æœ‰çš„ç¥ç»å…ƒä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°ã€‚å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>è¾“å…¥çŸ©é˜µXçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<blockquote>
<p>m x 10ï¼Œ mæ˜¯è®­ç»ƒæ‰¹æ¬¡çš„å¤§å°</p>
</blockquote>
<ul>
<li>éšè—å±‚çš„æƒé‡çŸ¢é‡Whå’Œåç½®é¡¹bhçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆ?</li>
</ul>
<blockquote>
<p>æƒé‡çŸ¢é‡Wh:10 x 50</p>
<p>åç½®é¡¹bh: 50 (æ¯ä¸€ä¸ªéšè—å±‚æœ‰ä¸€ä¸ªåç½®å‘)</p>
</blockquote>
<ul>
<li>è¾“å‡ºå±‚çš„æƒé‡çŸ¢é‡Woå’Œåç½®é¡¹boçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆ?</li>
</ul>
<blockquote>
<p>æƒé‡çŸ¢é‡Wo:50x  3</p>
<p>åç½®é¡¹bo: 3</p>
</blockquote>
<ul>
<li>è¾“å‡ºçŸ©é˜µYçš„å½¢çŠ¶æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<blockquote>
<p>m x 3</p>
</blockquote>
<ul>
<li>å†™å‡ºç”¨Xã€Whã€bhã€Woã€boè®¡ç®—çŸ©é˜µYçš„ç­‰å¼ã€‚</li>
</ul>
<blockquote>
<p>$Y = ReLU(ReLU(X W_h + b_h) W_o + b_o)$</p>
</blockquote>
</li>
<li><p>å¦‚æœè¦å°†é‚®ä»¶åˆ†ä¸ºåƒåœ¾é‚®ä»¶å’Œæ­£å¸¸é‚®ä»¶ï¼Œè¾“å‡ºå±‚éœ€è¦å‡ ä¸ªç¥ç»å…ƒï¼Ÿè¾“å‡ºå±‚åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ï¼Ÿå¦‚æœä»»åŠ¡æ¢æˆMNISTï¼Œè¾“å‡ºå±‚éœ€è¦å¤šå°‘ç¥ç»å…ƒï¼Œæ¿€æ´»å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿå†æ¢æˆç¬¬2ç« ä¸­çš„æˆ¿ä»·é¢„æµ‹ï¼Œè¾“å‡ºå±‚åˆè¯¥æ€ä¹ˆå˜ï¼Ÿ</p>
<blockquote>
<p>è¦å°†é‚®ä»¶åˆ†ä¸ºåƒåœ¾é‚®ä»¶å’Œæ­£å¸¸é‚®ä»¶ï¼Œè¾“å‡ºå±‚ä»…ä»…éœ€è¦1ä¸ªç¥ç»å…ƒï¼Œsigmoidæ¿€æ´»å‡½æ•°</p>
<p>å¦‚æœæ•°æ®é›†ä¸ºMNISTï¼Œæ€»å…±æœ‰åä¸ªç±»åˆ«ï¼Œè¾“å‡ºå±‚éœ€è¦10ä¸ªç¥ç»å…ƒï¼Œsoftmaxæ¿€æ´»å‡½æ•°</p>
<p>æˆ¿ä»·é¢„æµ‹æ˜¯å›å½’é—®é¢˜ï¼šè¾“å‡ºå±‚åªéœ€è¦ä¸€ä¸ªç¥ç»å…ƒï¼Œå¹¶ä¸”ä¸éœ€è¦æ¿€æ´»å‡½æ•°</p>
</blockquote>
</li>
<li><p>åå‘ä¼ æ’­æ˜¯ä»€ä¹ˆåŠå…¶åŸç†ï¼Ÿåå‘ä¼ æ’­å’Œé€†å‘autodiffæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<blockquote>
<p>åå‘ä¼ æ’­æ˜¯ä¸€ç§è®­ç»ƒ MLP çš„æ–¹æ³•ï¼Œä½¿ç”¨äº†é«˜æ•ˆæ¢¯åº¦è®¡ç®—çš„æ¢¯åº¦ä¸‹é™ç®—æ³•åªéœ€è¦ä¸¤æ¬¡ç½‘ç»œä¼ æ’­ï¼ˆä¸€æ¬¡å‘å‰ï¼Œä¸€æ¬¡å‘åï¼‰ï¼Œå°±å¯ä»¥ç®—å‡ºç½‘ç»œè¯¯å·®çš„ã€å’Œæ¯ä¸ªç‹¬ç«‹æ¨¡å‹å‚æ•°ç›¸å…³çš„æ¢¯åº¦ã€‚</p>
<p>åå‘ä¼ æ’­æŒ‡çš„æ˜¯åå‘ä¼ è¾“ï¼Œè®¡ç®—æ¢¯åº¦ï¼Œæ¢¯åº¦ä¸‹é™çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œè€Œåå‘æ¨¡å¼è‡ªå¾®åˆ†ä»…ä»…æ˜¯åå‘ä¼ æ’­ä¸­ç”¨æ¥è®¡ç®—æ¢¯åº¦çš„ä¸€ä¸ªæ‰‹æ®µã€‚</p>
</blockquote>
</li>
<li><p>åˆ—å‡ºæ‰€æœ‰ç®€å•MLPä¸­éœ€è¦è°ƒèŠ‚çš„è¶…å‚æ•°ï¼Ÿå¦‚æœMLPè¿‡æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œå¦‚ä½•è°ƒèŠ‚è¶…å‚æ•°ï¼Ÿ</p>
<blockquote>
<p>éšè—å±‚çš„æ•°é‡ï¼Œæ¯ä¸ªéšè—å±‚ä¸­ç¥ç»å…ƒçš„æ•°é‡ï¼Œæ¿€æ´»å‡½æ•°çš„é€‰æ‹©</p>
<p>ä¸€èˆ¬æ¥è¯´ReLUå‡½æ•°å¯¹äºéšè—å±‚è¡¨ç°å¾ˆå¥½ï¼Œè¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°éœ€è¦çœ‹è¾“å‡ºçš„éœ€æ±‚ï¼š</p>
<p>äºŒåˆ†ç±»ï¼šé€»è¾‘å‡½æ•°</p>
<p>å¤šåˆ†ç±»ï¼šsoftmax</p>
<p>å›å½’ä¸éœ€è¦æ¿€æ´»å‡½æ•°</p>
<p>è¿‡æ‹Ÿåˆå¯ä»¥æ—©åœï¼Œæˆ–è€…å‡å°‘éšè—å±‚çš„æ•°é‡ï¼Œå‡å°‘æ¯å±‚ç¥ç»å…ƒçš„æ•°é‡ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨MNISTæ•°æ®åŠä¸Šè®­ç»ƒä¸€ä¸ªæ·±åº¦MLPã€‚</p>
<p>ä½¿ç”¨<code>keras.datasets.mnist.load_data()</code>åŠ è½½æ•°æ®ï¼Œçœ‹çœ‹èƒ½å¦ä½¿å‡†ç¡®ç‡è¶…è¿‡98%ï¼Œåˆ©ç”¨æœ¬ç« ä»‹ç»çš„æ–¹æ³•ï¼ˆé€æ­¥æŒ‡æ•°çº§æé«˜å­¦ä¹ ç‡ï¼Œç”»è¯¯å·®æ›²çº¿ï¼Œæ‰¾åˆ°è¯¯å·®å‡é«˜çš„ç‚¹ï¼‰æœç´¢æœ€ä½³å­¦ä¹ ç‡ã€‚ä¿å­˜æ£€æŸ¥ç‚¹ï¼Œä½¿ç”¨æ—©åœï¼Œç”¨TensorBoardç”»å­¦ä¹ æ›²çº¿çš„å›¾ã€‚</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬11ç« -è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ"><a href="#ç¬¬11ç« -è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¬¬11ç«  è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ"></a>ç¬¬11ç«  è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ</h2><h3 id="æ¢¯åº¦æ¶ˆå¤±-çˆ†ç‚¸é—®é¢˜"><a href="#æ¢¯åº¦æ¶ˆå¤±-çˆ†ç‚¸é—®é¢˜" class="headerlink" title="æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜"></a>æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜</h3><p>æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼š éšç€ç®—æ³•è¿›å±•åˆ°è¾ƒä½å±‚ï¼Œæ¢¯åº¦å¾€å¾€å˜å¾—è¶Šæ¥è¶Šå°ã€‚ ç»“æœï¼Œæ¢¯åº¦ä¸‹é™æ›´æ–°ä½¿å¾—ä½å±‚è¿æ¥æƒé‡å®é™…ä¸Šä¿æŒä¸å˜ï¼Œå¹¶ä¸”è®­ç»ƒæ°¸è¿œä¸ä¼šæ”¶æ•›åˆ°æœ€ä¼˜è§£ã€‚</p>
<p>æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼šæ¢¯åº¦å¯èƒ½å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œè®¸å¤šå±‚å¾—åˆ°äº†éå¸¸å¤§çš„æƒé‡æ›´æ–°ï¼Œç®—æ³•å‘æ•£ã€‚</p>
<p>2010 å¹´å·¦å³ï¼ŒXavier Glorot å’Œ Yoshua Bengio å‘è¡¨çš„é¢˜ä¸º<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fproceedings.mlr.press%2Fv9%2Fglorot10a%2Fglorot10a.pdf" target="_blank" rel="noopener">ã€ŠUnderstanding the Difficulty of Training Deep Feedforward Neural Networksã€‹</a>çš„è®ºæ–‡å‘ç°ï¼šä½¿ç”¨æµè¡Œçš„ sigmoid æ¿€æ´»å‡½æ•°å’Œå½“æ—¶æœ€å—æ¬¢è¿çš„æƒé‡åˆå§‹åŒ–æ–¹æ³•çš„ç»„åˆï¼Œå³éšæœºåˆå§‹åŒ–æ—¶ä½¿ç”¨å¹³å‡å€¼ä¸º 0ï¼Œæ ‡å‡†å·®ä¸º 1 çš„æ­£æ€åˆ†å¸ƒï¼Œæ¯å±‚è¾“å‡ºçš„æ–¹å·®è¿œå¤§äºå…¶è¾“å…¥çš„æ–¹å·®ã€‚éšç€ç½‘ç»œå‰å‘ä¼ æ’­ï¼Œæ¯å±‚çš„æ–¹å·®æŒç»­å¢åŠ ï¼Œç›´åˆ°æ¿€æ´»å‡½æ•°åœ¨é¡¶å±‚é¥±å’Œã€‚logisticå‡½æ•°çš„å¹³å‡å€¼ä¸º 0.5 è€Œä¸æ˜¯ 0ï¼ˆåŒæ›²æ­£åˆ‡å‡½æ•°çš„å¹³å‡å€¼ä¸º 0ï¼Œè¡¨ç°ç•¥å¥½äºæ·±å±‚ç½‘ç»œä¸­çš„logisticå‡½æ•°ï¼‰ï¼Œä½¿å¾—æƒ…å†µæ›´åã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c252c67afc52e2f9.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="Glorot-å’Œ-He-åˆå§‹åŒ–"><a href="#Glorot-å’Œ-He-åˆå§‹åŒ–" class="headerlink" title="Glorot å’Œ He åˆå§‹åŒ–"></a>Glorot å’Œ He åˆå§‹åŒ–</h3><p>ç†æƒ³æƒ…å†µï¼šéœ€è¦æ¯å±‚è¾“å‡ºçš„æ–¹å·®ç­‰äºå…¶è¾“å…¥çš„æ–¹å·®ï¼Œå¹¶ä¸”åå‘ä¼ æ’­æ—¶ï¼Œæµç»ä¸€å±‚çš„å‰åï¼Œæ¢¯åº¦çš„æ–¹å·®ä¹Ÿè¦ç›¸åŒã€‚</p>
<p>å®é™…ä¸Šï¼šä¸å¯èƒ½ä¿è¯ä¸¤è€…éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé™¤éè¿™ä¸ªå±‚å…·æœ‰ç›¸åŒæ•°é‡çš„è¾“å…¥å’Œç¥ç»å…ƒï¼ˆè¿™ä¸¤ä¸ªæ•°è¢«ç§°ä¸ºè¯¥å±‚çš„æ‰‡å…¥<code>fan-in</code>å’Œæ‰‡å‡º<code>fan-out</code>ï¼‰</p>
<p>Glorot å’Œ Bengioæå‡ºäº†ä¸€ä¸ªæŠ˜è¡·åŠæ³•ï¼šéšæœºåˆå§‹åŒ–è¿æ¥æƒé‡å¿…é¡»å¦‚ä¸‹:</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-34956eb953f08cc1.png?imageMogr2/auto-orient/strip|imageView2/2/w/702/format/webp" alt="img"></p>
<p>å…¶ä¸­$fan_{avg} = (fan_{in} + fan_{out}) / 2$</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-8ccaf8b0c543be01.png?imageMogr2/auto-orient/strip|imageView2/2/w/956/format/webp" alt="img"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒKerasä½¿ç”¨å‡åŒ€åˆ†å¸ƒçš„Glorotåˆå§‹åŒ–å‡½æ•°ã€‚</p>
<h3 id="éé¥±å’Œæ¿€æ´»å‡½æ•°"><a href="#éé¥±å’Œæ¿€æ´»å‡½æ•°" class="headerlink" title="éé¥±å’Œæ¿€æ´»å‡½æ•°"></a>éé¥±å’Œæ¿€æ´»å‡½æ•°</h3><p>Glorot å’Œ Bengio åœ¨ 2010 å¹´çš„è®ºæ–‡ä¸­çš„ä¸€ä¸ªè§è§£æ˜¯ï¼Œæ¶ˆå¤±/çˆ†ç‚¸çš„æ¢¯åº¦é—®é¢˜éƒ¨åˆ†æ˜¯ç”±äºæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ä¸å¥½é€ æˆçš„ã€‚</p>
<p><strong>â€œReLU æ­»åŒºâ€ </strong> åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¸€äº›ç¥ç»å…ƒä¼šâ€œæ­»äº¡â€ï¼Œå³å®ƒä»¬åœæ­¢è¾“å‡º 0 ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚</p>
<blockquote>
<p>åœ¨è®­ç»ƒæœŸé—´ï¼Œå¦‚æœç¥ç»å…ƒçš„æƒé‡å¾—åˆ°æ›´æ–°ï¼Œä½¿å¾—ç¥ç»å…ƒè¾“å…¥çš„åŠ æƒå’Œä¸ºè´Ÿï¼ŒReLUå‡½æ•°çš„æ¢¯åº¦ä¸º0ï¼Œç¥ç»å…ƒå°±åªèƒ½è¾“å‡º0äº†ã€‚</p>
</blockquote>
<h4 id="ReLU-å‡½æ•°çš„å˜ä½“"><a href="#ReLU-å‡½æ•°çš„å˜ä½“" class="headerlink" title="ReLU å‡½æ•°çš„å˜ä½“"></a>ReLU å‡½æ•°çš„å˜ä½“</h4><h4 id="leaky-ReLUï¼š"><a href="#leaky-ReLUï¼š" class="headerlink" title="leaky ReLUï¼š"></a>leaky ReLUï¼š</h4><p> $LeakyReLU_Î±(z)= max(Î±zï¼Œz)$</p>
<p>è¶…å‚æ•°<code>Î±</code>å®šä¹‰äº†å‡½æ•°â€œleakâ€çš„ç¨‹åº¦ï¼šå®ƒæ˜¯<code>z &lt; 0</code>æ—¶å‡½æ•°çš„æ–œç‡ï¼Œé€šå¸¸è®¾ç½®ä¸º 0.01ã€‚è¿™ä¸ªå°æ–œç‡ä¿è¯ leaky ReLU æ°¸ä¸æ­»äº¡ï¼›</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-2e50453795b314b6.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="éšæœºåŒ–-leaky-ReLUï¼ˆRReLUï¼‰"><a href="#éšæœºåŒ–-leaky-ReLUï¼ˆRReLUï¼‰" class="headerlink" title="éšæœºåŒ– leaky ReLUï¼ˆRReLUï¼‰"></a>éšæœºåŒ– leaky ReLUï¼ˆRReLUï¼‰</h4><p>å…¶ä¸­<code>Î±</code>åœ¨è®­ç»ƒæœŸé—´åœ¨ç»™å®šèŒƒå›´å†…éšæœºï¼Œå¹¶åœ¨æµ‹è¯•æœŸé—´å›ºå®šä¸ºå¹³å‡å€¼ã€‚å®ƒè¡¨ç°ç›¸å½“å¥½ï¼Œä¼¼ä¹æ˜¯ä¸€ä¸ªæ­£åˆ™é¡¹ï¼ˆå‡å°‘è®­ç»ƒé›†çš„è¿‡æ‹Ÿåˆé£é™©ï¼‰ã€‚</p>
<h4 id="å‚æ•°åŒ–çš„-leaky-ReLUï¼ˆPReLUï¼‰"><a href="#å‚æ•°åŒ–çš„-leaky-ReLUï¼ˆPReLUï¼‰" class="headerlink" title="å‚æ•°åŒ–çš„ leaky ReLUï¼ˆPReLUï¼‰"></a>å‚æ•°åŒ–çš„ leaky ReLUï¼ˆPReLUï¼‰</h4><p><code>Î±</code>è¢«æˆæƒåœ¨è®­ç»ƒæœŸé—´å‚ä¸å­¦ä¹ ï¼ˆä¸æ˜¯ä½œä¸ºè¶…å‚æ•°ï¼Œ<code>Î±</code>å˜æˆå¯ä»¥åƒä»»ä½•å…¶ä»–å‚æ•°ä¸€æ ·è¢«åå‘ä¼ æ’­ä¿®æ”¹çš„å‚æ•°ï¼‰ã€‚PReLUåœ¨å¤§å‹å›¾åƒæ•°æ®é›†ä¸Šçš„è¡¨ç°å¼ºäº ReLUï¼Œä½†æ˜¯å¯¹äºè¾ƒå°çš„æ•°æ®é›†ï¼Œå…¶å…·æœ‰è¿‡åº¦æ‹Ÿåˆè®­ç»ƒé›†çš„é£é™©ã€‚</p>
<h4 id="æŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆexponential-linear-unitï¼ŒELUï¼‰"><a href="#æŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆexponential-linear-unitï¼ŒELUï¼‰" class="headerlink" title="æŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆexponential linear unitï¼ŒELUï¼‰"></a>æŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆexponential linear unitï¼ŒELUï¼‰</h4><p><img src="https://upload-images.jianshu.io/upload_images/7178691-e996caccf4ed7c10.png?imageMogr2/auto-orient/strip|imageView2/2/w/936/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-7bdffc790dc8451f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ELU æ¿€æ´»å‡½æ•°çš„ä¸»è¦ç¼ºç‚¹æ˜¯è®¡ç®—é€Ÿåº¦æ…¢äº ReLU åŠå…¶å˜ä½“ï¼ˆç”±äºä½¿ç”¨æŒ‡æ•°å‡½æ•°ï¼‰ï¼Œä½†æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿™æ˜¯é€šè¿‡æ›´å¿«çš„æ”¶æ•›é€Ÿåº¦æ¥è¡¥å¿çš„ã€‚</p>
<h4 id="Scaled-ELUï¼ˆSELUï¼‰æ¿€æ´»å‡½æ•°"><a href="#Scaled-ELUï¼ˆSELUï¼‰æ¿€æ´»å‡½æ•°" class="headerlink" title="Scaled ELUï¼ˆSELUï¼‰æ¿€æ´»å‡½æ•°"></a>Scaled ELUï¼ˆSELUï¼‰æ¿€æ´»å‡½æ•°</h4><p>ELUçš„ä¼¸ç¼©å˜ä½“,2017å¹´æå‡ºã€‚</p>
<p>åªè¦ç¥ç»ç½‘ç»œä¸­éƒ½æ˜¯ç´§å¯†å±‚ï¼Œå¹¶ä¸”æ‰€æœ‰éšè—å±‚éƒ½æ˜¯ç”¨çš„SELUæ¿€æ´»å‡½æ•°ï¼Œåˆ™è¿™ä¸ªç½‘ç»œæ˜¯è‡ªå½’ä¸€çš„ï¼šè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯å±‚è¾“å‡ºçš„å¹³å‡å€¼æ˜¯0ï¼Œæ ‡å‡†å·®æ˜¯1ï¼Œè¿™æ ·å°±è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸é—®é¢˜ã€‚å¯¹äºå…¨ç´§å¯†å±‚çš„ç½‘ç»œï¼ˆå°¤å…¶æ˜¯å¾ˆæ·±çš„ï¼‰ï¼ŒSELUçš„æ•ˆæœå¸¸å¸¸ä¼˜äºå…¶ä»–æ¿€æ´»å‡½æ•°ã€‚</p>
<p>è‡ªå½’ä¸€çš„æ¡ä»¶ï¼š</p>
<ul>
<li>è¾“å…¥ç‰¹å¾å¿…é¡»æ˜¯æ ‡å‡†çš„ï¼ˆå¹³å‡å€¼æ˜¯0ï¼Œæ ‡å‡†å·®æ˜¯1ï¼‰ï¼›</li>
<li>æ¯ä¸ªéšè—å±‚çš„æƒé‡å¿…é¡»æ˜¯LeCunæ­£æ€åˆå§‹åŒ–çš„ã€‚åœ¨Kerasä¸­ï¼Œè¦è®¾ç½®<code>kernel_initializer=&quot;lecun_normal&quot;</code>ï¼›</li>
<li>ç½‘ç»œæ¶æ„å¿…é¡»æ˜¯é¡ºåºçš„ã€‚å¦‚æœè¦åœ¨éé¡ºåºç½‘ç»œï¼ˆæ¯”å¦‚RNNï¼‰æˆ–æœ‰è·³è¿æ¥çš„ç½‘ç»œï¼ˆè·³è¿‡å±‚çš„è¿æ¥ï¼Œæ¯”å¦‚Wide&amp;Deepï¼‰ä¸­ä½¿ç”¨SELUï¼Œå°±ä¸èƒ½ä¿è¯æ˜¯è‡ªå½’ä¸€çš„ï¼Œæ‰€ä»¥SELUå°±ä¸ä¼šæ¯”å…¶å®ƒæ¿€æ´»å‡½æ•°æ›´ä¼˜ï¼›</li>
<li>è¿™ç¯‡è®ºæ–‡åªæ˜¯è¯´å¦‚æœæ‰€æœ‰å±‚éƒ½æ˜¯ç´§å¯†å±‚æ‰ä¿è¯è‡ªå½’ä¸€ï¼Œä½†æœ‰äº›ç ”ç©¶è€…å‘ç°SELUæ¿€æ´»å‡½æ•°ä¹Ÿå¯ä»¥æé«˜å·ç§¯ç¥ç»ç½‘ç»œçš„æ€§èƒ½ã€‚</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬æ¥è¯´ SELU &gt; ELU &gt; leaky ReLUï¼ˆåŠå…¶å˜ä½“ï¼‰&gt; ReLU &gt; tanh &gt; sigmoid</p>
<ul>
<li>å¦‚æœç½‘ç»œæ¶æ„ä¸èƒ½ä¿è¯è‡ªå½’ä¸€ï¼Œåˆ™ELUå¯èƒ½æ¯”SELUçš„æ€§èƒ½æ›´å¥½ï¼ˆå› ä¸ºSELUåœ¨z=0æ—¶ä¸æ˜¯å¹³æ»‘çš„ï¼‰ã€‚</li>
<li>å¦‚æœå…³å¿ƒè¿è¡Œå»¶è¿Ÿï¼Œåˆ™ leaky ReLU æ›´å¥½ã€‚ å¦‚æœä¸æƒ³å¤šè°ƒæ•´å¦ä¸€ä¸ªè¶…å‚æ•°ï¼Œä½ ä»¥ä½¿ç”¨å‰é¢æåˆ°çš„é»˜è®¤çš„<code>Î±</code>å€¼ï¼ˆleaky ReLU ä¸º 0.3ï¼‰</li>
<li>å¦‚æœç¥ç»ç½‘ç»œè¿‡æ‹Ÿåˆï¼Œåˆ™ä½¿ç”¨RReLU</li>
<li>å¦‚æœæœ‰åºå¤§çš„è®­ç»ƒæ•°æ®é›†ï¼Œåˆ™ä¸º PReLU</li>
<li>å¦‚æœæœ‰å……è¶³çš„æ—¶é—´å’Œè®¡ç®—èƒ½åŠ›ï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰éªŒè¯æ¥è¯„ä¼°å…¶ä»–æ¿€æ´»å‡½æ•°</li>
</ul>
<p>ä½†æ˜¯ï¼Œå› ä¸ºReLUæ˜¯ç›®å‰åº”ç”¨æœ€å¹¿çš„æ¿€æ´»å‡½æ•°ï¼Œè®¸å¤šåº“å’Œç¡¬ä»¶åŠ é€Ÿå™¨éƒ½ä½¿ç”¨äº†é’ˆå¯¹ReLUçš„ä¼˜åŒ–ï¼Œå¦‚æœé€Ÿåº¦æ˜¯é¦–è¦çš„ï¼ŒReLUå¯èƒ½ä»ç„¶æ˜¯é¦–é€‰ã€‚</p>
</blockquote>
<h3 id="æ‰¹å½’ä¸€åŒ–ï¼ˆBatch-Normalizationï¼‰"><a href="#æ‰¹å½’ä¸€åŒ–ï¼ˆBatch-Normalizationï¼‰" class="headerlink" title="æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰"></a>æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰</h3><p>ä½¿ç”¨ Heåˆå§‹åŒ–å’Œ ELUï¼ˆæˆ–ä»»ä½• ReLU å˜ä½“ï¼‰å¯ä»¥æ˜¾è‘—å‡å°‘è®­ç»ƒå¼€å§‹é˜¶æ®µçš„æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜ï¼Œä½†ä¸èƒ½ä¿è¯åœ¨è®­ç»ƒæœŸé—´é—®é¢˜ä¸ä¼šå†æ¬¡å‡ºç°ã€‚</p>
<p>2015å¹´ï¼ŒSergey Ioffe å’Œ Christian Szegedy æå‡ºäº†ä¸€ç§ç§°ä¸º<strong>æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼ŒBNï¼‰</strong>çš„æ–¹æ³•æ¥è§£å†³æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜ã€‚</p>
<p><strong>BN</strong></p>
<blockquote>
<p>åœ¨æ¯å±‚çš„æ¿€æ´»å‡½æ•°ä¹‹å‰æˆ–ä¹‹ååœ¨æ¨¡å‹ä¸­æ·»åŠ æ“ä½œã€‚æ“ä½œå°±æ˜¯å°†è¾“å…¥å¹³å‡å€¼å˜ä¸º0ï¼Œæ–¹å·®å˜ä¸º1ï¼Œç„¶åç”¨ä¸¤ä¸ªæ–°å‚æ•°ï¼Œä¸€ä¸ªåšç¼©æ”¾ï¼Œä¸€ä¸ªåšåç§»ã€‚è¿™ä¸ªæ“ä½œå¯ä»¥è®©æ¨¡å‹å­¦ä¹ åˆ°æ¯å±‚è¾“å…¥å€¼çš„æœ€ä½³ç¼©æ”¾å€¼å’Œå¹³å‡å€¼ã€‚</p>
<p>ä¸€èˆ¬å¦‚æœæ¨¡å‹ç¬¬ä¸€å±‚ä½¿ç”¨äº†BNå±‚ï¼Œåˆ™ä¸ç”¨æ ‡å‡†åŒ–è®­ç»ƒé›†ï¼ˆæ¯”å¦‚ä½¿ç”¨<code>StandardScaler</code>ï¼‰ï¼›BNå±‚åšäº†æ ‡å‡†åŒ–å·¥ä½œï¼ˆè™½ç„¶æ˜¯è¿‘ä¼¼çš„ï¼Œæ¯æ¬¡æ¯æ¬¡åªå¤„ç†ä¸€ä¸ªæ‰¹æ¬¡ï¼Œä½†èƒ½åšç¼©æ”¾å’Œå¹³ç§»ï¼‰ã€‚</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-1248ce61162010fe.png?imageMogr2/auto-orient/strip|imageView2/2/w/761/format/webp" alt="img"></p>
<p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>Î¼Bæ˜¯æ•´ä¸ªå°æ‰¹é‡Bçš„å‡å€¼çŸ¢é‡</li>
<li>ÏƒBæ˜¯è¾“å…¥æ ‡å‡†å·®çŸ¢é‡ï¼Œä¹Ÿæ˜¯æ ¹æ®æ•´ä¸ªå°æ‰¹é‡ä¼°ç®—çš„ã€‚</li>
<li>mBæ˜¯å°æ‰¹é‡ä¸­çš„å®ä¾‹æ•°é‡ã€‚</li>
<li><img src="https://math.jianshu.com/math?formula=%5Cwidehat%7BX%7D" alt="\widehat{X}">(i)æ˜¯ä»¥ä¸ºé›¶ä¸­å¿ƒå’Œæ ‡å‡†åŒ–çš„å®ä¾‹içš„è¾“å…¥çŸ¢é‡ã€‚</li>
<li>Î³æ˜¯å±‚çš„ç¼©æ”¾å‚æ•°çš„çŸ¢é‡ï¼ˆæ¯ä¸ªè¾“å…¥ä¸€ä¸ªç¼©æ”¾å‚æ•°ï¼‰ã€‚</li>
<li>âŠ—è¡¨ç¤ºå…ƒç´ çº§åˆ«çš„ç›¸ä¹˜ï¼ˆæ¯ä¸ªè¾“å…¥ä¹˜ä»¥å¯¹åº”çš„ç¼©æ”¾å‚æ•°ï¼‰</li>
<li>Î²æ˜¯å±‚çš„åç§»å‚æ•°ï¼ˆåç§»é‡ï¼‰çŸ¢é‡ï¼ˆæ¯ä¸ªè¾“å…¥ä¸€ä¸ªåç§»å‚æ•°ï¼‰</li>
<li>Ïµæ˜¯ä¸€ä¸ªå¾ˆå°çš„æ•°å­—ï¼Œä»¥é¿å…è¢«é›¶é™¤ï¼ˆé€šå¸¸ä¸º<code>10^-5</code>ï¼‰ã€‚ è¿™è¢«ç§°ä¸ºå¹³æ»‘é¡¹ï¼ˆæ‹‰å¸ƒæ‹‰æ–¯å¹³æ»‘ï¼ŒLaplace Smoothingï¼‰ã€‚</li>
<li>z(i) æ˜¯BNæ“ä½œçš„è¾“å‡ºï¼šå®ƒæ˜¯è¾“å…¥çš„ç¼©æ”¾å’Œç§»ä½ç‰ˆæœ¬ã€‚</li>
</ul>
<p>åœ¨è®­ç»ƒæ—¶ï¼ŒBNå°†è¾“å…¥æ ‡å‡†åŒ–ï¼Œç„¶ååšäº†ç¼©æ”¾å’Œå¹³ç§»ã€‚æµ‹è¯•æ—¶åˆå¦‚ä½•å‘¢ï¼Ÿ</p>
<blockquote>
<p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ç­‰åˆ°è®­ç»ƒç»“æŸï¼Œç”¨æ¨¡å‹å†è¿è¡Œä¸€æ¬¡è®­ç»ƒé›†ï¼Œç®—å‡ºæ¯ä¸ªBNå±‚çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ã€‚ç„¶åç”¨è¿™äº›æ•°æ®åšé¢„æµ‹ï¼Œè€Œä¸æ˜¯æ‰¹è¾“å…¥çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ã€‚</p>
<p>å¤§éƒ¨åˆ†æ‰¹å½’ä¸€åŒ–å®ç°æ˜¯é€šè¿‡<strong>å±‚è¾“å…¥çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®çš„ç§»åŠ¨å¹³å‡å€¼</strong>æ¥è®¡ç®—çš„ã€‚è¿™ä¹Ÿæ˜¯Kerasåœ¨<code>BatchNormalization</code>ä¸­ä½¿ç”¨çš„æ–¹æ³•ã€‚æ¯ä¸ªæ‰¹å½’ä¸€åŒ–çš„å±‚éƒ½é€šè¿‡æŒ‡æ•°ç§»åŠ¨å¹³å‡å­¦ä¹ äº†å››ä¸ªå‚æ•°ï¼š<code>Î³</code>ï¼ˆè¾“å‡ºç¼©æ”¾çŸ¢é‡ï¼‰ï¼Œ<code>Î²</code>ï¼ˆè¾“å‡ºåç§»çŸ¢é‡ï¼‰ï¼Œ<code>Î¼</code>ï¼ˆæœ€ç»ˆè¾“å…¥å¹³å‡å€¼çŸ¢é‡ï¼‰å’Œ<code>Ïƒ</code>ï¼ˆæœ€ç»ˆè¾“å…¥æ ‡å‡†å·®çŸ¢é‡ï¼‰ã€‚<code>Î¼</code>å’Œ<code>Ïƒ</code>éƒ½æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è®¡ç®—çš„ï¼Œä½†åªåœ¨è®­ç»ƒåä½¿ç”¨ã€‚</p>
</blockquote>
<p><strong>BNçš„ä¼˜ç‚¹ï¼š</strong></p>
<blockquote>
<ul>
<li>æ”¹å–„äº†è¯•éªŒçš„æ‰€æœ‰æ·±åº¦ç¥ç»ç½‘ç»œï¼Œæå¤§æé«˜äº†ImageNetåˆ†ç±»çš„æ•ˆæœã€‚</li>
<li>æ¢¯åº¦æ¶ˆå¤±é—®é¢˜å¤§å¤§å‡å°‘äº†ï¼Œå¯ä»¥ä½¿ç”¨é¥±å’Œæ¿€æ´»å‡½æ•°ï¼Œå¦‚ tanh ç”šè‡³é€»è¾‘æ¿€æ´»å‡½æ•°ã€‚</li>
<li>ç½‘ç»œå¯¹æƒé‡åˆå§‹åŒ–ä¹Ÿä¸é‚£ä¹ˆæ•æ„Ÿ</li>
<li>èƒ½å¤Ÿä½¿ç”¨æ›´å¤§çš„å­¦ä¹ ç‡ï¼Œæ˜¾è‘—åŠ å¿«äº†å­¦ä¹ è¿‡ç¨‹ã€‚</li>
<li>æ‰¹é‡æ ‡å‡†åŒ–ä¹Ÿåƒä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ä¸€æ ·ï¼Œå‡å°‘äº†å¯¹å…¶ä»–æ­£åˆ™åŒ–æŠ€æœ¯çš„éœ€æ±‚</li>
</ul>
</blockquote>
<p><strong>BNçš„ç¼ºç‚¹ï¼š</strong></p>
<blockquote>
<ul>
<li>å¢åŠ æ¨¡å‹çš„å¤æ‚æ€§</li>
<li>è¿è¡Œæ—¶é—´çš„æŸå¤±</li>
</ul>
<p>å‰ä¸€å±‚è®¡ç®—çš„æ˜¯<code>XW + b</code>ï¼ŒBNå±‚è®¡ç®—çš„æ˜¯<code>Î³âŠ—(XW + b â€“ Î¼)/Ïƒ + Î²</code>ï¼ˆå¿½ç•¥äº†åˆ†æ¯ä¸­çš„å¹³æ»‘é¡¹<code>Îµ</code>ï¼‰ã€‚å¦‚æœå®šä¹‰<code>Wâ€² = Î³âŠ—W/Ïƒ</code>å’Œ<code>bâ€² = Î³âŠ—(b â€“ Î¼)/Ïƒ + Î²</code>ï¼Œå…¬å¼å°±èƒ½ç®€åŒ–ä¸º<code>XWâ€² + bâ€²</code>ã€‚å› æ­¤å¦‚æœæ›¿æ¢å‰ä¸€å±‚çš„æƒé‡å’Œåç½®é¡¹ï¼ˆ<code>W</code>å’Œ<code>b</code>ï¼‰ä¸º<code>W&#39;</code>å’Œ<code>b&#39;</code></p>
</blockquote>
<h4 id="ä½¿ç”¨-Keras-å®ç°æ‰¹å½’ä¸€åŒ–"><a href="#ä½¿ç”¨-Keras-å®ç°æ‰¹å½’ä¸€åŒ–" class="headerlink" title="ä½¿ç”¨ Keras å®ç°æ‰¹å½’ä¸€åŒ–"></a>ä½¿ç”¨ Keras å®ç°æ‰¹å½’ä¸€åŒ–</h4><p><code>BatchNormalization</code>ç±»ï¼Œæ¯ä¸ªBNå±‚æ·»åŠ äº†å››ä¸ªå‚æ•°ï¼šÎ³ã€ Î²ã€ Î¼ å’Œ Ïƒã€‚åä¸¤ä¸ªå‚æ•°Î¼ å’Œ Ïƒæ˜¯ç§»åŠ¨å¹³å‡ï¼Œä¸å—åå‘ä¼ æ’­å½±å“ï¼ŒKerasç§°å…¶â€œä¸å¯è®­ç»ƒâ€ï¼Œ æ¨¡å‹ä¸­æœ‰ä¸å¯è®­ç»ƒçš„å‚æ•°é‡ã€‚</p>
<p>è¶…å‚æ•°ï¼š</p>
<blockquote>
<p>è¶…å‚æ•°<code>momentum</code>æ˜¯<code>BatchNormalization</code>åœ¨æ›´æ–°æŒ‡æ•°ç§»åŠ¨å¹³å‡æ—¶ä½¿ç”¨çš„ã€‚ç»™å®šä¸€ä¸ªæ–°å€¼<code>v</code>ï¼ˆä¸€ä¸ªå½“å‰æ‰¹æ¬¡çš„è¾“å…¥å¹³å‡æˆ–æ ‡å‡†å·®æ–°çŸ¢é‡ï¼‰ï¼ŒBNå±‚ä½¿ç”¨ä¸‹é¢çš„ç­‰å¼æ›´æ–°å¹³å‡v</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-888f214e6c98e88c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1038/format/webp" alt="img"></p>
<p>è¶…å‚æ•°æ˜¯<code>axis</code>ï¼šå®ƒç¡®å®šäº†åœ¨å“ªä¸ªè½´ä¸Šå½’ä¸€ã€‚é»˜è®¤æ˜¯-1ï¼Œå³å½’ä¸€åŒ–æœ€åä¸€ä¸ªè½´ï¼ˆä½¿ç”¨å…¶å®ƒè½´çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ï¼‰ã€‚</p>
</blockquote>
<h3 id="æ¢¯åº¦è£å‰ª"><a href="#æ¢¯åº¦è£å‰ª" class="headerlink" title="æ¢¯åº¦è£å‰ª"></a>æ¢¯åº¦è£å‰ª</h3><p>å‡å°‘æ¢¯åº¦çˆ†ç‚¸é—®é¢˜çš„ä¸€ç§å¸¸ç”¨æŠ€æœ¯æ˜¯åœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­å‰ªåˆ‡æ¢¯åº¦ï¼Œä½¿å®ƒä»¬ä¸è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºæ¢¯åº¦è£å‰ªã€‚æ¢¯åº¦è£å‰ªåœ¨å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸­ç”¨çš„å¾ˆå¤šï¼Œå› ä¸ºå¾ªç¯ç¥ç»ç½‘ç»œä¸­ç”¨BNå¾ˆéº»çƒ¦.</p>
<p>èŒƒæ•°è£å‰ª</p>
<h3 id="å¤ç”¨é¢„è®­ç»ƒå±‚"><a href="#å¤ç”¨é¢„è®­ç»ƒå±‚" class="headerlink" title="å¤ç”¨é¢„è®­ç»ƒå±‚"></a>å¤ç”¨é¢„è®­ç»ƒå±‚</h3><p>é€šå¸¸ä¸ä¼šä»é›¶å¼€å§‹è®­ç»ƒä¸€ä¸ªéå¸¸å¤§çš„ DNN ï¼Œå°è¯•æ‰¾åˆ°ä¸€ä¸ªç°æœ‰çš„ç¥ç»ç½‘ç»œæ¥å®Œæˆä¸æ­£åœ¨å°è¯•è§£å†³çš„ä»»åŠ¡ç±»ä¼¼çš„ä»»åŠ¡ï¼Œç„¶åå¤ç”¨è¿™ä¸ªç½‘ç»œçš„è¾ƒä½å±‚ï¼šè¿™å°±æ˜¯æ‰€è°“çš„<strong>è¿ç§»å­¦ä¹ </strong>ã€‚è¿™æ ·ä¸ä»…èƒ½å¤§å¤§åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œè¿˜å°†éœ€è¦æ›´å°‘çš„è®­ç»ƒæ•°æ®ã€‚</p>
<blockquote>
<p>ä¸€èˆ¬åœ°è¯´ï¼Œå¦‚æœè¾“å…¥å…·æœ‰ç±»ä¼¼çš„ä½çº§å±‚æ¬¡çš„ç‰¹å¾ï¼Œåˆ™è¿ç§»å­¦ä¹ å°†å¾ˆå¥½åœ°å·¥ä½œã€‚</p>
</blockquote>
<p>å…ˆå°†æ‰€æœ‰å¤ç”¨çš„å±‚å†»ç»“ï¼ˆå³ï¼Œä½¿å…¶æƒé‡ä¸å¯è®­ç»ƒï¼Œæ¢¯åº¦ä¸‹é™ä¸èƒ½ä¿®æ”¹æƒé‡ï¼‰ï¼Œç„¶åè®­ç»ƒæ¨¡å‹ï¼Œçœ‹å…¶è¡¨ç°å¦‚ä½•ã€‚ç„¶åå°†å¤ç”¨çš„æœ€ä¸Šä¸€æˆ–ä¸¤å±‚è§£å†»ï¼Œè®©åå‘ä¼ æ’­å¯ä»¥è°ƒèŠ‚å®ƒä»¬ï¼Œå†æŸ¥çœ‹æ€§èƒ½æœ‰æ— æå‡ã€‚è®­ç»ƒæ•°æ®è¶Šå¤šï¼Œå¯ä»¥è§£å†»çš„å±‚è¶Šå¤šã€‚è§£å†»æ—¶å‡å°å­¦ä¹ ç‡ä¹Ÿæœ‰å¸®åŠ©ï¼Œå¯ä»¥é¿å…ç ´åå¾®è°ƒè€Œå¾—çš„æƒé‡ã€‚</p>
<p><strong>è¿ç§»å­¦ä¹ åœ¨æ·±åº¦å·ç§¯ç½‘ç»œä¸­è¡¨ç°æœ€å¥½ï¼ŒCNNå­¦åˆ°çš„ç‰¹å¾æ›´é€šç”¨ï¼ˆç‰¹åˆ«æ˜¯æµ…å±‚ï¼‰ </strong></p>
<h4 id="æ— ç›‘ç£é¢„è®­ç»ƒ"><a href="#æ— ç›‘ç£é¢„è®­ç»ƒ" class="headerlink" title="æ— ç›‘ç£é¢„è®­ç»ƒ"></a>æ— ç›‘ç£é¢„è®­ç»ƒ</h4><p>ä½¿ç”¨ç›‘ç£æ¨¡å‹ï¼Œæ¯”å¦‚è‡ªç¼–ç å™¨æˆ–ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œã€‚ç„¶åå¯ä»¥å¤ç”¨è‡ªç¼–ç å™¨æˆ–GANçš„æµ…å±‚ï¼ŒåŠ ä¸Šè¾“å‡ºå±‚ï¼Œä½¿ç”¨ç›‘ç£å­¦ä¹ å¾®è°ƒç½‘ç»œï¼ˆä½¿ç”¨æ ‡ç­¾æ•°æ®ï¼‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-69fe44e53b9ea29b.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="åœ¨è¾…åŠ©ä»»åŠ¡ä¸Šé¢„è®­ç»ƒ"><a href="#åœ¨è¾…åŠ©ä»»åŠ¡ä¸Šé¢„è®­ç»ƒ" class="headerlink" title="åœ¨è¾…åŠ©ä»»åŠ¡ä¸Šé¢„è®­ç»ƒ"></a>åœ¨è¾…åŠ©ä»»åŠ¡ä¸Šé¢„è®­ç»ƒ</h4><h3 id="æ›´å¿«çš„ä¼˜åŒ–å™¨"><a href="#æ›´å¿«çš„ä¼˜åŒ–å™¨" class="headerlink" title="æ›´å¿«çš„ä¼˜åŒ–å™¨"></a>æ›´å¿«çš„ä¼˜åŒ–å™¨</h3><p>å››ç§åŠ é€Ÿè®­ç»ƒçš„æ–¹æ³•ï¼ˆå¹¶ä¸”è¾¾åˆ°æ›´å¥½æ€§èƒ½çš„æ–¹æ³•ï¼‰ï¼šã€</p>
<ol>
<li>å¯¹è¿æ¥æƒé‡åº”ç”¨è‰¯å¥½çš„åˆå§‹åŒ–ç­–ç•¥ï¼Œ</li>
<li>ä½¿ç”¨è‰¯å¥½çš„æ¿€æ´»å‡½æ•°ï¼Œ</li>
<li>ä½¿ç”¨æ‰¹å½’ä¸€åŒ–</li>
<li>é‡ç”¨é¢„è®­ç»ƒç½‘ç»œçš„éƒ¨åˆ†ï¼ˆä½¿ç”¨è¾…åŠ©ä»»åŠ¡æˆ–æ— ç›‘ç£å­¦ä¹ ï¼‰ã€‚ </li>
<li>ä½¿ç”¨æ›´å¿«çš„ä¼˜åŒ–å™¨ï¼Œè€Œä¸æ˜¯å¸¸è§„çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨ã€‚</li>
</ol>
<h4 id="åŠ¨é‡ä¼˜åŒ–"><a href="#åŠ¨é‡ä¼˜åŒ–" class="headerlink" title="åŠ¨é‡ä¼˜åŒ–"></a>åŠ¨é‡ä¼˜åŒ–</h4><p>æ¢¯åº¦ä¸‹é™é€šè¿‡ç›´æ¥å‡å»æŸå¤±å‡½æ•°<code>J(Î¸)</code>ç›¸å¯¹äºæƒé‡<code>Î¸</code>çš„æ¢¯åº¦ï¼ˆ<code>âˆ‡Î¸J(Î¸)</code>ï¼‰ï¼Œä¹˜ä»¥å­¦ä¹ ç‡<code>Î·</code>æ¥æ›´æ–°æƒé‡<code>Î¸</code>ã€‚ $Î¸ â† Î¸ â€“ Î·âˆ‡_Î¸J(Î¸)$ã€‚ä¸å…³å¿ƒæ—©æœŸçš„æ¢¯åº¦æ˜¯ä»€ä¹ˆã€‚,å¦‚æœå±€éƒ¨æ¢¯åº¦å¾ˆå°ï¼Œåˆ™ä¼šéå¸¸ç¼“æ…¢ã€‚</p>
<p>åŠ¨é‡ä¼˜åŒ–å…³å¿ƒä»¥å‰çš„æ¢¯åº¦ï¼šåœ¨æ¯æ¬¡è¿­ä»£æ—¶ï¼Œå®ƒå°†åŠ¨é‡çŸ¢é‡<code>m</code>ï¼ˆä¹˜ä»¥å­¦ä¹ ç‡<code>Î·</code>ï¼‰ä¸å±€éƒ¨æ¢¯åº¦ç›¸åŠ ï¼Œå¹¶ä¸”é€šè¿‡ç®€å•åœ°å‡å»è¯¥åŠ¨é‡çŸ¢é‡æ¥æ›´æ–°æƒé‡.</p>
<p>$mâ† \beta m+\eta\nabla _\theta J(\theta)$</p>
<p>$\theta \leftarrow\ \theta -m$</p>
<p>ä¸ºäº†æ¨¡æ‹ŸæŸç§æ‘©æ“¦æœºåˆ¶ï¼Œé¿å…åŠ¨é‡è¿‡å¤§ï¼Œè¯¥ç®—æ³•å¼•å…¥äº†ä¸€ä¸ªæ–°çš„è¶…å‚æ•°<code>Î²</code>ï¼Œç®€ç§°ä¸ºåŠ¨é‡ï¼Œå®ƒå¿…é¡»è®¾ç½®åœ¨ 0ï¼ˆé«˜æ‘©æ“¦ï¼‰å’Œ 1ï¼ˆæ— æ‘©æ“¦ï¼‰ä¹‹é—´ã€‚ å…¸å‹çš„åŠ¨é‡å€¼æ˜¯ 0.9ã€‚</p>
<blockquote>
<p>ç”±äºåŠ¨é‡çš„åŸå› ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šè¶…è°ƒä¸€äº›ï¼Œç„¶åå†å›æ¥ï¼Œå†æ¬¡è¶…è°ƒï¼Œå¹¶åœ¨ç¨³å®šåœ¨æœ€å°å€¼ä¹‹å‰å¤šæ¬¡æŒ¯è¡ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ç³»ç»Ÿä¸­æœ‰ä¸€ç‚¹æ‘©æ“¦çš„åŸå› ä¹‹ä¸€ï¼šå®ƒæ¶ˆé™¤äº†è¿™äº›æŒ¯è¡ï¼Œä»è€ŒåŠ é€Ÿäº†æ”¶æ•›ã€‚</p>
</blockquote>
<h4 id="Nesterov-åŠ é€Ÿæ¢¯åº¦"><a href="#Nesterov-åŠ é€Ÿæ¢¯åº¦" class="headerlink" title="Nesterov åŠ é€Ÿæ¢¯åº¦"></a>Nesterov åŠ é€Ÿæ¢¯åº¦</h4><p>Yurii Nesterov åœ¨ 1983 å¹´æå‡ºçš„åŠ¨é‡ä¼˜åŒ–çš„ä¸€ä¸ªå°å˜ä½“å‡ ä¹æ€»æ˜¯æ¯”æ™®é€šçš„åŠ¨é‡ä¼˜åŒ–æ›´å¿«ã€‚</p>
<p><strong>Nesterov åŠ¨é‡ä¼˜åŒ–æˆ– Nesterov åŠ é€Ÿæ¢¯åº¦ï¼ˆNesterov Accelerated Gradientï¼ŒNAGï¼‰*</strong>çš„æ€æƒ³æ˜¯æµ‹é‡æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¸æ˜¯åœ¨å±€éƒ¨ä½ç½®ï¼Œè€Œæ˜¯åœ¨åŠ¨é‡æ–¹å‘ç¨å¾®é å‰ã€‚ ä¸æ™®é€šçš„åŠ¨é‡ä¼˜åŒ–çš„å”¯ä¸€åŒºåˆ«åœ¨äºæ¢¯åº¦æ˜¯åœ¨<code>Î¸+Î²m</code>è€Œä¸æ˜¯åœ¨<code>Î¸</code>å¤„æµ‹é‡çš„ã€‚</p>
<p>$mâ† \beta m+\eta\nabla _\theta J(\theta+\beta m)$</p>
<p>$\theta \leftarrow\ \theta -m$</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-f75650e5b631e9bb.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>NAG æœ€ç»ˆæ¯”å¸¸è§„çš„åŠ¨é‡ä¼˜åŒ–å¿«å¾—å¤šã€‚  </strong></p>
<h4 id="AdaGrad"><a href="#AdaGrad" class="headerlink" title="AdaGrad"></a>AdaGrad</h4><p>AdaGrad ç®—æ³•é€šè¿‡æ²¿ç€æœ€é™¡çš„ç»´åº¦ç¼©å°æ¢¯åº¦å‘é‡è§£å†³ç»†é•¿ç¢—çš„é—®é¢˜ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-38590903b6626149.png?imageMogr2/auto-orient/strip|imageView2/2/w/932/format/webp" alt="img"></p>
<p>ç¬¬ä¸€æ­¥å°†æ¢¯åº¦çš„å¹³æ–¹ç´¯åŠ åˆ°çŸ¢é‡<code>s</code>ä¸­ï¼ˆâŠ—ç¬¦å·è¡¨ç¤ºå…ƒç´ çº§åˆ«ç›¸ä¹˜ï¼‰ã€‚ è¿™ä¸ªå‘é‡åŒ–å½¢å¼ç›¸å½“äºå‘é‡<code>s</code>çš„æ¯ä¸ªå…ƒç´ $s_i$è®¡ç®—$si â† s_i + (âˆ‚ / âˆ‚ Î¸_i J(Î¸))^2$ã€‚æ¢ä¸€ç§è¯´æ³•ï¼Œæ¯ä¸ª $s_i$ ç´¯åŠ æŸå¤±å‡½æ•°å¯¹å‚æ•°$Î¸_i$çš„åå¯¼æ•°çš„å¹³æ–¹ã€‚ å¦‚æœæŸå¤±å‡½æ•°æ²¿ç€ç¬¬<code>i</code>ç»´é™¡å³­ï¼Œåˆ™åœ¨æ¯æ¬¡è¿­ä»£æ—¶ï¼Œ si å°†å˜å¾—è¶Šæ¥è¶Šå¤§ã€‚</p>
<p>ç¬¬äºŒæ­¥å‡ ä¹ä¸æ¢¯åº¦ä¸‹é™ç›¸åŒï¼Œä½†æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒï¼šæ¢¯åº¦çŸ¢é‡æŒ‰æ¯”ä¾‹(s+Îµ)^0.5ç¼©å° ï¼ˆâŠ˜ç¬¦å·è¡¨ç¤ºå…ƒç´ åˆ†å‰²ï¼Œ<code>Îµ</code>æ˜¯é¿å…è¢«é›¶é™¤çš„å¹³æ»‘é¡¹ï¼Œé€šå¸¸è®¾ç½®ä¸º$10^-10$ã€‚ è¿™ä¸ªçŸ¢é‡åŒ–çš„å½¢å¼ç›¸å½“äºæ‰€æœ‰Î¸iåŒæ—¶è®¡ç®—</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b852a34b26165cad.png?imageMogr2/auto-orient/strip|imageView2/2/w/282/format/webp" alt="img"></p>
<p><strong>ä¼˜ç‚¹</strong></p>
<blockquote>
<p>è¿™ç§ç®—æ³•ä¼šé™ä½å­¦ä¹ é€Ÿåº¦ï¼Œä½†å¯¹äºé™¡å³­çš„ç»´åº¦ï¼Œå…¶é€Ÿåº¦è¦å¿«äºå…·æœ‰æ¸©å’Œçš„æ–œç‡çš„ç»´åº¦ã€‚ è¿™è¢«ç§°ä¸º<strong>è‡ªé€‚åº”å­¦ä¹ ç‡</strong>ã€‚ æœ‰åŠ©äºå°†æ›´æ–°çš„ç»“æœæ›´ç›´æ¥åœ°æŒ‡å‘å…¨å±€æœ€ä¼˜ã€‚ å¹¶ä¸”ä¸éœ€è¦é‚£ä¹ˆå¤šçš„å»è°ƒæ•´å­¦ä¹ ç‡è¶…å‚æ•°<code>Î·</code>ã€‚</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d2b7668bc13b3ead.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<blockquote>
<p>å¯¹äºç®€å•çš„äºŒæ¬¡é—®é¢˜ï¼ŒAdaGrad ç»å¸¸è¡¨ç°è‰¯å¥½ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œå®ƒç»å¸¸åœæ­¢å¾—å¤ªæ—©ã€‚ å­¦ä¹ ç‡è¢«ç¼©å‡å¾—å¤ªå¤šï¼Œä»¥è‡³äºåœ¨è¾¾åˆ°å…¨å±€æœ€ä¼˜ä¹‹å‰ï¼Œç®—æ³•å®Œå…¨åœæ­¢ã€‚</p>
</blockquote>
<h4 id="RMSProp"><a href="#RMSProp" class="headerlink" title="RMSProp"></a>RMSProp</h4><p>AdaGrad çš„é£é™©æ˜¯é™é€Ÿå¤ªå¿«ï¼Œå¯èƒ½æ— æ³•æ”¶æ•›åˆ°å…¨å±€æœ€ä¼˜ã€‚RMSProp ç®—æ³•é€šè¿‡ä»…ç´¯ç§¯æœ€è¿‘è¿­ä»£ï¼ˆè€Œä¸æ˜¯ä»è®­ç»ƒå¼€å§‹ä»¥æ¥çš„æ‰€æœ‰æ¢¯åº¦ï¼‰çš„æ¢¯åº¦æ¥ä¿®æ­£è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a24cf7849a7f0c1c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1006/format/webp" alt="img"></p>
<p>è¡°å˜ç‡<code>Î²</code>é€šå¸¸è®¾å®šä¸º 0.9ã€‚ æ˜¯è¿™ä¸ªé»˜è®¤å€¼é€šå¸¸è¿è¡Œè‰¯å¥½ï¼Œå¯èƒ½æ ¹æœ¬ä¸éœ€è¦è°ƒæ•´å®ƒã€‚</p>
<p><strong>é€šå¸¸æ¯” AdaGrad ï¼ŒåŠ¨é‡ä¼˜åŒ–å’Œ Nesterov åŠ é€Ÿæ¢¯åº¦è¡¨ç°æ›´å¥½ã€‚ </strong></p>
<h4 id="Adam-å’Œ-Nadam-ä¼˜åŒ–"><a href="#Adam-å’Œ-Nadam-ä¼˜åŒ–" class="headerlink" title="Adam å’Œ Nadam ä¼˜åŒ–"></a>Adam å’Œ Nadam ä¼˜åŒ–</h4><p>Adamï¼Œä»£è¡¨è‡ªé€‚åº”çŸ©ä¼°è®¡ï¼Œç»“åˆäº†åŠ¨é‡ä¼˜åŒ–å’Œ RMSProp çš„æ€æƒ³ï¼šå°±åƒåŠ¨é‡ä¼˜åŒ–ä¸€æ ·ï¼Œå®ƒè¿½è¸ªè¿‡å»æ¢¯åº¦çš„æŒ‡æ•°è¡°å‡å¹³å‡å€¼ï¼Œå°±åƒ RMSProp ä¸€æ ·ï¼Œå®ƒè·Ÿè¸ªè¿‡å»å¹³æ–¹æ¢¯åº¦çš„æŒ‡æ•°è¡°å‡å¹³å‡å€¼ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-827f2d812a6f5640.png?imageMogr2/auto-orient/strip|imageView2/2/w/1136/format/webp" alt="img"></p>
<p>åªçœ‹æ­¥éª¤ 1, 2 å’Œ 5ï¼ŒAdam ä¸åŠ¨é‡ä¼˜åŒ–å’Œ RMSProp çš„ç›¸ä¼¼æ€§ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ç¬¬ 1 æ­¥è®¡ç®—æŒ‡æ•°è¡°å‡çš„å¹³å‡å€¼ï¼Œè€Œä¸æ˜¯æŒ‡æ•°è¡°å‡çš„å’Œï¼Œä½†é™¤äº†ä¸€ä¸ªå¸¸æ•°å› å­ï¼ˆè¡°å‡å¹³å‡å€¼åªæ˜¯è¡°å‡å’Œçš„<code>1 - Î²1</code>å€ï¼‰ä¹‹å¤–ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯ç­‰æ•ˆçš„ã€‚ æ­¥éª¤ 3 å’Œæ­¥éª¤ 4 æ˜¯ä¸€ä¸ªæŠ€æœ¯ç»†èŠ‚ï¼šç”±äº<code>m</code>å’Œ<code>s</code>åˆå§‹åŒ–ä¸º 0ï¼Œæ‰€ä»¥åœ¨è®­ç»ƒå¼€å§‹æ—¶å®ƒä»¬ä¼šåå‘0ï¼Œæ‰€ä»¥è¿™ä¸¤æ­¥å°†åœ¨è®­ç»ƒå¼€å§‹æ—¶å¸®åŠ©æé«˜<code>m</code>å’Œ<code>s</code>ã€‚</p>
<p><strong>ç”±äº Adam æ˜¯ä¸€ç§è‡ªé€‚åº”å­¦ä¹ ç‡ç®—æ³•ï¼ˆå¦‚ AdaGrad å’Œ RMSPropï¼‰ï¼Œæ‰€ä»¥å¯¹å­¦ä¹ ç‡è¶…å‚æ•°<code>Î·</code>çš„è°ƒæ•´è¾ƒå°‘ã€‚ å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼<code>Î·= 0.001</code>ï¼Œä½¿ Adam ç›¸å¯¹äºæ¢¯åº¦ä¸‹é™æ›´å®¹æ˜“ä½¿ç”¨ã€‚ </strong></p>
<h5 id="Adamè¿˜æœ‰ä¸¤ç§å˜ä½“"><a href="#Adamè¿˜æœ‰ä¸¤ç§å˜ä½“" class="headerlink" title="Adamè¿˜æœ‰ä¸¤ç§å˜ä½“"></a>Adamè¿˜æœ‰ä¸¤ç§å˜ä½“</h5><p>AdaMaxï¼š</p>
<p>Nadamï¼šNadamä¼˜åŒ–æ˜¯Adamä¼˜åŒ–åŠ ä¸Šäº†NesterovæŠ€å·§ï¼Œæ‰€ä»¥é€šå¸¸æ¯”Adamæ”¶æ•›çš„å¿«ä¸€ç‚¹ã€‚</p>
<blockquote>
<p>ç›®å‰æ‰€æœ‰è®¨è®ºçš„ä¼˜åŒ–æ–¹æ³•éƒ½æ˜¯åŸºäºä¸€é˜¶åå¯¼ï¼ˆé›…å¯æ¯”çŸ©é˜µï¼‰çš„ã€‚</p>
<p>åŸºäºäºŒé˜¶å¯¼æ•°ï¼ˆæµ·æ£®çŸ©é˜µï¼Œæµ·æ£®çŸ©é˜µæ˜¯é›…å¯æ¯”çŸ©é˜µçš„éª—åˆ°ï¼‰çš„ç®—æ³•å¾ˆéš¾åº”ç”¨äºæ·±åº¦ç¥ç»ç½‘ç»œï¼Œå› ä¸ºæ¯ä¸ªè¾“å‡ºæœ‰$n^2$ä¸ªæµ·æ£®çŸ©é˜µï¼ˆnæ˜¯å‚æ•°ä¸ªæ•°ï¼‰ï¼Œæ¯ä¸ªè¾“å‡ºåªæœ‰nä¸ªé›…å¯æ¯”çŸ©é˜µã€‚å› ä¸ºDNNé€šå¸¸æœ‰æ•°ä¸‡ä¸ªå‚æ•°ï¼ŒäºŒé˜¶ä¼˜åŒ–å™¨é€šå¸¸è¶…å‡ºäº†å†…å­˜ï¼Œå°±ç®—å†…å­˜èƒ½è£…ä¸‹ï¼Œè®¡ç®—æµ·æ£®çŸ©é˜µä¹Ÿéå¸¸æ…¢ã€‚</p>
<p>è®­ç»ƒç¨€ç–æ¨¡å‹</p>
<p>ä»¥ä¸Šä¼˜åŒ–ç®—æ³•éƒ½ä¼šäº§ç”Ÿç´§å¯†æ¨¡å‹ï¼Œå¤§å¤šæ•°å‚æ•°éƒ½æ˜¯éé›¶çš„ã€‚ å¦‚æœè¿è¡Œéœ€è¦ä¸€ä¸ªéå¸¸å¿«çš„æ¨¡å‹ï¼Œæˆ–è€…éœ€è¦å®ƒå ç”¨è¾ƒå°‘çš„å†…å­˜ï¼Œå¯èƒ½éœ€è¦ç”¨ä¸€ä¸ªç¨€ç–æ¨¡å‹æ¥ä»£æ›¿ã€‚</p>
<p>å®ç°è¿™ä¸€ç‚¹çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åƒå¹³å¸¸ä¸€æ ·è®­ç»ƒæ¨¡å‹ï¼Œç„¶åä¸¢æ‰å¾®å°çš„æƒé‡ï¼ˆå°†å®ƒä»¬è®¾ç½®ä¸º 0ï¼‰ã€‚ä½†è¿™é€šå¸¸ä¸ä¼šç”Ÿæˆä¸€ä¸ªç¨€ç–çš„æ¨¡å‹ï¼Œè€Œä¸”å¯èƒ½ä½¿æ¨¡å‹æ€§èƒ½ä¸‹é™ã€‚æ›´å¥½çš„é€‰æ‹©æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åº”ç”¨å¼º â„“1 æ­£åˆ™åŒ–ï¼Œå› ä¸ºå®ƒä¼šæ¨åŠ¨ä¼˜åŒ–å™¨å°½å¯èƒ½å¤šåœ°æ¶ˆé™¤æƒé‡</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-5060d73f5a52760d.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="å­¦ä¹ ç‡è°ƒæ•´"><a href="#å­¦ä¹ ç‡è°ƒæ•´" class="headerlink" title="å­¦ä¹ ç‡è°ƒæ•´"></a>å­¦ä¹ ç‡è°ƒæ•´</h3><p><img src="https://upload-images.jianshu.io/upload_images/7178691-7ac8433cdc7346f1.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="å¹‚è°ƒåº¦"><a href="#å¹‚è°ƒåº¦" class="headerlink" title="å¹‚è°ƒåº¦:"></a>å¹‚è°ƒåº¦:</h4><p>è®¾å­¦ä¹ ç‡ä¸ºè¿­ä»£æ¬¡æ•° t çš„å‡½æ•°ï¼š $Î·(t) = Î·_0 /(1 + t/s)^c$ã€‚åˆå§‹å­¦ä¹ ç‡$Î·_0$ï¼Œ å¹‚<code>c</code>ï¼ˆé€šå¸¸è¢«è®¾ç½®ä¸º 1ï¼‰ï¼Œæ­¥æ•°<code>s</code>æ˜¯è¶…å‚æ•°ã€‚å­¦ä¹ ç‡åœ¨æ¯æ­¥éƒ½ä¼šä¸‹é™ï¼Œsæ­¥åï¼Œä¸‹é™åˆ°$Î·_0 / 2$ã€‚å†ç»è¿‡sæ­¥ï¼Œä¸‹é™åˆ°$Î·_0 / 3$ï¼Œç„¶åæ˜¯Î·0 / 4ã€Î·0 / 5ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç­–ç•¥æ˜¯ä¸€å¼€å§‹å¾ˆå¿«ï¼Œç„¶åè¶Šæ¥è¶Šæ…¢ã€‚å¹‚è°ƒåº¦éœ€è¦è°ƒèŠ‚Î·0å’Œsï¼ˆä¹Ÿå¯èƒ½æœ‰cï¼‰ã€‚</p>
<h4 id="æŒ‡æ•°è°ƒåº¦"><a href="#æŒ‡æ•°è°ƒåº¦" class="headerlink" title="æŒ‡æ•°è°ƒåº¦:"></a>æŒ‡æ•°è°ƒåº¦:</h4><p>å°†å­¦ä¹ ç‡è®¾ç½®ä¸ºè¿­ä»£æ¬¡æ•°<code>t</code>çš„å‡½æ•°ï¼š$Î·(t) = Î·_0 0.1^{t/s}$ã€‚ å­¦ä¹ ç‡æ¯æ­¥éƒ½ä¼šä¸‹é™10å€ã€‚å¹‚è°ƒåº¦çš„ä¸‹é™æ˜¯è¶Šæ¥è¶Šæ…¢ï¼ŒæŒ‡æ•°è°ƒåº¦ä¿æŒ10å€ä¸å˜ã€‚</p>
<h4 id="é¢„å®šçš„åˆ†æ®µæ’å®šå­¦ä¹ ç‡ï¼š"><a href="#é¢„å®šçš„åˆ†æ®µæ’å®šå­¦ä¹ ç‡ï¼š" class="headerlink" title="é¢„å®šçš„åˆ†æ®µæ’å®šå­¦ä¹ ç‡ï¼š"></a>é¢„å®šçš„åˆ†æ®µæ’å®šå­¦ä¹ ç‡ï¼š</h4><p>å…ˆåœ¨å‡ ä¸ªå‘¨æœŸå†…ä½¿ç”¨å›ºå®šçš„å­¦ä¹ ç‡ï¼ˆæ¯”å¦‚5ä¸ªå‘¨æœŸå†…å­¦ä¹ ç‡è®¾ç½®ä¸º Î·0 = 0.1ï¼‰ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªå‘¨æœŸå†…è®¾æ›´å°çš„å­¦ä¹ ç‡ï¼ˆæ¯”å¦‚50ä¸ªå‘¨æœŸÎ·1 = 0.001ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚è™½ç„¶è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯é€šå¸¸éœ€è¦å¼„æ¸…æ¥šæ­£ç¡®çš„å­¦ä¹ é€Ÿåº¦é¡ºåºä»¥åŠä½¿ç”¨æ—¶é•¿ã€‚</p>
<h4 id="æ€§èƒ½è°ƒåº¦ï¼š"><a href="#æ€§èƒ½è°ƒåº¦ï¼š" class="headerlink" title="æ€§èƒ½è°ƒåº¦ï¼š"></a>æ€§èƒ½è°ƒåº¦ï¼š</h4><p>æ¯ N æ­¥æµ‹é‡éªŒè¯è¯¯å·®ï¼ˆå°±åƒæå‰åœæ­¢ä¸€æ ·ï¼‰ï¼Œå½“è¯¯å·®ä¸‹é™æ—¶ï¼Œå°†å­¦ä¹ ç‡é™ä½<code>Î»</code>å€ã€‚</p>
<h4 id="1å¾ªç¯è°ƒåº¦ï¼š"><a href="#1å¾ªç¯è°ƒåº¦ï¼š" class="headerlink" title="1å¾ªç¯è°ƒåº¦ï¼š"></a>1å¾ªç¯è°ƒåº¦ï¼š</h4><p>ä¸å…¶å®ƒæ–¹æ³•ç›¸åï¼Œ1å¾ªç¯è°ƒåº¦ï¼ˆLeslie Smithåœ¨2018å¹´æå‡ºï¼‰ä¸€å¼€å§‹åœ¨å‰åŠä¸ªå‘¨æœŸå°†å­¦ä¹ ç‡Î·0 çº¿æ€§å¢åŠ åˆ°Î·1ï¼Œç„¶ååœ¨ååŠä¸ªå‘¨æœŸå†…å†çº¿æ€§ä¸‹é™åˆ°Î·0ï¼Œæœ€åå‡ ä¸ªå‘¨æœŸå­¦ä¹ ç‡ä¸‹é™å‡ ä¸ªæ•°é‡çº§ï¼ˆä»ç„¶æ˜¯çº¿æ€§çš„ï¼‰ã€‚</p>
<p>ç”¨å‰é¢çš„æ–¹æ³•æ‰¾åˆ°æœ€ä¼˜å­¦ä¹ ç‡çš„æ–¹æ³•ç¡®å®šÎ·1ï¼ŒÎ·0æ˜¯Î·1çš„ååˆ†ä¹‹ä¸€ã€‚å½“ä½¿ç”¨åŠ¨é‡æ—¶ï¼Œå…ˆç”¨ä¸€ä¸ªé«˜åŠ¨é‡ï¼ˆæ¯”å¦‚0.95ï¼‰ï¼Œç„¶ååœ¨è®­ç»ƒä¸ŠåŠæ®µä¸‹é™ï¼ˆæ¯”å¦‚çº¿æ€§ä¸‹é™åˆ°0.85ï¼‰ï¼Œç„¶ååœ¨è®­ç»ƒååŠéƒ¨åˆ†ä¸Šå‡åˆ°æœ€é«˜å€¼ï¼ˆ0.95ï¼‰ï¼Œæœ€åå‡ ä¸ªå‘¨æœŸä¹Ÿç”¨æœ€é«˜å€¼å®Œæˆã€‚</p>
<h3 id="é€šè¿‡æ­£åˆ™åŒ–é¿å…è¿‡æ‹Ÿåˆ"><a href="#é€šè¿‡æ­£åˆ™åŒ–é¿å…è¿‡æ‹Ÿåˆ" class="headerlink" title="é€šè¿‡æ­£åˆ™åŒ–é¿å…è¿‡æ‹Ÿåˆ"></a>é€šè¿‡æ­£åˆ™åŒ–é¿å…è¿‡æ‹Ÿåˆ</h3><p>æœ€å¥½çš„æ­£åˆ™æ–¹æ³•ä¹‹ä¸€ï¼šæ—©åœã€‚å¦å¤–ï¼Œè™½ç„¶æ‰¹å½’ä¸€åŒ–æ˜¯ç”¨æ¥è§£å†³æ¢¯åº¦ä¸ç¨³å®šçš„ï¼Œä½†ä¹Ÿå¯ä»¥ä½œä¸ºæ­£åˆ™å™¨ã€‚è¿™ä¸€èŠ‚ä¼šä»‹ç»å…¶å®ƒä¸€äº›æœ€æµè¡Œçš„ç¥ç»ç½‘ç»œæ­£åˆ™åŒ–æŠ€æœ¯ï¼šâ„“1 å’Œ â„“2æ­£åˆ™ã€dropoutå’Œæœ€å¤§èŒƒæ•°æ­£åˆ™ã€‚</p>
<h4 id="â„“1-å’Œ-â„“2æ­£åˆ™"><a href="#â„“1-å’Œ-â„“2æ­£åˆ™" class="headerlink" title="â„“1 å’Œ â„“2æ­£åˆ™"></a>â„“1 å’Œ â„“2æ­£åˆ™</h4><p>ä½¿ç”¨ â„“2æ­£åˆ™çº¦æŸä¸€ä¸ªç¥ç»ç½‘ç»œçš„è¿æ¥æƒé‡ï¼Œæˆ–â„“1æ­£åˆ™å¾—åˆ°ç¨€ç–æ¨¡å‹ï¼ˆè®¸å¤šæƒé‡ä¸º0ï¼‰ã€‚</p>
<h4 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h4><p>ç”± Geoffrey Hinton äº 2012 å¹´æå‡ºï¼Œå¹¶åœ¨ Nitish Srivastava ç­‰äººçš„2014å¹´è®ºæ–‡ä¸­è¿›ä¸€æ­¥è¯¦ç»†æè¿°ï¼Œå¹¶ä¸”å·²è¢«è¯æ˜æ˜¯éå¸¸æˆåŠŸçš„ï¼šå³ä½¿æ˜¯æœ€å…ˆè¿›çš„ç¥ç»ç½‘ç»œï¼Œä»…ä»…é€šè¿‡å¢åŠ dropoutå°±å¯ä»¥æé«˜1-2ï¼…çš„å‡†ç¡®åº¦ã€‚</p>
<p>åœ¨æ¯ä¸ªè®­ç»ƒæ­¥éª¤ä¸­ï¼Œæ¯ä¸ªç¥ç»å…ƒï¼ˆåŒ…æ‹¬è¾“å…¥ç¥ç»å…ƒï¼Œä½†ä¸åŒ…æ‹¬è¾“å‡ºç¥ç»å…ƒï¼‰éƒ½æœ‰ä¸€ä¸ªæš‚æ—¶â€œä¸¢å¼ƒâ€çš„æ¦‚ç‡<code>p</code>ï¼Œè¿™æ„å‘³ç€åœ¨è¿™ä¸ªè®­ç»ƒæ­¥éª¤ä¸­å®ƒå°†è¢«å®Œå…¨å¿½ç•¥ï¼Œ åœ¨ä¸‹ä¸€æ­¥å¯èƒ½ä¼šæ¿€æ´»ã€‚ è¶…å‚æ•°<code>p</code>ç§°ä¸ºä¸¢å¤±ç‡ï¼Œé€šå¸¸è®¾ä¸º 10%åˆ°50%ä¹‹é—´ï¼›å¾ªç¯ç¥ç»ç½‘ç»œä¹‹é—´æ¥è¿‘20-30%ï¼Œåœ¨å·ç§¯ç½‘ç»œä¸­æ¥è¿‘40-50%ã€‚ è®­ç»ƒåï¼Œç¥ç»å…ƒä¸ä¼šå†ä¸¢å¤±ã€‚</p>
<p><strong>å¦‚ä½•ç†è§£dropout</strong></p>
<p>dropoutä½¿å¾—ç¥ç»å…ƒä¸èƒ½ä¸å…¶ç›¸é‚»çš„ç¥ç»å…ƒåœ¨è®­ç»ƒæ—¶å…±é€‚åº”ï¼Œå¿…é¡»å°½å¯èƒ½è®©è‡ªå·±å˜å¾—æœ‰ç”¨ï¼Œä¹Ÿä¸èƒ½è¿‡åˆ†ä¾èµ–ä¸€äº›è¾“å…¥ç¥ç»å…ƒï¼Œå¿…é¡»æ³¨æ„æ¯ä¸ªè¾“å…¥ç¥ç»å…ƒã€‚æœ€ç»ˆå¯¹è¾“å…¥çš„å¾®å°å˜åŒ–ä¼šä¸å¤ªæ•æ„Ÿã€‚æœ€åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ›´ç¨³å®šã€æ³›åŒ–èƒ½åŠ›æ›´å¼ºçš„ç½‘ç»œã€‚</p>
<p>æ¯ä¸ªè®­ç»ƒæ­¥éª¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªç‹¬ç‰¹çš„ç¥ç»ç½‘ç»œã€‚ ç”±äºæ¯ä¸ªç¥ç»å…ƒå¯ä»¥å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œæ€»å…±æœ‰$2^N$ä¸ªå¯èƒ½çš„ç½‘ç»œï¼ˆå…¶ä¸­ N æ˜¯å¯ä¸¢å¼ƒç¥ç»å…ƒçš„æ€»æ•°ï¼‰ã€‚ è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ•°å­—ï¼Œå®é™…ä¸Šä¸å¯èƒ½å¯¹åŒä¸€ä¸ªç¥ç»ç½‘ç»œè¿›è¡Œä¸¤æ¬¡é‡‡æ ·ã€‚ ä¸€æ—¦è¿è¡Œäº† 10,000 ä¸ªè®­ç»ƒæ­¥éª¤ï¼ŒåŸºæœ¬ä¸Šå·²ç»è®­ç»ƒäº† 10,000 ä¸ªä¸åŒçš„ç¥ç»ç½‘ç»œï¼ˆæ¯ä¸ªç¥ç»ç½‘ç»œåªæœ‰ä¸€ä¸ªè®­ç»ƒå®ä¾‹ï¼‰ã€‚ è¿™äº›ç¥ç»ç½‘ç»œæ˜¾ç„¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå› ä¸ºå®ƒä»¬å…±äº«è®¸å¤šæƒé‡ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯ä¸åŒçš„ã€‚ ç”±æ­¤äº§ç”Ÿçš„ç¥ç»ç½‘ç»œå¯ä»¥çœ‹ä½œæ˜¯æ‰€æœ‰è¿™äº›è¾ƒå°çš„ç¥ç»ç½‘ç»œçš„å¹³å‡é›†æˆã€‚</p>
<p><strong>dropout ä¼¼ä¹å‡ç¼“äº†æ”¶æ•›é€Ÿåº¦ï¼Œä½†é€šå¸¸ä¼šåœ¨è°ƒå‚å¾—å½“æ—¶ä½¿æ¨¡å‹æ›´å¥½</strong></p>
<h5 id="è’™ç‰¹å¡æ´›ï¼ˆMCï¼‰dropout"><a href="#è’™ç‰¹å¡æ´›ï¼ˆMCï¼‰dropout" class="headerlink" title="è’™ç‰¹å¡æ´›ï¼ˆMCï¼‰dropout"></a>è’™ç‰¹å¡æ´›ï¼ˆMCï¼‰dropout</h5><p>è’™ç‰¹å¡æ´›æ ·æœ¬çš„æ•°é‡æ˜¯ä¸€ä¸ªå¯ä»¥è°ƒèŠ‚çš„è¶…å‚æ•°ã€‚è¿™ä¸ªæ•°è¶Šé«˜ï¼Œé¢„æµ‹å’Œä¸å‡†ç¡®åº¦çš„ä¼°è®¡è¶Šé«˜ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ ·æœ¬æ•°ç¿»å€ï¼Œæ¨æ–­æ—¶é—´ä¹Ÿè¦ç¿»å€ã€‚å¦å¤–ï¼Œæ ·æœ¬æ•°è¶…è¿‡ä¸€å®šæ•°é‡ï¼Œæå‡å°±ä¸å¤§äº†ã€‚</p>
<h4 id="æœ€å¤§èŒƒæ•°æ­£åˆ™åŒ–"><a href="#æœ€å¤§èŒƒæ•°æ­£åˆ™åŒ–" class="headerlink" title="æœ€å¤§èŒƒæ•°æ­£åˆ™åŒ–"></a>æœ€å¤§èŒƒæ•°æ­£åˆ™åŒ–</h4><p>å¯¹äºæ¯ä¸ªç¥ç»å…ƒï¼Œå®ƒçº¦æŸè¾“å…¥è¿æ¥çš„æƒé‡<code>w</code>ï¼Œä½¿å¾— $âˆ¥ w âˆ¥_2 â‰¤ r$ï¼Œå…¶ä¸­<code>r</code>æ˜¯æœ€å¤§èŒƒæ•°è¶…å‚æ•°ï¼Œ$âˆ¥ Â· âˆ¥_2$ æ˜¯ l2 èŒƒæ•°</p>
<p><strong>Kerasä¸­é»˜è®¤DNNé…ç½®</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-19249b3d162bbcb8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1170/format/webp" alt="img"></p>
<p><strong>å¦‚æœç½‘ç»œåªæœ‰ç´§å¯†å±‚ï¼Œåˆ™å¯ä»¥æ˜¯è‡ªå½’ä¸€åŒ–çš„ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹é…ç½®ã€‚</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b822155fbb4dd3c4.png?imageMogr2/auto-orient/strip|imageView2/2/w/1166/format/webp" alt="img"></p>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>ä½¿ç”¨ He åˆå§‹åŒ–éšæœºé€‰æ‹©æƒé‡ï¼Œæ˜¯å¦å¯ä»¥å°†æ‰€æœ‰æƒé‡åˆå§‹åŒ–ä¸ºç›¸åŒçš„å€¼ï¼Ÿ</p>
<blockquote>
<p>ä¸å¯ä»¥ï¼Œæ‰€æœ‰çš„æƒé‡éœ€è¦ç‹¬ç«‹éšæœºçš„ç”Ÿæˆã€‚</p>
<p>å¦‚æœå°†ç¥ç»å…ƒçš„æƒé‡åˆå§‹åŒ–ä¸ºç›¸åŒçš„å€¼ï¼Œåˆ™ä¸èƒ½æ‰“ç ´ç»“æ„çš„å¯¹ç§°æ€§ï¼Œè¯¥æƒ…å†µä¸‹ï¼Œæ¯å±‚çš„ç¥ç»å…ƒéƒ½æ˜¯ç­‰ä»·çš„ï¼Œåå‘ä¼ æ’­ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œæ„å‘³ç€ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯å±‚ç¥ç»å…ƒæƒé‡ä¸€ç›´ä¿æŒç›¸åŒï¼Œæ•ˆæœç›¸å½“äºæ¯å±‚åªæœ‰ä¸€ä¸ªç¥ç»å…ƒï¼Œè€Œä¸”æ›´æ…¢ã€‚å¾ˆæ˜æ˜¾è¿™æ ·çš„ç¥ç»ç½‘ç»œä¸èƒ½æ”¶æ•›åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœã€‚</p>
</blockquote>
</li>
<li><p>å¯ä»¥å°†åç½®åˆå§‹åŒ–ä¸º 0 å—ï¼Ÿ</p>
<blockquote>
<p>å¯ä»¥ï¼Œåç½®å‘çš„å½±å“å¹¶ä¸å¤§ã€‚</p>
</blockquote>
</li>
<li><p>è¯´å‡ºSELU æ¿€æ´»åŠŸèƒ½ä¸ ReLU ç›¸æ¯”çš„ä¸‰ä¸ªä¼˜ç‚¹ã€‚</p>
<blockquote>
<ol>
<li>å¾®åˆ†ä¸€ç›´ä¸ä¸ºé›¶ï¼Œé˜²æ­¢å‡ºç°ReLU æ­»åŒºï¼ˆä¸€äº›ç¥ç»å…ƒæ­»æ‰ï¼Œåªèƒ½è¾“å‡º0ï¼ŒåŸå› æ˜¯ï¼šåœ¨è®­ç»ƒæœŸé—´ï¼Œç¥ç»å…ƒçš„æƒé‡æ›´æ–°åä½¿å¾—ç¥ç»å…ƒè¾“å…¥çš„åŠ æƒå’Œä¸ºè´Ÿï¼ŒReLUå‡½æ•°çš„æ¢¯åº¦ä¸º0ï¼Œç¥ç»å…ƒå°±åªèƒ½è¾“å‡º0ã€‚ï¼‰</li>
<li>åªè¦ç¥ç»ç½‘ç»œä¸­éƒ½æ˜¯ç´§å¯†å±‚ï¼Œå¹¶ä¸”æ‰€æœ‰éšè—å±‚éƒ½æ˜¯ç”¨çš„SELUæ¿€æ´»å‡½æ•°ï¼Œåˆ™è¿™ä¸ªç½‘ç»œæ˜¯è‡ªå½’ä¸€çš„ï¼ˆä¸èƒ½ä½¿ç”¨æ­£åˆ™åŒ–æ–¹æ³•ï¼‰</li>
<li>å°äºé›¶æ—¶ä¸æ˜¯å¸¸æ•°0ï¼Œè€Œæ˜¯å˜åŒ–çš„è´Ÿå€¼ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯å±‚è¾“å‡ºçš„å¹³å‡å€¼æ˜¯0ï¼Œæ ‡å‡†å·®æ˜¯1ï¼Œè¿™æ ·å°±è§£å†³äº†æ¢¯åº¦æ¶ˆå¤±çˆ†ç‚¸é—®é¢˜ã€‚</li>
</ol>
</blockquote>
</li>
<li><p>åœ¨å“ªäº›æƒ…å†µä¸‹ï¼Œæ‚¨æƒ³è¦ä½¿ç”¨ä»¥ä¸‹æ¯ä¸ªæ¿€æ´»å‡½æ•°ï¼šSELUï¼Œleaky ReLUï¼ˆåŠå…¶å˜ä½“ï¼‰ï¼ŒReLUï¼Œtanhï¼Œlogistic ä»¥åŠ softmaxï¼Ÿ</p>
<blockquote>
<p>é€šå¸¸æƒ…å†µä¸‹SELUè¡¨ç°å¾ˆå¥½ã€‚ä½†å¦‚æœç¥ç»ç½‘ç»œä¸èƒ½è‡ªå½’ä¸€ï¼ŒELUæ•ˆæœå¯èƒ½ä¼šæ›´å¥½</p>
<p>å¦‚æœéœ€è¦å¾ˆå¿«çš„ç¥ç»ç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨leaky ReLU</p>
<p>ReLUå› ä¸ºå½¢å¼ç®€å•ï¼Œä»æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿çš„æ¿€æ´»å‡½æ•°</p>
<p>â€‹</p>
<p>å¦‚æœéœ€è¦è¾“å‡ºå€¼åœ¨-1~1ä¹‹é—´ï¼Œå¯ä»¥åœ¨è¾“å‡ºå±‚ä½¿ç”¨tanhæ¿€æ´»å‡½æ•°</p>
<p>å¦‚æœäºŒåˆ†ç±»æƒ³è¦è¾“å‡ºæ¦‚ç‡ï¼Œå¯ä»¥åœ¨è¾“å‡ºå±‚ä½¿ç”¨é€»è¾‘æ–¯è’‚æ¿€æ´»å‡½æ•°</p>
<p>å¤šåˆ†ç±»é—®é¢˜è¾“å‡ºæ¦‚ç‡ï¼Œå¯ä»¥åœ¨è¾“å‡ºå±‚ä½¿ç”¨sftmaxæ¿€æ´»å‡½æ•°ã€‚</p>
<p>ä½†tanhï¼Œlogitå’Œsoftmaxæ¿€æ´»å‡½æ•°ï¼Œä¸€èˆ¬ä¸ç”¨äºéšè—å±‚ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœå°†<code>momentum</code>è¶…å‚æ•°è®¾ç½®å¾—å¤ªæ¥è¿‘ 1ï¼ˆä¾‹å¦‚ï¼Œ0.99999ï¼‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ</p>
<blockquote>
<p>å¦‚æœSGD optimizer ä¸­ï¼Œmomentumè®¾ç½®ä¸º0.99999ï¼Œåˆ™ç®—æ³•ä¼šå¾ˆå¿«ï¼Œä½†ç”±äºåŠ¨é‡çš„åŸå› ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šè¶…è°ƒä¸€äº›ï¼Œç„¶åå†å›æ¥ï¼Œå†æ¬¡è¶…è°ƒï¼Œå¹¶åœ¨ç¨³å®šåœ¨æœ€å°å€¼ä¹‹å‰å¤šæ¬¡æŒ¯è¡ã€‚æ€»ä½“æ¥è®²ï¼Œå¤§çš„åŠ¨é‡å‚æ•°æ”¶æ•›æ—¶ä½¿ç”¨å¾—æ—¶é—´æ¯”å°çš„åŠ¨é‡å‚æ•°è¦é•¿ã€‚</p>
</blockquote>
</li>
<li><p>è¯·åˆ—ä¸¾æ‚¨å¯ä»¥ç”Ÿæˆç¨€ç–æ¨¡å‹çš„ä¸‰ç§æ–¹æ³•ã€‚</p>
<blockquote>
<ol>
<li>åƒå¹³å¸¸ä¸€æ ·è®­ç»ƒæ¨¡å‹ï¼Œç„¶åä¸¢æ‰å¾®å°çš„æƒé‡ï¼ˆå°†å®ƒä»¬è®¾ç½®ä¸º 0ï¼‰ã€‚</li>
<li>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åº”ç”¨å¼º â„“1 æ­£åˆ™åŒ–ï¼Œå®ƒä¼šæ¨åŠ¨ä¼˜åŒ–å™¨å°½å¯èƒ½å¤šåœ°æ¶ˆé™¤æƒé‡</li>
<li>ä½¿ç”¨ensorFlow Model Optimization Toolkit</li>
</ol>
</blockquote>
</li>
<li><p>dropout æ˜¯å¦ä¼šå‡æ…¢è®­ç»ƒï¼Ÿ å®ƒæ˜¯å¦ä¼šå‡æ…¢æ¨æ–­ï¼ˆå³é¢„æµ‹æ–°çš„å®ä¾‹ï¼‰ï¼ŸMC dropoutå‘¢ï¼Ÿ</p>
<blockquote>
<p>dropoutä¼šå‡æ…¢è®­ç»ƒï¼Œä¸€èˆ¬ä¼šå˜æ…¢ä¸€å€ï¼Œä½†ä¸€èˆ¬ä¸ä¼šå‡æ…¢æ¨æ–­é€Ÿåº¦ï¼ˆå› ä¸ºdropoutåªåœ¨è®­ç»ƒæ¨¡å‹æ—¶å¼€å¯ï¼‰ã€‚</p>
<p>MC dropoutåœ¨æ¨æ–­è¿‡ç¨‹ä¸­ä¹Ÿä¼šå¼€å¯ï¼Œæ‰€ä»¥ä¼šä½¿å¾—é¢„æµ‹æ–°å®ä¾‹æ—¶ï¼Œé€Ÿåº¦ç¨å¾®å˜æ…¢ã€‚ä½†æ˜¯MC dropoutçš„é—®é¢˜ä¸»è¦åœ¨äºï¼šéœ€è¦è·‘åæ¬¡ï¼ˆè‹¥å¹²æ¬¡ï¼‰é¢„æµ‹ï¼Œä¼šå‡æ…¢é€Ÿåº¦ã€‚</p>
<p>åœ¨CIFAR10å›¾ç‰‡æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œï¼š</p>
</blockquote>
<ol>
<li>å»ºç«‹ä¸€ä¸ª DNNï¼Œæœ‰20ä¸ªéšè—å±‚ï¼Œæ¯å±‚ 100 ä¸ªç¥ç»å…ƒï¼Œä½¿ç”¨ He åˆå§‹åŒ–å’Œ ELU æ¿€æ´»å‡½æ•°ã€‚</li>
<li>ä½¿ç”¨ Nadam ä¼˜åŒ–å’Œæ—©åœï¼Œå°è¯•åœ¨ CIFAR10 ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥ä½¿ç”¨<code>keras.datasets.cifar10.load_data()</code>åŠ è½½æ•°æ®ã€‚æ•°æ®é›†åŒ…æ‹¬60000å¼ 32x32çš„å›¾ç‰‡ï¼ˆ50000å¼ è®­ç»ƒï¼Œ10000å¼ æµ‹è¯•ï¼‰æœ‰10ä¸ªç±»ï¼Œæ‰€ä»¥éœ€è¦10ä¸ªç¥ç»å…ƒçš„softmaxè¾“å‡ºå±‚ã€‚è®°å¾—æ¯æ¬¡è°ƒæ•´æ¶æ„æˆ–è¶…å‚æ•°ä¹‹åï¼Œå¯»æ‰¾åˆé€‚çš„å­¦ä¹ ç‡ã€‚</li>
<li>ç°åœ¨å°è¯•æ·»åŠ æ‰¹å½’ä¸€åŒ–å¹¶æ¯”è¾ƒå­¦ä¹ æ›²çº¿ï¼šå®ƒæ˜¯å¦æ¯”ä»¥å‰æ”¶æ•›å¾—æ›´å¿«ï¼Ÿ å®ƒæ˜¯å¦ä¼šäº§ç”Ÿæ›´å¥½çš„æ¨¡å‹ï¼Ÿå¯¹è®­ç»ƒé€Ÿåº¦æœ‰ä½•å½±å“ï¼Ÿ</li>
<li>å°è¯•ç”¨SELUæ›¿æ¢æ‰¹å½’ä¸€åŒ–ï¼Œåšä¸€äº›è°ƒæ•´ï¼Œç¡®ä¿ç½‘ç»œæ˜¯è‡ªå½’ä¸€åŒ–çš„ï¼ˆå³ï¼Œæ ‡å‡†åŒ–è¾“å…¥ç‰¹å¾ï¼Œä½¿ç”¨LeCunæ­£æ€åˆå§‹åŒ–ï¼Œç¡®ä¿DNNåªå«æœ‰ç´§å¯†å±‚ï¼‰ã€‚</li>
<li>ä½¿ç”¨alpha dropoutæ­£åˆ™åŒ–æ¨¡å‹ã€‚ç„¶åï¼Œä¸è®­ç»ƒæ¨¡å‹ï¼Œä½¿ç”¨MC Dropoutèƒ½å¦æé«˜å‡†ç¡®ç‡ã€‚</li>
<li>ç”¨1å¾ªç¯è°ƒåº¦é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œæ˜¯å¦èƒ½æé«˜è®­ç»ƒé€Ÿåº¦å’Œå‡†ç¡®ç‡ã€‚</li>
</ol>
</li>
</ol>
<h2 id="ç¬¬12ç« -ä½¿ç”¨TensorFlowè‡ªå®šä¹‰æ¨¡å‹å¹¶è®­ç»ƒ"><a href="#ç¬¬12ç« -ä½¿ç”¨TensorFlowè‡ªå®šä¹‰æ¨¡å‹å¹¶è®­ç»ƒ" class="headerlink" title="ç¬¬12ç«  ä½¿ç”¨TensorFlowè‡ªå®šä¹‰æ¨¡å‹å¹¶è®­ç»ƒ"></a>ç¬¬12ç«  ä½¿ç”¨TensorFlowè‡ªå®šä¹‰æ¨¡å‹å¹¶è®­ç»ƒ</h2><p>TensorFlowçš„é«˜çº§API â€”â€” tf.kerasï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥æ­å»ºå„ç§ç¥ç»ç½‘ç»œæ¶æ„ï¼ˆå›å½’ã€åˆ†ç±»ç½‘ç»œã€Wide &amp; Deep ç½‘ç»œã€è‡ªå½’ä¸€åŒ–ç½‘ç»œï¼‰ï¼Œä½¿ç”¨äº†å„ç§æ–¹æ³•ï¼Œï¼ˆæ‰¹å½’ä¸€åŒ–ã€dropoutå’Œå­¦ä¹ ç‡è°ƒåº¦ï¼‰ã€‚ä½†å½“éœ€è¦å®ç°<strong>è‡ªå®šä¹‰æŸå¤±å‡½æ•°ã€è‡ªå®šä¹‰æ ‡å‡†ã€å±‚ã€æ¨¡å‹ã€åˆå§‹åŒ–å™¨ã€æ­£åˆ™å™¨ã€æƒé‡çº¦æŸæ—¶</strong>ï¼Œå°±éœ€è¦å­¦ä¹ TensorFlowçš„ä½çº§Python APIã€‚</p>
<h3 id="TensorFlowé€Ÿè§ˆ"><a href="#TensorFlowé€Ÿè§ˆ" class="headerlink" title="TensorFlowé€Ÿè§ˆ"></a>TensorFlowé€Ÿè§ˆ</h3><p>TensorFlowç”±è°·æ­Œå¤§è„‘å›¢é˜Ÿå¼€å‘ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ•°å€¼è®¡ç®—åº“ï¼Œç‰¹åˆ«é€‚åˆåšå’Œå¾®è°ƒå¤§è§„æ¨¡æœºå™¨å­¦ä¹ ï¼ˆä¹Ÿå¯ä»¥åšå…¶å®ƒçš„é‡å‹è®¡ç®—ï¼‰ã€‚å…·æœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>TensorFlowçš„æ ¸å¿ƒä¸NumPyå¾ˆåƒï¼Œä½†TensorFlowæ”¯æŒGPUï¼›</li>
<li>TensorFlowæ”¯æŒï¼ˆå¤šè®¾å¤‡å’ŒæœåŠ¡å™¨ï¼‰åˆ†å¸ƒå¼è®¡ç®—ï¼›</li>
<li>TensorFlowä½¿ç”¨äº†å³æ—¶JITç¼–è¯‘å™¨å¯¹è®¡ç®—é€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨ä¼˜åŒ–ã€‚ç¼–è¯‘å™¨çš„å·¥ä½œæ˜¯ä»Pythonå‡½æ•°æå–å‡ºè®¡ç®—å›¾ï¼Œç„¶åå¯¹è®¡ç®—å›¾ä¼˜åŒ–ï¼ˆæ¯”å¦‚å‰ªåˆ‡æ— ç”¨çš„èŠ‚ç‚¹ï¼‰ï¼Œæœ€åé«˜æ•ˆè¿è¡Œï¼ˆæ¯”å¦‚è‡ªåŠ¨å¹¶è¡Œè¿è¡Œç‹¬ç«‹ä»»åŠ¡ï¼‰ï¼›</li>
<li>è®¡ç®—å›¾å¯ä»¥å¯¼å‡ºä¸ºè¿ç§»å½¢å¼ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸€ä¸ªç¯å¢ƒä¸­è®­ç»ƒä¸€ä¸ªTensorFlowæ¨¡å‹ï¼ˆæ¯”å¦‚ä½¿ç”¨Pythonæˆ–Linuxï¼‰ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç¯å¢ƒä¸­è¿è¡Œï¼ˆæ¯”å¦‚åœ¨å®‰å“è®¾å¤‡ä¸Šç”¨Javaè¿è¡Œï¼‰ï¼›</li>
<li>TensorFlowå®ç°äº†<strong>è‡ªåŠ¨å¾®åˆ†</strong> ï¼Œå¹¶æä¾›äº†ä¸€äº›é«˜æ•ˆçš„ä¼˜åŒ–å™¨ï¼Œæ¯”å¦‚RMSPropå’ŒNAdamï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“æœ€å°åŒ–å„ç§æŸå¤±å‡½æ•°ã€‚</li>
</ul>
<p>TensorFlowè¿˜æä¾›äº†è®¸å¤šå…¶ä»–åŠŸèƒ½ï¼štf.kerasï¼Œæ•°æ®åŠ è½½ï¼ˆï¼ˆtf.dataï¼‰ï¼Œé¢„å¤„ç†æ“ä½œï¼ˆtf.ioï¼‰ï¼Œå›¾ç‰‡å¤„ç†æ“ä½œï¼ˆtf.imageï¼‰ï¼Œä¿¡å·å¤„ç†æ“ä½œï¼ˆtf.signalï¼‰ç­‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4d1453d7d971cba7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>TensorFlowçš„ä½çº§æ“ä½œéƒ½æ˜¯ç”¨é«˜æ•ˆçš„C++å®ç°çš„ã€‚è®¸å¤šæ“ä½œæœ‰å¤šä¸ªå®ç°ï¼Œç§°ä¸º<code>æ ¸</code>ï¼šæ¯ä¸ªæ ¸å¯¹åº”ä¸€ä¸ªå…·ä½“çš„è®¾å¤‡å‹å·ï¼Œæ¯”å¦‚CPUã€GPUï¼Œç”šè‡³TPUï¼ˆå¼ é‡å¤„ç†å•å…ƒï¼‰ã€‚GPUé€šè¿‡å°†ä»»åŠ¡åˆ†æˆå°å—ï¼Œåœ¨å¤šä¸ªGPUçº¿ç¨‹ä¸­å¹¶è¡Œè¿è¡Œï¼Œå¯ä»¥æå¤§æé«˜æé«˜è®¡ç®—çš„é€Ÿåº¦ã€‚TPUæ›´å¿«ï¼šTPUæ˜¯è‡ªå®šä¹‰çš„ASICèŠ¯ç‰‡ï¼Œä¸“é—¨ç”¨æ¥åšæ·±åº¦å­¦ä¹ è¿ç®—ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c77b37df3aea8d69.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>TensorBoardå¯ä»¥ç”¨æ¥å¯è§†åŒ–ã€‚TensorFlow Extendedï¼ˆTFXï¼‰ï¼Œæ˜¯è°·æ­Œæ¨å‡ºçš„ç”¨æ¥ç”Ÿäº§åŒ–çš„åº“ï¼ŒåŒ…æ‹¬ï¼šæ•°æ®ç¡®è®¤ã€é¢„å¤„ç†ã€æ¨¡å‹åˆ†æå’ŒæœåŠ¡ã€‚TensorFlow Hubä¸Šå¯ä»¥æ–¹ä¾¿ä¸‹è½½å’Œå¤ç”¨é¢„è®­ç»ƒå¥½çš„ç¥ç»ç½‘ç»œã€‚è¿˜å¯ä»¥ä»<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Fmodels%2F" target="_blank" rel="noopener">TensorFlow model garden</a>ä¸Šè·å–è®¸å¤šç¥ç»ç½‘ç»œæ¶æ„ï¼Œå…¶ä¸­ä¸€äº›æ˜¯é¢„è®­ç»ƒå¥½çš„ã€‚<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.tensorflow.org%2Fresources" target="_blank" rel="noopener">TensorFlow Resources</a> </p>
<h3 id="åƒNumPyä¸€æ ·ä½¿ç”¨TensorFlow"><a href="#åƒNumPyä¸€æ ·ä½¿ç”¨TensorFlow" class="headerlink" title="åƒNumPyä¸€æ ·ä½¿ç”¨TensorFlow"></a>åƒNumPyä¸€æ ·ä½¿ç”¨TensorFlow</h3><p>TensorFlowçš„APIæ˜¯å›´ç»•å¼ é‡ï¼ˆtensorï¼‰å±•å¼€çš„ï¼Œä»ä¸€ä¸ªæ“ä½œæµåŠ¨ï¼ˆflowï¼‰åˆ°å¦ä¸€ä¸ªæ“ä½œï¼Œæ‰€ä»¥åå­—å«åšTensorFlowã€‚</p>
<p>å¼ é‡é€šå¸¸æ˜¯ä¸€ä¸ªå¤šç»´æ•°ç»„ï¼ˆå°±åƒNumPyçš„<code>ndarray</code>ï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ ‡é‡ï¼ˆå³ç®€å•å€¼ï¼Œæ¯”å¦‚42ï¼‰ã€‚</p>
<h4 id="å¼ é‡å’Œè¿ç®—"><a href="#å¼ é‡å’Œè¿ç®—" class="headerlink" title="å¼ é‡å’Œè¿ç®—"></a>å¼ é‡å’Œè¿ç®—</h4><p>ä½¿ç”¨<code>tf.constant()</code>åˆ›å»ºå¼ é‡ã€‚å°±åƒ<code>ndarray</code>ä¸€æ ·ï¼Œ<code>tf.Tensor</code>ä¹Ÿæœ‰å½¢çŠ¶å’Œæ•°æ®ç±»å‹ï¼ˆ<code>dtype</code>ï¼‰ï¼Œç´¢å¼•å’ŒNumPyä¸­å¾ˆåƒï¼Œæ‰€æœ‰å¼ é‡è¿ç®—éƒ½å¯ä»¥æ‰§è¡Œã€‚</p>
<p>å¯ä»¥åœ¨tfä¸­æ‰¾åˆ°æ‰€æœ‰åŸºæœ¬çš„æ•°å­¦è¿ç®—ï¼ˆ<code>tf.add()</code>ã€<code>tf.multiply()</code>ã€<code>tf.square()</code>ã€<code>tf.exp()</code>ã€<code>tf.sqrt()</code>ï¼‰ï¼Œä»¥åŠNumPyä¸­çš„å¤§éƒ¨åˆ†è¿ç®—ï¼ˆæ¯”å¦‚<code>tf.reshape()</code>ã€<code>tf.squeeze()</code>ã€<code>tf.tile()</code>ï¼‰ã€‚ä¸€äº›tfä¸­çš„å‡½æ•°ä¸NumPyä¸­ä¸åŒï¼Œä¾‹å¦‚ï¼Œ<code>tf.reduce_mean()</code>ã€<code>tf.reduce_sum()</code>ã€<code>tf.reduce_max()</code>ã€<code>tf.math.log()</code>ç­‰åŒäº<code>np.mean()</code>ã€<code>np.sum()</code>ã€<code>np.max()</code>å’Œ<code>np.log()</code>ã€‚</p>
<blockquote>
<p>TensorFlowä¸­å¿…é¡»ä½¿ç”¨<code>tf.transpose(t)</code>ï¼Œä¸èƒ½åƒNumPyä¸­é‚£æ ·ä½¿ç”¨<code>t.T</code>ã€‚æ˜¯å› ä¸ºå‡½æ•°<code>tf.transpose(t)</code>æ‰€åšçš„å’ŒNumPyçš„å±æ€§<code>T</code>å¹¶ä¸å®Œå…¨ç›¸åŒï¼šåœ¨TensorFlowä¸­ï¼Œæ˜¯ä½¿ç”¨è½¬ç½®æ•°æ®çš„å¤åˆ¶æ¥ç”Ÿæˆå¼ é‡çš„ï¼Œè€Œåœ¨NumPyä¸­ï¼Œ<code>t.T</code>æ˜¯æ•°æ®çš„è½¬ç½®è§†å›¾ã€‚</p>
<p><code>tf.reduce_sum()</code>æ“ä½œä¹‹æ‰€ä»¥è¿™ä¹ˆå‘½åï¼Œæ˜¯å› ä¸ºå®ƒçš„GPUæ ¸ï¼ˆå³GPUå®ç°ï¼‰æ‰€é‡‡ç”¨çš„reduceç®—æ³•ä¸èƒ½ä¿è¯å…ƒç´ ç›¸åŠ çš„é¡ºåºï¼Œå› ä¸º32ä½çš„æµ®ç‚¹æ•°ç²¾åº¦æœ‰é™ï¼Œæ¯æ¬¡è°ƒç”¨çš„ç»“æœå¯èƒ½ä¼šæœ‰ç»†å¾®çš„ä¸åŒã€‚<code>tf.reduce_mean()</code>ä¹Ÿæ˜¯è¿™æ ·ï¼ˆ<code>tf.reduce_max()</code>ç»“æœæ˜¯ç¡®å®šçš„ï¼‰ã€‚</p>
</blockquote>
<p>Keras API æœ‰è‡ªå·±çš„ä½çº§APIï¼Œä½äº<code>keras.backend</code>ï¼ŒåŒ…æ‹¬ï¼šå‡½æ•°<code>square()</code>ã€<code>exp()</code>ã€<code>sqrt()</code>ã€‚</p>
<h4 id="å¼ é‡å’ŒNumPy"><a href="#å¼ é‡å’ŒNumPy" class="headerlink" title="å¼ é‡å’ŒNumPy"></a>å¼ é‡å’ŒNumPy</h4><p>å¼ é‡å’ŒNumPyèåˆåœ°éå¸¸å¥½ï¼šä½¿ç”¨NumPyæ•°ç»„å¯ä»¥åˆ›å»ºå¼ é‡ï¼Œå¼ é‡ä¹Ÿå¯ä»¥åˆ›å»ºNumPyæ•°ç»„ã€‚å¯ä»¥åœ¨NumPyæ•°ç»„ä¸Šè¿è¡ŒTensorFlowè¿ç®—ï¼Œä¹Ÿå¯ä»¥åœ¨å¼ é‡ä¸Šè¿è¡ŒNumPyè¿ç®—ï¼š</p>
<p><strong>NumPyé»˜è®¤ä½¿ç”¨64ä½ç²¾åº¦ï¼ŒTensorFlowé»˜è®¤ç”¨32ä½ç²¾åº¦ã€‚è¿™æ˜¯å› ä¸º32ä½ç²¾åº¦é€šå¸¸å¯¹äºç¥ç»ç½‘ç»œå°±è¶³å¤Ÿäº†ï¼Œå¦å¤–è¿è¡Œåœ°æ›´å¿«ï¼Œä½¿ç”¨çš„å†…å­˜æ›´å°‘ã€‚å› æ­¤å½“ç”¨NumPyæ•°ç»„åˆ›å»ºå¼ é‡æ—¶ï¼Œä¸€å®šè¦è®¾ç½®<code>dtype=tf.float32</code>ã€‚ã€‚ </strong></p>
<h4 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h4><p>ç±»å‹è½¬æ¢å¯¹æ€§èƒ½çš„å½±å“éå¸¸å¤§ï¼ŒTensorFlowä¸ä¼šè‡ªåŠ¨åšä»»ä½•ç±»å‹è½¬æ¢ï¼šåªæ˜¯å¦‚æœç”¨ä¸å…¼å®¹çš„ç±»å‹æ‰§è¡Œäº†å¼ é‡è¿ç®—ï¼ŒTensorFlowå°±ä¼šæŠ¥å¼‚å¸¸ã€‚<strong>ä¾‹å¦‚ï¼Œä¸èƒ½ç”¨æµ®ç‚¹å‹å¼ é‡ä¸æ•´æ•°å‹å¼ é‡ç›¸åŠ ï¼Œä¹Ÿä¸èƒ½å°†32ä½å¼ é‡ä¸64ä½å¼ é‡ç›¸åŠ ã€‚</strong></p>
<h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><p><code>tf.Tensor</code>å€¼ä¸èƒ½ä¿®æ”¹ï¼Œæ„å‘³ç€ä¸èƒ½ä½¿ç”¨å¸¸è§„å¼ é‡å®ç°ç¥ç»ç½‘ç»œçš„æƒé‡ï¼Œå› ä¸ºæƒé‡å¿…é¡»è¦èƒ½è¢«åå‘ä¼ æ’­è°ƒæ•´ã€‚å¦å¤–ï¼Œå…¶å®ƒçš„å‚æ•°ä¹Ÿéœ€è¦éšç€æ—¶é—´è°ƒæ•´ï¼ˆæ¯”å¦‚ï¼ŒåŠ¨é‡ä¼˜åŒ–å™¨è¦è·Ÿè¸ªè¿‡å»çš„æ¢¯åº¦ï¼‰ã€‚æ­¤æ—¶éœ€è¦çš„æ˜¯<code>tf.Variable</code>ï¼š</p>
<h4 id="å…¶å®ƒæ•°æ®ç»“æ„"><a href="#å…¶å®ƒæ•°æ®ç»“æ„" class="headerlink" title="å…¶å®ƒæ•°æ®ç»“æ„"></a>å…¶å®ƒæ•°æ®ç»“æ„</h4><p>ç¨€ç–å¼ é‡ï¼ˆ<code>tf.SparseTensor</code>ï¼‰<br>é«˜æ•ˆè¡¨ç¤ºå«æœ‰è®¸å¤š0çš„å¼ é‡ã€‚<code>tf.sparse</code>åŒ…å«æœ‰å¯¹ç¨€ç–å¼ é‡çš„è¿ç®—ã€‚</p>
<p>å¼ é‡æ•°ç»„ï¼ˆ<code>tf.TensorArray</code>ï¼‰<br>æ˜¯å¼ é‡çš„åˆ—è¡¨ã€‚æœ‰é»˜è®¤å›ºå®šå¤§å°ï¼Œä½†ä¹Ÿå¯ä»¥åšæˆåŠ¨æ€çš„ã€‚åˆ—è¡¨ä¸­çš„å¼ é‡å¿…é¡»å½¢çŠ¶ç›¸åŒï¼Œæ•°æ®ç±»å‹ä¹Ÿç›¸åŒã€‚</p>
<p>åµŒå¥—å¼ é‡ï¼ˆ<code>tf.RaggedTensor</code>ï¼‰<br>å¼ é‡åˆ—è¡¨çš„é™æ€åˆ—è¡¨ï¼Œå¼ é‡çš„å½¢çŠ¶å’Œæ•°æ®ç»“æ„ç›¸åŒã€‚<code>tf.ragged</code>åŒ…é‡Œæœ‰åµŒå¥—å¼ é‡çš„è¿ç®—ã€‚</p>
<p>å­—ç¬¦ä¸²å¼ é‡<br>ç±»å‹æ˜¯<code>tf.string</code>çš„å¸¸è§„å¼ é‡ï¼Œæ˜¯å­—èŠ‚ä¸²è€Œä¸æ˜¯Unicodeå­—ç¬¦ä¸²ï¼Œå› æ­¤å¦‚æœä½ ç”¨Unicodeå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ï¼ŒPython3å­—ç¬¦ä¸²cafÃ©ï¼‰åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²å¼ é‡ï¼Œå°±ä¼šè‡ªåŠ¨è¢«è½¬æ¢ä¸ºUTF-8ï¼ˆbâ€caf\xc3\xa9â€ï¼‰ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨<code>tf.int32</code>ç±»å‹çš„å¼ é‡è¡¨ç¤ºUnicodeå­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ¯é¡¹è¡¨ç¤ºä¸€ä¸ªUnicodeç ï¼ˆæ¯”å¦‚ï¼Œ<code>[99, 97, 102, 233]</code>ï¼‰ã€‚<code>tf.strings</code>åŒ…é‡Œæœ‰å­—èŠ‚ä¸²å’ŒUnicodeå­—ç¬¦ä¸²çš„è¿ç®—ï¼Œä»¥åŠäºŒè€…è½¬æ¢çš„è¿ç®—ã€‚è¦æ³¨æ„<code>tf.string</code>æ˜¯åŸå­æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„é•¿åº¦ä¸å‡ºç°åœ¨å¼ é‡çš„å½¢çŠ¶ä¸­ï¼Œä¸€æ—¦å°†å…¶è½¬æ¢æˆäº†Unicodeå¼ é‡ï¼ˆå³ï¼Œå«æœ‰Unicodeç çš„<code>tf.int32</code>å¼ é‡ï¼‰ï¼Œé•¿åº¦æ‰å‡ºç°åœ¨å½¢çŠ¶ä¸­ã€‚</p>
<p>é›†åˆ<br>è¡¨ç¤ºä¸ºå¸¸è§„å¼ é‡ï¼ˆæˆ–ç¨€ç–å¼ é‡ï¼‰ã€‚ä¾‹å¦‚<code>tf.constant([[1, 2], [3, 4]])</code>è¡¨ç¤ºä¸¤ä¸ªé›†åˆ{1, 2}å’Œ{3, 4}ã€‚é€šå¸¸ï¼Œç”¨å¼ é‡çš„æœ€åä¸€ä¸ªè½´çš„çŸ¢é‡è¡¨ç¤ºé›†åˆã€‚é›†åˆè¿ç®—å¯ä»¥ç”¨<code>tf.sets</code>åŒ…ã€‚</p>
<p>é˜Ÿåˆ—<br>ç”¨æ¥åœ¨å¤šä¸ªæ­¥éª¤ä¹‹é—´ä¿å­˜å¼ é‡ã€‚TensorFlowæä¾›äº†å¤šç§é˜Ÿåˆ—ã€‚å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é˜Ÿåˆ—FIFOQueueï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—PriorityQueueï¼Œéšæœºé˜Ÿåˆ—RandomShuffleQueueï¼Œé€šè¿‡å¡«å……çš„ä¸åŒå½¢çŠ¶çš„æ‰¹æ¬¡é¡¹é˜Ÿåˆ—PaddingFIFOQueueã€‚è¿™äº›é˜Ÿåˆ—éƒ½åœ¨<code>tf.queue</code>åŒ…ä¸­ã€‚</p>
<h3 id="è‡ªå®šä¹‰æ¨¡å‹å’Œè®­ç»ƒç®—æ³•"><a href="#è‡ªå®šä¹‰æ¨¡å‹å’Œè®­ç»ƒç®—æ³•" class="headerlink" title="è‡ªå®šä¹‰æ¨¡å‹å’Œè®­ç»ƒç®—æ³•"></a>è‡ªå®šä¹‰æ¨¡å‹å’Œè®­ç»ƒç®—æ³•</h3><h4 id="è‡ªå®šä¹‰æŸå¤±å‡½æ•°"><a href="#è‡ªå®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰æŸå¤±å‡½æ•°"></a>è‡ªå®šä¹‰æŸå¤±å‡½æ•°</h4><p>å‡æ–¹å·®å¯èƒ½å¯¹å¤§è¯¯å·®æƒ©ç½šè¿‡é‡ï¼Œå¯¼è‡´æ¨¡å‹ä¸å‡†ç¡®ã€‚</p>
<p>å‡ç»å¯¹å€¼è¯¯å·®ä¸ä¼šå¯¹å¼‚å¸¸å€¼æƒ©ç½šè¿‡é‡ï¼Œä½†è®­ç»ƒå¯èƒ½è¦æ¯”è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½æ”¶æ•›ï¼Œè®­ç»ƒæ¨¡å‹ä¹Ÿå¯èƒ½ä¸å‡†ç¡®ã€‚</p>
<p>HuberæŸå¤±ï¼šå°äºé˜ˆå€¼æ˜¯äºŒæ¬¡çš„ï¼Œå¤§äºé˜ˆå€¼æ˜¯çº¿æ€§çš„ã€‚</p>
<p>ç›®å‰å®˜æ–¹Keras APIä¸­æ²¡æœ‰HuberæŸå¤±ï¼Œä½†tf.kerasæœ‰ï¼ˆä½¿ç”¨ç±»<code>keras.losses.Huber</code>çš„å®ä¾‹ï¼‰ï¼Œä¹Ÿå¯ä»¥defå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">huber_fn</span><span class="params">(y_true, y_pred)</span>:</span></span><br><span class="line">    error = y_true - y_pred</span><br><span class="line">    is_small_error = tf.abs(error) &lt; <span class="number">1</span></span><br><span class="line">    squared_loss = tf.square(error) / <span class="number">2</span></span><br><span class="line">    linear_loss  = tf.abs(error) - <span class="number">0.5</span></span><br><span class="line">    <span class="keyword">return</span> tf.where(is_small_error, squared_loss, linear_loss)</span><br></pre></td></tr></table></figure>
<h4 id="ä¿å­˜å¹¶åŠ è½½åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„æ¨¡å‹"><a href="#ä¿å­˜å¹¶åŠ è½½åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„æ¨¡å‹" class="headerlink" title="ä¿å­˜å¹¶åŠ è½½åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„æ¨¡å‹"></a>ä¿å­˜å¹¶åŠ è½½åŒ…å«è‡ªå®šä¹‰ç»„ä»¶çš„æ¨¡å‹</h4><p>Keraså¯ä»¥ä¿å­˜å‡½æ•°åï¼Œæ‰€ä»¥å¯ä»¥ä¿å­˜å«æœ‰è‡ªå®šä¹‰æŸå¤±å‡½æ•°çš„æ¨¡å‹ã€‚å½“åŠ è½½æ¨¡å‹æ—¶ï¼Œéœ€è¦æä¾›ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸å¯ä»¥å°†å‡½æ•°åå’ŒçœŸæ­£çš„å‡½æ•°æ˜ å°„èµ·æ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = keras.models.load_model(<span class="string">"my_model_with_a_custom_loss.h5"</span>,</span><br><span class="line">                                custom_objects=&#123;<span class="string">"huber_fn"</span>: huber_fn&#125;)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå¯ä»¥äº§ç”Ÿä¸€ä¸ªå¯é…ç½®çš„æŸå¤±å‡½æ•°çš„å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_huber</span><span class="params">(threshold=<span class="number">1.0</span>)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">huber_fn</span><span class="params">(y_true, y_pred)</span>:</span></span><br><span class="line">        error = y_true - y_pred</span><br><span class="line">        is_small_error = tf.abs(error) &lt; threshold</span><br><span class="line">        squared_loss = tf.square(error) / <span class="number">2</span></span><br><span class="line">        linear_loss  = threshold * tf.abs(error) - threshold**<span class="number">2</span> / <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> tf.where(is_small_error, squared_loss, linear_loss)</span><br><span class="line">    <span class="keyword">return</span> huber_fn</span><br><span class="line">model.compile(loss=create_huber(<span class="number">2.0</span>), optimizer=<span class="string">"nadam"</span>)</span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨ä¿å­˜æ¨¡å‹æ—¶ï¼Œ<code>threshold</code>ä¸èƒ½è¢«ä¿å­˜ã€‚åœ¨åŠ è½½æ¨¡å‹æ—¶ï¼ˆæ³¨æ„ï¼Œç»™Kerasçš„å‡½æ•°åæ˜¯â€œHuber_fnâ€ï¼Œä¸æ˜¯åˆ›é€ è¿™ä¸ªå‡½æ•°çš„å‡½æ•°åï¼‰ï¼Œå¿…é¡»è¦æŒ‡å®š<code>threshold</code>çš„å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = keras.models.load_model(<span class="string">"my_model_with_a_custom_loss_threshold_2.h5"</span>,</span><br><span class="line">                                custom_objects=&#123;<span class="string">"huber_fn"</span>: create_huber(<span class="number">2.0</span>)&#125;)</span><br></pre></td></tr></table></figure>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª<code>keras.losses.Loss</code>ç±»çš„å­ç±»ï¼Œç„¶åå®ç°<code>get_config()</code>æ–¹æ³•</p>
<blockquote>
<p>Keras APIç›®å‰åªä½¿ç”¨å­ç±»æ¥å®šä¹‰å±‚ã€æ¨¡å‹ã€è°ƒå›å’Œæ­£åˆ™å™¨ã€‚å¦‚æœä½¿ç”¨å­ç±»åˆ›å»ºå…¶å®ƒç»„ä»¶ï¼ˆæ¯”å¦‚æŸå¤±ã€æŒ‡æ ‡ã€åˆå§‹åŒ–å™¨æˆ–çº¦æŸï¼‰ï¼Œå®ƒä»¬ä¸èƒ½è¿ç§»åˆ°å…¶å®ƒKeraså®ç°ä¸Šã€‚</p>
</blockquote>
<h4 id="è‡ªå®šä¹‰æ¿€æ´»å‡½æ•°ã€åˆå§‹åŒ–å™¨ã€æ­£åˆ™å™¨å’Œçº¦æŸ"><a href="#è‡ªå®šä¹‰æ¿€æ´»å‡½æ•°ã€åˆå§‹åŒ–å™¨ã€æ­£åˆ™å™¨å’Œçº¦æŸ" class="headerlink" title="è‡ªå®šä¹‰æ¿€æ´»å‡½æ•°ã€åˆå§‹åŒ–å™¨ã€æ­£åˆ™å™¨å’Œçº¦æŸ"></a>è‡ªå®šä¹‰æ¿€æ´»å‡½æ•°ã€åˆå§‹åŒ–å™¨ã€æ­£åˆ™å™¨å’Œçº¦æŸ</h4><p>å¦‚æœå‡½æ•°æœ‰éœ€è¦è¿åŒæ¨¡å‹ä¸€èµ·ä¿å­˜çš„è¶…å‚æ•°ï¼Œéœ€è¦å¯¹ç›¸åº”çš„ç±»åšå­</p>
<h4 id="è‡ªå®šä¹‰æŒ‡æ ‡"><a href="#è‡ªå®šä¹‰æŒ‡æ ‡" class="headerlink" title="è‡ªå®šä¹‰æŒ‡æ ‡"></a>è‡ªå®šä¹‰æŒ‡æ ‡</h4><p>æŸå¤±å’ŒæŒ‡æ ‡çš„æ¦‚å¿µæ˜¯ä¸ä¸€æ ·çš„ï¼šæ¢¯åº¦ä¸‹é™ä½¿ç”¨æŸå¤±ï¼ˆæ¯”å¦‚äº¤å‰ç†µæŸå¤±ï¼‰æ¥è®­ç»ƒæ¨¡å‹ï¼Œå› æ­¤æŸå¤±å¿…é¡»æ˜¯å¯å¾®åˆ†çš„ï¼ˆè‡³å°‘æ˜¯åœ¨è¯„ä¼°ç‚¹å¯å¾®åˆ†ï¼‰ï¼Œæ¢¯åº¦ä¸èƒ½åœ¨æ‰€æœ‰åœ°æ–¹éƒ½æ˜¯0ã€‚å¦å¤–ï¼Œå°±ç®—æŸå¤±æ¯”è¾ƒéš¾è§£é‡Šä¹Ÿæ²¡æœ‰å…³ç³»ã€‚ç›¸åçš„ï¼ŒæŒ‡æ ‡ï¼ˆæ¯”å¦‚å‡†ç¡®ç‡ï¼‰æ˜¯ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„ï¼šæŒ‡æ ‡çš„è§£é‡Šæ€§ä¸€å®šè¦å¥½ï¼Œå¯ä»¥æ˜¯ä¸å¯å¾®åˆ†çš„ï¼Œæˆ–è€…å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹çš„æ¢¯åº¦éƒ½æ˜¯0ã€‚</p>
<p>å‡è®¾æ¨¡å‹åœ¨ç¬¬ä¸€ä¸ªæ‰¹æ¬¡åšäº†5ä¸ªæ­£é¢„æµ‹ï¼Œå…¶ä¸­4ä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå‡†ç¡®ç‡å°±æ˜¯80%ã€‚å†å‡è®¾æ¨¡å‹åœ¨ç¬¬äºŒä¸ªæ‰¹æ¬¡åšäº†3æ¬¡æ­£é¢„æµ‹ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªé¢„æµ‹å¯¹ï¼Œåˆ™å‡†ç¡®ç‡æ˜¯0%ã€‚å¦‚æœå¯¹è¿™ä¸¤ä¸ªå‡†ç¡®ç‡åšå¹³å‡ï¼Œåˆ™å¹³å‡å€¼æ˜¯40%ã€‚ä½†å®ƒä¸æ˜¯æ¨¡å‹åœ¨ä¸¤ä¸ªæ‰¹æ¬¡ä¸Šçš„å‡†ç¡®ç‡ï¼äº‹å®ä¸Šï¼ŒçœŸæ­£å€¼æ€»å…±æœ‰4ä¸ªï¼Œæ­£é¢„æµ‹æœ‰8ä¸ªï¼Œæ•´ä½“çš„å‡†ç¡®ç‡æ˜¯50%ã€‚</p>
<p><strong>ä¸€ä¸ªæ‰¹æ¬¡æ¥ä¸€ä¸ªæ‰¹æ¬¡ï¼Œé€æ¬¡æ›´æ–°çš„å«åšæµå¼æŒ‡æ ‡ï¼ˆæˆ–è€…é™æ€æŒ‡æ ‡ï¼‰ã€‚</strong></p>
<h4 id="è‡ªå®šä¹‰å±‚"><a href="#è‡ªå®šä¹‰å±‚" class="headerlink" title="è‡ªå®šä¹‰å±‚"></a>è‡ªå®šä¹‰å±‚</h4><p>æ¯”å¦‚ï¼Œå¦‚æœæ¨¡å‹çš„å±‚é¡ºåºæ˜¯Aã€Bã€Cã€Aã€Bã€Cã€Aã€Bã€Cï¼Œåˆ™å®Œå…¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«Aã€Bã€Cçš„è‡ªå®šä¹‰å±‚Dï¼Œæ¨¡å‹å°±å¯ä»¥ç®€åŒ–ä¸ºDã€Dã€Dã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•æƒé‡çš„è‡ªå®šä¹‰å±‚ï¼Œå°†å…¶åŒ…è£…è¿›<code>keras.layers.Lambda</code>å±‚ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„å±‚ä¼šå¯¹è¾“å…¥åšæŒ‡æ•°è¿ç®—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">exponential_layer = keras.layers.Lambda(<span class="keyword">lambda</span> x: tf.exp(x))</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºè‡ªå®šä¹‰çŠ¶æ€å±‚ï¼ˆå³ï¼Œæœ‰æƒé‡çš„å±‚ï¼‰ï¼Œéœ€è¦åˆ›å»º<code>keras.layers.Layer</code>ç±»çš„å­ç±»ã€‚ä¸‹é¢çš„ç±»å®ç°äº†ä¸€ä¸ªç´§å¯†å±‚çš„ç®€åŒ–ç‰ˆæœ¬ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDense</span><span class="params">(keras.layers.Layer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, units, activation=None, **kwargs)</span>:</span></span><br><span class="line">        super().__init__(**kwargs)</span><br><span class="line">        self.units = units</span><br><span class="line">        self.activation = keras.activations.get(activation)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, batch_input_shape)</span>:</span></span><br><span class="line">        self.kernel = self.add_weight(</span><br><span class="line">            name=<span class="string">"kernel"</span>, shape=[batch_input_shape[<span class="number">-1</span>], self.units],</span><br><span class="line">            initializer=<span class="string">"glorot_normal"</span>)</span><br><span class="line">        self.bias = self.add_weight(</span><br><span class="line">            name=<span class="string">"bias"</span>, shape=[self.units], initializer=<span class="string">"zeros"</span>)</span><br><span class="line">        super().build(batch_input_shape) <span class="comment"># must be at the end</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.activation(X @ self.kernel + self.bias)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compute_output_shape</span><span class="params">(self, batch_input_shape)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> tf.TensorShape(batch_input_shape.as_list()[:<span class="number">-1</span>] + [self.units])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_config</span><span class="params">(self)</span>:</span></span><br><span class="line">        base_config = super().get_config()</span><br><span class="line">        <span class="keyword">return</span> &#123;**base_config, <span class="string">"units"</span>: self.units,</span><br><span class="line">                <span class="string">"activation"</span>: keras.activations.serialize(self.activation)&#125;</span><br></pre></td></tr></table></figure>
<p>è¦åˆ›å»ºä¸€ä¸ªæœ‰å¤šä¸ªè¾“å…¥ï¼ˆæ¯”å¦‚<code>Concatenate</code>ï¼‰çš„å±‚ï¼Œ<code>call()</code>æ–¹æ³•çš„å‚æ•°åº”è¯¥æ˜¯åŒ…å«æ‰€æœ‰è¾“å…¥çš„å…ƒç»„ã€‚ç›¸ä¼¼çš„ï¼Œ<code>compute_output_shape()</code>æ–¹æ³•çš„å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªåŒ…å«æ¯ä¸ªè¾“å…¥çš„æ‰¹æ¬¡å½¢çŠ¶çš„å…ƒç»„ã€‚è¦åˆ›å»ºä¸€ä¸ªæœ‰å¤šè¾“å‡ºçš„å±‚ï¼Œ<code>call()</code>æ–¹æ³•è¦è¿”å›è¾“å‡ºçš„åˆ—è¡¨ï¼Œ<code>compute_output_shape()</code>æ–¹æ³•è¦è¿”å›æ‰¹æ¬¡è¾“å‡ºå½¢çŠ¶çš„åˆ—è¡¨ï¼ˆæ¯ä¸ªè¾“å‡ºä¸€ä¸ªå½¢çŠ¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å±‚æœ‰ä¸¤ä¸ªè¾“å…¥å’Œä¸‰ä¸ªè¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMultiLayer</span><span class="params">(keras.layers.Layer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        X1, X2 = X</span><br><span class="line">        <span class="keyword">return</span> [X1 + X2, X1 * X2, X1 / X2]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compute_output_shape</span><span class="params">(self, batch_input_shape)</span>:</span></span><br><span class="line">        b1, b2 = batch_input_shape</span><br><span class="line">        <span class="keyword">return</span> [b1, b1, b1] <span class="comment"># å¯èƒ½éœ€è¦å¤„ç†å¹¿æ’­è§„åˆ™</span></span><br></pre></td></tr></table></figure>
<p>åªèƒ½ä½¿ç”¨Functionalå’ŒSubclassing APIï¼ŒSequential APIä¸æˆï¼ˆåªèƒ½ä½¿ç”¨å•è¾“å…¥å’Œå•è¾“å‡ºçš„å±‚ï¼‰ã€‚</p>
<p>å¦‚æœå±‚éœ€è¦åœ¨è®­ç»ƒå’Œæµ‹è¯•æ—¶æœ‰ä¸åŒçš„è¡Œä¸ºï¼ˆæ¯”å¦‚ï¼Œå¦‚æœä½¿ç”¨<code>Dropout</code> æˆ– <code>BatchNormalization</code>å±‚ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»ç»™<code>call()</code>æ–¹æ³•åŠ ä¸Š<code>training</code>å‚æ•°ï¼Œç”¨è¿™ä¸ªå‚æ•°ç¡®å®šè¯¥åšä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåœ¨è®­ç»ƒä¸­ï¼ˆä¸ºäº†æ­£åˆ™ï¼‰æ·»åŠ é«˜æ–¯å™ªéŸ³çš„å±‚ï¼Œä½†ä¸æ”¹åŠ¨è®­ç»ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyGaussianNoise</span><span class="params">(keras.layers.Layer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, stddev, **kwargs)</span>:</span></span><br><span class="line">        super().__init__(**kwargs)</span><br><span class="line">        self.stddev = stddev</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, X, training=None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> training:</span><br><span class="line">            noise = tf.random.normal(tf.shape(X), stddev=self.stddev)</span><br><span class="line">            <span class="keyword">return</span> X + noise</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> X</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compute_output_shape</span><span class="params">(self, batch_input_shape)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> batch_input_shape</span><br></pre></td></tr></table></figure>
<h4 id="è‡ªå®šä¹‰æ¨¡å‹"><a href="#è‡ªå®šä¹‰æ¨¡å‹" class="headerlink" title="è‡ªå®šä¹‰æ¨¡å‹"></a>è‡ªå®šä¹‰æ¨¡å‹</h4><p> è‡ªå®šä¹‰æ¨¡å‹æ¡ˆä¾‹ï¼šåŒ…å«æ®‹å·®å—å±‚ï¼Œæ®‹å—å±‚å«æœ‰è·³è¿æ¥</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-647e362f4abb081e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><strong><code>Model</code>ç±»æ˜¯<code>Layer</code>ç±»çš„å­ç±»</strong></p>
<h4 id="åŸºäºæ¨¡å‹å†…éƒ¨çš„æŸå¤±å’ŒæŒ‡æ ‡"><a href="#åŸºäºæ¨¡å‹å†…éƒ¨çš„æŸå¤±å’ŒæŒ‡æ ‡" class="headerlink" title="åŸºäºæ¨¡å‹å†…éƒ¨çš„æŸå¤±å’ŒæŒ‡æ ‡"></a>åŸºäºæ¨¡å‹å†…éƒ¨çš„æŸå¤±å’ŒæŒ‡æ ‡</h4><p>å‰é¢çš„è‡ªå®šä¹‰æŸå¤±å’ŒæŒ‡æ ‡éƒ½æ˜¯åŸºäºæ ‡ç­¾å’Œé¢„æµ‹ï¼ˆæˆ–è€…è¿˜æœ‰æ ·æœ¬æƒé‡ï¼‰ã€‚æœ‰æ—¶ï¼Œéœ€è¦åŸºäºæ¨¡å‹çš„å…¶å®ƒéƒ¨åˆ†å®šä¹‰æŸå¤±ï¼Œæ¯”å¦‚éšè—å±‚çš„æƒé‡æˆ–æ¿€æ´»å‡½æ•°ã€‚è¾¾åˆ°æ­£åˆ™çš„ç›®çš„ï¼Œæˆ–ç›‘ç£æ¨¡å‹çš„å†…éƒ¨ã€‚</p>
<p>è¦åŸºäºæ¨¡å‹å†…éƒ¨è‡ªå®šä¹‰æŸå¤±ï¼Œéœ€è¦å…ˆåšåŸºäºè¿™äº›ç»„ä»¶çš„è®¡ç®—ï¼Œç„¶åå°†ç»“æœä¼ é€’ç»™<code>add_loss()</code>æ–¹æ³•ã€‚</p>
<h4 id="è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯"><a href="#è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯" class="headerlink" title="è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯"></a>è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯</h4><h5 id="ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†è®¡ç®—æ¢¯åº¦"><a href="#ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†è®¡ç®—æ¢¯åº¦" class="headerlink" title="ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†è®¡ç®—æ¢¯åº¦"></a>ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†è®¡ç®—æ¢¯åº¦</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(w1, w2)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span> * w1 ** <span class="number">2</span> + <span class="number">2</span> * w1 * w2</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°å¯¹<code>w1</code>çš„åå¯¼æ˜¯<code>6 * w1 + 2 * w2</code>ï¼Œè¿˜èƒ½ç®—å‡ºå®ƒå¯¹<code>w2</code>çš„åå¯¼æ˜¯<code>2 * w1</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨ç‚¹<code>(w1, w2) = (5, 3)</code>ï¼Œè¿™ä¸¤ä¸ªåå¯¼æ•°åˆ†åˆ«æ˜¯36å’Œ10ï¼Œåœ¨è¿™ä¸ªç‚¹çš„æ¢¯åº¦çŸ¢é‡å°±æ˜¯ï¼ˆ36, 10ï¼‰ã€‚ä½†å¯¹äºç¥ç»ç½‘ç»œæ¥è¯´ï¼Œå‡½æ•°ä¼šå¤æ‚å¾—å¤šï¼Œå¯èƒ½ä¼šæœ‰ä¸Šä¸‡ä¸ªå‚æ•°ï¼Œç”¨æ‰‹ç®—åå¯¼å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ä»»åŠ¡ã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯è®¡ç®—æ¯ä¸ªåå¯¼çš„å¤§æ¦‚å€¼ï¼Œé€šè¿‡è°ƒèŠ‚å‚æ•°ï¼ŒæŸ¥çœ‹è¾“å‡ºçš„å˜åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>w1, w2 = <span class="number">5</span>, <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>eps = <span class="number">1e-6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(f(w1 + eps, w2) - f(w1, w2)) / eps</span><br><span class="line"><span class="number">36.000003007075065</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(f(w1, w2 + eps) - f(w1, w2)) / eps</span><br><span class="line"><span class="number">10.000000003174137</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°æ–¹æ³•å¾ˆå®¹æ˜“å®ç°ï¼Œä½†åªæ˜¯å¤§æ¦‚ã€‚å¹¶ä¸”ï¼Œéœ€è¦å¯¹æ¯ä¸ªå‚æ•°è‡³å°‘è¦è°ƒç”¨ä¸€æ¬¡<code>f()</code>ï¼ˆä¸æ˜¯è‡³å°‘ä¸¤æ¬¡ï¼Œå› ä¸ºå¯ä»¥åªè®¡ç®—ä¸€æ¬¡<code>f(w1, w2)</code>ï¼‰ã€‚è¿™æ ·ï¼Œå¯¹äºå¤§ç¥ç»ç½‘ç»œï¼Œå°±ä¸æ€ä¹ˆå¯æ§ã€‚éœ€è¦é€šè¿‡TensorFlowå®ç°è‡ªåŠ¨å¾®åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w1, w2 = tf.Variable(<span class="number">5.</span>), tf.Variable(<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">    z = f(w1, w2)</span><br><span class="line"><span class="comment"># åˆ›å»ºäº†tf.GradientTapeè®°å½•å™¨ï¼Œèƒ½è‡ªåŠ¨è®°å½•å˜é‡çš„æ¯ä¸ªæ“ä½œï¼Œ</span></span><br><span class="line">gradients = tape.gradient(z, [w1, w2])</span><br></pre></td></tr></table></figure>
<p><code>gradient()</code>æ–¹æ³•åªé€†å‘ç®—äº†ä¸€æ¬¡ï¼Œæ— è®ºæœ‰å¤šå°‘ä¸ªå˜é‡ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚</p>
<h4 id="TensorFlowçš„å‡½æ•°å’Œå›¾"><a href="#TensorFlowçš„å‡½æ•°å’Œå›¾" class="headerlink" title="TensorFlowçš„å‡½æ•°å’Œå›¾"></a>TensorFlowçš„å‡½æ•°å’Œå›¾</h4><p>ä½¿ç”¨TensorFlowçš„è‡ªåŠ¨å›¾ç”Ÿæˆç‰¹å¾ï¼š</p>
<p><code>tf.function()</code>åœ¨åº•å±‚åˆ†æäº†<code>cube()</code>å‡½æ•°çš„è®¡ç®—ï¼Œç„¶åç”Ÿæˆäº†ä¸€ä¸ªç­‰ä»·çš„è®¡ç®—å›¾ï¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cube</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">3</span></span><br><span class="line"></span><br><span class="line">tf_cube = tf.function(cube)</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>tf.function</code>ä½œä¸ºè£…é¥°å™¨ï¼Œæ›´å¸¸è§ä¸€äº›ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@tf.function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tf_cube</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>TensorFlowä¼˜åŒ–äº†è®¡ç®—å›¾ï¼Œåˆ æ‰äº†æ²¡ç”¨çš„èŠ‚ç‚¹ï¼Œç®€åŒ–äº†è¡¨è¾¾å¼ï¼ˆæ¯”å¦‚ï¼Œ1 + 2ä¼šæ›¿æ¢ä¸º3ï¼‰ã€‚å½“ä¼˜åŒ–å¥½çš„è®¡ç®—å›¾å‡†å¤‡å¥½ä¹‹åï¼ŒTFå‡½æ•°å¯ä»¥åœ¨å›¾ä¸­ï¼ŒæŒ‰åˆé€‚çš„é¡ºåºé«˜æ•ˆæ‰§è¡Œè¿ç®—ï¼ˆè¯¥å¹¶è¡Œçš„æ—¶å€™å°±å¹¶è¡Œï¼‰ã€‚ä½œä¸ºç»“æœï¼ŒTFå‡½æ•°æ¯”æ™®é€šçš„Pythonå‡½æ•°å¿«çš„åšï¼Œç‰¹åˆ«æ˜¯åœ¨åšå¤æ‚è®¡ç®—æ—¶ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæ ¹æœ¬æ²¡å¿…è¦çŸ¥é“åº•å±‚åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¦‚æœéœ€è¦å¯¹Pythonå‡½æ•°åŠ é€Ÿï¼Œå°†å…¶è½¬æ¢ä¸ºTFå‡½æ•°å°±è¡Œã€‚</p>
<h5 id="è‡ªåŠ¨å›¾å’Œè·Ÿè¸ª"><a href="#è‡ªåŠ¨å›¾å’Œè·Ÿè¸ª" class="headerlink" title="è‡ªåŠ¨å›¾å’Œè·Ÿè¸ª"></a>è‡ªåŠ¨å›¾å’Œè·Ÿè¸ª</h5><p>TensorFlowæ˜¯å…ˆåˆ†æPythonå‡½æ•°æºç ï¼Œå¾—å‡ºæ‰€æœ‰çš„æ•°æ®æµæ§åˆ¶è¯­å¥ï¼Œæ¯”å¦‚forå¾ªç¯ï¼Œwhileå¾ªç¯ï¼Œifæ¡ä»¶ï¼Œè¿˜æœ‰breakã€continueã€returnã€‚è¿™ä¸ªç¬¬ä¸€æ­¥è¢«ç§°ä¸º<strong>è‡ªåŠ¨å›¾ï¼ˆAutoGraphï¼‰</strong>ã€‚åˆ†æå®Œæºç ä¹‹åï¼Œè‡ªåŠ¨å›¾ä¸­çš„æ‰€æœ‰æ§åˆ¶æµè¯­å¥éƒ½è¢«æ›¿æ¢æˆç›¸åº”çš„TensorFlowæ–¹æ³•ï¼Œæ¯”å¦‚<code>tf.while_loop()</code>ï¼ˆwhileå¾ªç¯ï¼‰å’Œ<code>tf.cond()</code>ï¼ˆifåˆ¤æ–­ï¼‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cd0d53808f2cf8a8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ç„¶åï¼ŒTensorFlowè°ƒç”¨è¿™ä¸ªâ€œå‡çº§â€æ–¹æ³•ï¼Œä½†æ²¡æœ‰å‘å…¶ä¼ é€’å‚æ•°ï¼Œè€Œæ˜¯ä¼ é€’ä¸€ä¸ªç¬¦å·å¼ é‡ï¼ˆsymbolic tensorï¼‰â€”â€”æ²¡æœ‰ä»»ä½•çœŸå®å€¼çš„å¼ é‡ï¼Œåªæœ‰åå­—ã€æ•°æ®ç±»å‹å’Œå½¢çŠ¶ã€‚</p>
<p>å‡½æ•°ä¼šä»¥å›¾æ¨¡å¼è¿è¡Œï¼Œæ„å‘³ç€æ¯ä¸ªTensorFlowè¿ç®—ä¼šåœ¨å›¾ä¸­æ·»åŠ ä¸€ä¸ªè¡¨ç¤ºè‡ªèº«çš„èŠ‚ç‚¹ï¼Œç„¶åè¾“å‡º<code>tensor(s)</code>ï¼ˆä¸å¸¸è§„æ¨¡å¼ç›¸å¯¹ï¼Œè¿™è¢«ç§°ä¸ºåŠ¨æ€å›¾æ‰§è¡Œï¼Œæˆ–åŠ¨æ€æ¨¡å¼ï¼‰ã€‚åœ¨å›¾æ¨¡å¼ä¸­ï¼ŒTFè¿ç®—ä¸åšä»»ä½•è®¡ç®—ã€‚æœ€åçš„å›¾æ˜¯è·Ÿè¸ªä¸­ç”Ÿæˆçš„ã€‚èŠ‚ç‚¹è¡¨ç¤ºè¿ç®—ï¼Œç®­å¤´è¡¨ç¤ºå¼ é‡ã€‚</p>
<h5 id="TF-å‡½æ•°è§„åˆ™"><a href="#TF-å‡½æ•°è§„åˆ™" class="headerlink" title="TF å‡½æ•°è§„åˆ™"></a>TF å‡½æ•°è§„åˆ™</h5><p>å¤§å¤šæ•°æ—¶å€™ï¼Œå°†Pythonå‡½æ•°è½¬æ¢ä¸ºTFå‡½æ•°æ˜¯çç¢çš„ï¼šè¦ç”¨<code>@tf.function</code>è£…é¥°ï¼Œæˆ–è®©Kerasæ¥è´Ÿè´£ã€‚ä½†æ˜¯ï¼Œä¹Ÿæœ‰ä¸€äº›è§„åˆ™ï¼š</p>
<blockquote>
<ul>
<li>è°ƒç”¨ä»»ä½•å¤–éƒ¨åº“ï¼ŒåŒ…æ‹¬NumPyï¼Œç”šè‡³æ˜¯æ ‡å‡†åº“ï¼Œè°ƒç”¨åªä¼šåœ¨è·Ÿè¸ªä¸­è¿è¡Œï¼Œä¸ä¼šæ˜¯å›¾çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li>å¯ä»¥è°ƒç”¨å…¶å®ƒPythonå‡½æ•°æˆ–TFå‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬è¦éµå®ˆç›¸åŒçš„è§„åˆ™ï¼Œå› ä¸ºTensorFlowä¼šåœ¨è®¡ç®—å›¾ä¸­è®°å½•å®ƒä»¬çš„è¿ç®—ã€‚æ³¨æ„ï¼Œå…¶å®ƒå‡½æ•°ä¸éœ€è¦ç”¨<code>@tf.function</code>è£…é¥°ã€‚</li>
<li>å¦‚æœå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªTensorFlowå˜é‡ï¼ˆæˆ–ä»»æ„å…¶å®ƒé™æ€TensorFlowå¯¹è±¡ï¼Œæ¯”å¦‚æ•°æ®é›†æˆ–é˜Ÿåˆ—ï¼‰ï¼Œå®ƒå¿…é¡»åœ¨ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶åˆ›å»ºTFå‡½æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¼‚å¸¸ã€‚é€šå¸¸ï¼Œæœ€å¥½åœ¨TFå‡½æ•°çš„å¤–éƒ¨åˆ›å»ºå˜é‡ï¼ˆæ¯”å¦‚åœ¨è‡ªå®šä¹‰å±‚çš„<code>build()</code>æ–¹æ³•ä¸­ï¼‰ã€‚å¦‚æœä½ æƒ³å°†ä¸€ä¸ªæ–°å€¼èµ‹å€¼ç»™å˜é‡ï¼Œè¦ç¡®ä¿è°ƒç”¨å®ƒçš„<code>assign()</code>æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>=</code>ã€‚</li>
<li>Pythonçš„æºç å¯ä»¥è¢«TensorFlowä½¿ç”¨ã€‚å¦‚æœæºç ç”¨ä¸äº†ï¼ˆæ¯”å¦‚ï¼Œå¦‚æœæ˜¯åœ¨Python shellä¸­å®šä¹‰å‡½æ•°ï¼Œæºç å°±è®¿é—®ä¸äº†ï¼Œæˆ–è€…éƒ¨ç½²çš„æ˜¯ç¼–è¯‘æ–‡ä»¶<code>*.pyc</code>ï¼‰ï¼Œå›¾çš„ç”Ÿæˆå°±ä¼šå¤±è´¥æˆ–è€…ç¼ºå¤±åŠŸèƒ½ã€‚</li>
<li>TensorFlowåªèƒ½æ•è·è¿­ä»£å¼ é‡æˆ–æ•°æ®é›†çš„forå¾ªç¯ã€‚å› æ­¤è¦ç¡®ä¿ä½¿ç”¨<code>for i in tf.range(x)</code>ï¼Œè€Œä¸æ˜¯<code>for i in range(x)</code>ï¼Œå¦åˆ™å¾ªç¯ä¸èƒ½åœ¨å›¾ä¸­æ•è·ï¼Œè€Œæ˜¯åœ¨ä¼šåœ¨è¿½è¸ªä¸­è¿è¡Œã€‚</li>
<li>å‡ºäºæ€§èƒ½åŸå› ï¼Œæœ€å¥½ä½¿ç”¨çŸ¢é‡åŒ–çš„å®ç°æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¾ªç¯ã€‚</li>
</ul>
</blockquote>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å¦‚ä½•ç”¨ä¸€å¥è¯æè¿°TensorFlowï¼Ÿå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿèƒ½åˆ—ä¸¾å‡ºå…¶å®ƒæµè¡Œçš„æ·±åº¦å­¦ä¹ åº“å—ï¼Ÿ</p>
<blockquote>
<p>TensorFlowæ˜¯ç”±è°·æ­Œå¤§è„‘å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªå¼ºå¤§çš„å¼€æºæ•°å€¼è®¡ç®—åº“ï¼Œé€‚åˆåšå’Œå¾®è°ƒå¤§è§„æ¨¡æœºå™¨å­¦ä¹ ã€‚</p>
<p>ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>TensorFlowçš„æ ¸å¿ƒä¸NumPyå¾ˆåƒï¼Œä½†TensorFlowæ”¯æŒGPUï¼›</li>
<li>TensorFlowæ”¯æŒï¼ˆå¤šè®¾å¤‡å’ŒæœåŠ¡å™¨ï¼‰åˆ†å¸ƒå¼è®¡ç®—ï¼›</li>
<li>TensorFlowä½¿ç”¨äº†å³æ—¶JITç¼–è¯‘å™¨å¯¹è®¡ç®—é€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨ä¼˜åŒ–ã€‚ç¼–è¯‘å™¨çš„å·¥ä½œæ˜¯ä»Pythonå‡½æ•°æå–å‡ºè®¡ç®—å›¾ï¼Œç„¶åå¯¹è®¡ç®—å›¾ä¼˜åŒ–ï¼ˆæ¯”å¦‚å‰ªåˆ‡æ— ç”¨çš„èŠ‚ç‚¹ï¼‰ï¼Œæœ€åé«˜æ•ˆè¿è¡Œï¼ˆæ¯”å¦‚è‡ªåŠ¨å¹¶è¡Œè¿è¡Œç‹¬ç«‹ä»»åŠ¡ï¼‰ï¼›</li>
<li>è®¡ç®—å›¾å¯ä»¥å¯¼å‡ºä¸ºè¿ç§»å½¢å¼ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸€ä¸ªç¯å¢ƒä¸­è®­ç»ƒä¸€ä¸ªTensorFlowæ¨¡å‹ï¼ˆæ¯”å¦‚ä½¿ç”¨Pythonæˆ–Linuxï¼‰ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç¯å¢ƒä¸­è¿è¡Œï¼ˆæ¯”å¦‚åœ¨å®‰å“è®¾å¤‡ä¸Šç”¨Javaè¿è¡Œï¼‰ï¼›</li>
<li>TensorFlowå®ç°äº†<strong>è‡ªåŠ¨å¾®åˆ†</strong> ï¼Œå¹¶æä¾›äº†ä¸€äº›é«˜æ•ˆçš„ä¼˜åŒ–å™¨ï¼Œæ¯”å¦‚RMSPropå’ŒNAdamï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“æœ€å°åŒ–å„ç§æŸå¤±å‡½æ•°ã€‚</li>
</ul>
<p>å…¶ä»–æµå½¢çš„æ·±åº¦å­¦ä¹ åº“æœ‰ï¼šPyTorchï¼ˆFacebookï¼‰Theanoï¼ŒCaffe2ï¼ŒMXNet, Microsoft Cognitive Toolkit</p>
</blockquote>
</li>
<li><p>TensorFlowæ˜¯NumPyçš„ç®€å•æ›¿æ¢å—ï¼ŸäºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯</p>
<ul>
<li>TensorFlowå’ŒNumPyçš„å‡½æ•°åå¹¶ä¸å®Œå…¨ç›¸åŒï¼Œæœ¬è´¨æ˜¯å› ä¸ºå‡½æ•°åšå¾—æ“ä½œä¸åŒï¼ˆNumPyä¸­å±æ€§Tå’ŒTensorFlowä¸­çš„tf.transpose()ï¼‰</li>
<li>å¤§éƒ¨åˆ†TFæ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆé™¤äº†å˜é‡è¿™ä¸€ç±»ï¼‰ï¼Œä½†Numpyå¯å˜</li>
</ul>
</blockquote>
</li>
<li><p><code>tf.range(10)</code>å’Œ<code>tf.constant(np.arange(10))</code>èƒ½æ‹¿åˆ°ç›¸åŒçš„ç»“æœå—ï¼Ÿ</p>
<blockquote>
<p>åŸºæœ¬ä¸€è‡´</p>
<p>å‰è€…32ä½æ•´æ•°ï¼ˆTensorFlowä¸­é»˜è®¤ï¼‰ï¼Œåè€…64ä½æ•´æ•°ï¼ˆNumPyé»˜è®¤64ä½ï¼‰</p>
</blockquote>
</li>
<li><p>åˆ—ä¸¾å‡ºé™¤äº†å¸¸è§„å¼ é‡ä¹‹å¤–ï¼ŒTensorFlowçš„å…¶å®ƒå…­ç§æ•°æ®ç»“æ„ï¼Ÿ</p>
<blockquote>
<p>ç¨€ç–å¼ é‡ï¼Œå¼ é‡æ•°ç»„ï¼ŒåµŒå¥—å¼ é‡ï¼Œå­—ç¬¦ä¸²å¼ é‡ï¼Œé›†åˆå’Œé˜Ÿåˆ—</p>
</blockquote>
</li>
<li><p>å¯ä»¥é€šè¿‡å‡½æ•°æˆ–åˆ›å»º<code>keras.losses.Loss</code>çš„å­ç±»æ¥è‡ªå®šä¹‰æŸå¤±å‡½æ•°ã€‚ä¸¤ç§æ–¹æ³•å„åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ</p>
<blockquote>
<p>å½“è‡ªå®šä¹‰æŸå¤±å‡½æ•°éœ€è¦è¶…å‚æ•°æ—¶ï¼Œéœ€è¦åˆ›å»º<code>keras.losses.Loss</code>çš„å­ç±»</p>
</blockquote>
</li>
<li><p>ç›¸ä¼¼çš„ï¼Œè‡ªå®šä¹‰æŒ‡æ ‡å¯ä»¥é€šè¿‡å®šä¹‰å‡½æ•°æˆ–åˆ›å»º<code>keras.metrics.Metric</code>çš„å­ç±»ã€‚ä¸¤ç§æ–¹æ³•å„åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ</p>
<blockquote>
<p>å½“è‡ªå®šä¹‰æŒ‡æ ‡éœ€è¦è¶…å‚æ•°æ—¶ï¼Œéœ€è¦åˆ›å»º<code>keras.metrics.Metric</code>çš„å­ç±»</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™åº”è¯¥åˆ›å»ºè‡ªå®šä¹‰å±‚ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰æ¨¡å‹ï¼Ÿ</p>
<blockquote>
<p>å½“éœ€è¦è‡ªå®šä¹‰æ¨¡å‹å†…éƒ¨ç»„ä»¶æ—¶ï¼Œæ¯”å¦‚é‡å¤ä½¿ç”¨å±‚çš„æ—¶å€™éœ€è¦è‡ªå®šä¹‰å±‚ã€‚</p>
<p>è‡ªå®šä¹‰å±‚æ˜¯<code>Layer</code>ç±»çš„å­ç±»ï¼Œè‡ªå®šä¹‰æ¨¡å‹æ˜¯<code>Model</code>ç±»çš„å­ç±»ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„è®­ç»ƒå¾ªç¯ï¼Ÿ</p>
<blockquote>
<p>åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œ<code>fit()</code>æ–¹æ³•å¯èƒ½ä¸å¤Ÿçµæ´»ã€‚æ¯”å¦‚åœ¨ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­å¯¹ä¸åŒçš„å±‚ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–å™¨ï¼ŒWide &amp; Deepè®ºæ–‡ä½¿ç”¨äº†ä¸¤ä¸ªä¼˜åŒ–å™¨ï¼šä¸€ä¸ªç”¨äºå®½è·¯çº¿ï¼Œä¸€ä¸ªç”¨äºæ·±è·¯çº¿ã€‚</p>
</blockquote>
</li>
<li><p>è‡ªå®šä¹‰Kerasç»„ä»¶å¯ä»¥åŒ…å«ä»»æ„Pythonä»£ç å—ï¼Œæˆ–è€…Pythonä»£ç éœ€è¦è½¬æ¢ä¸ºTFå‡½æ•°å—ï¼Ÿ</p>
<blockquote>
<p>å¯ä»¥åœ¨<code>tf.py_function()</code>è¿ç®—ä¸­åŒ…è£…ä»»æ„çš„Pythonä»£ç ï¼Œä½†è¿™ä¹ˆåšçš„è¯ä¼šä½¿æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºTensorFlowä¸èƒ½åšä»»ä½•å›¾ä¼˜åŒ–ã€‚</p>
<p>ä¸ä¸€å®šéœ€è¦æŠŠPythonä»£ç è½¬åŒ–ä¸ºTFå‡½æ•°ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨æ„å»ºå±‚æˆ–è€…æ¨¡å‹çš„æ—¶å€™è®¾ç½® <code>dynamic=True</code></li>
<li>æˆ–è€…ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™è®¾ç½® <code>run_eagerly=True</code></li>
</ul>
</blockquote>
</li>
<li><p>å¦‚æœæƒ³è®©ä¸€ä¸ªå‡½æ•°å¯ä»¥è½¬æ¢ä¸ºTFå‡½æ•°ï¼Œè¦éµå®ˆè®¾ä¹ˆè§„åˆ™ï¼Ÿ</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ›å»ºä¸€ä¸ªåŠ¨æ€Kerasæ¨¡å‹ï¼Ÿæ€ä¹ˆåšï¼Ÿä¸ºä»€ä¹ˆä¸è®©æ‰€æœ‰æ¨¡å‹éƒ½æ˜¯åŠ¨æ€çš„ï¼Ÿ</p>
<blockquote>
<ul>
<li>debugçš„æ—¶å€™å¯ä»¥åˆ›å»ºåŠ¨æ€Kerasæ¨¡å‹ï¼Œå› ä¸ºæ²¡æœ‰ç¼–è¯‘ï¼Œæ‰€ä»¥æ²¡æœ‰è½¬æ¢ä¸ºTF Functionï¼Œå¯ä»¥ä½¿Python Debugï¼Œæˆ–è€…æƒ³è¦åœ¨æ¨¡å‹ä¸­åŒ…è£¹ä»»æ„Pythonä»£ç æ—¶ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåŠ¨æ€Kerasæ¨¡å‹ã€‚</li>
<li>åªéœ€è¦åœ¨åˆ›å»ºæ—¶è®¾ç½® <code>dynamic=True</code> ï¼Œæˆ–è€…åœ¨ç¼–è¯‘æ—¶è®¾ç½®<code>run_eagerly=True</code></li>
<li>åŠ¨æ€æ¨¡å‹ï¼Œä¸èƒ½ä½¿ç”¨TensorFlowçš„å›¾è®¡ç®—ï¼ˆgraph featureï¼‰ï¼Œè®­ç»ƒå’Œé¢„æµ‹é€Ÿåº¦ä¼šä¸‹é™ã€‚</li>
</ul>
</blockquote>
</li>
<li><p>å®ç°ä¸€ä¸ªå…·æœ‰å±‚å½’ä¸€åŒ–çš„è‡ªå®šä¹‰å±‚ï¼ˆç¬¬15ç« ä¼šç”¨åˆ°ï¼‰ï¼š</p>
<p>a. <code>build()</code>æ–¹æ³•è¦å®šä¹‰ä¸¤ä¸ªå¯è®­ç»ƒæƒé‡Î± å’Œ Î²ï¼Œå½¢çŠ¶éƒ½æ˜¯<code>input_shape[-1:]</code>ï¼Œæ•°æ®ç±»å‹æ˜¯<code>tf.float32</code>ã€‚Î±ç”¨1åˆå§‹åŒ–ï¼ŒÎ²ç”¨0åˆå§‹åŒ–ã€‚</p>
<p>b. <code>call()</code>æ–¹æ³•è¦è®¡ç®—æ¯ä¸ªå®ä¾‹çš„ç‰¹å¾çš„å¹³å‡å€¼Î¼å’Œæ ‡å‡†å·®Ïƒã€‚ä½ å¯ä»¥ä½¿ç”¨<code>tf.nn.moments(inputs, axes=-1, keepdims=True)</code>ï¼Œå®ƒå¯ä»¥è¿”å›å¹³å‡å€¼Î¼å’Œæ–¹å·®Ïƒ2ï¼ˆè®¡ç®—å…¶å¹³æ–¹æ ¹å¾—åˆ°æ ‡å‡†å·®ï¼‰ã€‚å‡½æ•°è¿”å›<code>Î±âŠ—(X - Î¼)/(Ïƒ + Îµ) + Î²</code>ï¼Œå…¶ä¸­<code>âŠ—</code>è¡¨ç¤ºå…ƒç´ çº§åˆ«æƒ©ç½šï¼Œ<code>Îµ</code>æ˜¯å¹³æ»‘é¡¹ï¼ˆé¿å…å‘ç”Ÿé™¤ä»¥0ï¼Œè€Œæ˜¯é™¤ä»¥0.001ï¼‰ã€‚</p>
<p>c. ç¡®ä¿è‡ªå®šä¹‰å±‚çš„è¾“å‡ºå’Œ<code>keras.layers.LayerNormalization</code>å±‚çš„è¾“å‡ºä¸€è‡´ï¼ˆæˆ–éå¸¸æ¥è¿‘ï¼‰ã€‚</p>
</li>
</ol>
<ol>
<li><p>è®­ç»ƒä¸€ä¸ªè‡ªå®šä¹‰è®­ç»ƒå¾ªç¯ï¼Œæ¥å¤„ç†Fashion MNISTæ•°æ®é›†ã€‚</p>
<p>a. å±•ç¤ºå‘¨æœŸã€è¿­ä»£ï¼Œæ¯ä¸ªå‘¨æœŸçš„å¹³å‡è®­ç»ƒæŸå¤±ã€å¹³å‡å‡†ç¡®åº¦ï¼ˆæ¯æ¬¡è¿­ä»£ä¼šæ›´æ–°ï¼‰ï¼Œè¿˜æœ‰æ¯ä¸ªå‘¨æœŸç»“æŸåçš„éªŒè¯é›†æŸå¤±å’Œå‡†ç¡®åº¦ã€‚</p>
<p>b. æ·±å±‚å’Œæµ…å±‚ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–å™¨ï¼Œä¸åŒçš„å­¦ä¹ ç‡ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬13ç« -ä½¿ç”¨TensorFlowåŠ è½½å’Œé¢„å¤„ç†æ•°æ®"><a href="#ç¬¬13ç« -ä½¿ç”¨TensorFlowåŠ è½½å’Œé¢„å¤„ç†æ•°æ®" class="headerlink" title="ç¬¬13ç«  ä½¿ç”¨TensorFlowåŠ è½½å’Œé¢„å¤„ç†æ•°æ®"></a>ç¬¬13ç«  ä½¿ç”¨TensorFlowåŠ è½½å’Œé¢„å¤„ç†æ•°æ®</h2><p>ä»‹ç»Data APIï¼ŒTFRecordæ ¼å¼ï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰é¢„å¤„ç†å±‚ï¼Œå’Œä½¿ç”¨Kerasçš„é¢„å¤„ç†å±‚ã€‚</p>
<h3 id="Data-API"><a href="#Data-API" class="headerlink" title="Data API"></a>Data API</h3><p><code>tf.data.Dataset.from_tensor_slices()</code>åˆ›å»ºä¸€ä¸ªå­˜å‚¨äºå†…å­˜ä¸­çš„æ•°æ®é›†</p>
<h4 id="é“¾å¼è½¬æ¢"><a href="#é“¾å¼è½¬æ¢" class="headerlink" title="é“¾å¼è½¬æ¢"></a>é“¾å¼è½¬æ¢</h4><p><code>dataset.repeat(3).batch(7)</code> </p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e2753af12c9e73a0.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<blockquote>
<p>æ•°æ®é›†æ–¹æ³•ä¸ä¿®æ”¹æ•°æ®é›†ï¼Œåªæ˜¯ç”Ÿæˆæ–°çš„æ•°æ®é›†è€Œå·²ï¼Œæ‰€ä»¥è¦åšæ–°æ•°æ®é›†çš„èµ‹å€¼</p>
</blockquote>
<p><code>dataset.map(lambda x: x * 2)</code> å¯¹äºå¤æ‚çš„å¤„ç†ï¼Œé€šå¸¸éœ€è¦å¤šçº¿ç¨‹æ¥åŠ é€Ÿï¼šéœ€è®¾ç½®å‚æ•°<code>num_parallel_calls</code>ã€‚æ³¨æ„ï¼Œä¼ é€’ç»™<code>map()</code>æ–¹æ³•çš„å‡½æ•°å¿…é¡»æ˜¯å¯ä»¥è½¬æ¢ä¸ºTF Functionã€‚</p>
<p><code>map()</code>æ–¹æ³•æ˜¯å¯¹æ¯ä¸ªå…ƒç´ åšè½¬æ¢çš„ï¼Œ<code>apply()</code>æ–¹æ³•æ˜¯å¯¹æ•°æ®æ•´ä½“åšè½¬æ¢çš„ã€‚</p>
<p>ç”¨<code>filter()</code>æ–¹æ³•åšè¿‡æ»¤ï¼š<code>dataset.filter(lambda x: x &lt; 10)</code></p>
<p><code>take()</code>æ–¹æ³•å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ•°æ®</p>
<h4 id="æ‰“æ•£æ•°æ®"><a href="#æ‰“æ•£æ•°æ®" class="headerlink" title="æ‰“æ•£æ•°æ®"></a>æ‰“æ•£æ•°æ®</h4><p>å½“è®­ç»ƒé›†ä¸­çš„å®ä¾‹æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒæ—¶ï¼Œæ¢¯åº¦ä¸‹é™çš„æ•ˆæœæœ€å¥½ã€‚å®ç°ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨<code>shuffle()</code>æ–¹æ³•ã€‚</p>
<blockquote>
<p>shuffle()åˆ›å»ºä¸€ä¸ªæ–°æ•°æ®é›†ï¼Œå…¶å‰é¢æ˜¯ä¸€ä¸ªç¼“å­˜ï¼Œç¼“å­˜ä¸­æ˜¯æºæ•°æ®é›†çš„å¼€å¤´å…ƒç´ ã€‚æ— è®ºä½•æ—¶å–å…ƒç´ ï¼Œä¼šä»ç¼“å­˜ä¸­éšæœºå–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä»æºæ•°æ®é›†ä¸­å–ä¸€ä¸ªæ–°å…ƒç´ æ›¿æ¢ã€‚ä»ç¼“å†²å™¨å–å…ƒç´ ï¼Œç›´åˆ°ç¼“å­˜ä¸ºç©ºã€‚å¿…é¡»è¦æŒ‡å®šç¼“å­˜çš„å¤§å°ï¼Œæœ€å¥½å¤§ä¸€ç‚¹ï¼Œå¦åˆ™éšæœºæ•ˆæœä¸æ˜æ˜¾ã€‚ä½†ä¸è¦è¶…å‡ºå†…å­˜å¤§å°ã€‚å¦‚æœå¸Œæœ›éšæœºçš„é¡ºåºæ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªéšæœºç§å­ã€‚</p>
</blockquote>
<p>å¯¹äºå¤§æ•°æ®é›†ï¼Œå› ä¸ºç¼“å­˜æ¯”æ•°æ®é›†å°å¤ªå¤šï¼Œéšæœºç¼“å­˜æ–¹æ³•å°±ä¸èƒ½ç”¨ã€‚è§£å†³æ–¹æ³•æ˜¯<strong>å°†æºæ•°æ®æœ¬èº«æ‰“ä¹±</strong>ï¼Œä¸ºäº†å°†å®ä¾‹è¿›ä¸€æ­¥æ‰“æ•£ï¼Œä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ˜¯<strong>å°†æºæ•°æ®åˆ†æˆå¤šä¸ªæ–‡ä»¶</strong>ï¼Œè®­ç»ƒæ—¶éšæœºé¡ºåºè¯»å–ã€‚ä½†æ˜¯ï¼Œç›¸åŒæ–‡ä»¶ä¸­çš„å®ä¾‹ä»ç„¶é çš„å¤ªè¿‘ã€‚ä¸ºäº†é¿å…è¿™ç‚¹ï¼Œå¯ä»¥<strong>åŒæ—¶éšæœºè¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œåšäº¤å‰</strong>ã€‚åœ¨æœ€é¡¶å±‚ï¼Œå¯ä»¥ç”¨<code>shuffle()</code>åŠ ä¸€ä¸ªéšæœºç¼“å­˜ã€‚</p>
<h4 id="å¤šè¡Œæ•°æ®äº¤å‰"><a href="#å¤šè¡Œæ•°æ®äº¤å‰" class="headerlink" title="å¤šè¡Œæ•°æ®äº¤å‰"></a>å¤šè¡Œæ•°æ®äº¤å‰</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tf.data.Dataset.list_files(train_filepaths, seed=<span class="number">42</span>)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤ï¼Œ<code>list_files()</code>å‡½æ•°è¿”å›ä¸€ä¸ªæ–‡ä»¶è·¯å¾„æ‰“æ•£çš„æ•°æ®é›†ã€‚ä¹Ÿå¯ä»¥è®¾ç½®<code>shuffle=False</code>ï¼Œæ–‡ä»¶è·¯å¾„å°±ä¸æ‰“æ•£äº†ã€‚</p>
<p>ç„¶åï¼Œè°ƒç”¨<code>leave()</code>æ–¹æ³•ï¼Œä¸€æ¬¡è¯»å–5ä¸ªæ–‡ä»¶ï¼Œåšäº¤å‰æ“ä½œï¼ˆè·³è¿‡ç¬¬ä¸€è¡Œè¡¨å¤´ï¼Œä½¿ç”¨<code>skip()</code>æ–¹æ³•ï¼Œå¯ä»¥è®¾å®šå‚æ•°<code>num_parallel_calls</code>ä¸ºæƒ³è¦çš„çº¿ç¨‹æ•°ï¼ˆ<code>map()</code>æ–¹æ³•ä¹Ÿæœ‰è¿™ä¸ªå‚æ•°ï¼‰ï¼Œå¹¶è¡Œè¯»å–æ–‡ä»¶ã€‚</p>
<blockquote>
<p>æç¤ºï¼šä¸ºäº†äº¤å‰å¾—æ›´å¥½ï¼Œæœ€å¥½è®©æ–‡ä»¶æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œå¦åˆ™é•¿æ–‡ä»¶çš„å°¾éƒ¨ä¸ä¼šäº¤å‰ã€‚</p>
</blockquote>
<h4 id="é¢„å¤„ç†æ•°æ®"><a href="#é¢„å¤„ç†æ•°æ®" class="headerlink" title="é¢„å¤„ç†æ•°æ®"></a>é¢„å¤„ç†æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X_mean, X_std = [...] <span class="comment"># mean and scale of each feature in the training set</span></span><br><span class="line">n_inputs = <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">preprocess</span><span class="params">(line)</span>:</span></span><br><span class="line">  defs = [<span class="number">0.</span>] * n_inputs + [tf.constant([], dtype=tf.float32)]</span><br><span class="line">  fields = tf.io.decode_csv(line, record_defaults=defs)</span><br><span class="line">  x = tf.stack(fields[:<span class="number">-1</span>])</span><br><span class="line">  y = tf.stack(fields[<span class="number">-1</span>:])</span><br><span class="line">  <span class="keyword">return</span> (x - X_mean) / X_std, y</span><br></pre></td></tr></table></figure>
<h4 id="æ•´åˆ"><a href="#æ•´åˆ" class="headerlink" title="æ•´åˆ"></a>æ•´åˆ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">csv_reader_dataset</span><span class="params">(filepaths, repeat=<span class="number">1</span>, n_readers=<span class="number">5</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                       n_read_threads=None, shuffle_buffer_size=<span class="number">10000</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                       n_parse_threads=<span class="number">5</span>, batch_size=<span class="number">32</span>)</span>:</span></span><br><span class="line">    dataset = tf.data.Dataset.list_files(filepaths)</span><br><span class="line">    dataset = dataset.interleave(</span><br><span class="line">        <span class="keyword">lambda</span> filepath: tf.data.TextLineDataset(filepath).skip(<span class="number">1</span>),</span><br><span class="line">        cycle_length=n_readers, num_parallel_calls=n_read_threads)</span><br><span class="line">    dataset = dataset.map(preprocess, num_parallel_calls=n_parse_threads)</span><br><span class="line">    dataset = dataset.shuffle(shuffle_buffer_size).repeat(repeat)</span><br><span class="line">    <span class="keyword">return</span> dataset.batch(batch_size).prefetch(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="é¢„æå–"><a href="#é¢„æå–" class="headerlink" title="é¢„æå–"></a>é¢„æå–</h4><p>é€šè¿‡è°ƒç”¨<code>prefetch(1)</code>ï¼Œåˆ›å»ºäº†ä¸€ä¸ªé«˜æ•ˆçš„æ•°æ®é›†ï¼Œæ€»èƒ½æå‰ä¸€ä¸ªæ‰¹æ¬¡ã€‚æ¢å¥è¯è¯´ï¼Œå½“è®­ç»ƒç®—æ³•åœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸Šå·¥ä½œæ—¶ï¼Œæ•°æ®é›†å·²ç»å‡†å¤‡å¥½ä¸‹ä¸€ä¸ªæ‰¹æ¬¡äº†ï¼ˆä»ç¡¬ç›˜è¯»å–æ•°æ®å¹¶åšé¢„å¤„ç†ï¼‰</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-86355457e5a7a1c2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<blockquote>
<p>æç¤ºï¼šå¦‚æœæƒ³ä¹°ä¸€å—GPUæ˜¾å¡çš„è¯ï¼Œå®ƒçš„å¤„ç†èƒ½åŠ›å’Œæ˜¾å­˜éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚å¦ä¸€ä¸ªåŒæ ·é‡è¦çš„ï¼Œæ˜¯æ˜¾å­˜å¸¦å®½ï¼Œå³æ¯ç§’å¯ä»¥è¿›å…¥æˆ–æµå‡ºå†…å­˜çš„GBæ•°ã€‚</p>
</blockquote>
<p>å¦‚æœæ•°æ®é›†ä¸å¤§ï¼Œå†…å­˜æ”¾å¾—ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®é›†çš„<code>cache()</code>æ–¹æ³•å°†æ•°æ®é›†å­˜å…¥å†…å­˜ã€‚é€šå¸¸è¿™æ­¥æ˜¯åœ¨åŠ è½½å’Œé¢„å¤„ç†æ•°æ®ä¹‹åï¼Œåœ¨æ‰“æ•£ã€é‡å¤ã€åˆ†æ‰¹æ¬¡ä¹‹å‰ã€‚è¿™æ ·åšçš„è¯ï¼Œæ¯ä¸ªå®ä¾‹åªéœ€åšä¸€æ¬¡è¯»å–å’Œå¤„ç†ï¼Œä¸‹ä¸€ä¸ªæ‰¹æ¬¡ä»èƒ½æå‰å‡†å¤‡ã€‚</p>
<h3 id="TFRecordæ ¼å¼"><a href="#TFRecordæ ¼å¼" class="headerlink" title="TFRecordæ ¼å¼"></a>TFRecordæ ¼å¼</h3><p>è™½ç„¶ä½¿ç”¨CSVæ–‡ä»¶,å¸¸è§åˆç®€å•æ–¹ä¾¿ï¼Œä½†ä¸å¤Ÿé«˜æ•ˆï¼Œä¸æ”¯æŒå¤§æˆ–å¤æ‚çš„æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚å›¾ç‰‡æˆ–éŸ³é¢‘ï¼‰ã€‚è¿™å°±æ˜¯TFRecordè¦è§£å†³çš„ã€‚</p>
<p>TFRecordæ ¼å¼æ˜¯TensorFlowåçˆ±çš„å­˜å‚¨å¤§é‡æ•°æ®å¹¶é«˜æ•ˆè¯»å–çš„æ•°æ®ã€‚å®ƒæ˜¯éå¸¸ç®€å•çš„äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåªåŒ…å«ä¸åŒå¤§å°çš„äºŒè¿›åˆ¶è®°å½•çš„æ•°æ®ï¼ˆæ¯ä¸ªè®°å½•åŒ…æ‹¬ä¸€ä¸ªé•¿åº¦ã€ä¸€ä¸ªCRCæ ¡éªŒå’Œï¼Œæ ¡éªŒå’Œç”¨äºæ£€æŸ¥é•¿åº¦æ˜¯å¦æ­£ç¡®ï¼ŒçœŸæ˜¯çš„æ•°æ®ï¼Œå’Œä¸€ä¸ªæ•°æ®çš„CRCæ ¡éªŒå’Œï¼Œç”¨äºæ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®ï¼‰ã€‚</p>
<p>ä½¿ç”¨<code>tf.io.TFRecordWriter</code>ç±»åˆ›å»ºTFRecordæ–‡ä»¶,ä½¿ç”¨<code>tf.data.TFRecordDataset</code>æ¥è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªTFRecordæ–‡ä»¶</p>
<blockquote>
<p>æç¤ºï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>TFRecordDataset</code>ä¼šé€ä¸€è¯»å–æ•°æ®ï¼Œä½†é€šè¿‡è®¾å®š<code>num_parallel_reads</code>å¯ä»¥å¹¶è¡Œè¯»å–å¹¶äº¤å‰æ•°æ®ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>list_files()</code>å’Œ<code>interleave()</code>è·å¾—åŒæ ·çš„ç»“æœã€‚</p>
</blockquote>
<h4 id="å‹ç¼©TFRecordæ–‡ä»¶"><a href="#å‹ç¼©TFRecordæ–‡ä»¶" class="headerlink" title="å‹ç¼©TFRecordæ–‡ä»¶"></a>å‹ç¼©TFRecordæ–‡ä»¶</h4><p>å¯ä»¥é€šè¿‡è®¾å®š<code>options</code>å‚æ•°ï¼Œåˆ›å»ºå‹ç¼©çš„TFRecordæ–‡ä»¶ï¼Œå½“è¯»å–å‹ç¼©TFRecordæ–‡ä»¶æ—¶ï¼Œéœ€è¦æŒ‡å®šå‹ç¼©ç±»å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">options = tf.io.TFRecordOptions(compression_type=<span class="string">"GZIP"</span>)</span><br><span class="line"><span class="keyword">with</span> tf.io.TFRecordWriter(<span class="string">"my_compressed.tfrecord"</span>, options) <span class="keyword">as</span> f:</span><br><span class="line">  [...]</span><br><span class="line">dataset = tf.data.TFRecordDataset([<span class="string">"my_compressed.tfrecord"</span>],</span><br><span class="line">                                  compression_type=<span class="string">"GZIP"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="åè®®ç¼“å­˜"><a href="#åè®®ç¼“å­˜" class="headerlink" title="åè®®ç¼“å­˜"></a>åè®®ç¼“å­˜</h4><p>æ¯æ¡è®°å½•å¯ä»¥ä½¿ç”¨ä»»ä½•äºŒè¿›åˆ¶æ ¼å¼ï¼ŒTFRecordæ–‡ä»¶é€šå¸¸åŒ…æ‹¬åºåˆ—åŒ–çš„åè®®ç¼“å­˜ï¼ˆä¹Ÿç§°ä¸ºprotobufï¼‰ã€‚è¿™æ˜¯ä¸€ç§å¯ç§»æ¤ã€å¯æ‰©å±•çš„é«˜æ•ˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œæ˜¯è°·æ­Œåœ¨2001å¹´å¼€å‘ï¼Œå¹¶åœ¨2008å¹´å¼€æºçš„ï¼›åè®®ç¼“å­˜ç°åœ¨ä½¿ç”¨å¹¿æ³›ï¼Œç‰¹åˆ«æ˜¯åœ¨gRPCï¼Œè°·æ­Œçš„è¿œç¨‹è°ƒç”¨ç³»ç»Ÿä¸­ã€‚å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line">message Person &#123;</span><br><span class="line">  string name = <span class="number">1</span>;</span><br><span class="line">  int32 id = <span class="number">2</span>;</span><br><span class="line">  repeated string email = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“<code>.proto</code>æ–‡ä»¶ä¸­æœ‰äº†ä¸€ä¸ªå®šä¹‰ï¼Œå°±å¯ä»¥ç”¨åè®®ç¼“å­˜ç¼–è¯‘å™¨<code>protoc</code>ç¼–è¯‘ï¼Œæ¥ç”ŸæˆPythonï¼ˆæˆ–å…¶å®ƒè¯­è¨€ï¼‰çš„è®¿é—®ç±»ã€‚</p>
<h4 id="TensorFlowåè®®ç¼“å­˜"><a href="#TensorFlowåè®®ç¼“å­˜" class="headerlink" title="TensorFlowåè®®ç¼“å­˜"></a>TensorFlowåè®®ç¼“å­˜</h4><p>TFRecordæ–‡ä»¶ä¸»è¦ä½¿ç”¨çš„åè®®ç¼“å­˜æ˜¯<code>tf.train.Example</code>ï¼Œè¡¨ç¤ºæ•°æ®é›†ä¸­çš„ä¸€ä¸ªå®ä¾‹ï¼ŒåŒ…æ‹¬å‘½åç‰¹å¾çš„åˆ—è¡¨ï¼Œæ¯ä¸ªç‰¹å¾å¯ä»¥æ˜¯å­—èŠ‚ä¸²åˆ—è¡¨ã€æˆ–æµ®ç‚¹åˆ—è¡¨ã€æˆ–æ•´æ•°åˆ—è¡¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåè®®ç¼“å­˜çš„å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">syntax = <span class="string">"proto3"</span>;</span><br><span class="line">message BytesList &#123; repeated bytes value = <span class="number">1</span>; &#125;</span><br><span class="line">message FloatList &#123; repeated float value = <span class="number">1</span> [packed = true]; &#125;</span><br><span class="line">message Int64List &#123; repeated int64 value = <span class="number">1</span> [packed = true]; &#125;</span><br><span class="line">message Feature &#123;</span><br><span class="line">    oneof kind &#123;</span><br><span class="line">        BytesList bytes_list = <span class="number">1</span>;</span><br><span class="line">        FloatList float_list = <span class="number">2</span>;</span><br><span class="line">        Int64List int64_list = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">message Features &#123; map&lt;string, Feature&gt; feature = <span class="number">1</span>; &#125;;</span><br><span class="line">message Example &#123; Features features = <span class="number">1</span>; &#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½ éœ€è¦å†™ä¸€ä¸ªè½¬æ¢è„šæœ¬ï¼Œè¯»å–å½“å‰æ ¼å¼ï¼ˆä¾‹å¦‚csvï¼‰ï¼Œä¸ºæ¯ä¸ªå®ä¾‹åˆ›å»º<code>Example</code>åè®®ç¼“å­˜ï¼Œåºåˆ—åŒ–å¹¶å­˜å‚¨åˆ°è‹¥å¹²TFRecordæ–‡ä»¶ä¸­ï¼Œæœ€å¥½å†æ‰“æ•£ã€‚</p>
</blockquote>
<h4 id="åŠ è½½å’Œè§£æExample"><a href="#åŠ è½½å’Œè§£æExample" class="headerlink" title="åŠ è½½å’Œè§£æExample"></a>åŠ è½½å’Œè§£æExample</h4><p>è¦åŠ è½½åºåˆ—åŒ–çš„<code>Example</code>åè®®ç¼“å­˜ï¼Œéœ€è¦å†æ¬¡ä½¿ç”¨<code>tf.data.TFRecordDataset</code>ï¼Œä½¿ç”¨<code>tf.io.parse_single_example()</code>è§£ææ¯ä¸ª<code>Example</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">feature_description = &#123;</span><br><span class="line">    <span class="string">"name"</span>: tf.io.FixedLenFeature([], tf.string, default_value=<span class="string">""</span>),</span><br><span class="line">    <span class="string">"id"</span>: tf.io.FixedLenFeature([], tf.int64, default_value=<span class="number">0</span>),</span><br><span class="line">    <span class="string">"emails"</span>: tf.io.VarLenFeature(tf.string),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> serialized_example <span class="keyword">in</span> tf.data.TFRecordDataset([<span class="string">"my_contacts.tfrecord"</span>]):</span><br><span class="line">    parsed_example = tf.io.parse_single_example(serialized_example,</span><br><span class="line">                                                feature_description)</span><br></pre></td></tr></table></figure>
<p>é•¿åº¦å›ºå®šçš„ç‰¹å¾ä¼šåƒå¸¸è§„å¼ é‡é‚£æ ·è§£æï¼Œè€Œé•¿åº¦å¯å˜çš„ç‰¹å¾ä¼šä½œä¸ºç¨€ç–å¼ é‡è§£æã€‚å¯ä»¥ä½¿ç”¨<code>tf.sparse.to_dense()</code>å°†ç¨€ç–å¼ é‡è½¬å˜ä¸ºç´§å¯†å¼ é‡ã€‚</p>
<h4 id="ä½¿ç”¨SequenceExampleåè®®ç¼“å­˜å¤„ç†åµŒå¥—åˆ—è¡¨"><a href="#ä½¿ç”¨SequenceExampleåè®®ç¼“å­˜å¤„ç†åµŒå¥—åˆ—è¡¨" class="headerlink" title="ä½¿ç”¨SequenceExampleåè®®ç¼“å­˜å¤„ç†åµŒå¥—åˆ—è¡¨"></a>ä½¿ç”¨<code>SequenceExample</code>åè®®ç¼“å­˜å¤„ç†åµŒå¥—åˆ—è¡¨</h4><p>ä¸‹é¢æ˜¯<code>SequenceExample</code>åè®®ç¼“å­˜çš„å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">message FeatureList &#123; repeated Feature feature = <span class="number">1</span>; &#125;;</span><br><span class="line">message FeatureLists &#123; map&lt;string, FeatureList&gt; feature_list = <span class="number">1</span>; &#125;;</span><br><span class="line">message SequenceExample &#123;</span><br><span class="line">    Features context = <span class="number">1</span>;</span><br><span class="line">    FeatureLists feature_lists = <span class="number">2</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>é¡»è¦ä½¿ç”¨<code>tf.io.parse_single_sequence_example()</code>æ¥è§£æå•ä¸ªçš„<code>SequenceExample</code>æˆ–ç”¨<code>tf.io.parse_sequence_example()</code>è§£æä¸€ä¸ªæ‰¹æ¬¡ã€‚ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«ä¸Šä¸‹æ–‡ç‰¹å¾ï¼ˆå­—å…¸ï¼‰å’Œç‰¹å¾åˆ—è¡¨ï¼ˆä¹Ÿæ˜¯å­—å…¸ï¼‰çš„å…ƒç»„ã€‚å¦‚æœç‰¹å¾åˆ—è¡¨åŒ…å«å¤§å°å¯å˜çš„åºåˆ—ï¼ˆå°±åƒå‰é¢çš„ä¾‹å­ï¼‰ï¼Œå¯ä»¥å°†å…¶è½¬åŒ–ä¸ºåµŒå¥—å¼ é‡ï¼Œä½¿ç”¨<code>tf.RaggedTensor.from_sparse()</code></p>
<h3 id="é¢„å¤„ç†è¾“å…¥ç‰¹å¾"><a href="#é¢„å¤„ç†è¾“å…¥ç‰¹å¾" class="headerlink" title="é¢„å¤„ç†è¾“å…¥ç‰¹å¾"></a>é¢„å¤„ç†è¾“å…¥ç‰¹å¾</h3><p>ä¸ºç¥ç»ç½‘ç»œå‡†å¤‡æ•°æ®éœ€è¦å°†æ‰€æœ‰ç‰¹å¾è½¬å˜ä¸ºæ•°å€¼ç‰¹å¾ï¼Œåšä¸€äº›å½’ä¸€åŒ–å·¥ä½œç­‰ç­‰ã€‚</p>
<blockquote>
<ul>
<li>å¯ä»¥åœ¨å‡†å¤‡æ•°æ®æ–‡ä»¶çš„æ—¶å€™åšï¼Œä½¿ç”¨NumPyã€Pandasã€Scikit-Learnè¿™æ ·çš„å·¥ä½œã€‚</li>
<li>å¯ä»¥åœ¨ç”¨Data APIåŠ è½½æ•°æ®æ—¶ï¼Œå®æ—¶é¢„å¤„ç†æ•°æ®ï¼ˆæ¯”å¦‚ï¼Œä½¿ç”¨æ•°æ®é›†çš„<code>map()</code>æ–¹æ³•ï¼Œå°±åƒå‰é¢çš„ä¾‹å­ï¼‰ã€‚</li>
<li>å¯ä»¥ç»™æ¨¡å‹åŠ ä¸€ä¸ªé¢„å¤„ç†å±‚ã€‚</li>
</ul>
</blockquote>
<p><strong>ç”¨Lambdaå±‚å®ç°æ ‡å‡†åŒ–å±‚</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">means = np.mean(X_train, axis=<span class="number">0</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">stds = np.std(X_train, axis=<span class="number">0</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">eps = keras.backend.epsilon()</span><br><span class="line">model = keras.models.Sequential([</span><br><span class="line">    keras.layers.Lambda(<span class="keyword">lambda</span> inputs: (inputs - means) / (stds + eps)),</span><br><span class="line">    [...] <span class="comment"># å…¶å®ƒå±‚</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<p><strong>ç‹¬ç«‹çš„è‡ªå®šä¹‰å±‚</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Standardization</span><span class="params">(keras.layers.Layer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adapt</span><span class="params">(self, data_sample)</span>:</span></span><br><span class="line">        self.means_ = np.mean(data_sample, axis=<span class="number">0</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">        self.stds_ = np.std(data_sample, axis=<span class="number">0</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> (inputs - self.means_) / (self.stds_ + keras.backend.epsilon())</span><br><span class="line">        </span><br><span class="line">std_layer = Standardization()</span><br><span class="line">std_layer.adapt(data_sample)</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨ç‹¬çƒ­çŸ¢é‡ç¼–ç ç±»å‹ç‰¹å¾"><a href="#ä½¿ç”¨ç‹¬çƒ­çŸ¢é‡ç¼–ç ç±»å‹ç‰¹å¾" class="headerlink" title="ä½¿ç”¨ç‹¬çƒ­çŸ¢é‡ç¼–ç ç±»å‹ç‰¹å¾"></a>ä½¿ç”¨ç‹¬çƒ­çŸ¢é‡ç¼–ç ç±»å‹ç‰¹å¾</h4><p>åˆ›å»ºäº†æŸ¥æ‰¾è¡¨ï¼Œä¼ å…¥åˆå§‹åŒ–å™¨å¹¶æŒ‡æ˜æœªç™»å½•è¯ï¼ˆoovï¼‰æ¡¶çš„æ•°é‡ã€‚å¦‚æœæŸ¥æ‰¾çš„ç±»å‹ä¸åœ¨è¯å…¸ä¸­ï¼ŒæŸ¥æ‰¾è¡¨ä¼šè®¡ç®—è¿™ä¸ªç±»å‹çš„å“ˆå¸Œï¼Œä½¿ç”¨å“ˆå¸Œåˆ†é…ä¸€ä¸ªæœªçŸ¥çš„ç±»å‹ç»™æœªç™»å½•è¯æ¡¶ã€‚ç´¢å¼•åºå·æ¥ç€ç°æœ‰åºå·ï¼Œ</p>
<p>åŸå› ï¼šå¦‚æœç±»å‹æ•°è¶³å¤Ÿå¤§ï¼ˆä¾‹å¦‚ï¼Œé‚®ç¼–ã€åŸå¸‚ã€è¯ã€äº§å“ã€æˆ–ç”¨æˆ·ï¼‰ï¼Œæ•°æ®é›†ä¹Ÿè¶³å¤Ÿå¤§ï¼Œæˆ–è€…æ•°æ®é›†æŒç»­å˜åŒ–ï¼Œè¿™æ ·çš„è¯ï¼Œè·å–ç±»å‹çš„å®Œæ•´åˆ—è¡¨å°±ä¸å®¹æ˜“äº†ã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯æ ¹æ®æ•°æ®æ ·æœ¬å®šä¹‰ï¼ˆè€Œä¸æ˜¯æ•´ä¸ªè®­ç»ƒé›†ï¼‰ï¼Œä¸ºå…¶å®ƒä¸åœ¨æ ·æœ¬ä¸­çš„ç±»å‹åŠ ä¸Šä¸€äº›æœªç™»å½•è¯æ¡¶ã€‚è®­ç»ƒä¸­ç¢°åˆ°çš„æœªçŸ¥ç±»å‹è¶Šå¤šï¼Œè¦ä½¿ç”¨çš„æœªç™»å½•è¯æ¡¶å°±è¦è¶Šå¤šã€‚äº‹å®ä¸Šï¼Œå¦‚æœæœªç™»å½•è¯æ¡¶çš„æ•°é‡ä¸å¤Ÿï¼Œå°±ä¼šå‘ç”Ÿç¢°æ’ï¼šä¸åŒçš„ç±»å‹ä¼šå‡ºç°åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œæ‰€ä»¥ç¥ç»ç½‘ç»œå°±æ— æ³•åŒºåˆ†äº†ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªé‡è¦çš„åŸåˆ™ï¼Œå¦‚æœç±»å‹æ•°å°äº10ï¼Œå¯ä»¥ä½¿ç”¨ç‹¬çƒ­ç¼–ç ã€‚å¦‚æœç±»å‹è¶…è¿‡50ä¸ªï¼ˆä½¿ç”¨å“ˆå¸Œæ¡¶æ—¶é€šå¸¸å¦‚æ­¤ï¼‰ï¼Œæœ€å¥½ä½¿ç”¨åµŒå…¥ã€‚ç±»å‹æ•°åœ¨10å’Œ50ä¹‹é—´æ—¶ï¼Œæœ€å¥½å¯¹ä¸¤ç§æ–¹æ³•åšä¸ªè¯•éªŒï¼Œçœ‹å“ªä¸ªæ›´åˆé€‚ã€‚</p>
</blockquote>
<h4 id="ç”¨åµŒå…¥ç¼–ç ç±»å‹ç‰¹å¾"><a href="#ç”¨åµŒå…¥ç¼–ç ç±»å‹ç‰¹å¾" class="headerlink" title="ç”¨åµŒå…¥ç¼–ç ç±»å‹ç‰¹å¾"></a>ç”¨åµŒå…¥ç¼–ç ç±»å‹ç‰¹å¾</h4><p>åµŒå…¥æ˜¯ä¸€ä¸ªå¯è®­ç»ƒçš„è¡¨ç¤ºç±»å‹çš„ç´§å¯†çŸ¢é‡ã€‚é»˜è®¤æ—¶ï¼ŒåµŒå…¥æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œ<code>&quot;NEAR BAY&quot;</code>å¯èƒ½åˆå§‹åŒ–ä¸º<code>[0.131, 0.890]</code>ï¼Œ<code>&quot;NEAR OCEAN&quot;</code>å¯èƒ½åˆå§‹åŒ–ä¸º<code>[0.631, 0.791]</code>ã€‚</p>
<blockquote>
<p>è¡¨å¾çš„è¶Šå¥½ï¼Œè¶Šåˆ©äºç¥ç»ç½‘ç»œåšå‡ºå‡†ç¡®çš„é¢„æµ‹ï¼Œè€Œè®­ç»ƒä¼šè®©åµŒå…¥æ›´å¥½çš„è¡¨å¾ç±»å‹ï¼Œè¿™è¢«ç§°ä¸ºè¡¨å¾å­¦ä¹ </p>
</blockquote>
<h5 id="è¯åµŒå…¥"><a href="#è¯åµŒå…¥" class="headerlink" title="è¯åµŒå…¥"></a>è¯åµŒå…¥</h5><p>ç”¨ç¥ç»ç½‘ç»œé¢„æµ‹ç»™å®šè¯é™„è¿‘çš„è¯ï¼Œå¾—åˆ°äº†éå¸¸å¥½çš„è¯åµŒå…¥ã€‚ä¾‹å¦‚ï¼ŒåŒä¹‰è¯æœ‰éå¸¸ç›¸è¿‘çš„è¯åµŒå…¥ï¼Œè¯­ä¹‰ç›¸è¿‘çš„è¯ï¼Œæ¯”å¦‚æ³•å›½ã€è¥¿ç­ç‰™å’Œæ„å¤§åˆ©é çš„ä¹Ÿå¾ˆè¿‘ï¼Œè¯åµŒå…¥åœ¨åµŒå…¥ç©ºé—´çš„è½´ä¸Šçš„åˆ†å¸ƒä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ã€‚</p>
<blockquote>
<p>ç‹¬çƒ­ç¼–ç åŠ ç´§å¯†å±‚ï¼ˆæ²¡æœ‰æ¿€æ´»å‡½æ•°å’Œåå·®é¡¹ï¼‰ï¼Œç­‰ä»·äºåµŒå…¥å±‚ã€‚ä½†æ˜¯ï¼ŒåµŒå…¥å±‚ç”¨çš„è®¡ç®—æ›´å°‘ï¼ˆåµŒå…¥çŸ©é˜µè¶Šå¤§ï¼Œæ€§èƒ½å·®è·è¶Šæ˜æ˜¾ï¼‰ã€‚ç´§å¯†å±‚çš„æƒé‡çŸ©é˜µæ‰®æ¼”çš„æ˜¯åµŒå…¥çŸ©é˜µçš„è§’è‰²ã€‚ä¾‹å¦‚ï¼Œå¤§å°ä¸º20çš„ç‹¬çƒ­çŸ¢é‡å’Œ10ä¸ªå•å…ƒçš„ç´§å¯†å±‚åŠ èµ·æ¥ï¼Œç­‰ä»·äº<code>input_dim=20</code>ã€<code>output_dim=10</code>çš„åµŒå…¥å±‚ã€‚ä½œä¸ºç»“æœï¼ŒåµŒå…¥çš„ç»´åº¦è¶…è¿‡åé¢çš„å±‚çš„ç¥ç»å…ƒæ•°æ˜¯æµªè´¹çš„ã€‚</p>
</blockquote>
<h4 id="Kerasé¢„å¤„ç†å±‚"><a href="#Kerasé¢„å¤„ç†å±‚" class="headerlink" title="Kerasé¢„å¤„ç†å±‚"></a>Kerasé¢„å¤„ç†å±‚</h4><p><code>keras.layers.Normalization</code>ç”¨æ¥åšç‰¹å¾æ ‡å‡†åŒ–ï¼Œ<code>TextVectorization</code>å±‚ç”¨äºå°†æ–‡æœ¬ä¸­çš„è¯ç¼–ç ä¸ºè¯å…¸çš„ç´¢å¼•ã€‚å¯¹äºè¿™ä¸¤ä¸ªå±‚ï¼Œéƒ½æ˜¯ç”¨æ•°æ®æ ·æœ¬è°ƒç”¨å®ƒçš„<code>adapt()</code>æ–¹æ³•ï¼Œç„¶åå¦‚å¸¸ä½¿ç”¨ã€‚å…¶å®ƒçš„é¢„å¤„ç†å±‚ä¹Ÿæ˜¯è¿™ä¹ˆä½¿ç”¨çš„ã€‚</p>
<p><code>keras.layers.Discretization</code>å±‚ï¼Œå®ƒèƒ½å°†è¿ç»­æ•°æ®åˆ‡æˆä¸åŒçš„ç»„ï¼Œå°†æ¯ä¸ªç»„æ–Œå—ä¸ºç‹¬çƒ­çŸ¢é‡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨å®ƒå°†ä»·æ ¼åˆ†æˆæ˜¯ä¸‰ç±»ï¼Œä½ã€ä¸­ã€é«˜ï¼Œç¼–ç ä¸º[1, 0, 0]ã€[0, 1, 0]ã€[0, 0, 1]ã€‚</p>
<p><code>TextVectorization</code>å±‚ä¹Ÿæœ‰ä¸€ä¸ªé€‰é¡¹ç”¨äºè¾“å‡ºè¯é¢‘å‘é‡ï¼Œè€Œä¸æ˜¯è¯ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¯å…¸åŒ…æ‹¬ä¸‰ä¸ªè¯ï¼Œæ¯”å¦‚<code>[&quot;and&quot;, &quot;basketball&quot;, &quot;more&quot;]</code>ï¼Œåˆ™<code>&quot;more and more&quot;</code>ä¼šæ˜ å°„ä¸º<code>[1, 0, 2]</code>ï¼š<code>&quot;and&quot;</code>å‡ºç°äº†ä¸€æ¬¡ï¼Œ<code>&quot;basketball&quot;</code>æ²¡æœ‰å‡ºç°ï¼Œ<code>&quot;more&quot;</code>å‡ºç°äº†ä¸¤æ¬¡ã€‚è¿™ç§è¯è¡¨å¾ç§°ä¸º<strong>è¯è¢‹ </strong> ï¼Œå› ä¸ºå®ƒå®Œå…¨å¤±å»äº†è¯çš„é¡ºåºã€‚</p>
<p>è¯é¢‘å‘é‡ä¸­åº”è¯¥é™ä½å¸¸è§è¯çš„å½±å“ã€‚ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•æ˜¯<strong>å°†è¯é¢‘é™¤ä»¥å‡ºç°è¯¥è¯çš„æ–‡æ¡£æ•°çš„å¯¹æ•°</strong>ã€‚è¿™ç§æ–¹æ³•ç§°ä¸º<strong>è¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ï¼ˆTF-IDFï¼‰</strong>ã€‚ä¾‹å¦‚ï¼Œå‡è®¾<code>&quot;and&quot;</code>ã€<code>&quot;basketball&quot;</code>ã€<code>&quot;more&quot;</code>åˆ†åˆ«å‡ºç°åœ¨äº†200ã€10ã€100ä¸ªæ–‡æ¡£ä¸­ï¼šæœ€ç»ˆçš„çŸ¢é‡åº”è¯¥æ˜¯<code>[1/log(200), 0/log(10), 2/log(100)]</code>ï¼Œå¤§çº¦æ˜¯<code>[0.19, 0., 0.43]</code>ã€‚<code>TextVectorization</code>å±‚ä¼šæœ‰TF-IDFçš„é€‰é¡¹ã€‚</p>
<h3 id="TF-Transform"><a href="#TF-Transform" class="headerlink" title="TF Transform"></a>TF Transform</h3><p>TensorFlowæ²¡æœ‰æ†ç»‘ï¼Œéœ€è¦pipå®‰è£…</p>
<p>åœ¨æ•°æ®è®­ç»ƒå‰ï¼Œå¤„ç†æ¯ä¸ªå®ä¾‹ï¼Œè€Œä¸æ˜¯åœ¨è®­ç»ƒä¸­æ¯ä¸ªå‘¨æœŸå¤„ç†ä¸€æ¬¡å®ä¾‹ã€‚</p>
<p>å¦‚æœæ•°æ®é›†å°åˆ°å¯ä»¥å­˜å…¥å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨<code>cache()</code>æ–¹æ³•ã€‚ä½†å¦‚æœå¤ªå¤§ï¼Œå¯ä»¥<strong>ä½¿ç”¨Apache Beamæˆ–Spark</strong>ã€‚å®ƒä»¬å¯ä»¥åœ¨å¤§æ•°æ®ä¸Šåšé«˜æ•ˆçš„æ•°æ®é¢„å¤„ç†ï¼Œè¿˜å¯ä»¥åˆ†å¸ƒè¿›è¡Œï¼Œä½¿ç”¨å®ƒä»¬å°±èƒ½åœ¨è®­ç»ƒå‰å¤„ç†æ‰€æœ‰è®­ç»ƒæ•°æ®äº†ã€‚</p>
<p>TF Transformæ˜¯<a href="https://links.jianshu.com/go?to=https%3A%2F%2Ftensorflow.org%2Ftfx" target="_blank" rel="noopener">TensorFlow Extended (TFX)</a>çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„TensorFlowæ¨¡å‹ç”Ÿäº§åŒ–å¹³å°ã€‚</p>
<h3 id="TensorFlow-Datasetsï¼ˆTFDSï¼‰é¡¹ç›®"><a href="#TensorFlow-Datasetsï¼ˆTFDSï¼‰é¡¹ç›®" class="headerlink" title="TensorFlow Datasetsï¼ˆTFDSï¼‰é¡¹ç›®"></a>TensorFlow Datasetsï¼ˆTFDSï¼‰é¡¹ç›®</h3><p>TensorFlowæ²¡æœ‰æ†ç»‘TFDSï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨pipå®‰è£…åº“<code>tensorflow-datasets</code>ã€‚ç„¶åè°ƒç”¨å‡½æ•°<code>tfds.load()</code>ï¼Œå°±èƒ½ä¸‹è½½æ•°æ®é›†äº†ï¼ˆé™¤éä¹‹å‰ä¸‹è½½è¿‡ï¼‰ï¼Œè¿”å›çš„æ•°æ®æ˜¯æ•°æ®é›†çš„å­—å…¸ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ˜¯è®­ç»ƒé›†ï¼Œä¸€ä¸ªæ˜¯æµ‹è¯•é›†ï¼‰ã€‚</p>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Data API </p>
<blockquote>
<p>å½“æ•°æ®é›†å¾ˆå¤§ï¼Œæˆ–è€…ä¿å­˜åœ¨ä¸åŒæ–‡ä»¶ä¸­æ˜¯ï¼Œå¯ä»¥ç”¨Data APIæ¥è¯»å…¥æ•°æ®ï¼Œå¤„ç†æ•°æ®</p>
</blockquote>
</li>
<li><p>å°†å¤§æ•°æ®åˆ†æˆå¤šä¸ªæ–‡ä»¶æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<blockquote>
<p>å¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ‰“æ•£ï¼Œäº¤å‰ï¼ˆshuffleï¼‰</p>
<p>è¿˜å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†å¸ƒå¼è®¡ç®—å¤„ç†</p>
</blockquote>
</li>
<li><p>è®­ç»ƒä¸­ï¼Œå¦‚ä½•æ–­å®šè¾“å…¥ç®¡é“æ˜¯ç“¶é¢ˆï¼Ÿå¦‚ä½•å¤„ç†ç“¶é¢ˆï¼Ÿ</p>
<blockquote>
<p>å¦‚æœGPUæ²¡æœ‰å®Œå…¨è¢«åˆ©ç”¨æ—¶ï¼Œå¯èƒ½æ˜¯è¾“å…¥ç®¡é“è¾¾åˆ°äº†ç“¶é¢ˆã€‚</p>
<p>å¯ä»¥å¤šçº¿ç¨‹æ¥åŠ é€Ÿ</p>
</blockquote>
</li>
<li><p>å¯ä»¥å°†ä»»ä½•äºŒè¿›åˆ¶æ•°æ®å­˜å…¥TFRecordæ–‡ä»¶å—ï¼Œè¿˜æ˜¯åªèƒ½å­˜åºåˆ—åŒ–çš„åè®®ç¼“å­˜ï¼Ÿ</p>
<blockquote>
<p>å¯ä»¥å°†ä»»æ„çš„äºŒçº§åˆ¶æ•°æ®å­˜å…¥</p>
<p>ä½†é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯æ‘å¡¾åºåˆ—åŒ–çš„åè®®ç¼“å­˜ï¼Œå¯ä»¥è¢«å¤šå¹³å°ï¼Œå¤šè¯­è¨€åˆ©ç”¨ã€‚</p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦å°†æ•°æ®è½¬æ¢ä¸ºExampleåè®®ç¼“å­˜ï¼Ÿä¸ºä»€ä¹ˆä¸ä½¿ç”¨è‡ªå·±çš„åè®®ç¼“å­˜ï¼Ÿ</p>
<blockquote>
<p>TensorFlowä¸ºExampleæä¾›äº†è®¸å¤šæ“ä½œï¼Œå¯ä»¥ä¸éœ€è¦è‡ªå·±å®šä¹‰formatè§£é‡Šï¼ˆparseï¼‰</p>
<p>å¦‚æœä¸èƒ½æ»¡è¶³è‡ªå·±çš„éœ€æ±‚æ—¶3ï¼Œå¯ä»¥è‡ªå®šä¹‰åè®®ç¼“å­˜ï¼Œç„¶åç”¨protocç¼–è¯‘ã€‚</p>
</blockquote>
</li>
<li><p>ä½¿ç”¨TFRecordæ—¶ï¼Œä»€ä¹ˆæ—¶å€™è¦å‹ç¼©ï¼Ÿä¸ºä»€ä¹ˆä¸ç³»ç»ŸåŒ–çš„åšï¼Ÿ</p>
<blockquote>
<p>éœ€è¦ä¸‹è½½æˆ–ä¼ è¾“æ•°æ®æ—¶å¯ä»¥å‹ç¼©ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ•°æ®å‹ç¼©æ—¶é—´ã€‚</p>
</blockquote>
</li>
<li><p>æ•°æ®é¢„å¤„ç†å¯ä»¥åœ¨å†™å…¥æ•°æ®æ–‡ä»¶æ—¶ï¼Œæˆ–åœ¨tf.dataç®¡é“ä¸­ï¼Œæˆ–åœ¨é¢„å¤„ç†å±‚ä¸­ï¼Œæˆ–ä½¿ç”¨TF Transformã€‚è¿™å‡ ç§æ–¹æ³•å„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</p>
<blockquote>
<p>| é¡¹ç›®             | ä¼˜ç‚¹                                                         | ç¼ºç‚¹                                                         |<br>| â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| åœ¨tf.dataç®¡é“ä¸­  | 1. preprocessing logics å’Œ data augmentationå¾ˆç®€å• 2. å¯ä»¥æ„å»ºç®¡é“ | 1. é™ä½è®­ç»ƒè¿‡ç¨‹çš„é€Ÿåº¦ 2. æ¯ä¸ªå®ä¾‹ä¼šåœ¨æ¯ä¸ªepochå¤„ç†ä¸€æ¬¡ï¼Œä¸åƒåœ¨å†™å…¥æ–‡ä»¶å°±å¤„ç†é‚£æ ·ï¼Œåªéœ€ä¸€æ¬¡ã€‚2. è®­ç»ƒå¥½çš„æ¨¡å‹ä»ç„¶éœ€è¦å¤„ç†å¥½çš„æ•°æ® |<br>| åœ¨é¢„å¤„ç†å±‚ä¸­     | 1. åªéœ€è¦åœ¨è®­ç»ƒå’Œé¢„æµ‹çš„æ—¶å€™å†™ä¸€æ¬¡ä»£ç ã€‚2.                    | 1. é™ä½è®­ç»ƒé€Ÿåº¦ã€‚2. æ¯ä¸ªå®ä¾‹ä¼šåœ¨æ¯ä¸ªepochå¤„ç†ä¸€æ¬¡ï¼Œ3. é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®åœ¨GPUä¸Šå¤„ç†ï¼ˆå› ä¸ºæ•°æ®å¤„ç†æ˜¯åœ¨æ¨¡å‹é‡Œï¼‰ï¼Œä¸èƒ½CPUå¤„ç†æ•°æ®ï¼ŒGPUè·‘æ¨¡å‹ |<br>| ä½¿ç”¨TF Transform | 1.  the preprocessed data is materialized, 2. æ¯ä¸ªå®ä¾‹åªéœ€è¦å¤„ç†ä¸€æ¬¡ï¼Œ3. ä»£ç åªéœ€å†™ä¸€æ¬¡. | ä½¿ç”¨æ¯”è¾ƒå›°éš¾                                                 |<br>| åœ¨å†™å…¥æ•°æ®æ–‡ä»¶æ—¶ | 1. è®­ç»ƒè¿‡ç¨‹ä¼šå˜å¾—å¾ˆå¿«ï¼Œ 2. æ•°æ®å¤„ç†ä¹‹åæ¯”è¾ƒå°ï¼ŒèŠ‚çœç©ºé—´ï¼Œæ–¹ä¾¿ä¸‹è½½  3. æ–¹ä¾¿æ£€æŸ¥æ•°æ® | 1. æœ‰å¾ˆå¤špreprocessing logics 2ï¼Œdata augmentationæ—¶ï¼Œéœ€è¦å¾ˆå¤§çš„ç£ç›˜ç©ºé—´å’Œæ—¶é—´ 3ï¼Œéœ€è¦åœ¨å»ºæ¨¡ä¹‹å‰å¤„ç† |</p>
</blockquote>
</li>
<li><p>è¯´å‡ºå‡ ç§å¸¸è§çš„ç¼–ç ç±»å‹ç‰¹å¾çš„æ–¹æ³•ã€‚æ–‡æœ¬å¦‚ä½•ç¼–ç ï¼Ÿ</p>
<blockquote>
<ol>
<li>ordinal encodingï¼šæ¯ä¸ªç±»æ¯”ç»™ä¸€ä¸ªç¼–å·ï¼Œä½†æ˜¯ç¼–å·æœ‰è·ç¦»ï¼Œè€Œä¸ä»£è¡¨å®é™…çš„è·ç¦»</li>
<li>one-hot encodingï¼Œç‹¬çƒ­ç¼–ç </li>
<li>embeddingsï¼ŒåµŒå…¥ç¼–ç </li>
</ol>
<p>æ–‡æœ¬ï¼š</p>
<ol>
<li>ç»Ÿè®¡å•è¯çš„é¢‘ç‡ï¼Œä½¿ç”¨è¯è¢‹ï¼Œä¸€å¥è¯æœ‰è¡¨ç¤ºå•è¯é¢‘æ¬¡çš„çŸ¢é‡è¡¨ç¤ºï¼Œå¯ä»¥ä½¿ç”¨TF-IDFæ–¹æ³•ï¼Œå³é™¤ä»¥logï¼ˆå•è¯å‡ºç°çš„æ–‡ä»¶çš„ä¸ªæ•°ï¼‰æ¥é™ä½å¸¸ç”¨å•è¯çš„åˆ†æ•°ã€‚</li>
<li>count <em>n</em>-gramsï¼Œç»Ÿè®¡è¿ç»­çš„nä¸ªå•è¯ï¼Œå¯ä»¥ä¿ç•™ä¸Šä¸‹æ–‡å…³ç³»ã€‚</li>
<li>é™¤äº†å¯¹å•è¯ç¼–ç ï¼Œè¿˜å¯ä»¥å¯¹å­—æ¯æˆ–è€…subword tokensç¼–ç ã€‚</li>
</ol>
</blockquote>
</li>
<li><p>åŠ è½½Fashion MNISTæ•°æ®é›†ï¼›å°†å…¶åˆ†æˆè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼›æ‰“æ•£è®­ç»ƒé›†ï¼›å°†æ¯ä¸ªæ•°æ®å­˜ä¸ºå¤šä¸ªTFRecordæ–‡ä»¶ã€‚æ¯æ¡è®°å½•åº”è¯¥æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾çš„åºåˆ—åŒ–çš„Exampleåè®®ç¼“å­˜ï¼šåºåˆ—åŒ–çš„å›¾ç‰‡ï¼ˆä½¿ç”¨<code>tf.io.serialize_tensor()</code>åºåˆ—åŒ–æ¯å¼ å›¾ç‰‡ï¼‰å’Œæ ‡ç­¾ã€‚ç„¶åä½¿ç”¨tf.dataä¸ºæ¯ä¸ªé›†åˆåˆ›å»ºä¸€ä¸ªé«˜æ•ˆæ•°æ®é›†ã€‚æœ€åï¼Œä½¿ç”¨Kerasæ¨¡å‹è®­ç»ƒè¿™äº›æ•°æ®é›†ï¼Œç”¨é¢„å¤„ç†å±‚æ ‡å‡†åŒ–æ¯ä¸ªç‰¹å¾ã€‚è®©è¾“å…¥ç®¡é“è¶Šé«˜æ•ˆè¶Šå¥½ï¼Œä½¿ç”¨TensorBoardå¯è§†åŒ–åœ°åˆ†ææ•°æ®ã€‚</p>
</li>
<li><p>è¿™é“é¢˜ä¸­ï¼Œè¦ä¸‹è½½ä¸€ä¸ªæ•°æ®é›†ï¼Œåˆ†å‰²å®ƒï¼Œåˆ›å»ºä¸€ä¸ªtf.data.Datasetï¼Œç”¨äºé«˜æ•ˆåŠ è½½å’Œé¢„å¤„ç†ï¼Œç„¶åæ­å»ºä¸€ä¸ªåŒ…å«åµŒå…¥å±‚çš„äºŒåˆ†ç±»æ¨¡å‹ï¼š</p>
<p>a. ä¸‹è½½<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fimdb" target="_blank" rel="noopener">Large Movie Review Dataset</a>ï¼Œå®ƒåŒ…å«50000æ¡IMDBçš„å½±è¯„ã€‚æ•°æ®åˆ†ä¸ºä¸¤ä¸ªç›®å½•ï¼Œtrainå’Œtestï¼Œæ¯ä¸ªåŒ…å«12500æ¡æ­£é¢è¯„ä»·å’Œ12500æ¡è´Ÿé¢è¯„ä»·ã€‚æ¯æ¡è¯„ä»·éƒ½å­˜åœ¨ç‹¬ç«‹çš„æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚è¿˜æœ‰å…¶ä»–æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼ˆåŒ…æ‹¬é¢„å¤„ç†çš„è¯è¢‹ï¼‰ï¼Œä½†è¿™ä¸ªç»ƒä¹ ä¸­ç”¨ä¸åˆ°ã€‚</p>
<p>b. å°†æµ‹è¯•é›†åˆ†ç»™æˆéªŒè¯é›†ï¼ˆ15000ï¼‰å’Œæµ‹è¯•é›†ï¼ˆ10000ï¼‰ã€‚</p>
<p>c. ä½¿ç”¨tf.dataï¼Œä¸ºæ¯ä¸ªé›†åˆåˆ›å»ºé«˜æ•ˆæ•°æ®é›†ã€‚</p>
<p>d.åˆ›å»ºä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹ï¼Œä½¿ç”¨<code>TextVectorization</code>å±‚æ¥é¢„å¤„ç†æ¯æ¡å½±è¯„ã€‚å¦‚æœ<code>TextVectorization</code>å±‚ç”¨ä¸äº†ï¼ˆæˆ–è€…ä½ æƒ³æŒ‘æˆ˜ä¸‹ï¼‰ï¼Œåˆ™åˆ›å»ºè‡ªå®šä¹‰çš„é¢„å¤„ç†å±‚ï¼šä½¿ç”¨<code>tf.strings</code>åŒ…ä¸­çš„å‡½æ•°ï¼Œæ¯”å¦‚<code>lower()</code>æ¥åšå°å†™ï¼Œ<code>regex_replace()</code>æ¥æ›¿æ¢å¸¦æœ‰ç©ºæ ¼çš„æ ‡ç‚¹ï¼Œ<code>split()</code>æ¥åˆ†å‰²è¯ã€‚ç”¨æŸ¥æ‰¾è¡¨è¾“å‡ºè¯ç´¢å¼•ï¼Œ<code>adapt()</code>æ–¹æ³•ä¸­è¦å‡†å¤‡å¥½ã€‚</p>
<p>e. åŠ å…¥åµŒå…¥å±‚ï¼Œè®¡ç®—æ¯æ¡è¯„è®ºçš„å¹³å‡åµŒå…¥ï¼Œä¹˜ä»¥è¯æ•°çš„å¹³æ–¹æ ¹ã€‚è¿™ä¸ªç¼©æ”¾è¿‡çš„å¹³å‡åµŒå…¥å¯ä»¥ä¼ å…¥å‰©ä½™çš„æ¨¡å‹ä¸­ã€‚</p>
<p>f. è®­ç»ƒæ¨¡å‹ï¼Œçœ‹çœ‹å‡†ç¡®ç‡èƒ½è¾¾åˆ°å¤šå°‘ã€‚å°è¯•ä¼˜åŒ–ç®¡é“ï¼Œè®©è®­ç»ƒè¶Šå¿«è¶Šå¥½ã€‚</p>
<p>g. ä½¿ç”¨TFDSåŠ è½½åŒæ ·çš„æ•°æ®é›†ï¼š<code>tfds.load(&quot;imdb_reviews&quot;)</code>ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬14ç« -ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°æ·±åº¦è®¡ç®—æœºè§†è§‰"><a href="#ç¬¬14ç« -ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°æ·±åº¦è®¡ç®—æœºè§†è§‰" class="headerlink" title="ç¬¬14ç«  ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°æ·±åº¦è®¡ç®—æœºè§†è§‰"></a>ç¬¬14ç«  ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œå®ç°æ·±åº¦è®¡ç®—æœºè§†è§‰</h2><p>CNNæ²¡æœ‰GPUå¯èƒ½ä¼šå¾ˆæ…¢</p>
<h3 id="è§†ç¥ç»ç»“æ„"><a href="#è§†ç¥ç»ç»“æ„" class="headerlink" title="è§†ç¥ç»ç»“æ„"></a>è§†ç¥ç»ç»“æ„</h3><p>David H. Hubel å’Œ Torsten Wiesel åœ¨1958å¹´å’Œ1959å¹´åœ¨çŒ«çš„èº«ä¸Šåšäº†ä¸€ç³»åˆ—ç ”ç©¶ï¼Œå¯¹è§†ç¥ç»ä¸­æ¢åšäº†ç ”ç©¶ï¼ˆå¹¶åœ¨1981å¹´è£è·äº†è¯ºè´å°”ç”Ÿç†å­¦æˆ–åŒ»å­¦å¥–ï¼‰ã€‚ç‰¹åˆ«çš„ï¼Œä»–ä»¬æŒ‡å‡ºè§†ç¥ç»ä¸­çš„è®¸å¤šç¥ç»å…ƒéƒ½æœ‰ä¸€ä¸ª<strong>å±€éƒ¨æ„Ÿå—é‡ï¼ˆlocal receptive fieldï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›ç¥ç»å…ƒåªå¯¹æœ‰é™è§†è§‰åŒºåŸŸçš„åˆºæ¿€ä½œååº”ã€‚</p>
<p>Yann LeCunç­‰äººå†1998å¹´å‘è¡¨äº†ä¸€ç¯‡é‡Œç¨‹ç¢‘å¼çš„è®ºæ–‡ï¼Œæå‡ºäº†è‘—åçš„LeNet-5æ¶æ„ï¼Œè¢«é“¶è¡Œå¹¿æ³›ç”¨æ¥è¯†åˆ«æ‰‹å†™æ”¯ç¥¨çš„æ•°å­—ã€‚è¿™ä¸ªæ¶æ„ä¸­çš„ä¸€äº›ç»„ä»¶ï¼Œæˆ‘ä»¬å·²ç»å­¦è¿‡äº†ï¼Œæ¯”å¦‚å…¨è¿æ¥å±‚ã€sigmodæ¿€æ´»å‡½æ•°ï¼Œä½†CNNè¿˜å¼•å…¥äº†ä¸¤ä¸ªæ–°ç»„ä»¶ï¼šå·ç§¯å±‚å’Œæ± åŒ–å±‚ã€‚</p>
<blockquote>
<p>å…¨è¿æ¥å±‚çš„æ·±åº¦ç¥ç»ç½‘ç»œå°½ç®¡åœ¨å°å›¾ç‰‡ï¼ˆæ¯”å¦‚MNISTï¼‰ä»»åŠ¡ä¸Šè¡¨ç°ä¸é”™ï¼Œä½†ç”±äºå‚æ•°è¿‡å¤šï¼Œåœ¨å¤§å›¾ç‰‡ä»»åŠ¡ä¸Šè¡¨ç°ä¸ä½³ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€å¼ 100 Ã— 100åƒç´ çš„å›¾ç‰‡æ€»å…±æœ‰10000ä¸ªåƒç´ ç‚¹ï¼Œå¦‚æœç¬¬ä¸€å±‚æœ‰1000ä¸ªç¥ç»å…ƒï¼ˆå¦‚æ­¤å°‘çš„ç¥ç»å…ƒï¼Œå·²ç»é™åˆ¶ä¿¡æ¯çš„ä¼ è¾“é‡äº†ï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰1000ä¸‡ä¸ªè¿æ¥ã€‚è¿™ä»…ä»…æ˜¯ç¬¬ä¸€å±‚çš„æƒ…å†µã€‚CNNæ˜¯é€šè¿‡éƒ¨åˆ†è¿æ¥å±‚å’Œæƒé‡å…±äº«è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
</blockquote>
<h3 id="å·ç§¯å±‚"><a href="#å·ç§¯å±‚" class="headerlink" title="å·ç§¯å±‚"></a>å·ç§¯å±‚</h3><p>å·ç§¯å±‚æ˜¯CNNæœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼šç¬¬ä¸€ä¸ªå·ç§¯å±‚çš„ç¥ç»å…ƒï¼Œä¸æ˜¯ä¸å›¾ç‰‡ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹éƒ½è¿æ¥ï¼Œè€Œæ˜¯åªè¿ç€å±€éƒ¨æ„Ÿå—é‡çš„åƒç´ ã€‚åŒç†ï¼Œç¬¬äºŒä¸ªå·ç§¯å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒä¹Ÿåªæ˜¯è¿ç€ç¬¬ä¸€å±‚ä¸­ä¸€ä¸ªå°æ–¹å½¢å†…çš„ç¥ç»å…ƒã€‚è¿™ç§æ¶æ„å¯ä»¥è®©ç¬¬ä¸€ä¸ªéšè—å±‚èšç„¦äºå°çš„ä½çº§ç‰¹å¾ï¼Œç„¶ååœ¨ä¸‹ä¸€å±‚ç»„æˆå¤§è€Œé«˜çº§çš„ç‰¹å¾ã€‚è¿™ç§<strong>å±‚çº§å¼çš„ç»“æ„</strong>åœ¨çœŸå®ä¸–ç•Œçš„å›¾ç‰‡å¾ˆå¸¸è§ï¼Œè¿™æ˜¯CNNèƒ½åœ¨å›¾ç‰‡è¯†åˆ«ä¸Šå–å¾—å¦‚æ­¤æˆåŠŸçš„åŸå› ä¹‹ä¸€ã€‚</p>
<blockquote>
<p>ç›®å‰æ‰€å­¦è¿‡çš„æ‰€æœ‰å¤šå±‚ç¥ç»ç½‘ç»œçš„å±‚ï¼Œéƒ½æ˜¯ç”±ä¸€é•¿ä¸²ç¥ç»å…ƒç»„æˆçš„ï¼Œæ‰€ä»¥åœ¨å°†å›¾ç‰‡è¾“å…¥ç»™ç¥ç»ç½‘ç»œä¹‹å‰ï¼Œå¿…é¡»å°†å›¾ç‰‡æ‰“å¹³æˆ1Dçš„ã€‚åœ¨CNNä¸­ï¼Œæ¯ä¸ªå±‚éƒ½æ˜¯2Dçš„ï¼Œæ›´å®¹æ˜“å°†ç¥ç»å…ƒå’Œè¾“å…¥åšåŒ¹é…ã€‚</p>
</blockquote>
<p>ä½äºç»™å®šå±‚ç¬¬<code>i</code>è¡Œã€ç¬¬<code>j</code>åˆ—çš„ç¥ç»å…ƒï¼Œå’Œå‰ä¸€å±‚çš„ç¬¬<code>i</code>è¡Œåˆ°ç¬¬<code>i + fh â€“ 1</code>è¡Œã€ç¬¬<code>j</code>åˆ—åˆ°ç¬¬<code>j + fw â€“ 1</code>åˆ—çš„è¾“å‡ºç›¸è¿ï¼Œfhå’Œfwæ˜¯æ„Ÿå—é‡çš„é«˜åº¦å’Œå®½åº¦ï¼ˆè§å›¾14-3ï¼‰ã€‚ä¸ºäº†è®©å·ç§¯å±‚èƒ½å’Œå‰ä¸€å±‚æœ‰ç›¸åŒçš„é«˜åº¦å’Œå®½åº¦ï¼Œé€šå¸¸ç»™è¾“å…¥åŠ ä¸Š0ï¼Œè¿™è¢«ç§°ä¸º<strong>é›¶å¡«å……ï¼ˆzero paddingï¼‰ã€‚</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-1cfddd1d6ac1db56.png?imageMogr2/auto-orient/strip|imageView2/2/w/1102/format/webp" alt="img"></p>
<p><strong>é—´éš”æ„Ÿå—é‡ï¼Œå°†å¤§è¾“å…¥å±‚å’Œå°å·ç§¯å±‚è¿æ¥èµ·æ¥</strong>ã€‚å¯ä»¥æå¤§é™ä½æ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦ã€‚ä¸€ä¸ªæ„Ÿå—é‡åˆ°ä¸‹ä¸€ä¸ªæ„Ÿå—é‡çš„è·ç¦»ç§°ä¸º<strong>æ­¥é•¿</strong>ã€‚5 Ã— 7 çš„è¾“å…¥å±‚ï¼ˆåŠ ä¸Šé›¶å¡«å……ï¼‰ï¼Œè¿æ¥ç€ä¸€ä¸ª3 Ã— 4çš„å±‚ï¼Œä½¿ç”¨ 3 Ã— 3 çš„æ„Ÿå—é‡ï¼Œæ­¥é•¿æ˜¯2ã€‚ä½äºä¸Šå±‚ç¬¬<code>i</code>è¡Œã€ç¬¬<code>j</code>åˆ—çš„ç¥ç»å…ƒï¼Œè¿æ¥ç€å‰ä¸€å±‚çš„ç¬¬<code>i Ã— sh</code>åˆ°<code>i Ã— sh + fh â€“ 1</code>è¡Œã€ç¬¬<code>j Ã— sw</code>åˆ°<code>j Ã— sw + fw â€“ 1</code>åˆ—çš„ç¥ç»å…ƒçš„è¾“å‡ºï¼Œshå’Œswåˆ†åˆ«æ˜¯å‚ç›´å’Œæ°´å¹³æ­¥é•¿ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9968acd895a0095e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1049/format/webp" alt="img"></p>
<h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><p>ç¥ç»å…ƒçš„æƒé‡å¯ä»¥è¡¨ç¤ºä¸ºæ„Ÿå—é‡å¤§å°çš„å›¾ç‰‡ã€‚ä¾‹å¦‚ï¼Œå›¾14-5å±•ç¤ºäº†ä¸¤å¥—å¯èƒ½çš„æƒé‡ï¼ˆç§°ä¸ºæƒé‡ï¼Œæˆ–å·ç§¯æ ¸ï¼‰ã€‚ç¬¬ä¸€ä¸ªæ˜¯é»‘è‰²çš„æ–¹å½¢ï¼Œä¸­å¤®æœ‰å‚ç›´ç™½çº¿ï¼ˆ7 Ã— 7çš„çŸ©é˜µï¼Œé™¤äº†ä¸­é—´çš„ç«–çº¿éƒ½æ˜¯1ï¼Œå…¶å®ƒåœ°æ–¹æ˜¯0ï¼‰ï¼›ä½¿ç”¨è¿™ä¸ªçŸ©é˜µï¼Œç¥ç»å…ƒåªèƒ½æ³¨æ„åˆ°ä¸­é—´çš„å‚ç›´çº¿ï¼ˆå› ä¸ºå…¶å®ƒåœ°æ–¹éƒ½ä¹˜ä»¥0äº†ï¼‰ã€‚ç¬¬äºŒä¸ªè¿‡æ»¤å™¨ä¹Ÿæ˜¯é»‘è‰²çš„æ–¹å½¢ï¼Œä½†æ˜¯ä¸­é—´æ˜¯æ°´å¹³çš„ç™½çº¿ã€‚ä½¿ç”¨è¿™ä¸ªæƒé‡çš„ç¥ç»å…ƒåªä¼šæ³¨æ„ä¸­é—´çš„ç™½è‰²æ°´å¹³çº¿ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-8607c8748eef3e4f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ä¸€å±‚çš„å…¨éƒ¨ç¥ç»å…ƒéƒ½ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå°±èƒ½è¾“å‡ºä¸€ä¸ª<strong>ç‰¹å¾æ˜ å°„ï¼ˆfeature mapï¼‰ï¼Œç‰¹å¾æ˜ å°„å¯ä»¥é«˜äº®å›¾ç‰‡ä¸­æœ€ä¸ºæ¿€æ´»è¿‡æ»¤å™¨çš„åŒºåŸŸã€‚</strong></p>
<h3 id="å †å å¤šä¸ªç‰¹å¾æ˜ å°„"><a href="#å †å å¤šä¸ªç‰¹å¾æ˜ å°„" class="headerlink" title="å †å å¤šä¸ªç‰¹å¾æ˜ å°„"></a>å †å å¤šä¸ªç‰¹å¾æ˜ å°„</h3><p> è®¡ç®—å·ç§¯å±‚ä¸­ç»™å®šç¥ç»å…ƒçš„è¾“å‡º</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-fb733f1a729f0406.png?imageMogr2/auto-orient/strip|imageView2/2/w/1052/format/webp" alt="img"></p>
<blockquote>
<p>åŒä¸€ç‰¹å¾æ˜ å°„ä¸­çš„æ‰€æœ‰ç¥ç»å…ƒå…±äº«ä¸€å¥—å‚æ•°ï¼Œæå¤§åœ°å‡å°‘äº†æ¨¡å‹çš„å‚æ•°é‡ã€‚å½“CNNè®¤è¯†äº†ä¸€ä¸ªä½ç½®çš„å›¾æ¡ˆï¼Œå°±å¯ä»¥åœ¨ä»»ä½•å…¶å®ƒä½ç½®è¯†åˆ«å‡ºæ¥ã€‚ç›¸åçš„ï¼Œå½“å¸¸è§„DNNå­¦ä¼šä¸€ä¸ªå›¾æ¡ˆï¼Œåªèƒ½åœ¨ç‰¹å®šä½ç½®è¯†åˆ«å‡ºæ¥ã€‚</p>
</blockquote>
<h3 id="å†…å­˜éœ€æ±‚"><a href="#å†…å­˜éœ€æ±‚" class="headerlink" title="å†…å­˜éœ€æ±‚"></a>å†…å­˜éœ€æ±‚</h3><p>CNNçš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å·ç§¯å±‚éœ€è¦å¾ˆé«˜çš„å†…å­˜ã€‚ç‰¹åˆ«æ˜¯åœ¨è®­ç»ƒæ—¶ï¼Œå› ä¸ºåå‘ä¼ æ’­éœ€è¦æ‰€æœ‰å‰å‘ä¼ æ’­çš„ä¸­é—´å€¼ã€‚</p>
<h3 id="æ± åŒ–å±‚"><a href="#æ± åŒ–å±‚" class="headerlink" title="æ± åŒ–å±‚"></a>æ± åŒ–å±‚</h3><p>æ˜ç™½å·ç§¯å±‚çš„åŸç†äº†ï¼Œæ± åŒ–å±‚å°±å®¹æ˜“å¤šäº†ã€‚æ± åŒ–å±‚çš„ç›®çš„æ˜¯å¯¹è¾“å…¥å›¾ç‰‡åšé™é‡‡æ ·ï¼ˆå³ï¼Œæ”¶ç¼©ï¼‰ï¼Œä»¥é™ä½è®¡ç®—è´Ÿè½½ã€å†…å­˜æ¶ˆè€—å’Œå‚æ•°çš„æ•°é‡ï¼ˆé™ä½è¿‡æ‹Ÿåˆï¼‰ã€‚</p>
<p>å’Œå·ç§¯å±‚ä¸€æ ·ï¼Œæ± åŒ–å±‚ä¸­çš„æ¯ä¸ªç¥ç»å…ƒä¹Ÿæ˜¯ä¹‹å’Œå‰ä¸€å±‚çš„æ„Ÿå—é‡é‡Œçš„æœ‰é™ä¸ªç¥ç»å…ƒç›¸è¿ã€‚å’Œå‰é¢ä¸€æ ·ï¼Œå¿…é¡»å®šä¹‰æ„Ÿå—é‡çš„å¤§å°ã€æ­¥é•¿å’Œå¡«å……ç±»å‹ã€‚ä½†æ˜¯ï¼Œæ± åŒ–ç¥ç»å…ƒæ²¡æœ‰æƒé‡ï¼Œå®ƒæ‰€è¦åšçš„æ˜¯ä½¿ç”¨èšåˆå‡½æ•°ï¼Œæ¯”å¦‚æœ€å¤§æˆ–å¹³å‡ï¼Œå¯¹è¾“å…¥åšèšåˆã€‚</p>
<p>é™¤äº†å¯ä»¥å‡å°‘è®¡ç®—ã€å†…å­˜æ¶ˆè€—ã€å‚æ•°æ•°é‡ï¼Œæœ€å¤§æ± åŒ–å±‚è¿˜å¯ä»¥å¸¦æ¥å¯¹å°åç§»çš„ä¸å˜æ€§</p>
<p>æœ€å¤§æ± åŒ–å±‚çš„ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ± åŒ–å±‚ç ´åäº†ä¿¡æ¯ï¼šå³ä½¿æ„Ÿå—é‡çš„æ ¸æ˜¯2 Ã— 2ï¼Œæ­¥é•¿æ˜¯2ï¼Œè¾“å‡ºåœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šéƒ½æŸå¤±äº†ä¸€åŠï¼Œæ€»å…±æŸå¤±äº†75%çš„ä¿¡æ¯ã€‚</li>
<li>å¯¹äºæŸäº›ä»»åŠ¡ï¼Œä¸å˜æ€§ä¸å¯å–ã€‚æ¯”å¦‚è¯­ä¹‰åˆ†å‰²ï¼ˆå°†åƒç´ æŒ‰ç…§å¯¹è±¡åˆ†ç±»ï¼‰ï¼šå¦‚æœè¾“å…¥å›¾ç‰‡å‘å³å¹³ç§»äº†ä¸€ä¸ªåƒç´ ï¼Œè¾“å‡ºä¹Ÿåº”è¯¥å‘å³å¹³ç§»ä¸€ä¸ªé™é€Ÿã€‚æ­¤æ—¶å¼ºè°ƒçš„å°±æ˜¯ç­‰ä»·ï¼šè¾“å…¥å‘ç”Ÿå°å˜åŒ–ï¼Œåˆ™è¾“å‡ºä¹Ÿè¦æœ‰å¯¹åº”çš„å°å˜åŒ–ã€‚</li>
</ol>
<p><strong>å¹³å‡æ± åŒ–å±‚</strong>å’Œæœ€å¤§æ± åŒ–å±‚å¾ˆç›¸ä¼¼ï¼Œä½†è®¡ç®—çš„æ˜¯æ„Ÿå—é‡çš„å¹³å‡å€¼ã€‚å¹³å‡æ± åŒ–å±‚åœ¨è¿‡å»å¾ˆæµè¡Œï¼Œä½†æœ€è¿‘äººä»¬ä½¿ç”¨æœ€å¤§æ± åŒ–å±‚æ›´å¤šï¼Œå› ä¸ºæœ€å¤§æ± åŒ–å±‚çš„æ•ˆæœæ›´å¥½ã€‚åˆçœ‹å¾ˆå¥‡æ€ªï¼Œå› ä¸ºè®¡ç®—å¹³å‡å€¼æ¯”æœ€å¤§å€¼æŸå¤±çš„ä¿¡æ¯è¦å°‘ã€‚ä½†æ˜¯ä»åé¢çœ‹ï¼Œæœ€å¤§å€¼ä¿ç•™äº†æœ€å¼ºç‰¹å¾ï¼Œå»é™¤äº†æ— æ„ä¹‰çš„ç‰¹å¾ï¼Œå¯ä»¥è®©ä¸‹ä¸€å±‚è·å¾—æ›´æ¸…æ¥šçš„ä¿¡æ¯ã€‚å¦å¤–ï¼Œæœ€å¤§æ± åŒ–å±‚æä¾›äº†æ›´å¼ºçš„å¹³ç§»ä¸å˜æ€§ï¼Œæ‰€éœ€è®¡ç®—ä¹Ÿæ›´å°‘ã€‚</p>
<p><strong>å…¨å±€å¹³å‡æ± åŒ–å±‚</strong>ã€‚å®ƒè®¡ç®—æ•´ä¸ªç‰¹å¾æ˜ å°„çš„å¹³å‡å€¼ï¼ˆå°±åƒæ˜¯å¹³å‡æ± åŒ–å±‚çš„æ ¸çš„å¤§å°å’Œè¾“å…¥çš„ç©ºé—´ç»´åº¦ä¸€æ ·ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå…¨å±€å¹³å‡æ± åŒ–å±‚å¯¹äºæ¯ä¸ªå®ä¾‹çš„æ¯ä¸ªç‰¹å¾æ˜ å°„ï¼Œåªè¾“å‡ºä¸€ä¸ªå€¼ã€‚è™½ç„¶è¿™ä¹ˆåšå¯¹ä¿¡æ¯çš„ç ´åæ€§å¾ˆå¤§ï¼Œå´å¯ä»¥ç”¨æ¥åšè¾“å‡ºå±‚ã€‚</p>
<p><strong>æ·±åº¦æ–¹å‘æœ€å¤§æ± åŒ–å±‚ï¼š</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4030e5fa51363eb8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="CNNæ¶æ„"><a href="#CNNæ¶æ„" class="headerlink" title="CNNæ¶æ„"></a>CNNæ¶æ„</h3><p>CNNçš„å…¸å‹æ¶æ„æ˜¯ï¼šå‡ ä¸ªå·ç§¯å±‚å èµ·æ¥ï¼ˆæ¯ä¸ªå·ç§¯å±‚åé¢è·Ÿç€ä¸€ä¸ªReLUå±‚ï¼‰+ æ± åŒ–å±‚+å·ç§¯å±‚ï¼ˆ+ReLUï¼‰ï¼Œ+æ± åŒ–å±‚ã€‚å›¾ç‰‡åœ¨æµç»ç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸­ï¼Œå˜å¾—è¶Šæ¥è¶Šå°ï¼Œä½†å¾—ç›Šäºå·ç§¯å±‚ï¼Œå´å˜å¾—è¶Šæ¥è¶Šæ·±ï¼ˆç‰¹å¾æ˜ å°„å˜å¤šäº†ï¼‰ã€‚åœ¨CNNçš„é¡¶éƒ¨ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸¸è§„çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œç”±å‡ ä¸ªå…¨è¿æ¥å±‚ï¼ˆ+ReLUï¼‰ç»„æˆï¼Œæœ€ç»ˆå±‚è¾“å‡ºé¢„æµ‹ï¼ˆæ¯”å¦‚ï¼Œä¸€ä¸ªè¾“å‡ºç±»å‹æ¦‚ç‡çš„softmaxå±‚ï¼‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4590999c8c41bf3e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="LeNet-5"><a href="#LeNet-5" class="headerlink" title="LeNet-5"></a>LeNet-5</h3><p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Flenet5" target="_blank" rel="noopener">LeNet-5</a> ä¹Ÿè®¸æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„CNNæ¶æ„ã€‚ç”±Yann LeCunåœ¨1998å¹´åˆ›é€ å‡ºæ¥çš„ï¼Œè¢«å¹¿æ³›ç”¨äºæ‰‹å†™å­—è¯†åˆ«ï¼ˆMNISTï¼‰ã€‚ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="//upload-images.jianshu.io/upload_images/7178691-ed2580d5b84531fb.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h3><p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F80" target="_blank" rel="noopener">AlexNet CNN æ¶æ„</a>æ˜¯2012 ImageNet ILSVRCå† å†›ï¼šTop-5è¯¯å·®ç‡è¾¾åˆ°äº†17%ï¼Œç”±Alex Krizhevskyã€Ilya Sutskever å’Œ Geoffrey Hintonå‘æ˜ã€‚AlexNetå’ŒLeNet-5å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯æ›´å¤§æ›´æ·±ï¼Œæ˜¯é¦–ä¸ªå°†å·ç§¯å±‚å †å èµ·æ¥çš„ç½‘ç»œï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå·ç§¯å±‚ä¸Šå†åŠ ä¸€ä¸ªæ± åŒ–å±‚ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-1c5bbecf35d2e8d9.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<blockquote>
<p>æ•°æ®å¢å¼ºæ˜¯é€šè¿‡ç”Ÿæˆè®¸å¤šè®­ç»ƒå®ä¾‹çš„çœŸå®å˜ç§ï¼Œæ¥äººä¸ºå¢å¤§è®­ç»ƒé›†ã€‚å› ä¸ºå¯ä»¥é™ä½è¿‡æ‹Ÿåˆï¼Œæˆä¸ºäº†ä¸€ç§æ­£åˆ™åŒ–æ–¹æ³•ã€‚ç”Ÿæˆå‡ºæ¥çš„å®ä¾‹è¶ŠçœŸå®è¶Šå¥½ï¼šæœ€ç†æƒ³çš„æƒ…å†µï¼Œäººä»¬æ— æ³•åŒºåˆ†å¢å¼ºå›¾ç‰‡æ˜¯åŸç”Ÿçš„è¿˜æ˜¯å¢å¼ºè¿‡çš„ã€‚ç®€å•çš„æ·»åŠ ç™½å™ªå£°æ²¡æœ‰ç”¨ï¼Œå¢å¼ºä¿®æ”¹è¦æ˜¯å¯ä»¥å­¦ä¹ çš„ï¼ˆç™½å™ªå£°ä¸å¯å­¦ä¹ ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯ä»¥è½»å¾®åç§»ã€æ—‹è½¬ã€ç¼©æ”¾åŸç”Ÿå›¾ï¼Œå†æ·»åŠ åˆ°è®­ç»ƒé›†ä¸­ï¼ˆè§å›¾14-12ï¼‰ã€‚è¿™ä¹ˆåšå¯ä»¥ä½¿æ¨¡å‹å¯¹ä½ç½®ã€æ–¹å‘å’Œç‰©ä½“åœ¨å›¾ä¸­çš„å¤§å°ï¼Œæœ‰æ›´é«˜çš„å®¹å¿åº¦ã€‚å¦‚æœæƒ³è®©æ¨¡å‹å¯¹ä¸åŒå…‰åº¦æœ‰å®¹å¿åº¦ï¼Œå¯ä»¥ç”Ÿæˆå¯¹æ¯”åº¦ä¸åŒçš„ç…§ç‰‡ã€‚é€šå¸¸ï¼Œè¿˜å¯ä»¥æ°´å¹³ç¿»è½¬å›¾ç‰‡ï¼ˆæ–‡å­—ä¸æˆã€ä¸å¯¹ç§°ç‰©ä½“ä¹Ÿä¸æˆï¼‰ã€‚é€šè¿‡è¿™äº›å˜æ¢ï¼Œå¯ä»¥æå¤§çš„å¢å¤§è®­ç»ƒé›†ã€‚</p>
</blockquote>
<p>AlexNetè¿˜åœ¨C1å’ŒC3å±‚çš„ReLUä¹‹åï¼Œä½¿ç”¨äº†å¼ºå¤§çš„å½’ä¸€åŒ–æ–¹æ³•ï¼Œç§°ä¸º<strong>å±€éƒ¨å“åº”å½’ä¸€åŒ–ï¼ˆLRNï¼‰</strong>ï¼šæ¿€æ´»æœ€å¼ºçš„ç¥ç»å…ƒæŠ‘åˆ¶äº†ç›¸åŒä½ç½®çš„ç›¸é‚»ç‰¹å¾æ˜ å°„çš„ç¥ç»å…ƒï¼ˆè¿™æ ·çš„ç«äº‰æ€§æ¿€æ´»ä¹Ÿåœ¨ç”Ÿç‰©ç¥ç»å…ƒä¸Šè§‚å¯Ÿåˆ°äº†ï¼‰ã€‚è¿™ä¹ˆåšå¯ä»¥è®©ä¸åŒçš„ç‰¹å¾æ˜ å°„ä¸“ä¸šåŒ–ï¼Œç‰¹å¾èŒƒå›´æ›´å¹¿ï¼Œæå‡æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-39ad65a741a0b167.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="GoogLeNet"><a href="#GoogLeNet" class="headerlink" title="GoogLeNet"></a>GoogLeNet</h3><p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F81" target="_blank" rel="noopener">GoogLeNet æ¶æ„</a>æ˜¯Google Researchçš„Christian SzegedyåŠå…¶åŒäº‹å‘æ˜çš„ï¼Œæ˜¯2014å¹´ILSVRCçš„å† å†› ï¼Œtop-5è¯¯å·®ç‡é™ä½åˆ°äº†7%ä»¥å†…ã€‚èƒ½å–å¾—è¿™ä¹ˆå¤§çš„è¿›æ­¥ï¼Œå¾ˆå¤§çš„åŸå› æ˜¯å®ƒçš„ç½‘ç»œæ¯”ä¹‹å‰çš„CNNæ›´æ·±ã€‚åˆ›å§‹æ¨¡å—ï¼ˆinception moduleï¼‰çš„å­ç½‘ç»œè®©GoogLeNetå¯ä»¥ç”¨æ›´é«˜çš„æ•ˆç‡ä½¿ç”¨å‚æ•°ï¼šå®é™…ä¸Šï¼ŒGoogLeNetçš„å‚æ•°é‡æ¯”AlexNetå°10å€ï¼ˆå¤§çº¦æ˜¯600ä¸‡ï¼Œè€Œä¸æ˜¯AlexNetçš„6000ä¸‡ï¼‰ã€‚</p>
<p><strong>åˆ›å§‹æ¨¡å—çš„æ¶æ„</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4c0d23d3db687219.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="VGGNet"><a href="#VGGNet" class="headerlink" title="VGGNet"></a>VGGNet</h3><p>ILSVRC 2014å¹´çš„äºšå†›æ˜¯<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F83" target="_blank" rel="noopener">VGGNet</a>ï¼Œä½œè€…æ˜¯æ¥è‡ªç‰›æ´¥å¤§å­¦Visual Geometry Groupï¼ˆVGCï¼‰çš„Karen Simonyan å’Œ Andrew Zissermanã€‚VGGNetçš„æ¶æ„ç®€å•è€Œç»å…¸ï¼Œ2æˆ–3ä¸ªå·ç§¯å±‚å’Œ1ä¸ªæ± åŒ–å±‚ï¼Œç„¶ååˆæ˜¯2æˆ–3ä¸ªå·ç§¯å±‚å’Œ1ä¸ªæ± åŒ–å±‚ï¼Œä»¥æ­¤ç±»æ¨ï¼ˆæ€»å…±è¾¾åˆ°16æˆ–19ä¸ªå·ç§¯å±‚ï¼‰ã€‚æœ€ç»ˆåŠ ä¸Šä¸€ä¸ªæœ‰ä¸¤ä¸ªéšè—å±‚å’Œè¾“å‡ºå±‚çš„ç´§å¯†ç½‘ç»œã€‚VGGNetåªç”¨3 Ã— 3çš„è¿‡æ»¤å™¨ï¼Œä½†æ•°é‡å¾ˆå¤šã€‚</p>
<h3 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h3><p>ä½•å‡¯æ˜ä½¿ç”¨<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F82" target="_blank" rel="noopener"><em>Residual Network</em> (æˆ– <em>ResNet</em>)</a>èµ¢å¾—äº†ILSVRC 2015çš„å† å†›ï¼Œtop-5è¯¯å·®ç‡é™ä½åˆ°äº†3.6%ä»¥ä¸‹ã€‚ResNetçš„ä½¿ç”¨äº†ææ·±çš„å·ç§¯ç½‘ç»œï¼Œå…±152å±‚ï¼ˆå…¶å®ƒçš„å˜ä½“æœ‰1450æˆ–152å±‚ï¼‰ã€‚åæ˜ äº†ä¸€ä¸ªæ€»ä½“è¶‹åŠ¿ï¼š<strong>æ¨¡å‹å˜å¾—è¶Šæ¥è¶Šæ·±ï¼Œå‚æ•°è¶Šæ¥è¶Šå°‘</strong>ã€‚è®­ç»ƒè¿™æ ·çš„æ·±åº¦ç½‘ç»œçš„æ–¹æ³•æ˜¯ä½¿ç”¨è·³è¿æ¥ï¼ˆä¹Ÿè¢«ç§°ä¸ºå¿«æ·è¿æ¥ï¼‰ï¼šè¾“å…¥ä¿¡å·æ·»åŠ åˆ°æ›´é«˜å±‚çš„è¾“å‡ºä¸Šã€‚</p>
<p>æ®‹å·®å­¦ä¹ ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e911c02ef15d5001.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹åšè¿ç§»å­¦ä¹ "><a href="#ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹åšè¿ç§»å­¦ä¹ " class="headerlink" title="ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹åšè¿ç§»å­¦ä¹ "></a>ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹åšè¿ç§»å­¦ä¹ </h3><h3 id="åˆ†ç±»å’Œå®šä½"><a href="#åˆ†ç±»å’Œå®šä½" class="headerlink" title="åˆ†ç±»å’Œå®šä½"></a>åˆ†ç±»å’Œå®šä½</h3><p>å®šä½å›¾ç‰‡ä¸­çš„ç‰©ä½“å¯ä»¥è¡¨è¾¾ä¸ºä¸€ä¸ªå›å½’ä»»åŠ¡ï¼šé¢„æµ‹ç‰©ä½“çš„èŒƒå›´æ¡†ï¼Œä¸€ä¸ªå¸¸è§çš„æ–¹æ³•æ˜¯é¢„æµ‹ç‰©ä½“ä¸­å¿ƒçš„æ°´å¹³å’Œå‚ç›´åæ ‡ï¼Œå’Œå…¶é«˜åº¦å’Œå®½åº¦ã€‚</p>
<p>MSEä½œä¸ºæŸå¤±å‡½æ•°æ¥è®­ç»ƒæ¨¡å‹æ•ˆæœå¾ˆå¥½ï¼Œä½†ä¸æ˜¯è¯„ä¼°æ¨¡å‹é¢„æµ‹è¾¹æ¡†çš„å¥½æŒ‡æ ‡ã€‚æœ€å¸¸è§çš„æŒ‡æ ‡æ˜¯äº¤å¹¶æ¯”ï¼ˆIntersection over Union (IoU)ï¼‰ï¼šé¢„æµ‹è¾¹æ¡†ä¸ç›®æ ‡è¾¹æ¡†çš„é‡å éƒ¨åˆ†ï¼Œé™¤ä»¥ä¸¤è€…çš„å¹¶é›†ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-67bc697752690e26.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç›®æ ‡æ£€æµ‹"><a href="#ç›®æ ‡æ£€æµ‹" class="headerlink" title="ç›®æ ‡æ£€æµ‹"></a>ç›®æ ‡æ£€æµ‹</h3><p>åˆ†ç±»å¹¶å®šä½å›¾ç‰‡ä¸­çš„å¤šä¸ªç‰©ä½“çš„ä»»åŠ¡è¢«ç§°ä¸ºç›®æ ‡æ£€æµ‹ã€‚</p>
<h3 id="å…¨å·ç§¯ç½‘ç»œï¼ˆfully-convolutional-networkï¼ŒFCNï¼‰"><a href="#å…¨å·ç§¯ç½‘ç»œï¼ˆfully-convolutional-networkï¼ŒFCNï¼‰" class="headerlink" title="å…¨å·ç§¯ç½‘ç»œï¼ˆfully convolutional networkï¼ŒFCNï¼‰"></a>å…¨å·ç§¯ç½‘ç»œï¼ˆfully convolutional networkï¼ŒFCNï¼‰</h3><h3 id="å…¨å·ç§¯å±‚"><a href="#å…¨å·ç§¯å±‚" class="headerlink" title="å…¨å·ç§¯å±‚"></a>å…¨å·ç§¯å±‚</h3><p>FCNæ˜¯Jonathan Longåœ¨2015å¹´çš„ä¸€ç¯‡<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Ffcn" target="_blank" rel="noopener">è®ºæ–‡</a>æ±‡æ€»æå‡ºçš„ï¼Œç”¨äºè¯­ä¹‰åˆ†å‰²ï¼ˆæ ¹æ®æ‰€å±ç›®æ ‡ï¼Œå¯¹å›¾ç‰‡ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œåˆ†ç±»ï¼‰</p>
<h3 id="åªçœ‹ä¸€æ¬¡ï¼ˆYOLOï¼‰"><a href="#åªçœ‹ä¸€æ¬¡ï¼ˆYOLOï¼‰" class="headerlink" title="åªçœ‹ä¸€æ¬¡ï¼ˆYOLOï¼‰"></a>åªçœ‹ä¸€æ¬¡ï¼ˆYOLOï¼‰</h3><p>åªçœ‹ä¸€æ¬¡â€ï¼ˆYou Only Look Onceï¼ŒYOLOï¼‰æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œï¼ˆéå¸¸å¿«ä¸”å‡†ç¡®ï¼‰çš„<strong>ç›®æ ‡æ£€æµ‹æ¶æ„</strong>çš„åå­—ï¼Œæ˜¯Joseph Redmonåœ¨2015å¹´çš„ä¸€ç¯‡<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fyolo" target="_blank" rel="noopener">è®ºæ–‡</a>ä¸­æå‡ºçš„ï¼Œ2016å¹´ä¼˜åŒ–ä¸º<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fyolo2" target="_blank" rel="noopener">YOLOv2</a>ï¼Œ2018å¹´ä¼˜åŒ–ä¸º<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fyolo3" target="_blank" rel="noopener">YOLOv3</a>ã€‚é€Ÿåº¦å¿«åˆ°ç”šè‡³å¯ä»¥åœ¨å®æ—¶è§†é¢‘ä¸­è¿è¡Œã€‚</p>
<p>å¹³å‡ç²¾åº¦å‡å€¼ï¼ˆmean Average Precisionï¼ŒmAPï¼‰</p>
<blockquote>
<p>ç›®æ ‡æ£€æµ‹ä¸­éå¸¸å¸¸è§çš„æŒ‡æ ‡æ˜¯å¹³å‡ç²¾åº¦å‡å€¼ã€‚</p>
<p>å‡è®¾å½“å¬å›ç‡ä¸º10%æ—¶ï¼Œåˆ†ç±»å™¨çš„ç²¾ç¡®ç‡æ˜¯90%ï¼Œå¬å›ç‡ä¸º20%æ—¶ï¼Œç²¾ç¡®ç‡æ˜¯96%ã€‚è¿™é‡Œå°±æ²¡æœ‰å–èˆå…³ç³»ï¼šä½¿ç”¨å¬å›ç‡ä¸º20%çš„åˆ†ç±»å™¨å°±å¥½ï¼Œå› ä¸ºæ­¤æ—¶ç²¾ç¡®ç‡æ›´é«˜ã€‚æ‰€ä»¥å½“å¬å›ç‡è‡³å°‘æœ‰10%æ—¶ï¼Œéœ€è¦æ‰¾åˆ°æœ€é«˜ç²¾ç¡®ç‡ï¼Œå³96%ã€‚å› æ­¤ï¼Œä¸€ä¸ªè¡¡é‡æ¨¡å‹æ€§èƒ½çš„æ–¹æ³•æ˜¯è®¡ç®—å¬å›ç‡è‡³å°‘ä¸º0%æ—¶ï¼Œè®¡ç®—æœ€å¤§ç²¾ç¡®ç‡ï¼Œå†è®¡ç®—å¬å›ç‡è‡³å°‘ä¸º10%æ—¶çš„æœ€å¤§ç²¾ç¡®ç‡ï¼Œå†è®¡ç®—å¬å›ç‡è‡³å°‘ä¸º20%æ—¶çš„æœ€å¤§ç²¾ç¡®ç‡ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€åè®¡ç®—è¿™äº›æœ€å¤§ç²¾ç¡®ç‡çš„å¹³å‡å€¼ï¼Œè¿™ä¸ªæŒ‡æ ‡ç§°ä¸ºå¹³å‡ç²¾ç¡®ç‡ï¼ˆAverage Precision (AP)ï¼‰ã€‚å½“æœ‰è¶…è¿‡ä¸¤ä¸ªç±»æ—¶ï¼Œå¯ä»¥è®¡ç®—æ¯ä¸ªç±»çš„APï¼Œç„¶åè®¡ç®—å¹³å‡APï¼ˆå³ï¼ŒmAPï¼‰ã€‚</p>
</blockquote>
<p>IOUé˜ˆå€¼:</p>
<blockquote>
<p>åœ¨ç›®æ ‡æ£€æµ‹ä¸­ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªå¤æ‚åº¦ï¼šå¦‚æœç³»ç»Ÿæ£€æµ‹åˆ°äº†æ­£ç¡®çš„ç±»ï¼Œä½†æ˜¯å®šä½é”™äº†ï¼Œå½“ç„¶ä¸èƒ½å°†å…¶ä½œä¸ºæ­£é¢„æµ‹ã€‚ä¸€ç§æ–¹æ³•æ˜¯å®šä¹‰IOUé˜ˆå€¼ï¼šä¾‹å¦‚ï¼Œåªæœ‰å½“IOUè¶…è¿‡0.5æ—¶ï¼Œé¢„æµ‹æ‰æ˜¯æ­£ç¡®çš„ã€‚ç›¸åº”çš„mAPè¡¨ç¤ºä¸ºmAP@0.5ï¼ˆæˆ–mAP@50%ï¼Œæˆ–AP50ï¼‰ã€‚</p>
</blockquote>
<h3 id="è¯­ä¹‰åˆ†å‰²"><a href="#è¯­ä¹‰åˆ†å‰²" class="headerlink" title="è¯­ä¹‰åˆ†å‰²"></a>è¯­ä¹‰åˆ†å‰²</h3><p>åœ¨è¯­ä¹‰åˆ†å‰²ä¸­ï¼Œæ¯ä¸ªåƒç´ æ ¹æ®å…¶æ‰€å±çš„ç›®æ ‡æ¥è¿›è¡Œåˆ†ç±»ã€‚ç›¸åŒç±»çš„ä¸åŒç›®æ ‡æ˜¯ä¸åšåŒºåˆ†çš„ã€‚</p>
<h3 id="ç»ƒä¹ -4"><a href="#ç»ƒä¹ -4" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å¯¹äºå›¾ç‰‡åˆ†ç±»ï¼ŒCNNç›¸å¯¹äºå…¨è¿æ¥DNNçš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<ol>
<li>CNNç¥ç»å…ƒä¹‹é—´éƒ¨åˆ†è¿æ¥ï¼Œå‚æ•°å°‘</li>
<li>å½“CNNçš„æ ¸å­¦ä¼šè¯†åˆ«ä¸€ä¸ªç‰¹å¾åï¼Œå¯ä»¥åœ¨å›¾åƒä»»æ„ä½ç½®è¯†åˆ«è¯¥ç‰¹å¾ï¼Œè€ŒDNNåªèƒ½åœ¨ç‰¹å®šçš„ä½ç½®è¯†åˆ«ã€‚</li>
<li>DNNå°†å›¾åƒæ•°æ®flattenï¼Œæ¯ä¸ªåƒç´ ä¹‹é—´çš„ä½ç½®å…³ç³»ä¸èƒ½è¢«ä¿æŒ</li>
</ol>
</blockquote>
</li>
<li><p>è€ƒè™‘ä¸€ä¸ªCNNï¼Œæœ‰3ä¸ªå·ç§¯å±‚ï¼Œæ¯ä¸ªéƒ½æ˜¯3 Ã— 3çš„æ ¸ï¼Œæ­¥é•¿ä¸º2ï¼Œé›¶å¡«å……ã€‚æœ€ä½çš„å±‚è¾“å‡º100ä¸ªç‰¹å¾æ˜ å°„ï¼Œä¸­é—´çš„è¾“å‡º200ä¸ªç‰¹å¾æ˜ å°„ï¼Œæœ€ä¸Šé¢çš„è¾“å‡º400ä¸ªã€‚è¾“å…¥å›¾ç‰‡æ˜¯200 Ã— 300åƒç´ çš„RGBå›¾ã€‚è¿™ä¸ªCNNçš„æ€»å‚æ•°é‡æ˜¯å¤šå°‘ï¼Ÿå¦‚æœä½¿ç”¨32ä½æµ®ç‚¹æ•°ï¼Œåšæµ‹è¯•éœ€è¦å¤šå°‘å†…å­˜ï¼Ÿæ‰¹æ¬¡æ˜¯50å¼ å›¾ç‰‡ï¼Œè®­ç»ƒæ—¶çš„å†…å­˜æ¶ˆè€—æ˜¯å¤šå°‘ï¼Ÿ</p>
<blockquote>
<p>ç¬¬ä¸€å±‚ï¼š[3x3x3(RGBä¸‰é€šé“)+1ï¼ˆåç½®å‘ï¼‰]*100=2800</p>
<p>ç¬¬äºŒå±‚ï¼š[3x3x100+1]*200=180200</p>
<p>ç¬¬ä¸‰å±‚ï¼š[3x3x200+1]*400=720400</p>
<p>æ‰€ä»¥ä¸‰å±‚å…±æœ‰903400ä¸ªå‚æ•°ã€‚</p>
<hr>
<p>32ä½æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­å 4ä¸ªå­—èŠ‚ã€‚å‡è®¾stride=2</p>
<p>ç¬¬ä¸€å±‚æœ‰100ä¸ªfeature mapï¼Œ4x100x100x150=6ç™¾ä¸‡å­—èŠ‚ï¼ˆ6MBï¼‰</p>
<p>åŒç†ç¬¬äºŒå±‚ï¼š4x200x50x75=3MB</p>
<p>ç¬¬ä¸‰å±‚ï¼š4x400x25x38=1.5MB</p>
<p>ä½†æ˜¯åªéœ€åŒæ—¶ä¿è¯ä¸¤å±‚çš„è®¡ç®—ç»“æœï¼Œæœ€å¤§ä¸ºå‰ä¸¤å±‚ï¼š9MB</p>
<p>å‚æ•°å ç”¨å†…å­˜ï¼š4*903400=3.6MB</p>
<p>å…±12.6MB</p>
<hr>
<p>åå‘ä¼ æ’­è¦æ±‚ä¿ç•™å‘å‰è®¡ç®—çš„æ‰€æœ‰ç»“æœï¼Œæ¯ä¸ªå®ä¾‹ä¸‰å±‚-10.5MBï¼Œmini-batch=50ï¼Œéœ€è¦525MB</p>
<p>50å¼ å›¾ç‰‡éœ€è¦ï¼š50x4x200x300x3=36MB</p>
<p>å‚æ•°éœ€è¦3.6MB</p>
<p>è¿˜éœ€è¦ä¸€äº›å†…å­˜è®°å½•æ¢¯åº¦</p>
<p>å…±éœ€è¦564.6MB</p>
</blockquote>
</li>
<li><p>å¦‚æœè®­ç»ƒCNNæ—¶GPUå†…å­˜ä¸å¤Ÿï¼Œè§£å†³è¯¥é—®é¢˜çš„5ç§æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<ol>
<li>å‡å°batchçš„å¤§å°</li>
<li>ä½¿ç”¨æ›´å¤§çš„strider</li>
<li>å»æ‰å‡ å±‚å·ç§¯å±‚</li>
<li>ä½¿ç”¨16ä½æµ®ç‚¹æ•°ï¼Œè€Œä¸æ˜¯32ä½æµ®ç‚¹æ•°</li>
<li>åˆ†å¸ƒå¼è®­ç»ƒï¼Œå°†CNNåˆ†å¸ƒåˆ°å¤šå°è®¡ç®—æœºä¸Š</li>
</ol>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨æœ€å¤§æ± åŒ–å±‚ï¼Œè€Œä¸æ˜¯åŒæ ·æ­¥é•¿çš„å·ç§¯å±‚ï¼Ÿ</p>
<blockquote>
<p>æœ€å¤§æ± åŒ–å±‚ä¸éœ€è¦å‚æ•°ï¼ŒåŒæ ·ä¸é•¿çš„å·ç§¯å±‚éœ€è¦å‚æ•°ã€‚</p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨å±€éƒ¨å“åº”å½’ä¸€åŒ–å±‚ï¼Ÿ</p>
<blockquote>
<p>LRN:æ¿€æ´»æœ€å¼ºçš„ç¥ç»å…ƒæŠ‘åˆ¶äº†ç›¸åŒä½ç½®çš„ç›¸é‚»ç‰¹å¾æ˜ å°„çš„ç¥ç»å…ƒï¼ˆè¿™æ ·çš„ç«äº‰æ€§æ¿€æ´»ä¹Ÿåœ¨ç”Ÿç‰©ç¥ç»å…ƒä¸Šè§‚å¯Ÿåˆ°äº†ï¼‰ã€‚è¿™ä¹ˆåšå¯ä»¥è®©ä¸åŒçš„ç‰¹å¾æ˜ å°„ä¸“ä¸šåŒ–ï¼Œç‰¹å¾èŒƒå›´æ›´å¹¿ï¼Œæå‡æ³›åŒ–èƒ½åŠ›ã€‚</p>
</blockquote>
</li>
<li><p>AlexNetç›¸å¯¹äºLeNet-5çš„åˆ›æ–°åœ¨å“ªé‡Œï¼ŸGoogLeNetã€ResNetã€SENetã€Xceptionçš„åˆ›æ–°åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>AlexNetç®±è§„ä¸LeNet-5 æ›´å¤§æ›´æ·±ï¼Œå¹¶ä¸”å°†å·ç§¯å±‚é“¾æ¥åˆ°ä¸€èµ·ï¼Œè€Œä¸æ˜¯å·ç§¯å±‚+æ± åŒ–å±‚</p>
<p>GoogLeNetï¼šå¼•å…¥åˆ›å§‹æ¨¡å—ï¼Œå¯ä»¥å±‚æ•°æ›´æ·±ï¼Œè€Œå‚æ•°æ›´å°‘</p>
<p>ResNetï¼šè·³æ¥</p>
<p>SENetï¼š åœ¨åŸå§‹æ¶æ„çš„æ¯ä¸ªå•å…ƒï¼ˆæ¯”å¦‚åˆ›å§‹æ¨¡å—æˆ–æ®‹å·®å•å…ƒï¼‰ä¸Šæ·»åŠ äº†ä¸€ä¸ªå°çš„ç¥ç»ç½‘ç»œï¼Œç§°ä¸ºSEå—</p>
<p>Xceptionï¼šä½¿ç”¨depthwise separable convolutional layers</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯å…¨å·ç§¯ç½‘ç»œï¼Ÿå¦‚ä½•å°†ç´§å¯†å±‚è½¬å˜ä¸ºå·ç§¯å±‚ï¼Ÿ</p>
<blockquote>
<p>FCN: å®Œå…¨ç”±å·ç§¯å±‚å’Œæ± åŒ–å±‚æ„æˆã€‚åœ¨ç›®æ ‡æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²é¢†åŸŸå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåªéœ€è¦æ‰«æå›¾ç‰‡ä¸€æ¬¡ã€‚</p>
<p>å°†ç´§å¯†å±‚æ›¿æ¢ä¸ºæ ¸å¤§å°ç­‰äºå±‚è¾“å…¥å¤§å°çš„å·ç§¯å±‚ï¼Œä½¿ç”¨valid paddingï¼Œæ¿€æ´»å‡½æ•°å¯ä»¥ä¸ç”¨å˜ã€‚</p>
</blockquote>
<p>è¯­ä¹‰åˆ†å‰²çš„ä¸»è¦æŠ€æœ¯éš¾ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>åœ¨æµç»CNNç½‘ç»œè¿‡ç¨‹ä¸­ï¼Œä¸€äº›ç©ºé—´ä¿¡æ¯ä¼šæ¶ˆå¤±</p>
</blockquote>
</li>
<li><p>ä»é›¶æ­å»ºä½ çš„CNNï¼Œå¹¶åœ¨MNISTä¸Šè¾¾åˆ°å°½å¯èƒ½é«˜çš„å‡†ç¡®ç‡ã€‚</p>
</li>
<li><p>ä½¿ç”¨è¿ç§»å­¦ä¹ æ¥åšå¤§å›¾ç‰‡åˆ†ç±»ï¼Œç»è¿‡ä¸‹é¢æ­¥éª¤ï¼š</p>
<p>a. åˆ›å»ºæ¯ä¸ªç±»è‡³å°‘æœ‰100å¼ å›¾ç‰‡çš„è®­ç»ƒé›†ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨è‡ªå·±çš„å›¾ç‰‡åŸºäºåœ°ç‚¹æ¥åˆ†ç±»ï¼ˆæ²™æ»©ã€å±±ã€åŸå¸‚ï¼Œç­‰ç­‰ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ç°æˆçš„æ•°æ®é›†ï¼ˆæ¯”å¦‚ä»TensorFlow Datasetsï¼‰ã€‚</p>
<p>b. å°†å…¶åˆ†æˆè®­ç»ƒé›†ã€éªŒè¯é›†ã€è®­ç»ƒé›†ã€‚</p>
<p>c. æ­å»ºè¾“å…¥ç®¡é“ï¼ŒåŒ…æ‹¬å¿…è¦çš„é¢„å¤„ç†æ“ä½œï¼Œæœ€å¥½åŠ ä¸Šæ•°æ®å¢å¼ºã€‚</p>
<p>d. åœ¨è¿™ä¸ªæ•°æ®é›†ä¸Šï¼Œå¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹ã€‚</p>
</li>
<li><p>å°è¯•ä¸‹TensorFlowçš„<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fstyletuto" target="_blank" rel="noopener">é£æ ¼è¿ç§»æ•™ç¨‹</a>ã€‚ç”¨æ·±åº¦å­¦ä¹ ç”Ÿæˆè‰ºæœ¯ä½œå“å¾ˆæœ‰è¶£ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬15ç« -ä½¿ç”¨RNNå’ŒCNNå¤„ç†åºåˆ—"><a href="#ç¬¬15ç« -ä½¿ç”¨RNNå’ŒCNNå¤„ç†åºåˆ—" class="headerlink" title="ç¬¬15ç«  ä½¿ç”¨RNNå’ŒCNNå¤„ç†åºåˆ—"></a>ç¬¬15ç«  ä½¿ç”¨RNNå’ŒCNNå¤„ç†åºåˆ—</h2><p>å¾ªç¯ç¥ç»ç½‘ç»œï¼Œä¸€ç±»å¯ä»¥é¢„æµ‹æœªæ¥çš„ç½‘ç»œï¼ˆå½“ç„¶ï¼Œæ˜¯åˆ°æŸä¸€ç‚¹ä¸ºæ­¢ï¼‰</p>
<p>RNNé¢å¯¹çš„ä¸¤å¤§éš¾ç‚¹ï¼š</p>
<ul>
<li>ä¸ç¨³å®šæ¢¯åº¦ï¼ˆæ¢å¥è¯è¯´ï¼Œåœ¨ç¬¬11ç« ä¸­è®¨è®ºçš„æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•ç¼“è§£ï¼ŒåŒ…æ‹¬å¾ªç¯dropoutå’Œå¾ªç¯å±‚å½’ä¸€åŒ–ã€‚</li>
<li>æœ‰é™çš„çŸ­æœŸè®°å¿†ï¼Œå¯ä»¥é€šè¿‡LSTM å’Œ GRU å•å…ƒå»¶é•¿ã€‚</li>
</ul>
<h3 id="å¾ªç¯ç¥ç»å…ƒå’Œå±‚"><a href="#å¾ªç¯ç¥ç»å…ƒå’Œå±‚" class="headerlink" title="å¾ªç¯ç¥ç»å…ƒå’Œå±‚"></a>å¾ªç¯ç¥ç»å…ƒå’Œå±‚</h3><p>æœ€ç®€å•çš„ RNNï¼Œç”±ä¸€ä¸ªç¥ç»å…ƒæ¥æ”¶è¾“å…¥ï¼Œäº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼Œå¹¶å°†è¾“å‡ºå‘é€å›è‡ªå·±ã€‚ åœ¨æ¯ä¸ªæ—¶é—´æ­¥<code>t</code>ï¼ˆä¹Ÿç§°ä¸ºä¸€ä¸ªå¸§ï¼‰ï¼Œè¿™ä¸ªå¾ªç¯ç¥ç»å…ƒæ¥æ”¶è¾“å…¥x(t)ä»¥åŠå®ƒè‡ªå·±çš„å‰ä¸€æ—¶é—´æ­¥é•¿ y(t-1) çš„è¾“å‡ºã€‚ å› ä¸ºç¬¬ä¸€ä¸ªæ—¶é—´æ­¥éª¤æ²¡æœ‰ä¸Šä¸€æ¬¡çš„è¾“å‡ºï¼Œæ‰€ä»¥æ˜¯0ã€‚å¯ä»¥ç”¨æ—¶é—´è½´æ¥è¡¨ç¤ºè¿™ä¸ªå¾®å°çš„ç½‘ç»œã€‚ è¿™è¢«ç§°ä¸ºéšæ—¶é—´å±•å¼€ç½‘ç»œã€‚</p>
<p> å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆå·¦ï¼‰ï¼Œéšæ—¶é—´å±•å¼€ç½‘ç»œï¼ˆå³ï¼‰</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e945414fcaeeed67.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ä¸€å±‚å¾ªç¯ç¥ç»å…ƒï¼ˆå·¦ï¼‰ï¼ŒåŠå…¶éšæ—¶é—´å±•å¼€ï¼ˆå³ï¼‰</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-79c6bd0d2b869c73.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>æ¯ä¸ªå¾ªç¯ç¥ç»å…ƒæœ‰ä¸¤ç»„æƒé‡ï¼šä¸€ç»„ç”¨äºè¾“å…¥x(t)ï¼Œå¦ä¸€ç»„ç”¨äºå‰ä¸€æ—¶é—´æ­¥é•¿ y(t-1) çš„è¾“å‡ºã€‚ </p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b26a1770e6dc75da.png?imageMogr2/auto-orient/strip|imageView2/2/w/1046/format/webp" alt="img"></p>
<h3 id="è®°å¿†å•å…ƒ"><a href="#è®°å¿†å•å…ƒ" class="headerlink" title="è®°å¿†å•å…ƒ"></a>è®°å¿†å•å…ƒ</h3><p>ç”±äºæ—¶é—´<code>t</code>çš„å¾ªç¯ç¥ç»å…ƒçš„è¾“å‡ºï¼Œæ˜¯ç”±æ‰€æœ‰å…ˆå‰æ—¶é—´æ­¥éª¤è®¡ç®—å‡ºæ¥çš„çš„å‡½æ•°ï¼Œä½ å¯ä»¥è¯´å®ƒæœ‰ä¸€ç§è®°å¿†å½¢å¼ã€‚ç¥ç»ç½‘ç»œçš„ä¸€éƒ¨åˆ†ï¼Œä¿ç•™ä¸€äº›è·¨è¶Šæ—¶é—´æ­¥é•¿çš„çŠ¶æ€ï¼Œç§°ä¸ºå­˜å‚¨å•å…ƒï¼ˆæˆ–ç®€ç§°ä¸ºå•å…ƒï¼‰ã€‚å•ä¸ªå¾ªç¯ç¥ç»å…ƒæˆ–å¾ªç¯ç¥ç»å…ƒå±‚æ˜¯éå¸¸åŸºæœ¬çš„å•å…ƒï¼Œåªèƒ½å­¦ä¹ çŸ­æœŸè§„å¾‹ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ—¶é—´æ­¥<code>t</code>çš„å•å…ƒçŠ¶æ€ï¼Œè®°ä¸º h(t)ï¼ˆ<code>h</code>ä»£è¡¨â€œéšè—â€ï¼‰ï¼Œæ˜¯è¯¥æ—¶é—´æ­¥çš„æŸäº›è¾“å…¥å’Œå‰ä¸€æ—¶é—´æ­¥çŠ¶æ€çš„å‡½æ•°ï¼šh(t) = f(h(tâ€“1), x(t))ã€‚ å…¶åœ¨æ—¶é—´æ­¥<code>t</code>çš„è¾“å‡ºï¼Œè¡¨ç¤ºä¸º y(t)ï¼Œä¹Ÿå’Œå‰ä¸€çŠ¶æ€å’Œå½“å‰è¾“å…¥çš„å‡½æ•°æœ‰å…³ã€‚ æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡çš„åŸºæœ¬å•å…ƒï¼Œè¾“å‡ºç­‰äºå•å…ƒçŠ¶æ€ï¼Œä½†æ˜¯åœ¨æ›´å¤æ‚çš„å•å…ƒä¸­å¹¶ä¸æ€»æ˜¯å¦‚æ­¤ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-860eda4472257180.png?imageMogr2/auto-orient/strip|imageView2/2/w/1095/format/webp" alt="img"></p>
<p>åºåˆ—åˆ°åºåˆ—ï¼ˆå·¦ä¸Šï¼‰ï¼Œåºåˆ—åˆ°çŸ¢é‡ï¼ˆå³ä¸Šï¼‰ï¼ŒçŸ¢é‡åˆ°åºåˆ—ï¼ˆå·¦ä¸‹ï¼‰ï¼Œå»¶è¿Ÿåºåˆ—åˆ°åºåˆ—ï¼ˆå³ä¸‹ï¼‰</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-22b08969517e84c2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<blockquote>
<p>ä¸€ä¸ªåºåˆ—åˆ°çŸ¢é‡çš„ç½‘ç»œï¼Œç§°ä¸ºç¼–ç å™¨ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç§°ä¸ºè§£ç å™¨çš„çŸ¢é‡åˆ°åºåˆ—çš„ç½‘ç»œã€‚ å¯ä»¥ç”¨äºå°†å¥å­ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ã€‚ ç»™ç½‘ç»œè¾“å…¥ä¸€ç§è¯­è¨€çš„ä¸€å¥è¯ï¼Œç¼–ç å™¨ä¼šæŠŠè¿™ä¸ªå¥å­è½¬æ¢æˆå•ä¸€çš„çŸ¢é‡è¡¨å¾ï¼Œç„¶åè§£ç å™¨å°†è¿™ä¸ªçŸ¢é‡è§£ç æˆå¦ä¸€ç§è¯­è¨€çš„å¥å­ã€‚ è¿™ç§ç§°ä¸º<strong>ç¼–ç å™¨ - è§£ç å™¨</strong>çš„ä¸¤æ­¥æ¨¡å‹ï¼Œæ¯”ç”¨å•ä¸ªåºåˆ—åˆ°åºåˆ—çš„ RNNå®æ—¶åœ°è¿›è¡Œç¿»è¯‘è¦å¥½å¾—å¤šï¼Œ<strong>å› ä¸ºå¥å­çš„æœ€åä¸€ä¸ªå•è¯å¯ä»¥å½±å“ç¿»è¯‘çš„ç¬¬ä¸€å¥è¯ï¼Œæ‰€ä»¥éœ€è¦ç­‰åˆ°å¬å®Œæ•´ä¸ªå¥å­æ‰èƒ½ç¿»è¯‘ã€‚</strong></p>
</blockquote>
<h3 id="è®­ç»ƒRNN"><a href="#è®­ç»ƒRNN" class="headerlink" title="è®­ç»ƒRNN"></a>è®­ç»ƒRNN</h3><p>è®­ç»ƒRNNè¯€çªæ˜¯åœ¨æ—¶é—´ä¸Šå±•å¼€ï¼Œç„¶ååªè¦ä½¿ç”¨å¸¸è§„åå‘ä¼ æ’­ã€‚ è¿™ä¸ªç­–ç•¥è¢«ç§°ä¸º<strong>æ—¶é—´ä¸Šçš„åå‘ä¼ æ’­ï¼ˆBPTTï¼‰</strong>ã€‚</p>
<h3 id="é¢„æµ‹æ—¶é—´åºåˆ—"><a href="#é¢„æµ‹æ—¶é—´åºåˆ—" class="headerlink" title="é¢„æµ‹æ—¶é—´åºåˆ—"></a>é¢„æµ‹æ—¶é—´åºåˆ—</h3><p>ç ”ç©¶ç½‘ç«™æ¯å°æ—¶çš„æ´»è·ƒç”¨æˆ·æ•°ï¼Œæˆ–æ˜¯æ‰€åœ¨åŸå¸‚çš„æ¯æ—¥æ°”æ¸©ï¼Œæˆ–å…¬å¸çš„è´¢åŠ¡çŠ¶å†µï¼Œç”¨å¤šç§æŒ‡æ ‡åšå­£åº¦è¡¡é‡ã€‚åœ¨è¿™äº›ä»»åŠ¡ä¸­ï¼Œæ•°æ®éƒ½æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œæ¯æ­¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œè¢«ç§°ä¸º<strong>æ—¶é—´åºåˆ—</strong>ã€‚åœ¨å‰ä¸¤ä¸ªä»»åŠ¡ä¸­ï¼Œæ¯ä¸ªæ—¶é—´æ­¥åªæœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒä»¬æ˜¯<strong>å•å˜é‡æ—¶é—´åºåˆ—</strong>ã€‚åœ¨è´¢åŠ¡çŠ¶å†µçš„ä»»åŠ¡ä¸­ï¼Œæ¯ä¸ªæ—¶é—´æ­¥æœ‰å¤šä¸ªå€¼ï¼ˆåˆ©æ¶¦ã€æ¬ è´¦ï¼Œç­‰ç­‰ï¼‰ï¼Œæ‰€ä»¥æ˜¯<strong>å¤šå˜é‡æ—¶é—´åºåˆ—</strong>ã€‚</p>
<ul>
<li>å…¸å‹çš„ä»»åŠ¡æ˜¯é¢„æµ‹æœªæ¥å€¼ï¼Œç§°ä¸ºâ€œé¢„æµ‹â€ã€‚</li>
<li>å¦ä¸€ä¸ªä»»åŠ¡æ˜¯å¡«ç©ºï¼šé¢„æµ‹ï¼ˆæˆ–â€œåæµ‹â€ï¼‰è¿‡å»çš„ç¼ºå¤±å€¼ï¼Œè¿™è¢«ç§°ä¸ºâ€œå¡«å……â€ã€‚</li>
</ul>
<blockquote>
<p>å½“å¤„ç†æ—¶é—´åºåˆ—æ—¶ï¼ˆå’Œå…¶å®ƒç±»å‹çš„æ—¶é—´åºåˆ—ï¼‰ï¼Œè¾“å…¥ç‰¹å¾é€šå¸¸ç”¨3Dæ•°ç»„æ¥è¡¨ç¤ºï¼Œå…¶å½¢çŠ¶æ˜¯ [æ‰¹æ¬¡å¤§å°, æ—¶é—´æ­¥æ•°, ç»´åº¦]ï¼Œå¯¹äºå•å˜é‡æ—¶é—´åºåˆ—ï¼Œå…¶ç»´åº¦æ˜¯1ï¼Œå¤šå˜é‡æ—¶é—´åºåˆ—çš„ç»´åº¦æ˜¯å…¶ç»´åº¦æ•°ã€‚</p>
</blockquote>
<h3 id="åŸºçº¿æ¨¡å‹"><a href="#åŸºçº¿æ¨¡å‹" class="headerlink" title="åŸºçº¿æ¨¡å‹"></a>åŸºçº¿æ¨¡å‹</h3><p>ä½¿ç”¨RNNä¹‹å‰ï¼Œæœ€å¥½æœ‰åŸºçº¿æŒ‡æ ‡ï¼Œå¦åˆ™åšå‡ºæ¥çš„æ¨¡å‹å¯èƒ½æ¯”åŸºçº¿æ¨¡å‹è¿˜ç³Ÿã€‚ä¾‹å¦‚ï¼Œæœ€ç®€å•çš„æ–¹æ³•ï¼Œæ˜¯é¢„æµ‹æ¯ä¸ªåºåˆ—çš„æœ€åä¸€ä¸ªå€¼ã€‚è¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸º<strong>æœ´ç´ é¢„æµ‹</strong>ï¼Œæœ‰æ—¶å¾ˆéš¾è¢«è¶…è¶Šã€‚</p>
<h3 id="å®ç°ä¸€ä¸ªç®€å•åœ°RNN"><a href="#å®ç°ä¸€ä¸ªç®€å•åœ°RNN" class="headerlink" title="å®ç°ä¸€ä¸ªç®€å•åœ°RNN"></a>å®ç°ä¸€ä¸ªç®€å•åœ°RNN</h3><p>ä¸ç”¨æŒ‡å®šè¾“å…¥åºåˆ—çš„é•¿åº¦ï¼ˆå’Œä¹‹å‰çš„æ¨¡å‹ä¸åŒï¼‰ï¼Œå› ä¸ºå¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥å¤„ç†ä»»æ„çš„æ—¶é—´æ­¥ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°†ç¬¬ä¸€ä¸ªè¾“å…¥ç»´åº¦è®¾ä¸º<code>None</code>ï¼‰</p>
<blockquote>
<p>è¶‹åŠ¿å’Œå­£èŠ‚æ€§</p>
<p>è¿˜æœ‰å…¶å®ƒé¢„æµ‹æ—¶é—´åºåˆ—çš„æ¨¡å‹ï¼Œæ¯”å¦‚æƒé‡ç§»åŠ¨å¹³å‡æ¨¡å‹æˆ–è‡ªåŠ¨å›å½’é›†æˆç§»åŠ¨å¹³å‡ï¼ˆARIMAï¼‰æ¨¡å‹ã€‚æŸäº›æ¨¡å‹éœ€è¦å…ˆç§»å‡ºè¶‹åŠ¿å’Œå­£èŠ‚æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ç ”ç©¶ç½‘ç«™çš„æ´»è·ƒç”¨æˆ·æ•°ï¼Œå®ƒæ¯æœˆä¼šå¢é•¿10%ï¼Œå°±éœ€è¦å»æ‰è¿™ä¸ªè¶‹åŠ¿ã€‚è®­ç»ƒå¥½æ¨¡å‹ä¹‹åï¼Œåœ¨åšé¢„æµ‹æ—¶ï¼Œä½ å¯ä»¥å°†è¶‹åŠ¿åŠ å›æ¥åšæœ€ç»ˆçš„é¢„æµ‹ã€‚ç›¸ä¼¼çš„ï¼Œå¦‚æœè¦é¢„æµ‹é˜²æ™’éœœçš„æ¯æœˆé”€é‡ï¼Œä¼šè§‚å¯Ÿåˆ°æ˜æ˜¾çš„å­£èŠ‚æ€§ï¼šæ¯å¹´å¤å¤©å–çš„å¤šã€‚éœ€è¦å°†å­£èŠ‚æ€§ä»æ—¶é—´åºåˆ—å»é™¤ï¼Œæ¯”å¦‚è®¡ç®—æ¯ä¸ªæ—¶é—´æ­¥å’Œå‰ä¸€å¹´çš„å·®å€¼ï¼ˆè¿™ä¸ªæ–¹æ³•è¢«ç§°ä¸ºå·®åˆ†ï¼‰ã€‚ç„¶åï¼Œå½“è®­ç»ƒå¥½æ¨¡å‹ï¼Œåšé¢„æµ‹æ—¶ï¼Œå¯ä»¥å°†å­£èŠ‚æ€§åŠ å›æ¥ï¼Œæ¥å¾—åˆ°æœ€ç»ˆç»“æœã€‚</p>
<p>ä½¿ç”¨RNNæ—¶ï¼Œä¸€èˆ¬ä¸éœ€è¦åšè¿™äº›ï¼Œä½†åœ¨æœ‰äº›ä»»åŠ¡ä¸­å¯ä»¥æé«˜æ€§èƒ½ï¼Œå› ä¸ºæ¨¡å‹ä¸æ˜¯éè¦å­¦ä¹ è¿™äº›è¶‹åŠ¿æˆ–å­£èŠ‚æ€§ã€‚</p>
</blockquote>
<h3 id="æ·±åº¦RNN"><a href="#æ·±åº¦RNN" class="headerlink" title="æ·±åº¦RNN"></a>æ·±åº¦RNN</h3><p>å°†å¤šä¸ªç¥ç»å…ƒçš„å±‚å †èµ·æ¥ï¼Œå°±å½¢æˆäº†æ·±åº¦RNNã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-0a727314de2f6f56.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="å¤„ç†é•¿åºåˆ—"><a href="#å¤„ç†é•¿åºåˆ—" class="headerlink" title="å¤„ç†é•¿åºåˆ—"></a>å¤„ç†é•¿åºåˆ—</h3><p>åœ¨è®­ç»ƒé•¿åºåˆ—çš„ RNN æ¨¡å‹æ—¶ï¼Œå¿…é¡»è¿è¡Œè®¸å¤šæ—¶é—´æ­¥ï¼Œå±•å¼€çš„RNNå˜æˆäº†ä¸€ä¸ªå¾ˆæ·±çš„ç½‘ç»œã€‚æ­£å¦‚ä»»ä½•æ·±åº¦ç¥ç»ç½‘ç»œä¸€æ ·ï¼Œå®ƒé¢ä¸´<strong>ä¸ç¨³å®šæ¢¯åº¦é—®é¢˜</strong>ï¼Œä½¿è®­ç»ƒæ— æ³•åœæ­¢ï¼Œæˆ–è®­ç»ƒä¸ç¨³å®šã€‚å¦å¤–ï¼Œå½“RNNå¤„ç†é•¿åºåˆ—æ—¶ï¼Œ<strong>RNNä¼šé€æ¸å¿˜æ‰åºåˆ—çš„ç¬¬ä¸€ä¸ªè¾“å…¥</strong>ã€‚</p>
<h4 id="åº”å¯¹ä¸ç¨³å®šæ¢¯åº¦"><a href="#åº”å¯¹ä¸ç¨³å®šæ¢¯åº¦" class="headerlink" title="åº”å¯¹ä¸ç¨³å®šæ¢¯åº¦"></a>åº”å¯¹ä¸ç¨³å®šæ¢¯åº¦</h4><p>å¥½çš„å‚æ•°åˆå§‹åŒ–æ–¹å¼ï¼Œæ›´å¿«çš„ä¼˜åŒ–å™¨ï¼Œdropoutdéƒ½å¯ä»¥åº”å¯¹RNNçš„æ¢¯åº¦ä¸ç¨³å®šã€‚ä½†æ˜¯éé¥±å’Œæ¿€æ´»å‡½æ•°ï¼ˆå¦‚ ReLUï¼‰çš„å¸®åŠ©ä¸å¤§ï¼›äº‹å®ä¸Šï¼Œå®ƒä¼šå¯¼è‡´RNNæ›´åŠ ä¸ç¨³å®šã€‚</p>
<blockquote>
<p>å‡è®¾æ¢¯åº¦ä¸‹é™æ›´æ–°äº†æƒé‡ï¼Œå¯ä»¤ç¬¬ä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºæé«˜ã€‚å› ä¸ºæ¯ä¸ªæ—¶é—´æ­¥ä½¿ç”¨çš„æƒé‡ç›¸åŒï¼Œç¬¬äºŒä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºä¹Ÿä¼šæé«˜ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´è¾“å‡ºçˆ†ç‚¸ â€”â€” ä¸é¥±å’Œæ¿€æ´»å‡½æ•°ä¸èƒ½é˜»æ­¢è¿™ä¸ªé—®é¢˜ã€‚è¦é™ä½çˆ†ç‚¸é£é™©ï¼Œå¯ä»¥<strong>ä½¿ç”¨æ›´å°çš„å­¦ä¹ ç‡</strong>ï¼Œæ›´ç®€å•çš„æ–¹æ³•æ˜¯<strong>ä½¿ç”¨é¥±å’Œæ¿€æ´»å‡½æ•°</strong>ï¼Œæ¯”å¦‚åŒæ›²æ­£åˆ‡å‡½æ•°ï¼ˆæ‰€ä»¥tanhæ˜¯é»˜è®¤é€‰é¡¹ï¼‰ã€‚</p>
</blockquote>
<p>æ‰¹å½’ä¸€åŒ–ä¹Ÿæ²¡ä»€ä¹ˆå¸®åŠ©ã€‚ä¸èƒ½åœ¨æ—¶é—´æ­¥éª¤ä¹‹é—´ä½¿ç”¨æ‰¹å½’ä¸€åŒ–ï¼Œåªèƒ½åœ¨å¾ªç¯å±‚ä¹‹é—´ä½¿ç”¨ã€‚</p>
<p><strong>å±‚å½’ä¸€åŒ–ï¼Œç”±Jimmy Lei Baç­‰äººåœ¨2016å¹´æå‡ºï¼šè·Ÿæ‰¹å½’ä¸€åŒ–å¾ˆåƒï¼Œä½†ä¸æ˜¯åœ¨æ‰¹æ¬¡ç»´åº¦ä¸Šåšå½’ä¸€åŒ–ï¼Œè€Œæ˜¯åœ¨ç‰¹å¾ç»´åº¦ä¸Šå½’ä¸€åŒ–ã€‚</strong>è¿™ä¹ˆåšçš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯å¯ä»¥ç‹¬ç«‹å¯¹æ¯ä¸ªå®ä¾‹ï¼Œå®æ—¶è®¡ç®—æ‰€éœ€çš„ç»Ÿè®¡é‡ã€‚è®­ç»ƒå’Œæµ‹è¯•ä¸­çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼ˆè¿™ç‚¹å’ŒBNç›¸åï¼‰ï¼Œä¸”ä¸éœ€è¦ä½¿ç”¨æŒ‡æ•°ç§»åŠ¨å¹³å‡æ¥ä¼°è®¡è®­ç»ƒé›†ä¸­æ‰€æœ‰å®ä¾‹çš„ç‰¹å¾ç»Ÿè®¡ã€‚å’ŒBNä¸€æ ·ï¼Œå±‚å½’ä¸€åŒ–ä¼šå­¦ä¹ æ¯ä¸ªè¾“å…¥çš„æ¯”ä¾‹å’Œåç§»å‚æ•°ã€‚<strong>åœ¨RNNä¸­ï¼Œå±‚å½’ä¸€åŒ–é€šå¸¸ç”¨åœ¨è¾“å…¥å’Œéšè—æ€çš„çº¿å‹ç»„åˆä¹‹åã€‚</strong></p>
<h4 id="å¤„ç†çŸ­æœŸè®°å¿†é—®é¢˜"><a href="#å¤„ç†çŸ­æœŸè®°å¿†é—®é¢˜" class="headerlink" title="å¤„ç†çŸ­æœŸè®°å¿†é—®é¢˜"></a>å¤„ç†çŸ­æœŸè®°å¿†é—®é¢˜</h4><p>ç”±äºæ•°æ®åœ¨RNNä¸­æµåŠ¨æ—¶ä¼šç»å†è½¬æ¢ï¼Œæ¯ä¸ªæ—¶é—´æ­¥éƒ½æŸå¤±äº†ä¸€å®šä¿¡æ¯ã€‚ä¸€å®šæ—¶é—´åï¼Œç¬¬ä¸€ä¸ªè¾“å…¥å®é™…ä¸Šä¼šåœ¨ RNN çš„çŠ¶æ€ä¸­æ¶ˆå¤±ã€‚</p>
<p><strong>é•¿çŸ­æ—¶è®°å¿†ç¥ç»å•å…ƒ LSTMï¼š</strong></p>
<p>é•¿çŸ­æ—¶è®°å¿†å•å…ƒåœ¨ 1997 å¹´<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgoo.gl%2Fj39AGv" target="_blank" rel="noopener">ç”± Sepp Hochreiter å’Œ JÃ¼rgen Schmidhuber é¦–æ¬¡æå‡º</a>ï¼Œå¹¶åœ¨æ¥ä¸‹æ¥çš„å‡ å¹´å†…ç»è¿‡ <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fgraves" target="_blank" rel="noopener">Alex Graves</a>ã€<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F94" target="_blank" rel="noopener">HaÅŸim Sak</a>ã€<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F95" target="_blank" rel="noopener">Wojciech Zaremba</a> ç­‰äººçš„æ”¹è¿›ï¼Œé€æ¸å®Œå–„ã€‚å¦‚æœæŠŠ LSTM å•å…ƒçœ‹ä½œä¸€ä¸ªé»‘ç›’ï¼Œå¯ä»¥å°†å…¶å½“åšåŸºæœ¬å•å…ƒä¸€æ ·æ¥ä½¿ç”¨ï¼Œä½† LSTM å•å…ƒæ¯”åŸºæœ¬å•å…ƒæ€§èƒ½æ›´å¥½ï¼šæ”¶æ•›æ›´å¿«ï¼Œèƒ½å¤Ÿæ„ŸçŸ¥æ•°æ®çš„é•¿æ—¶ä¾èµ–ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a333026f0dd537b5.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>å¯ä»¥è®¤ä¸º h(t) æ˜¯çŸ­æœŸè®°å¿†çŠ¶æ€ï¼Œc(t) æ˜¯é•¿æœŸè®°å¿†çŠ¶æ€ã€‚</p>
<ul>
<li>è¾“å‡º g(t)çš„å±‚æ˜¯ä¸»è¦å±‚ã€‚å®ƒçš„å¸¸è§„ä»»åŠ¡æ˜¯åˆ†æå½“å‰çš„è¾“å…¥ x(t) å’Œå‰ä¸€æ—¶åˆ»çš„çŸ­æ—¶çŠ¶æ€ h(t-1)ã€‚åŸºæœ¬å•å…ƒä¸­ä¸è¿™ç§ç»“æ„ä¸€æ ·ï¼Œç›´æ¥è¾“å‡ºäº† h(t)   å’Œ y(t) ã€‚è€ŒLSTM å•å…ƒä¸­çš„è¯¥å±‚çš„è¾“å‡ºä¸ä¼šç›´æ¥å‡ºå»ï¼Œå°†æœ€é‡è¦çš„éƒ¨åˆ†ä¿å­˜åœ¨é•¿æœŸçŠ¶æ€ä¸­ï¼ˆå…¶ä½™éƒ¨åˆ†ä¸¢æ‰ï¼‰ã€‚</li>
<li>å…¶å®ƒä¸‰ä¸ªå…¨è¿æ¥å±‚è¢«æ˜¯é—¨æ§åˆ¶å™¨ï¼ˆgate controllerï¼‰ã€‚å…¶é‡‡ç”¨ Logistic ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œè¾“å‡ºèŒƒå›´åœ¨ 0 åˆ° 1 ä¹‹é—´ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸‰ä¸ªå±‚çš„è¾“å‡ºæä¾›ç»™äº†é€å…ƒç´ ä¹˜æ³•æ“ä½œï¼Œå½“è¾“å…¥ä¸º 0 æ—¶é—¨å…³é—­ï¼Œè¾“å‡ºä¸º 1 æ—¶é—¨æ‰“å¼€ã€‚å…·ä½“è®²ï¼š</li>
<li>é—å¿˜é—¨ï¼ˆç”± f(t) æ§åˆ¶ï¼‰å†³å®šå“ªäº›é•¿æœŸè®°å¿†éœ€è¦è¢«åˆ é™¤ï¼›</li>
<li>è¾“å…¥é—¨ï¼ˆç”± i(t) æ§åˆ¶ï¼‰ å†³å®šå“ªéƒ¨åˆ† g(t) åº”è¯¥è¢«æ·»åŠ åˆ°é•¿æ—¶çŠ¶æ€ä¸­ã€‚</li>
<li>è¾“å‡ºé—¨ï¼ˆç”± o(t) æ§åˆ¶ï¼‰å†³å®šé•¿æ—¶çŠ¶æ€çš„å“ªäº›éƒ¨åˆ†è¦è¯»å–å’Œè¾“å‡ºä¸º h(t) å’Œy(t)ã€‚</li>
</ul>
<p>LSTM å•å…ƒèƒ½å¤Ÿå­¦ä¹ è¯†åˆ«é‡è¦è¾“å…¥ï¼ˆè¾“å…¥é—¨çš„ä½œç”¨ï¼‰ï¼Œå­˜å‚¨è¿›é•¿æ—¶çŠ¶æ€ï¼Œå¹¶ä¿å­˜å¿…è¦çš„æ—¶é—´ï¼ˆé—å¿˜é—¨åŠŸèƒ½ï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶æå–å‡ºæ¥ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-33df138d7fe796c5.png?imageMogr2/auto-orient/strip|imageView2/2/w/1040/format/webp" alt="img"></p>
<h4 id="LSTMçš„å˜ä½“"><a href="#LSTMçš„å˜ä½“" class="headerlink" title="LSTMçš„å˜ä½“"></a>LSTMçš„å˜ä½“</h4><h5 id="çª¥å­”è¿æ¥"><a href="#çª¥å­”è¿æ¥" class="headerlink" title="çª¥å­”è¿æ¥"></a>çª¥å­”è¿æ¥</h5><p>åœ¨åŸºæœ¬ LSTM å•å…ƒä¸­ï¼Œé—¨æ§åˆ¶å™¨åªèƒ½è§‚å¯Ÿå½“å‰è¾“å…¥ x(t) å’Œå‰ä¸€æ—¶åˆ»çš„çŸ­æ—¶çŠ¶æ€ h(t-1)ã€‚ä¸å¦¨è®©å„ä¸ªé—¨æ§åˆ¶å™¨çª¥è§†ä¸€ä¸‹é•¿æ—¶çŠ¶æ€ï¼Œè·å–ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p> Felix Gers å’Œ JÃ¼rgen Schmidhuber åœ¨ 2000 å¹´æå‡ºäº†ä¸€ä¸ª LSTM çš„å˜ä½“ï¼Œå¸¦æœ‰å«åšçª¥å­”è¿æ¥çš„é¢å¤–è¿æ¥ï¼šæŠŠå‰ä¸€æ—¶åˆ»çš„é•¿æ—¶çŠ¶æ€ c(t-1) è¾“å…¥ç»™é—å¿˜é—¨å’Œè¾“å…¥é—¨ï¼Œå½“å‰æ—¶åˆ»çš„é•¿æ—¶çŠ¶æ€c(t)è¾“å…¥ç»™è¾“å‡ºé—¨ã€‚è¿™ä¹ˆåšæ—¶å¸¸å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†ä¸ä¸€å®šæ¯æ¬¡éƒ½èƒ½æœ‰æ•ˆï¼Œä¹Ÿæ²¡æœ‰æ¸…æ™°çš„è§„å¾‹æ˜¾ç¤ºå“ªç§ä»»åŠ¡é€‚åˆæ·»åŠ çª¥å­”è¿æ¥ã€‚</p>
<h5 id="GRU-å•å…ƒ"><a href="#GRU-å•å…ƒ" class="headerlink" title="GRU å•å…ƒ"></a>GRU å•å…ƒ</h5><p><img src="https://upload-images.jianshu.io/upload_images/7178691-b3d78efe2539d55c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>é—¨æ§å¾ªç¯å•å…ƒï¼ˆGRUï¼‰ç”±Kyunghyun Choäº2014å¹´æå‡ºï¼Œå¼•å…¥äº†ç¼–ç å™¨-è§£ç å™¨ç½‘ç»œã€‚GRUå•å…ƒæ˜¯ LSTM å•å…ƒçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œèƒ½å®ç°åŒæ ·çš„æ€§èƒ½ã€‚ç®€åŒ–ä¸»è¦åœ¨ä¸€ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>é•¿æ—¶çŠ¶æ€å’ŒçŸ­æ—¶çŠ¶æ€åˆå¹¶ä¸ºä¸€ä¸ªçŸ¢é‡ h(t)ã€‚</li>
<li>ç”¨ä¸€ä¸ªé—¨æ§åˆ¶å™¨z(t)æ§åˆ¶é—å¿˜é—¨å’Œè¾“å…¥é—¨ã€‚å¦‚æœé—¨æ§åˆ¶å™¨è¾“å‡º 1ï¼Œåˆ™é—å¿˜é—¨æ‰“å¼€ï¼ˆ=1ï¼‰ï¼Œè¾“å…¥é—¨å…³é—­ï¼ˆ1 - 1 = 0ï¼‰ã€‚å¦‚æœè¾“å‡º0ï¼Œåˆ™ç›¸åã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå½“æœ‰è®°å¿†è¦å­˜å‚¨ï¼Œé‚£ä¹ˆå°±å¿…é¡»å…ˆåœ¨å…¶å­˜å‚¨ä½ç½®åˆ æ‰è¯¥å¤„è®°å¿†ã€‚è¿™æ„æˆäº† LSTM æœ¬èº«çš„å¸¸è§å˜ä½“ã€‚</li>
<li>GRU å•å…ƒå–æ¶ˆäº†è¾“å‡ºé—¨ï¼Œæ¯ä¸ªæ—¶é—´æ­¥è¾“å‡ºå…¨æ€çŸ¢é‡ã€‚ä½†æ˜¯ï¼Œå¢åŠ äº†ä¸€ä¸ªæ§åˆ¶é—¨ r(t) æ¥æ§åˆ¶å‰ä¸€çŠ¶æ€çš„å“ªäº›éƒ¨åˆ†å‘ˆç°ç»™ä¸»å±‚g(t)ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨1Då·ç§¯å±‚å¤„ç†åºåˆ—"><a href="#ä½¿ç”¨1Då·ç§¯å±‚å¤„ç†åºåˆ—" class="headerlink" title="ä½¿ç”¨1Då·ç§¯å±‚å¤„ç†åºåˆ—"></a>ä½¿ç”¨1Då·ç§¯å±‚å¤„ç†åºåˆ—</h3><p>å¯¹äºéŸ³é¢‘ã€é•¿æ—¶é—´åºåˆ—æˆ–é•¿åºåˆ—ï¼Œå­¦ä¹ é•¿æ—¶æ¨¡å¼å°±å¾ˆå›°éš¾ã€‚åº”å¯¹çš„æ–¹æ³•ä¹‹ä¸€ï¼Œæ˜¯ä½¿ç”¨ç¼©çŸ­è¾“å…¥åºåˆ—ï¼Œä¾‹å¦‚ä½¿ç”¨1Då·ç§¯å±‚ã€‚</p>
<h3 id="WaveNet"><a href="#WaveNet" class="headerlink" title="WaveNet"></a>WaveNet</h3><p>WaveNetæ¶æ„å°†1Då·ç§¯å±‚å èµ·æ¥ï¼Œæ¯ä¸€å±‚è†¨èƒ€ç‡ï¼ˆå¦‚ä½•å°†æ¯ä¸ªç¥ç»å…ƒçš„è¾“å…¥åˆ†å¼€ï¼‰å˜ä¸º2å€ï¼šç¬¬ä¸€ä¸ªå·ç§¯å±‚ä¸€æ¬¡åªè§‚å¯Ÿä¸¤ä¸ªæ—¶é—´æ­¥ï¼Œä¸‹ä¸€å±‚è§‚å¯Ÿå››ä¸ªæ—¶é—´æ­¥ï¼ˆæ„Ÿå—é‡æ˜¯4ä¸ªæ—¶é—´æ­¥çš„é•¿åº¦ï¼‰ï¼Œä¸‹ä¸€å±‚è§‚å¯Ÿå…«ä¸ªæ—¶é—´æ­¥ï¼Œä»¥æ­¤ç±»æ¨ã€‚ç”¨è¿™ç§æ–¹å¼ï¼Œåº•ä¸‹çš„å±‚å­¦ä¹ çŸ­æ—¶æ¨¡å¼ï¼Œä¸Šé¢çš„å±‚å­¦ä¹ é•¿æ—¶æ¨¡å¼ã€‚å¾—ç›Šäºç¿»å€çš„è†¨èƒ€ç‡ï¼Œè¿™ä¸ªç½‘ç»œå¯ä»¥éå¸¸é«˜æ•ˆåœ°å¤„ç†æé•¿çš„åºåˆ—ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-93e236002a0fa2e2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç»ƒä¹ -5"><a href="#ç»ƒä¹ -5" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>ä½ èƒ½è¯´å‡ºåºåˆ—åˆ°åºåˆ—RNN çš„å‡ ä¸ªåº”ç”¨å—ï¼Ÿåºåˆ—åˆ°çŸ¢é‡çš„åº”ç”¨ï¼ŸçŸ¢é‡åˆ°åºåˆ—çš„åº”ç”¨ï¼Ÿ</p>
<blockquote>
<p>åºåˆ—åˆ°åºåˆ—RNNï¼šå¯ä»¥é¢„æµ‹å¤©æ°”ï¼Œè‚¡ç¥¨ä¿¡æ¯ã€‚</p>
<p>åºåˆ—åˆ°çŸ¢é‡RNNï¼šåˆ¤æ–­éŸ³ä¹çš„æµæ´¾</p>
<p>çŸ¢é‡åˆ°åºåˆ—RNNï¼šé€šè¿‡å‡ ä¸ªå‚æ•°åˆ›å»ºä¸€æ®µéŸ³ä¹</p>
</blockquote>
</li>
<li><p>RNNå±‚çš„è¾“å…¥è¦æœ‰å¤šå°‘ç»´ï¼Ÿæ¯ä¸€ç»´è¡¨ç¤ºä»€ä¹ˆï¼Ÿè¾“å‡ºå‘¢ï¼Ÿ</p>
<blockquote>
<p>RNNéœ€è¦æœ‰ä¸‰ç»´çš„è¾“å…¥ï¼šbatch size x time steps x number of input feature</p>
</blockquote>
</li>
<li><p>å¦‚æœæ­å»ºæ·±åº¦åºåˆ—åˆ°åºåˆ—RNNï¼Œå“ªäº›RNNå±‚è¦è®¾ç½®<code>return_sequences=True</code>ï¼Ÿåºåˆ—åˆ°çŸ¢é‡RNNåˆå¦‚ä½•ï¼Ÿ</p>
<blockquote>
<p>æ·±åº¦åºåˆ—åˆ°åºåˆ—RNNï¼šæ‰€æœ‰çš„RNNå±‚éƒ½éœ€è¦è®¾ç½®<code>return_sequences=True</code></p>
<p>sequence-to-vector RNNï¼šé™¤äº†é¡¶å±‚çš„æ‰€æœ‰RNNå±‚éƒ½éœ€è¦è®¾ç½®<code>return_sequences=True</code></p>
</blockquote>
</li>
<li><p>å‡å¦‚æœ‰ä¸€ä¸ªæ¯æ—¥å•å˜é‡æ—¶é—´åºåˆ—ï¼Œæƒ³é¢„æµ‹æ¥ä¸‹æ¥çš„ä¸ƒå¤©ã€‚è¦ä½¿ç”¨ä»€ä¹ˆRNNæ¶æ„ï¼Ÿ</p>
<blockquote>
<p>åºåˆ—åˆ°çŸ¢é‡RNNï¼šé™¤äº†é¡¶å±‚éƒ½è®¾ç½® <code>return_sequences=True</code> ï¼Œè¾“å‡ºå±‚ä½¿ç”¨ä¸ƒä¸ªç¥ç»å…ƒ.</p>
</blockquote>
</li>
<li><p>è®­ç»ƒRNNçš„å›°éš¾æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åº”å¯¹ï¼Ÿ</p>
<blockquote>
<p>æ¢¯åº¦ä¸ç¨³å®šï¼šä½¿ç”¨å°å­¦ä¹ ç‡ï¼Œæ¢¯åº¦è£å‰ªï¼Œå±‚å½’ä¸€åŒ–ï¼Œdropout</p>
<p>çŸ­æœŸè®°å¿†ï¼šä½¿ç”¨LSTM<code>or</code>GRUå±‚</p>
</blockquote>
</li>
<li><p>ç”»å‡ºLSTMå•å…ƒçš„æ¶æ„å›¾ï¼Ÿ</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆåœ¨RNNä¸­ä½¿ç”¨1Då·ç§¯å±‚ï¼Ÿ</p>
<blockquote>
<p>RNNå±‚æ˜¯ä¸²è¡Œçš„ï¼Œä¸ºäº†é¢„æµ‹tæ—¶é—´ä¹‹åçš„ç»“æœï¼Œéœ€è¦å…ˆè®¡ç®—æ—©äº›æ—¶å€™ç»“æœï¼Œä½¿å¾—å®ƒä¸èƒ½å¹¶è¡Œè®¡ç®—ï¼Œ</p>
<p>å¦ä¸€æ–¹é¢ï¼Œä¸€ç»´å·ç§¯å±‚ä¸éœ€è¦ä¹‹å‰ç»“æœçš„è®°å¿†ï¼Œå¯ä»¥æ ¹æ®è¾“å…¥ä¸­æŸä¸€çª—å£çš„æ•°å€¼è®¡ç®—å¾—åˆ°ä»»æ„æ—¶åˆ»çš„è¾“å‡ºã€‚</p>
<p>å†è€…ï¼Œ1Då·ç§¯å±‚ä¸æ˜¯å¾ªç¯çš„ï¼ˆrecurrentï¼‰ï¼Œæ¢¯åº¦ä¸ç¨³å®šé—®é¢˜å°†å¤§å¤§æ”¹å–„</p>
<p>åœ¨RNNç½‘ç»œä¸­ä½¿ç”¨ä¸€å±‚æˆ–è€…å¤šå±‚1Då·ç§¯å±‚é¢„å¤„ç†è¾“å…¥æ•°æ®ï¼Œå¯ä»¥downsamplingï¼Œå¸®åŠ©RNNæ¢æµ‹åˆ°long-term patterns</p>
</blockquote>
</li>
<li><p>å“ªç§ç¥ç»ç½‘ç»œæ¶æ„å¯ä»¥ç”¨æ¥åˆ†ç±»è§†é¢‘ï¼Ÿ</p>
<blockquote>
<p>å¯¹äºéŸ³é¢‘ã€é•¿æ—¶é—´åºåˆ—æˆ–é•¿åºåˆ—ï¼Œå­¦ä¹ é•¿æ—¶æ¨¡å¼å°±å¾ˆå›°éš¾ã€‚åº”å¯¹çš„æ–¹æ³•ä¹‹ä¸€ï¼Œä½¿ç”¨1Då·ç§¯å±‚ç¼©çŸ­è¾“å…¥åºåˆ—.</p>
</blockquote>
</li>
<li><p>ä¸ºSketchRNNæ•°æ®é›†ï¼ˆTensorFlow Datasetsä¸­æœ‰ï¼‰ï¼Œè®­ç»ƒä¸€ä¸ªåˆ†ç±»æ¨¡å‹ã€‚</p>
</li>
<li><p>ä¸‹è½½<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fbach" target="_blank" rel="noopener">Bach chorales</a>æ•°æ®é›†ï¼Œå¹¶è§£å‹ã€‚å®ƒå«æœ‰382é¦–å·´èµ«ä½œæ›²çš„èµç¾æ­Œã€‚æ¯é¦–çš„é•¿åº¦æ˜¯100åˆ°640æ—¶é—´æ­¥ï¼Œæ¯ä¸ªæ—¶é—´æ­¥åŒ…å«4ä¸ªæ•´æ•°ï¼Œæ¯ä¸ªæ•´æ•°å¯¹åº”ä¸€ä¸ªé’¢ç´éŸ³ç¬¦ç´¢å¼•ï¼ˆé™¤äº†0ï¼Œè¡¨ç¤ºæ²¡æœ‰éŸ³ç¬¦ï¼‰ã€‚è®­ç»ƒä¸€ä¸ªå¯ä»¥é¢„æµ‹ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥ï¼ˆå››ä¸ªéŸ³ç¬¦ï¼‰çš„æ¨¡å‹ï¼Œå¾ªç¯ã€å·ç§¯ã€æˆ–æ··åˆæ¶æ„ã€‚ç„¶åä½¿ç”¨è¿™ä¸ªæ¨¡å‹æ¥ç”Ÿæˆç±»ä¼¼å·´èµ«çš„éŸ³ä¹ï¼Œæ¯ä¸ªæ—¶é—´ä¸€ä¸ªéŸ³ç¬¦ï¼šå¯ä»¥ç»™æ¨¡å‹ä¸€é¦–èµç¾æ­Œçš„å¼€å¤´ï¼Œç„¶åè®©å…¶é¢„æµ‹æ¥ä¸‹æ¥çš„æ—¶é—´æ­¥ï¼Œç„¶åå°†è¾“å‡ºåŠ åˆ°è¾“å…¥ä¸Šï¼Œå†è®©æ¨¡å‹ç»§ç»­é¢„æµ‹ã€‚æˆ–è€…æŸ¥çœ‹<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fcoconet" target="_blank" rel="noopener">Googleçš„ Coconet æ¨¡å‹</a>ï¼Œå®ƒæ˜¯Googleæ¥åšå·´èµ«æ›²å­çš„ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬16ç« -ä½¿ç”¨RNNå’Œæ³¨æ„åŠ›æœºåˆ¶è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†"><a href="#ç¬¬16ç« -ä½¿ç”¨RNNå’Œæ³¨æ„åŠ›æœºåˆ¶è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†" class="headerlink" title="ç¬¬16ç«  ä½¿ç”¨RNNå’Œæ³¨æ„åŠ›æœºåˆ¶è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†"></a>ç¬¬16ç«  ä½¿ç”¨RNNå’Œæ³¨æ„åŠ›æœºåˆ¶è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†</h2><h3 id="æœ‰çŠ¶æ€RNN"><a href="#æœ‰çŠ¶æ€RNN" class="headerlink" title="æœ‰çŠ¶æ€RNN"></a>æœ‰çŠ¶æ€RNN</h3><p>æ— çŠ¶æ€RNNï¼šåœ¨æ¯ä¸ªè®­ç»ƒè¿­ä»£ä¸­ï¼Œæ¨¡å‹ä»å…¨æ˜¯0çš„éšè—çŠ¶æ€å¼€å§‹è®­ç»ƒï¼Œç„¶ååœ¨æ¯ä¸ªæ—¶é—´æ­¥æ›´æ–°å…¶çŠ¶æ€ï¼Œåœ¨æœ€åä¸€ä¸ªæ—¶é—´æ­¥ï¼Œéšè—æ€å°±è¢«ä¸¢æ‰ï¼Œä»¥åå†ä¹Ÿä¸ç”¨äº†ã€‚å¦‚æœè®©RNNä¿ç•™è¿™ä¸ªçŠ¶æ€ï¼Œä¾›ä¸‹ä¸€ä¸ªè®­ç»ƒæ‰¹æ¬¡ä½¿ç”¨å¦‚ä½•å‘¢ï¼Ÿè¿™ä¹ˆåšçš„è¯ï¼Œå°½ç®¡åå‘ä¼ æ’­åªåœ¨çŸ­åºåˆ—ä¼ æ’­ï¼Œæ¨¡å‹ä¹Ÿå¯ä»¥å­¦åˆ°é•¿æ—¶è§„å¾‹ã€‚è¿™è¢«ç§°ä¸ºæœ‰çŠ¶æ€RNNã€‚</p>
<h3 id="é›†æŸæœç´¢"><a href="#é›†æŸæœç´¢" class="headerlink" title="é›†æŸæœç´¢"></a>é›†æŸæœç´¢</h3><p>å®ƒè·Ÿè¸ªkä¸ªæœ€å¤§æ¦‚ç‡çš„å¥å­åˆ—è¡¨ï¼Œåœ¨æ¯ä¸ªè§£ç å™¨æ­¥éª¤å»¶é•¿ä¸€ä¸ªè¯ï¼Œç„¶åå†å…³æ³¨å…¶ä¸­kä¸ªæœ€å¤§æ¦‚ç‡çš„å¥å­ã€‚å‚æ•°kè¢«ç§°ä¸ºé›†æŸå®½åº¦ã€‚</p>
<h3 id="è§†è§‰æ³¨æ„åŠ›"><a href="#è§†è§‰æ³¨æ„åŠ›" class="headerlink" title="è§†è§‰æ³¨æ„åŠ›"></a>è§†è§‰æ³¨æ„åŠ›</h3><p>æœ€å…ˆç”¨é€”ä¹‹ä¸€æ˜¯åˆ©ç”¨è§†è§‰æ³¨æ„åŠ›ç”Ÿæˆå›¾ç‰‡æ ‡é¢˜ï¼šå·ç§¯ç¥ç»ç½‘ç»œé¦–å…ˆå¤„ç†å›¾ç‰‡ï¼Œç”Ÿæˆä¸€äº›ç‰¹å¾æ˜ å°„ï¼Œç„¶åç”¨å¸¦æœ‰æ³¨æ„åŠ›æœºåˆ¶çš„è§£ç å™¨RNNæ¥ç”Ÿæˆæ ‡é¢˜ï¼Œæ¯æ¬¡ç”Ÿæˆä¸€ä¸ªè¯ã€‚åœ¨æ¯ä¸ªè§£ç å™¨æ—¶é—´æ­¥ï¼ˆæ¯ä¸ªè¯ï¼‰ï¼Œè§£ç å™¨ä½¿ç”¨æ³¨æ„åŠ›æ¨¡å‹èšç„¦äºå›¾ç‰‡çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="å¤šå¤´æ³¨æ„åŠ›"><a href="#å¤šå¤´æ³¨æ„åŠ›" class="headerlink" title="å¤šå¤´æ³¨æ„åŠ›"></a>å¤šå¤´æ³¨æ„åŠ›</h3><p>å¤šå¤´æ³¨æ„åŠ›åŸºäºç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›å±‚ï¼ˆScaled Dot-Product Attentionï¼‰ï¼Œ</p>
<blockquote>
<p>å‡è®¾ç¼–ç å™¨åˆ†æè¾“å…¥å¥å­â€œThey played chessâ€ï¼Œç¼–ç å™¨åˆ†æå‡ºâ€œTheyâ€æ˜¯ä¸»è¯­ï¼Œâ€œplayedâ€æ˜¯åŠ¨è¯ï¼Œç„¶åç”¨è¯çš„è¡¨å¾ç¼–ç è¿™äº›ä¿¡æ¯ã€‚å‡è®¾è§£ç å™¨å·²ç»ç¿»è¯‘äº†ä¸»è¯­ï¼Œæ¥ä¸‹æ¥è¦ç¿»è¯‘åŠ¨è¯ã€‚è¦è¿™ä¹ˆåšçš„è¯ï¼Œå®ƒéœ€è¦ä»è¾“å…¥å¥å­å–åŠ¨è¯ã€‚è¿™æœ‰ç‚¹åƒæŸ¥è¯¢å­—å…¸ï¼šç¼–ç å™¨åˆ›å»ºäº†å­—å…¸{â€œsubjectâ€: â€œTheyâ€, â€œverbâ€: â€œplayedâ€, â€¦}ï¼Œè§£ç å™¨æƒ³æŸ¥æ‰¾é”®â€œverbâ€å¯¹åº”çš„å€¼æ˜¯ä»€ä¹ˆã€‚ä½†æ˜¯ï¼Œæ¨¡å‹æ²¡æœ‰ç¦»æ•£çš„tokenæ¥è¡¨ç¤ºé”®ï¼ˆæ¯”å¦‚â€œsubjectâ€ æˆ– â€œverbâ€ï¼‰ï¼›å®ƒåªæœ‰è¿™äº›ï¼ˆè®­ç»ƒä¸­å­¦åˆ°çš„ï¼‰ä¿¡æ¯çš„çŸ¢é‡åŒ–è¡¨å¾æ‰€ä»¥ç”¨æ¥æŸ¥è¯¢çš„é”®ï¼Œä¸ä¼šå®Œç¾å¯¹åº”å‰é¢å­—å…¸ä¸­çš„é”®ã€‚è§£å†³çš„æ–¹æ³•æ˜¯è®¡ç®—æŸ¥è¯¢è¯å’Œé”®çš„ç›¸ä¼¼åº¦ï¼Œç„¶åç”¨softmaxå‡½æ•°è®¡ç®—æ¦‚ç‡æƒé‡ã€‚å¦‚æœè¡¨ç¤ºåŠ¨è¯çš„é”®å’ŒæŸ¥è¯¢è¯å¾ˆç›¸ä¼¼ï¼Œåˆ™é”®çš„æƒé‡ä¼šæ¥è¿‘äº1ã€‚ç„¶åæ¨¡å‹å¯ä»¥è®¡ç®—å¯¹åº”å€¼çš„åŠ æƒå’Œï¼Œå¦‚æœâ€œverbâ€é”®çš„æƒé‡æ¥è¿‘1ï¼Œåˆ™åŠ æƒå’Œä¼šæ¥è¿‘äºè¯â€œplayedâ€çš„è¡¨å¾ã€‚</p>
</blockquote>
<p>ç¼©æ”¾ç‚¹ç§¯æ³¨æ„åŠ›ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-da0506216d22820b.png?imageMogr2/auto-orient/strip|imageView2/2/w/1124/format/webp" alt="img"></p>
<h3 id="ç»ƒä¹ -6"><a href="#ç»ƒä¹ -6" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>æœ‰çŠ¶æ€RNNå’Œæ— çŠ¶æ€RNNç›¸æ¯”ï¼Œä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>æ— çŠ¶æ€RNNåªèƒ½æ‰¾åˆ°ä¸å¤§äºè®­ç»ƒçª—å£é•¿åº¦çš„pattern</p>
<p>æœ‰çŠ¶æ€RNNå¯ä»¥æ‰¾åˆ°longer-term patternsï¼Œä½†æ˜¯æœ‰çŠ¶æ€RNNä¸­ï¼Œç›¸é‚»æ‰¹æ¬¡çš„æ•°æ®å¯èƒ½æ˜¯ä¸ç‹¬ç«‹çš„ï¼Œidentically distributed</p>
</blockquote>
</li>
<li><p>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼–ç å™¨-è§£ç å™¨RNNï¼Œè€Œä¸æ˜¯æ™®é€šçš„åºåˆ—åˆ°åºåˆ—RNNï¼Œæ¥åšè‡ªåŠ¨ç¿»è¯‘ï¼Ÿ</p>
<blockquote>
<p>å•ç‹¬è®­ç»ƒå•è¯ï¼Œè‡ªåŠ¨ç¿»è¯‘çš„ç»“æœä¸ä¼šå¾ˆå¥½ã€‚</p>
<p>æ™®é€šçš„åºåˆ—åˆ°åºåˆ—RNNåœ¨è¯»å…¥ç¬¬ä¸€ä¸ªå•è¯å°±å¼€å§‹ç¿»è¯‘ï¼Œä½†æ˜¯ç¼–ç å™¨-è§£ç å™¨RNNä¼šè¯»å®Œæ•´ä¸ªå¥å­å†ç¿»è¯‘</p>
</blockquote>
</li>
<li><p>å¦‚ä½•å¤„ç†é•¿åº¦å¯å˜çš„è¾“å…¥åºåˆ—ï¼Ÿé•¿åº¦å¯å˜çš„è¾“å‡ºåºåˆ—æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
<blockquote>
<p>padding the shorter sequences, ä½¿ç”¨é®æŒ¡å¿½ç•¥padding tokenï¼Œè¿™æ ·æ¯ä¸€æ‰¹æ¬¡ä¸­æ‰€æœ‰çš„åºåˆ—å¯ä»¥ç”±ç›¸åŒçš„é•¿åº¦ã€‚ä¹‹åtf.kerasä¸­åµŒå¥—å¼ é‡å¯ä»¥ç”¨æ¥è¡¨ç¤ºé•¿åº¦å¯å˜çš„åºåˆ—ã€‚</p>
<p>å¦‚æœè¾“å‡ºåºåˆ—çš„é•¿åº¦å¯ä»¥æå‰é¢„çŸ¥ï¼ˆæ¯”å¦‚å’Œè¾“å…¥çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®é•¿åº¦å¿½ç•¥æ‰åºåˆ—é•¿åº¦åçš„tokenï¼Œè®¡ç®—æŸå¤±å‡½æ•°ï¼›å¦‚æœè¾“å‡ºåºåˆ—çš„é•¿åº¦æœªçŸ¥ï¼Œå¯ä»¥è¾“å‡ºä¸€ä¸ªè¡¨ç¤ºåºåˆ—ç»“æŸçš„token</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯é›†æŸæœç´¢ï¼Œä¸ºä»€ä¹ˆè¦ç”¨é›†æŸæœç´¢ï¼Ÿå¯ä»¥ç”¨ä»€ä¹ˆå·¥å…·å®ç°é›†æŸæœç´¢ï¼Ÿ</p>
<blockquote>
<p>beam search: æé«˜ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹çš„è¡¨ç°ï¼Œç®—æ³•è·Ÿè¸ªkä¸ªæœ€å¤§æ¦‚ç‡çš„å¥å­åˆ—è¡¨ï¼Œåœ¨æ¯ä¸ªè§£ç å™¨æ­¥éª¤å»¶é•¿ä¸€ä¸ªè¯ï¼Œç„¶åå†å…³æ³¨å…¶ä¸­kä¸ªæœ€å¤§æ¦‚ç‡çš„å¥å­ï¼Œkç§°ä¸ºé›†æŸå®½åº¦ã€‚è¯¥ç®—æ³•å¯ä»¥å¹¶è¡Œã€‚</p>
<p>Tensorflow addonså¯ä»¥ç”¨æ¥å®ç°é›†æŸæœç´¢ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æœºåˆ¶ï¼Ÿç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>æ³¨æ„åŠ›æœºåˆ¶æœ€æ—©ç”¨äºç¼–ç å™¨-è§£ç å™¨æ¨¡å‹ï¼Œç”¨äºé•¿è¾“å…¥ï¼Œå¯ä»¥è®©è§£ç å™¨åœ¨æ¯ä¸ªæ—¶é—´æ­¥å…³æ³¨ç‰¹åˆ«çš„ï¼ˆè¢«ç¼–ç å™¨ç¼–ç çš„ï¼‰è¯ã€‚</p>
</blockquote>
</li>
<li><p>Transformeræ¶æ„ä¸­æœ€é‡è¦çš„å±‚æ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨é‡‡æ ·softmaxï¼Ÿ</p>
</li>
<li><p>Hochreiter å’Œ Schmidhuber åœ¨å…³äºLSTMçš„<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F93" target="_blank" rel="noopener">è®ºæ–‡</a>ä¸­ä½¿ç”¨äº†åµŒå…¥Reberè¯­æ³•ã€‚è¿™æ˜¯ä¸€ç§äººå·¥çš„è¯­æ³•ï¼Œç”¨æ¥ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ â€œBPBTSXXVPSEPEâ€ã€‚æŸ¥çœ‹Jenny Orrå¯¹å®ƒçš„<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F108" target="_blank" rel="noopener">ä»‹ç»</a>ã€‚é€‰æ‹©ä¸€ä¸ªåµŒå…¥Reberè¯­æ³•ï¼ˆæ¯”å¦‚Jenny Orrçš„è®ºæ–‡ä¸­å±•ç¤ºçš„ï¼‰ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªRNNæ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè¯­æ³•ã€‚ä½ éœ€è¦å…ˆå†™ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆè®­ç»ƒæ‰¹æ¬¡ï¼Œå…¶ä¸­50%ç¬¦åˆè¯­æ³•ï¼Œ50%ä¸ç¬¦åˆè¯­æ³•ã€‚</p>
</li>
<li><p>è®­ç»ƒä¸€ä¸ªç¼–ç å™¨-è§£ç å™¨æ¨¡å‹ï¼Œå®ƒå¯ä»¥å°†æ—¥æœŸå­—ç¬¦ä¸²ä»ä¸€ä¸ªæ ¼å¼å˜ä¸ºå¦ä¸€ä¸ªæ ¼å¼ï¼ˆä¾‹å¦‚ï¼Œä»â€œApril 22, 2019â€å˜ä¸ºâ€œ2019-04-22â€ï¼‰ã€‚</p>
</li>
<li><p>é˜…è¯»TensorFlowçš„<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fnmttuto" target="_blank" rel="noopener">ã€ŠNeural Machine Translation with Attention tutorialã€‹</a>ã€‚</p>
</li>
<li><p>ä½¿ç”¨ä¸€ä¸ªæœ€è¿‘çš„è¯­è¨€æ¨¡å‹ï¼ˆæ¯”å¦‚ï¼ŒBERTï¼‰ï¼Œæ¥ç”Ÿæˆä¸€æ®µæ›´å…·ä¿¡æœåŠ›çš„èå£«æ¯”äºšæ–‡å­—ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬17ç« -ä½¿ç”¨è‡ªç¼–ç å™¨å’ŒGANåšè¡¨å¾å­¦ä¹ å’Œç”Ÿæˆå¼å­¦ä¹ "><a href="#ç¬¬17ç« -ä½¿ç”¨è‡ªç¼–ç å™¨å’ŒGANåšè¡¨å¾å­¦ä¹ å’Œç”Ÿæˆå¼å­¦ä¹ " class="headerlink" title="ç¬¬17ç«  ä½¿ç”¨è‡ªç¼–ç å™¨å’ŒGANåšè¡¨å¾å­¦ä¹ å’Œç”Ÿæˆå¼å­¦ä¹ "></a>ç¬¬17ç«  ä½¿ç”¨è‡ªç¼–ç å™¨å’ŒGANåšè¡¨å¾å­¦ä¹ å’Œç”Ÿæˆå¼å­¦ä¹ </h2><p>è‡ªç¼–ç å™¨æ˜¯èƒ½å¤Ÿåœ¨æ— ç›‘ç£ï¼ˆå³ï¼Œè®­ç»ƒé›†æ˜¯æœªæ ‡è®°ï¼‰çš„æƒ…å†µä¸‹å­¦ä¹ è¾“å…¥æ•°æ®çš„ç´§å¯†è¡¨å¾ï¼ˆå«åšæ½œåœ¨è¡¨å¾æˆ–ç¼–ç ï¼‰çš„äººå·¥ç¥ç»ç½‘ç»œã€‚è¿™äº›ç¼–ç é€šå¸¸å…·æœ‰æ¯”è¾“å…¥æ•°æ®ä½å¾—å¤šçš„ç»´åº¦ï¼Œä½¿å¾—è‡ªç¼–ç å™¨å¯¹é™ç»´æœ‰ç”¨ã€‚è‡ªç¼–ç å™¨è¿˜å¯ä»¥ä½œä¸ºå¼ºå¤§çš„ç‰¹å¾æ£€æµ‹å™¨ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºæ— ç›‘ç£çš„æ·±åº¦ç¥ç»ç½‘ç»œé¢„è®­ç»ƒã€‚ä¸€äº›è‡ªç¼–ç å™¨æ˜¯ç”Ÿæˆå¼æ¨¡å‹ï¼šä»–ä»¬èƒ½å¤Ÿéšæœºç”Ÿæˆä¸è®­ç»ƒæ•°æ®éå¸¸ç›¸ä¼¼çš„æ–°æ•°æ®ã€‚</p>
<p>å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰ç”Ÿæˆçš„äººè„¸å¯ä»¥éå¸¸é€¼çœŸï¼Œç”šè‡³è®©äººè®¤ä¸ºä»–ä»¬æ˜¯çœŸå®å­˜åœ¨çš„äººã€‚</p>
<p>è‡ªç¼–ç å™¨å’ŒGANéƒ½æ˜¯æ— ç›‘ç£çš„ï¼Œéƒ½å¯ä»¥å­¦ä¹ ç´§å¯†è¡¨å¾ï¼Œéƒ½å¯ä»¥ç”¨ä½œç”Ÿæˆæ¨¡å‹ï¼Œæœ‰è®¸å¤šç›¸ä¼¼çš„åº”ç”¨ï¼Œä½†åŸç†éå¸¸ä¸åŒï¼š</p>
<blockquote>
<p>è‡ªç¼–ç å™¨æ˜¯é€šè¿‡å­¦ä¹ ï¼Œå°†è¾“å…¥å¤åˆ¶åˆ°è¾“å‡ºã€‚å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†å†…éƒ¨ç»“æ„ä¼šä½¿å…¶ç›¸å½“å›°éš¾ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é™åˆ¶æ½œåœ¨è¡¨å¾çš„å¤§å°ï¼Œæˆ–è€…å¯ä»¥ç»™è¾“å…¥æ·»åŠ å™ªéŸ³ï¼Œè®­ç»ƒæ¨¡å‹æ¢å¤åŸå§‹è¾“å…¥ã€‚è¿™äº›é™åˆ¶ç»„ç»‡è‡ªç¼–ç å™¨ç›´æ¥å°†è¾“å…¥å¤åˆ¶åˆ°è¾“å‡ºï¼Œå¯ä»¥å¼ºè¿«æ¨¡å‹å­¦ä¹ æ•°æ®çš„é«˜æ•ˆè¡¨å¾ã€‚æ€»è€Œè¨€ä¹‹ï¼Œç¼–ç æ˜¯è‡ªç¼–ç å™¨åœ¨ä¸€äº›é™åˆ¶ä¸‹å­¦ä¹ æ’ç­‰å‡½æ•°çš„å‰¯äº§å“ã€‚</p>
<p>GANåŒ…æ‹¬ä¸¤ä¸ªç¥ç»ç½‘ç»œï¼šä¸€ä¸ªç”Ÿæˆå™¨å°è¯•ç”Ÿæˆå’Œè®­ç»ƒæ•°æ®ç›¸ä¼¼çš„æ•°æ®ï¼Œä¸€ä¸ªåˆ¤åˆ«å™¨æ¥åŒºåˆ†çœŸå®æ•°æ®å’Œå‡æ•°æ®ã€‚ç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼Œç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å½¼æ­¤ç«äº‰ï¼šç”Ÿæˆå™¨å°±åƒä¸€ä¸ªåˆ¶é€ ä¼ªé’çš„ç½ªçŠ¯ï¼Œè€Œåˆ¤åˆ«å™¨å°±åƒè­¦å¯Ÿä¸€æ ·ï¼Œè¦æŠŠçœŸé’±æŒ‘å‡ºæ¥ã€‚å¯¹æŠ—è®­ç»ƒï¼ˆè®­ç»ƒç«äº‰ç¥ç»ç½‘ç»œï¼‰ï¼Œè¢«è®¤ä¸ºæ˜¯è¿‘å‡ å¹´çš„ä¸€å¤§è¿›å±•ã€‚åœ¨2016å¹´ï¼ŒYann LeCunç”šè‡³è¯´GANæ˜¯è¿‡å»10å¹´æœºå™¨å­¦ä¹ é¢†åŸŸæœ€æœ‰è¶£çš„å‘æ˜ã€‚</p>
</blockquote>
<h3 id="è‡ªç¼–ç å™¨"><a href="#è‡ªç¼–ç å™¨" class="headerlink" title="è‡ªç¼–ç å™¨"></a>è‡ªç¼–ç å™¨</h3><p>è‡ªç¼–ç å™¨é€šå¸¸å…·æœ‰ä¸å¤šå±‚æ„ŸçŸ¥å™¨ç›¸åŒçš„ä½“ç³»ç»“æ„ï¼Œä½†è¾“å‡ºå±‚ä¸­çš„ç¥ç»å…ƒæ•°é‡å¿…é¡»ç­‰äºè¾“å…¥æ•°é‡ã€‚ç”±äºè‡ªç¼–ç å™¨è¯•å›¾é‡æ„è¾“å…¥ï¼Œæ‰€ä»¥è¾“å‡ºé€šå¸¸è¢«ç§°ä¸ºé‡å»ºï¼Œå¹¶ä¸”æŸå¤±å‡½æ•°åŒ…å«é‡å»ºæŸå¤±ï¼Œå½“é‡å»ºä¸è¾“å…¥ä¸åŒæ—¶ï¼Œé‡å»ºæŸå¤±ä¼šå¯¹æ¨¡å‹è¿›è¡Œæƒ©ç½šã€‚ç”±äºå†…éƒ¨è¡¨å¾å…·æœ‰æ¯”è¾“å…¥æ•°æ®æ›´ä½çš„ç»´åº¦ï¼ˆå®ƒæ˜¯ 2D è€Œä¸æ˜¯ 3Dï¼‰ï¼Œæ‰€ä»¥è‡ªç¼–ç å™¨è¢«è®¤ä¸ºæ˜¯ä¸å®Œæ•´çš„ã€‚ ä¸å®Œæ•´çš„è‡ªç¼–ç å™¨ä¸èƒ½ç®€å•åœ°å°†å…¶è¾“å…¥å¤åˆ¶åˆ°ç¼–ç ï¼Œä½†å®ƒå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥è¾“å‡ºå…¶è¾“å…¥çš„å‰¯æœ¬ã€‚ å®ƒè¢«è¿«å­¦ä¹ è¾“å…¥æ•°æ®ä¸­æœ€é‡è¦çš„ç‰¹å¾ï¼ˆå¹¶åˆ é™¤ä¸é‡è¦çš„ç‰¹å¾ï¼‰ã€‚</p>
<p>è‡ªç¼–ç å™¨ä¸é™äºç´§å¯†ç½‘ç»œï¼šè¿˜æœ‰å·ç§¯è‡ªç¼–ç å™¨å’Œå¾ªç¯è‡ªç¼–ç å™¨ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-96e89d75c6e86056.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="æ ˆå¼è‡ªç¼–ç å™¨"><a href="#æ ˆå¼è‡ªç¼–ç å™¨" class="headerlink" title="æ ˆå¼è‡ªç¼–ç å™¨"></a>æ ˆå¼è‡ªç¼–ç å™¨</h3><p>è‡ªç¼–ç å™¨å¯ä»¥æœ‰å¤šä¸ªéšè—å±‚ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¢«ç§°ä¸ºæ ˆå¼è‡ªç¼–ç å™¨ï¼ˆæˆ–æ·±åº¦è‡ªç¼–ç å™¨ï¼‰ã€‚æ ˆå¼è‡ªç¼–ç å™¨çš„æ¶æ„ä»¥ä¸­å¤®éšè—å±‚ï¼ˆç¼–ç å±‚ï¼‰ä¸ºä¸­å¿ƒé€šå¸¸æ˜¯å¯¹ç§°çš„ã€‚ </p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-97d3ae02870c17ac.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ä½¿ç”¨æ ˆå¼è‡ªç¼–ç å™¨åšæ— ç›‘ç£é¢„è®­ç»ƒ"><a href="#ä½¿ç”¨æ ˆå¼è‡ªç¼–ç å™¨åšæ— ç›‘ç£é¢„è®­ç»ƒ" class="headerlink" title="ä½¿ç”¨æ ˆå¼è‡ªç¼–ç å™¨åšæ— ç›‘ç£é¢„è®­ç»ƒ"></a>ä½¿ç”¨æ ˆå¼è‡ªç¼–ç å™¨åšæ— ç›‘ç£é¢„è®­ç»ƒ</h4><p>ç”¨æ‰€æœ‰è®­ç»ƒæ•°æ®è®­ç»ƒè‡ªç¼–ç å™¨ï¼Œç„¶åç”¨ç¼–ç å™¨å±‚åˆ›å»ºæ–°çš„ç¥ç»ç½‘ç»œ</p>
<h4 id="å…³è”æƒé‡"><a href="#å…³è”æƒé‡" class="headerlink" title="å…³è”æƒé‡"></a>å…³è”æƒé‡</h4><p>å°†è§£ç å™¨å±‚çš„æƒé‡ä¸ç¼–ç å™¨å±‚çš„æƒé‡ç›¸å…³è”ã€‚ è¿™æ ·å‡åŠäº†æ¨¡å‹ä¸­çš„æƒé‡æ•°é‡ï¼ŒåŠ å¿«äº†è®­ç»ƒé€Ÿåº¦ï¼Œå¹¶é™åˆ¶äº†è¿‡åº¦æ‹Ÿåˆçš„é£é™©ã€‚</p>
<h4 id="ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨"><a href="#ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨" class="headerlink" title="ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨"></a>ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨</h4><p>ä¸æ˜¯ä¸€æ¬¡å®Œæˆæ•´ä¸ªæ ˆå¼è‡ªç¼–ç å™¨çš„è®­ç»ƒï¼Œè€Œæ˜¯ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªæµ…è‡ªç¼–ç å™¨ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›è‡ªç¼–ç å™¨å †å åˆ°ä¸€ä¸ªæ ˆå¼è‡ªç¼–ç å™¨ï¼ˆå› æ­¤åç§°ï¼‰ä¸­ï¼Œé€šå¸¸è¦å¿«å¾—å¤šï¼Œ</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-95d0229917d60063.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ç°åœ¨çš„ä¸€å¤§è¶‹åŠ¿æ˜¯Geoffrey Hintonç­‰äººåœ¨2006å¹´å‘ç°çš„ï¼Œé è¿™ç§è´ªå©ªå±‚çº§æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ— ç›‘ç£æ–¹å¼è®­ç»ƒç¥ç»ç½‘ç»œã€‚ä»–ä»¬è¿˜ä½¿ç”¨äº†å—é™ç»å°”å…¹æ›¼æœºï¼ˆRBMï¼Œè§é™„å½•Eï¼‰ã€‚ä½†åœ¨2007å¹´ï¼ŒYoshua Bengioå‘ç°åªç”¨è‡ªç¼–ç å™¨ä¹Ÿå¯ä»¥è¾¾åˆ°ä¸é”™çš„æ•ˆæœã€‚</p>
<h3 id="å·ç§¯è‡ªç¼–ç å™¨"><a href="#å·ç§¯è‡ªç¼–ç å™¨" class="headerlink" title="å·ç§¯è‡ªç¼–ç å™¨"></a>å·ç§¯è‡ªç¼–ç å™¨</h3><p>å¯¹äºå›¾ç‰‡ä»»åŠ¡ï¼Œå·ç§¯ç¥ç»ç½‘ç»œæ¯”ç´§å¯†ç½‘ç»œçš„æ•ˆæœæ›´å¥½ã€‚æ‰€ä»¥å¦‚æœæƒ³ç”¨è‡ªç¼–ç å™¨æ¥å¤„ç†å›¾ç‰‡çš„è¯ï¼ˆä¾‹å¦‚ï¼Œæ— ç›‘ç£é¢„è®­ç»ƒæˆ–é™ç»´ï¼‰ï¼Œéœ€è¦æ­å»ºä¸€ä¸ªå·ç§¯è‡ªç¼–ç å™¨ã€‚ç¼–ç å™¨æ˜¯ä¸€ä¸ªåŒ…å«å·ç§¯å±‚å’Œæ± åŒ–å±‚çš„å¸¸è§„CNNã€‚</p>
<h3 id="å¾ªç¯è‡ªç¼–ç å™¨"><a href="#å¾ªç¯è‡ªç¼–ç å™¨" class="headerlink" title="å¾ªç¯è‡ªç¼–ç å™¨"></a>å¾ªç¯è‡ªç¼–ç å™¨</h3><p>å¦‚æœæƒ³ç”¨è‡ªç¼–ç å™¨å¤„ç†åºåˆ—ï¼Œæ¯”å¦‚å¯¹æ—¶é—´åºåˆ—æˆ–æ–‡æœ¬æ— ç›‘ç£å­¦ä¹ å’Œé™ç»´ï¼Œåˆ™å¾ªç¯ç¥ç»ç½‘ç»œè¦ä¼˜äºç´§å¯†ç½‘ç»œã€‚æ­å»ºå¾ªç¯è‡ªç¼–ç å™¨å¾ˆç®€å•ï¼šç¼–ç å™¨æ˜¯ä¸€ä¸ªåºåˆ—åˆ°çŸ¢é‡çš„RNNï¼Œè€Œè§£ç å™¨æ˜¯çŸ¢é‡åˆ°åºåˆ—çš„RNNã€‚</p>
<h3 id="å­¦ä¹ æ–¹æ³•"><a href="#å­¦ä¹ æ–¹æ³•" class="headerlink" title="å­¦ä¹ æ–¹æ³•"></a>å­¦ä¹ æ–¹æ³•</h3><p>ä¸ºäº†è®©è‡ªç¼–ç å­¦ä¹ ç‰¹å¾ï¼Œæˆ‘ä»¬é™åˆ¶äº†ç¼–ç å±‚çš„å¤§å°ï¼ˆä½¿å®ƒå¤„äºä¸å®Œæ•´çš„çŠ¶æ€ï¼‰ã€‚è¿˜å¯ä»¥ä½¿ç”¨è®¸å¤šå…¶ä»–çš„é™åˆ¶æ–¹æ³•ï¼Œå¯ä»¥è®©ç¼–ç å±‚å’Œè¾“å…¥å±‚ä¸€æ ·å¤§ï¼Œç”šè‡³æ›´å¤§ï¼Œå¾—åˆ°ä¸€ä¸ªè¿‡å®Œæˆçš„è‡ªç¼–ç å™¨ã€‚</p>
<h4 id="é™å™ªè‡ªç¼–ç "><a href="#é™å™ªè‡ªç¼–ç " class="headerlink" title="é™å™ªè‡ªç¼–ç "></a>é™å™ªè‡ªç¼–ç </h4><p>ä¸ºå…¶è¾“å…¥æ·»åŠ å™ªå£°ï¼Œå¯¹å…¶è¿›è¡Œè®­ç»ƒä»¥æ¢å¤åŸå§‹çš„æ— å™ªå£°è¾“å…¥ã€‚ å™ªå£°å¯ä»¥æ˜¯æ·»åŠ åˆ°è¾“å…¥çš„çº¯é«˜æ–¯å™ªå£°ï¼Œæˆ–è€…å¯ä»¥éšæœºå…³é—­è¾“å…¥ï¼Œå°±åƒ dropoutã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-870922646a65a746.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ç¨€ç–è‡ªç¼–ç å™¨"><a href="#ç¨€ç–è‡ªç¼–ç å™¨" class="headerlink" title="ç¨€ç–è‡ªç¼–ç å™¨"></a>ç¨€ç–è‡ªç¼–ç å™¨</h4><p>ç‰¹å¾æå–çš„å¦ä¸€ç§çº¦æŸæ˜¯ç¨€ç–æ€§ï¼šé€šè¿‡å‘æŸå¤±å‡½æ•°æ·»åŠ é€‚å½“çš„é¡¹ï¼Œè®©è‡ªç¼–ç å™¨å‡å°‘ç¼–ç å±‚ä¸­æ´»åŠ¨ç¥ç»å…ƒçš„æ•°é‡ã€‚</p>
<p> Kullback-Leibler æ•£åº¦ï¼Œå…·æœ‰æ¯”å‡æ–¹è¯¯å·®æ›´å¼ºçš„æ¢¯åº¦ï¼Œ</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b6809b315bb6dba7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>ç»™å®šä¸¤ä¸ªç¦»æ•£çš„æ¦‚ç‡åˆ†å¸ƒ<code>P</code>å’Œ<code>Q</code>ï¼Œè¿™äº›åˆ†å¸ƒä¹‹é—´çš„ KL æ•£åº¦ï¼Œè®°ä¸º DKL(P // Q)</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a96113128470474a.png?imageMogr2/auto-orient/strip|imageView2/2/w/816/format/webp" alt="img"></p>
<h3 id="å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰"><a href="#å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰" class="headerlink" title="å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰"></a>å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰</h3><p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å®ƒä»¬æ˜¯æ¦‚ç‡è‡ªç¼–ç å™¨ï¼Œæ„å‘³ç€å³ä½¿åœ¨è®­ç»ƒä¹‹åï¼Œå®ƒä»¬çš„è¾“å‡ºéƒ¨åˆ†ä¹Ÿæ˜¯å¶ç„¶ç¡®å®šçš„ï¼ˆç›¸å¯¹äºä»…åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨éšæœºæ€§çš„è‡ªç¼–ç å™¨çš„å»å™ªï¼‰ã€‚</li>
<li>å®ƒä»¬æ˜¯ç”Ÿæˆè‡ªç¼–ç å™¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥ç”Ÿæˆçœ‹èµ·æ¥åƒä»è®­ç»ƒé›†ä¸­é‡‡æ ·çš„æ–°å®ä¾‹ã€‚</li>
</ol>
<p>ä¸ RBM ï¼ˆå—é™ç»å°”å…¹æ›¼æœºï¼‰éå¸¸ç›¸ä¼¼ã€‚ç¼–ç å™¨äº§ç”Ÿå¹³å‡ç¼–ç <code>Î¼</code>å’Œæ ‡å‡†å·®<code>Ïƒ</code>ã€‚ ç„¶åä»å¹³å‡å€¼<code>Î¼</code>å’Œæ ‡å‡†å·®<code>Ïƒ</code>çš„é«˜æ–¯åˆ†å¸ƒéšæœºé‡‡æ ·å®é™…ç¼–ç ã€‚ ä¹‹åï¼Œè§£ç å™¨æ­£å¸¸è§£ç é‡‡æ ·çš„ç¼–ç ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-8103b55a6c0b39cb.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>æŸå¤±å‡½æ•°ï¼šé‡å»ºæŸå¤±+æ½œåœ¨çš„æŸå¤±</p>
<p>æ½œåœ¨æŸå¤±ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9e0614d9745baf00.png?imageMogr2/auto-orient/strip|imageView2/2/w/928/format/webp" alt="img"></p>
<p>næ˜¯ç¼–ç ç»´åº¦ï¼ŒÎ¼i å’Œ Ïƒiæ˜¯ç¼–ç çš„ç¬¬ithä¸ªæˆåˆ†çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ã€‚çŸ¢é‡uå’ŒÏƒæ˜¯ç¼–ç å™¨çš„è¾“å‡ºã€‚</p>
<p>ä¸€ç§å¸¸è§çš„å˜ä½“æ˜¯è®­ç»ƒç¼–ç å™¨è¾“å‡º<code>Î³= log(Ïƒ^2)</code>è€Œä¸æ˜¯<code>Ïƒ</code>ã€‚ è¿™ä¸ªæ–¹æ³•çš„è®¡ç®—æ›´ç¨³å®šï¼Œä¸”å¯ä»¥åŠ é€Ÿè®­ç»ƒã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-fd8844d61cc65f10.png?imageMogr2/auto-orient/strip|imageView2/2/w/986/format/webp" alt="img"></p>
<h3 id="å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰"><a href="#å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰" class="headerlink" title="å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰"></a>å¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰</h3><p>Ian Goodfellowåœ¨2014å¹´æå‡ºï¼Œæœ¬è´¨å¾ˆç®€å•ï¼šè®©ç¥ç»ç½‘ç»œäº’ç›¸ç«äº‰ï¼Œè®©å…¶åœ¨ç«äº‰ä¸­è¿›æ­¥ã€‚</p>
<ul>
<li><p>ç”Ÿæˆå™¨</p>
<p>ä½¿ç”¨éšæœºåˆ†å¸ƒä½œä¸ºè¾“å…¥ï¼ˆé€šå¸¸ä¸ºé«˜æ–¯åˆ†å¸ƒï¼‰ï¼Œå¹¶è¾“å‡ºä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡ã€‚å¯ä»¥å°†éšæœºè¾“å…¥ä½œä¸ºç”Ÿæˆæ–‡ä»¶çš„æ½œåœ¨è¡¨å¾ï¼ˆå³ï¼Œç¼–ç ï¼‰ã€‚ç”Ÿæˆå™¨çš„ä½œç”¨å’Œå˜åˆ†è‡ªç¼–ç å™¨ä¸­çš„è§£ç å™¨å·®ä¸å¤šï¼Œå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ç”Ÿæˆå›¾ç‰‡ï¼ˆåªè¦è¾“å…¥ä¸€äº›é«˜æ–¯å™ªéŸ³ï¼Œå°±èƒ½è¾“å‡ºå…¨æ–°çš„å›¾ç‰‡ï¼‰ã€‚ä½†æ˜¯ï¼Œç”Ÿæˆå™¨çš„è®­ç»ƒè¿‡ç¨‹å¾ˆä¸ä¸€æ ·ã€‚</p>
</li>
</ul>
<ul>
<li><p>åˆ¤åˆ«å™¨</p>
<p>ä»è®­ç»ƒé›†å–å‡ºä¸€å¼ å›¾ç‰‡ï¼Œåˆ¤æ–­å›¾ç‰‡æ˜¯çœŸæ˜¯å‡ã€‚</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e3e9a45c0fefb30e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>æ¯æ¬¡è®­ç»ƒè¿­ä»£åˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><p>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œè®­ç»ƒåˆ¤åˆ«å™¨ã€‚</p>
<p>ä»è®­ç»ƒé›†å–æ ·ä¸€æ‰¹çœŸå®å›¾ç‰‡ï¼Œæ•°é‡ä¸å‡å›¾ç‰‡ç›¸åŒã€‚å‡å›¾ç‰‡çš„æ ‡ç­¾è®¾ä¸º0ï¼ŒçœŸå›¾ç‰‡çš„æ ‡ç­¾è®¾ä¸º1ï¼Œåˆ¤åˆ«å™¨ç”¨è¿™ä¸ªæœ‰æ ‡ç­¾çš„æ‰¹æ¬¡è®­ç»ƒä¸€æ­¥ï¼Œä½¿ç”¨äºŒå…ƒäº¤å‰ç†µæŸå¤±ã€‚åå‘ä¼ æ’­åœ¨è¿™ä¸€é˜¶æ®µåªä¼˜åŒ–åˆ¤åˆ«å™¨çš„æƒé‡ã€‚</p>
</li>
<li><p>ç¬¬äºŒä¸ªé˜¶æ®µï¼Œè®­ç»ƒç”Ÿæˆå™¨ã€‚</p>
<p>é¦–å…ˆç”¨ç”Ÿæˆå™¨äº§ç”Ÿå¦ä¸€ä¸ªæ‰¹æ¬¡çš„å‡å›¾ç‰‡ï¼Œå†ç”¨åˆ¤åˆ«å™¨æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯çœŸæ˜¯å‡ã€‚è¿™ä¸€æ¬¡ä¸æ·»åŠ çœŸå›¾ç‰‡ï¼Œä½†æ‰€æœ‰æ ‡ç­¾éƒ½è®¾ä¸º1ï¼ˆçœŸï¼‰ï¼šæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬æƒ³è®©ç”Ÿæˆå™¨äº§ç”Ÿå¯ä»¥è®©åˆ¤åˆ«å™¨ä¿¡ä»¥ä¸ºçœŸçš„å›¾ç‰‡ã€‚åˆ¤åˆ«å™¨çš„æƒé‡åœ¨è¿™ä¸€æ­¥æ˜¯å†·å†»çš„ï¼Œæ‰€ä»¥åå‘ä¼ æ’­åªå½±å“ç”Ÿæˆå™¨ã€‚</p>
</li>
</ol>
<h4 id="è®­ç»ƒGANçš„éš¾ç‚¹"><a href="#è®­ç»ƒGANçš„éš¾ç‚¹" class="headerlink" title="è®­ç»ƒGANçš„éš¾ç‚¹"></a>è®­ç»ƒGANçš„éš¾ç‚¹</h4><p>åœ¨è®­ç»ƒä¸­ï¼Œç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ä¸æ–­è¯•å›¾è¶…è¶Šå¯¹æ–¹ï¼Œè¿™æ˜¯ä¸€ä¸ªé›¶å’Œåšå¼ˆã€‚éšç€è®­ç»ƒçš„è¿›è¡Œï¼Œå¯èƒ½ä¼šè¾¾æˆåšå¼ˆå­¦å®¶ç§°ä¸ºçº³ä»€å‡è¡¡çš„çŠ¶æ€ï¼šæ¯ä¸ªé€‰æ‰‹éƒ½ä¸æ”¹å˜ç­–ç•¥ï¼Œå¹¶è®¤ä¸ºå¯¹æ–¹ä¹Ÿä¸ä¼šæ”¹å˜ç­–ç•¥ã€‚ä¸åŒçš„åˆå§‹çŠ¶æ€å’ŒåŠ¨åŠ›å­¦ä¼šå¯¼è‡´ä¸åŒçš„å‡è¡¡ã€‚</p>
<p>è®ºæ–‡ä½œè€…è¯æ˜ï¼ŒGANåªèƒ½è¾¾åˆ°ä¸€ç§å‡è¡¡çŠ¶æ€ï¼šç”Ÿæˆå™¨äº§ç”Ÿå®Œç¾çš„çœŸå®å›¾ç‰‡ï¼ŒåŒæ—¶è®©åˆ¤åˆ«å™¨æ¥åˆ¤æ–­ï¼ˆ50%ä¸ºçœŸï¼Œ50%ä¸ºå‡ï¼‰ã€‚</p>
<p>æœ€å¤§çš„å›°éš¾æ˜¯æ¨¡å¼åå¡Œï¼šç”Ÿæˆå™¨çš„è¾“å‡ºé€æ¸å˜å¾—ä¸é‚£ä¹ˆä¸°å¯Œã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå‡è®¾ç”Ÿæˆå™¨äº§ç”Ÿçš„é‹å­å›¾ç‰‡æ¯”å…¶å®ƒç±»çš„å›¾ç‰‡æ›´è®©äººä¿¡æœï¼Œå‡é‹å­å›¾ç‰‡å°±ä¼šæ›´å¤šçš„æ¬ºéª—åˆ¤åˆ«å™¨ï¼Œå°±ä¼šå¯¼è‡´ç”Ÿæˆæ›´å¤šçš„é‹å­å›¾ç‰‡ã€‚é€æ¸çš„ï¼Œç”Ÿæˆå™¨ä¼šå¿˜æ‰å¦‚ä½•ç”Ÿæˆå…¶å®ƒç±»çš„å›¾ç‰‡ã€‚åŒæ—¶ï¼Œåˆ¤åˆ«å™¨å”¯ä¸€èƒ½çœ‹åˆ°çš„å°±æ˜¯é‹å­å›¾ç‰‡ï¼Œæ‰€ä»¥åˆ¤åˆ«å™¨ä¹Ÿä¼šå¿˜æ‰å¦‚ä½•åˆ¤æ–­å…¶å®ƒç±»çš„å›¾ç‰‡ã€‚GANä¼šé€æ¸åœ¨ä¸€äº›ç±»ä¸Šå¾ªç¯ï¼Œä»è€Œå¯¹å“ªä¸€ç±»éƒ½ä¸æ“…é•¿ã€‚</p>
<p>GANä¼šå¯¹è¶…å‚æ•°ç‰¹åˆ«æ•æ„Ÿï¼šå¾®è°ƒè¶…å‚æ•°ä¼šç‰¹åˆ«èŠ±è´¹æ—¶é—´ã€‚</p>
<h3 id="æ·±åº¦å·ç§¯GANï¼ˆDCGANï¼‰"><a href="#æ·±åº¦å·ç§¯GANï¼ˆDCGANï¼‰" class="headerlink" title="æ·±åº¦å·ç§¯GANï¼ˆDCGANï¼‰"></a>æ·±åº¦å·ç§¯GANï¼ˆDCGANï¼‰</h3><p>æ­å»ºç¨³å®šå·ç§¯GANçš„å»ºè®®å¦‚ä¸‹ï¼š</p>
<ul>
<li>ï¼ˆåˆ¤åˆ«å™¨ä¸­ï¼‰ç”¨å·ç§¯æ­¥é•¿ï¼ˆstrided convolutionsï¼‰ã€ï¼ˆç”Ÿæˆå™¨ä¸­ï¼‰ç”¨è½¬ç½®å·ç§¯ï¼Œæ›¿æ¢æ± åŒ–å±‚ã€‚</li>
<li>ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨éƒ½ä½¿ç”¨æ‰¹å½’ä¸€åŒ–ï¼Œé™¤äº†ç”Ÿæˆå™¨çš„è¾“å‡ºå±‚å’Œåˆ¤åˆ«å™¨çš„è¾“å…¥å±‚ã€‚</li>
<li>å»é™¤æ·±å±‚æ¶æ„ä¸­çš„å…¨è¿æ¥éšè—å±‚ã€‚</li>
<li>ç”Ÿæˆå™¨çš„è¾“å‡ºå±‚ä½¿ç”¨tanhæ¿€æ´»ï¼Œå…¶å®ƒå±‚ä½¿ç”¨ReLUæ¿€æ´»ã€‚</li>
<li>åˆ¤åˆ«å™¨çš„æ‰€æœ‰å±‚ä½¿ç”¨leaky ReLUæ¿€æ´»ã€‚</li>
</ul>
<h3 id="æ¡ä»¶GANï¼ˆCGANï¼‰"><a href="#æ¡ä»¶GANï¼ˆCGANï¼‰" class="headerlink" title="æ¡ä»¶GANï¼ˆCGANï¼‰"></a>æ¡ä»¶GANï¼ˆCGANï¼‰</h3><p>å¦‚æœå°†å›¾ç‰‡çš„ç±»ä½œä¸ºå¦ä¸€ä¸ªè¾“å…¥ï¼Œè¾“å…¥ç»™ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ï¼Œå®ƒä»¬éƒ½èƒ½å­¦åˆ°æ¯ä¸ªç±»çš„æ ·å­ï¼Œä½ å°±å¯ä»¥æ§åˆ¶ç”Ÿæˆå™¨äº§ç”Ÿå›¾ç‰‡çš„ç±»ã€‚è¿™è¢«ç§°ä¸ºæ¡ä»¶GANï¼ˆCGANï¼‰ã€‚</p>
<h3 id="æ–¹æ³•ï¼šç”¨äºæé«˜è¾“å‡ºçš„æ•£åº¦ï¼ˆé¿å…æ¨¡å¼åå¡Œï¼‰ï¼Œä½¿è®­ç»ƒæ›´ç¨³å®šï¼š"><a href="#æ–¹æ³•ï¼šç”¨äºæé«˜è¾“å‡ºçš„æ•£åº¦ï¼ˆé¿å…æ¨¡å¼åå¡Œï¼‰ï¼Œä½¿è®­ç»ƒæ›´ç¨³å®šï¼š" class="headerlink" title="æ–¹æ³•ï¼šç”¨äºæé«˜è¾“å‡ºçš„æ•£åº¦ï¼ˆé¿å…æ¨¡å¼åå¡Œï¼‰ï¼Œä½¿è®­ç»ƒæ›´ç¨³å®šï¼š"></a>æ–¹æ³•ï¼šç”¨äºæé«˜è¾“å‡ºçš„æ•£åº¦ï¼ˆé¿å…æ¨¡å¼åå¡Œï¼‰ï¼Œä½¿è®­ç»ƒæ›´ç¨³å®šï¼š</h3><h4 id="GANçš„æ¸è¿›å¼å˜å¤§"><a href="#GANçš„æ¸è¿›å¼å˜å¤§" class="headerlink" title="GANçš„æ¸è¿›å¼å˜å¤§"></a>GANçš„æ¸è¿›å¼å˜å¤§</h4><p>å»ºè®®åœ¨è®­ç»ƒæ—¶ï¼Œå…ˆä»ç”Ÿæˆå°å›¾ç‰‡å¼€å§‹ï¼Œç„¶åé€æ­¥ç»™ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨æ·»åŠ å·ç§¯å±‚ï¼Œç”Ÿæˆè¶Šæ¥è¶Šå¤§çš„å›¾ç‰‡ï¼ˆ4 Ã— 4, 8 Ã— 8, 16 Ã— 16, â€¦, 512 Ã— 512, 1,024 Ã— 1,024ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•å’Œæ ˆå¼è‡ªç¼–ç å™¨çš„è´ªå©ªå±‚çº§è®­ç»ƒå¾ˆåƒã€‚ä½™ä¸‹çš„å±‚æ·»åŠ åˆ°ç”Ÿæˆå™¨çš„æœ«ç«¯å’Œåˆ¤åˆ«å™¨çš„å‰ç«¯ï¼Œä¹‹å‰è®­ç»ƒå¥½çš„å±‚ä»ç„¶å¯è®­ç»ƒã€‚</p>
<h4 id="å°æ‰¹æ¬¡æ ‡å‡†å·®å±‚"><a href="#å°æ‰¹æ¬¡æ ‡å‡†å·®å±‚" class="headerlink" title="å°æ‰¹æ¬¡æ ‡å‡†å·®å±‚"></a>å°æ‰¹æ¬¡æ ‡å‡†å·®å±‚</h4><p>æ·»åŠ åœ¨åˆ¤åˆ«å™¨çš„é è¿‘æœ«ç«¯çš„ä½ç½®ã€‚å¯¹äºè¾“å…¥çš„æ¯ä¸ªä½ç½®ï¼Œè®¡ç®—æ‰¹æ¬¡ï¼ˆ<code>S = tf.math.reduce_std(inputs, axis=[0, -1])</code>ï¼‰ä¸­ï¼Œæ‰€æœ‰é€šé“æ‰€æœ‰å®ä¾‹çš„æ ‡å‡†å·®ã€‚æ¥ç€ï¼Œè¿™äº›æ ‡å‡†å·®å¯¹æ‰€æœ‰ç‚¹åšå¹³å‡ï¼Œå¾—åˆ°ä¸€ä¸ªå•å€¼ï¼ˆ<code>v = tf.reduce_mean(S)</code>ï¼‰ã€‚æœ€åï¼Œç»™æ‰¹æ¬¡ä¸­çš„æ¯ä¸ªå®ä¾‹æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ç‰¹å¾æ˜ å°„ï¼Œå¡«å…¥è®¡ç®—å¾—åˆ°çš„å•å€¼ï¼ˆ<code>tf.concat([inputs, tf.fill([batch_size, height, width, 1], v)], axis=-1)</code>ï¼‰ã€‚å¦‚æœç”Ÿæˆå™¨äº§ç”Ÿçš„å›¾ç‰‡æ²¡æœ‰ä»€ä¹ˆåå·®ï¼Œåˆ™åˆ¤åˆ«å™¨çš„ç‰¹å¾æ˜ å°„çš„æ ‡å‡†å·®ä¼šç‰¹åˆ«å°ã€‚æœ‰äº†è¿™ä¸ªå±‚ï¼Œåˆ¤åˆ«å™¨å°±å¯ä»¥åšå‡ºåˆ¤æ–­ã€‚å¯ä»¥è®©ç”Ÿæˆå™¨äº§ç”Ÿé«˜æ•£åº¦çš„è¾“å‡ºï¼Œé™ä½æ¨¡å¼åå¡Œçš„é£é™©ã€‚</p>
<h4 id="ç›¸ç­‰çš„å­¦ä¹ ç‡"><a href="#ç›¸ç­‰çš„å­¦ä¹ ç‡" class="headerlink" title="ç›¸ç­‰çš„å­¦ä¹ ç‡"></a>ç›¸ç­‰çš„å­¦ä¹ ç‡</h4><p>ä½¿ç”¨ä¸€ä¸ªç®€å•çš„é«˜æ–¯åˆ†å¸ƒï¼ˆå¹³å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰åˆå§‹åŒ–æƒé‡ï¼Œè€Œä¸ä½¿ç”¨Heåˆå§‹åŒ–ã€‚ä½†æ˜¯ï¼Œæƒé‡åœ¨è¿è¡Œæ—¶ï¼ˆå³ï¼Œæ¯æ¬¡æ‰§è¡Œå±‚ï¼‰ä¼šå˜å°ï¼šä¼šé™¤ä»¥<img src="https://math.jianshu.com/math?formula=%5Csqrt%7B2%2Fninputs%7D" alt="\sqrt{2/ninputs}">ï¼Œninputsæ˜¯å±‚çš„è¾“å…¥æ•°ã€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥æ˜¾è‘—æå‡GANä½¿ç”¨RMSPropã€Adamå’Œå…¶å®ƒé€‚åº”æ¢¯åº¦ä¼˜åŒ–å™¨æ—¶çš„æ€§èƒ½ã€‚äº‹å®ä¸Šï¼Œè¿™äº›ä¼˜åŒ–å™¨ç”¨ä¼°è®¡æ ‡å‡†å·®å½’ä¸€åŒ–äº†æ¢¯åº¦æ›´æ–°ï¼Œæ‰€ä»¥æœ‰è¾ƒå¤§åŠ¨æ€èŒƒå›´çš„å‚æ•°éœ€è¦æ›´é•¿æ—¶é—´è®­ç»ƒï¼Œè€Œè¾ƒå°åŠ¨æ€èŒƒå›´çš„å‚æ•°å¯èƒ½æ›´æ–°è¿‡å¿«ï¼Œä¼šå¯¼è‡´ä¸ç¨³å®šã€‚é€šè¿‡ç¼©æ”¾æ¨¡å‹çš„éƒ¨åˆ†å‚æ•°ï¼Œå¯ä»¥ä¿è¯å‚æ•°çš„åŠ¨æ€èŒƒå›´åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸€è‡´ï¼Œå¯ä»¥ç”¨ç›¸åŒçš„é€Ÿåº¦å­¦ä¹ ã€‚è¿™æ ·æ—¢åŠ é€Ÿäº†è®­ç»ƒï¼Œä¹Ÿåšåˆ°äº†ç¨³å®šã€‚</p>
<h4 id="åƒç´ çº§å½’ä¸€åŒ–å±‚"><a href="#åƒç´ çº§å½’ä¸€åŒ–å±‚" class="headerlink" title="åƒç´ çº§å½’ä¸€åŒ–å±‚"></a>åƒç´ çº§å½’ä¸€åŒ–å±‚</h4><p>ç”Ÿæˆå™¨çš„æ¯ä¸ªå·ç§¯å±‚ä¹‹åæ·»åŠ ã€‚å®ƒèƒ½å½’ä¸€åŒ–æ¯ä¸ªæ¿€æ´»å‡½æ•°ï¼ŒåŸºäºç›¸åŒå›¾ç‰‡ç›¸åŒä½ç½®çš„æ‰€æœ‰æ¿€æ´»ï¼Œè€Œä¸”è·¨é€šé“ï¼ˆé™¤ä»¥å¹³å‡æ¿€æ´»å¹³æ–¹çš„å¹³æ–¹æ ¹ï¼‰ã€‚åœ¨TensorFlowçš„ä»£ç ä¸­ï¼Œè¿™æ˜¯<code>inputs / tf.sqrt(tf.reduce_mean(tf.square(X), axis=-1, keepdims=True) + 1e-8)</code>ï¼ˆå¹³æ»‘é¡¹1e-8ç”¨äºé¿å…é›¶é™¤ï¼‰ã€‚è¿™ç§æ–¹æ³•å¯ä»¥é¿å…ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨çš„è¿‡åˆ†ç«äº‰å¯¼è‡´çš„æ¿€æ´»çˆ†ç‚¸ã€‚</p>
<h3 id="StyleGAN"><a href="#StyleGAN" class="headerlink" title="StyleGAN"></a>StyleGAN</h3><p>Nvidiaå›¢é˜Ÿåœ¨2018å¹´çš„ä¸€ç¯‡<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2Fstylegan" target="_blank" rel="noopener">è®ºæ–‡</a>ä¸­æå‡ºäº†é«˜æ€§èƒ½çš„é«˜æ¸…å›¾ç‰‡ç”Ÿæˆæ¶æ„ï¼ŒStyleGANã€‚ä½œè€…åœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨äº†é£æ ¼è¿ç§»æ–¹æ³•ï¼Œä½¿ç”Ÿæˆçš„å›¾ç‰‡å’Œè®­ç»ƒå›¾ç‰‡åœ¨æ¯ä¸ªå±‚æ¬¡ï¼Œéƒ½æœ‰ç›¸åŒçš„å±€éƒ¨ç»“æ„ï¼Œæå¤§æå‡äº†å›¾ç‰‡çš„è´¨é‡ã€‚åˆ¤åˆ«å™¨å’ŒæŸå¤±å‡½æ•°æ²¡æœ‰å˜åŠ¨ï¼Œåªä¿®æ”¹äº†ç”Ÿæˆå™¨ã€‚StyleGANåŒ…å«ä¸¤ä¸ªç½‘ç»œ</p>
<ol>
<li><p>æ˜ å°„ç½‘ç»œ</p>
<p>ä¸€ä¸ªå…«å±‚çš„MLPï¼Œå°†æ½œåœ¨è¡¨å¾<code>z</code>ï¼ˆå³ï¼Œç¼–ç ï¼‰æ˜ å°„ä¸ºçŸ¢é‡<code>w</code>ã€‚çŸ¢é‡ç„¶åä¼ ç»™ä»¿å°„å˜æ¢ï¼Œè¾“å‡ºè®¸å¤šçŸ¢é‡ã€‚è¿™äº›çŸ¢é‡åœ¨ä¸åŒçº§åˆ«æ§åˆ¶ç€ç”Ÿæˆå›¾ç‰‡çš„é£æ ¼ï¼Œä»ç»†ç²’åº¦çº¹ç†ï¼ˆæ¯”å¦‚ï¼Œå¤´å‘é¢œè‰²ï¼‰åˆ°é«˜çº§ç‰¹å¾ï¼ˆæ¯”å¦‚ï¼Œæˆäººæˆ–å­©å­ï¼‰ã€‚æ€»è€Œè¨€ä¹‹ï¼Œæ˜ å°„ç½‘ç»œå°†ç¼–ç å˜ä¸ºè®¸å¤šé£æ ¼çŸ¢é‡ã€‚</p>
</li>
<li><p>åˆæˆç½‘ç»œ</p>
<p>è´Ÿè´£ç”Ÿæˆå›¾ç‰‡ã€‚å®ƒæœ‰ä¸€ä¸ªå›ºå®šçš„å­¦å¥½çš„è¾“å…¥ï¼ˆè¿™ä¸ªè¾“å…¥åœ¨è®­ç»ƒä¹‹åæ˜¯ä¸å˜çš„ï¼Œä½†åœ¨è®­ç»ƒä¸­è¢«åå‘ä¼ æ’­æ›´æ–°ï¼‰ã€‚å’Œä¹‹å‰ä¸€æ ·ï¼Œåˆæˆç½‘ç»œä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸ä¸Šé‡‡æ ·å±‚å¤„ç†è¾“å…¥ï¼Œä½†æœ‰ä¸¤å¤„ä¸åŒï¼šé¦–å…ˆï¼Œè¾“å…¥å’Œæ‰€æœ‰å·ç§¯å±‚çš„è¾“å‡ºï¼ˆåœ¨æ¿€æ´»å‡½æ•°ä¹‹å‰ï¼‰éƒ½æ·»åŠ äº†å™ªéŸ³ã€‚ç¬¬äºŒï¼Œæ¯ä¸ªå™ªéŸ³å±‚çš„åé¢æ˜¯ä¸€ä¸ªé€‚åº”å®ä¾‹å½’ä¸€åŒ–ï¼ˆAdaINï¼‰å±‚ï¼šå®ƒç‹¬ç«‹æ ‡å‡†åŒ–æ¯ä¸ªç‰¹å¾æ˜ å°„ï¼ˆå‡å»å¹³å‡å€¼ï¼Œé™¤ä»¥æ ‡å‡†å·®ï¼‰ï¼Œç„¶åä½¿ç”¨é£æ ¼çŸ¢é‡ç¡®å®šæ¯ä¸ªç‰¹å¾æ˜ å°„çš„ç¼©æ”¾å’Œåç§»ï¼ˆé£æ ¼çŸ¢é‡å¯¹æ¯ä¸ªç‰¹å¾æ˜ å°„åŒ…å«ä¸€ä¸ªç¼©æ”¾å’Œä¸€ä¸ªåç½®é¡¹ï¼‰</p>
</li>
</ol>
<p>StyleGANä½¿ç”¨äº†ä¸€ç§ç§°ä¸ºæ··åˆæ­£åˆ™ï¼ˆæˆ–é£æ ¼æ··åˆï¼‰çš„æ–¹æ³•ï¼Œç”Ÿæˆå›¾çš„ä¸€å®šæ¯”ä¾‹ä½¿ç”¨ä¸¤ä¸ªç¼–ç æ¥ç”Ÿæˆã€‚ç‰¹åˆ«çš„ï¼Œç¼–ç c1 å’Œ c2å‘é€ç»™æ˜ å°„ç½‘ç»œï¼Œå¾—åˆ°ä¸¤ä¸ªé£æ ¼çŸ¢é‡w1 å’Œ w2ã€‚ç„¶ååˆæˆç½‘ç»œä½¿ç”¨é£æ ¼w1ç”Ÿæˆç¬¬ä¸€çº§ï¼Œç”¨w2ç”Ÿæˆå…¶ä½™çš„ã€‚çº§çš„é€‰å–æ˜¯éšæœºçš„ã€‚è¿™å¯ä»¥é˜²æ­¢æ¨¡å‹è®¤ä¸ºä¸´è¿‘çš„çº§æ˜¯æœ‰å…³è”çš„ï¼Œä¼šå¯¼è‡´GANçš„å±€éƒ¨æ€§ï¼Œæ¯ä¸ªé£æ ¼çŸ¢é‡åªä¼šå½±å“ç”Ÿæˆå›¾çš„æœ‰é™æ•°é‡çš„ç‰¹æ€§ã€‚</p>
<h3 id="ç»ƒä¹ -7"><a href="#ç»ƒä¹ -7" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>è‡ªç¼–ç å™¨ä¸»è¦ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>æ— ç›‘ç£é¢„è®­ç»ƒï¼Œç‰¹å¾æå–ï¼Œé™ç»´ï¼Œç”Ÿæˆæ¨¡å‹ï¼Œå¼‚å¸¸å€¼æ£€æµ‹</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ æƒ³è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ï¼Œæœ‰è®¸å¤šæœªæ‰“æ ‡ç­¾çš„è®­ç»ƒæ•°æ®ï¼Œåªæœ‰ä¸€åƒå¤šæ‰“äº†æ ‡ç­¾çš„æ•°æ®ã€‚å¦‚ä½•ä½¿ç”¨è‡ªç¼–ç å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>ç”¨æ‰€æœ‰çš„æ•°æ®è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨ï¼Œç„¶åå°†ç¼–ç å™¨éƒ¨åˆ†ç”¨ä½œåˆ†ç±»å™¨ï¼Œç”¨æœ‰æ ‡ç­¾çš„æ•°æ®è®­ç»ƒã€‚å¦‚æœæœ‰æ ‡ç­¾æ•°æ®ç‰¹åˆ«å°‘ï¼Œå¯èƒ½éœ€è¦å…ˆå†»ç»“é‡å¤ä½¿ç”¨çš„å‡ å±‚ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœè‡ªç¼–ç å™¨å®Œç¾é‡å»ºäº†è¾“å…¥ï¼Œå®ƒä¸€å®šæ˜¯ä¸ªå¥½çš„è‡ªç¼–ç å™¨å—ï¼Ÿå¦‚ä½•è¯„ä¼°è‡ªç¼–ç å™¨çš„è¡¨ç°ï¼Ÿ</p>
<blockquote>
<p>ä¸ä¸€å®šï¼Œå¦‚æœè‡ªç¼–ç å™¨éå¸¸å¤æ‚ï¼Œé‡å»ºç»“æœéå¸¸å¥½ï¼Œä½†æ˜¯å¯èƒ½ä¸èƒ½å­¦åˆ°ç‰¹å¾ï¼Œæ³›åŒ–èƒ½åŠ›ä¸å¥½ã€‚</p>
<p>ä½†æ˜¯åè¿‡æ¥ï¼Œå¦‚æœé‡å»ºç»“æœä¸å¥½ï¼Œé‚£ä¸€å®šä¸æ˜¯ä¸€ä¸ªå¥½çš„è‡ªç¼–ç å™¨ã€‚</p>
<p>è®¡ç®—é‡å»ºæŸå¤±å‡½æ•°æ¥è¯„ä¼°è‡ªç¼–ç å™¨çš„è¡¨ç°ã€‚</p>
</blockquote>
</li>
<li><p>è‡ªç¼–ç å™¨çš„æ¬ å®Œæˆå’Œè¿‡å®Œæˆæ˜¯ä»€ä¹ˆï¼Ÿè¶…æ¬ å®Œæˆçš„é£é™©æ˜¯ä»€ä¹ˆï¼Ÿè¿‡å®Œæˆçš„é£é™©æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>æ¬ å®Œæˆï¼ˆundercompleteï¼‰ï¼šcodingå±‚æ¯”è¾“å…¥å’Œè¾“å‡ºå±‚å°ï¼Œé‡å»ºè¾“å…¥æ¯”è¾ƒå›°éš¾ã€‚</p>
<p>è¿‡å®Œæˆï¼ˆovercompleteï¼‰ï¼šcodingå±‚æ¯”è¾“å…¥å’Œè¾“å‡ºå±‚å¤§ï¼Œä»…ä»…å°†è¾“å…¥copyåˆ°è¾“å‡ºï¼Œæ— æ³•å­¦ä¹ æœ‰ç”¨çš„ç‰¹å¾ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚ä½•å°†æ ˆå¼è‡ªç¼–ç å™¨çš„æƒé‡è¿èµ·æ¥ï¼Ÿè¿™ä¹ˆåšçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>å°†è‡ªç¼–ç å™¨çš„ç¼–ç å™¨å’Œè§£ç å™¨çš„æƒé‡è¿èµ·æ¥ï¼ˆè§£ç å™¨çš„æƒé‡=ç¼–ç å™¨æƒé‡çš„è½¬ç½®ï¼‰ï¼Œå‡å°‘å‚æ•°çš„ä¸ªæ•°ï¼Œä½¿å¾—è®­ç»ƒæ”¶æ•›æ›´å¿«ï¼Œå‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯ç”Ÿæˆå¼æ¨¡å‹ï¼Ÿå¯ä»¥ä¸¾å‡ºç”Ÿæˆå¼è‡ªç¼–ç å™¨çš„ä¾‹å­å—ï¼Ÿ</p>
<blockquote>
<p>ç”Ÿæˆæ¨¡å‹å¯ä»¥éšæœºç”Ÿæˆå¯ä»¥ä»¥å‡ä¹±çœŸçš„æ•°æ®å®ä¾‹ã€‚</p>
<p>åœ¨MNISTä¸Šè®­ç»ƒçš„ç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥éšæœºç”Ÿæˆæ‰‹å†™æ•°å­—çš„å›¾åƒï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”Ÿæˆæ¨¡å‹çš„è¾“å‡ºåˆ†å¸ƒå’Œè®­ç»ƒé›†ä¸Šçš„åˆ†å¸ƒç›¸ä¼¼ã€‚å¦‚æœæƒ³è¦è¾“å‡ºç‰¹å®šç±»åˆ«çš„è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨å˜åˆ†ç¼–ç å™¨ã€‚</p>
</blockquote>
</li>
<li><p>GANæ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥ç”¨äºä»€ä¹ˆä»»åŠ¡ï¼Ÿ</p>
<blockquote>
<p>GANï¼ˆgenerative adversarial networkï¼‰ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼šæ˜¯ä¸€ç§ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæœ‰ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ä¸¤ä¸ªéƒ¨åˆ†ã€‚ç”Ÿæˆå™¨çš„ç›®çš„ç”Ÿæˆå’Œè®­ç»ƒé›†ç›¸ä¼¼çš„å®ä¾‹ï¼Œæ¬ºéª—åˆ¤åˆ«å™¨ï¼Œè€Œåˆ¤åˆ«å™¨å¾—ç›®çš„æ˜¯ä»ç”Ÿæˆçš„å®ä¾‹ä¸­åˆ†è¾¨å“ªäº›æ˜¯çœŸæ­£çš„å®ä¾‹ã€‚åœ¨æ¯ä¸€è½®è®­ç»ƒä¸­ï¼Œåˆ¤åˆ«å™¨ç±»ä¼¼äºäºŒåˆ†ç±»å™¨ï¼Œè€Œç”Ÿæˆå™¨æœ€å¤§åŒ–åˆ¤åˆ«å™¨çš„è¯¯å·®ã€‚</p>
<p>GANå¯ä»¥ç”¨äºï¼šé«˜çº§çš„å›¾åƒå¤„ç†ä»»åŠ¡ï¼šä¸Šè‰²ï¼Œè¶…åˆ†è¾¨ç‡ï¼Œå°†è‰å›¾ç”Ÿæˆç…§ç‰‡åŒ–çš„å›¾åƒã€‚</p>
</blockquote>
</li>
<li><p>è®­ç»ƒGANçš„éš¾ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>æœ€å¤§çš„å›°éš¾æ˜¯æ¨¡å¼åå¡Œï¼šç”Ÿæˆå™¨çš„è¾“å‡ºé€æ¸å˜å¾—ä¸é‚£ä¹ˆä¸°å¯Œã€‚</p>
<p>è®­ç»ƒä¸ç¨³å®šï¼Œå¯èƒ½å¼€å§‹è¡¨ç°å¾ˆå¥½ï¼Œå‡ æ¬¡è¿­ä»£ä¹‹åå¼€å§‹åå¡Œæˆ–è€…å‘æ•£ã€‚</p>
<p>GANä¼šå¯¹è¶…å‚æ•°ç‰¹åˆ«æ•æ„Ÿï¼šå¾®è°ƒè¶…å‚æ•°ä¼šç‰¹åˆ«èŠ±è´¹æ—¶é—´ã€‚</p>
</blockquote>
</li>
<li><p>ç”¨å»å™ªéŸ³è‡ªç¼–ç å™¨é¢„è®­ç»ƒä¸€ä¸ªå›¾ç‰‡åˆ†ç±»å™¨ã€‚å¯ä»¥ä½¿ç”¨MNISTï¼Œæˆ–æ˜¯æ›´å¤æ‚çš„å›¾ç‰‡æ•°æ®é›†ï¼Œæ¯”å¦‚CIFAR10ã€‚ä¸ç®¡ç”¨çš„æ˜¯ä»€ä¹ˆæ•°æ®é›†ï¼Œéµå¾ªä¸‹é¢çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å°†æ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚åœ¨å®Œæ•´è®­ç»ƒé›†ä¸Šï¼Œè®­ç»ƒä¸€ä¸ªæ·±åº¦å»å™ªéŸ³è‡ªç¼–ç å™¨ã€‚</li>
<li>æ£€æŸ¥å›¾ç‰‡æ­£ç¡®é‡å»ºäº†ã€‚å¯è§†åŒ–æœ€æ¿€æ´»ç¼–ç å±‚ç¥ç»å…ƒçš„å›¾ç‰‡ã€‚</li>
<li>æ­å»ºä¸€ä¸ªåˆ†ç±»DNNï¼Œä½¿ç”¨è‡ªç¼–ç å™¨çš„æµ…å±‚ã€‚ç”¨è®­ç»ƒé›†ä¸­çš„500å¼ å›¾ç‰‡æ¥è®­ç»ƒã€‚ç„¶ååˆ¤æ–­é¢„è®­ç»ƒæ˜¯å¦æå‡äº†æ€§èƒ½ï¼Ÿ</li>
</ul>
</li>
<li><p>ç”¨åˆšæ‰é€‰æ‹©çš„æ•°æ®é›†ï¼Œè®­ç»ƒä¸€ä¸ªå˜åˆ†è‡ªç¼–ç å™¨ã€‚ç”¨å®ƒæ¥ç”Ÿæˆå›¾ç‰‡ã€‚æˆ–è€…ï¼Œç”¨ä¸€ä¸ªæ²¡æœ‰æ ‡ç­¾çš„æ•°æ®é›†ï¼Œæ¥ç”Ÿæˆæ–°æ ·æœ¬ã€‚</p>
</li>
<li><p>è®­ç»ƒä¸€ä¸ªDCGANæ¥å¤„ç†é€‰æ‹©çš„æ•°æ®é›†ï¼Œç”Ÿæˆæ–°å›¾ç‰‡ã€‚æ·»åŠ ç»éªŒæ¥åŠ›ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦æœ‰ä½œç”¨ã€‚å†å°†å…¶å˜ä¸ºä¸€ä¸ªæ¡ä»¶GANï¼Œå¯ä»¥æ§åˆ¶ç”Ÿæˆçš„ç±»ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬18ç« -å¼ºåŒ–å­¦ä¹ "><a href="#ç¬¬18ç« -å¼ºåŒ–å­¦ä¹ " class="headerlink" title="ç¬¬18ç«  å¼ºåŒ–å­¦ä¹ "></a>ç¬¬18ç«  å¼ºåŒ–å­¦ä¹ </h2><p> 2013 å¹´ä¸€ä¸ªé©å‘½æ€§çš„å‘å±•ï¼šæ¥è‡ªè‹±å›½çš„ç ”ç©¶è€…å‘èµ·äº†Deepmind é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å¯ä»¥å­¦ä¹ å»ç©ä»»ä½•ä»å¤´å¼€å§‹çš„ Atari æ¸¸æˆï¼Œåœ¨å¤šæ•°æ¸¸æˆä¸­ï¼Œæ¯”äººç±»ç©çš„è¿˜å¥½ï¼Œå®ƒä»…ä½¿ç”¨åƒç´ ä½œä¸ºè¾“å…¥è€Œæ²¡æœ‰ä½¿ç”¨æ¸¸æˆè§„åˆ™çš„ä»»ä½•å…ˆéªŒçŸ¥è¯†ã€‚åœ¨ 2016 å¹´ 3 æœˆä»¥ä»–ä»¬çš„ç³»ç»ŸAlphaGoæˆ˜èƒœäº†ä¸–ç•Œå›´æ£‹å† å†›æä¸–çŸ³è€Œå‘Šç»ˆã€‚DeepMind åœ¨ 2014 è¢«è°·æ­Œä»¥è¶…è¿‡ 5 äº¿ç¾å…ƒæ”¶è´­ã€‚</p>
<p>åŸç†ï¼šå°†æ·±åº¦å­¦ä¹ è¿ç”¨åˆ°å¼ºåŒ–å­¦ä¹ é¢†åŸŸ</p>
<p>ç­–ç•¥æ¢¯åº¦å’Œæ·±åº¦ Q ç½‘ç»œï¼ˆDQNï¼‰ï¼ŒåŒ…æ‹¬è®¨è®ºé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ã€‚</p>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæ™ºèƒ½ä½“åœ¨ç¯å¢ƒï¼ˆenvironmentï¼‰ä¸­è§‚å¯Ÿï¼ˆobservationï¼‰å¹¶ä¸”åšå‡ºå†³ç­–ï¼ˆactionï¼‰ï¼Œéšåå®ƒä¼šå¾—åˆ°å¥–åŠ±ï¼ˆrewardï¼‰ã€‚å®ƒçš„ç›®æ ‡æ˜¯å»å­¦ä¹ å¦‚ä½•è¡ŒåŠ¨èƒ½æœ€å¤§åŒ–<strong>æœŸæœ›å¥–åŠ±</strong>ã€‚</p>
<h3 id="OpenAI-Gym"><a href="#OpenAI-Gym" class="headerlink" title="OpenAI Gym"></a>OpenAI Gym</h3><p>OpenAI Gym æ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œå®ƒæä¾›å„ç§å„æ ·çš„æ¨¡æ‹Ÿç¯å¢ƒï¼ˆAtari æ¸¸æˆï¼Œæ£‹ç›˜æ¸¸æˆï¼Œ2D å’Œ 3D ç‰©ç†æ¨¡æ‹Ÿç­‰ç­‰ï¼‰</p>
<h3 id="è¯„ä»·è¡Œä¸ºï¼šä¿¡ç”¨åˆ†é…é—®é¢˜"><a href="#è¯„ä»·è¡Œä¸ºï¼šä¿¡ç”¨åˆ†é…é—®é¢˜" class="headerlink" title="è¯„ä»·è¡Œä¸ºï¼šä¿¡ç”¨åˆ†é…é—®é¢˜"></a>è¯„ä»·è¡Œä¸ºï¼šä¿¡ç”¨åˆ†é…é—®é¢˜</h3><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæ™ºèƒ½ä½“è·å¾—çš„æŒ‡å¯¼çš„å”¯ä¸€é€”å¾„æ˜¯é€šè¿‡å¥–åŠ±ï¼Œå¥–åŠ±é€šå¸¸æ˜¯ç¨€ç–çš„å’Œå»¶è¿Ÿçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ™ºèƒ½ä½“åœ¨ 100 ä¸ªæ­¥éª¤å†…è®¾æ³•å¹³è¡¡æ†ï¼Œå®ƒæ€ä¹ˆçŸ¥é“å®ƒé‡‡å–çš„ 100 ä¸ªè¡ŒåŠ¨ä¸­çš„å“ªä¸€ä¸ªæ˜¯å¥½çš„ï¼Œå“ªäº›æ˜¯åçš„ï¼Ÿå®ƒæ‰€çŸ¥é“çš„æ˜¯ï¼Œåœ¨æœ€åä¸€æ¬¡è¡ŒåŠ¨ä¹‹åï¼Œæ†å­å è½äº†ï¼Œä½†æœ€åä¸€æ¬¡è¡ŒåŠ¨è‚¯å®šä¸æ˜¯è´Ÿå…¨è´£çš„ã€‚è¿™è¢«ç§°ä¸ºä¿¡ç”¨åˆ†é…é—®é¢˜ï¼šå½“æ™ºèƒ½ä½“å¾—åˆ°å¥–åŠ±æ—¶ï¼Œå¾ˆéš¾çŸ¥é“å“ªäº›è¡Œä¸ºåº”è¯¥è¢«ä¿¡ä»»ï¼ˆæˆ–è´£å¤‡ï¼‰ã€‚</p>
<p>åŸºäºè¿™ä¸ªåŠ¨ä½œåå¾—åˆ†çš„æ€»å’Œæ¥è¯„ä¼°è¿™ä¸ªä¸ªåŠ¨ä½œï¼Œé€šå¸¸åœ¨æ¯ä¸ªæ­¥éª¤ä¸­åº”ç”¨è¡°å‡å› å­<code>r</code>ã€‚</p>
<h3 id="ç­–ç•¥æœç´¢"><a href="#ç­–ç•¥æœç´¢" class="headerlink" title="ç­–ç•¥æœç´¢"></a>ç­–ç•¥æœç´¢</h3><p>æ™ºèƒ½ä½“ç”¨äºæ”¹å˜è¡Œä¸ºçš„ç®—æ³•ç§°ä¸ºç­–ç•¥ã€‚</p>
<ol>
<li>ç¥ç»ç½‘ç»œç­–ç•¥ï¼ŒæŠŠè§‚å¯Ÿä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºè¦æ‰§è¡Œçš„åŠ¨ä½œã€‚</li>
<li>æœå¯»ç­–ç•¥ç©ºé—´çš„æ–¹æ³•æ˜¯é—ä¼ ç®—æ³•ã€‚</li>
<li>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡è¯„ä¼°å¥–åŠ±å…³äºç­–ç•¥å‚æ•°çš„æ¢¯åº¦ï¼Œç„¶åé€šè¿‡è·Ÿéšæ¢¯åº¦å‘æ›´é«˜çš„å¥–åŠ±ï¼ˆæ¢¯åº¦ä¸Šå‡ï¼‰è°ƒæ•´è¿™äº›å‚æ•°ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸º<strong>ç­–ç•¥æ¢¯åº¦ï¼ˆpolicy gradient, PGï¼‰ã€‚</strong></li>
</ol>
<p><strong>ç­–ç•¥æ¢¯åº¦</strong></p>
<ol>
<li>è®©ç¥ç»ç½‘ç»œç­–ç•¥ç©å‡ æ¬¡æ¸¸æˆï¼Œå¹¶åœ¨æ¯ä¸€æ­¥è®¡ç®—æ¢¯åº¦ï¼Œè¿™ä½¿å¾—æ™ºèƒ½ä½“æ›´å¯èƒ½é€‰æ‹©è¡Œä¸ºï¼Œä½†ä¸åº”ç”¨è¿™äº›æ¢¯åº¦ã€‚</li>
<li>è¿è¡Œå‡ æ¬¡åï¼Œè®¡ç®—æ¯ä¸ªåŠ¨ä½œçš„å¾—åˆ†ï¼ˆä½¿ç”¨å‰é¢æ®µè½ä¸­æè¿°çš„æ–¹æ³•ï¼‰ã€‚</li>
<li>å¦‚æœä¸€ä¸ªåŠ¨ä½œçš„åˆ†æ•°æ˜¯æ­£çš„ï¼Œè¿™æ„å‘³ç€åŠ¨ä½œæ˜¯å¥½çš„ï¼Œå¯åº”ç”¨è¾ƒæ—©è®¡ç®—çš„æ¢¯åº¦ï¼Œä»¥ä¾¿å°†æ¥æœ‰æ›´å¤§çš„çš„æ¦‚ç‡é€‰æ‹©è¿™ä¸ªåŠ¨ä½œã€‚ä½†æ˜¯ï¼Œå¦‚æœåˆ†æ•°æ˜¯è´Ÿçš„ï¼Œè¿™æ„å‘³ç€åŠ¨ä½œæ˜¯åçš„ï¼Œè¦åº”ç”¨ç›¸åæ¢¯åº¦æ¥ä½¿å¾—è¿™ä¸ªåŠ¨ä½œåœ¨å°†æ¥é‡‡å–çš„å¯èƒ½æ€§æ›´ä½ã€‚æˆ‘ä»¬çš„æ–¹æ³•å°±æ˜¯ç®€å•åœ°å°†æ¯ä¸ªæ¢¯åº¦å‘é‡ä¹˜ä»¥ç›¸åº”çš„åŠ¨ä½œå¾—åˆ†ã€‚</li>
<li>æœ€åï¼Œè®¡ç®—æ‰€æœ‰å¾—åˆ°çš„æ¢¯åº¦å‘é‡çš„å¹³å‡å€¼ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ‰§è¡Œæ¢¯åº¦ä¸‹é™æ­¥éª¤ã€‚</li>
</ol>
<h4 id="é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹"><a href="#é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹" class="headerlink" title="é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹"></a>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹</h4><p>åœ¨äºŒåä¸–çºªåˆï¼Œæ•°å­¦å®¶ Andrey Markov ç ”ç©¶äº†<strong>æ²¡æœ‰è®°å¿†çš„éšæœºè¿‡ç¨‹ï¼Œç§°ä¸ºé©¬å°”å¯å¤«é“¾</strong>ã€‚è¿™æ ·çš„è¿‡ç¨‹å…·æœ‰å›ºå®šæ•°é‡çš„çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªæ­¥éª¤ä¸­éšæœºåœ°ä»ä¸€ä¸ªçŠ¶æ€æ¼”åŒ–åˆ°å¦ä¸€ä¸ªçŠ¶æ€ã€‚å®ƒä»çŠ¶æ€<code>S</code>æ¼”å˜ä¸ºçŠ¶æ€<code>S&#39;</code>çš„æ¦‚ç‡æ˜¯å›ºå®šçš„ï¼Œå®ƒåªä¾èµ–äº<code>(S, S&#39;)</code>å¯¹ï¼Œè€Œä¸æ˜¯ä¾èµ–äºè¿‡å»çš„çŠ¶æ€ï¼ˆç³»ç»Ÿæ²¡æœ‰è®°å¿†ï¼‰ã€‚</p>
<p><strong>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹</strong>æœ€åˆæ˜¯åœ¨ 20 ä¸–çºª 50 å¹´ä»£ç”± Richard Bellman <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F133" target="_blank" rel="noopener">æè¿°</a>çš„ã€‚å®ƒä»¬ç±»ä¼¼äºé©¬å°”å¯å¤«é“¾ï¼Œä½†æœ‰ä¸€ä¸ªä¸åŒï¼šåœ¨çŠ¶æ€è½¬ç§»çš„æ¯ä¸€æ­¥ä¸­ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“å¯ä»¥é€‰æ‹©å‡ ç§å¯èƒ½çš„åŠ¨ä½œä¸­çš„ä¸€ä¸ªï¼Œå¹¶ä¸”è¿‡æ¸¡æ¦‚ç‡å–å†³äºæ‰€é€‰æ‹©çš„åŠ¨ä½œã€‚æ­¤å¤–ï¼Œä¸€äº›çŠ¶æ€è¿‡æ¸¡è¿”å›ä¸€äº›å¥–åŠ±ï¼ˆæ­£æˆ–è´Ÿï¼‰ï¼Œæ™ºèƒ½ä½“çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªç­–ç•¥ï¼Œéšç€æ—¶é—´çš„æ¨ç§»å°†æœ€å¤§é™åº¦åœ°æé«˜å¥–åŠ±ã€‚</p>
<p>ä¼°è®¡ä»»ä½•çŠ¶æ€<code>S</code>çš„æœ€ä½³çŠ¶æ€å€¼çš„æ–¹æ³•ï¼Œè®°ä½œ<code>V(s)</code>ï¼Œå®ƒæ˜¯æ™ºèƒ½ä½“åœ¨å…¶é‡‡å–æœ€ä½³è¡Œä¸ºè¾¾åˆ°çŠ¶æ€<code>s</code>åæ‰€æœ‰è¡°å‡æœªæ¥å¥–åŠ±çš„æ€»å’Œçš„å¹³å‡æœŸæœ›ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-6c97696a5b56dafd.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>Bellman å‘ç°äº†ä¸€ç§éå¸¸ç±»ä¼¼çš„ç®—æ³•æ¥ä¼°è®¡æœ€ä¼˜çŠ¶æ€-åŠ¨ä½œå€¼ï¼ˆ<em>state-action values</em>ï¼‰ï¼Œé€šå¸¸ç§°ä¸º Q å€¼ã€‚çŠ¶æ€è¡ŒåŠ¨<code>(S, A)</code>å¯¹çš„æœ€ä¼˜ Q å€¼ï¼Œè®°ä¸º<code>Q*(s, a)</code>ï¼Œæ˜¯æ™ºèƒ½ä½“åœ¨åˆ°è¾¾çŠ¶æ€<code>S</code>ï¼Œç„¶åé€‰æ‹©åŠ¨ä½œ<code>A</code>ä¹‹åå¹³å‡è¡°å‡æœªæ¥å¥–åŠ±çš„æœŸæœ›çš„æ€»å’Œã€‚ä½†æ˜¯åœ¨å®ƒçœ‹åˆ°è¿™ä¸ªåŠ¨ä½œçš„ç»“æœä¹‹å‰ï¼Œå‡è®¾å®ƒåœ¨è¯¥åŠ¨ä½œä¹‹åçš„åŠ¨ä½œæ˜¯æœ€ä¼˜çš„ã€‚</p>
<h4 id="æ—¶é—´å·®åˆ†å­¦ä¹ "><a href="#æ—¶é—´å·®åˆ†å­¦ä¹ " class="headerlink" title="æ—¶é—´å·®åˆ†å­¦ä¹ "></a>æ—¶é—´å·®åˆ†å­¦ä¹ </h4><p>å…·æœ‰ç¦»æ•£åŠ¨ä½œçš„å¼ºåŒ–å­¦ä¹ é—®é¢˜é€šå¸¸å¯ä»¥è¢«å»ºæ¨¡ä¸ºé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼Œä½†æ˜¯æ™ºèƒ½ä½“æœ€åˆä¸çŸ¥é“è½¬ç§»æ¦‚ç‡æ˜¯ä»€ä¹ˆï¼ˆå®ƒä¸çŸ¥é“<code>T(s, a, sâ€²)</code>ï¼‰ï¼Œå¹¶ä¸”å®ƒä¸çŸ¥é“å¥–åŠ±ä¼šæ˜¯ä»€ä¹ˆï¼ˆå®ƒä¸çŸ¥é“<code>R(s, a, sâ€²)</code>ï¼‰ã€‚å®ƒå¿…é¡»ç»å†æ¯ä¸€ä¸ªçŠ¶æ€å’Œæ¯ä¸€æ¬¡è½¬å˜å¹¶ä¸”è‡³å°‘çŸ¥é“ä¸€æ¬¡å¥–åŠ±ï¼Œå¹¶ä¸”å¦‚æœè¦å¯¹è½¬ç§»æ¦‚ç‡è¿›è¡Œåˆç†çš„ä¼°è®¡ï¼Œå°±å¿…é¡»ç»å†å¤šæ¬¡ã€‚</p>
<p>æ—¶é—´å·®åˆ†å­¦ä¹ ï¼ˆTD å­¦ä¹ ï¼‰ç®—æ³•ä¸æ•°å€¼è¿­ä»£ç®—æ³•éå¸¸ç±»ä¼¼ï¼Œä½†è€ƒè™‘åˆ°æ™ºèƒ½ä½“ä»…å…·æœ‰ MDP çš„éƒ¨åˆ†çŸ¥è¯†ã€‚</p>
<h4 id="Q-å­¦ä¹ "><a href="#Q-å­¦ä¹ " class="headerlink" title="Q-å­¦ä¹ "></a>Q-å­¦ä¹ </h4><p>Q-å­¦ä¹ ç®—æ³•æ˜¯ Q å€¼è¿­ä»£ç®—æ³•çš„æ”¹ç¼–ç‰ˆæœ¬ï¼Œå…¶é€‚åº”è½¬ç§»æ¦‚ç‡å’Œå›æŠ¥åœ¨åˆå§‹æœªçŸ¥çš„æƒ…å†µã€‚</p>
<p>Q-å­¦ä¹ è¢«ç§°ä¸ºç¦»çº¿ç­–ç•¥ç®—æ³•ï¼Œå› ä¸ºæ­£åœ¨è®­ç»ƒçš„ç­–ç•¥ä¸æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç­–ç•¥ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong>ä¸èƒ½å¾ˆå¥½åœ°æ‰©å±•åˆ°å…·æœ‰è®¸å¤šçŠ¶æ€å’ŒåŠ¨ä½œçš„å¤§ï¼ˆç”šè‡³ä¸­ç­‰ï¼‰çš„ MDPã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°QÎ¸(s,a)ï¼Œä½¿ç”¨å¯ç®¡ç†æ•°é‡çš„å‚æ•°ï¼ˆæ ¹æ®çŸ¢é‡Î¸ï¼‰æ¥è¿‘ä¼¼ Q å€¼ã€‚è¿™è¢«ç§°ä¸º<strong>è¿‘ä¼¼ Q å­¦ä¹ ã€‚</strong></p>
<p>åœ¨2013å¹´ï¼Œ DeepMind è¡¨æ˜ä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œå¯ä»¥å·¥ä½œå¾—æ›´å¥½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚çš„é—®é¢˜ã€‚å®ƒä¸éœ€è¦ä»»ä½•ç‰¹å¾å·¥ç¨‹ã€‚ç”¨äºä¼°è®¡ Q å€¼çš„ DNN è¢«ç§°ä¸ºæ·±åº¦ Q ç½‘ç»œï¼ˆDQNï¼‰ï¼Œå¹¶ä¸”ä½¿ç”¨è¿‘ä¼¼ Q å­¦ä¹ çš„ DQN è¢«ç§°ä¸º<strong>æ·±åº¦ Q å­¦ä¹ ã€‚</strong></p>
<h4 id="æ·±åº¦Q-å­¦ä¹ çš„å˜ä½“"><a href="#æ·±åº¦Q-å­¦ä¹ çš„å˜ä½“" class="headerlink" title="æ·±åº¦Q-å­¦ä¹ çš„å˜ä½“"></a>æ·±åº¦Q-å­¦ä¹ çš„å˜ä½“</h4><h5 id="å›ºå®šQ-å€¼ç›®æ ‡"><a href="#å›ºå®šQ-å€¼ç›®æ ‡" class="headerlink" title="å›ºå®šQ-å€¼ç›®æ ‡"></a>å›ºå®šQ-å€¼ç›®æ ‡</h5><p>åœ¨åŸºæœ¬çš„æ·±åº¦Q-å­¦ä¹ ç®—æ³•ä¸­ï¼Œæ¨¡å‹ä¸ä»…åšé¢„æµ‹è¿˜è‡ªå·±è®¾ç½®ç›®æ ‡ã€‚æœ‰ç‚¹åƒä¸€åªç‹—è¿½è‡ªå·±çš„å°¾å·´ã€‚åé¦ˆå¾ªç¯ä½¿å¾—ç½‘ç»œä¸ç¨³å®šï¼šä¼šå‘ç”Ÿåˆ†å‰ã€æ‘‡æ‘†ã€å†»ç»“ï¼Œç­‰ç­‰ã€‚è¦è§£å†³é—®é¢˜ï¼ŒDeepMindåœ¨2013å¹´çš„è®ºæ–‡ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªDQNï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼šç¬¬ä¸€ä¸ªæ˜¯åœ¨çº¿æ¨¡å‹ï¼Œå®ƒåœ¨æ¯ä¸€æ­¥è¿›è¡Œå­¦ä¹ ï¼Œå¹¶ç§»åŠ¨æ™ºèƒ½ä½“ï¼›å¦ä¸€ä¸ªæ˜¯ç›®æ ‡æ¨¡å‹åªå®šä¹‰ç›®æ ‡ã€‚ç›®æ ‡æ¨¡å‹åªæ˜¯åœ¨çº¿æ¨¡å‹çš„å…‹éš†ã€‚</p>
<h5 id="åŒDQN"><a href="#åŒDQN" class="headerlink" title="åŒDQN"></a>åŒDQN</h5><h5 id="ä¼˜å…ˆç»éªŒæ¥åŠ›"><a href="#ä¼˜å…ˆç»éªŒæ¥åŠ›" class="headerlink" title="ä¼˜å…ˆç»éªŒæ¥åŠ›"></a>ä¼˜å…ˆç»éªŒæ¥åŠ›</h5><h5 id="å¯¹å†³DQN"><a href="#å¯¹å†³DQN" class="headerlink" title="å¯¹å†³DQN"></a>å¯¹å†³DQN</h5><h4 id="æ¢ç´¢ç­–ç•¥"><a href="#æ¢ç´¢ç­–ç•¥" class="headerlink" title="æ¢ç´¢ç­–ç•¥"></a>æ¢ç´¢ç­–ç•¥</h4><p>åªæœ‰åœ¨æ¢ç´¢ç­–ç•¥å……åˆ†æ¢ç´¢ MDP çš„æƒ…å†µä¸‹ï¼ŒQ å­¦ä¹ æ‰èƒ½èµ·ä½œç”¨ã€‚å°½ç®¡ä¸€ä¸ªçº¯ç²¹çš„éšæœºç­–ç•¥ä¿è¯æœ€ç»ˆè®¿é—®æ¯ä¸€ä¸ªçŠ¶æ€å’Œæ¯ä¸ªè½¬æ¢å¤šæ¬¡ï¼Œä½†å¯èƒ½éœ€è¦å¾ˆé•¿çš„æ—¶é—´è¿™æ ·åšã€‚å› æ­¤ï¼Œä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ Îµ è´ªå©ªç­–ç•¥ï¼šåœ¨æ¯ä¸ªæ­¥éª¤ä¸­ï¼Œå®ƒä»¥æ¦‚ç‡<code>Îµ</code>éšæœºåœ°æˆ–ä»¥æ¦‚ç‡ä¸º<code>1-Îµ</code>è´ªå©ªåœ°é€‰æ‹©å…·æœ‰æœ€é«˜ Q å€¼çš„åŠ¨ä½œã€‚Îµ è´ªå©ªç­–ç•¥çš„ä¼˜ç‚¹ï¼ˆä¸å®Œå…¨éšæœºç­–ç•¥ç›¸æ¯”ï¼‰æ˜¯ï¼Œå®ƒå°†èŠ±è´¹è¶Šæ¥è¶Šå¤šçš„æ—¶é—´æ¥æ¢ç´¢ç¯å¢ƒä¸­æœ‰è¶£çš„éƒ¨åˆ†ï¼Œå› ä¸º Q å€¼ä¼°è®¡è¶Šæ¥è¶Šå¥½ï¼ŒåŒæ—¶ä»èŠ±è´¹ä¸€äº›æ—¶é—´è®¿é—® MDP çš„æœªçŸ¥åŒºåŸŸã€‚</p>
<h3 id="ç»ƒä¹ -8"><a href="#ç»ƒä¹ -8" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å¦‚ä½•å®šä¹‰å¼ºåŒ–å­¦ä¹ ï¼Ÿå®ƒä¸ä¼ ç»Ÿçš„ç›‘ç£å’Œéç›‘ç£å­¦ä¹ æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>ä½ èƒ½æƒ³åˆ°ä»€ä¹ˆæœ¬ç« æ²¡æœ‰æåˆ°è¿‡çš„å¼ºåŒ–å­¦ä¹ çš„åº”ç”¨ï¼Ÿç¯å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿæ™ºèƒ½ä½“æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯å¯èƒ½çš„åŠ¨ä½œï¼Œä»€ä¹ˆæ˜¯å¥–åŠ±ï¼Ÿ</p>
<blockquote>
<p>éŸ³ä¹ä¸ªäººåŒ–ï¼šç¯å¢ƒæ˜¯ç”¨æˆ·ä¸ªäººåŒ–çš„ç½‘ç»œç”µå°ã€‚æ™ºèƒ½ä½“æ˜¯è½¯ä»¶å†³å®šä¸‹ä¸€é¦–æ’­æ”¾éŸ³ä¹ã€‚å¯èƒ½åŠ¨ä½œæ˜¯æ’­æ”¾ç›®å½•ä¸‹çš„ä»»ä¸€é¦–éŸ³ä¹ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰åˆ‡æ¢éŸ³ä¹åˆ™è·å¾—å¥–åŠ±ï¼Œå¦‚æœç”¨æˆ·è·³è¿‡è¯¥éŸ³ä¹åˆ™è´Ÿå¥–åŠ±ï¼Œå¦‚æœç”¨æˆ·ç¦»å¼€ï¼Œæˆ–è€…éå¸¸å¤§çš„è´Ÿå¥–åŠ±ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯è¡°å‡ç‡ï¼Ÿå¦‚æœä¿®æ”¹äº†è¡°å‡ç‡é‚£æœ€ä¼˜ç­–ç•¥ä¼šå˜åŒ–å—ï¼Ÿ</p>
<blockquote>
<p>åœ¨è¯„ä¼°ä¸€ä¸ªåŠ¨ä½œçš„æ—¶å€™ï¼Œå¼ºåŒ–å­¦ä¹ é€šå¸¸ä¼šæŠŠå‡ æ­¥çš„å¥–åŠ±åŠ èµ·æ¥ï¼Œç»™æœ€è¿‘çš„å¥–åŠ±å¤§çš„æƒé‡ï¼Œä¹‹å‰çš„å¥–åŠ±å°çš„æƒé‡ã€‚è¡°å‡ç‡å°±æ˜¯è¿™ä¸ªæƒé‡çš„å·®åˆ«ã€‚</p>
<p>å¦‚æœä¿®æ”¹äº†è¡°å‡ç‡æœ€ä¼˜ç­–ç•¥è‚¯å®šä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚ä½•æµ‹é‡å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“çš„è¡¨ç°ï¼Ÿ</p>
<blockquote>
<p>ç”¨å‡ æ­¥çš„å¥–åŠ±å’Œæ¥è¯„ä¼°å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“çš„è¡¨ç°ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯ä¿¡ç”¨åˆ†é…é—®é¢˜ï¼Ÿå®ƒæ€ä¹ˆå‡ºç°çš„ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</p>
<blockquote>
<p>äº§ç”Ÿä¿¡ç”¨åˆ†é…é—®é¢˜çš„åŸå› æ˜¯ä¸çŸ¥é“ä¹‹å‰çš„åŠ¨ä½œå¯¹å½“ä¸‹åŠ¨ä½œè·å¾—å¥–åŠ±çš„è´¡çŒ®ã€‚</p>
<p>ä½¿ç”¨shorter-term rewardsã€‚</p>
</blockquote>
</li>
<li><p>ä½¿ç”¨æ¥åŠ›ç¼“å­˜çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸€ä¸ªæ™ºèƒ½ä½“ä¼šåœ¨ç¯å¢ƒçš„æŸä¸€éƒ¨åˆ†ä¸­åœç•™ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€é˜¶æ®µç»å†ç±»ä¼¼ã€‚å°†æ‰€æœ‰ç»éªŒå­˜å‚¨åœ¨æ¥åŠ›ç¼“å­˜ï¼ˆæˆ–æ¥åŠ›è®°å¿†ï¼‰ä¸­ï¼Œæ¯æ¬¡è®­ç»ƒè¿­ä»£ï¼Œä»ä¸­éšæœºé‡‡æ ·ä¸€ä¸ªæ‰¹æ¬¡ã€‚è¿™æ ·å¯ä»¥é™ä½è®­ç»ƒæ‰¹æ¬¡ä¸­çš„ç»éªŒç›¸å…³æ€§ï¼Œå¯ä»¥æå¤§çš„æé«˜è®­ç»ƒæ•ˆæœã€‚</p>
<p><a href="https://www.zhihu.com/question/52064135" target="_blank" rel="noopener">çŸ¥ä¹ç›¸å…³ç­”æ¡ˆ</a></p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯offç­–ç•¥ RL ç®—æ³•ï¼Ÿ</p>
<blockquote>
<p>åœ¨å¼ºåŒ–å­¦äº›ä¸­åˆ©ç”¨åŠ¨ä½œæ¥æ¢ç´¢ï¼ˆexploration è¡Œä¸ºç­–ç•¥ï¼‰ï¼Œä¹‹åå¾—åˆ°åº”ç”¨çš„ç­–ç•¥ä¸­å»ï¼ˆexploitation ç›®æ ‡ç­–ç•¥ï¼‰</p>
<p>on-policyçš„ç›®æ ‡ç­–ç•¥å’Œè¡Œä¸ºç­–ç•¥ç›¸åŒï¼Œç›´æ¥åˆ©ç”¨æ•°æ®ä¼˜åŒ–ç­–ç•¥ï¼Œä½†å¯èƒ½å­¦ä¹ åˆ°å±€éƒ¨æœ€ä¼˜ï¼Œæ²¡æœ‰åŠæ³•å¾ˆå¥½çš„åŒæ—¶æ¢ç´¢ï¼Œåˆ©ç”¨ã€‚è€Œoff-policy RLå°†ç›®æ ‡ç­–ç•¥å’Œè¡Œä¸ºç­–ç•¥åˆ†å¼€ï¼Œå¯ä»¥åœ¨ä¿æŒæ¢ç´¢çš„åŒæ—¶ï¼Œæ›´èƒ½æ±‚åˆ°å…¨å±€æœ€ä¼˜å€¼ã€‚</p>
<p>Q-learningå°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„ä¾‹å­ã€‚</p>
</blockquote>
</li>
<li><p>ä½¿ç”¨ç­–ç•¥æ¢¯åº¦å¤„ç† OpenAI gym çš„â€œLunarLander-v2â€ ç¯å¢ƒã€‚éœ€è¦å®‰è£…<code>Box2D</code>ä¾èµ–ï¼ˆ<code>python3 -m pip install gym[box2d]</code>ï¼‰ã€‚</p>
</li>
<li><p>ç”¨ä»»ä½•å¯è¡Œçš„ç®—æ³•ï¼Œä½¿ç”¨TF-Agentsè®­ç»ƒå¯ä»¥è¾¾åˆ°äººç±»æ°´å¹³çš„å¯ä»¥ç©SpaceInvaders-v4çš„æ™ºèƒ½ä½“ã€‚</p>
</li>
<li><p>å¦‚æœä½ æœ‰å¤§çº¦ 100 ç¾å…ƒå¤‡ç”¨ï¼Œä½ å¯ä»¥è´­ä¹° Raspberry Pi 3 å†åŠ ä¸Šä¸€äº›ä¾¿å®œçš„æœºå™¨äººç»„ä»¶ï¼Œåœ¨ Pi ä¸Šå®‰è£… TensorFlowï¼Œç„¶åè®©æˆ‘ä»¬å—¨èµ·æ¥~ï¼ä¸¾ä¸ªä¾‹å­ï¼Œçœ‹çœ‹ Lukas Biewald çš„è¿™ä¸ª<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fhoml.info%2F2" target="_blank" rel="noopener">æœ‰è¶£çš„å¸–å­</a>ï¼Œæˆ–è€…çœ‹çœ‹ GoPiGo æˆ– BrickPiã€‚ä»ç®€å•ç›®æ ‡å¼€å§‹ï¼Œæ¯”å¦‚è®©æœºå™¨äººè½¬å‘æœ€äº®çš„è§’åº¦ï¼ˆå¦‚æœæœ‰å…‰ä¼ æ„Ÿå™¨ï¼‰æˆ–æœ€è¿‘çš„ç‰©ä½“ï¼ˆå¦‚æœæœ‰å£°å‘ä¼ æ„Ÿå™¨ï¼‰ï¼Œå¹¶ç§»åŠ¨ã€‚ç„¶åå¯ä»¥ä½¿ç”¨æ·±åº¦å­¦ä¹ ï¼šæ¯”å¦‚ï¼Œå¦‚æœæœºå™¨äººæœ‰æ‘„åƒå¤´ï¼Œå¯ä»¥å®ç°ç›®æ ‡æ£€æµ‹ç®—æ³•ï¼Œæ£€æµ‹äººå¹¶å‘äººç§»åŠ¨ã€‚è¿˜å¯ä»¥åˆ©ç”¨RLç®—æ³•è®©æ™ºèƒ½ä½“è‡ªå·±å­¦ä¹ ä½¿ç”¨é©¬è¾¾è¾¾åˆ°ç›®çš„ã€‚</p>
</li>
</ol>
<h2 id="ç¬¬19ç« -è§„æ¨¡åŒ–è®­ç»ƒå’Œéƒ¨ç½²TensorFlowæ¨¡å‹"><a href="#ç¬¬19ç« -è§„æ¨¡åŒ–è®­ç»ƒå’Œéƒ¨ç½²TensorFlowæ¨¡å‹" class="headerlink" title="ç¬¬19ç«  è§„æ¨¡åŒ–è®­ç»ƒå’Œéƒ¨ç½²TensorFlowæ¨¡å‹"></a>ç¬¬19ç«  è§„æ¨¡åŒ–è®­ç»ƒå’Œéƒ¨ç½²TensorFlowæ¨¡å‹</h2><h3 id="ç»ƒä¹ -9"><a href="#ç»ƒä¹ -9" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li>SavedModelåŒ…å«ä»€ä¹ˆï¼Ÿå¦‚ä½•æ£€æŸ¥å†…å®¹ï¼Ÿ</li>
<li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨TF Servingï¼Ÿå®ƒæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¯ä»¥ç”¨ä»€ä¹ˆå·¥å…·éƒ¨ç½²TF Servingï¼Ÿ</li>
<li>å¦‚ä½•åœ¨å¤šä¸ªTF Servingå®ä¾‹ä¸Šéƒ¨ç½²æ¨¡å‹ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨gRPC APIè€Œä¸æ˜¯REST APIï¼ŒæŸ¥è¯¢TF Servingæ¨¡å‹ï¼Ÿ</li>
<li>åœ¨ç§»åŠ¨å’ŒåµŒå…¥è®¾å¤‡ä¸Šè¿è¡Œï¼ŒTFLiteå‡å°æ¨¡å‹çš„å¤§å°æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯ä¼ªé‡åŒ–è®­ç»ƒï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯æ¨¡å‹å¹¶è¡Œå’Œæ•°æ®å¹¶è¡Œï¼Ÿä¸ºä»€ä¹ˆæ¨èåè€…ï¼Ÿ</li>
<li>åœ¨å¤šå°æœåŠ¡å™¨ä¸Šè®­ç»ƒæ¨¡å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»€ä¹ˆåˆ†å¸ƒç­–ç•¥ï¼Ÿå¦‚ä½•è¿›è¡Œé€‰æ‹©ï¼Ÿ</li>
<li>è®­ç»ƒæ¨¡å‹ï¼ˆæˆ–ä»»æ„æ¨¡å‹ï¼‰ï¼Œéƒ¨ç½²åˆ°TF Servingæˆ–Google Cloud AI Platformä¸Šã€‚å†™å®¢æˆ·ç«¯ä»£ç ï¼Œç”¨REST API æˆ– gRPC APIåšæŸ¥è¯¢ã€‚æ›´æ–°æ¨¡å‹ï¼Œéƒ¨ç½²æ–°ç‰ˆæœ¬ã€‚å®¢æˆ·ç«¯ç°åœ¨æŸ¥è¯¢æ–°ç‰ˆæœ¬ã€‚å›æ»šåˆ°ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚</li>
<li>ç”¨ä¸€å°æœºå™¨å¤šä¸ªGPUã€<code>MirroredStrategy</code>ç­–ç•¥ï¼Œè®­ç»ƒæ¨¡å‹ï¼ˆå¦‚æœæ²¡æœ‰GPUï¼Œå¯ä»¥ä½¿ç”¨å¸¦æœ‰GPUçš„Colaboratoryï¼Œåˆ›å»ºä¸¤ä¸ªè™šæ‹ŸGPUï¼‰ã€‚å†ç”¨<code>CentralStorageStrategy</code>è®­ç»ƒä¸€æ¬¡ï¼Œæ¯”è¾ƒè®­ç»ƒæ—¶é—´ã€‚</li>
<li>åœ¨Google Cloud AI Platformè®­ç»ƒä¸€ä¸ªå°æ¨¡å‹ï¼Œä½¿ç”¨é»‘ç›’è¶…å‚æ•°è°ƒèŠ‚ã€‚</li>
</ol>
<p>â€‹                                                                                                                                                                                          </p>
]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>sklearn</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•åœ¨Jupyter Notebookä¸­ä½¿ç”¨Pythonè™šæ‹Ÿç¯å¢ƒï¼Ÿ</title>
    <url>/2020/08/25/%E5%A6%82%E4%BD%95%E5%9C%A8Jupyter%20Notebook%E4%B8%AD%E4%BD%BF%E7%94%A8Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%EF%BC%9F/</url>
    <content><![CDATA[<p>ç”µè„‘ä¸­å¤šç‰ˆæœ¬pythonå¹¶å­˜ï¼Œç›´æ¥å®‰è£…è¿‡pythonï¼Œä½¿ç”¨è¿‡anacondaå…¨å®¶æ¡¶ï¼ŒåŒæ—¶åˆ›å»ºè¿‡è™šæ‹Ÿç¯å¢ƒï¼ˆè™½ç„¶æˆ‘ä¹Ÿä¸çŸ¥é“ä¸¤ä¸ªéƒ½æ˜¯python3.7ä¸ºå•¥è¦ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰ï¼Œè¿™å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ã€‚</p>
<a id="more"></a>
<h2 id="è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder"><a href="#è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder"></a>è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œspyder</h2><p>åœ¨æ‰“å¼€spyderæ—¶ï¼Œé»˜è®¤ä½¿ç”¨baseï¼Œå¦‚ä½•ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå‘¢ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda activate env</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ç¯å¢ƒå</span></span><br><span class="line">spyder</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœå·²ç»æ‰“å¼€spyderäº†</span></span><br><span class="line">spyder --new-instance</span><br></pre></td></tr></table></figure>
<h2 id="Jupyter-notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"><a href="#Jupyter-notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="Jupyter notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"></a>Jupyter notebookä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h2><p>å³ä¾¿é€šè¿‡anacondaåˆ›é€ äº†æ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯åœ¨jupyter ä¸­å¹¶æ²¡æœ‰ä½“ç°å‡ºæ¥ã€‚</p>
<blockquote>
<p>å°è¯•è¿‡<code>conda activate env</code> è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œå†æ‰§è¡Œjupyter notebookï¼Œç»“æœè¿˜æ˜¯ä½¿ç”¨é»˜è®¤pythonï¼ˆD:\\Program Files (x86)\\Anaconda3\py37\\python.exeâ€™ï¼‰ï¼Œæ­¤æ—¶ä¼šå‡ºç°ä¸€äº›åŒ…importå¤±è´¥çš„é—®é¢˜ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•æŸ¥çœ‹ä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„python</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path</span><br><span class="line">sys.executable</span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³åŠæ³•1ï¼š"><a href="#è§£å†³åŠæ³•1ï¼š" class="headerlink" title="è§£å†³åŠæ³•1ï¼š"></a>è§£å†³åŠæ³•1ï¼š</h3><p>ç›´æ¥åœ¨sys.pathè¿™ä¸ªåˆ—è¡¨appendè™šæ‹Ÿç¯å¢ƒä¸‹çš„pythonè·¯å¾„å’Œpythonåº“è·¯å¾„ã€‚</p>
<p>ä½†æ˜¯è¿™ç§è§£å†³æ–¹æ¡ˆæ²¡æœ‰æ°¸ä¹…æ€§ï¼Œé€€å‡ºä¹‹åé‡æ–°æ‰“å¼€è¯¥æ–‡ä»¶è¿è¡Œæ—¶ï¼Œåˆ™åˆä¼šimportå¤±è´¥ï¼Œè¾“å‡ºsys.pathï¼Œå‘ç°ä¹‹å‰åŠ å…¥çš„è·¯å¾„ä¹Ÿä¸å­˜åœ¨äº†ã€‚</p>
<h3 id="è§£å†³åŠæ³•2ï¼š"><a href="#è§£å†³åŠæ³•2ï¼š" class="headerlink" title="è§£å†³åŠæ³•2ï¼š"></a>è§£å†³åŠæ³•2ï¼š</h3><p><strong>ç”¨anacondaå†…ç”Ÿæ’ä»¶è§£å†³é—®é¢˜</strong> </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda install nb_conda</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å·²æœ‰çš„kernels</span></span><br><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡å¯åŠ¨jupyter notebookï¼Œå°±èƒ½çœ‹åˆ°<strong>æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ</strong>éƒ½æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p>
<p><strong>ç”¨jupyteræ’ä»¶è§£å†³é—®é¢˜</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda activate env</span><br><span class="line">conda install ipykernel</span><br><span class="line">python -m ipykernel install --name --display-name</span><br></pre></td></tr></table></figure>
<p>ç½‘ä¸Šè¿˜æœ‰æ–¹æ³•æ˜¯å®‰è£…ipykernelï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæˆ‘å¯ä»¥çœ‹åˆ°kernelæ˜¾ç¤ºäº†è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯åˆ‡æ¢ä¹‹åï¼Œæ²¡æœ‰æ•ˆæœï¼Œsys.exectubaleä»ç„¶è¾“å‡ºé»˜è®¤pythonçš„è·¯å¾„ã€‚</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ol>
<li>anaconda powershell prompt å’Œ anaconda promptçš„åŒºåˆ«ï¼šå‰è€…å¤šäº†ä¸€äº›linuxå‘½ä»¤ï¼Œå¦‚pwdç­‰ï¼Œç±»ä¼¼windowsä¸‹cmdå’Œwindows powershellçš„åŒºåˆ«ã€‚</li>
<li>è™½ç„¶å¯ä»¥åœ¨promptä¸­é€šè¿‡cdåˆ‡æ¢æ–‡ä»¶å¤¹ï¼Œå†æ‰“å¼€jupyter notebookï¼Œæˆ–è€…åœ¨jupyter notebookå‘½ä»¤åæŒ‡å®šæ–‡ä»¶å¤¹è·¯å¾„ï¼Œä½†ç•¥æ˜¾ç¹çã€‚<ul>
<li>åœ¨windows powershellä¸‹ä¹Ÿå¯ä»¥è¿è¡Œjupyter notebookï¼Œæ‰€ä»¥å¯ä»¥åœ¨windowsä¸‹æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œshift+é¼ æ ‡å³é”®ï¼Œæ‰“å¼€windows powershellï¼Œè¾“å…¥jupyter notebookå‘½ä»¤</li>
<li>æ‰“å¼€ç›®æ ‡æ–‡ä»¶å¤¹ï¼Œé€‰ä¸­ä¸Šæ–¹æ–‡ä»¶ä½ç½®æ ï¼Œè¾“å…¥jupyter notebookå³å¯</li>
<li>å¦å¤–ï¼Œå¦‚æœæƒ³åœ¨windows powershellä¸­æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œå¯æ‰§è¡Œï¼š<code>conda init</code></li>
</ul>
</li>
<li>ä¹Ÿå¯ä»¥åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®-git bashï¼Œåœ¨git bashä¸­å¯åŠ¨jupyter notebook</li>
<li>æ³¨æ„2,3éœ€è¦å°†anacondaå®‰è£…è·¯å¾„é‡Œé¢çš„Scriptså’ŒLibrary\binè·¯å¾„æ·»åŠ åˆ°windowsç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ã€‚</li>
</ol>
<h2 id="jupyter-notebookå¿«æ·é”®"><a href="#jupyter-notebookå¿«æ·é”®" class="headerlink" title="jupyter notebookå¿«æ·é”®"></a>jupyter notebookå¿«æ·é”®</h2><p>Jupyter Notebook æœ‰ä¸¤ç§é”®ç›˜è¾“å…¥æ¨¡å¼ã€‚</p>
<ol>
<li>ç¼–è¾‘æ¨¡å¼ï¼ˆenterè¿›å…¥ï¼‰ï¼Œå¯ä»¥å‘å•å…ƒä¸­é”®å…¥ä»£ç æˆ–æ–‡æœ¬ï¼›æ­¤æ—¶å•å…ƒæ¡†çº¿ä¸ºç»¿è‰²ã€‚</li>
<li>å‘½ä»¤æ¨¡å¼ï¼ˆEscå¼€å¯ï¼‰ï¼Œé”®ç›˜è¾“å…¥è¿è¡Œç¨‹åºå‘½ä»¤ï¼›æ­¤æ—¶å•å…ƒæ¡†çº¿ä¸ºç°è“è‰²ã€‚</li>
</ol>
<h3 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>tab</td>
<td>ä»£ç è¡¥å…¨æˆ–ç¼©è¿›</td>
<td>Ctrl+Up</td>
<td>è·³åˆ°å•å…ƒå¼€å¤´</td>
<td>Shift+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œé€‰ä¸­ä¸‹ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>shift+tab</td>
<td>æç¤º</td>
<td>Ctrl+End</td>
<td>è·³åˆ°å•å…ƒæœ«å°¾</td>
<td>Ctrl+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+]</td>
<td>ç¼©è¿›</td>
<td>Ctrl+Down</td>
<td>è·³åˆ°å•å…ƒæœ«å°¾</td>
<td>Alt+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œåœ¨ä¸‹é¢æ’å…¥ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+[</td>
<td>è§£é™¤ç¼©è¿›</td>
<td>Ctrl+Left</td>
<td>è·³åˆ°å·¦è¾¹ä¸€ä¸ªå­—é¦–</td>
<td>Ctrl+Shift+-</td>
<td>åˆ†å‰²å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+A</td>
<td>å…¨é€‰</td>
<td>Ctrl+Right</td>
<td>è·³åˆ°å³è¾¹ä¸€ä¸ªå­—é¦–</td>
<td>Ctrl+Shift+Subtract</td>
<td>åˆ†å‰²å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+Z</td>
<td>å¤åŸ</td>
<td>Ctrl+Backspace</td>
<td>åˆ é™¤å‰é¢ä¸€ä¸ªå­—</td>
<td>Ctrl+S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
</tr>
<tr>
<td>ctrl+shift+z</td>
<td>å†åš</td>
<td>Ctrl+Delete</td>
<td>åˆ é™¤åé¢ä¸€ä¸ªå­—</td>
<td>Shift</td>
<td>å¿½ç•¥</td>
</tr>
<tr>
<td>ctrl+y</td>
<td>å†åš</td>
<td>Esc</td>
<td>è¿›å…¥å‘½ä»¤æ¨¡å¼</td>
<td>Up</td>
<td>å…‰æ ‡ä¸Šç§»æˆ–è½¬å…¥ä¸Šä¸€å•å…ƒ</td>
</tr>
<tr>
<td>ctrl+Home</td>
<td>è·³åˆ°å•å…ƒå¼€å¤´</td>
<td>Ctrl+M</td>
<td>è¿›å…¥å‘½ä»¤æ¨¡å¼</td>
<td>Down</td>
<td>å…‰æ ‡ä¸‹ç§»æˆ–è½¬å…¥ä¸‹ä¸€å•å…ƒ</td>
</tr>
</tbody>
</table>
</div>
<h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
<th>å‘½ä»¤</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>enter</td>
<td>è½¬å…¥ç¼–è¾‘æ¨¡å¼</td>
<td>C</td>
<td>å¤åˆ¶é€‰ä¸­çš„å•å…ƒ</td>
<td>Shift+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œé€‰ä¸­ä¸‹ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>Y</td>
<td>å•å…ƒè½¬å…¥ä»£ç çŠ¶æ€</td>
<td>V</td>
<td>ç²˜è´´åˆ°ä¸‹æ–¹å•å…ƒ</td>
<td>Ctrl+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒ</td>
</tr>
<tr>
<td>M</td>
<td>å•å…ƒè½¬å…¥markdownçŠ¶æ€</td>
<td>Z</td>
<td>æ¢å¤åˆ é™¤çš„æœ€åä¸€ä¸ªå•å…ƒ</td>
<td>Alt+Enter</td>
<td>è¿è¡Œæœ¬å•å…ƒï¼Œåœ¨ä¸‹é¢æ’å…¥ä¸€å•å…ƒ</td>
</tr>
<tr>
<td>R</td>
<td>å•å…ƒè½¬å…¥rawçŠ¶æ€</td>
<td>DD</td>
<td>åˆ é™¤é€‰ä¸­çš„å•å…ƒ</td>
<td>shift+K</td>
<td>æ‰©å¤§é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>1</td>
<td>è®¾å®š 1 çº§æ ‡é¢˜</td>
<td>Ctrl+S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
<td>shift+J</td>
<td>æ‰©å¤§é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
<tr>
<td>2</td>
<td>è®¾å®š 12çº§æ ‡é¢˜</td>
<td>S</td>
<td>æ–‡ä»¶å­˜ç›˜</td>
<td>shift+O</td>
<td>è½¬æ¢è¾“å‡ºæ»šåŠ¨</td>
</tr>
<tr>
<td>A</td>
<td>åœ¨ä¸Šæ–¹æ’å…¥æ–°å•å…ƒ</td>
<td>L</td>
<td>è½¬æ¢è¡Œå·</td>
<td>shift</td>
<td>å¿½ç•¥</td>
</tr>
<tr>
<td>B</td>
<td>åœ¨ä¸‹æ–¹æ’å…¥æ–°å•å…ƒ</td>
<td>O</td>
<td>è½¬æ¢è¾“å‡º</td>
<td>K</td>
<td>é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>X</td>
<td>å‰ªåˆ‡é€‰ä¸­çš„å•å…ƒ</td>
<td>Q</td>
<td>å…³é—­é¡µé¢</td>
<td>J</td>
<td>é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
<tr>
<td>shift+V</td>
<td>ç²˜è´´åˆ°ä¸Šæ–¹å•å…ƒ</td>
<td>H</td>
<td>æ˜¾ç¤ºå¿«æ·é”®å¸®åŠ©</td>
<td>Up</td>
<td>é€‰ä¸­ä¸Šæ–¹å•å…ƒ</td>
</tr>
<tr>
<td>shift+M</td>
<td>åˆå¹¶é€‰ä¸­çš„å•å…ƒ</td>
<td>space</td>
<td>å‘ä¸‹æ»šåŠ¨</td>
<td>Down</td>
<td>é€‰ä¸­ä¸‹æ–¹å•å…ƒ</td>
</tr>
</tbody>
</table>
</div>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.csdn.net/w55100/article/details/88925697" target="_blank" rel="noopener">ç®€ä¹¦ï¼šä½¿ç”¨anacondaè™šæ‹Ÿç¯å¢ƒè¿è¡ŒJupyter Notebookè¯¦è§£</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/50456606" target="_blank" rel="noopener">Jupyter notebok ç¯å¢ƒé…ç½®ï¼Œä¸kernelåˆ‡æ¢ï¼ˆåˆ‡æ¢è™šæ‹Ÿç¯å¢ƒï¼‰</a></p>
<p><a href="https://blog.csdn.net/guolaoban11/article/details/103469952?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener">jupyter notebook æ‰“å¼€ä»»æ„æ–‡ä»¶å¤¹ï¼Œæœ€ç®€æ·ï¼ï¼</a></p>
<p><a href="https://blog.csdn.net/lzbmc/article/details/102955750" target="_blank" rel="noopener">Jupyter Notebookåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ï¼ˆä½ç½®ï¼‰æ‰“å¼€</a></p>
<p><a href="https://blog.csdn.net/lawme/article/details/51034543" target="_blank" rel="noopener">Jupyter Notebook çš„å¿«æ·é”®</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>jupyter notebook</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‰æ˜Ÿå¹³æ¿N8000åˆ·æœº</title>
    <url>/2020/08/26/%E4%B8%89%E6%98%9F%E5%B9%B3%E6%9D%BFN8000%E5%88%B7%E6%9C%BA/</url>
    <content><![CDATA[<blockquote>
<p>åˆ·æœºåŒ…+å·¥å…·å¦‚ä¸‹ï¼š</p>
<p>CWMRecoveryGTN8000.tar +  lineage-14.1-20170116-UNOFFICIAL-n8000.zip</p>
<p>çº¿åˆ·å®ï¼ˆç”¨ä»¥è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼‰+ Odin</p>
</blockquote>
<a id="more"></a>
<p>å®¶é‡Œå°æœ‹å‹åœ¨ä¸Šç½‘è¯¾ï¼Œæƒ³ä¹°ä¸ªå¹³æ¿ï¼Œå”¤èµ·äº†æˆ‘å¯¹ä¸‰æ˜Ÿå¹³æ¿çš„è®°å¿†ï¼Œå¤§æ¦‚13å¹´å…¥æ‰‹ï¼Œä¸è¿‡ä¸€ä¸¤å¹´æ²¡å¼€è¿‡æœºäº†ã€‚</p>
<p>å¥½ä¸å®¹æ˜“è¿”æ ¡ï¼Œæ‹¿å‡ºå¹³æ¿ï¼Œå‘ç°ä¸é”™ï¼Œè¿˜èƒ½å……ç”µï¼Œä¹Ÿèƒ½å¼€æœºã€‚é‡Œé¢ä¹±ä¸ƒå…«ç³Ÿéƒ½æ˜¯äº›å•¥ï¼Œè¿˜æœ‰äººäººï¼Œå¹²è„†æ¢å¤å‡ºå‚è®¾ç½®å§ã€‚</p>
<p>é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼Œæ¢å¤å‡ºå‚è®¾ç½®åå‘ç°æ²¡æœ‰ä¸‰æ˜Ÿåº”ç”¨ä¸­å¿ƒäº†ï¼Œä¹Ÿä¸èƒ½æ›´æ–°ï¼Œå› ä¸ºä¹‹å‰ç”¨äº†kingsrootã€‚é‚£ä¼¼ä¹åªèƒ½åˆ·æœºäº†ã€‚</p>
<ol>
<li><p>å¼€æœºé”®+ç”µæºä¸Šé”®è¿›å…¥recoveryæ¨¡å¼ï¼Œæœ‰install from external storageçš„é€‰é¡¹ï¼Œä½†æ˜¯ä¸æ”¯æŒç¬¬ä¸‰æ–¹ROMåŒ…ã€‚</p>
<p>å¼ºè¡Œåˆ·ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¼šå‡ºå‡ºç°ï¼š</p>
<p>E:failed to verify whole-file signature<br>e:signature verification failed<br>installation aborted</p>
</li>
<li><p>è¦åˆ·ç¬¬ä¸‰æ–¹ROMåŒ…ï¼Œéœ€è¦å…ˆåˆ·ç¬¬ä¸‰æ–¹recoveryåŒ…ã€‚</p>
<p>ç”µæºé”®+éŸ³é‡ä¸‹é”®è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼Œä½¿ç”¨Odinåˆ·å…¥ç¬¬ä¸‰æ–¹RECåŒ…ï¼Œæ—§ç‰ˆé€‰æ‹©PDAï¼Œæ–°ç‰ˆé€‰æ‹©APï¼Œå…¶ä»–ä¸è¦å‹¾é€‰ï¼Œä¸€äº›é»˜è®¤å‹¾é€‰çš„ä¹Ÿè¦å»æ‰ï¼Œç‚¹å‡»startï¼Œå‡ ç§’é’Ÿå°±å¯ä»¥äº†ã€‚</p>
</li>
</ol>
<p><img src="http://www.galaxyclub.cn//Upload/IMAGES/18/0507/126b124121ee40feb9f95aa5bc78c040_650x0.png" alt="ã€æŠ€æœ¯ã€‘Odinä¸­çš„æœ¯è¯­BLã€APã€CPã€CSCæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>BL(Bootloader) **</strong>ï¼š**</th>
<th>ä»£è¡¨ <strong>å¼•å¯¼ç¨‹åº</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AP (Application Processor or PDA)  **</strong>ï¼š**</td>
<td>è¡¨ç¤º<strong>Androidç³»ç»Ÿ</strong>ï¼ˆå¯èƒ½ä»£è¡¨Androidç³»ç»Ÿåˆ†åŒºï¼‰; åœ¨ä¹‹å‰çš„Odinç‰ˆæœ¬ä¸­ï¼Œè¿™è¢«ç§°ä¸ºâ€œPDAâ€</td>
</tr>
<tr>
<td><strong>CP(Core Processor**</strong>ï¼‰ ï¼š**</td>
<td><strong> </strong>ä»£è¡¨ <strong>è°ƒåˆ¶è§£è°ƒå™¨</strong></td>
</tr>
<tr>
<td><strong>CSC(Co numer Software Customization) **</strong>ï¼š**</td>
<td>ä»£è¡¨ <strong>æ¶ˆè´¹è€…è½¯ä»¶å®šåˆ¶</strong>ï¼Œå®ƒåŒ…å«ç‰¹å®šäºè¯¥åœ°åŒºçš„è½¯ä»¶åŒ…ï¼Œè¿è¥å•†å“ç‰Œå’ŒAPNè®¾ç½®ï¼ˆå°±åƒä¸åŒçš„è¿è¥å•†çš„æ•°æ®æ¥å…¥ç‚¹åç§°ä¸é€šï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>PIT (Partition Information Table)  **</strong>ï¼š**</td>
<td>ä»£è¡¨ <strong>åˆ†åŒºä¿¡æ¯è¡¨</strong>ï¼Œå¦‚æœä½ æç ¸åˆ†åŒºè¡¨ï¼Œæˆ–è€…ç”±äºåˆ†åŒºè¡¨å¸ƒå±€çš„å˜åŒ–ï¼Œä½ åªéœ€è¦ç”¨å®ƒå°±å¥½äº†ã€‚</td>
</tr>
</tbody>
</table>
</div>
<p>ä½†åˆé‡åˆ°é—®é¢˜äº†ï¼šç”µæºé”®+éŸ³é‡ä¸‹é”®æ— æ³•è¿›å…¥æŒ–ç…¤æ¨¡å¼ï¼Œä¸çŸ¥é“æ˜¯å¦è·Ÿä¹‹å‰ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶rootè¿‡æœ‰å…³ï¼Œå¹¶ä¸”æˆ‘çš„æ¿å­çš„ç”µæºé”®ä¹Ÿä¸å¤ªå¥½ç”¨ï¼Œäº‹æ€ä¼¼ä¹é™·å…¥äº†åƒµå±€ï¼Œåªèƒ½æ±‚åŠ©ç¬¬ä¸‰æ–¹åˆ·æœºè½¯ä»¶<a href="http://www.xianshuabao.com/features/?fromsite=bd_xsb" target="_blank" rel="noopener">çº¿åˆ·å®</a>ã€‚</p>
<p>è¿›å…¥æŒ–ç…¤æ¨¡å¼åï¼ŒID:COM å˜æˆè“è‰²ï¼ˆå®é™…ä¸Šï¼Œæ­£å¸¸å¼€æœºè¿æ¥æ—¶ï¼Œåº”è¯¥æ˜¯è“è‰²ï¼ŒæŒ–ç…¤æ¨¡å¼è¿æ¥æ—¶åº”ä¸ºé»„è‰²ï¼Œå¯èƒ½è¿˜æ˜¯ä¹‹å‰rootè¿‡å¾—åŸå› ï¼‰</p>
<p>ä¸éœ€è¦ä»˜è´¹æ¨¡å¼ï¼Œåªéœ€è¦å€ŸåŠ©å·¥å…·ç®±è¿›å…¥æŒ–ç…¤æ¨¡å¼å³å¯ï¼ä¹Ÿå¯ä»¥é€šè¿‡çº¿åˆ·å®è¿›å…¥recoveryæ¨¡å¼ï¼ˆè°è®©æˆ‘çš„ç”µæºé”®ä¸å¥½ç”¨å‘¢ï¼‰ã€‚</p>
<ol>
<li>è¾“å…¥ç¬¬ä¸‰æ–¹ROMåŒ…</li>
</ol>
<p>å°†ç¬¬ä¸‰æ–¹åŒ…çš„zipæ–‡ä»¶æ”¾å¤§å­˜å‚¨å¡ä¸­ï¼Œå¡åˆ·ï¼Œé€‰æ‹©external cardï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒé¡ºåˆ©ã€‚</p>
<p>å› ä¸ºä¸€äº›å¸–å­æœ‰åé¦ˆè¯´æ— æ³•è”ç½‘ï¼Œæˆ‘æ²¡æœ‰é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œé¡ºåˆ©è¿›å…¥ç³»ç»Ÿã€‚ä½†æ˜¯æ— æ³•è°ƒå‡ºé”®ç›˜è¾“å…¥ç•Œé¢ã€‚</p>
<ol>
<li>å°†å¹³æ¿å˜æˆæ˜¾ç¤ºå™¨</li>
</ol>
<p><a href="https://zhuanlan.zhihu.com/p/81255397" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/81255397</a></p>
<p><strong>Spacedesk</strong> ç”µè„‘å’Œå¹³æ¿éœ€è¦å¤„äºåŒä¸€å±€åŸŸç½‘ä¸‹</p>
<p><strong>Splashtop Wired XDisplay</strong> é€šè¿‡æ•°æ®çº¿è¿æ¥ï¼Œéœ€è¦åœ¨google playä¸Šä¸‹è½½</p>
<p><strong>Twomon SE</strong></p>
<p><a href="https://www.splashtop.com/cn/wiredxdisplay](https://www.splashtop.com/cn/wiredxdisplay" target="_blank" rel="noopener">https://www.splashtop.com/cn/wiredxdisplay](https://www.splashtop.com/cn/wiredxdisplay</a>)</p>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2><p>ä¸»è¦å‚è€ƒ<a href="https://www.jianshu.com/p/182975bd9ee6" target="_blank" rel="noopener">ç®€ä¹¦</a>å’Œ<a href="https://blog.csdn.net/wulong710/article/details/91956773" target="_blank" rel="noopener">CSDN</a> ä¸Šçš„ä¸¤ä¸ªå¸–å­ã€‚</p>
<p><a href="https://sspai.com/post/43338" target="_blank" rel="noopener">Android ç©æœºç»ˆææŒ‡å—</a> è¿™ä¸ªä¹Ÿå€¼å¾—ä¸€çœ‹ã€‚</p>
]]></content>
      <categories>
        <category>æ—¥å¸¸è®°å½•</category>
      </categories>
      <tags>
        <tag>åˆ·æœº</tag>
        <tag>ä¸‰æ˜Ÿ</tag>
        <tag>N8000</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯äº‘</title>
    <url>/2020/08/18/%E8%AF%8D%E4%BA%91/</url>
    <content><![CDATA[<p><a href="https://python123.io/tutorials/word_cloud/" target="_blank" rel="noopener">python123ä½ ä¸çŸ¥é“çš„è¯äº‘</a></p>
<a id="more"></a>
<p>å…³é”®é—®é¢˜ï¼š<strong>å¦‚ä½•åšåˆ°è¯è¯­ä¹‹é—´ç´§å¯†æ’å¸ƒä½†åˆæ²¡æœ‰é‡å </strong></p>
<h3 id="integral-imageç§¯åˆ†å›¾"><a href="#integral-imageç§¯åˆ†å›¾" class="headerlink" title="integral_imageç§¯åˆ†å›¾"></a>integral_imageç§¯åˆ†å›¾</h3><p>é‡å æ£€æµ‹æ–¹æ³•ï¼š</p>
<p>è¯äº‘å¸ƒå±€æ–¹æ³•ï¼šè´ªå¿ƒç­–ç•¥</p>
<p><strong>çŸ©å½¢æ£€æµ‹çš„ç§¯åˆ†å›¾ç®—æ³•ä¼¼ä¹ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒæ–‡å­—çš„æ—‹è½¬</strong></p>
<h3 id="å››å‰æ ‘"><a href="#å››å‰æ ‘" class="headerlink" title="å››å‰æ ‘"></a>å››å‰æ ‘</h3><p><strong>å±‚æ¬¡è¾¹ç•Œæ¡†</strong>ï¼ˆHierarchical bounding boxesï¼‰æ¥å¿«é€Ÿå®ç°ä¸¤ä¸ªè¯è¯­é—´çš„é‡å æ£€æµ‹ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€æ£µè®°å½•ç©ºé—´ä¿¡æ¯çš„å››å‰æ ‘ã€‚</p>
<p>å››å‰æ ‘çš„æ„å»ºå¹¶ä¸å›°éš¾ï¼Œå°†å›¾ç‰‡æ¨ªçºµå„åˆ‡ä¸€åˆ€ï¼Œå¹³å‡åˆ†å‰²ä¸ºã€Œå·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹ã€å››ä¸ªåŒºåŸŸï¼Œå¦‚æœæŸä¸ªåŒºåŸŸä¸­æœ‰å†…å®¹ï¼ˆæ­¤æ—¶å¯ä»¥ç”¨ç§¯åˆ†å›¾ç®—æ³•åˆ¤æ–­ï¼‰ï¼Œé‚£ä¹ˆç»§ç»­å°†è¿™ä¸ªåŒºåŸŸåˆ†å‰²ä¸ºå››ä¸ªéƒ¨åˆ†ï¼Œç›´åˆ°åŒºåŸŸçš„å¤§å°å°äºæŸä¸ªå€¼ã€‚</p>
<p>å››å‰æ ‘æ¯æ·±ä¸€å±‚ï¼Œå¯¹å½¢çŠ¶çš„æè¿°å°±è¶Šç²¾ç¡®ï¼Œæ¯ä¸€æ¬¡åˆ†éš”ï¼Œéƒ½èƒ½æ’é™¤ä¸€äº›ç©ºç™½çŸ©å½¢åŒºåŸŸï¼Œå‰©ä¸‹çš„æœ‰åƒç´ çš„åŒºåŸŸï¼Œéƒ½è®°å½•åˆ°äº†æ ‘ä¸­ã€‚</p>
<p>ä¹‹åä¸¤é¢—å››å‰æ ‘é€å±‚åˆ¤æ–­ã€‚</p>
<h3 id="çŸ©å½¢èºæ—‹å¸ƒå±€"><a href="#çŸ©å½¢èºæ—‹å¸ƒå±€" class="headerlink" title="çŸ©å½¢èºæ—‹å¸ƒå±€"></a>çŸ©å½¢èºæ—‹å¸ƒå±€</h3><p>ä¸€ç§è´ªå¿ƒå¸ƒå±€ç­–ç•¥ï¼Œæ‰€æœ‰çš„å•è¯ç´§å¯†æ”¾ç½®åœ¨å›¾ä¸­å¿ƒçš„èºæ—‹å½¢çŠ¶ä¸Šã€‚æ¯ä¸ªå•è¯éƒ½ä»èºæ—‹çš„ä¸­å¿ƒä½ç½®å¼€å§‹æ£€æµ‹ï¼Œå¦‚æœä¸èƒ½æ”¾ç½®ï¼Œå°±ç§»åŠ¨åˆ°èºæ—‹çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚</p>
<h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>ä¸€ç§ç­–ç•¥çš„æƒ³æ³•æ¥æºäºå››å‰æ ‘ã€‚å…ˆæŠŠå›¾åƒåˆ†å‰²ä¸ºå¤šä¸ªçŸ©å½¢åŒºåŸŸï¼Œæ¯”å¦‚ 800Ã—600 çš„å›¾ç‰‡ï¼Œåˆ†å‰²ä¸º 48ï¼ˆ8Ã—6ï¼‰ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸé•¿å®½éƒ½æ˜¯ 100 åƒç´ ã€‚å¸ƒå±€æ¯ä¸ªå•è¯åï¼Œå°±å°†è¿™ä¸ªå•è¯æ·»åŠ åˆ°å¯¹åº”çš„åŒºåŸŸä¸­ï¼Œè¿™æ ·åœ¨å¸ƒå±€ä¸€ä¸ªæ–°çš„å•è¯æ—¶ï¼Œåªè¦æ ¹æ®å•è¯å¤§æ¦‚çš„å¤§å°å’Œæ”¾ç½®çš„ä½ç½®ï¼Œåœ¨æœ‰é™çš„å‡ ä¸ªåŒºåŸŸä¸­è¿›è¡Œé‡å æ£€æµ‹ï¼Œå¤§å¹…é™ä½äº†éœ€è¦è¿›è¡Œé‡å æ£€æµ‹çš„æ¬¡æ•°ã€‚</p>
<p>ç¬¬äºŒç§ç­–ç•¥æ›´å¤šæ¥æºäºç»éªŒã€‚å‡å¦‚è¦æ”¾ç½®æ•°åä¸ªå¤§å°å·®ä¸å¤šçš„å•è¯ï¼Œç¬¬ä¸€ä¸ªå•è¯æ£€æµ‹äº†èºæ—‹ä¸Šçš„ 200 ä¸ªåæ ‡åï¼Œæ‰¾åˆ°ä¸€ä¸ªæ”¾ç½®ä½ç½®ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªå•è¯å°±è·³è¿‡è¿™ 200 ä¸ªåæ ‡ï¼ˆå› ä¸ºå¤§æ¦‚ç‡é‡å ï¼‰ï¼Œåœ¨ç¬¬ 300 ä¸ªåæ ‡ä¸Šæ”¾ç½®ï¼Œä¸‹ä¸€ä¸ªå•è¯ä»ç¬¬ 300 ä¸ªåæ ‡å¼€å§‹â€¦â€¦å¦‚æœæ£€æµ‹åˆ°äº†å›¾ç‰‡è¾¹ç•Œæœªæ‰¾åˆ°å¯ä»¥æ”¾ç½®çš„åæ ‡ï¼Œé‚£ä¹ˆå›åˆ°åˆå§‹ä½ç½®é‡æ–°å¯»æ‰¾ã€‚</p>
<h3 id="å…¶ä»–èµ„æº"><a href="#å…¶ä»–èµ„æº" class="headerlink" title="å…¶ä»–èµ„æº"></a>å…¶ä»–èµ„æº</h3><p><a href="https://github.com/TommyZihao/zihaowordcloud" target="_blank" rel="noopener">åŒæµå­è±ªå…„åœ¨githubä¸Šçš„è¯äº‘å¯è§†åŒ–æ•™ç¨‹ï¼ˆwordcloudï¼‰</a></p>
<p>åœ¨çº¿è¯äº‘ç”Ÿæˆç½‘ç«™ï¼š</p>
<p><a href="http://www.yciyun.com/" target="_blank" rel="noopener">æ˜“è¯äº‘</a></p>
<p><a href="http://www.picdata.cn/picdata/index.php" target="_blank" rel="noopener">å›¾æ‚¦</a></p>
<p><a href="https://me.bdp.cn/home.html" target="_blank" rel="noopener">BDP</a></p>
<p><a href="https://www.jianshu.com/p/615c9d285c54" target="_blank" rel="noopener">https://www.jianshu.com/p/615c9d285c54</a></p>
]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>wordcloud</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠScikit-Learnä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹-ç¬¬ä¸€éƒ¨åˆ†</title>
    <url>/2020/08/25/%E3%80%8AScikit-Learn%E4%B8%8ETensorFlow%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E7%94%A8%E6%8C%87%E5%8D%97%E3%80%8B/</url>
    <content><![CDATA[<p>å­¦ä¹ èµ„æ–™å‚è€ƒï¼š</p>
<p><a href="https://www.cntofu.com/book/27/docs/2.%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®.md</a></p>
<p><a href="https://github.com/ageron/handson-ml2" target="_blank" rel="noopener">åŸä¹¦Githubä¸Šä»£ç </a></p>
<p><a href="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/" target="_blank" rel="noopener">Oreillyä¸ŠåŸä¹¦ç¬¬äºŒç‰ˆï¼ˆå¯ä»¥åœ¨çº¿é˜…è¯»ï¼‰</a></p>
<p><a href="https://github.com/apachecn/hands-on-ml-zh/blob/master/docs/1.%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A6%82%E8%A7%88.md" target="_blank" rel="noopener">ç¬¬ä¸€ç‰ˆç¿»è¯‘</a></p>
<p><a href="https://www.jianshu.com/p/3470a6efbe8d" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬ä¸€ç‰ˆ</a></p>
<p><a href="https://www.jianshu.com/p/86626c79814a" target="_blank" rel="noopener">ç®€ä¹¦ç¬¬äºŒç‰ˆç¬¬äºŒéƒ¨åˆ†</a></p>
<p><a href="https://www.jianshu.com/p/4a94798f7dcc" target="_blank" rel="noopener">ç®€ä¹¦ã€ŠScikit-Learnã€Kerasä¸TensorFlowæœºå™¨å­¦ä¹ å®ç”¨æŒ‡å—ã€‹ç¬¬ä¸€ç‰ˆå’Œç¬¬äºŒç‰ˆå¯¹ç…§</a></p>
<p><a href="https://blog.csdn.net/jiaoyangwm/article/details/82387883#%E7%BB%83%E4%B9%A0%E9%A2%987" target="_blank" rel="noopener">ç»ƒä¹ é¢˜ç­”æ¡ˆå‚è€ƒ</a> <a href="https://blog.csdn.net/leowinbow/article/details/88581039" target="_blank" rel="noopener">å‚è€ƒ2</a></p>
<a id="more"></a>
<h2 id="ç¬¬01ç« -æœºå™¨å­¦ä¹ æ¦‚è§ˆ"><a href="#ç¬¬01ç« -æœºå™¨å­¦ä¹ æ¦‚è§ˆ" class="headerlink" title="ç¬¬01ç«  æœºå™¨å­¦ä¹ æ¦‚è§ˆ"></a>ç¬¬01ç«  æœºå™¨å­¦ä¹ æ¦‚è§ˆ</h2><ol>
<li><p>os.makedirs(IMAGES_PATH, exist_ok=True)</p>
</li>
<li><p>pd.merge(left=oecd_bli, right=gdp_per_capita, left_index=True, right_index=True)</p>
<p>left_indexå’Œright_indexï¼šæŒ‡å®šæ˜¯å¦ä»¥ç´¢å¼•ä¸ºå‚è€ƒè¿›è¡Œåˆå¹¶</p>
<!--more-->
<h4 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h4><ol>
<li>å¦‚ä½•å®šä¹‰æœºå™¨å­¦ä¹ ï¼Ÿ</li>
</ol>
<blockquote>
<p>æœºå™¨å­¦ä¹ æ˜¯é€šè¿‡ç¼–ç¨‹è®©è®¡ç®—æœºä»æ•°æ®ä¸­è¿›è¡Œå­¦ä¹ çš„ç§‘å­¦ï¼ˆå’Œè‰ºæœ¯ï¼‰ã€‚</p>
<p><strong>æ›´å¹¿ä¹‰çš„æ¦‚å¿µï¼š</strong></p>
<p>æœºå™¨å­¦ä¹ æ˜¯è®©è®¡ç®—æœºå…·æœ‰å­¦ä¹ çš„èƒ½åŠ›ï¼Œæ— éœ€è¿›è¡Œæ˜ç¡®ç¼–ç¨‹ã€‚ â€”â€” äºšç‘ŸÂ·è¨ç¼ªå°”ï¼Œ1959</p>
<p><strong>å·¥ç¨‹æ€§çš„æ¦‚å¿µï¼š</strong></p>
<p>è®¡ç®—æœºç¨‹åºåˆ©ç”¨ç»éªŒ E å­¦ä¹ ä»»åŠ¡ Tï¼Œæ€§èƒ½æ˜¯ Pï¼Œå¦‚æœé’ˆå¯¹ä»»åŠ¡ T çš„æ€§èƒ½ P éšç€ç»éªŒ E ä¸æ–­å¢é•¿ï¼Œåˆ™ç§°ä¸ºæœºå™¨å­¦ä¹ ã€‚ â€”â€” æ±¤å§†Â·ç±³åˆ‡å°”ï¼Œ1997</p>
</blockquote>
<ol>
<li>æœºå™¨å­¦ä¹ å¯ä»¥è§£å†³çš„å››ç±»é—®é¢˜ï¼Ÿ</li>
</ol>
<blockquote>
<p>åˆ†ç±»ï¼Œå›å½’ï¼Œèšç±»ï¼Œé™ç»´</p>
<p>æœºå™¨å­¦ä¹ å¯ä»¥æ ¹æ®è®­ç»ƒæ—¶ç›‘ç£çš„é‡å’Œç±»å‹è¿›è¡Œåˆ†ç±»ã€‚ä¸»è¦æœ‰å››ç±»ï¼šç›‘ç£å­¦ä¹ ã€éç›‘ç£å­¦ä¹ ã€åŠç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ã€‚</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯å¸¦æ ‡ç­¾çš„è®­ç»ƒé›†ï¼Ÿ</li>
</ol>
<blockquote>
<p>åœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œç”¨æ¥è®­ç»ƒç®—æ³•çš„è®­ç»ƒæ•°æ®åŒ…å«äº†ç­”æ¡ˆï¼Œç§°ä¸ºæ ‡ç­¾ã€‚</p>
</blockquote>
<ol>
<li>æœ€å¸¸è§çš„ä¸¤ä¸ªç›‘ç£ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<ol>
<li>åˆ†ç±»ï¼šä¾‹å¦‚åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨ï¼šç”¨è®¸å¤šå¸¦æœ‰å½’ç±»ï¼ˆåƒåœ¾é‚®ä»¶æˆ–æ™®é€šé‚®ä»¶ï¼‰çš„é‚®ä»¶æ ·æœ¬è¿›è¡Œè®­ç»ƒï¼Œè¿‡æ»¤å™¨å¿…é¡»è¿˜èƒ½å¯¹æ–°é‚®ä»¶è¿›è¡Œåˆ†ç±»ã€‚</li>
<li>å›å½’ï¼šé¢„æµ‹ç›®æ ‡æ•°å€¼ï¼Œä¾‹å¦‚ç»™å‡ºä¸€äº›ç‰¹å¾ï¼ˆé‡Œç¨‹æ•°ã€è½¦é¾„ã€å“ç‰Œç­‰ç­‰ï¼‰ç§°ä½œé¢„æµ‹å€¼ï¼Œæ¥é¢„æµ‹ä¸€è¾†æ±½è½¦çš„ä»·æ ¼ã€‚ã€‚è¦è®­ç»ƒè¿™ä¸ªç³»ç»Ÿï¼Œéœ€è¦ç»™å‡ºå¤§é‡æ±½è½¦æ ·æœ¬ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„é¢„æµ‹å€¼å’Œæ ‡ç­¾ï¼ˆå³ï¼Œå®ƒä»¬çš„ä»·æ ¼ï¼‰ã€‚</li>
</ol>
</blockquote>
<ol>
<li>æŒ‡å‡ºå››ä¸ªå¸¸è§çš„éç›‘ç£ä»»åŠ¡ï¼Ÿ</li>
</ol>
<blockquote>
<ol>
<li><strong>èšç±»ç®—æ³•</strong> ï¼Œæ£€æµ‹ç›¸ä¼¼è®¿å®¢çš„åˆ†ç»„ã€‚å‡è®¾æœ‰ä¸€ä»½å…³äºåšå®¢è®¿å®¢çš„å¤§é‡æ•°æ®ï¼Œä¸å‘Šè¯‰ç®—æ³•æŸä¸ªè®¿å®¢å±äºå“ªä¸€ç±»ï¼šå®ƒä¼šè‡ªå·±æ‰¾å‡ºå…³ç³»ï¼Œæ— éœ€å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œç®—æ³•å¯èƒ½æ³¨æ„åˆ° 40% çš„è®¿å®¢æ˜¯å–œæ¬¢æ¼«ç”»ä¹¦çš„ç”·æ€§ï¼Œé€šå¸¸æ˜¯æ™šä¸Šè®¿é—®ï¼Œ20% æ˜¯ç§‘å¹»çˆ±å¥½è€…ï¼Œä»–ä»¬æ˜¯åœ¨å‘¨æœ«è®¿é—®ç­‰ç­‰ã€‚å¦‚æœä½¿ç”¨<strong>å±‚æ¬¡èšç±»åˆ†æ</strong> ï¼Œå®ƒå¯èƒ½è¿˜ä¼šç»†åˆ†æ¯ä¸ªåˆ†ç»„ä¸ºæ›´å°çš„ç»„ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ ä¸ºæ¯ä¸ªåˆ†ç»„å®šä½åšæ–‡ã€‚</li>
<li><strong>å¯è§†åŒ–ç®—æ³•</strong> ï¼šç»™ç®—æ³•å¤§é‡å¤æ‚çš„ä¸”ä¸åŠ æ ‡ç­¾çš„æ•°æ®ï¼Œç®—æ³•è¾“å‡ºæ•°æ®çš„2Dæˆ–3Då›¾åƒã€‚ç®—æ³•ä¼šè¯•å›¾ä¿ç•™æ•°æ®çš„ç»“æ„ï¼ˆå³å°è¯•ä¿ç•™è¾“å…¥çš„ç‹¬ç«‹èšç±»ï¼Œé¿å…åœ¨å›¾åƒä¸­é‡å ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æ˜ç™½æ•°æ®æ˜¯å¦‚ä½•ç»„ç»‡èµ·æ¥çš„ï¼Œä¹Ÿè®¸è¿˜èƒ½å‘ç°éšè—çš„è§„å¾‹ã€‚</li>
<li><strong>é™ç»´</strong> ï¼šé™ç»´çš„ç›®çš„æ˜¯ç®€åŒ–æ•°æ®ã€ä½†æ˜¯ä¸èƒ½å¤±å»å¤§éƒ¨åˆ†ä¿¡æ¯ã€‚åšæ³•ä¹‹ä¸€æ˜¯åˆå¹¶è‹¥å¹²ç›¸å…³çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œæ±½è½¦çš„é‡Œç¨‹æ•°ä¸è½¦é¾„é«˜åº¦ç›¸å…³ï¼Œé™ç»´ç®—æ³•å°±ä¼šå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªï¼Œè¡¨ç¤ºæ±½è½¦çš„ç£¨æŸã€‚è¿™å«åš<strong>ç‰¹å¾æå–</strong> ã€‚</li>
<li><strong>å¼‚å¸¸æ£€æµ‹ï¼ˆanomaly detectionï¼‰</strong> ï¼šä¾‹å¦‚ï¼Œæ£€æµ‹å¼‚å¸¸çš„ä¿¡ç”¨å¡è½¬è´¦ä»¥é˜²æ¬ºè¯ˆï¼Œæ£€æµ‹åˆ¶é€ ç¼ºé™·ï¼Œæˆ–è€…åœ¨è®­ç»ƒä¹‹å‰è‡ªåŠ¨ä»è®­ç»ƒæ•°æ®é›†å»é™¤å¼‚å¸¸å€¼ã€‚å¼‚å¸¸æ£€æµ‹çš„ç³»ç»Ÿä½¿ç”¨æ­£å¸¸å€¼è®­ç»ƒçš„ï¼Œå½“å®ƒç¢°åˆ°ä¸€ä¸ªæ–°å®ä¾‹ï¼Œå®ƒå¯ä»¥åˆ¤æ–­è¿™ä¸ªæ–°å®ä¾‹æ˜¯åƒæ­£å¸¸å€¼è¿˜æ˜¯å¼‚å¸¸å€¼ã€‚</li>
</ol>
</blockquote>
<ol>
<li>è¦è®©ä¸€ä¸ªæœºå™¨äººèƒ½åœ¨å„ç§æœªçŸ¥åœ°å½¢è¡Œèµ°ï¼Œä½ ä¼šé‡‡ç”¨ä»€ä¹ˆæœºå™¨å­¦ä¹ ç®—æ³•ï¼Ÿ</li>
</ol>
<blockquote>
<p>å¼ºåŒ–å­¦ä¹ ï¼š</p>
</blockquote>
<ol>
<li>è¦å¯¹ä½ çš„é¡¾å®¢è¿›è¡Œåˆ†ç»„ï¼Œä½ ä¼šé‡‡ç”¨å“ªç±»ç®—æ³•ï¼Ÿ</li>
</ol>
<blockquote>
<p>éç›‘ç£å­¦ä¹ </p>
</blockquote>
<ol>
<li>åƒåœ¾é‚®ä»¶æ£€æµ‹æ˜¯ç›‘ç£å­¦ä¹ é—®é¢˜ï¼Œè¿˜æ˜¯éç›‘ç£å­¦ä¹ é—®é¢˜ï¼Ÿ</li>
</ol>
<blockquote>
<p>ç›‘ç£å­¦ä¹ ï¼šå› ä¸ºæœ‰æ ‡ç­¾</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯åœ¨çº¿å­¦ä¹ ç³»ç»Ÿï¼Ÿ</li>
</ol>
<blockquote>
<p>ä»å¯¼å…¥çš„æ•°æ®æµè¿›è¡ŒæŒç»­å­¦ä¹ </p>
<p>åœ¨åœ¨çº¿å­¦ä¹ ä¸­ï¼Œæ˜¯ç”¨æ•°æ®å®ä¾‹æŒç»­åœ°è¿›è¡Œè®­ç»ƒï¼Œå¯ä»¥ä¸€æ¬¡ä¸€ä¸ªæˆ–ä¸€æ¬¡å‡ ä¸ªå®ä¾‹ï¼ˆç§°ä¸ºå°æ‰¹é‡ï¼‰ã€‚æ¯ä¸ªå­¦ä¹ æ­¥éª¤éƒ½å¾ˆå¿«ä¸”å»‰ä»·ï¼Œæ‰€ä»¥ç³»ç»Ÿå¯ä»¥åŠ¨æ€åœ°å­¦ä¹ æ”¶åˆ°çš„æœ€æ–°æ•°æ®</p>
<p><img src="https://github.com/apachecn/hands-on-ml-zh/raw/master/images/chapter_1/1-13.png" alt="img"></p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯æ ¸å¤–å­¦ä¹ ï¼Ÿ</li>
</ol>
<blockquote>
<p>åœ¨çº¿å­¦ä¹ ç®—æ³•ä¹Ÿé€‚ç”¨äºåœ¨è¶…å¤§æ•°æ®é›†ï¼ˆä¸€å°è®¡ç®—æœºä¸è¶³ä»¥ç”¨äºå­˜å‚¨å®ƒï¼‰ä¸Šè®­ç»ƒç³»ç»Ÿï¼ˆè¿™ç§°ä½œæ ¸å¤–å­¦ä¹ ï¼Œ<em>out-of-core</em> learningï¼‰ã€‚ç®—æ³•æ¯æ¬¡åªåŠ è½½éƒ¨åˆ†æ•°æ®ï¼Œç”¨è¿™äº›æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°ä½¿ç”¨å®Œæ‰€æœ‰æ•°æ®</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆå­¦ä¹ ç®—æ³•æ˜¯ç”¨ç›¸ä¼¼åº¦åšé¢„æµ‹ï¼Ÿ</li>
</ol>
<blockquote>
<p>åŸºäºå®ä¾‹å­¦ä¹ ï¼šç³»ç»Ÿå…ˆç”¨è®°å¿†å­¦ä¹ æ¡ˆä¾‹ï¼Œç„¶åä½¿ç”¨ç›¸ä¼¼åº¦æµ‹é‡æ¨å¹¿åˆ°æ–°çš„ä¾‹å­</p>
<p>ä¾‹å¦‚ï¼Œåƒåœ¾é‚®ä»¶æ£€æµ‹å™¨ï¼Œä¸ä»…èƒ½æ ‡è®°å’Œå·²çŸ¥çš„åƒåœ¾é‚®ä»¶ç›¸åŒçš„é‚®ä»¶ï¼Œä¹Ÿè¦èƒ½æ ‡è®°ç±»ä¼¼åƒåœ¾é‚®ä»¶çš„é‚®ä»¶ã€‚éœ€è¦æµ‹é‡ä¸¤å°é‚®ä»¶çš„ç›¸ä¼¼æ€§ã€‚ä¸€ä¸ªï¼ˆç®€å•çš„ï¼‰ç›¸ä¼¼åº¦æµ‹é‡æ–¹æ³•æ˜¯ç»Ÿè®¡ä¸¤å°é‚®ä»¶åŒ…å«çš„ç›¸åŒå•è¯çš„æ•°é‡ã€‚å¦‚æœä¸€å°é‚®ä»¶å«æœ‰è®¸å¤šåƒåœ¾é‚®ä»¶ä¸­çš„è¯ï¼Œå°±ä¼šè¢«æ ‡è®°ä¸ºåƒåœ¾é‚®ä»¶ã€‚</p>
</blockquote>
<ol>
<li>æ¨¡å‹å‚æ•°å’Œå­¦ä¹ ç®—æ³•çš„è¶…å‚æ•°çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>å­¦ä¹ ç®—æ³•æœå¯»æ¨¡å‹å‚æ•°å€¼ï¼Œä½¿ä»£ä»·å‡½æ•°æœ€å°</p>
<p>è¶…å‚æ•°ï¼ˆhyperparameterï¼‰æ˜¯ä¸€ä¸ªå­¦ä¹ ç®—æ³•çš„å‚æ•°ï¼ˆè€Œä¸æ˜¯æ¨¡å‹çš„ï¼‰ï¼Œæ§åˆ¶æ­£åˆ™åŒ–çš„åº¦ã€‚</p>
</blockquote>
<ol>
<li>åŸºäºæ¨¡å‹å­¦ä¹ çš„ç®—æ³•æœå¯»çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ€æˆåŠŸçš„ç­–ç•¥æ˜¯ä»€ä¹ˆï¼ŸåŸºäºæ¨¡å‹å­¦ä¹ å¦‚ä½•åšé¢„æµ‹ï¼Ÿ</li>
</ol>
<blockquote>
<p>æœå¯»ä½¿å¾—ä»£ä»·å‡½æ•°ï¼ˆæµ‹é‡çº¿æ€§æ¨¡å‹çš„é¢„æµ‹å€¼å’Œè®­ç»ƒæ ·æœ¬ä¹‹é—´çš„è·ç¦»å·®ï¼‰æœ€å°çš„æ¨¡å‹å‚æ•°</p>
<p>çº¿æ€§å›å½’ç®—æ³•</p>
<p>ç ”ç©¶æ•°æ®-é€‰æ‹©æ¨¡å‹-ç”¨è®­ç»ƒæ•°æ®è¿›è¡Œè®­ç»ƒï¼ˆå­¦ä¹ ç®—æ³•æœå¯»æ¨¡å‹å‚æ•°å€¼ï¼Œä½¿å¾—ä»£ä»·å‡½æ•°æœ€å°ï¼‰-ä½¿ç”¨æ¨¡å‹å¯¹æ–°æ¡ˆä¾‹è¿›è¡Œé¢„æµ‹ï¼ˆè¿™ç§°ä½œæ¨æ–­ï¼‰</p>
</blockquote>
<ol>
<li>æœºå™¨å­¦ä¹ çš„å››ä¸ªä¸»è¦æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>è®­ç»ƒæ•°æ®é‡ä¸è¶³</p>
<p>æ²¡æœ‰ä»£è¡¨æ€§çš„è®­ç»ƒæ•°æ®</p>
<p>ä½è´¨é‡æ•°æ®</p>
<p>ä¸ç›¸å…³çš„ç‰¹å¾</p>
<p>è¿‡æ‹Ÿåˆ</p>
<p>æ¬ æ‹Ÿåˆ</p>
</blockquote>
<ol>
<li>å¦‚æœæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ï¼Œä½†æ¨å¹¿åˆ°æ–°å®ä¾‹è¡¨ç°å·®ï¼Œé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿç»™å‡ºä¸‰ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<blockquote>
<p>è¿‡æ‹Ÿåˆï¼šåˆ©ç”¨è¶…å‚æ•°æ­£åˆ™åŒ–</p>
<p>ä¸ç›¸å…³ç‰¹å¾ï¼š</p>
<ul>
<li>ç‰¹å¾é€‰æ‹©ï¼šåœ¨æ‰€æœ‰å­˜åœ¨çš„ç‰¹å¾ä¸­é€‰å–æœ€æœ‰ç”¨çš„ç‰¹å¾è¿›è¡Œè®­ç»ƒã€‚</li>
<li>ç‰¹å¾æå–ï¼šç»„åˆå­˜åœ¨çš„ç‰¹å¾ï¼Œç”Ÿæˆä¸€ä¸ªæ›´æœ‰ç”¨çš„ç‰¹å¾ï¼ˆå¦‚å‰é¢çœ‹åˆ°çš„ï¼Œå¯ä»¥ä½¿ç”¨é™ç»´ç®—æ³•ï¼‰ã€‚</li>
<li>æ”¶é›†æ–°æ•°æ®åˆ›å»ºæ–°ç‰¹å¾ã€‚</li>
</ul>
<p>ä½è´¨é‡æ•°æ®ï¼šå¦‚æœè®­ç»ƒé›†ä¸­çš„é”™è¯¯ã€å¼‚å¸¸å€¼å’Œå™ªå£°ï¼ˆé”™è¯¯æµ‹é‡å¼•å…¥çš„ï¼‰å¤ªå¤šï¼Œç³»ç»Ÿæ£€æµ‹å‡ºæ½œåœ¨è§„å¾‹çš„éš¾åº¦å°±ä¼šå˜å¤§ï¼Œæ€§èƒ½å°±ä¼šé™ä½ã€‚</p>
<ul>
<li>å¦‚æœä¸€äº›å®ä¾‹æ˜¯æ˜æ˜¾çš„å¼‚å¸¸å€¼ï¼Œæœ€å¥½åˆ æ‰å®ƒä»¬æˆ–å°è¯•æ‰‹å·¥ä¿®æ”¹é”™è¯¯ï¼›</li>
<li>å¦‚æœä¸€äº›å®ä¾‹ç¼ºå°‘ç‰¹å¾ï¼ˆæ¯”å¦‚ï¼Œä½ çš„ 5% çš„é¡¾å®¢æ²¡æœ‰è¯´æ˜å¹´é¾„ï¼‰ï¼Œä½ å¿…é¡»å†³å®šæ˜¯å¦å¿½ç•¥è¿™ä¸ªå±æ€§ã€å¿½ç•¥è¿™äº›å®ä¾‹ã€å¡«å…¥ç¼ºå¤±å€¼ï¼ˆæ¯”å¦‚ï¼Œå¹´é¾„ä¸­ä½æ•°ï¼‰ï¼Œæˆ–è€…è®­ç»ƒä¸€ä¸ªå«æœ‰è¿™ä¸ªç‰¹å¾çš„æ¨¡å‹å’Œä¸€ä¸ªä¸å«æœ‰è¿™ä¸ªç‰¹å¾çš„æ¨¡å‹ï¼Œç­‰ç­‰ã€‚</li>
</ul>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯æµ‹è¯•é›†ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</li>
</ol>
<blockquote>
<p>æµ‹è¯•é›†ï¼šç”¨æ¥è®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†</p>
</blockquote>
<ol>
<li>éªŒè¯é›†çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>éªŒè¯é›†ï¼šæ•°æ®ä¸­åˆ†å‡ºæ¥ï¼Œå¯¹æ¨¡å‹è¿›è¡Œæµ‹è¯•çš„æ•°æ®é›†ã€‚</p>
<p>è¯„ä¼°æ¨¡å‹æ¨å¹¿åˆ°æ–°æ ·æœ¬çš„æ•ˆæœï¼ˆå³å¯¹æ–°æ ·æœ¬çš„æ€§èƒ½ï¼‰ï¼Œå¯ä»¥å°†æ¨¡å‹éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè§‚å¯Ÿå®ƒçš„æ€§èƒ½ã€‚è¿™ä¹ˆåšå¯ä»¥ï¼Œä½†å¦‚æœæ¨¡å‹çš„æ€§èƒ½å¾ˆå·®ï¼Œå°±ä¼šå¼•èµ·ç”¨æˆ·æŠ±æ€¨ã€‚æ›´å¥½çš„é€‰é¡¹æ˜¯å°†æ•°æ®åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚ç”¨è®­ç»ƒé›†è¿›è¡Œè®­ç»ƒï¼Œç”¨æµ‹è¯•é›†è¿›è¡Œæµ‹è¯•ã€‚å¯¹æ–°æ ·æœ¬çš„é”™è¯¯ç‡ç§°ä½œ<strong>æ¨å¹¿é”™è¯¯ï¼ˆæˆ–æ ·æœ¬å¤–é”™è¯¯ï¼‰</strong> ï¼Œé€šè¿‡æ¨¡å‹å¯¹æµ‹è¯•é›†çš„è¯„ä¼°ï¼Œå¯ä»¥é¢„ä¼°è¿™ä¸ªé”™è¯¯ã€‚è¿™ä¸ªå€¼å¯ä»¥æˆ‘ä»¬æ¨¡å‹å¯¹æ–°æ ·æœ¬çš„æ€§èƒ½ã€‚</p>
</blockquote>
<ol>
<li>å¦‚æœç”¨æµ‹è¯•é›†è°ƒèŠ‚è¶…å‚æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
</ol>
<blockquote>
<p>è¿‡æ‹Ÿåˆ</p>
<p>åœ¨æµ‹è¯•é›†ä¸Šå¤šæ¬¡æµ‹é‡äº†æ¨å¹¿è¯¯å·®ç‡ï¼Œè°ƒæ•´äº†æ¨¡å‹å’Œè¶…å‚æ•°ï¼Œä»¥ä½¿æ¨¡å‹æœ€é€‚åˆè¿™ä¸ªé›†åˆã€‚è¿™æ„å‘³ç€æ¨¡å‹å¯¹æ–°æ•°æ®çš„æ€§èƒ½ä¸ä¼šé«˜ã€‚</p>
</blockquote>
<ol>
<li>ä»€ä¹ˆæ˜¯äº¤å‰éªŒè¯ï¼Œä¸ºä»€ä¹ˆå®ƒæ¯”éªŒè¯é›†å¥½ï¼Ÿ</li>
</ol>
<blockquote>
<p>äº¤å‰éªŒè¯ï¼šè®­ç»ƒé›†åˆ†æˆäº’è¡¥çš„å­é›†ï¼Œæ¯ä¸ªæ¨¡å‹ç”¨ä¸åŒçš„å­é›†è®­ç»ƒï¼Œå†ç”¨å‰©ä¸‹çš„å­é›†éªŒè¯ã€‚ä¸€æ—¦ç¡®å®šæ¨¡å‹ç±»å‹å’Œè¶…å‚æ•°ï¼Œæœ€ç»ˆçš„æ¨¡å‹ä½¿ç”¨è¿™äº›è¶…å‚æ•°å’Œå…¨éƒ¨çš„è®­ç»ƒé›†è¿›è¡Œè®­ç»ƒï¼Œç”¨æµ‹è¯•é›†å¾—åˆ°æ¨å¹¿è¯¯å·®ç‡ã€‚</p>
<p>è€Œä½¿ç”¨éªŒè¯é›†ï¼šç”¨è®­ç»ƒé›†å’Œå¤šä¸ªè¶…å‚æ•°è®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œé€‰æ‹©åœ¨éªŒè¯é›†ä¸Šæœ‰æœ€ä½³æ€§èƒ½çš„æ¨¡å‹å’Œè¶…å‚æ•°ã€‚å½“å¯¹æ¨¡å‹æ»¡æ„æ—¶ï¼Œç”¨æµ‹è¯•é›†å†åšæœ€åä¸€æ¬¡æµ‹è¯•ï¼Œä»¥å¾—åˆ°æ¨å¹¿è¯¯å·®ç‡çš„é¢„ä¼°ï¼Œä¼šâ€œæµªè´¹â€è¿‡å¤šè®­ç»ƒæ•°æ®åœ¨éªŒè¯é›†ä¸Šã€‚</p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="ç¬¬02ç« -ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"><a href="#ç¬¬02ç« -ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®" class="headerlink" title="ç¬¬02ç«  ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®"></a>ç¬¬02ç«  ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ é¡¹ç›®</h2><p>[Python APIï¼šcrc32å‡½æ•° è®¡ç®—CRCæ ¡éªŒå€¼](<a href="https://bï¼‰" target="_blank" rel="noopener">https://bï¼‰</a></p>
<p><a href="https://blog.csdn.net/liuyu60305002/article/details/6307152" target="_blank" rel="noopener">æ¨¡2è¿ç®—</a></p>
<p><a href="https://blog.csdn.net/sparkliang/article/details/5671510" target="_blank" rel="noopener">CRC32ç®—æ³•è¯¦ç»†æ¨å¯¼</a></p>
<blockquote>
<p>crc32ç”¨äºè®¡ç®— <em>data</em> çš„ CRC (A cyclic redundancy check 32ï¼Œå¾ªç¯å†—ä½™æ ¡éªŒ) å€¼ã€‚è®¡ç®—çš„ç»“æœæ˜¯ä¸€ä¸ª 32 ä½çš„æ•´æ•°ã€‚æœ¬è´¨æ˜¯<strong>æ¨¡2é™¤æ³•æ¨¡2è¿ç®—åŒ…æ‹¬æ¨¡2åŠ ã€æ¨¡2å‡ã€æ¨¡2ä¹˜ã€æ¨¡2é™¤å››ç§äºŒè¿›åˆ¶è¿ç®—ï¼Œä¸è€ƒè™‘è¿›ä½å’Œå€Ÿä½ï¼‰</strong>ï¼Œ çš„ä½™æ•°ï¼Œé‡‡ç”¨çš„é™¤æ•°ä¸åŒï¼ŒCRCçš„ç±»å‹ä¹Ÿå°±ä¸ä¸€æ ·ã€‚é€šå¸¸ï¼ŒCRCçš„é™¤æ•°ç”¨ç”Ÿæˆå¤šé¡¹å¼æ¥è¡¨ç¤ºã€‚</p>
<p>æ­¤ç®—æ³•æ²¡æœ‰åŠ å¯†å¼ºåº¦ï¼Œä¸åº”ç”¨äºèº«ä»½éªŒè¯å’Œæ•°å­—ç­¾åã€‚ä»…<strong>ä¸ºéªŒè¯æ•°æ®çš„æ­£ç¡®æ€§</strong> ï¼Œä¸é€‚åˆä½œä¸ºé€šç”¨æ•£åˆ—ç®—æ³•ã€‚</p>
<h4 id="ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰"><a href="#ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰" class="headerlink" title="ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰"></a>ç‰¹ç‚¹ï¼šæ£€é”™èƒ½åŠ›æå¼ºï¼Œå¼€é”€å°ç­‰</h4><h4 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h4><p>CRC ç®—æ³•æ˜¯ä»¥ GF(2) å¤šé¡¹å¼ç®—æœ¯ä¸ºæ•°å­¦åŸºç¡€çš„ï¼Œ GF(2) å¤šé¡¹å¼ä¸­åªæœ‰ä¸€ä¸ªå˜é‡ x ï¼Œå…¶ç³»æ•°ä¹Ÿåªæœ‰ 0 å’Œ 1 ï¼Œæ¯”å¦‚ï¼š</p>
<p>â€‹    1 <em>x^6 + 0</em>x^5 + 1<em>x^4 + 0</em>x^3 + 0<em>x^2 +1</em>x^1 + 1*x^0</p>
<p>â€‹       = x^6 + x^4 + x + 1</p>
<p>åŠ å‡è¿ç®—ä¸è€ƒè™‘è¿›ä½å’Œé€€ä½ã€‚è¯´ç™½äº†å°±æ˜¯ä¸‹é¢çš„è¿ç®—è§„åˆ™ï¼š</p>
<p>â€‹    0 + 0 = 0    0 - 0 = 0</p>
<p>â€‹    0 + 1 = 1    0 - 1 = 1</p>
<p>â€‹    1 + 0 = 1    1 - 0 = 1</p>
<p>â€‹    1 + 1 = 0    1 - 1 = 0<br>çœ‹çœ‹è¿™ä¸ªè§„åˆ™ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ª<strong>å¼‚æˆ–è¿ç®—</strong> ã€‚</p>
<p>æ¯ä¸ªç”Ÿæˆå¤šé¡¹å¼çš„ç³»æ•°åªèƒ½æ˜¯ 0 æˆ– 1 ï¼Œå› æ­¤å¯ä»¥æŠŠå®ƒè½¬åŒ–ä¸ºäºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼Œ æ¯”å¦‚ g(x)=x^4 + x + 1 ï¼Œé‚£ä¹ˆ g(x) å¯¹åº”çš„äºŒè¿›åˆ¶å½¢å¼å°±æ˜¯ 10011 ï¼Œ äºæ˜¯æŠŠ GF(2) å¤šé¡¹å¼çš„é™¤æ³•è½¬æ¢æˆäº†äºŒè¿›åˆ¶å½¢å¼ï¼Œå’Œæ™®é€šé™¤æ³•æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯åŠ å‡è¿ç®—æ²¡æœ‰è¿›ä½å’Œé€€ä½ã€‚</p>
<p>æ¯”å¦‚åŸºäºä¸Šè¿°è§„åˆ™è®¡ç®— 11010/1001 ï¼Œé‚£ä¹ˆå•†æ˜¯ 11 ï¼Œä½™æ•°å°±æ˜¯ 1ã€‚</p>
<h4 id="CRC-æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹"><a href="#CRC-æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹" class="headerlink" title="CRC æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹"></a>CRC æ ¡éªŒçš„åŸºæœ¬è¿‡ç¨‹</h4><p>é‡‡ç”¨ CRC æ ¡éªŒæ—¶ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç”¨åŒä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼ g(x) ï¼Œ g(x) æ˜¯ä¸€ä¸ª GF(2) å¤šé¡¹å¼ï¼Œå¹¶ä¸” g(x) çš„é¦–ä½å’Œæœ€åä¸€ä½çš„ç³»æ•°å¿…é¡»ä¸º 1 ã€‚</p>
<p>CRC çš„å¤„ç†æ–¹æ³•æ˜¯ï¼šå‘é€æ–¹ç”¨å‘é€æ•°æ®çš„äºŒè¿›åˆ¶å¤šé¡¹å¼ t(x) é™¤ä»¥ g(x) ï¼Œå¾—åˆ°ä½™æ•° y(x) ä½œä¸º CRC æ ¡éªŒç ã€‚æ ¡éªŒæ—¶ï¼Œä»¥è®¡ç®—çš„æ ¡æ­£ç»“æœæ˜¯å¦ä¸º 0 ä¸ºæ®ï¼Œåˆ¤æ–­æ•°æ®å¸§æ˜¯å¦å‡ºé”™ã€‚è®¾ç”Ÿæˆå¤šé¡¹å¼æ˜¯ r é˜¶çš„ï¼ˆæœ€é«˜ä½æ˜¯ x^r ï¼‰å…·ä½“æ­¥éª¤å¦‚ä¸‹é¢çš„æè¿°ã€‚</p>
<p>å‘é€æ–¹ï¼š</p>
<p>1 ï¼‰åœ¨å‘é€çš„ m ä½æ•°æ®çš„äºŒè¿›åˆ¶å¤šé¡¹å¼ t(x) åæ·»åŠ  r ä¸ª 0 ï¼Œæ‰©å¼ åˆ° m+ r ä½ï¼Œä»¥å®¹çº³ r ä½çš„æ ¡éªŒç ï¼Œè¿½åŠ  0 åçš„äºŒè¿›åˆ¶å¤šé¡¹å¼ä¸º  T(x) ï¼›</p>
<p>2 ï¼‰ç”¨ T(x) é™¤ä»¥ç”Ÿæˆå¤šé¡¹å¼ g(x) ï¼Œå¾—åˆ° r ä½çš„ä½™æ•° y(x) ï¼Œå®ƒå°±æ˜¯ CRC æ ¡éªŒç ï¼›</p>
<p>3 ï¼‰æŠŠ y(x) è¿½åŠ åˆ° t(x) åé¢ï¼Œæ­¤æ—¶çš„æ•°æ® s(x) å°±æ˜¯åŒ…å«äº† CRC æ ¡éªŒç çš„å¾…å‘é€å­—ç¬¦ä¸²ï¼›ç”±äº s(x) = t(x) y(x) ï¼Œå› æ­¤ s(x) è‚¯å®šèƒ½è¢« g(x) é™¤å°½ã€‚</p>
<p>æ¥æ”¶æ–¹ï¼š</p>
<p>1 ï¼‰æ¥æ”¶æ•°æ® n(x) ï¼Œè¿™ä¸ª n(x) å°±æ˜¯åŒ…å«äº† CRC æ ¡éªŒç çš„ m+r ä½æ•°æ®ï¼›</p>
<p>2 ï¼‰è®¡ç®— n(x) é™¤ä»¥ g(x) ï¼Œå¦‚æœä½™æ•°ä¸º 0 åˆ™è¡¨ç¤ºä¼ è¾“è¿‡ç¨‹æ²¡æœ‰é”™è¯¯ï¼Œå¦åˆ™è¡¨ç¤ºæœ‰é”™è¯¯ã€‚ä» n(x) å»æ‰å°¾éƒ¨çš„ r ä½æ•°æ®ï¼Œå¾—åˆ°çš„å°±æ˜¯åŸå§‹æ•°æ®ã€‚</p>
<p>ç”Ÿæˆå¤šé¡¹å¼ä¸æ˜¯éšæ„é€‰æ‹©çš„ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ ‡å‡†çš„ CRC ç®—æ³•çš„ç”Ÿæˆå¤šé¡¹å¼ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ ‡å‡†</th>
<th>ç”Ÿæˆå¤šé¡¹å¼</th>
<th>16 è¿›åˆ¶è¡¨ç¤º</th>
</tr>
</thead>
<tbody>
<tr>
<td>CRC12</td>
<td>x^12 + x^11 + x^3 + x^2 + x + 1</td>
<td>0x80F</td>
</tr>
<tr>
<td>CRC16</td>
<td>x^16 + x^15 + x^2 + 1</td>
<td>0x8005</td>
</tr>
<tr>
<td>CRC16-CCITT</td>
<td>x^16 + x^12 + x^5 + 1</td>
<td>0x1021</td>
</tr>
<tr>
<td>CRC32</td>
<td>x^32 + x^26 + x^23 + x^22 + x^16 + x^12 + x^11+ x^10 + x^8 + x^7 + x^5 + x^4 + x^2 + x + 1</td>
<td>0x04C11DB7</td>
</tr>
</tbody>
</table>
</div>
<p>åœ¨python 3.0 ä¹‹å: è¿”å›å€¼æ°¸è¿œæ˜¯æ— ç¬¦å·æ•°ã€‚è¦åœ¨æ‰€æœ‰çš„ Python ç‰ˆæœ¬å’Œå¹³å°ä¸Šè·å¾—ç›¸åŒçš„å€¼ï¼Œè¯·ä½¿ç”¨ <strong>crc32(data) &amp; 0xffffffff</strong>ã€‚</p>
</blockquote>
<p><strong>é—®é¢˜ï¼š</strong> </p>
<p>ä½¿ç”¨æœ¬ç« çš„æˆ¿äº§æ•°æ®é›†ï¼š</p>
<ol>
<li>å°è¯•ä¸€ä¸ªæ”¯æŒå‘é‡æœºå›å½’å™¨ï¼ˆ<code>sklearn.svm.SVR</code>ï¼‰ï¼Œä½¿ç”¨å¤šä¸ªè¶…å‚æ•°ï¼Œæ¯”å¦‚<code>kernel=&quot;linear&quot;</code>ï¼ˆå¤šä¸ªè¶…å‚æ•°<code>C</code>å€¼ï¼‰ã€‚ç°åœ¨ä¸ç”¨æ‹…å¿ƒè¿™äº›è¶…å‚æ•°æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚æœ€ä½³çš„<code>SVR</code>é¢„æµ‹è¡¨ç°å¦‚ä½•ï¼Ÿ</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br><span class="line"></span><br><span class="line">&gt;svm_reg = SVR(kernel=<span class="string">"linear"</span>)</span><br><span class="line">&gt;svm_reg.fit(housing_prepared, housing_labels)</span><br><span class="line">&gt;housing_predictions = svm_reg.predict(housing_prepared)</span><br><span class="line">&gt;svm_mse = mean_squared_error(housing_labels, housing_predictions)</span><br><span class="line">&gt;svm_rmse = np.sqrt(svm_mse)</span><br><span class="line">&gt;svm_rmse <span class="comment"># output: 111094.6308539982</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸å¥½ã€‚</p>
</blockquote>
<ol>
<li>å°è¯•ç”¨<code>RandomizedSearchCV</code>æ›¿æ¢<code>GridSearchCV</code>ã€‚</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> RandomizedSearchCV</span><br><span class="line">&gt;<span class="keyword">from</span> scipy.stats <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line">&gt;param_distribs = &#123;</span><br><span class="line">       <span class="string">'n_estimators'</span>: randint(low=<span class="number">1</span>, high=<span class="number">200</span>),</span><br><span class="line">       <span class="string">'max_features'</span>: randint(low=<span class="number">1</span>, high=<span class="number">8</span>),</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&gt;forest_reg = RandomForestRegressor(random_state=<span class="number">42</span>)</span><br><span class="line">&gt;rnd_search = RandomizedSearchCV(forest_reg, param_distributions=param_distribs,</span><br><span class="line">                               n_iter=<span class="number">10</span>, cv=<span class="number">5</span>, scoring=<span class="string">'neg_mean_squared_error'</span>, random_state=<span class="number">42</span>)</span><br><span class="line">&gt;rnd_search.fit(housing_prepared, housing_labels)</span><br></pre></td></tr></table></figure>
</blockquote>
<ol>
<li>å°è¯•åœ¨å‡†å¤‡æµæ°´çº¿ä¸­æ·»åŠ ä¸€ä¸ªåªé€‰æ‹©æœ€é‡è¦å±æ€§çš„è½¬æ¢å™¨ã€‚</li>
</ol>
<blockquote>
<p>â€‹</p>
</blockquote>
<ol>
<li>å°è¯•åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯ä»¥å®Œæˆæ•°æ®å‡†å¤‡å’Œæœ€ç»ˆé¢„æµ‹çš„æµæ°´çº¿ã€‚</li>
</ol>
<blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;full_pipeline_with_predictor = Pipeline([</span><br><span class="line">       (<span class="string">"preparation"</span>, full_pipeline),</span><br><span class="line">       (<span class="string">"linear"</span>, LinearRegression())</span><br><span class="line">   ])</span><br><span class="line"></span><br><span class="line">&gt;full_pipeline_with_predictor.fit(housing, housing_labels)</span><br><span class="line">&gt;full_pipeline_with_predictor.predict(some_data)</span><br></pre></td></tr></table></figure>
</blockquote>
<ol>
<li>ä½¿ç”¨<code>GridSearchCV</code>è‡ªåŠ¨æ¢ç´¢ä¸€äº›å‡†å¤‡è¿‡ç¨‹ä¸­çš„å€™é€‰é¡¹ã€‚</li>
</ol>
<h2 id="ç¬¬03ç« -åˆ†ç±»"><a href="#ç¬¬03ç« -åˆ†ç±»" class="headerlink" title="ç¬¬03ç«  åˆ†ç±»"></a>ç¬¬03ç«  åˆ†ç±»</h2><p><a href="https://blog.csdn.net/weixin_38145317/article/details/79650188" target="_blank" rel="noopener">SVMã€SVCã€SVR</a> </p>
<h4 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h4><ol>
<li><p>å°è¯•åœ¨ MNIST æ•°æ®é›†ä¸Šå»ºç«‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œä½¿å®ƒåœ¨æµ‹è¯•é›†ä¸Šçš„ç²¾åº¦è¶…è¿‡ 97%ã€‚æç¤ºï¼š<code>KNeighborsClassifier</code>éå¸¸é€‚åˆè¿™ä¸ªä»»åŠ¡ã€‚ä½ åªéœ€è¦æ‰¾å‡ºä¸€ä¸ªå¥½çš„è¶…å‚æ•°å€¼ï¼ˆè¯•ä¸€ä¸‹å¯¹æƒé‡å’Œè¶…å‚æ•°<code>n_neighbors</code>è¿›è¡Œç½‘æ ¼æœç´¢ï¼‰ã€‚</p>
<p>â€‹</p>
</li>
<li><p>å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥æ˜¯ MNIST ä¸­çš„å›¾åƒä»»æ„æ–¹å‘ç§»åŠ¨ï¼ˆä¸Šä¸‹å·¦å³ï¼‰ä¸€ä¸ªåƒç´ ã€‚ç„¶åï¼Œå¯¹è®­ç»ƒé›†ä¸Šçš„æ¯å¼ å›¾ç‰‡ï¼Œå¤åˆ¶å››ä¸ªç§»åŠ¨åçš„å‰¯æœ¬ï¼ˆæ¯ä¸ªæ–¹å‘ä¸€ä¸ªå‰¯æœ¬ï¼‰ï¼ŒæŠŠå®ƒä»¬åŠ åˆ°è®­ç»ƒé›†å½“ä¸­å»ã€‚æœ€ååœ¨æ‰©å±•åçš„è®­ç»ƒé›†ä¸Šè®­ç»ƒä½ æœ€å¥½çš„æ¨¡å‹ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•é›†ä¸Šæµ‹é‡å®ƒçš„ç²¾åº¦ã€‚ä½ åº”è¯¥ä¼šè§‚å¯Ÿåˆ°ä½ çš„æ¨¡å‹ä¼šæœ‰æ›´å¥½çš„è¡¨ç°ã€‚è¿™ç§äººå·¥æ‰©å¤§è®­ç»ƒé›†çš„æ–¹æ³•å«åšæ•°æ®å¢å¼ºï¼Œæˆ–è€…è®­ç»ƒé›†æ‰©å¼ ã€‚</p>
<p>â€‹</p>
</li>
<li><p>æ‹¿ Titanic æ•°æ®é›†å»æ£é¼“ä¸€ç•ªã€‚å¼€å§‹è¿™ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªå¾ˆæ£’çš„å¹³å°ï¼šKaggle</p>
<p>â€‹</p>
</li>
<li><p>å»ºç«‹ä¸€ä¸ªåƒåœ¾é‚®ä»¶åˆ†ç±»å™¨ï¼ˆè¿™æ˜¯ä¸€ä¸ªæ›´æœ‰æŒ‘æˆ˜æ€§çš„ç»ƒä¹ ï¼‰ï¼š</p>
</li>
</ol>
<ul>
<li>ä¸‹è½½åƒåœ¾é‚®ä»¶å’Œéåƒåœ¾é‚®ä»¶çš„æ ·ä¾‹æ•°æ®ã€‚åœ°å€æ˜¯<a href="https://spamassassin.apache.org/publiccorpus/" target="_blank" rel="noopener">Apache SpamAssassin çš„å…¬å…±æ•°æ®é›†</a></li>
<li>è§£å‹è¿™äº›æ•°æ®é›†ï¼Œå¹¶ä¸”ç†Ÿæ‚‰å®ƒçš„æ•°æ®æ ¼å¼ã€‚</li>
<li>å°†æ•°æ®é›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†</li>
<li>å†™ä¸€ä¸ªæ•°æ®å‡†å¤‡çš„æµæ°´çº¿ï¼Œå°†æ¯ä¸€å°é‚®ä»¶è½¬æ¢ä¸ºç‰¹å¾å‘é‡ã€‚ä½ çš„æµæ°´çº¿åº”è¯¥å°†ä¸€å°é‚®ä»¶è½¬æ¢ä¸ºä¸€ä¸ªç¨€ç–å‘é‡ï¼Œå¯¹äºæ‰€æœ‰å¯èƒ½çš„è¯ï¼Œè¿™ä¸ªå‘é‡æ ‡å¿—å“ªä¸ªè¯å‡ºç°äº†ï¼Œå“ªä¸ªè¯æ²¡æœ‰å‡ºç°ã€‚ä¸¾ä¾‹å­ï¼Œå¦‚æœæ‰€æœ‰é‚®ä»¶åªåŒ…å«äº†<code>&quot;Hello&quot;,&quot;How&quot;,&quot;are&quot;, &quot;you&quot;</code>è¿™å››ä¸ªè¯ï¼Œé‚£ä¹ˆä¸€å°é‚®ä»¶ï¼ˆå†…å®¹æ˜¯ï¼š<code>&quot;Hello you Hello Hello you&quot;</code>ï¼‰å°†ä¼šè¢«è½¬æ¢ä¸ºå‘é‡<code>[1, 0, 0, 1]</code>(æ„æ€æ˜¯ï¼š<code>&quot;Hello&quot;</code>å‡ºç°ï¼Œ<code>&quot;How&quot;</code>ä¸å‡ºç°ï¼Œ<code>&quot;are&quot;</code>ä¸å‡ºç°ï¼Œ<code>&quot;you&quot;</code>å‡ºç°)ï¼Œæˆ–è€…<code>[3, 0, 0, 2]</code>ï¼Œå¦‚æœä½ æƒ³æ•°å‡ºæ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚</li>
<li>ä½ ä¹Ÿè®¸æƒ³ç»™ä½ çš„æµæ°´çº¿å¢åŠ è¶…å‚æ•°ï¼Œæ§åˆ¶æ˜¯å¦å‰¥è¿‡é‚®ä»¶å¤´ã€å°†é‚®ä»¶è½¬æ¢ä¸ºå°å†™ã€å»é™¤æ ‡ç‚¹ç¬¦å·ã€å°†æ‰€æœ‰ URL æ›¿æ¢æˆ<code>&quot;URL&quot;</code>ï¼Œå°†æ‰€æœ‰æ•°å­—æ›¿æ¢æˆ<code>&quot;NUMBER&quot;</code>ï¼Œæˆ–è€…ç”šè‡³æå–è¯å¹²ï¼ˆæ¯”å¦‚ï¼Œæˆªæ–­è¯å°¾ã€‚æœ‰ç°æˆçš„ Python åº“å¯ä»¥åšåˆ°è¿™ç‚¹ï¼‰ã€‚</li>
<li>ç„¶å å°è¯•å‡ ä¸ªä¸åŒçš„åˆ†ç±»å™¨ï¼Œçœ‹çœ‹ä½ å¯å¦å»ºç«‹ä¸€ä¸ªå¾ˆæ£’çš„åƒåœ¾é‚®ä»¶åˆ†ç±»å™¨ï¼ŒåŒæ—¶æœ‰ç€é«˜å¬å›ç‡å’Œé«˜å‡†ç¡®ç‡ã€‚</li>
</ul>
<h2 id="ç¬¬04ç« -è®­ç»ƒæ¨¡å‹"><a href="#ç¬¬04ç« -è®­ç»ƒæ¨¡å‹" class="headerlink" title="ç¬¬04ç«  è®­ç»ƒæ¨¡å‹"></a>ç¬¬04ç«  è®­ç»ƒæ¨¡å‹</h2><p>çº¿æ€§å›å½’é¢„æµ‹æ¨¡å‹ï¼š</p>
<p>$\hat y = h_{\theta}(x)=\theta ^T\cdot x$</p>
<p>çº¿æ€§å›å½’æ¨¡å‹çš„MSEæŸå¤±å‡½æ•°:</p>
<p>$MSE(X,h_\theta)=\frac{1}{m}\sum_{i=1}^{n}(\theta^T\cdot x^{(i)}-y^{(i)})^2$</p>
<h4 id="æ­£æ€æ–¹ç¨‹"><a href="#æ­£æ€æ–¹ç¨‹" class="headerlink" title="æ­£æ€æ–¹ç¨‹"></a><strong>æ­£æ€æ–¹ç¨‹</strong></h4><p>æœ€å°åŒ–æŸå¤±å‡½æ•° $\hat{\theta} =   (X^T \cdot X)^{-1} \cdot X^T \cdot y $</p>
<p>å¤æ‚åº¦ï¼šéœ€è¦è®¡ç®—$X^T\cdot X$ çš„é€†çŸ©é˜µï¼Œæ˜¯ä¸€ä¸ªn*nçš„çŸ©é˜µï¼Œè¿ç®—å¤æ‚åº¦å¤§çº¦åœ¨$O(n^{24})$ åˆ°$O(n^{3})$ä¹‹é—´ã€‚</p>
<p>å¯ä»¥numpyç›´æ¥æ±‚è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨sklearnï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line">lin_reg = LinearRegression()</span><br><span class="line">lin_reg.fit(X, y)</span><br><span class="line">lin_reg.intercept_, lin_reg.coef_</span><br></pre></td></tr></table></figure>
<p><code>LinearRegressionç±»åŸºäºnumpy.linalg.lstsq ï¼ˆleast squaresï¼‰</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">theta_best_svd, residuals, rank, s = np.linalg.lstsq(X_b, y, rcond=<span class="number">1e-6</span>)</span><br><span class="line">theta_best_svd</span><br></pre></td></tr></table></figure>
<h5 id="pseudoinverse-Moore-Penrose-inverse"><a href="#pseudoinverse-Moore-Penrose-inverse" class="headerlink" title="pseudoinverse (Moore-Penrose inverse)"></a>pseudoinverse (Moore-Penrose inverse)</h5><p>è¯¥å‡½æ•°æ±‚è§£çš„æ˜¯ä¼ªé€†çŸ©é˜µï¼ˆpseudoinverseï¼‰ï¼Œå³å¹¿ä¹‰çŸ©é˜µã€‚å…¶ä¸­æœ€è‘—åçš„ä¼ªé€†çŸ©é˜µä¸ºæ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€† A+ï¼ˆMooreâ€“Penrose pseudoinverse)ï¼Œå¸¸åº”ç”¨äºæ±‚éä¸€è‡´çº¿æ€§æ–¹ç¨‹ç»„çš„æœ€å°èŒƒæ•°æœ€å°äºŒä¹˜è§£ï¼ˆæœ€å°äºŒä¹˜æ³•ï¼‰ï¼Œå¹¶ä½¿å¾—è§£çš„å½¢å¼å˜å¾—ç®€å•ã€‚çŸ©é˜µçš„æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†åœ¨å®æ•°åŸŸå’Œå¤æ•°åŸŸä¸Šéƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¥‡å¼‚å€¼åˆ†è§£æ±‚å¾—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.linalg.pinv(X_b).dot(y)</span><br></pre></td></tr></table></figure>
<p>æ»¡è¶³æ‘©å°”-å½­è‹¥æ–¯æ¡ä»¶çš„çŸ©é˜µGç§°ä¸ºçŸ©é˜µAçš„æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†çŸ©é˜µï¼Œè®°ä½œA+ï¼š</p>
<p><img src="https://img-blog.csdn.net/20170824103329707?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemVhbGZvcnk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="æ¡ä»¶"></p>
<p>ä»æ‘©å°”ï¼å½­è‹¥æ–¯æ¡ä»¶å‡ºå‘ï¼Œå½­è‹¥æ–¯æ¨å¯¼å‡ºäº†æ‘©å°”ï¼å½­è‹¥æ–¯å¹¿ä¹‰é€†çš„ä¸€äº›æ€§è´¨ï¼š<br><img src="https://img-blog.csdn.net/20170824103423352?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemVhbGZvcnk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p> å‚è€ƒï¼š<a href="https://blog.csdn.net/zealfory/article/details/77526815" target="_blank" rel="noopener">https://blog.csdn.net/zealfory/article/details/77526815</a></p>
<h4 id="æ¢¯åº¦ä¸‹é™æ³•"><a href="#æ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="æ¢¯åº¦ä¸‹é™æ³•"></a>æ¢¯åº¦ä¸‹é™æ³•</h4><p>è¶…å‚æ•°å­¦ä¹ ç‡çš„å€¼å†³å®šäº†æ­¥é•¿çš„å¤§å°ã€‚å¦‚æœå­¦ä¹ ç‡å¤ªå°ï¼Œå¿…é¡»ç»è¿‡å¤šæ¬¡è¿­ä»£ï¼Œç®—æ³•æ‰èƒ½æ”¶æ•›ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„ï¼Œå¦‚æœå­¦ä¹ ç‡å¤ªå¤§ï¼Œä½ å¯èƒ½ä½¿ç®—æ³•å‘æ•£ï¼Œå‡½æ•°å€¼å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæ°¸è¿œä¸å¯èƒ½æ‰¾åˆ°ä¸€ä¸ªå¥½çš„ç­”æ¡ˆã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-4.PNG" alt="å­¦ä¹ ç‡è¿‡å°"></p>
<center>å­¦ä¹ ç‡è¿‡å°</center>

<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-5.PNG" alt="img"></p>
<center>å­¦ä¹ ç‡è¿‡å¤§</center>

<p><strong>ä¸¤ä¸ªä¸»è¦æŒ‘æˆ˜</strong></p>
<ol>
<li>æ”¶æ•›åˆ°å±€éƒ¨æœ€å°å€¼</li>
</ol>
<p>å½“ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ—¶å€™ï¼Œåº”è¯¥ç¡®ä¿æ‰€æœ‰çš„ç‰¹å¾æœ‰ç€ç›¸è¿‘çš„å°ºåº¦èŒƒå›´ï¼ˆä¾‹å¦‚ï¼šä½¿ç”¨ Scikit Learn çš„ <code>StandardScaler</code>ç±»ï¼‰ï¼Œå¦åˆ™å®ƒå°†éœ€è¦å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½å¤Ÿæ”¶æ•›ã€‚</p>
<h4 id="batch-GD"><a href="#batch-GD" class="headerlink" title="batch-GD"></a>batch-GD</h4><p>ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®¡ç®—æ¯ä¸€ä¸ª $\theta_j$ ä¸‹æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå³è®¡ç®—å…³äº$\theta_j$ çš„æŸå¤±å‡½æ•°çš„åå¯¼æ•°ï¼Œè®°ä¸ºï¼š </p>
<script type="math/tex; mode=display">\frac{\partial}{\partial \theta_j} MSE(\theta)=\frac{2}{m}\sum_{i=1}^{m}({\theta^T\cdot x^{(i)}-y^{(i)})x_j^{}(i)}</script><p>å†™æˆçŸ©é˜µçš„å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">\nabla_\theta MSE(\theta)=\left( \begin{array}{c} \frac{\partial}{\partial \theta_0} MSE(\theta)\\\frac{\partial}{\partial \theta_1} MSE(\theta)\\...\\\frac{\partial}{\partial \theta_n} MSE(\theta) \end{array} \right)=\frac {2}{m} X^T\cdot (X\cdot \theta-y)</script><blockquote>
<p>åœ¨è¿™ä¸ªæ–¹ç¨‹ä¸­æ¯ä¸€æ­¥è®¡ç®—æ—¶éƒ½åŒ…å«äº†æ•´ä¸ªè®­ç»ƒé›†$X$ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•ç§°ä¸º<strong>æ‰¹é‡æ¢¯åº¦ä¸‹é™</strong>ï¼šæ¯ä¸€æ¬¡è®­ç»ƒè¿‡ç¨‹éƒ½ä½¿ç”¨æ‰€æœ‰çš„çš„è®­ç»ƒæ•°æ®ã€‚å› æ­¤ï¼Œåœ¨å¤§æ•°æ®é›†ä¸Šï¼Œå…¶ä¼šå˜å¾—ç›¸å½“çš„æ…¢ã€‚ç„¶è€Œï¼Œæ¢¯åº¦ä¸‹é™çš„è¿ç®—è§„æ¨¡å’Œç‰¹å¾çš„æ•°é‡æˆæ­£æ¯”ã€‚è®­ç»ƒä¸€ä¸ªæ•°åƒæ•°é‡ç‰¹å¾çš„çº¿æ€§å›å½’æ¨¡å‹ä½¿ç”¨æ¢¯åº¦ä¸‹é™è¦æ¯”ä½¿ç”¨æ­£æ€æ–¹ç¨‹å¿«çš„å¤šã€‚</p>
</blockquote>
<p>æ¢¯åº¦ä¸‹é™çš„æ­¥é•¿ï¼š</p>
<script type="math/tex; mode=display">\theta^{(next step)}=\theta-\eta\nabla_\theta MSE(\theta)</script><p>$\eta$ ä¸ºå­¦ä¹ ç‡</p>
<p>ä¸ºäº†æ‰¾åˆ°ä¸€ä¸ªå¥½çš„å­¦ä¹ ç‡ï¼Œå¯ä»¥ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼Œè®¾ç½®ä¸€ä¸ª<strong>è¿­ä»£æ¬¡æ•°</strong>ã€‚è®¾ç½®ä¸€ä¸ªéå¸¸å¤§çš„è¿­ä»£æ¬¡æ•°ï¼Œä½†æ˜¯å½“æ¢¯åº¦å‘é‡å˜å¾—éå¸¸å°ï¼ˆå®¹å·® $\epsilon$ ï¼‰çš„æ—¶å€™ï¼Œç»“æŸè¿­ä»£ã€‚</p>
<blockquote>
<p>æ”¶æ•›é€Ÿç‡ï¼š</p>
<p>å½“æŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œä¸”æ–œç‡ä¸èƒ½çªå˜ï¼ˆå°±åƒå‡æ–¹å·®æŸå¤±å‡½æ•°é‚£æ ·ï¼‰ï¼Œåˆ™å®ƒçš„æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•å›ºå®šå­¦ä¹ ç‡ä¹‹åï¼Œæ”¶æ•›é€Ÿç‡æ˜¯ $O(\frac{1}{iterations})$ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå°†å®¹å·® $\epsilon$ ç¼©å° 10 å€ï¼ˆè¿™æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´ç²¾ç¡®çš„ç»“æœï¼‰ï¼Œç®—æ³•çš„è¿­ä»£æ¬¡æ•°å¤§çº¦ä¼šå˜æˆåŸæ¥çš„ 10 å€ã€‚</p>
</blockquote>
<h4 id="stochastic-gradient-descent"><a href="#stochastic-gradient-descent" class="headerlink" title="stochastic gradient descent"></a>stochastic gradient descent</h4><p>æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æœ€è¦é—®é¢˜æ˜¯è®¡ç®—æ¯ä¸€æ­¥çš„æ¢¯åº¦æ—¶éƒ½éœ€è¦ä½¿ç”¨æ•´ä¸ªè®­ç»ƒé›†ï¼Œè¿™å¯¼è‡´åœ¨è§„æ¨¡è¾ƒå¤§çš„æ•°æ®é›†ä¸Šï¼Œå…¶ä¼šå˜å¾—éå¸¸çš„æ…¢ã€‚</p>
<p>è€Œéšæœºæ¢¯åº¦ä¸‹é™ï¼Œæ¯ä¸€æ­¥çš„æ¢¯åº¦è®¡ç®—åªéšæœºé€‰å–è®­ç»ƒé›†ä¸­çš„ä¸€ä¸ªæ ·æœ¬ã€‚ç”±äºæ¯ä¸€æ¬¡è¿­ä»£ï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œç®—æ³•éå¸¸å¿«ï¼Œè¿™ä½¿éšæœºæ¢¯åº¦ç®—æ³•å¯ä»¥åœ¨å¤§è§„æ¨¡è®­ç»ƒé›†ä¸Šä½¿ç”¨ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œç”±äºå…¶éšæœºæ€§ï¼ŒSGDå‘ˆç°å‡ºæ›´å¤šçš„ä¸è§„å¾‹æ€§ï¼šåˆ°è¾¾æœ€å°å€¼ä¸æ˜¯å¹³ç¼“çš„ä¸‹é™ï¼ŒæŸå¤±å‡½æ•°ä¼šå¿½é«˜å¿½ä½ï¼Œåªåœ¨å¤§ä½“ä¸Šå‘ˆä¸‹é™è¶‹åŠ¿ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œéå¸¸çš„é è¿‘æœ€å°å€¼ï¼Œä½†ä¸ä¼šåœæ­¢åœ¨ä¸€ä¸ªå€¼ä¸Šï¼Œè€Œæ˜¯ä¸€ç›´åœ¨è¿™ä¸ªå€¼é™„è¿‘æ‘†åŠ¨ã€‚å› æ­¤ï¼Œç®—æ³•åœæ­¢æ—¶ï¼Œæœ€åçš„å‚æ•°ä¸æ˜¯æœ€ä¼˜å€¼ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-9.PNG" alt="img"></p>
<p>å½“æŸå¤±å‡½æ•°å¾ˆä¸è§„åˆ™æ—¶ï¼Œéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•èƒ½å¤Ÿè·³è¿‡å±€éƒ¨æœ€å°å€¼ã€‚å› æ­¤ï¼Œéšæœºæ¢¯åº¦ä¸‹é™åœ¨å¯»æ‰¾å…¨å±€æœ€å°å€¼ä¸Šæ¯”æ‰¹é‡æ¢¯åº¦ä¸‹é™è¡¨ç°è¦å¥½ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-6.PNG" alt="img"></p>
<p>è™½ç„¶éšæœºæ€§å¯ä»¥å¾ˆå¥½çš„è·³è¿‡å±€éƒ¨æœ€ä¼˜å€¼ï¼Œä½†åŒæ—¶å®ƒå´ä¸èƒ½è¾¾åˆ°æœ€å°å€¼ã€‚è§£å†³è¿™ä¸ªéš¾é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯<strong>é€æ¸é™ä½å­¦ä¹ ç‡</strong>ã€‚</p>
<p>å¼€å§‹æ—¶ï¼Œèµ°çš„æ¯ä¸€æ­¥è¾ƒå¤§ï¼ˆæœ‰åŠ©äºå¿«é€Ÿå‰è¿›åŒæ—¶è·³è¿‡å±€éƒ¨æœ€å°å€¼ï¼‰ï¼Œç„¶åå˜å¾—è¶Šæ¥è¶Šå°ï¼Œä»è€Œä½¿ç®—æ³•åˆ°è¾¾å…¨å±€æœ€å°å€¼ã€‚ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º<strong>æ¨¡æ‹Ÿé€€ç«</strong>ã€‚</p>
<p>å†³å®šæ¯æ¬¡è¿­ä»£çš„å­¦ä¹ ç‡çš„å‡½æ•°ç§°ä¸º<code>learning schedule</code>ã€‚ å¦‚æœå­¦ä¹ é€Ÿåº¦é™ä½å¾—è¿‡å¿«ï¼Œå¯èƒ½ä¼šé™·å…¥å±€éƒ¨æœ€å°å€¼ï¼Œç”šè‡³åœ¨åˆ°è¾¾æœ€å°å€¼çš„åŠè·¯å°±åœæ­¢äº†ã€‚ å¦‚æœå­¦ä¹ é€Ÿåº¦é™ä½å¾—å¤ªæ…¢ï¼Œå¯èƒ½åœ¨æœ€å°å€¼çš„é™„è¿‘é•¿æ—¶é—´æ‘†åŠ¨ï¼ŒåŒæ—¶å¦‚æœè¿‡æ—©åœæ­¢è®­ç»ƒï¼Œæœ€ç»ˆåªä¼šå‡ºç°æ¬¡ä¼˜è§£ã€‚</p>
<h4 id="mini-batch-GD"><a href="#mini-batch-GD" class="headerlink" title="mini-batch GD"></a>mini-batch GD</h4><p>åœ¨è¿­ä»£çš„æ¯ä¸€æ­¥ï¼Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä½¿ç”¨ä¸€ä¸ªéšæœºçš„å°å‹å®ä¾‹é›†ã€‚ä¸éšæœºæ¢¯åº¦ç›¸æ¯”ä¸»è¦ä¼˜ç‚¹åœ¨äºå¯ä»¥é€šè¿‡çŸ©é˜µè¿ç®—çš„ç¡¬ä»¶ä¼˜åŒ–å¾—åˆ°ä¸€ä¸ªè¾ƒå¥½çš„è®­ç»ƒè¡¨ç°ã€‚</p>
<p>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™åœ¨å‚æ•°ç©ºé—´ä¸Šçš„è¡¨ç°æ¯”éšæœºæ¢¯åº¦ä¸‹é™è¦å¥½çš„å¤šï¼Œå°¤å…¶åœ¨æœ‰å¤§é‡çš„å°å‹å®ä¾‹é›†æ—¶ã€‚ä½œä¸ºç»“æœï¼Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¼šæ¯”éšæœºæ¢¯åº¦æ›´é è¿‘æœ€å°å€¼ã€‚ä½†æ˜¯ï¼Œå¦ä¸€æ–¹é¢ï¼Œå®ƒæœ‰å¯èƒ½é™·åœ¨å±€éƒ¨æœ€å°å€¼ä¸­ï¼ˆåœ¨é‡åˆ°å±€éƒ¨æœ€å°å€¼é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„çº¿æ€§å›å½’ä¸ä¸€æ ·ï¼‰ã€‚ </p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-11.PNG" alt="img"></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E8%A1%A84-1.PNG" alt="img"></p>
<h4 id="å¤šé¡¹å¼å›å½’"><a href="#å¤šé¡¹å¼å›å½’" class="headerlink" title="å¤šé¡¹å¼å›å½’"></a>å¤šé¡¹å¼å›å½’</h4><p>å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡ŒåŠ æƒåä½œä¸ºæ–°çš„ç‰¹å¾ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªçº¿æ€§æ¨¡å‹åœ¨è¿™ä¸ªæ‰©å±•çš„ç‰¹å¾é›†ã€‚ è¿™ç§æ–¹æ³•ç§°ä¸ºå¤šé¡¹å¼å›å½’ã€‚</p>
<p><code>from sklearn.preprocessing import PolynomialFeatures</code></p>
<p>å½“å­˜åœ¨å¤šä¸ªç‰¹å¾æ—¶ï¼Œå¤šé¡¹å¼å›å½’èƒ½å¤Ÿæ‰¾å‡ºç‰¹å¾ä¹‹é—´çš„å…³ç³»ï¼ˆè¿™æ˜¯æ™®é€šçº¿æ€§å›å½’æ¨¡å‹æ— æ³•åšåˆ°çš„ï¼‰ã€‚ è¿™æ˜¯å› ä¸º<code>LinearRegression</code>ä¼šè‡ªåŠ¨æ·»åŠ å½“å‰é˜¶æ•°ä¸‹ç‰¹å¾çš„æ‰€æœ‰ç»„åˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç‰¹å¾ $a,b$ï¼Œä½¿ç”¨ 3 é˜¶ï¼ˆ<code>degree=3</code>ï¼‰çš„<code>LinearRegression</code>æ—¶ï¼Œä¸ä»…æœ‰ $a^3, a^2, b^3, b^2$ï¼ŒåŒæ—¶ä¹Ÿä¼šæœ‰å®ƒä»¬çš„å…¶ä»–ç»„åˆé¡¹ $ab, ab^2, a^2b$</p>
<p><code>PolynomialFeatures(degree=d)</code>æŠŠä¸€ä¸ªåŒ…å«$n$ä¸ªç‰¹å¾çš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å« $\frac{(n+d)!}{d!n!}$ç‰¹å¾çš„æ•°ç»„ã€‚å°å¿ƒå¤§é‡ç‰¹å¾çš„ç»„åˆçˆ†ç‚¸ï¼</p>
<h4 id="å­¦ä¹ æ›²çº¿"><a href="#å­¦ä¹ æ›²çº¿" class="headerlink" title="å­¦ä¹ æ›²çº¿"></a>å­¦ä¹ æ›²çº¿</h4><p><strong>å¦‚ä½•ä¼°è®¡ä¸€ä¸ªæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›</strong> </p>
<ol>
<li>ä½¿ç”¨äº¤å‰éªŒè¯ã€‚è‹¥æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œé€šè¿‡äº¤å‰éªŒè¯æŒ‡æ ‡å´å¾—å‡ºå…¶æ³›åŒ–èƒ½åŠ›å¾ˆå·®ï¼Œæ¨¡å‹è¿‡æ‹Ÿåˆã€‚å¦‚æœåœ¨è¿™ä¸¤æ–¹é¢éƒ½è¡¨ç°ä¸å¥½ï¼Œé‚£ä¹ˆæ¬ æ‹Ÿåˆã€‚è¿™ç§æ–¹æ³•å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æ¨¡å‹æ˜¯å¤ªå¤æ‚è¿˜æ˜¯å¤ªç®€å•äº†ã€‚</li>
<li>è§‚å¯Ÿå­¦ä¹ æ›²çº¿ï¼šç”»å‡ºæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°ï¼ŒåŒæ—¶ç”»å‡ºä»¥è®­ç»ƒé›†è§„æ¨¡ä¸ºè‡ªå˜é‡çš„è®­ç»ƒé›†å‡½æ•°ã€‚ä¸ºäº†å¾—åˆ°å›¾åƒï¼Œéœ€è¦åœ¨è®­ç»ƒé›†çš„ä¸åŒè§„æ¨¡å­é›†ä¸Šè¿›è¡Œå¤šæ¬¡è®­ç»ƒã€‚</li>
</ol>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-15.PNG" alt="img"></p>
<center>æ¬ æ‹Ÿåˆ</center>

<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-16.PNG" alt="img"></p>
<center>è¿‡æ‹Ÿåˆ</center>

<blockquote>
<p>åå·®å’Œæ–¹å·®çš„æƒè¡¡</p>
<p>åœ¨ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ é¢†åŸŸæœ‰ä¸ªé‡è¦çš„ç†è®ºï¼šä¸€ä¸ªæ¨¡å‹çš„<strong>æ³›åŒ–è¯¯å·®</strong>ç”±ä¸‰ä¸ªä¸åŒè¯¯å·®çš„å’Œå†³å®šï¼š</p>
<ul>
<li>åå·®ï¼šæ³›åŒ–è¯¯å·®çš„è¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºé”™è¯¯çš„å‡è®¾å†³å®šçš„ã€‚ä¾‹å¦‚å®é™…æ˜¯ä¸€ä¸ªäºŒæ¬¡æ¨¡å‹ï¼Œä½ å´å‡è®¾äº†ä¸€ä¸ªçº¿æ€§æ¨¡å‹ã€‚ä¸€ä¸ªé«˜åå·®çš„æ¨¡å‹æœ€å®¹æ˜“å‡ºç°æ¬ æ‹Ÿåˆã€‚</li>
<li>æ–¹å·®ï¼šè¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®çš„å¾®å°å˜åŒ–è¾ƒä¸ºæ•æ„Ÿï¼Œä¸€ä¸ªå¤šè‡ªç”±åº¦çš„æ¨¡å‹æ›´å®¹æ˜“æœ‰é«˜çš„æ–¹å·®ï¼ˆä¾‹å¦‚ä¸€ä¸ªé«˜é˜¶å¤šé¡¹å¼æ¨¡å‹ï¼‰ï¼Œå› æ­¤ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆã€‚</li>
<li>ä¸å¯çº¦è¯¯å·®ï¼šè¿™éƒ¨åˆ†è¯¯å·®æ˜¯ç”±äºæ•°æ®æœ¬èº«çš„å™ªå£°å†³å®šçš„ã€‚é™ä½è¿™éƒ¨åˆ†è¯¯å·®çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯è¿›è¡Œæ•°æ®æ¸…æ´—ï¼ˆä¾‹å¦‚ï¼šä¿®å¤æ•°æ®æºï¼Œä¿®å¤åçš„ä¼ æ„Ÿå™¨ï¼Œè¯†åˆ«å’Œå‰”é™¤å¼‚å¸¸å€¼ï¼‰ã€‚</li>
</ul>
</blockquote>
<h4 id="çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–"><a href="#çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–" class="headerlink" title="çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–"></a>çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–</h4><p>æ­£åˆ™åŒ–è¿™ä¸ªæ¨¡å‹ï¼ˆå³é™åˆ¶å®ƒï¼‰ï¼šæ¨¡å‹æœ‰è¶Šå°‘çš„è‡ªç”±åº¦ï¼Œå°±è¶Šéš¾ä»¥æ‹Ÿåˆæ•°æ®ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™åŒ–ä¸€ä¸ªå¤šé¡¹å¼æ¨¡å‹ï¼Œä¸€ä¸ªç®€å•çš„æ–¹æ³•å°±æ˜¯å‡å°‘å¤šé¡¹å¼çš„é˜¶æ•°ã€‚</p>
<p>å¯¹äºä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œæ­£åˆ™åŒ–çš„å…¸å‹å®ç°å°±æ˜¯çº¦æŸæ¨¡å‹ä¸­å‚æ•°çš„æƒé‡ã€‚</p>
<h5 id="å²­å›å½’ï¼ˆRidgeï¼‰"><a href="#å²­å›å½’ï¼ˆRidgeï¼‰" class="headerlink" title="å²­å›å½’ï¼ˆRidgeï¼‰"></a>å²­å›å½’ï¼ˆRidgeï¼‰</h5><p>å²­å›å½’ï¼ˆä¹Ÿç§°ä¸º Tikhonov æ­£åˆ™åŒ–ï¼‰æ˜¯çº¿æ€§å›å½’çš„æ­£åˆ™åŒ–ç‰ˆï¼šåœ¨æŸå¤±å‡½æ•°ä¸Šç›´æ¥åŠ ä¸Šä¸€ä¸ªæ­£åˆ™é¡¹ã€‚è¿™ä½¿å¾—å­¦ä¹ ç®—æ³•ä¸ä»…èƒ½å¤Ÿæ‹Ÿåˆæ•°æ®ï¼Œè€Œä¸”èƒ½å¤Ÿä½¿æ¨¡å‹çš„å‚æ•°æƒé‡å°½é‡çš„å°ã€‚æ³¨æ„åˆ°è¿™ä¸ªæ­£åˆ™é¡¹åªæœ‰åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ‰ä¼šè¢«åŠ åˆ°æŸå¤±å‡½æ•°ã€‚å½“å¾—åˆ°å®Œæˆè®­ç»ƒçš„æ¨¡å‹åï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨æ²¡æœ‰æ­£åˆ™åŒ–çš„æµ‹é‡æ–¹æ³•å»è¯„ä»·æ¨¡å‹çš„è¡¨ç°ã€‚</p>
<blockquote>
<p>æç¤º</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè®­ç»ƒè¿‡ç¨‹ä½¿ç”¨çš„æŸå¤±å‡½æ•°å’Œæµ‹è¯•è¿‡ç¨‹ä½¿ç”¨çš„è¯„ä»·å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚é™¤äº†æ­£åˆ™åŒ–ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸åŒï¼šè®­ç»ƒæ—¶çš„æŸå¤±å‡½æ•°åº”è¯¥åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æ˜“äºæ±‚å¯¼ï¼Œè€Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè¯„ä»·å‡½æ•°æ›´åº”è¯¥æ¥è¿‘æœ€åçš„å®¢è§‚è¡¨ç°ã€‚ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼šåœ¨åˆ†ç±»è®­ç»ƒä¸­æˆ‘ä»¬ä½¿ç”¨å¯¹æ•°æŸå¤±ï¼ˆé©¬ä¸Šæˆ‘ä»¬ä¼šè®¨è®ºå®ƒï¼‰ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å´ä½¿ç”¨ç²¾ç¡®ç‡/å¬å›ç‡æ¥ä½œä¸ºå®ƒçš„è¯„ä»·å‡½æ•°ã€‚</p>
</blockquote>
<p>å²­å›å½’æŸå¤±å‡½æ•°ï¼š</p>
<p>$J(\theta)=MSE(\theta)+\alpha \frac{1}{2} \sum_{i=1}^{n}{\theta _i ^2}$</p>
<p>$\theta_0$æ˜¯æ²¡æœ‰è¢«æ­£åˆ™åŒ–çš„ï¼Œæ‰€ä»¥ç´¯åŠ ä»i=1å¼€å§‹ï¼Œè€Œä¸æ˜¯i=0å¼€å§‹ã€‚å¦‚æœå®šä¹‰wä½œä¸ºç‰¹å¾çš„æƒé‡å‘é‡ï¼ˆ$\theta_1$åˆ°$\theta_n$ï¼‰ï¼Œåˆ™æ­£åˆ™é¡¹å¯ä»¥ç®€å†™æˆ$\frac{1}{2}(||w||_2)^2$ ï¼Œ$||\cdot||_2$è¡¨ç¤º$l_2$èŒƒæ•°ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-17.PNG" alt="img"></p>
<h6 id="å°é—­æ–¹ç¨‹çš„è§£"><a href="#å°é—­æ–¹ç¨‹çš„è§£" class="headerlink" title="å°é—­æ–¹ç¨‹çš„è§£"></a>å°é—­æ–¹ç¨‹çš„è§£</h6><script type="math/tex; mode=display">\hat \theta=(X^T\cdot X+\alpha A)^{-1}\cdot X^T\cdot y</script><p>Aæ˜¯ä¸€ä¸ªé™¤äº†å·¦ä¸Šè§’æœ‰ä¸€ä¸ª0çš„nxnçš„å•ä½çŸ©é˜µï¼Œè¡¨ç¤ºåå·®$\theta_0â€‹$ä¸è¢«æ­£åˆ™åŒ–ã€‚</p>
<h6 id="éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"><a href="#éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£" class="headerlink" title="éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£"></a>éšæœºæ¢¯åº¦ä¸‹é™æ³•æ±‚è§£</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sgd_reg = SGDRegressor(penalty=<span class="string">"l2"</span>)</span><br><span class="line"><span class="comment"># penaltyå‚æ•°æŒ‡çš„æ˜¯æ­£åˆ™é¡¹çš„æƒ©ç½šç±»å‹ã€‚æŒ‡å®šâ€œl2â€è¡¨æ˜ä½ è¦åœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ ä¸€é¡¹ï¼šæƒé‡å‘é‡ l2 èŒƒæ•°å¹³æ–¹çš„ä¸€åŠï¼Œè¿™å°±æ˜¯ç®€å•çš„å²­å›å½’ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="Lassoå›å½’"><a href="#Lassoå›å½’" class="headerlink" title="Lassoå›å½’"></a>Lassoå›å½’</h5><p>Lasso å›å½’ï¼ˆä¹Ÿç§° Least Absolute Shrinkageï¼Œæˆ–è€… Selection Operator Regressionï¼‰æ˜¯å¦ä¸€ç§æ­£åˆ™åŒ–ç‰ˆçš„çº¿æ€§å›å½’ï¼šå°±åƒå²­å›å½’é‚£æ ·ï¼Œå®ƒä¹Ÿåœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ äº†ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œä½†æ˜¯å®ƒä½¿ç”¨æƒé‡å‘é‡çš„$l_1$ èŒƒæ•°è€Œä¸æ˜¯æƒé‡å‘é‡ $l_2$èŒƒæ•°å¹³æ–¹çš„ä¸€åŠã€‚</p>
<p>$J(\theta)=MSE(\theta)+\alpha \sum_{i=1}^{n}{|\theta _i|}$</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-18.PNG" alt="img"></p>
<p>Lasso å›å½’çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å®ƒå€¾å‘äºå®Œå…¨æ¶ˆé™¤æœ€ä¸é‡è¦çš„ç‰¹å¾çš„æƒé‡ï¼ˆå³å°†å®ƒä»¬è®¾ç½®ä¸ºé›¶ï¼‰ã€‚ä¾‹å¦‚ï¼Œå³å›¾ä¸­çš„è™šçº¿æ‰€ç¤º$\alpha=10^{-7}$ï¼Œæ›²çº¿çœ‹èµ·æ¥åƒä¸€æ¡äºŒæ¬¡æ›²çº¿ï¼Œè€Œä¸”å‡ ä¹æ˜¯çº¿æ€§çš„ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„é«˜é˜¶å¤šé¡¹ç‰¹å¾éƒ½è¢«è®¾ç½®ä¸ºé›¶ã€‚æ¢å¥è¯è¯´ï¼ŒLassoå›å½’è‡ªåŠ¨çš„è¿›è¡Œç‰¹å¾é€‰æ‹©åŒæ—¶è¾“å‡ºä¸€ä¸ªç¨€ç–æ¨¡å‹ï¼ˆå³ï¼Œå…·æœ‰å¾ˆå°‘çš„éé›¶æƒé‡ï¼‰ã€‚</p>
<p>Lasso å›å½’å­æ¢¯åº¦å‘é‡:</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-93eea6b5c197bbc8d7be8b4c14e9f8f3.gif" alt="g(\theta,J)=\nabla_{\theta}MSE(\theta)+ \alpha{\left(\begin{matrix} sign(\theta_1)\\ sign(\theta_2)\\ \vdots \\ sign(\theta_n)\\ \end{matrix}\right)}\ where\ sign(\theta_i)= \begin{cases} -1, &amp;\theta_i&lt;0 \\ 0, &amp;\theta_i=0 \\ +1,&amp;\theta_i&gt;0 \\ \end{cases}"></p>
<h5 id="å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰"><a href="#å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰" class="headerlink" title="å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰"></a>å¼¹æ€§ç½‘ç»œï¼ˆElasticNetï¼‰</h5><p>å¼¹æ€§ç½‘ç»œä»‹äº Ridge å›å½’å’Œ Lasso å›å½’ä¹‹é—´ã€‚å®ƒçš„æ­£åˆ™é¡¹æ˜¯ Ridge å›å½’å’Œ Lasso å›å½’æ­£åˆ™é¡¹çš„ç®€å•æ··åˆï¼ŒåŒæ—¶ä½ å¯ä»¥æ§åˆ¶å®ƒä»¬çš„æ··åˆç‡ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-4b43b0aee35624cd95b910189b3dc231.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-4b43b0aee35624cd95b910189b3dc231.gif" alt="r"></a></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-e4da079f692fe35778bbdf1fdf120d99.gif" alt="J(\theta)=MSE(\theta)+r\alpha\sum\limits_{i=1}n\left|\theta_i \right|+\frac{1-r}{2}\alpha\sum\limits_{i=1}n\theta_i^2"></p>
<h5 id="æ—©èµ·åœæ­¢æ³•ï¼ˆEarly-Stoppingï¼‰"><a href="#æ—©èµ·åœæ­¢æ³•ï¼ˆEarly-Stoppingï¼‰" class="headerlink" title="æ—©èµ·åœæ­¢æ³•ï¼ˆEarly Stoppingï¼‰"></a>æ—©èµ·åœæ­¢æ³•ï¼ˆEarly Stoppingï¼‰</h5><p>å¯¹äºè¿­ä»£å­¦ä¹ ç®—æ³•ï¼Œæœ‰ä¸€ç§éå¸¸ç‰¹æ®Šçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå°±åƒæ¢¯åº¦ä¸‹é™åœ¨éªŒè¯é”™è¯¯è¾¾åˆ°æœ€å°å€¼æ—¶ç«‹å³åœæ­¢è®­ç»ƒé‚£æ ·ã€‚æˆ‘ä»¬ç§°ä¸ºæ—©æœŸåœæ­¢æ³•ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-20.PNG" alt="img"></p>
<h5 id="é€»è¾‘å›å½’"><a href="#é€»è¾‘å›å½’" class="headerlink" title="é€»è¾‘å›å½’"></a>é€»è¾‘å›å½’</h5><blockquote>
<p>ä¸€äº›å›å½’ç®—æ³•ä¹Ÿå¯ä»¥ç”¨äºåˆ†ç±»ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ Logistic å›å½’ï¼ˆä¹Ÿç§°ä¸º Logit å›å½’ï¼‰é€šå¸¸ç”¨äºä¼°è®¡ä¸€ä¸ªå®ä¾‹å±äºæŸä¸ªç‰¹å®šç±»åˆ«çš„æ¦‚ç‡ã€‚ è‹¥ä¼°è®¡çš„æ¦‚ç‡å¤§äº 50%ï¼Œåˆ™æ¨¡å‹é¢„æµ‹è¿™ä¸ªå®ä¾‹å±äºå½“å‰ç±»ï¼ˆç§°ä¸ºæ­£ç±»ï¼Œæ ‡è®°ä¸ºâ€œ1â€ï¼‰ï¼Œåä¹‹é¢„æµ‹å®ƒä¸å±äºå½“å‰ç±»ï¼ˆå³å±äºè´Ÿç±» ï¼Œæ ‡è®°ä¸ºâ€œ0â€ï¼‰ã€‚ è¿™æ ·ä¾¿æˆä¸ºäº†ä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨ã€‚</p>
</blockquote>
<p>é€»è¾‘å›å½’æ¨¡å‹çš„æ¦‚ç‡ä¼°è®¡ï¼š</p>
<p>$\hat p=h_\theta=\sigma(\theta^T\cdot x)$</p>
<p>å…¶ä¸­$\sigma()$æ˜¯Logisticå‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªsigmoidå‡½æ•°ï¼Œè¾“å‡ºæ˜¯ä»‹äº0åˆ°1ä¹‹é—´çš„æ•°å­—ã€‚</p>
<p>é€»è¾‘å‡½æ•°ï¼š</p>
<p>$\sigma(t)=\frac{1}{1+\exp(-t)}$</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-21.PNG" alt="img"></p>
<p>é€»è¾‘å›å½’é¢„æµ‹æ¨¡å‹ï¼š</p>
<p>$\hat y = \left\{ \begin{array}{cl} 0,&amp; \hat p &lt; 0.5 \\ 1,&amp; \hat p \geq 0.5 \end{array} \right.$</p>
<h6 id="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"><a href="#è®­ç»ƒå’ŒæŸå¤±å‡½æ•°" class="headerlink" title="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"></a>è®­ç»ƒå’ŒæŸå¤±å‡½æ•°</h6><p>å•ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°ï¼š</p>
<p>$c(\theta)=\left \{ \begin{array}{lc} -\log(\hat p), &amp;y=1 \\ -\log(1-\hat p),&amp; y=0 \end{array}\right.$</p>
<p>æ•´ä¸ªè®­ç»ƒé›†çš„æŸå¤±å‡½æ•°åªæ˜¯æ‰€æœ‰è®­ç»ƒå®ä¾‹çš„å¹³å‡å€¼ã€‚</p>
<p>é€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°ï¼š<br>$J (\theta) = -\frac{1}{m} \sum_{i=1}^{m}[y^{(i)}log(\hat p^{(i)})+(1-y^{(i)})log(1-\hat p^{(i)})]$</p>
<p>ä½†æ˜¯è¿™ä¸ªæŸå¤±å‡½æ•°å¯¹äºæ±‚è§£æœ€å°åŒ–æŸå¤±å‡½æ•°çš„$\thetaæ˜¯æ²¡æœ‰å…¬å¼è§£çš„ï¼ˆæ²¡æœ‰ç­‰ä»·çš„æ­£æ€æ–¹ç¨‹ï¼‰ï¼Œä½†è¯¥æŸå¤±å‡½æ•°æ˜¯å‡¸çš„ï¼Œæ‰€ä»¥æ¢¯åº¦ä¸‹é™ï¼ˆæˆ–ä»»ä½•å…¶ä»–ä¼˜åŒ–ç®—æ³•ï¼‰ä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°å…¨å±€æœ€å°å€¼ã€‚</p>
<p>é€»è¾‘å›å½’æŸå¤±å‡½æ•°çš„åå¯¼æ•°ï¼š</p>
<script type="math/tex; mode=display">\frac{\partial}{\partial \theta_j}J(\theta_J)=\frac{1}{m}\sum_{i=1}^{m}(\sigma({\theta^T\cdot x^{(i)})-y^{(i)})x_j^{}(i)}</script><h6 id="å†³ç­–è¾¹ç•Œ"><a href="#å†³ç­–è¾¹ç•Œ" class="headerlink" title="å†³ç­–è¾¹ç•Œ"></a>å†³ç­–è¾¹ç•Œ</h6><p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_4/%E5%9B%BE4-23.PNG" alt="img"></p>
<p>æ¦‚ç‡=0.5çš„åˆ†ç•Œçº¿</p>
<p>é€»è¾‘å›å½’æ¨¡å‹ä¹Ÿå¯ä»¥ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8524eb1789cf2093cfccc4c297138c7f.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8524eb1789cf2093cfccc4c297138c7f.gif" alt="\ell_1"></a> æˆ–è€… <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" alt="\ell_2"></a> æƒ©ç½šä½¿ç”¨è¿›è¡Œæ­£åˆ™åŒ–ã€‚Scikit-Learn é»˜è®¤æ·»åŠ äº† <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-f2d02eaf32cb7a351989198531c0d12a.gif" alt="\ell_2"></a> æƒ©ç½šã€‚</p>
<h5 id="Softmaxå›å½’"><a href="#Softmaxå›å½’" class="headerlink" title="Softmaxå›å½’"></a>Softmaxå›å½’</h5><p>Logistic å›å½’æ¨¡å‹å¯ä»¥ç›´æ¥æ¨å¹¿åˆ°æ”¯æŒå¤šç±»åˆ«åˆ†ç±»ï¼Œä¸å¿…ç»„åˆå’Œè®­ç»ƒå¤šä¸ªäºŒåˆ†ç±»å™¨ï¼Œ å…¶ç§°ä¸º Softmax å›å½’æˆ–å¤šç±»åˆ« Logistic å›å½’ã€‚</p>
<p>å½“ç»™å®šä¸€ä¸ªå®ä¾‹ $x$ æ—¶ï¼ŒSoftmax å›å½’æ¨¡å‹é¦–å…ˆè®¡ç®— $k$ ç±»çš„åˆ†æ•°ï¼Œç„¶$s_k(x)$ åå°†åˆ†æ•°åº”ç”¨åœ¨<code>Softmax</code>å‡½æ•°ï¼ˆä¹Ÿç§°ä¸ºå½’ä¸€åŒ–æŒ‡æ•°ï¼‰ä¸Šï¼Œä¼°è®¡å‡ºæ¯ç±»çš„æ¦‚ç‡ã€‚</p>
<p>kç±»çš„Softmaxå¾—åˆ†ï¼š</p>
<p>$s_k(x)=\theta^T\cdot x$</p>
<blockquote>
<p>æ¯ä¸ªç±»éƒ½æœ‰è‡ªå·±ç‹¬ä¸€æ— äºŒçš„å‚æ•°å‘é‡ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9f888eddb683fe5f80f87f44bd727b08.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9f888eddb683fe5f80f87f44bd727b08.gif" alt="\theta_k"></a>ã€‚ æ‰€æœ‰è¿™äº›å‘é‡é€šå¸¸ä½œä¸ºè¡Œæ”¾åœ¨å‚æ•°çŸ©é˜µ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-b9dce96eb3d5a71b28f9f198c28d2d1b.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-b9dce96eb3d5a71b28f9f198c28d2d1b.gif" alt="\Theta"></a> ä¸­ã€‚</p>
</blockquote>
<p>Softmaxå‡½æ•°ï¼š</p>
<script type="math/tex; mode=display">
\hat p_k=\sigma(s(x))_k=\frac{\exp(s_k(x))}{\sum_{j=1}^{K}{\exp(s_j(x))}}</script><p>$K$ è¡¨ç¤ºç±»çš„æ€»æ•°</p>
<p>Softmax å›å½’æ¨¡å‹åˆ†ç±»å™¨é¢„æµ‹ç»“æœ:</p>
<p>$\hat y=argmax\  \sigma(s(x))_k=argmax\ s_k(x) = argmax \ (\theta_k^T\cdot x)$</p>
<blockquote>
<p>Softmax å›å½’åˆ†ç±»å™¨ä¸€æ¬¡åªèƒ½é¢„æµ‹ä¸€ä¸ªç±»ï¼ˆå³å®ƒæ˜¯å¤šç±»çš„ï¼Œä½†ä¸æ˜¯å¤šè¾“å‡ºçš„ï¼‰ï¼Œå› æ­¤å®ƒåªèƒ½ç”¨äºåˆ¤æ–­äº’æ–¥çš„ç±»åˆ«ï¼Œå¦‚ä¸åŒç±»å‹çš„æ¤ç‰©ã€‚ ä¸èƒ½ç”¨å®ƒæ¥è¯†åˆ«ä¸€å¼ ç…§ç‰‡ä¸­çš„å¤šä¸ªäººã€‚</p>
</blockquote>
<h6 id="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°-1"><a href="#è®­ç»ƒå’ŒæŸå¤±å‡½æ•°-1" class="headerlink" title="è®­ç»ƒå’ŒæŸå¤±å‡½æ•°"></a>è®­ç»ƒå’ŒæŸå¤±å‡½æ•°</h6><p>ç›®æ ‡æ˜¯å»ºç«‹ä¸€ä¸ªæ¨¡å‹åœ¨ç›®æ ‡ç±»åˆ«ä¸Šæœ‰ç€è¾ƒé«˜çš„æ¦‚ç‡ï¼ˆå› æ­¤å…¶ä»–ç±»åˆ«çš„æ¦‚ç‡è¾ƒä½ï¼‰</p>
<p>äº¤å‰ç†µ:</p>
<script type="math/tex; mode=display">
J (\theta) = -\frac{1}{m} \sum_{i=1}^{m}\sum_{k=1}^{K}y^{(i)}_klog(\hat p^{(i)}_k)</script><blockquote>
<p>äº¤å‰ç†µæºäºä¿¡æ¯è®ºã€‚</p>
<p>å‡è®¾ä½ æƒ³è¦é«˜æ•ˆåœ°ä¼ è¾“æ¯å¤©çš„å¤©æ°”ä¿¡æ¯ã€‚å¦‚æœæœ‰å…«ä¸ªé€‰é¡¹ï¼ˆæ™´å¤©ï¼Œé›¨å¤©ç­‰ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨3ä½å¯¹æ¯ä¸ªé€‰é¡¹è¿›è¡Œç¼–ç ï¼Œå› ä¸º <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-5f344a952e29992de54b8cfe645b2d5b.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-5f344a952e29992de54b8cfe645b2d5b.gif" alt="2^3=8"></a>ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ è®¤ä¸ºå‡ ä¹æ¯å¤©éƒ½æ˜¯æ™´å¤©ï¼Œæ›´é«˜æ•ˆçš„ç¼–ç â€œæ™´å¤©â€çš„æ–¹å¼æ˜¯ï¼šåªç”¨ä¸€ä½ï¼ˆ0ï¼‰ã€‚å‰©ä¸‹çš„ä¸ƒé¡¹ä½¿ç”¨å››ä½ï¼ˆä» 1 å¼€å§‹ï¼‰ã€‚äº¤å‰ç†µåº¦é‡æ¯ä¸ªé€‰é¡¹å®é™…å‘é€çš„å¹³å‡æ¯”ç‰¹æ•°ã€‚ å¦‚æœä½ å¯¹å¤©æ°”çš„å‡è®¾æ˜¯å®Œç¾çš„ï¼Œäº¤å‰ç†µå°±ç­‰äºå¤©æ°”æœ¬èº«çš„ç†µï¼ˆå³å…¶å†…éƒ¨çš„ä¸ç¡®å®šæ€§ï¼‰ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ çš„å‡è®¾æ˜¯é”™è¯¯çš„ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœç»å¸¸ä¸‹é›¨ï¼‰äº¤å‰ç†µå°†ä¼šæ›´å¤§ï¼Œç§°ä¸º Kullback-Leibler æ•£åº¦ï¼ˆKL æ•£åº¦ï¼‰ã€‚</p>
<p>ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-83878c91171338902e0fe0fb97a8c47a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-83878c91171338902e0fe0fb97a8c47a.gif" alt="p"></a> å’Œ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7694f4a66316e53c8cdd9d9954bd611d.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7694f4a66316e53c8cdd9d9954bd611d.gif" alt="q"></a> ä¹‹é—´çš„äº¤å‰ç†µå®šä¹‰ä¸ºï¼š<a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-6bc68f603b52e51645b4bbd318f8cdfe.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-6bc68f603b52e51645b4bbd318f8cdfe.gif" alt="H(p,q)=-\sum_xp(x)\log q(x)"></a>ï¼ˆåˆ†å¸ƒè‡³å°‘æ˜¯ç¦»æ•£çš„ï¼‰</p>
</blockquote>
<p>$k$ ç±»äº¤å‰ç†µçš„æ¢¯åº¦å‘é‡:</p>
<p>$\nabla_{\theta_k} J (\Theta) = -\frac{1}{m} \sum_{i=1}^{m}(p^{(i)}_k - y^{(i)}_k )x^{(i)})$</p>
<h4 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h4><ol>
<li><p>å¦‚æœä½ æœ‰ä¸€ä¸ªæ•°ç™¾ä¸‡ç‰¹å¾çš„è®­ç»ƒé›†ï¼Œä½ åº”è¯¥é€‰æ‹©å“ªç§çº¿æ€§å›å½’è®­ç»ƒç®—æ³•ï¼Ÿ</p>
<blockquote>
<p>mini-batch GDæˆ–è€…SGD</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ è®­ç»ƒé›†ä¸­ç‰¹å¾çš„æ•°å€¼å°ºåº¦ï¼ˆscaleï¼‰æœ‰ç€éå¸¸å¤§çš„å·®å¼‚ï¼Œå“ªç§ç®—æ³•ä¼šå—åˆ°å½±å“ï¼Ÿæœ‰å¤šå¤§çš„å½±å“ï¼Ÿå¯¹äºè¿™äº›å½±å“ä½ å¯ä»¥åšä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>å¦‚æœè®­ç»ƒé›†çš„ç‰¹å¾å°ºåº¦å·®è·å¤ªå¤§ï¼ŒæŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿ä¼šå‘ˆæ¤­åœ†çŠ¶ï¼Œåˆ©ç”¨æ¢¯åº¦ä¸‹é™æ¥æ±‚æœ€ä¼˜è§£çš„è¿‡ç¨‹ä¸­ä¼šå¾ˆéš¾æ”¶æ•›ï¼Œæ¢¯åº¦æ–¹å‘å˜åŒ–å¾ˆå‰§çƒˆï¼Œæ”¶æ•›é€Ÿåº¦å¾ˆæ…¢ï¼Œå¹¶ä¸”å¯èƒ½ä¸ä¼šæ”¶æ•›åˆ°æœ€ä¼˜ç‚¹ã€‚</p>
<p>å¯¹æ•°æ®è¿›è¡Œç¼©æ”¾ï¼ˆStandardScalerï¼‰ï¼Œå½’ä¸€åŒ–</p>
</blockquote>
</li>
<li><p>è®­ç»ƒ Logistic å›å½’æ¨¡å‹æ—¶ï¼Œæ¢¯åº¦ä¸‹é™æ˜¯å¦ä¼šé™·å…¥å±€éƒ¨æœ€ä½ç‚¹ï¼Ÿ</p>
<blockquote>
<p>ä¸ä¼šï¼Œå…¶æŸå¤±å‡½æ•°æ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨æœ‰è¶³å¤Ÿçš„è®­ç»ƒæ—¶é—´ä¸‹ï¼Œæ˜¯å¦æ‰€æœ‰çš„æ¢¯åº¦ä¸‹é™éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„æ¨¡å‹å‚æ•°ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼ŒSGDå› ä¸ºéšæœºæ€§ï¼Œè¾¾åˆ°æŸå¤±å‡½æ•°åªä¼šå‘ˆç°å¤§ä½“ä¸‹é™è¶‹åŠ¿ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¼šéå¸¸é è¿‘æœ€å°å€¼ï¼Œä½†åªä¼šåœ¨é™„è¿‘æ‘†åŠ¨ã€‚</p>
<p>mini-batch GDä¹Ÿä¼šæœ‰ä¸€å®šçš„æ‘†åŠ¨ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•ï¼Œç”»å‡ºæ¯ä¸€ä»£çš„éªŒè¯è¯¯å·®ã€‚å½“ä½ å‘ç°éªŒè¯è¯¯å·®ä¸€ç›´å¢å¤§ï¼Œæ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä½ æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>æ¨¡å‹å‘æ•£ï¼Œéš¾ä»¥æ”¶æ•›ã€‚å‡å°å­¦ä¹ ç‡</p>
<p>æˆ–è€…æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œéœ€è¦æ—©åœ</p>
</blockquote>
</li>
<li><p>å½“éªŒè¯è¯¯å·®å‡é«˜æ—¶ï¼Œç«‹å³åœæ­¢å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ˜¯å¦æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼Œå› ä¸ºmini-batchçš„æŸå¤±å‡½æ•°éšæ—¶é—´å¤§ä½“ä¸‹é™ï¼Œä½†ä¼šæœ‰ä¸€å®šæ³¢åŠ¨ã€‚</p>
<p>æ›´å¥½çš„é€‰æ‹©æ˜¯å®šæœŸä¿å­˜æ¨¡å‹ï¼Œå¦‚æœç»è¿‡å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»ç„¶æ²¡æœ‰æ”¹è¿›çš„è¯ï¼Œå¯ä»¥æ¢å¤åˆ°ä¿å­˜çš„æœ€å¥½æ¨¡å‹ã€‚</p>
</blockquote>
</li>
<li><p>å“ªä¸ªæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆåœ¨æˆ‘ä»¬è®¨è®ºçš„é‚£äº›ç®—æ³•ä¸­ï¼‰å¯ä»¥æœ€å¿«åˆ°è¾¾è§£çš„é™„è¿‘ï¼Ÿå“ªä¸ªçš„ç¡®å®ä¼šæ”¶æ•›ï¼Ÿæ€ä¹ˆä½¿å…¶ä»–ç®—æ³•ä¹Ÿæ”¶æ•›ï¼Ÿ</p>
<blockquote>
<p>SGDæœ€å¿«</p>
<p>æ¢¯åº¦ä¸‹é™æ³•</p>
<p>é€æ­¥å‡å°å­¦ä¹ ç‡</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨å¤šé¡¹å¼å›å½’ï¼Œç”»å‡ºå­¦ä¹ æ›²çº¿ï¼Œåœ¨å›¾ä¸Šå‘ç°å­¦ä¹ è¯¯å·®å’ŒéªŒè¯è¯¯å·®ä¹‹é—´æœ‰ç€å¾ˆå¤§çš„é—´éš™ã€‚è¿™è¡¨ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæœ‰å“ªä¸‰ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>å¦‚æœå­¦ä¹ è¯¯å·®æ¯”éªŒè¯è¯¯å·®å°å¾ˆå¤šï¼Œè¯´æ˜å‘ç”Ÿäº†è¿‡æ‹Ÿåˆã€‚</p>
<p>å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–ï¼ˆå²­å›å½’ï¼ŒLassoå›å½’å’Œå¼¹æ€§ç½‘ç»œï¼‰è¿™ä¸ªæ¨¡å‹é™ä½è¿‡æ‹Ÿåˆç¨‹åº¦ã€‚</p>
<p>ä¹Ÿå¯ä»¥æä¾›æ›´å¤šçš„è®­ç»ƒæ•°æ®ã€‚</p>
<p>æˆ–è€…æ”¹å˜æ¨¡å‹ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ä½¿ç”¨å²­å›å½’ï¼Œå¹¶å‘ç°è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®éƒ½å¾ˆé«˜ï¼Œå¹¶ä¸”å‡ ä¹ç›¸ç­‰ã€‚ä½ çš„æ¨¡å‹è¡¨ç°æ˜¯é«˜åå·®è¿˜æ˜¯é«˜æ–¹å·®ï¼Ÿè¿™æ—¶ä½ åº”è¯¥å¢å¤§æ­£åˆ™åŒ–å‚æ•° <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7b7f9dbfea05c83784f8b85149852f08.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7b7f9dbfea05c83784f8b85149852f08.gif" alt="\alpha"></a>ï¼Œè¿˜æ˜¯é™ä½å®ƒï¼Ÿ</p>
<blockquote>
<p>é«˜åå·®ï¼Œåº”è¯¥å‡å°$\alpha$ã€‚</p>
</blockquote>
</li>
<li><p>ä½ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼š</p>
</li>
</ol>
<ul>
<li><p>ä½¿ç”¨å²­å›å½’ä»£æ›¿çº¿æ€§å›å½’ï¼Ÿ</p>
<blockquote>
<p>æ¨¡å‹æœ‰æ­£åˆ™åŒ–çš„æ—¶å€™ä¼šæ¯”æ²¡æœ‰æ­£åˆ™åŒ–çš„æ—¶å€™åˆæ›´å¥½çš„æ³›åŒ–æ€§èƒ½ï¼Œå²­å›å½’å°±æ˜¯å¯¹æ¨¡å‹çš„å‚æ•°åšäº†æ­£åˆ™åŒ–ï¼Œçº¦æŸå…¶å¹…å€¼å˜åŒ–ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™ä¼šå®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆã€‚</p>
</blockquote>
</li>
<li><p>Lasso å›å½’ä»£æ›¿å²­å›å½’ï¼Ÿ</p>
<blockquote>
<p>å½“ç‰¹å¾ä»…æœ‰å°‘æ•°æ˜¯çœŸæ­£æœ‰ç”¨çš„æ—¶å€™ï¼Œå¯¹é‡è¦çš„ç‰¹å¾è¿›è¡Œé€‰æ‹©ï¼Œå°†æ— ç”¨ç‰¹å¾çš„æƒé‡é™ä¸ºé›¶ï¼Œå¢åŠ æ¨¡å‹çš„å¯è§£é‡Šæ€§ã€‚</p>
</blockquote>
</li>
<li><p>å¼¹æ€§ç½‘ç»œä»£æ›¿ Lasso å›å½’ï¼Ÿ</p>
<blockquote>
<p>å½“ç‰¹å¾æ•°é‡æ¯”æ ·æœ¬çš„æ•°é‡å¤§çš„æ—¶å€™ï¼Œæˆ–è€…ç‰¹å¾ä¹‹é—´æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§æ—¶ï¼ŒLasso å¯èƒ½ä¼šè¡¨ç°çš„ä¸è§„å¾‹ã€‚</p>
</blockquote>
</li>
</ul>
<ol>
<li><p>å‡è®¾ä½ æƒ³åˆ¤æ–­ä¸€å‰¯å›¾ç‰‡æ˜¯å®¤å†…è¿˜æ˜¯å®¤å¤–ï¼Œç™½å¤©è¿˜æ˜¯æ™šä¸Šã€‚ä½ åº”è¯¥é€‰æ‹©äºŒä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨ï¼Œè¿˜æ˜¯ä¸€ä¸ª Softmax åˆ†ç±»å™¨ï¼Ÿ</p>
<blockquote>
<p>ä¸¤ä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨</p>
</blockquote>
</li>
<li><p>åœ¨ Softmax å›å½’ä¸Šåº”ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„æ—©æœŸåœæ­¢æ³•ï¼ˆä¸ä½¿ç”¨ Scikit-Learnï¼‰ã€‚</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="ç¬¬05ç« -æ”¯æŒå‘é‡æœº"><a href="#ç¬¬05ç« -æ”¯æŒå‘é‡æœº" class="headerlink" title="ç¬¬05ç«  æ”¯æŒå‘é‡æœº"></a>ç¬¬05ç«  æ”¯æŒå‘é‡æœº</h2><p>èƒ½å¤Ÿåšçº¿æ€§æˆ–è€…éçº¿æ€§çš„åˆ†ç±»ï¼Œå›å½’ï¼Œç”šè‡³å¼‚å¸¸å€¼æ£€æµ‹ã€‚SVM ç‰¹åˆ«é€‚åˆåº”ç”¨äºå¤æ‚ä½†ä¸­å°è§„æ¨¡æ•°æ®é›†çš„åˆ†ç±»é—®é¢˜ã€‚</p>
<h4 id="çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"><a href="#çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»" class="headerlink" title="çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"></a>çº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»</h4><p>SVM åˆ†ç±»å™¨çš„åˆ¤å®šè¾¹ç•Œå®çº¿ï¼Œä¸ä»…åˆ†å¼€äº†ä¸¤ç§ç±»åˆ«ï¼Œè€Œä¸”è¿˜å°½å¯èƒ½åœ°è¿œç¦»äº†æœ€é è¿‘çš„è®­ç»ƒæ•°æ®ç‚¹ã€‚ï¼ˆæœ€å¤§é—´éš”åˆ†ç±»ï¼‰</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/5-1.jpg" alt="img"></p>
<p>åˆ¤å®šè¾¹ç•Œæ˜¯ç”±ä½äºâ€œè¡—é“â€è¾¹ç¼˜çš„æ ·æœ¬ç‚¹ç¡®å®šçš„ï¼Œè¿™äº›æ ·æœ¬ç‚¹è¢«ç§°ä¸ºâ€œæ”¯æŒå‘é‡â€</p>
<h5 id="è½¯é—´éš”åˆ†ç±»"><a href="#è½¯é—´éš”åˆ†ç±»" class="headerlink" title="è½¯é—´éš”åˆ†ç±»"></a>è½¯é—´éš”åˆ†ç±»</h5><p>ç¡¬é—´éš”åˆ†ç±»æœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œ</p>
<ol>
<li>åªå¯¹çº¿æ€§å¯åˆ†çš„æ•°æ®èµ·ä½œç”¨.</li>
<li>å¯¹å¼‚å¸¸ç‚¹æ•æ„Ÿã€‚</li>
</ol>
<p>åœ¨ Scikit-Learn åº“çš„ SVM ç±»ï¼Œå¯ä»¥ç”¨<code>C</code>è¶…å‚æ•°ï¼ˆæƒ©ç½šç³»æ•°ï¼‰æ¥æ§åˆ¶è¿™ç§å¹³è¡¡ï¼šè¾ƒå°çš„<code>C</code>ä¼šå¯¼è‡´æ›´å®½çš„â€œè¡—é“â€ï¼Œä½†æ›´å¤šçš„é—´éš”è¿è§„ã€‚</p>
<blockquote>
<p>SVM æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œå¯ä»¥å°è¯•é€šè¿‡å‡å°è¶…å‚æ•°<code>C</code>å»è°ƒæ•´</p>
</blockquote>
<h4 id="éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"><a href="#éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»" class="headerlink" title="éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»"></a>éçº¿æ€§æ”¯æŒå‘é‡æœºåˆ†ç±»</h4><h5 id="å¢åŠ æ›´å¤šçš„ç‰¹å¾"><a href="#å¢åŠ æ›´å¤šçš„ç‰¹å¾" class="headerlink" title="å¢åŠ æ›´å¤šçš„ç‰¹å¾"></a>å¢åŠ æ›´å¤šçš„ç‰¹å¾</h5><p>é€šè¿‡ Scikit-Learnï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæµæ°´çº¿ï¼ˆPipelineï¼‰å»åŒ…å«å¤šé¡¹å¼ç‰¹å¾ï¼ˆPolynomialFeaturesï¼‰å˜æ¢ï¼Œç„¶åStandardScaler.</p>
<h5 id="å¤šé¡¹å¼æ ¸"><a href="#å¤šé¡¹å¼æ ¸" class="headerlink" title="å¤šé¡¹å¼æ ¸"></a>å¤šé¡¹å¼æ ¸</h5><p>æ·»åŠ å¤šé¡¹å¼ç‰¹å¾ä¼šï¼šå¤§é‡ç‰¹å¾å¯¼è‡´çš„ç»„åˆçˆ†ç‚¸</p>
<h5 id="å¢åŠ ç›¸ä¼¼ç‰¹å¾"><a href="#å¢åŠ ç›¸ä¼¼ç‰¹å¾" class="headerlink" title="å¢åŠ ç›¸ä¼¼ç‰¹å¾"></a>å¢åŠ ç›¸ä¼¼ç‰¹å¾</h5><p>ä½¿ç”¨ç›¸ä¼¼å‡½æ•°ï¼ˆsimilarity funtionï¼‰è®¡ç®—æ¯ä¸ªæ ·æœ¬ä¸ç‰¹å®šåœ°æ ‡ï¼ˆlandmarkï¼‰çš„ç›¸ä¼¼åº¦ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªç›¸ä¼¼å‡½æ•°ï¼Œå³<strong>é«˜æ–¯å¾„å‘åŸºå‡½æ•°ï¼ˆGaussian Radial Basis Functionï¼ŒRBFï¼‰</strong>ï¼Œè®¾ç½®<code>Î³ = 0.3</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-8b908429a5b5ee2e519f8caa16f82ee1.gif" alt="\phi_{\gamma}(x, \ell) = exp(-\gamma \|x - \ell \|^2)"></p>
<p>æ˜¯ä¸ªä» 0 åˆ° 1 çš„é’Ÿå‹å‡½æ•°ã€‚</p>
<h5 id="é«˜æ–¯-RBF-æ ¸"><a href="#é«˜æ–¯-RBF-æ ¸" class="headerlink" title="é«˜æ–¯ RBF æ ¸"></a>é«˜æ–¯ RBF æ ¸</h5><p>ç›¸ä¼¼ç‰¹å¾æ³•åœ¨æ‰€æœ‰é¢å¤–ç‰¹å¾ä¸Šçš„è®¡ç®—æˆæœ¬å¯èƒ½å¾ˆé«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡çš„è®­ç»ƒé›†ä¸Šã€‚</p>
<h5 id="è®¡ç®—å¤æ‚æ€§"><a href="#è®¡ç®—å¤æ‚æ€§" class="headerlink" title="è®¡ç®—å¤æ‚æ€§"></a>è®¡ç®—å¤æ‚æ€§</h5><p><code>LinearSVC</code>ç±»åŸºäº<code>liblinear</code>åº“ï¼Œå®ƒå®ç°äº†çº¿æ€§ SVM çš„ä¼˜åŒ–ç®—æ³•ã€‚å®ƒå¹¶ä¸æ”¯æŒæ ¸æŠ€å·§ï¼Œä½†æ˜¯å®ƒæ ·æœ¬å’Œç‰¹å¾çš„æ•°é‡å‡ ä¹æ˜¯çº¿æ€§çš„ï¼šè®­ç»ƒæ—¶é—´å¤æ‚åº¦å¤§çº¦ä¸º<code>O(m Ã— n)</code>ã€‚</p>
<p>SVC ç±»åŸºäº<code>libsvm</code>åº“ï¼Œå®ƒå®ç°äº†æ”¯æŒæ ¸æŠ€å·§çš„ç®—æ³•ã€‚è®­ç»ƒæ—¶é—´å¤æ‚åº¦é€šå¸¸ä»‹<code>äºO(m^2 Ã— n)</code>å’Œ<code>O(m^3 Ã— n)</code>ä¹‹é—´ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/tb-5-1.jpg" alt="img"></p>
<h4 id="SVMå›å½’"><a href="#SVMå›å½’" class="headerlink" title="SVMå›å½’"></a>SVMå›å½’</h4><p>SVM å›å½’ä»»åŠ¡æ˜¯é™åˆ¶é—´éš”è¿è§„æƒ…å†µä¸‹ï¼Œå°½é‡æ”¾ç½®æ›´å¤šçš„æ ·æœ¬åœ¨â€œè¡—é“â€ä¸Šã€‚â€œè¡—é“â€çš„å®½åº¦ç”±è¶…å‚æ•°<code>Ïµ</code>æ§åˆ¶ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ Scikit-Learn çš„<code>LinearSVR</code>ç±»å»å®ç°çº¿æ€§ SVM å›å½’ã€‚</p>
<p>å¤„ç†éçº¿æ€§å›å½’ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨æ ¸åŒ–çš„ SVM æ¨¡å‹ã€‚</p>
<blockquote>
<p>LinearSVRæ²¡æœ‰support_å±æ€§</p>
</blockquote>
<h4 id="èƒŒåæœºåˆ¶"><a href="#èƒŒåæœºåˆ¶" class="headerlink" title="èƒŒåæœºåˆ¶"></a>èƒŒåæœºåˆ¶</h4><p>é¦–å…ˆï¼Œå…³äºç¬¦å·çš„çº¦å®šï¼šåœ¨ç¬¬ 4 ç« ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ¨¡å‹å‚æ•°æ”¾åœ¨ä¸€ä¸ªçŸ¢é‡<code>Î¸</code>é‡Œï¼ŒåŒ…æ‹¬åç½®é¡¹<code>Î¸0</code>ï¼Œ<code>Î¸1</code>åˆ°<code>Î¸n</code>çš„è¾“å…¥ç‰¹å¾æƒé‡ï¼Œå’Œå¢åŠ ä¸€ä¸ªåå·®è¾“å…¥<code>x0 = 1</code>åˆ°æ‰€æœ‰æ ·æœ¬ã€‚</p>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¬¦å·çº¦å®šï¼Œåœ¨å¤„ç† SVM ä¸Šï¼Œè¿™æ›´æ–¹ä¾¿ï¼Œä¹Ÿæ›´å¸¸è§ï¼š<strong>åç½®é¡¹è¢«å‘½åä¸ºbï¼Œç‰¹å¾æƒé‡å‘é‡è¢«ç§°ä¸ºw</strong>ï¼Œåœ¨è¾“å…¥ç‰¹å¾å‘é‡ä¸­ä¸å†æ·»åŠ åç½®ç‰¹å¾ã€‚</p>
<h5 id="å†³ç­–å‡½æ•°å’Œé¢„æµ‹"><a href="#å†³ç­–å‡½æ•°å’Œé¢„æµ‹" class="headerlink" title="å†³ç­–å‡½æ•°å’Œé¢„æµ‹"></a>å†³ç­–å‡½æ•°å’Œé¢„æµ‹</h5><p>çº¿æ€§ SVM åˆ†ç±»å™¨é€šè¿‡ç®€å•åœ°è®¡ç®—å†³ç­–å‡½æ•° <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7781983bd977537b3c5d060e217ea82a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-7781983bd977537b3c5d060e217ea82a.gif" alt="w \cdot x+b = w_1 x_1 + ... + w_n x_n + b"></a> æ¥é¢„æµ‹æ–°æ ·æœ¬çš„ç±»åˆ«ï¼šå¦‚æœç»“æœæ˜¯æ­£çš„ï¼Œé¢„æµ‹ç±»åˆ«<code>Å·</code>æ˜¯æ­£ç±»ï¼Œä¸º 1ï¼Œå¦åˆ™ä»–å°±æ˜¯è´Ÿç±»ï¼Œä¸º 0ã€‚</p>
<p>$\hat y = \left \{ \begin{array}{ll}  0 &amp; if \ w^T\cdot x+b&lt;0 \\1 &amp; \ w^T\cdot x+b\geq0\end{array}\right.$</p>
<p>è®­ç»ƒçº¿æ€§ SVM åˆ†ç±»å™¨æ„å‘³ç€æ‰¾åˆ°<code>w</code>å€¼å’Œ<code>b</code>å€¼ä½¿å¾—è¿™ä¸€ä¸ªé—´éš”å°½å¯èƒ½å¤§ï¼ŒåŒæ—¶é¿å…é—´éš”è¿è§„ï¼ˆç¡¬é—´éš”ï¼‰æˆ–é™åˆ¶å®ƒä»¬ï¼ˆè½¯é—´éš”ï¼‰</p>
<h5 id="è®­ç»ƒç›®æ ‡"><a href="#è®­ç»ƒç›®æ ‡" class="headerlink" title="è®­ç»ƒç›®æ ‡"></a>è®­ç»ƒç›®æ ‡</h5><p>å†³ç­–å‡½æ•°çš„æ–œç‡ï¼šå®ƒç­‰äºæƒé‡å‘é‡çš„èŒƒæ•° $||\omega||$ ï¼Œæ–œç‡é™¤äº 2ï¼Œé‚£ä¹ˆé—´éš”å°†å¢åŠ ä¸¤å€ã€‚æƒé‡å‘é‡<code>w</code>è¶Šå°ï¼Œé—´éš”è¶Šå¤§ã€‚</p>
<p>ç›®æ ‡æ˜¯æœ€å°åŒ–$||\omega||$ ï¼Œä»è€Œè·å¾—å¤§çš„é—´éš”ã€‚å¦‚æœæƒ³è¦é¿å…é—´éš”è¿è§„ï¼ˆç¡¬é—´éš”ï¼‰ï¼Œå¯¹äºæ­£çš„è®­ç»ƒæ ·æœ¬ï¼Œéœ€è¦å†³ç­–å‡½æ•°å¤§äº 1ï¼Œå¯¹äºè´Ÿè®­ç»ƒæ ·æœ¬ï¼Œå°äº -1ã€‚å³ï¼š$t^{(i)}\ w^T\cdot x^{(i)}+b\geq1$</p>
<p><strong>å¯ä»¥å°†ç¡¬é—´éš”çº¿æ€§ SVM åˆ†ç±»å™¨è¡¨ç¤ºä¸ºçº¦æŸä¼˜åŒ–é—®é¢˜:</strong></p>
<script type="math/tex; mode=display">
minimize \frac{1}{2} \omega^T\cdot \omega \\
subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1 \ \ \ for \ i=1,2,3,\cdots , m</script><blockquote>
<p><a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" alt="1/2 w^T w"></a> ç­‰äº <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-98c822c91ab5af02c383eb03fa5b5446.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-98c822c91ab5af02c383eb03fa5b5446.gif" alt="1/2 \|w\|^2"></a>ï¼Œæœ€å°åŒ– <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-9a84ebda628c391e3046dfc2307e3c85.gif" alt="1/2 w^T w"></a>ï¼Œè€Œä¸æ˜¯æœ€å°åŒ– <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" alt="\|w\|"></a>ã€‚å› ä¸º<a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-03549015bd48d379883d926e6857b448.gif" alt="\|w\|"></a> åœ¨<code>w=0</code>å¤„æ˜¯ä¸å¯å¾®çš„ã€‚ä¼˜åŒ–ç®—æ³•åœ¨å¯å¾®å‡½æ•°è¡¨ç°å¾—æ›´å¥½ã€‚</p>
</blockquote>
<p>è½¯é—´éš”ï¼š</p>
<p>å¯¹æ¯ä¸ªæ ·æœ¬åº”ç”¨ä¸€ä¸ªæ¾å¼›å˜é‡ï¼ˆslack variableï¼‰$\zeta^{(i)}\geq0$ ã€‚$\zeta^{(i)}$è¡¨ç¤ºäº†ç¬¬<code>i</code>ä¸ªæ ·æœ¬å…è®¸è¿è§„é—´éš”çš„ç¨‹åº¦ã€‚</p>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªä¸ä¸€è‡´çš„ç›®æ ‡ï¼š</p>
<ol>
<li>ä½¿æ¾å¼›å˜é‡å°½å¯èƒ½çš„å°ï¼Œä»è€Œå‡å°é—´éš”è¿è§„.</li>
<li>ä½¿<code>1/2 wÂ·w</code>å°½é‡å°ï¼Œä»è€Œå¢å¤§é—´éš”ã€‚</li>
</ol>
<p>è¿™æ—¶<code>C</code>è¶…å‚æ•°å‘æŒ¥ä½œç”¨ï¼šå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸¤ä¸ªç›®æ ‡ä¹‹é—´æƒè¡¡ã€‚</p>
<script type="math/tex; mode=display">
minimize\  \frac{1}{2} \omega^T\cdot \omega +C\sum_{i=1}^{m}\zeta^{(i)}\\

subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1-\zeta^{(i)}\ \  and \ \ \zeta^{(i)} \geq0 \ \  for \ i=1,2,3,\cdots , m</script><h5 id="äºŒæ¬¡é—´éš”"><a href="#äºŒæ¬¡é—´éš”" class="headerlink" title="äºŒæ¬¡é—´éš”"></a>äºŒæ¬¡é—´éš”</h5><p>ç¡¬é—´éš”å’Œè½¯é—´éš”éƒ½æ˜¯<strong>çº¿æ€§çº¦æŸçš„å‡¸äºŒæ¬¡è§„åˆ’ä¼˜åŒ–é—®é¢˜</strong>ã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¹‹ä¸ºäºŒæ¬¡è§„åˆ’ï¼ˆQPï¼‰é—®é¢˜ã€‚</p>
<h5 id="å¯¹å¶é—®é¢˜"><a href="#å¯¹å¶é—®é¢˜" class="headerlink" title="å¯¹å¶é—®é¢˜"></a>å¯¹å¶é—®é¢˜</h5><p>ç»™å‡ºä¸€ä¸ªçº¦æŸä¼˜åŒ–é—®é¢˜ï¼Œå³åŸå§‹é—®é¢˜ï¼ˆprimal problemï¼‰ï¼Œå®ƒå¯èƒ½è¡¨ç¤ºä¸åŒä½†æ˜¯å’Œå¦ä¸€ä¸ªé—®é¢˜ç´§å¯†ç›¸è¿ï¼Œç§°ä¸ºå¯¹å¶é—®é¢˜ï¼ˆDual Problemï¼‰ã€‚å¯¹å¶é—®é¢˜çš„è§£é€šå¸¸æ˜¯å¯¹åŸå§‹é—®é¢˜çš„è§£ç»™å‡ºä¸€ä¸ªä¸‹ç•Œçº¦æŸï¼Œä½†åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œå®ƒä»¬å¯ä»¥è·å¾—ç›¸åŒè§£ã€‚</p>
<p><strong>çº¿æ€§ SVM çš„å¯¹å¶å½¢å¼ï¼ˆæ ¸æŠ€å·§çš„åŸºæœ¬ï¼‰</strong>ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-6.gif" alt="img"></p>
<p>ä¸€æ—¦æ‰¾åˆ°æœ€å°åŒ–å…¬å¼çš„å‘é‡<code>Î±</code>ï¼Œå¯ä»¥è®¡ç®—<code>w</code>å’Œ<code>b</code>ï¼Œä»è€Œä½¿åŸå§‹é—®é¢˜æœ€å°åŒ–ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-7.gif" alt="img"></p>
<p>è®­ç»ƒæ ·æœ¬çš„æ•°é‡æ¯”ç‰¹å¾æ•°é‡å°çš„æ—¶å€™ï¼Œå¯¹å¶é—®é¢˜æ¯”åŸå§‹é—®é¢˜è¦å¿«å¾—å¤šã€‚</p>
<h5 id="æ ¸åŒ–æ”¯æŒå‘é‡æœº"><a href="#æ ¸åŒ–æ”¯æŒå‘é‡æœº" class="headerlink" title="æ ¸åŒ–æ”¯æŒå‘é‡æœº"></a>æ ¸åŒ–æ”¯æŒå‘é‡æœº</h5><p>æŠŠä¸€ä¸ª 2 æ¬¡å¤šé¡¹å¼å˜æ¢åº”ç”¨åˆ°äºŒç»´ç©ºé—´çš„è®­ç»ƒé›†ï¼Œç„¶ååœ¨å˜æ¢åçš„è®­ç»ƒé›†ä¸Šè®­ç»ƒä¸€ä¸ªçº¿æ€§SVMåˆ†ç±»å™¨ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-8.gif" alt="img"></p>
<p>è½¬æ¢åå‘é‡çš„ç‚¹ç§¯ç­‰äºåŸå§‹å‘é‡ç‚¹ç§¯çš„å¹³æ–¹:</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-9.gif" alt="img"></p>
<p><strong>æ ¸æŠ€å·§çš„ç²¾é«“:</strong></p>
<p>ä¸éœ€è¦å¯¹è®­ç»ƒæ ·æœ¬è¿›è¡Œè½¬æ¢ï¼šä»…ä»…éœ€è¦åœ¨å¯¹å¶é—®é¢˜å…¬å¼ä¸­ï¼Œå°†ç‚¹ç§¯æ›¿æ¢æˆå®ƒç‚¹ç§¯çš„å¹³æ–¹ã€‚</p>
<p>å‡½æ•°$K(a, b) = (a^T b)^2$ è¢«ç§°ä¸ºäºŒæ¬¡å¤šé¡¹å¼æ ¸ï¼ˆpolynomial kernelï¼‰ã€‚åœ¨æœºå™¨å­¦ä¹ ï¼Œæ ¸å‡½æ•°æ˜¯ä¸€ä¸ªèƒ½è®¡ç®—ç‚¹ç§¯çš„å‡½æ•°ï¼Œå¹¶åªåŸºäºåŸå§‹å‘é‡<code>a</code>å’Œ<code>b</code>ï¼Œä¸éœ€è¦è®¡ç®—ï¼ˆç”šè‡³çŸ¥é“ï¼‰è½¬æ¢<code>Ï•</code>ã€‚</p>
<p><strong>ä¸€äº›å¸¸è§çš„æ ¸å‡½æ•°</strong></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-10.gif" alt="img"></p>
<blockquote>
<p>Mercer å®šç†</p>
<p>æ ¹æ® Mercer å®šç†ï¼Œå¦‚æœå‡½æ•°<code>K(a, b)</code>æ»¡è¶³ä¸€äº› Mercer æ¡ä»¶çš„æ•°å­¦æ¡ä»¶(<code>K</code>å‡½æ•°åœ¨å‚æ•°å†…å¿…é¡»æ˜¯è¿ç»­ï¼Œå¯¹ç§°ï¼Œå³<code>K(a, b)=K(b, a)</code>ï¼Œç­‰)ï¼Œé‚£ä¹ˆå­˜åœ¨å‡½æ•°<code>Ï•</code>ï¼Œå°†<code>a</code>å’Œ<code>b</code>æ˜ å°„åˆ°å¦ä¸€ä¸ªç©ºé—´ï¼ˆå¯èƒ½æœ‰æ›´é«˜çš„ç»´åº¦ï¼‰ï¼Œæœ‰ $K(a, b) = \phi(a)^T Ï•(b)$ã€‚æ‰€ä»¥å¯ä»¥ç”¨<code>K</code>ä½œä¸ºæ ¸å‡½æ•°ï¼Œå³ä½¿ä¸çŸ¥é“<code>Ï•</code>ã€‚ä½¿ç”¨é«˜æ–¯æ ¸ï¼ˆGaussian RBF kernelï¼‰æƒ…å†µä¸‹ï¼Œå®ƒå®é™…æ˜¯å°†æ¯ä¸ªè®­ç»ƒæ ·æœ¬æ˜ å°„åˆ°æ— é™ç»´ç©ºé—´ï¼Œæ‰€ä»¥ä¸éœ€è¦çŸ¥é“æ˜¯æ€ä¹ˆæ‰§è¡Œæ˜ å°„çš„ä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p>
<p>æ³¨æ„ä¸€äº›å¸¸ç”¨æ ¸å‡½æ•°ï¼ˆä¾‹å¦‚ Sigmoid æ ¸å‡½æ•°ï¼‰å¹¶ä¸æ»¡è¶³æ‰€æœ‰çš„ Mercer æ¡ä»¶ï¼Œç„¶è€Œåœ¨å®è·µä¸­é€šå¸¸è¡¨ç°å¾—å¾ˆå¥½ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-11.gif" alt="img"></p>
<p>ä¹Ÿéœ€è¦ä½¿ç”¨åŒæ ·çš„æŠ€å·§æ¥è®¡ç®—åç½®é¡¹<code>b</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-12.gif" alt="img"></p>
<p>æ”¯æŒå‘é‡æ‰æ»¡è¶³<code>Î±(i)â‰ 0</code>ï¼Œåšå‡ºé¢„æµ‹åªæ¶‰åŠè®¡ç®—ä¸ºæ”¯æŒå‘é‡éƒ¨åˆ†çš„è¾“å…¥æ ·æœ¬ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-992fd41f053d328db0ca0287eed0e2e9.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-992fd41f053d328db0ca0287eed0e2e9.gif" alt="x^{(n)}"></a> çš„ç‚¹ç§¯ï¼Œè€Œä¸æ˜¯å…¨éƒ¨çš„è®­ç»ƒæ ·æœ¬ã€‚</p>
<h5 id="åœ¨çº¿æ”¯æŒå‘é‡æœº"><a href="#åœ¨çº¿æ”¯æŒå‘é‡æœº" class="headerlink" title="åœ¨çº¿æ”¯æŒå‘é‡æœº"></a>åœ¨çº¿æ”¯æŒå‘é‡æœº</h5><p>çº¿å­¦ä¹ æ„å‘³ç€å¢é‡åœ°å­¦ä¹ ï¼Œä¸æ–­æœ‰æ–°å®ä¾‹ã€‚</p>
<p>äºçº¿æ€§SVMåˆ†ç±»å™¨ï¼Œä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æ¢¯åº¦ä¸‹é™ï¼ˆä¾‹å¦‚ä½¿ç”¨<code>SGDClassifire</code>ï¼‰æœ€å°åŒ–ä»£ä»·å‡½æ•°ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-13.gif" alt="img"></p>
<p>ç¬¬ä¸€ä¸ªå’Œä¼šä½¿æ¨¡å‹æœ‰ä¸€ä¸ªå°çš„æƒé‡å‘é‡<code>w</code>ï¼Œä»è€Œè·å¾—ä¸€ä¸ªæ›´å¤§çš„é—´éš”ã€‚ç¬¬äºŒä¸ªå’Œè®¡ç®—æ‰€æœ‰é—´éš”è¿è§„çš„æ€»æ•°ã€‚å¦‚æœæ ·æœ¬ä½äºâ€œè¡—é“â€ä¸Šå’Œæ­£ç¡®çš„ä¸€è¾¹ï¼Œæˆ–å®ƒä¸â€œè¡—é“â€æ­£ç¡®ä¸€è¾¹çš„è·ç¦»æˆæ¯”ä¾‹ï¼Œåˆ™é—´éš”è¿è§„ç­‰äº 0ã€‚æœ€å°åŒ–ä¿è¯äº†æ¨¡å‹çš„é—´éš”è¿è§„å°½å¯èƒ½å°å¹¶ä¸”å°‘ã€‚</p>
<blockquote>
<p>Hinge æŸå¤±</p>
<p>å‡½æ•°<code>max(0, 1â€“t)</code>è¢«ç§°ä¸º Hinge æŸå¤±å‡½æ•°ï¼ˆå¦‚ä¸‹ï¼‰ã€‚å½“<code>tâ‰¥1</code>æ—¶ï¼ŒHinge å€¼ä¸º 0ã€‚å¦‚æœ<code>t&lt;1</code>,å®ƒçš„å¯¼æ•°ï¼ˆæ–œç‡ï¼‰ä¸º -1ï¼Œè‹¥<code>t&gt;1</code>ï¼Œåˆ™ç­‰äº0ã€‚åœ¨<code>t=1</code>å¤„ï¼Œå®ƒæ˜¯ä¸å¯å¾®çš„ï¼Œä½†å°±åƒå¥—ç´¢å›å½’ï¼ˆLasso Regressionï¼‰ä¸€æ ·ï¼Œä»ç„¶å¯ä»¥åœ¨<code>t=0</code>æ—¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼ˆå³ -1 åˆ° 0 ä¹‹é—´ä»»ä½•å€¼ï¼‰<img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/5-hinge.jpg" alt="img"></p>
</blockquote>
<p>å¤§è§„æ¨¡çš„éçº¿æ€§é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ç¥ç»ç½‘ç»œã€‚</p>
<h4 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise"></a>Exercise</h4><ol>
<li><p>æ”¯æŒå‘é‡æœºèƒŒåçš„åŸºæœ¬æ€æƒ³æ˜¯ä»€ä¹ˆ</p>
<blockquote>
<p>æ”¯æŒå‘é‡æœºçš„èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼šå¯»æ‰¾å…·æœ‰æœ€å¤§é—´éš”çš„åˆ†ç±»å¹³é¢ï¼Œæ¥å¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚</p>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯æ”¯æŒå‘é‡</p>
<blockquote>
<p>æ”¯æŒå‘é‡å°±æ˜¯æœ€å¤§é—´éš”å¹³é¢è¾¹ç•Œä¸Šæ ·æœ¬ç‚¹ï¼Œè¿™äº›æ ·æœ¬ç‚¹è¢«ç§°ä¸ºâ€œæ”¯æŒå‘é‡â€</p>
</blockquote>
</li>
<li><p>å½“ä½¿ç”¨ SVM æ—¶ï¼Œä¸ºä»€ä¹ˆæ ‡å‡†åŒ–è¾“å…¥å¾ˆé‡è¦ï¼Ÿ</p>
<blockquote>
<p>å› ä¸ºSVM å¯¹ç‰¹å¾ç¼©æ”¾æ¯”è¾ƒæ•æ„Ÿï¼Œå¯¹ç‰¹å¾è¿›è¡Œç¼©æ”¾å¯ä»¥ä½¿å¾—åˆ¤å®šè¾¹ç•Œæ›´å®½ã€‚</p>
<p>SVMå¯»æ‰¾å…·æœ‰æœ€å¤§åˆ†ç±»é—´éš”çš„å¹³é¢ï¼Œå¦‚æœä¸å¯¹è¾“å…¥è¿›è¡Œå½’ä¸€åŒ–ï¼ŒSVMä¼šå¿½ç•¥å°çš„ç‰¹å¾ã€‚</p>
</blockquote>
</li>
<li><p>åˆ†ç±»ä¸€ä¸ªæ ·æœ¬æ—¶ï¼ŒSVM åˆ†ç±»å™¨èƒ½å¤Ÿè¾“å‡ºä¸€ä¸ªç½®ä¿¡å€¼å—ï¼Ÿæ¦‚ç‡å‘¢ï¼Ÿ</p>
<blockquote>
<p>SVMåˆ†ç±»å™¨é€šè¿‡ç®€å•åœ°è®¡ç®—å†³ç­–å‡½æ•°$\omega \cdot x+b$æ¥é¢„æµ‹æ–°æ ·æœ¬çš„ç±»åˆ«ï¼Œå¦‚æœå°äº0ï¼Œåˆ™ä¸ºè´Ÿç±»ï¼Œå¦‚æœå¤§äºç­‰äº0ï¼Œåˆ™ä¸ºæ­£ç±»ã€‚</p>
<p>SVMåˆ†ç±»å™¨ä¸ä¼šè¾“å‡ºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨ä¸€ä¸ªæœ‰æ•°ç™¾ä¸‡è®­ç»ƒæ ·æœ¬å’Œæ•°ç™¾ç‰¹å¾çš„è®­ç»ƒé›†ä¸Šï¼Œä½ æ˜¯å¦åº”è¯¥ä½¿ç”¨ SVM åŸå§‹å½¢å¼æˆ–å¯¹å¶å½¢å¼æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Ÿ</p>
<blockquote>
<p>çº¿æ€§SVMçš„è®­ç»ƒæ—¶é—´å¤æ‚åº¦çº¦ä¸ºO(m x n)ï¼Œè€Œå¯¹å¶å½¢å¼çš„å¤æ‚åº¦é€šå¸¸ä»‹äºO(m^2 x n) åˆ° O(m^3 x n)ï¼Œmä¸ºå®ä¾‹ä¸ªæ•°ï¼Œå½“è®­ç»ƒæ ·æœ¬å˜å¤§æ—¶ï¼Œå®ƒå°†å˜å¾—æå…¶æ…¢ã€‚</p>
<p>æ‰€ä»¥å¯¹äºå¤§è§„æ¨¡çº¿æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SVMçš„åŸå§‹å½¢å¼ï¼Œè€Œå¯¹äºå¤§è§„æ¨¡çš„éçº¿æ€§é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ç¥ç»ç½‘ç»œã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ ç”¨ RBF æ ¸æ¥è®­ç»ƒä¸€ä¸ª SVM åˆ†ç±»å™¨ï¼Œå¦‚æœå¯¹è®­ç»ƒé›†æ¬ æ‹Ÿåˆï¼šä½ åº”è¯¥å¢å¤§æˆ–è€…å‡å°<code>Î³</code>å—ï¼Ÿè°ƒæ•´å‚æ•°<code>C</code>å‘¢ï¼Ÿ</p>
<blockquote>
<p>RBFçš„å½¢å¼ï¼š$\phi_{\gamma}(x, \ell) = exp(-\gamma |x - \ell |^2)$ï¼Œæ˜¯ä¸€ä¸ªé’Ÿå½¢æ›²çº¿ï¼Œ<code>Î³</code> è¶Šå¤§ï¼Œé’Ÿå½¢æ›²çº¿è¶Šçª„ï¼Œæ¯ä¸ªæ ·æœ¬çš„å½±å“èŒƒå›´å˜å¾—æ›´å°ï¼Œè¾¹ç•Œæ›´ç»†åŒ–ã€‚</p>
<p>è¶…å‚æ•°<code>C</code>æ§åˆ¶SCMåˆ†ç±»æ¨¡å‹çš„è½¯ç¡¬ï¼Œè¾ƒå°çš„<code>C</code>ä¼šå¯¼è‡´æ›´å®½çš„åˆ†ç±»é—´éš”å¹³é¢ï¼Œä½†æ›´å¤šçš„é—´éš”è¿è§„ã€‚</p>
<p>æ‰€ä»¥æ¬ æ‹Ÿåˆæ—¶å¯ä»¥å¢å¤§<code>Î³</code>ï¼Œå¢å¤§<code>C</code></p>
</blockquote>
</li>
<li><p>ä½¿ç”¨ç°æœ‰çš„ QP è§£å†³æ–¹æ¡ˆï¼Œä½ åº”è¯¥æ€ä¹ˆæ ·è®¾ç½® QP å‚æ•°ï¼ˆ<code>H</code>ï¼Œ<code>f</code>ï¼Œ<code>A</code>ï¼Œå’Œ<code>b</code>ï¼‰å»è§£å†³ä¸€ä¸ªè½¯é—´éš”çº¿æ€§ SVM åˆ†ç±»å™¨é—®é¢˜ï¼Ÿ</p>
<blockquote>
<p>è½¯é—´éš”åˆ†ç±»ï¼š</p>
<script type="math/tex; mode=display">
minimize\  \frac{1}{2} \omega^T\cdot \omega +C\sum_{i=1}^{m}\zeta^{(i)}\\

subject \  to\  t^{(i)}\ w^T\cdot x^{(i)}+b\geq1-\zeta^{(i)}\ \  and \ \ \zeta^{(i)} \geq0 \ \  for \ i=1,2,3,\cdots , m</script><p>QP(äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå³çº¿æ€§çº¦æŸçš„å‡¸äºŒæ¬¡è§„åˆ’ä¼˜åŒ–é—®é¢˜)</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_5/eq-5-5.gif" alt="img"></p>
<p>H æ˜¯ $n_p \times n_p$çš„å•ä½çŸ©é˜µï¼Œå·¦ä¸Šè§’ä¸º0ï¼ˆå¿½ç•¥åç½®å‘ï¼‰</p>
<p>p = $ï¼ˆb,\ \omega_1\ \cdots\ \omega_n)^T$</p>
<p>$f^T\cdot p \ = \     C\cdot max(1-p^T\cdot A_i,0))$</p>
<p>$b_i=1-max(1-p^T\cdot A_i,0)$</p>
<p>$a_i^j=x_j^{(i)}\  \  i=1\cdots n_c;\ j=1\cdots n_p$ ç¬¬iä¸ªå®ä¾‹çš„ç¬¬jä¸ªç‰¹å¾ï¼Œä½†$x^{(i)}$å¸¦ä¸€ä¸ª1çš„åç½®é¡¹ã€‚</p>
</blockquote>
</li>
<li><p>åœ¨ä¸€ä¸ªçº¿æ€§å¯åˆ†çš„æ•°æ®é›†è®­ç»ƒä¸€ä¸ª<code>LinearSVC</code>ï¼Œå¹¶åœ¨åŒä¸€ä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª<code>SVC</code>å’Œ<code>SGDClassifier</code>ï¼Œçœ‹å®ƒä»¬æ˜¯å¦äº§ç”Ÿäº†å¤§è‡´ç›¸åŒæ•ˆæœçš„æ¨¡å‹ã€‚</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>åœ¨ MNIST æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª SVM åˆ†ç±»å™¨ã€‚å› ä¸º SVM åˆ†ç±»å™¨æ˜¯äºŒå…ƒçš„åˆ†ç±»ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€å¯¹å¤šï¼ˆone-versus-allï¼‰æ¥å¯¹ 10 ä¸ªæ•°å­—è¿›è¡Œåˆ†ç±»ã€‚ä½ å¯èƒ½éœ€è¦ä½¿ç”¨å°çš„éªŒè¯é›†æ¥è°ƒæ•´è¶…å‚æ•°ï¼Œä»¥åŠ å¿«è¿›ç¨‹ã€‚æœ€åä½ èƒ½è¾¾åˆ°å¤šå°‘å‡†ç¡®åº¦ï¼Ÿ</p>
</li>
<li><p>åœ¨åŠ åˆ©ç¦å°¼äºšä½å®…ï¼ˆCalifornia housingï¼‰æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ª SVM å›å½’æ¨¡å‹</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬06ç« -å†³ç­–æ ‘"><a href="#ç¬¬06ç« -å†³ç­–æ ‘" class="headerlink" title="ç¬¬06ç«  å†³ç­–æ ‘"></a>ç¬¬06ç«  å†³ç­–æ ‘</h2><p>å†³ç­–æ ‘æ˜¯ä¸€ç§å¤šåŠŸèƒ½æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œ å³å¯ä»¥æ‰§è¡Œåˆ†ç±»ä»»åŠ¡ä¹Ÿå¯ä»¥æ‰§è¡Œå›å½’ä»»åŠ¡ï¼Œ ç”šè‡³åŒ…æ‹¬å¤šè¾“å‡ºï¼ˆmultioutputï¼‰ä»»åŠ¡ã€‚</p>
<h3 id="å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–"><a href="#å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–" class="headerlink" title="å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–"></a>å†³ç­–æ ‘çš„è®­ç»ƒå’Œå¯è§†åŒ–</h3><blockquote>
<p>å†³ç­–æ ‘çš„ä¼—å¤šç‰¹æ€§ä¹‹ä¸€å°±æ˜¯ï¼Œ å®ƒä¸éœ€è¦å¤ªå¤šçš„æ•°æ®é¢„å¤„ç†ï¼Œ å°¤å…¶æ˜¯ä¸éœ€è¦è¿›è¡Œç‰¹å¾çš„ç¼©æ”¾æˆ–è€…å½’ä¸€åŒ–ã€‚</p>
</blockquote>
<ul>
<li>èŠ‚ç‚¹çš„<code>samples</code>å±æ€§ç»Ÿè®¡å‡ºå®ƒåº”ç”¨äºå¤šå°‘ä¸ªè®­ç»ƒæ ·æœ¬å®ä¾‹ã€‚</li>
<li>èŠ‚ç‚¹çš„<code>value</code>å±æ€§ï¼šè¿™ä¸ªèŠ‚ç‚¹å¯¹äºæ¯ä¸€ä¸ªç±»åˆ«çš„æ ·ä¾‹æœ‰å¤šå°‘ä¸ªã€‚</li>
<li>èŠ‚ç‚¹çš„<code>Gini</code>å±æ€§ç”¨äºæµ‹é‡å®ƒçš„çº¯åº¦ï¼šå¦‚æœä¸€ä¸ªèŠ‚ç‚¹åŒ…å«çš„æ‰€æœ‰è®­ç»ƒæ ·ä¾‹å…¨éƒ½æ˜¯åŒä¸€ç±»åˆ«çš„ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ˜¯çº¯çš„ï¼ˆ<code>Gini=0</code>ï¼‰ã€‚</li>
</ul>
<p><strong>Giniåˆ†æ•°$G_i$</strong></p>
<p>$G_i=1-\sum_{k=1}^{n}P_{i,k}^2$</p>
<p>$P_{i,k}$æ˜¯ç¬¬<code>i</code>ä¸ªèŠ‚ç‚¹ä¸­è®­ç»ƒå®ä¾‹ä¸ºçš„<code>k</code>ç±»å®ä¾‹çš„æ¯”ä¾‹ã€‚</p>
<blockquote>
<p>Scikit-Learn ç”¨çš„æ˜¯ CART ç®—æ³•ï¼Œ CART ç®—æ³•ä»…äº§ç”ŸäºŒå‰æ ‘ï¼šæ¯ä¸€ä¸ªéå¶èŠ‚ç‚¹æ€»æ˜¯åªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ˆåªæœ‰æ˜¯æˆ–å¦ä¸¤ä¸ªç»“æœï¼‰ã€‚ç„¶è€Œï¼Œåƒ ID3 è¿™æ ·çš„ç®—æ³•å¯ä»¥äº§ç”Ÿè¶…è¿‡ä¸¤ä¸ªå­èŠ‚ç‚¹çš„å†³ç­–æ ‘æ¨¡å‹ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/102" alt="1528081141956"></p>
<h3 id="ä¼°è®¡åˆ†ç±»æ¦‚ç‡"><a href="#ä¼°è®¡åˆ†ç±»æ¦‚ç‡" class="headerlink" title="ä¼°è®¡åˆ†ç±»æ¦‚ç‡"></a>ä¼°è®¡åˆ†ç±»æ¦‚ç‡</h3><p>å†³ç­–æ ‘è¿˜å¯ä»¥ä¼°è®¡æŸä¸ªå®ä¾‹å±äºç‰¹å®šç±»<code>k</code>çš„æ¦‚ç‡ï¼šé¦–å…ˆéå†æ ‘æ¥æŸ¥æ‰¾æ­¤å®ä¾‹çš„å¶èŠ‚ç‚¹ï¼Œç„¶åå®ƒè¿”å›æ­¤èŠ‚ç‚¹ä¸­ç±»<code>k</code>çš„è®­ç»ƒå®ä¾‹çš„æ¯”ä¾‹ã€‚</p>
<blockquote>
<p>å‡è®¾ä½ å‘ç°äº†ä¸€ä¸ªèŠ±ç“£é•¿ 5 å˜ç±³ï¼Œå®½ 1.5 å˜ç±³çš„èŠ±æœµã€‚ç›¸åº”çš„å¶èŠ‚ç‚¹æ˜¯æ·±åº¦ä¸º 2 çš„å·¦èŠ‚ç‚¹ï¼Œå› æ­¤å†³ç­–æ ‘åº”è¯¥è¾“å‡ºä»¥ä¸‹æ¦‚ç‡ï¼šIris-Setosa ä¸º 0%ï¼ˆ0/54ï¼‰ï¼ŒIris-Versicolor ä¸º 90.7%ï¼ˆ49/54ï¼‰ï¼ŒIris-Virginica ä¸º 9.3%ï¼ˆ5/54ï¼‰ã€‚å½“ç„¶ï¼Œå¦‚æœä½ è¦æ±‚å®ƒé¢„æµ‹å…·ä½“çš„ç±»ï¼Œå®ƒåº”è¯¥è¾“å‡º Iris-Versicolorï¼ˆç±»åˆ« 1ï¼‰ï¼Œå› ä¸ºå®ƒå…·æœ‰æœ€é«˜çš„æ¦‚ç‡ã€‚</p>
</blockquote>
<h3 id="CARTè®­ç»ƒç®—æ³•"><a href="#CARTè®­ç»ƒç®—æ³•" class="headerlink" title="CARTè®­ç»ƒç®—æ³•"></a>CARTè®­ç»ƒç®—æ³•</h3><p>Scikit-Learn ç”¨<strong>åˆ†è£‚å›å½’æ ‘ï¼ˆClassification And Regression Treeï¼Œç®€ç§° CARTï¼‰ç®—æ³•è®­ç»ƒå†³ç­–æ ‘ï¼ˆä¹Ÿå«â€œå¢é•¿æ ‘â€ï¼‰</strong>ã€‚</p>
<p>é¦–å…ˆä½¿ç”¨å•ä¸ªç‰¹å¾<code>k</code>å’Œé˜ˆå€¼ $t_k$ ä¾‹å¦‚ï¼Œï¼ˆâ€œèŠ±ç“£é•¿åº¦<code>â‰¤2.45cm</code>â€ï¼‰å°†è®­ç»ƒé›†åˆ†æˆä¸¤ä¸ªå­é›†ã€‚å®ƒå¦‚ä½•é€‰æ‹©<code>k</code>å’Œ $t_k$ ï¼Ÿå®ƒå¯»æ‰¾åˆ°èƒ½å¤Ÿäº§ç”Ÿæœ€çº¯ç²¹å­é›†çš„ä¸€å¯¹ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-32cb6265eb19ce4be37ecf6650ff766a.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-32cb6265eb19ce4be37ecf6650ff766a.gif" alt="(k, t_k)"></a>ï¼Œç„¶åé€šè¿‡å­é›†å¤§å°åŠ æƒè®¡ç®—ã€‚</p>
<p>ç®—æ³•ä¼šå°è¯•æœ€å°åŒ–æˆæœ¬å‡½æ•°ï¼š</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/104" alt="1528086977613"></p>
<blockquote>
<p>CART ç®—æ³•æ˜¯ä¸€ç§è´ªå©ªç®—æ³•ï¼šè´ªå©ªåœ°æœç´¢æœ€é«˜çº§åˆ«çš„æœ€ä½³åˆ†å‰²æ–¹å¼ï¼Œç„¶ååœ¨æ¯ä¸ªæ·±åº¦é‡å¤è¯¥è¿‡ç¨‹ã€‚ </p>
<p>ä¸æ£€æŸ¥åˆ†å‰²æ˜¯å¦èƒ½å¤Ÿåœ¨å‡ ä¸ªçº§åˆ«ä¸­çš„å…¨éƒ¨åˆ†å‰²å¯èƒ½ä¸­æ‰¾åˆ°æœ€ä½³æ–¹æ³•ã€‚</p>
<p>è´ªå©ªç®—æ³•é€šå¸¸ä¼šäº§ç”Ÿä¸€ä¸ªç›¸å½“å¥½çš„è§£å†³æ–¹æ³•ï¼Œä½†å®ƒä¸ä¿è¯è¿™æ˜¯å…¨å±€ä¸­çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h4 id="NPå®Œå…¨é—®é¢˜"><a href="#NPå®Œå…¨é—®é¢˜" class="headerlink" title="NPå®Œå…¨é—®é¢˜"></a>NPå®Œå…¨é—®é¢˜</h4><p>å¯»æ‰¾æœ€ä½³çš„å†³ç­–æ ‘æ˜¯NPå®Œæˆé—®é¢˜(<code>Non-deterministic Polynomial</code>ï¼Œå³å¤šé¡¹å¼å¤æ‚ç¨‹åº¦çš„éç¡®å®šæ€§é—®é¢˜)ï¼Œä¹Ÿä¼šç®€ç§°ä¸ºNP-Cé—®é¢˜ã€‚</p>
<p>å†³ç­–æ ‘çš„è¿™ä¸€ç‰¹ç‚¹ï¼Œè¯´æ˜æ— æ³•åˆ©ç”¨è®¡ç®—æœºåœ¨å¤šé¡¹å¼æ—¶é—´å†…ï¼Œæ‰¾å‡ºå…¨å±€æœ€ä¼˜çš„è§£ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œå¤§å¤šæ•°å†³ç­–æ ‘ç®—æ³•éƒ½é‡‡ç”¨å¯å‘å¼çš„ç®—æ³•ï¼Œå¦‚&amp;<strong>è´ªå¿ƒç®—æ³•</strong>ï¼Œæ¥æŒ‡å¯¼å¯¹å‡è®¾ç©ºé—´çš„æœç´¢ã€‚å¯ä»¥è¯´ï¼Œå†³ç­–æ ‘æœ€åçš„ç»“æœï¼Œæ˜¯åœ¨æ¯ä¸€æ­¥ã€æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šåšçš„å±€éƒ¨æœ€ä¼˜é€‰æ‹©ã€‚å†³ç­–æ ‘å¾—åˆ°çš„ç»“æœï¼Œæ— æ³•ä¿è¯æ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚</p>
<h5 id="Pç±»é—®é¢˜"><a href="#Pç±»é—®é¢˜" class="headerlink" title="Pç±»é—®é¢˜"></a>Pç±»é—®é¢˜</h5><blockquote>
<p> æ‰€æœ‰å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£çš„åˆ¤å®šé—®é¢˜æ„æˆ<strong>Pç±»é—®é¢˜</strong></p>
</blockquote>
<p><strong>åˆ¤å®šé—®é¢˜</strong>æ˜¯æŒ‡å›ç­”ç»“æœè¾“å‡ºä¸º<code>Yes</code>æˆ–<code>No</code>çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š3233æ˜¯å¦å¯ä»¥å†™æˆä¸¤ä¸ªå¤§äº1çš„æ•°å­—çš„ä¹˜ç§¯ï¼Ÿ</p>
<p>åœ¨è®¾è®¡ç¨‹åºæ—¶ï¼Œéœ€è¦è¯„ä¼°è¿™ä¸ªç¨‹åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå³è¡¡é‡å½“é—®é¢˜è§„æ¨¡å˜å¤§åï¼Œç¨‹åºæ‰§è¡Œæ‰€éœ€çš„æ—¶é—´å¢é•¿ä¼šæœ‰å¤šå¿«ã€‚å¦‚$O(1)$è¡¨ç¤ºå¸¸æ•°çº§åˆ«ï¼Œå³ä¸ç®¡é—®é¢˜çš„è§„æ¨¡å˜å¤§å¤šå°‘å€ï¼Œæ‰€è€—çš„æ—¶é—´ä¸ä¼šæ”¹å˜ï¼›$O(N^2)$è¡¨ç¤ºå¹³æ–¹çº§åˆ«ï¼Œå³å½“é—®é¢˜è§„æ¨¡å¢å¤§è‡³2å€æ—¶ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´åˆ™æ”¾å¤§è‡³4å€ï¼›$O(2^N)$è¡¨ç¤ºæŒ‡æ•°çº§åˆ«ï¼Œå³å½“é—®é¢˜è§„æ¨¡å€æ•°æ‰©å¤§æ—¶ï¼Œæ‰€ç”¨æ—¶é—´ä¼šå‘ˆæŒ‡æ•°æ”¾å¤§ã€‚</p>
<p><strong>å¤šé¡¹å¼æ—¶é—´</strong>åˆ™æ˜¯æŒ‡$O(1)ã€O(logN)ã€O(N^2)$ç­‰è¿™ç±»å¯ç”¨å¤šé¡¹å¼è¡¨ç¤ºçš„æ—¶é—´å¤æ‚åº¦ï¼Œé€šå¸¸è®¤ä¸ºè®¡ç®—æœºå¯è§£å†³çš„é—®é¢˜åªé™äºå¤šé¡¹å¼æ—¶é—´å†…ã€‚è€Œ$O(2^N)ã€O(N!)$è¿™ç±»éå¤šé¡¹å¼çº§åˆ«çš„é—®é¢˜ï¼Œå…¶å¤æ‚åº¦å¾€å¾€å·²ç»åˆ°äº†è®¡ç®—æœºéƒ½æ¥å—ä¸äº†çš„ç¨‹åº¦ã€‚</p>
<h5 id="NPç±»é—®é¢˜"><a href="#NPç±»é—®é¢˜" class="headerlink" title="NPç±»é—®é¢˜"></a>NPç±»é—®é¢˜</h5><blockquote>
<p>æ‰€æœ‰éç¡®å®šæ€§å¤šé¡¹å¼æ—¶é—´å†…å¯è§£çš„åˆ¤å®šé—®é¢˜æ„æˆ<strong>NPç±»é—®é¢˜</strong></p>
</blockquote>
<p>NPç±»é—®é¢˜å°†é—®é¢˜åˆ†ä¸ºæ±‚è§£å’ŒéªŒè¯ä¸¤ä¸ªé˜¶æ®µï¼Œé—®é¢˜çš„æ±‚è§£æ˜¯éç¡®å®šæ€§çš„ï¼Œæ— æ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¾—åˆ°ç­”æ¡ˆï¼Œè€Œé—®é¢˜çš„éªŒè¯å´æ˜¯ç¡®å®šçš„ï¼Œèƒ½å¤Ÿåœ¨å¤šé¡¹å¼æ—¶é—´é‡Œç¡®å®šç»“æœã€‚</p>
<p>æ¯”å¦‚ï¼šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå…¬å¼å¯ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªè´¨æ•°æ˜¯å¤šå°‘ï¼Ÿè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆç›®å‰æ˜¯æ— æ³•ç›´æ¥è®¡ç®—å‡ºæ¥çš„ï¼Œä½†æ˜¯å¦‚æœæŸäººç»™å‡ºäº†ä¸€ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å´å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´é‡Œå¯¹è¿™ä¸ªå…¬å¼è¿›è¡ŒéªŒè¯ã€‚</p>
<h5 id="NPå®Œå…¨é—®é¢˜-1"><a href="#NPå®Œå…¨é—®é¢˜-1" class="headerlink" title="NPå®Œå…¨é—®é¢˜"></a>NPå®Œå…¨é—®é¢˜</h5><blockquote>
<p>NPç±»é—®é¢˜çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œè¿™ç±»é—®é¢˜ä¸­æ¯ä¸ªé—®é¢˜çš„å¤æ‚åº¦ä¸æ•´ä¸ªç±»çš„å¤æ‚åº¦æœ‰å…³è”æ€§ï¼Œå‡å¦‚å…¶ä¸­ä»»æ„ä¸€ä¸ªé—®é¢˜åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¯è§£çš„ï¼Œåˆ™è¿™ä¸€ç±»é—®é¢˜éƒ½æ˜¯å¤šé¡¹å¼æ—¶é—´å¯è§£ã€‚è¿™äº›é—®é¢˜è¢«ç§°ä¸º<strong>NPå®Œå…¨é—®é¢˜</strong>ã€‚</p>
</blockquote>
<p>æ€»ç»“è¿™å‡ ç±»é—®é¢˜çš„ç‰¹ç‚¹ï¼Œå¯å‚è€ƒå¦‚ä¸‹è¿™ä¸ªè¡¨æ ¼ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>é—®é¢˜ç±»å‹</th>
<th>æ˜¯å¦èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£</th>
<th>æ˜¯å¦èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…éªŒè¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>P</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>NP</td>
<td>æ˜¯ or å¦</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>NP-C</td>
<td>æœªçŸ¥</td>
<td>æ˜¯</td>
</tr>
</tbody>
</table>
</div>
<p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/dcb0b52f4935" target="_blank" rel="noopener">https://www.jianshu.com/p/dcb0b52f4935</a></p>
<h3 id="è®¡ç®—å¤æ‚åº¦"><a href="#è®¡ç®—å¤æ‚åº¦" class="headerlink" title="è®¡ç®—å¤æ‚åº¦"></a>è®¡ç®—å¤æ‚åº¦</h3><p>å»ºç«‹å¥½å†³ç­–æ ‘æ¨¡å‹åï¼Œ åšå‡º<strong>é¢„æµ‹</strong>éœ€è¦éå†å†³ç­–æ ‘ï¼Œ ä»æ ¹èŠ‚ç‚¹ä¸€ç›´åˆ°å¶èŠ‚ç‚¹ã€‚å†³ç­–æ ‘é€šå¸¸è¿‘ä¼¼å·¦å³å¹³è¡¡ï¼Œå› æ­¤éå†å†³ç­–æ ‘éœ€è¦ç»å†å¤§è‡´  $O(log_2m)$ä¸ªèŠ‚ç‚¹ã€‚ç”±äºæ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦æ£€æŸ¥ä¸€ä¸ªç‰¹å¾çš„å€¼ï¼Œå› æ­¤æ€»ä½“é¢„æµ‹å¤æ‚åº¦ä»…ä¸º $O(log_2m)$ï¼Œä¸ç‰¹å¾çš„æ•°é‡æ— å…³ã€‚</p>
<p><strong>è®­ç»ƒ</strong>ç®—æ³•çš„æ—¶å€™ï¼ˆè®­ç»ƒå’Œé¢„æµ‹ä¸åŒï¼‰éœ€è¦æ¯”è¾ƒæ‰€æœ‰ç‰¹å¾ï¼ˆå¦‚æœè®¾ç½®äº†<code>max_features</code>ä¼šæ›´å°‘ä¸€äº›ï¼‰åœ¨æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰æ ·æœ¬ä¸Šã€‚è®­ç»ƒå¤æ‚åº¦ä¸º$O(nmlog_m)$</p>
<h3 id="åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ"><a href="#åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ" class="headerlink" title="åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ"></a>åŸºå°¼ä¸çº¯åº¦å’Œä¿¡æ¯ç†µ</h3><p>é»˜è®¤ç®—æ³•ä½¿ç”¨ Gini ä¸çº¯åº¦æ¥è¿›è¡Œæ£€æµ‹ï¼Œ ä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡å°†æ ‡å‡†è¶…å‚æ•°è®¾ç½®ä¸º<code>&quot;entropy&quot;</code>æ¥ä½¿ç”¨ç†µä¸çº¯åº¦è¿›è¡Œæ£€æµ‹ã€‚</p>
<p><strong>ç†µçš„è®¡ç®—ï¼š</strong></p>
<script type="math/tex; mode=display">
H_i=-\sum_{k=1\ P_{i,k=!0}}^n{P_{i,k}}log(p_{i,k})</script><p>ç†µçš„å‡å°‘é€šå¸¸ç§°ä¸º<strong>ä¿¡æ¯å¢ç›Š</strong></p>
<blockquote>
<p>åŸºå°¼æŒ‡æ•°è®¡ç®—ç¨å¾®å¿«ä¸€ç‚¹ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é»˜è®¤å€¼ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¹Ÿæœ‰çš„æ—¶å€™å®ƒä»¬ä¼šäº§ç”Ÿä¸åŒçš„æ ‘ï¼ŒåŸºå°¼æŒ‡æ•°ä¼šè¶‹äºåœ¨æ ‘çš„åˆ†æ”¯ä¸­å°†æœ€å¤šçš„ç±»éš”ç¦»å‡ºæ¥ï¼Œè€Œç†µæŒ‡æ•°è¶‹å‘äºäº§ç”Ÿç•¥å¾®å¹³è¡¡ä¸€äº›çš„å†³ç­–æ ‘æ¨¡å‹ã€‚</p>
</blockquote>
<h3 id="æ­£åˆ™åŒ–è¶…å‚æ•°"><a href="#æ­£åˆ™åŒ–è¶…å‚æ•°" class="headerlink" title="æ­£åˆ™åŒ–è¶…å‚æ•°"></a>æ­£åˆ™åŒ–è¶…å‚æ•°</h3><p>å†³ç­–æ ‘å‡ ä¹ä¸å¯¹è®­ç»ƒæ•°æ®åšä»»ä½•å‡è®¾ï¼ˆäºæ­¤ç›¸åçš„æ˜¯çº¿æ€§å›å½’ç­‰æ¨¡å‹ï¼Œè¿™ç±»æ¨¡å‹é€šå¸¸ä¼šå‡è®¾æ•°æ®æ˜¯ç¬¦åˆçº¿æ€§å…³ç³»çš„ï¼‰ã€‚è¿™ä¸€ç±»çš„æ¨¡å‹é€šå¸¸ä¼šè¢«ç§°ä¸º<strong>éå‚æ•°æ¨¡å‹&amp;</strong>ï¼Œè¿™ä¸æ˜¯å› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ï¼ˆé€šå¸¸ä¹Ÿæœ‰å¾ˆå¤šï¼‰ï¼Œè€Œæ˜¯å› ä¸º<strong>åœ¨è®­ç»ƒä¹‹å‰æ²¡æœ‰ç¡®å®šå‚æ•°çš„å…·ä½“æ•°é‡ï¼Œæ‰€ä»¥æ¨¡å‹ç»“æ„å¯ä»¥æ ¹æ®æ•°æ®çš„ç‰¹æ€§è‡ªç”±ç”Ÿé•¿ã€‚</strong></p>
<p>å¦‚æœä¸æ·»åŠ çº¦æŸï¼Œæ ‘ç»“æ„æ¨¡å‹é€šå¸¸å°†æ ¹æ®è®­ç»ƒæ•°æ®è°ƒæ•´è‡ªå·±ï¼Œä½¿è‡ªèº«èƒ½å¤Ÿå¾ˆå¥½çš„æ‹Ÿåˆæ•°æ®ï¼Œè€Œè¿™ç§æƒ…å†µä¸‹å¤§å¤šæ•°ä¼šå¯¼è‡´<strong>æ¨¡å‹è¿‡æ‹Ÿåˆ</strong>ã€‚</p>
<blockquote>
<p><strong><code>DecisionTreeClassifier</code>ç±»è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‚æ•°ç”¨äºé™åˆ¶æ ‘æ¨¡å‹çš„å½¢çŠ¶:</strong></p>
<p><code>min_samples_split</code>ï¼ˆèŠ‚ç‚¹åœ¨è¢«åˆ†è£‚ä¹‹å‰å¿…é¡»å…·æœ‰çš„æœ€å°æ ·æœ¬æ•°ï¼‰</p>
<p><code>min_samples_leaf</code>ï¼ˆå¶èŠ‚ç‚¹å¿…é¡»å…·æœ‰çš„æœ€å°æ ·æœ¬æ•°ï¼‰ï¼Œ<code>min_weight_fraction_leaf</code>ï¼ˆå’Œ<code>min_samples_leaf</code>ç›¸åŒï¼Œä½†è¡¨ç¤ºä¸ºåŠ æƒæ€»æ•°çš„ä¸€å°éƒ¨åˆ†å®ä¾‹ï¼‰</p>
<p><code>max_leaf_nodes</code>ï¼ˆå¶èŠ‚ç‚¹çš„æœ€å¤§æ•°é‡ï¼‰</p>
<p><code>max_features</code>ï¼ˆåœ¨æ¯ä¸ªèŠ‚ç‚¹è¢«è¯„ä¼°æ˜¯å¦åˆ†è£‚çš„æ—¶å€™ï¼Œå…·æœ‰çš„æœ€å¤§ç‰¹å¾æ•°é‡ï¼‰</p>
<p>å¢åŠ <code>min_* hyperparameters</code>æˆ–è€…å‡å°‘<code>max_* hyperparameters</code>ä¼šä½¿æ¨¡å‹æ­£åˆ™åŒ–ã€‚</p>
<p><strong>å‰ªæ</strong></p>
<p>åœ¨æ²¡æœ‰ä»»ä½•çº¦æŸæ¡ä»¶ä¸‹è®­ç»ƒå†³ç­–æ ‘æ¨¡å‹ï¼Œè®©æ¨¡å‹è‡ªç”±ç”Ÿé•¿ï¼Œç„¶åå†å¯¹ä¸éœ€è¦çš„èŠ‚ç‚¹è¿›è¡Œå‰ªæã€‚</p>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹çš„å…¨éƒ¨å­èŠ‚ç‚¹éƒ½æ˜¯å¶èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœå®ƒå¯¹çº¯åº¦çš„æå‡ä¸å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªåˆ†æ”¯æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<p>æ ‡å‡†çš„å‡è®¾æ£€éªŒï¼Œä¾‹å¦‚å¡æ–¹æ£€æµ‹ï¼Œé€šå¸¸ä¼šè¢«ç”¨äºè¯„ä¼°ä¸€ä¸ªæ¦‚ç‡å€¼ â€” å³æ”¹è¿›æ˜¯å¦çº¯ç²¹æ˜¯å¶ç„¶æ€§çš„ç»“æœï¼ˆä¹Ÿå«åŸå‡è®¾ï¼‰</p>
<p>å¦‚æœ p å€¼æ¯”ç»™å®šçš„é˜ˆå€¼æ›´é«˜ï¼ˆé€šå¸¸è®¾å®šä¸º 5%ï¼Œä¹Ÿå°±æ˜¯ 95% ç½®ä¿¡åº¦ï¼Œé€šè¿‡è¶…å‚æ•°è®¾ç½®ï¼‰ï¼Œé‚£ä¹ˆèŠ‚ç‚¹å°±è¢«è®¤ä¸ºæ˜¯éå¿…è¦çš„ï¼Œå®ƒçš„å­èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ã€‚</p>
<p>è¿™ç§å‰ªææ–¹å¼å°†ä¼šä¸€ç›´è¿›è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„éå¿…è¦èŠ‚ç‚¹éƒ½è¢«åˆ å…‰ã€‚</p>
</blockquote>
<h3 id="å›å½’"><a href="#å›å½’" class="headerlink" title="å›å½’"></a>å›å½’</h3><p>Scikit-Learn çš„<code>DecisionTreeRegressor</code>ç±»æ„å»ºå›å½’æ ‘ï¼Œä¸å†ä»¥æœ€å°åŒ–ä¸çº¯åº¦çš„æ–¹å¼åˆ†å‰²è®­ç»ƒé›†ï¼Œè€Œæ˜¯è¯•å›¾ä»¥æœ€å°åŒ– MSE çš„æ–¹å¼åˆ†å‰²è®­ç»ƒé›†ã€‚</p>
<blockquote>
<p> æ¯ä¸ªåŒºåŸŸçš„é¢„æµ‹å€¼æ€»æ˜¯è¯¥åŒºåŸŸä¸­å®ä¾‹çš„å¹³å‡ç›®æ ‡å€¼ã€‚</p>
</blockquote>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_6/108" alt="1528375227547"></p>
<h3 id="ä¸ç¨³å®šæ€§"><a href="#ä¸ç¨³å®šæ€§" class="headerlink" title="ä¸ç¨³å®šæ€§"></a>ä¸ç¨³å®šæ€§</h3><p>å†³ç­–æ ‘çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li><p>å®¹æ˜“ç†è§£å’Œè§£é‡Šï¼Œæ˜“äºä½¿ç”¨ä¸”åŠŸèƒ½ä¸°å¯Œè€Œå¼ºå¤§ã€‚</p>
</li>
<li><p>å†³ç­–æ ‘å¾ˆå–œæ¬¢è®¾å®šæ­£äº¤åŒ–çš„å†³ç­–è¾¹ç•Œï¼Œï¼ˆæ‰€æœ‰è¾¹ç•Œéƒ½æ˜¯å’ŒæŸä¸€ä¸ªè½´ç›¸å‚ç›´çš„ï¼‰ï¼Œè¿™ä½¿å¾—å®ƒå¯¹è®­ç»ƒæ•°æ®é›†çš„æ—‹è½¬å¾ˆæ•æ„Ÿã€‚</p>
<blockquote>
<p>è§£å†³åŠæ³•ï¼šä¸»æˆåˆ†åˆ†æPCA</p>
</blockquote>
</li>
<li><p>å†³ç­–æ—¶çš„ä¸»è¦é—®é¢˜æ˜¯å®ƒå¯¹è®­ç»ƒæ•°æ®çš„å¾®å°å˜åŒ–éå¸¸æ•æ„Ÿ</p>
</li>
</ol>
<h3 id="exercise"><a href="#exercise" class="headerlink" title="exercise"></a>exercise</h3><ol>
<li><p>åœ¨ 100 ä¸‡ä¾‹è®­ç»ƒé›†ä¸Šè®­ç»ƒï¼ˆæ²¡æœ‰é™åˆ¶ï¼‰çš„å†³ç­–æ ‘çš„è¿‘ä¼¼æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<blockquote>
<p>$log_2(m)$ï¼Œm=100ä¸‡æ—¶ï¼Œè¯¥å€¼å¤§çº¦ä¸º20</p>
</blockquote>
</li>
<li><p>èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°æ¯”èµ·å®ƒçš„çˆ¶èŠ‚ç‚¹æ˜¯æ›´é«˜è¿˜æ˜¯æ›´ä½ï¼Ÿå®ƒæ˜¯é€šå¸¸æƒ…å†µä¸‹æ›´é«˜/æ›´ä½ï¼Œè¿˜æ˜¯æ°¸è¿œæ›´é«˜/æ›´ä½ï¼Ÿ</p>
<blockquote>
<p>èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°é€šå¸¸ä½äºå…¶çˆ¶èŠ‚ç‚¹ï¼Œè¿™æ˜¯ç”±CARTæ•°çš„è®­ç»ƒæŸå¤±å‡½æ•°æ‰€ç¡®å®šçš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»è¿‡æœ€ä¼˜å±æ€§åˆ†å‰²ä¹‹åï¼Œå­èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°ä¹‹å’Œéƒ½ä¼šå°äºçˆ¶èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°ï¼Œç„¶è€Œå¦‚æœä¸€ä¸ªå­©å­èŠ‚ç‚¹çš„åŸºå°¼æŒ‡æ•°æ¯”å¦å¤–ä¸€ä¸ªçš„åŸºå°¼æŒ‡æ•°å°ï¼Œåˆ™å¯èƒ½æ¯”å…¶çˆ¶èŠ‚ç‚¹çš„åŸºå°¼ä¸çº¯åº¦æ›´å¤§ï¼Œä½†æ˜¯å…¶åŸºå°¼ä¸çº¯åº¦çš„å¢åŠ è‚¯å®šå°äºå¦å¤–å­©å­åŸºå°¼ä¸çº¯åº¦çš„å‡å°‘ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœå†³ç­–æ ‘è¿‡æ‹Ÿåˆäº†ï¼Œå‡å°‘æœ€å¤§æ·±åº¦æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ³•å—ï¼Ÿ</p>
<blockquote>
<p>æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå¯ä»¥å¯¹æ¨¡å‹è¿›è¡Œçº¦æŸï¼Œä½¿å…¶è§„èŒƒåŒ–</p>
</blockquote>
</li>
<li><p>å¦‚æœå†³ç­–æ ‘å¯¹è®­ç»ƒé›†æ¬ æ‹Ÿåˆäº†ï¼Œå°è¯•ç¼©æ”¾è¾“å…¥ç‰¹å¾æ˜¯å¦æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Ÿ</p>
<blockquote>
<p>ä¸æ˜¯ï¼Œå› ä¸ºå†³ç­–æ ‘å¯¹äºæ•°æ®çš„ç¼©æ”¾å¹¶ä¸æ•æ„Ÿ</p>
</blockquote>
</li>
<li><p>å¦‚æœå¯¹åŒ…å« 100 ä¸‡ä¸ªå®ä¾‹çš„æ•°æ®é›†è®­ç»ƒå†³ç­–æ ‘æ¨¡å‹éœ€è¦ä¸€ä¸ªå°æ—¶ï¼Œåœ¨åŒ…å« 1000 ä¸‡ä¸ªå®ä¾‹çš„åŸ¹è®­é›†ä¸Šè®­ç»ƒå¦ä¸€ä¸ªå†³ç­–æ ‘å¤§æ¦‚éœ€è¦å¤šå°‘æ—¶é—´å‘¢ï¼Ÿ</p>
<blockquote>
<p>è®­ç»ƒå¤æ‚åº¦$O(n\times m \log(m))$ï¼Œå¦‚æœå®ä¾‹må¢åŠ 10å€ï¼Œåˆ™å¤æ‚åº¦å˜ä¸º$10\times\log(10m)/\log(m)$ å€ï¼Œm=100ä¸‡æ—¶ï¼Œè¯¥å€¼ä¸º11.7ï¼Œæ‰€ä»¥éœ€è¦11.7ä¸ªå°æ—¶</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„è®­ç»ƒé›†åŒ…å« 100,000 ä¸ªå®ä¾‹ï¼Œè®¾ç½®<code>presort=True</code>ä¼šåŠ å¿«è®­ç»ƒçš„é€Ÿåº¦å—ï¼Ÿ</p>
<blockquote>
<p>åªæœ‰å½“æ•°æ®é›†å°äºå‡ åƒæ—¶ï¼Œæ‰ä¼šåŠ é€Ÿè®­ç»ƒå®ä¾‹ã€‚å¦‚æœå®ƒåŒ…å«100,000ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆè®¾ç½®presort=Trueçš„è®­ç»ƒå°†ä¼šæ…¢å¾—å¤šã€‚</p>
</blockquote>
</li>
<li><p>å¯¹<code>moons</code>æ•°æ®é›†è¿›è¡Œå†³ç­–æ ‘è®­ç»ƒå¹¶ä¼˜åŒ–æ¨¡å‹ã€‚</p>
<ol>
<li><p>é€šè¿‡è¯­å¥<code>make_moons(n_samples=10000, noise=0.4)</code>ç”Ÿæˆ<code>moons</code>æ•°æ®é›†</p>
</li>
<li><p>é€šè¿‡<code>train_test_split()</code>å°†æ•°æ®é›†åˆ†å‰²ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚</p>
</li>
<li><p>è¿›è¡Œäº¤å‰éªŒè¯ï¼Œå¹¶ä½¿ç”¨ç½‘æ ¼æœç´¢æ³•å¯»æ‰¾æœ€å¥½çš„è¶…å‚æ•°å€¼ï¼ˆä½¿ç”¨<code>GridSearchCV</code>ç±»çš„å¸®åŠ©æ–‡æ¡£ï¼‰</p>
<p>æç¤º: å°è¯•å„ç§å„æ ·çš„<code>max_leaf_nodes</code>å€¼</p>
</li>
<li><p>ä½¿ç”¨è¿™äº›è¶…å‚æ•°è®­ç»ƒå…¨éƒ¨çš„è®­ç»ƒé›†æ•°æ®ï¼Œå¹¶åœ¨æµ‹è¯•é›†ä¸Šæµ‹é‡æ¨¡å‹çš„è¡¨ç°ã€‚ä½ åº”è¯¥è·å¾—å¤§çº¦ 85% åˆ° 87% çš„å‡†ç¡®åº¦ã€‚</p>
</li>
</ol>
</li>
<li><p>ç”Ÿæˆæ£®æ—</p>
<ol>
<li>æ¥ç€å‰è¾¹çš„ç»ƒä¹ ï¼Œç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”Ÿæˆ 1,000 ä¸ªè®­ç»ƒé›†çš„å­é›†ï¼Œæ¯ä¸ªå­é›†åŒ…å« 100 ä¸ªéšæœºé€‰æ‹©çš„å®ä¾‹ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨ Scikit-Learn çš„<code>ShuffleSplit</code>ç±»ã€‚</li>
<li>ä½¿ç”¨ä¸Šé¢æ‰¾åˆ°çš„æœ€ä½³è¶…å‚æ•°å€¼ï¼Œåœ¨æ¯ä¸ªå­é›†ä¸Šè®­ç»ƒä¸€ä¸ªå†³ç­–æ ‘ã€‚åœ¨æµ‹è¯•é›†ä¸Šæµ‹è¯•è¿™ 1000 ä¸ªå†³ç­–æ ‘ã€‚ç”±äºå®ƒä»¬æ˜¯åœ¨è¾ƒå°çš„é›†åˆä¸Šè¿›è¡Œäº†è®­ç»ƒï¼Œå› æ­¤è¿™äº›å†³ç­–æ ‘å¯èƒ½ä¼šæ¯”ç¬¬ä¸€ä¸ªå†³ç­–æ ‘æ•ˆæœæ›´å·®ï¼Œåªèƒ½è¾¾åˆ°çº¦ 80% çš„å‡†ç¡®åº¦ã€‚</li>
<li>è§è¯å¥‡è¿¹çš„æ—¶åˆ»åˆ°äº†ï¼å¯¹äºæ¯ä¸ªæµ‹è¯•é›†å®ä¾‹ï¼Œç”Ÿæˆ 1,000 ä¸ªå†³ç­–æ ‘çš„é¢„æµ‹ç»“æœï¼Œç„¶ååªä¿ç•™å‡ºç°æ¬¡æ•°æœ€å¤šçš„é¢„æµ‹ç»“æœï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ SciPy çš„<code>mode()</code>å‡½æ•°ï¼‰ã€‚è¿™ä¸ªå‡½æ•°ä½¿ä½ å¯ä»¥å¯¹æµ‹è¯•é›†è¿›è¡Œå¤šæ•°æŠ•ç¥¨é¢„æµ‹ã€‚</li>
<li>åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°è¿™äº›é¢„æµ‹ç»“æœï¼Œä½ åº”è¯¥è·å¾—äº†ä¸€ä¸ªæ¯”ç¬¬ä¸€ä¸ªæ¨¡å‹é«˜ä¸€ç‚¹çš„å‡†ç¡®ç‡ï¼Œï¼ˆå¤§çº¦ 0.5% åˆ° 1.5%ï¼‰ï¼Œæ­å–œï¼Œä½ å·²ç»å¼„å‡ºäº†ä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨æ¨¡å‹!</li>
</ol>
</li>
</ol>
<h2 id="ç¬¬07ç« -é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—"><a href="#ç¬¬07ç« -é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—" class="headerlink" title="ç¬¬07ç«  é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—"></a>ç¬¬07ç«  é›†æˆå­¦ä¹ å’Œéšæœºæ£®æ—</h2><p>åˆå¹¶äº†ä¸€ç»„åˆ†ç±»å™¨çš„é¢„æµ‹ï¼ˆåƒåˆ†ç±»æˆ–è€…å›å½’ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªæ¯”å•ä¸€åˆ†ç±»å™¨æ›´å¥½çš„é¢„æµ‹ç»“æœã€‚è¿™ä¸€ç»„åˆ†ç±»å™¨å°±å«åš<strong>é›†æˆ</strong>ï¼›å› æ­¤ï¼Œè¿™ä¸ªæŠ€æœ¯å°±å«åš<strong>é›†æˆå­¦ä¹ </strong>ï¼Œä¸€ä¸ªé›†æˆå­¦ä¹ ç®—æ³•å°±å«åš<strong>é›†æˆæ–¹æ³•</strong>ã€‚ä¸€ç§å†³ç­–æ ‘çš„é›†æˆå°±å«åš<strong>éšæœºæ£®æ—</strong>ã€‚</p>
<p>å³ä½¿æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½æ˜¯ä¸€ä¸ª<strong>å¼±å­¦ä¹ å™¨</strong>ï¼ˆæ„å‘³ç€å®ƒä»¬ä¹Ÿå°±æ¯”ççŒœå¥½ç‚¹ï¼‰ï¼Œé›†æˆåä»ç„¶æ˜¯ä¸€ä¸ª<strong>å¼ºå­¦ä¹ å™¨</strong>ï¼ˆé«˜å‡†ç¡®ç‡ï¼‰ï¼Œåªè¦æœ‰è¶³å¤Ÿæ•°é‡çš„å¼±å­¦ä¹ è€…ï¼Œä»–ä»¬å°±è¶³å¤Ÿå¤šæ ·åŒ–ã€‚</p>
<h3 id="æŠ•ç¥¨åˆ†ç±»"><a href="#æŠ•ç¥¨åˆ†ç±»" class="headerlink" title="æŠ•ç¥¨åˆ†ç±»"></a>æŠ•ç¥¨åˆ†ç±»</h3><p>ä¸€ä¸ªéå¸¸ç®€å•å»åˆ›å»ºä¸€ä¸ªæ›´å¥½çš„åˆ†ç±»å™¨çš„æ–¹æ³•å°±æ˜¯å»æ•´åˆæ¯ä¸€ä¸ªåˆ†ç±»å™¨çš„é¢„æµ‹ç„¶åç»è¿‡æŠ•ç¥¨å»é¢„æµ‹åˆ†ç±»ã€‚è¿™ç§åˆ†ç±»å™¨å°±å«åš<strong>ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨</strong></p>
<blockquote>
<p>æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½åœ¨åŒä¸€ä¸ªæ•°æ®é›†ä¸Šè®­ç»ƒï¼Œå¯¼è‡´å…¶å¾ˆå¯èƒ½ä¼šå‘ç”Ÿè¿™æ ·çš„é”™è¯¯ã€‚ä»–ä»¬å¯èƒ½ä¼šçŠ¯åŒä¸€ç§é”™è¯¯ï¼Œæ‰€ä»¥ä¹Ÿä¼šæœ‰å¾ˆå¤šç¥¨æŠ•ç»™äº†é”™è¯¯ç±»åˆ«å¯¼è‡´é›†æˆçš„å‡†ç¡®ç‡ä¸‹é™ã€‚</p>
</blockquote>
<p>æ‰€ä»¥åº”è¯¥ç”¨å®Œå…¨ä¸åŒçš„ç®—æ³•å¾—åˆ°å¤šæ ·çš„åˆ†ç±»å™¨ï¼Œä½¿å®ƒä»¬ä¼šåšå‡ºä¸åŒç§ç±»çš„é”™è¯¯ï¼Œæé«˜é›†æˆçš„æ­£ç¡®ç‡ã€‚</p>
<p>å¦‚æœæ‰€æœ‰çš„åˆ†ç±»å™¨éƒ½èƒ½å¤Ÿé¢„æµ‹ç±»åˆ«çš„æ¦‚ç‡ï¼ˆæœ‰ä¸€ä¸ª<code>predict_proba()</code>æ–¹æ³•ï¼‰ï¼Œå¯ä»¥è®© sklearn ä»¥æœ€é«˜çš„ç±»æ¦‚ç‡æ¥é¢„æµ‹è¿™ä¸ªç±»ï¼Œå¹³å‡åœ¨æ‰€æœ‰çš„åˆ†ç±»å™¨ä¸Šã€‚è¿™ç§æ–¹å¼å«åš<strong>è½¯æŠ•ç¥¨</strong>ã€‚å…¶è¡¨ç°æ¯”ç¡¬æŠ•ç¥¨æ›´å¥½ï¼Œå› ä¸ºç»™äºˆé«˜è‡ªä¿¡çš„æŠ•ç¥¨æ›´å¤§çš„æƒé‡ã€‚</p>
<h3 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h3><p><strong>æœ‰æ”¾å›é‡‡æ ·è¢«ç§°ä¸ºè£…è¢‹ï¼ˆ<em>Bagging</em>ï¼Œæ˜¯ <em>bootstrap aggregating</em> çš„ç¼©å†™ï¼‰ã€‚æ— æ”¾å›é‡‡æ ·ç§°ä¸ºç²˜è´´ï¼ˆ<em>pasting</em>ï¼‰</strong></p>
<p>Bagging å’Œ Pasting éƒ½å…è®¸åœ¨å¤šä¸ªåˆ†ç±»å™¨é—´å¯¹è®­ç»ƒé›†è¿›è¡Œå¤šæ¬¡é‡‡æ ·ï¼Œä½†åªæœ‰ Baggingå¯ä»¥é€šè¿‡ä½¿ç”¨ä¸åŒçš„è®­ç»ƒç®—æ³•å»å¾—åˆ°ä¸€äº›ä¸åŒçš„åˆ†ç±»å™¨ã€‚ Pastingæ˜¯å¯¹æ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„è®­ç»ƒç®—æ³•ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„è®­ç»ƒé›†ä¸Šå»è®­ç»ƒã€‚</p>
<blockquote>
<p>å½“æ‰€æœ‰çš„åˆ†ç±»å™¨è¢«è®­ç»ƒåï¼Œé›†æˆå¯ä»¥é€šè¿‡å¯¹æ‰€æœ‰åˆ†ç±»å™¨ç»“æœçš„ç®€å•èšåˆæ¥å¯¹æ–°çš„å®ä¾‹è¿›è¡Œé¢„æµ‹ã€‚<strong>èšåˆå‡½æ•°</strong>é€šå¸¸å¯¹åˆ†ç±»æ˜¯<em>ç»Ÿè®¡æ¨¡å¼</em>ï¼ˆä¾‹å¦‚ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨ï¼‰æˆ–è€…å¯¹å›å½’æ˜¯å¹³å‡ã€‚</p>
<p>æ¯ä¸€ä¸ªå•ç‹¬çš„åˆ†ç±»å™¨åœ¨å¦‚æœåœ¨åŸå§‹è®­ç»ƒé›†ä¸Šéƒ½æ˜¯é«˜åå·®ï¼Œä½†æ˜¯èšåˆé™ä½äº†åå·®å’Œæ–¹å·®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé›†æˆçš„ç»“æœæ˜¯æœ‰ä¸€ä¸ªç›¸ä¼¼çš„åå·®ï¼Œä½†æ˜¯å¯¹æ¯”ä¸åœ¨åŸå§‹è®­ç»ƒé›†ä¸Šçš„å•ä¸€åˆ†ç±»å™¨æ¥è®²æœ‰æ›´å°çš„æ–¹å·®ã€‚</p>
</blockquote>
<p>å¦‚æœåŸºåˆ†ç±»å™¨å¯ä»¥é¢„æµ‹ç±»åˆ«æ¦‚ç‡ï¼ˆä¾‹å¦‚å®ƒæ‹¥æœ‰<code>predict_proba()</code>æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆ<code>BaggingClassifier</code>ä¼šè‡ªåŠ¨çš„è¿è¡Œè½¯æŠ•ç¥¨ã€‚</p>
<h4 id="Out-of-bag"><a href="#Out-of-bag" class="headerlink" title="Out-of-bag"></a>Out-of-bag</h4><p>å¯¹äº Bagging æ¥è¯´ï¼Œä¸€äº›å®ä¾‹å¯èƒ½è¢«ä¸€äº›åˆ†ç±»å™¨é‡å¤é‡‡æ ·ï¼Œä½†å…¶ä»–çš„æœ‰å¯èƒ½ä¸ä¼šè¢«é‡‡æ ·ã€‚<code>BaggingClassifier</code>é»˜è®¤æ˜¯æœ‰æ”¾å›çš„é‡‡æ ·<code>m</code>ä¸ªå®ä¾‹ ï¼ˆ<code>bootstrap=True</code>ï¼‰ã€‚æ„å‘³ç€å¹³å‡ä¸‹æ¥åªæœ‰63%çš„è®­ç»ƒå®ä¾‹è¢«æ¯ä¸ªåˆ†ç±»å™¨é‡‡æ ·ï¼Œå‰©ä¸‹çš„37%ä¸ªæ²¡æœ‰è¢«é‡‡æ ·çš„è®­ç»ƒå®ä¾‹å°±å«åš <em>Out-of-Bag</em> å®ä¾‹ã€‚æ³¨æ„å¯¹äºæ¯ä¸€ä¸ªçš„åˆ†ç±»å™¨å®ƒä»¬çš„ 37% ä¸æ˜¯ç›¸åŒçš„ã€‚</p>
<p>å¯ä»¥æ‹¿å‡ºæ¯ä¸€ä¸ªåˆ†ç±»å™¨çš„ oob æ¥è¯„ä¼°é›†æˆæœ¬èº«ã€‚</p>
<h4 id="éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´"><a href="#éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´" class="headerlink" title="éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´"></a>éšæœºè´´ç‰‡ä¸éšæœºå­ç©ºé—´</h4><p><code>BaggingClassifier</code>ä¹Ÿæ”¯æŒé‡‡æ ·ç‰¹å¾ã€‚</p>
<p>å¯¹è®­ç»ƒå®ä¾‹å’Œç‰¹å¾çš„é‡‡æ ·è¢«å«åšéšæœºè´´ç‰‡ã€‚ä¿ç•™äº†æ‰€æœ‰çš„è®­ç»ƒå®ä¾‹ï¼ˆä¾‹å¦‚<code>bootstrap=False</code>å’Œ<code>max_samples=1.0</code>ï¼‰ï¼Œä½†æ˜¯å¯¹ç‰¹å¾é‡‡æ ·ï¼ˆ<code>bootstrap_features=True</code>å¹¶ä¸”/æˆ–è€…<code>max_features</code>å°äº 1.0ï¼‰å«åšéšæœºå­ç©ºé—´ã€‚</p>
<p><strong>é‡‡æ ·ç‰¹å¾å¯¼è‡´æ›´å¤šçš„é¢„æµ‹å¤šæ ·æ€§ï¼Œç”¨é«˜åå·®æ¢ä½æ–¹å·®ã€‚</strong></p>
<h3 id="éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰"><a href="#éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰" class="headerlink" title="éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰"></a>éšæœºæ£®æ—ï¼ˆä¸€ç§baggingæ¨¡å‹ï¼‰</h3><p>éšæœºæ£®æ—ç®—æ³•åœ¨æ ‘ç”Ÿé•¿æ—¶å¼•å…¥äº†é¢å¤–çš„éšæœºï¼›ä¸åœ¨èŠ‚ç‚¹åˆ†è£‚æ—¶éœ€è¦æ‰¾åˆ°æœ€å¥½åˆ†è£‚ç‰¹å¾ç›¸åï¼ˆè¯¦è§ç¬¬å…­ç« ï¼‰ï¼Œå®ƒ<strong>åœ¨ä¸€ä¸ªéšæœºçš„ç‰¹å¾é›†ä¸­æ‰¾æœ€å¥½çš„ç‰¹å¾ï¼Œ</strong>å¯¼è‡´äº†æ ‘çš„å·®å¼‚æ€§ï¼Œ<strong>å†ä¸€æ¬¡ç”¨é«˜åå·®æ¢ä½æ–¹å·®</strong>ï¼Œæ€»çš„æ¥è¯´æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹ã€‚</p>
<h4 id="æç«¯éšæœºæ ‘"><a href="#æç«¯éšæœºæ ‘" class="headerlink" title="æç«¯éšæœºæ ‘"></a>æç«¯éšæœºæ ‘</h4><p>åœ¨éšæœºæ£®æ—ä¸Šç”Ÿé•¿æ ‘æ—¶ï¼Œåœ¨æ¯ä¸ªç»“ç‚¹åˆ†è£‚æ—¶åªè€ƒè™‘éšæœºç‰¹å¾é›†ä¸Šçš„ç‰¹å¾ã€‚å¯ä»¥é€šè¿‡å¯¹ç‰¹å¾ä½¿ç”¨éšæœºé˜ˆå€¼ä½¿æ ‘æ›´åŠ éšæœºã€‚<strong>è¿™ç§æç«¯éšæœºçš„æ ‘è¢«ç§°ä¸ºExtremely Randomized Treesç®€ç§°ä¸º <em>Extra-Tree</em>ã€‚</strong></p>
<blockquote>
<p>å› ä¸ºåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰¾åˆ°æ¯ä¸ªç‰¹å¾çš„æœ€ä½³é˜ˆå€¼æ˜¯ç”Ÿé•¿æ ‘æœ€è€—æ—¶çš„ä»»åŠ¡ä¹‹ä¸€ï¼Œæ‰€ä»¥ <em>Extra-Tree</em> æ¯”è§„åˆ™çš„éšæœºæ£®æ—è®­ç»ƒæ›´å¿«ã€‚</p>
</blockquote>
<h4 id="ç‰¹å¾é‡è¦åº¦"><a href="#ç‰¹å¾é‡è¦åº¦" class="headerlink" title="ç‰¹å¾é‡è¦åº¦"></a>ç‰¹å¾é‡è¦åº¦</h4><p><strong>é‡è¦çš„ç‰¹å¾ä¼šå‡ºç°åœ¨å•ä¸€å†³ç­–æ ‘æ›´é è¿‘æ ¹éƒ¨çš„ä½ç½®ï¼Œè€Œä¸é‡è¦çš„ç‰¹å¾ä¼šç»å¸¸å‡ºç°åœ¨é è¿‘å¶å­çš„ä½ç½®ã€‚å› æ­¤å¯ä»¥é€šè¿‡è®¡ç®—ä¸€ä¸ªç‰¹å¾åœ¨æ£®æ—çš„å…¨éƒ¨æ ‘ä¸­å‡ºç°çš„å¹³å‡æ·±åº¦æ¥é¢„æµ‹ç‰¹å¾çš„é‡è¦æ€§ã€‚</strong></p>
<p>éšæœºæ£®æ—å¯ä»¥éå¸¸æ–¹ä¾¿å¿«é€Ÿå¾—äº†è§£å“ªäº›ç‰¹å¾å®é™…ä¸Šæ˜¯é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯ä½ éœ€è¦è¿›è¡Œç‰¹å¾é€‰æ‹©çš„æ—¶å€™ã€‚</p>
<h3 id="æå‡"><a href="#æå‡" class="headerlink" title="æå‡"></a>æå‡</h3><p>æå‡ï¼ˆBoostingï¼Œæœ€åˆç§°ä¸º<em>å‡è®¾å¢å¼º</em>ï¼‰æŒ‡çš„æ˜¯å¯ä»¥å°†å‡ ä¸ªå¼±å­¦ä¹ è€…ç»„åˆæˆå¼ºå­¦ä¹ è€…çš„é›†æˆæ–¹æ³•ã€‚å¯¹äºå¤§å¤šæ•°çš„æå‡æ–¹æ³•çš„æ€æƒ³å°±æ˜¯æŒ‰é¡ºåºå»è®­ç»ƒåˆ†ç±»å™¨ï¼Œæ¯ä¸€ä¸ªéƒ½è¦å°è¯•ä¿®æ­£å‰é¢çš„åˆ†ç±»ã€‚ç°å¦‚ä»Šå·²ç»æœ‰å¾ˆå¤šçš„æå‡æ–¹æ³•äº†ï¼Œä½†æœ€è‘—åçš„å°±æ˜¯ <em>Adaboost</em>ï¼ˆé€‚åº”æ€§æå‡ï¼Œæ˜¯ <em>Adaptive Boosting</em> çš„ç®€ç§°ï¼‰ å’Œ <em>Gradient Boosting</em>ï¼ˆæ¢¯åº¦æå‡ï¼‰ã€‚</p>
<h4 id="Adaboost"><a href="#Adaboost" class="headerlink" title="Adaboost"></a>Adaboost</h4><p>ä½¿ä¸€ä¸ªæ–°çš„åˆ†ç±»å™¨å»ä¿®æ­£ä¹‹å‰åˆ†ç±»ç»“æœçš„æ–¹æ³•å°±æ˜¯<strong>å¯¹ä¹‹å‰åˆ†ç±»ç»“æœé”™è¯¯çš„è®­ç»ƒå®ä¾‹å¤šåŠ å…³æ³¨</strong>ã€‚è¿™å¯¼è‡´æ–°çš„é¢„æµ‹å› å­è¶Šæ¥è¶Šå¤šåœ°èšç„¦äºè¿™ç§æƒ…å†µã€‚è¿™æ˜¯ <em>Adaboost</em> ä½¿ç”¨çš„æŠ€æœ¯ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/7-7.png" alt="å›¾7-7"></p>
<blockquote>
<p>åºåˆ—å­¦ä¹ æŠ€æœ¯çš„ä¸€ä¸ªé‡è¦çš„<strong>ç¼ºç‚¹</strong>æ˜¯ï¼šå®ƒä¸èƒ½è¢«å¹¶è¡ŒåŒ–ï¼ˆåªèƒ½æŒ‰æ­¥éª¤ï¼‰ï¼Œå› ä¸ºæ¯ä¸ªåˆ†ç±»å™¨åªèƒ½åœ¨ä¹‹å‰çš„åˆ†ç±»å™¨å·²ç»è¢«è®­ç»ƒå’Œè¯„ä»·åå†è¿›è¡Œè®­ç»ƒã€‚</p>
</blockquote>
<p><strong>Adaboostçš„ç®—æ³•</strong></p>
<p>æ¯ä¸€ä¸ªå®ä¾‹çš„æƒé‡<code>wi</code>åˆå§‹éƒ½è¢«è®¾ä¸º<code>1/m</code></p>
<p>ç¬¬ä¸€ä¸ªåˆ†ç±»å™¨è¢«è®­ç»ƒåï¼Œåœ¨è®­ç»ƒé›†ä¸Šç®—å‡ºæƒé‡è¯¯å·®ç‡<code>r1</code>ï¼š</p>
<p><strong>ç¬¬jä¸ªåˆ†ç±»å™¨çš„æƒé‡è¯¯å·®ç‡ï¼š</strong></p>
<script type="math/tex; mode=display">
r_j\ = \ \frac{\sum_{i=1,\hat y_j^{(i)}\neq y^{(i)}}^m \omega^{(i)}}{\sum _{i=1}^m \omega^{(i)}}</script><p>$\hat y_j^i$ æ˜¯ç¬¬jä¸ªåˆ†ç±»å™¨å¯¹äºç¬¬iä¸ªå®ä¾‹çš„é¢„æµ‹ã€‚</p>
<p><strong>åˆ†ç±»å™¨çš„æƒé‡</strong></p>
<p>å…¶ä¸­<code>Î·</code>æ˜¯è¶…å‚æ•°å­¦ä¹ ç‡ï¼ˆé»˜è®¤ä¸º 1ï¼‰ã€‚åˆ†ç±»å™¨å‡†ç¡®ç‡è¶Šé«˜ï¼Œå®ƒçš„æƒé‡å°±è¶Šé«˜ã€‚</p>
<script type="math/tex; mode=display">
\alpha_j = \eta \log \frac{1-r_j}{r_j}</script><p><strong>æƒé‡æ›´æ–°è§„åˆ™</strong></p>
<p>å¯¹äº<code>i=1, 2, ..., m</code></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/E7-3.png" alt="å…¬å¼7-3"></p>
<p>éšåæ‰€æœ‰å®ä¾‹çš„æƒé‡éƒ½è¢«å½’ä¸€åŒ–ã€‚</p>
<p>ä¸ºäº†è¿›è¡Œé¢„æµ‹ï¼ŒAdaboost é€šè¿‡åˆ†ç±»å™¨æƒé‡ $Î±_{j}$ç®€å•çš„è®¡ç®—äº†æ‰€æœ‰çš„åˆ†ç±»å™¨å’Œæƒé‡ã€‚é¢„æµ‹ç±»åˆ«ä¼šæ˜¯æƒé‡æŠ•ç¥¨ä¸­ä¸»è¦çš„ç±»åˆ«ã€‚</p>
<p><strong>Adaboost åˆ†ç±»å™¨</strong></p>
<script type="math/tex; mode=display">
\hat y(x)\ = \ {argmax}_k \ \ \sum^N_{j=1,\hat y_j(x)=k} \alpha_j</script><p>å…¶ä¸­<code>N</code>æ˜¯åˆ†ç±»å™¨çš„æ•°é‡ã€‚</p>
<blockquote>
<p>sklearn é€šå¸¸ä½¿ç”¨ Adaboost çš„å¤šåˆ†ç±»ç‰ˆæœ¬ <em>SAMME</em>ï¼ˆ<em>åˆ†æ®µåŠ å»ºæ¨¡ä½¿ç”¨å¤šç±»æŒ‡æ•°æŸå¤±å‡½æ•°</em>ï¼‰ã€‚å¦‚æœåªæœ‰ä¸¤ç±»åˆ«ï¼Œé‚£ä¹ˆ <em>SAMME</em> æ˜¯ä¸ Adaboost ç›¸åŒçš„ã€‚å¦‚æœåˆ†ç±»å™¨å¯ä»¥é¢„æµ‹ç±»åˆ«æ¦‚ç‡ï¼ˆæœ‰<code>predict_proba()</code>ï¼‰ï¼Œå¦‚æœ sklearn å¯ä»¥ä½¿ç”¨ <em>SAMME</em> å«åš<code>SAMME.R</code>çš„å˜é‡ï¼ˆR ä»£è¡¨â€œREALâ€ï¼‰ï¼Œè¿™ç§ä¾èµ–äºç±»åˆ«æ¦‚ç‡çš„é€šå¸¸æ¯”ä¾èµ–äºåˆ†ç±»å™¨çš„æ›´å¥½ã€‚</p>
</blockquote>
<p>å¦‚æœ Adaboost é›†æˆ<strong>è¿‡æ‹Ÿåˆ</strong>ï¼Œå¯ä»¥å°è¯•<strong>å‡å°‘åŸºåˆ†ç±»å™¨çš„æ•°é‡</strong>æˆ–è€…<strong>å¯¹åŸºåˆ†ç±»å™¨ä½¿ç”¨æ›´å¼ºçš„æ­£åˆ™åŒ–</strong>ã€‚</p>
<h4 id="æ¢¯åº¦æå‡"><a href="#æ¢¯åº¦æå‡" class="headerlink" title="æ¢¯åº¦æå‡"></a>æ¢¯åº¦æå‡</h4><p>æ¢¯åº¦æå‡ä¹Ÿæ˜¯é€šè¿‡å‘é›†æˆä¸­é€æ­¥å¢åŠ åˆ†ç±»å™¨è¿è¡Œçš„ï¼Œæ¯ä¸€ä¸ªåˆ†ç±»å™¨éƒ½ä¿®æ­£ä¹‹å‰çš„åˆ†ç±»ç»“æœã€‚ç„¶è€Œï¼Œå¹¶ä¸åƒ Adaboost é‚£æ ·æ¯ä¸€æ¬¡è¿­ä»£éƒ½æ›´æ”¹å®ä¾‹çš„æƒé‡ï¼Œè¿™ä¸ªæ–¹æ³•<strong>ä½¿ç”¨æ–°çš„åˆ†ç±»å™¨å»æ‹Ÿåˆå‰é¢åˆ†ç±»å™¨é¢„æµ‹çš„<em>æ®‹å·®</em> </strong>ã€‚</p>
<p><strong>æ¢¯åº¦æå‡å›å½’æ ‘</strong>ï¼ˆGBRTï¼Œ<em>Gradient Tree Boosting</em> æˆ–è€… <em>Gradient Boosted Regression Trees</em>ï¼‰</p>
<p><strong>æ¢¯åº¦æå‡å†³ç­–æ ‘</strong> (GBDTï¼Œ <em>Gradient Boosted Decision Trees</em>)æ˜¯æ¢¯åº¦æå‡(GB)ç®—æ³•é™å®šåŸºå­¦ä¹ å™¨æ˜¯<strong>å›å½’å†³ç­–æ ‘æ—¶çš„æ¨¡å‹ï¼Œå°¤å…¶æ˜¯CARTå›å½’æ ‘</strong>ã€‚</p>
<p>sklean ä¸­çš„<code>GradientBoostingRegressor</code>å¯ä»¥ç”¨æ¥è®­ç»ƒ GBRT é›†æˆï¼Œä¹Ÿæœ‰è¶…å‚æ•°å»æ§åˆ¶é›†æˆè®­ç»ƒï¼Œä¾‹å¦‚åŸºåˆ†ç±»å™¨çš„æ•°é‡ï¼ˆ<code>n_estimators</code>ï¼‰ã€‚è¶…å‚æ•°<code>learning_rate</code> ç¡®ç«‹äº†æ¯ä¸ªæ ‘çš„è´¡çŒ®ã€‚</p>
<blockquote>
<p>å¦‚æœæŠŠ<code>learning_rate</code>è®¾ç½®ä¸ºä¸€ä¸ªå¾ˆå°çš„æ ‘ï¼Œä¾‹å¦‚ 0.1ï¼Œåœ¨é›†æˆä¸­å°±éœ€è¦æ›´å¤šçš„æ ‘å»æ‹Ÿåˆè®­ç»ƒé›†ï¼Œä½†é¢„æµ‹é€šå¸¸ä¼šæ›´å¥½ã€‚è¿™ä¸ªæ­£åˆ™åŒ–æŠ€æœ¯å«åš <strong><em>shrinkage</em></strong>ã€‚</p>
</blockquote>
<h5 id="Early-stop-æ—©åœ"><a href="#Early-stop-æ—©åœ" class="headerlink" title="Early stop(æ—©åœ)"></a>Early stop(æ—©åœ)</h5><p><code>GradientBoostingRegressor</code>æœ‰æ–¹æ³•<code>staged_predict()</code>ï¼šå®ƒåœ¨è®­ç»ƒçš„æ¯ä¸ªé˜¶æ®µè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<p>ä¸å…ˆåœ¨ä¸€å¤§å †æ ‘ä¸­è®­ç»ƒï¼Œç„¶åå†å›å¤´å»æ‰¾æœ€ä¼˜æ•°ç›®ç›¸åã€‚å¯ä»¥é€šè¿‡è®¾ç½®<code>warm_start=True</code>æ¥å®ç° æ—©åœï¼Œè¿™ä½¿å¾—å½“<code>fit()</code>æ–¹æ³•è¢«è°ƒç”¨æ—¶ sklearn ä¿ç•™ç°æœ‰æ ‘ï¼Œå¹¶å…è®¸å¢é‡è®­ç»ƒã€‚</p>
<p><code>GradientBoostingRegressor</code>ä¹Ÿæ”¯æŒæŒ‡å®šç”¨äºè®­ç»ƒæ¯æ£µæ ‘çš„è®­ç»ƒå®ä¾‹æ¯”ä¾‹çš„è¶…å‚æ•°<code>subsample</code>ã€‚ä¾‹å¦‚å¦‚æœ<code>subsample=0.25</code>ï¼Œé‚£ä¹ˆæ¯ä¸ªæ ‘éƒ½ä¼šåœ¨ 25% éšæœºé€‰æ‹©çš„è®­ç»ƒå®ä¾‹ä¸Šè®­ç»ƒã€‚è¿™ä¹Ÿæ˜¯ä¸ªé«˜åå·®æ¢ä½æ–¹å·®çš„ä½œç”¨ã€‚åŒæ ·ä¹ŸåŠ é€Ÿäº†è®­ç»ƒã€‚è¿™ä¸ªæŠ€æœ¯å«åš<strong><em>éšæœºæ¢¯åº¦æå‡</em></strong>ã€‚</p>
<h4 id="æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰"><a href="#æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰" class="headerlink" title="æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰"></a>æç«¯æ¢¯åº¦æå‡ï¼ˆXGBoostï¼‰</h4><ol>
<li>æå‡æ ‘åªä½¿ç”¨äº†ä¸€é˜¶æ³°å‹’å±•å¼€ï¼Œè€ŒXGBoostä½¿ç”¨äº†äºŒé˜¶æ³°å‹’å±•å¼€ã€‚</li>
<li>xgbooståœ¨<strong>ä»£ä»·å‡½æ•°é‡ŒåŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦</strong>ã€‚</li>
<li><strong>åˆ—æŠ½æ ·ï¼ˆcolumn subsamplingï¼‰</strong>ã€‚xgboostå€Ÿé‰´äº†éšæœºæ£®æ—çš„åšæ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·ï¼ˆå³æ¯æ¬¡çš„è¾“å…¥ç‰¹å¾ä¸æ˜¯å…¨éƒ¨ç‰¹å¾ï¼‰ï¼Œä¸ä»…èƒ½é™ä½è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½å‡å°‘è®¡ç®—</li>
<li><strong>å¹¶è¡ŒåŒ–å¤„ç†</strong>ï¼šåœ¨è®­ç»ƒä¹‹å‰ï¼Œé¢„å…ˆå¯¹æ¯ä¸ªç‰¹å¾å†…éƒ¨è¿›è¡Œäº†æ’åºæ‰¾å‡ºå€™é€‰åˆ‡å‰²ç‚¹ï¼Œç„¶åä¿å­˜ä¸ºblockç»“æ„ï¼Œåé¢çš„è¿­ä»£ä¸­é‡å¤åœ°ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼Œå¤§å¤§å‡å°è®¡ç®—é‡ã€‚</li>
</ol>
<p>xgboostå·¥å…·æ”¯æŒè‡ªå®šä¹‰ä»£ä»·å‡½æ•°ï¼Œåªè¦å‡½æ•°å¯ä¸€é˜¶å’ŒäºŒé˜¶æ±‚å¯¼ã€‚ä¾‹å¦‚ï¼Œxgboostæ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œè¿™ä¸ªæ—¶å€™xgboostç›¸å½“äºå¸¦L1å’ŒL2æ­£åˆ™åŒ–é¡¹çš„é€»è¾‘æ–¯è’‚å›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–è€…çº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰</p>
<p><a href="https://zhuanlan.zhihu.com/p/57814935" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<h3 id="Stacking"><a href="#Stacking" class="headerlink" title="Stacking"></a>Stacking</h3><p><strong><em>Stacking</em>ï¼ˆ<em>stacked generalization</em> çš„ç¼©å†™ï¼‰ï¼Œè¿™ä¸ªç®—æ³•ä¸ä½¿ç”¨çç¢çš„å‡½æ•°ï¼ˆå¦‚ç¡¬æŠ•ç¥¨ï¼‰æ¥èšåˆé›†åˆä¸­æ‰€æœ‰åˆ†ç±»å™¨çš„é¢„æµ‹ï¼Œæˆ‘ç›´æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥æ‰§è¡Œè¿™ä¸ªèšåˆã€‚</strong></p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_7/7-12.png" alt="å›¾7-12"></p>
<p>ä¸ºäº†è®­ç»ƒè¿™ä¸ª <em>blender</em> ï¼Œä¸€ä¸ªé€šç”¨çš„æ–¹æ³•æ˜¯<strong>é‡‡ç”¨ä¿æŒé›†</strong>ã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œè®­ç»ƒé›†è¢«åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼Œç¬¬ä¸€ä¸ªå­é›†è¢«ç”¨ä½œè®­ç»ƒç¬¬ä¸€å±‚ã€‚</li>
<li>ç¬¬ä¸€å±‚çš„åˆ†ç±»å™¨è¢«ç”¨æ¥é¢„æµ‹ç¬¬äºŒä¸ªå­é›†ï¼ˆä¿æŒé›†ï¼‰ã€‚</li>
<li>ä½¿ç”¨è¿™äº›é¢„æµ‹ç»“æœä½œä¸ºè¾“å…¥ç‰¹å¾æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è®­ç»ƒé›†ï¼Œä¿æŒç›®æ ‡æ•°å€¼ä¸å˜ï¼Œéšå <em>blender</em> åœ¨è¿™ä¸ªæ–°çš„è®­ç»ƒé›†ä¸Šè®­ç»ƒã€‚</li>
</ol>
<p>sklearn å¹¶ä¸ç›´æ¥æ”¯æŒ stacking ï¼Œä½†å¯ä»¥ä½¿ç”¨å¼€æºé¡¹ç›®<a href="https://github.com/Menelau/DESlib" target="_blank" rel="noopener">DESlib</a>ï¼ˆåŸºäºsklearnï¼‰</p>
<h3 id="ç»ƒä¹ -1"><a href="#ç»ƒä¹ -1" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å¦‚æœä½ åœ¨ç›¸åŒè®­ç»ƒé›†ä¸Šè®­ç»ƒ 5 ä¸ªä¸åŒçš„æ¨¡å‹ï¼Œå®ƒä»¬éƒ½æœ‰ 95% çš„å‡†ç¡®ç‡ï¼Œé‚£ä¹ˆä½ æ˜¯å¦å¯ä»¥é€šè¿‡ç»„åˆè¿™ä¸ªæ¨¡å‹æ¥å¾—åˆ°æ›´å¥½çš„ç»“æœï¼Ÿå¦‚æœå¯ä»¥é‚£æ€ä¹ˆåšå‘¢ï¼Ÿå¦‚æœä¸å¯ä»¥è¯·ç»™å‡ºç†ç”±ã€‚</p>
<blockquote>
<p>å¯ä»¥é€šè¿‡é›†æˆå­¦ä¹ å°†5ä¸ªæ¨¡å‹é›†æˆåœ¨ä¸€èµ·</p>
<p>é€šè¿‡æŠ•ç¥¨çš„æ–¹å¼é¢„æµ‹</p>
</blockquote>
</li>
<li><p>è½¯æŠ•ç¥¨å’Œç¡¬æŠ•ç¥¨åˆ†ç±»å™¨ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<blockquote>
<p>ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨è®¡ç®—é›†åˆä¸­æ¯ä¸ªåˆ†ç±»å™¨çš„æŠ•ç¥¨ï¼Œå¹¶é€‰æ‹©å¾—åˆ°æœ€å¤šé€‰ç¥¨çš„ç±»ã€‚</p>
<p>è½¯æŠ•ç¥¨åˆ†ç±»å™¨è®¡ç®—æ¯ä¸ªç±»çš„å¹³å‡ä¼°è®¡ç±»æ¦‚ç‡ï¼Œå¹¶é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„ç±»ï¼Œä¹Ÿå°±æ˜¯ç»™ç½®ä¿¡åº¦é«˜çš„ç±»æ›´é«˜çš„æƒé‡ï¼Œä½†æ˜¯å‰ææ˜¯å¯ä»¥å¾—åˆ°æ¯ä¸ªç±»çš„æ¦‚ç‡ã€‚</p>
</blockquote>
</li>
<li><p>æ˜¯å¦æœ‰å¯èƒ½é€šè¿‡åˆ†é…å¤šä¸ªæœåŠ¡å™¨æ¥åŠ é€Ÿ bagging é›†æˆç³»ç»Ÿçš„è®­ç»ƒï¼Ÿpasting é›†æˆï¼Œboosting é›†æˆï¼Œéšæœºæ£®æ—ï¼Œæˆ– stacking é›†æˆæ€ä¹ˆæ ·ï¼Ÿ</p>
<blockquote>
<p>baggingï¼Œpastingå’Œstackingéƒ½å¯ä»¥å¹¶è¡Œï¼Œéšæœºæ£®æ—ç®—bagging</p>
<p>boostingæ˜¯åºåˆ—å­¦ä¹ æŠ€æœ¯ï¼Œä¸èƒ½å¹¶è¡Œã€‚</p>
</blockquote>
</li>
<li><p>out-of-bag è¯„ä»·çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>åŒ…å¤–é›†æˆä¸­çš„æ¯ä¸ªé¢„æµ‹å™¨éƒ½ä½¿ç”¨å®ƒæ²¡æœ‰ç»è¿‡è®­ç»ƒçš„å®ä¾‹è¿›è¡Œè¯„ä¼°ï¼Œä¸éœ€è¦é¢å¤–çš„éªŒè¯é›†ã€‚</p>
</blockquote>
</li>
<li><p>æ˜¯ä»€ä¹ˆä½¿ Extra-Tree æ¯”è§„åˆ™éšæœºæ£®æ—æ›´éšæœºå‘¢ï¼Ÿè¿™ä¸ªé¢å¤–çš„éšæœºæœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿé‚£è¿™ä¸ª Extra-Tree æ¯”è§„åˆ™éšæœºæ£®æ—è°æ›´å¿«å‘¢ï¼Ÿ</p>
<blockquote>
<p>Extra-Treeåœ¨éšæœºæ£®æ—ä¸Šç”Ÿé•¿æ ‘æ—¶ï¼Œåœ¨æ¯ä¸ªç»“ç‚¹åˆ†è£‚æ—¶åªè€ƒè™‘éšæœºç‰¹å¾é›†ä¸Šçš„ç‰¹å¾ï¼Œé¢ä¸æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰¾åˆ°æ¯ä¸ªç‰¹å¾çš„æœ€ä½³é˜ˆå€¼ï¼Œæ‰€ä»¥è®­ç»ƒæ—¶ <em>Extra-Tree</em> æ¯”è§„åˆ™çš„éšæœºæ£®æ—æ›´å¿«ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„ Adaboost æ¨¡å‹æ¬ æ‹Ÿåˆï¼Œé‚£ä¹ˆä½ éœ€è¦æ€ä¹ˆè°ƒæ•´è¶…å‚æ•°ï¼Ÿ</p>
<blockquote>
<p>å¦‚æœ Adaboost é›†æˆ<strong>è¿‡æ‹Ÿåˆ</strong>ï¼Œå¯ä»¥å°è¯•<strong>å‡å°‘åŸºåˆ†ç±»å™¨çš„æ•°é‡</strong>æˆ–è€…<strong>å¯¹åŸºåˆ†ç±»å™¨ä½¿ç”¨æ›´å¼ºçš„æ­£åˆ™åŒ–</strong>ã€‚</p>
</blockquote>
</li>
<li><p>å¦‚æœä½ çš„æ¢¯åº¦æå‡è¿‡æ‹Ÿåˆï¼Œé‚£ä¹ˆä½ åº”è¯¥è°ƒé«˜è¿˜æ˜¯è°ƒä½å­¦ä¹ ç‡å‘¢ï¼Ÿ</p>
<blockquote>
<p>é™ä½å­¦ä¹ ç‡ï¼Œæˆ–ä½¿ç”¨æ—©åœçš„æ–¹æ³•æ¥å¯»æ‰¾æ­£ç¡®æ•°é‡çš„åŸºå­¦ä¹ å™¨ã€‚</p>
</blockquote>
</li>
<li><p>å¯¼å…¥ MNIST æ•°æ®ï¼ˆç¬¬ä¸‰ç« ä¸­ä»‹ç»ï¼‰ï¼ŒæŠŠå®ƒåˆ‡åˆ†è¿›ä¸€ä¸ªè®­ç»ƒé›†ï¼Œä¸€ä¸ªéªŒè¯é›†ï¼Œå’Œä¸€ä¸ªæµ‹è¯•é›†ï¼ˆä¾‹å¦‚ 40000 ä¸ªå®ä¾‹è¿›è¡Œè®­ç»ƒï¼Œ10000 ä¸ªè¿›è¡ŒéªŒè¯ï¼Œ10000 ä¸ªè¿›è¡Œæµ‹è¯•ï¼‰ã€‚ç„¶åè®­ç»ƒå¤šä¸ªåˆ†ç±»å™¨ï¼Œä¾‹å¦‚ä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œä¸€ä¸ª Extra-Tree åˆ†ç±»å™¨å’Œä¸€ä¸ª SVMã€‚æ¥ä¸‹æ¥ï¼Œå°è¯•å°†å®ƒä»¬ç»„åˆæˆé›†æˆï¼Œä½¿ç”¨è½¯æˆ–ç¡¬æŠ•ç¥¨åˆ†ç±»å™¨æ¥èƒœè¿‡éªŒè¯é›†ä¸Šçš„æ‰€æœ‰é›†åˆã€‚ä¸€æ—¦æ‰¾åˆ°äº†ï¼Œå°±åœ¨æµ‹è¯•é›†ä¸Šå®éªŒã€‚ä¸å•ä¸ªåˆ†ç±»å™¨ç›¸æ¯”ï¼Œå®ƒçš„æ€§èƒ½æœ‰å¤šå¥½ï¼Ÿ</p>
</li>
<li><p>ä»ç»ƒä¹  8 ä¸­è¿è¡Œä¸ªä½“åˆ†ç±»å™¨æ¥å¯¹éªŒè¯é›†è¿›è¡Œé¢„æµ‹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è®­ç»ƒé›†å¹¶ç”Ÿæˆé¢„æµ‹ï¼šæ¯ä¸ªè®­ç»ƒå®ä¾‹æ˜¯ä¸€ä¸ªå‘é‡ï¼ŒåŒ…å«æ¥è‡ªæ‰€æœ‰åˆ†ç±»å™¨çš„å›¾åƒçš„é¢„æµ‹é›†ï¼Œç›®æ ‡æ˜¯å›¾åƒç±»åˆ«ã€‚ç¥è´ºä½ ï¼Œä½ åˆšåˆšè®­ç»ƒäº†ä¸€ä¸ª <em>blender</em> ï¼Œå’Œåˆ†ç±»å™¨ä¸€èµ·ç»„æˆäº†ä¸€ä¸ªå åŠ ç»„åˆï¼ç°åœ¨è®©æˆ‘ä»¬æ¥è¯„ä¼°æµ‹è¯•é›†ä¸Šçš„é›†åˆã€‚å¯¹äºæµ‹è¯•é›†ä¸­çš„æ¯ä¸ªå›¾åƒï¼Œç”¨æ‰€æœ‰åˆ†ç±»å™¨è¿›è¡Œé¢„æµ‹ï¼Œç„¶åå°†é¢„æµ‹é¦ˆé€åˆ° <em>blender</em> ä»¥è·å¾—é›†åˆçš„é¢„æµ‹ã€‚å®ƒä¸ä½ æ—©æœŸè®­ç»ƒè¿‡çš„æŠ•ç¥¨åˆ†ç±»å™¨ç›¸æ¯”å¦‚ä½•ï¼Ÿ</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬08ç« -é™ç»´"><a href="#ç¬¬08ç« -é™ç»´" class="headerlink" title="ç¬¬08ç«  é™ç»´"></a>ç¬¬08ç«  é™ç»´</h2><blockquote>
<p>è­¦å‘Šï¼šé™ç»´ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œå› æ­¤å³ä½¿è¿™ç§æ–¹æ³•å¯ä»¥åŠ å¿«è®­ç»ƒçš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿä¼šè®©ç³»ç»Ÿè¡¨ç°çš„ç¨å¾®å·®ä¸€ç‚¹ã€‚é™ç»´ä¼šè®©å·¥ä½œæµæ°´çº¿æ›´å¤æ‚å› è€Œæ›´éš¾ç»´æŠ¤ã€‚æ‰€æœ‰åº”è¯¥å…ˆå°è¯•ä½¿ç”¨åŸå§‹çš„æ•°æ®æ¥è®­ç»ƒï¼Œå¦‚æœè®­ç»ƒé€Ÿåº¦å¤ªæ…¢çš„è¯å†è€ƒè™‘ä½¿ç”¨é™ç»´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé™ä½è®­ç»ƒé›†æ•°æ®çš„ç»´åº¦å¯èƒ½ä¼šç­›é€‰æ‰ä¸€äº›å™ªéŸ³å’Œä¸å¿…è¦çš„ç»†èŠ‚ï¼Œè¿™å¯èƒ½ä¼šè®©ç»“æœæ¯”é™ç»´ä¹‹å‰æ›´å¥½ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸ä¸ä¼šå‘ç”Ÿï¼›å®ƒåªä¼šåŠ å¿«è®­ç»ƒçš„é€Ÿåº¦ï¼‰ã€‚</p>
</blockquote>
<p>é™ç»´é™¤äº†å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦å¤–ï¼Œåœ¨æ•°æ®å¯è§†åŒ–æ–¹é¢ï¼ˆæˆ–è€… DataVizï¼‰ä¹Ÿååˆ†æœ‰ç”¨ã€‚é™ä½ç‰¹å¾ç»´åº¦åˆ° 2ï¼ˆæˆ–è€… 3ï¼‰ç»´ä»è€Œå¯ä»¥åœ¨å›¾ä¸­ç”»å‡ºä¸€ä¸ªé«˜ç»´åº¦çš„è®­ç»ƒé›†ï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡è§†è§‰ç›´è§‚çš„å‘ç°ä¸€äº›éå¸¸é‡è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚èšç±»ã€‚</p>
<p><strong>ä¸¤ç§ä¸»è¦çš„é™ç»´æ–¹æ³•ï¼šæŠ•å½±ï¼ˆprojectionï¼‰å’Œæµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰ï¼Œä¸‰ç§æµè¡Œçš„é™ç»´æŠ€æœ¯ï¼šä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ï¼Œæ ¸ä¸»æˆåˆ†åˆ†æï¼ˆKernel PCAï¼‰å’Œå±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰ã€‚</strong></p>
<h3 id="ç»´æ•°ç¾éš¾ï¼ˆcurse-of-dimentionalityï¼‰"><a href="#ç»´æ•°ç¾éš¾ï¼ˆcurse-of-dimentionalityï¼‰" class="headerlink" title="ç»´æ•°ç¾éš¾ï¼ˆcurse of dimentionalityï¼‰"></a>ç»´æ•°ç¾éš¾ï¼ˆcurse of dimentionalityï¼‰</h3><p>ä¸€ä¸ª 1,0000 ç»´çš„å•ä½è¶…æ­£æ–¹ä½“ä¸­ï¼Œéšæœºé€‰çš„ç‚¹ç¦»æ‰€æœ‰è¾¹ç•Œå¤§äº 0.001ï¼ˆé è¿‘ä¸­é—´ä½ç½®ï¼‰çš„æ¦‚ç‡ï¼ˆ$1-0.998^{10000}$ï¼‰ï¼Œè¿‘ä¼¼äº1ï¼Œåœ¨é«˜ç»´è¶…æ­£æ–¹ä½“ä¸­ï¼Œå¤§å¤šæ•°ç‚¹éƒ½åˆ†å¸ƒåœ¨è¾¹ç•Œå¤„ã€‚</p>
<p>åœ¨ä¸€ä¸ª 1,000,000 ç»´è¶…ç«‹æ–¹ä½“ä¸­éšæœºæŠ½å–ä¸¤ç‚¹çš„å¹³å‡è·ç¦»ï¼Œå¤§æ¦‚ä¸º 408.25ï¼ˆå¤§è‡´ <a href="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-50eeccb6ef846e2d0af5daef5cab1fa0.gif" target="_blank" rel="noopener"><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/tex-50eeccb6ef846e2d0af5daef5cab1fa0.gif" alt="\sqrt{1,000,000/6}"></a>ï¼‰</p>
<p>è¡¨æ˜é«˜ç»´æ•°æ®é›†æœ‰å¾ˆå¤§é£é™©åˆ†å¸ƒçš„éå¸¸ç¨€ç–ï¼šå¤§å¤šæ•°è®­ç»ƒå®ä¾‹å¯èƒ½å½¼æ­¤è¿œç¦»ã€‚ä¹Ÿæ„å‘³ç€ä¸€ä¸ªæ–°å®ä¾‹å¯èƒ½è¿œç¦»ä»»ä½•è®­ç»ƒå®ä¾‹ï¼Œä½¿å¾—é¢„æµ‹çš„å¯é æ€§è¿œä½äºè¾ƒä½ç»´åº¦æ•°æ®çš„é¢„æµ‹ï¼Œå› ä¸ºå®ƒä»¬å°†åŸºäºæ›´å¤§çš„æ¨æµ‹ï¼ˆextrapolationsï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè®­ç»ƒé›†çš„ç»´åº¦è¶Šé«˜ï¼Œè¿‡æ‹Ÿåˆçš„é£é™©å°±è¶Šå¤§ã€‚</p>
<p>ç†è®ºä¸Šæ¥è¯´ï¼Œç»´æ•°çˆ†ç‚¸çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å¢åŠ è®­ç»ƒé›†çš„å¤§å°ä»è€Œè¾¾åˆ°æ‹¥æœ‰è¶³å¤Ÿå¯†åº¦çš„è®­ç»ƒé›†ã€‚</p>
<h3 id="é™ç»´çš„ä¸»è¦æ–¹æ³•"><a href="#é™ç»´çš„ä¸»è¦æ–¹æ³•" class="headerlink" title="é™ç»´çš„ä¸»è¦æ–¹æ³•"></a>é™ç»´çš„ä¸»è¦æ–¹æ³•</h3><h4 id="æŠ•å½±ï¼ˆProjectionï¼‰"><a href="#æŠ•å½±ï¼ˆProjectionï¼‰" class="headerlink" title="æŠ•å½±ï¼ˆProjectionï¼‰"></a>æŠ•å½±ï¼ˆProjectionï¼‰</h4><p>å¤§å¤šæ•°ç°å®ç”Ÿæ´»çš„é—®é¢˜ä¸­ï¼Œè®­ç»ƒå®ä¾‹å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰ç»´åº¦ä¸Šå‡åŒ€åˆ†å¸ƒçš„ï¼Œè®¸å¤šç‰¹å¾å‡ ä¹æ˜¯å¸¸æ•°ï¼Œè€Œå…¶ä»–ç‰¹å¾åˆ™é«˜åº¦ç›¸å…³ï¼ˆå¦‚å‰é¢è®¨è®ºçš„ MNISTï¼‰ã€‚<strong>æ‰€æœ‰è®­ç»ƒå®ä¾‹å®é™…ä¸Šä½äºï¼ˆæˆ–æ¥è¿‘ï¼‰é«˜ç»´ç©ºé—´çš„ä½ç»´å­ç©ºé—´å†…ã€‚</strong></p>
<p>æŠ•å½±å¹¶ä¸æ€»æ˜¯é™ç»´çš„æœ€ä½³æ–¹æ³•ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå­ç©ºé—´å¯èƒ½ä¼šæ‰­æ›²å’Œè½¬åŠ¨ã€‚</p>
<h4 id="æµå½¢å­¦ä¹ ï¼ˆManifold-Learningï¼‰"><a href="#æµå½¢å­¦ä¹ ï¼ˆManifold-Learningï¼‰" class="headerlink" title="æµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰"></a>æµå½¢å­¦ä¹ ï¼ˆManifold Learningï¼‰</h4><p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-4.jpeg" alt="img"></p>
<p>ç‘å£«å·ä¸€ä¸ªæ˜¯äºŒç»´æµå½¢çš„ä¾‹å­ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒäºŒç»´æµå½¢æ˜¯ä¸€ç§äºŒç»´å½¢çŠ¶ï¼Œå®ƒå¯ä»¥åœ¨æ›´é«˜ç»´ç©ºé—´ä¸­å¼¯æ›²æˆ–æ‰­æ›²ã€‚ä¸€ä¸ª<code>d</code>ç»´æµå½¢æ˜¯ç±»ä¼¼äº<code>d</code>ç»´è¶…å¹³é¢çš„<code>n</code>ç»´ç©ºé—´ï¼ˆå…¶ä¸­<code>d &lt; n</code>ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ç‘å£«å·æœ‰äº›åƒ 2D å¹³é¢ï¼Œä½†æ˜¯å®ƒå®é™…ä¸Šæ˜¯åœ¨ç¬¬ä¸‰ç»´ä¸­å·æ›²ã€‚</p>
<p><strong>é€šè¿‡å¯¹è®­ç»ƒå®ä¾‹æ‰€åœ¨çš„æµå½¢è¿›è¡Œå»ºæ¨¡ä»è€Œè¾¾åˆ°é™ç»´ç›®çš„ï¼Œå«åšæµå½¢å­¦ä¹ ã€‚</strong>å®ƒä¾èµ–äºæµå½¢çŒœæƒ³ï¼ˆmanifold assumptionï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºæµå½¢å‡è®¾ï¼ˆmanifold hypothesisï¼‰ï¼Œè®¤ä¸ºå¤§å¤šæ•°ç°å®ä¸–ç•Œçš„é«˜ç»´æ•°æ®é›†å¤§éƒ½é è¿‘ä¸€ä¸ªæ›´ä½ç»´çš„æµå½¢ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-6.jpeg" alt="img"></p>
<p>å¦‚æœåœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰é™ä½è®­ç»ƒé›†çš„ç»´æ•°ï¼Œé‚£è®­ç»ƒé€Ÿåº¦è‚¯å®šä¼šåŠ å¿«ï¼Œä½†å¹¶ä¸æ€»æ˜¯ä¼šå¾—å‡ºæ›´å¥½çš„è®­ç»ƒæ•ˆæœï¼›è¿™ä¸€åˆ‡éƒ½å–å†³äºæ•°æ®é›†ã€‚</p>
<h3 id="é™ç»´æŠ€æœ¯"><a href="#é™ç»´æŠ€æœ¯" class="headerlink" title="é™ç»´æŠ€æœ¯"></a>é™ç»´æŠ€æœ¯</h3><h4 id="ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰"><a href="#ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰" class="headerlink" title="ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰"></a>ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰</h4><p>ä¸»æˆåˆ†åˆ†æï¼ˆPrincipal Component Analysisï¼‰æ˜¯ç›®å‰ä¸ºæ­¢æœ€æµè¡Œçš„é™ç»´ç®—æ³•ã€‚é¦–å…ˆå®ƒæ‰¾åˆ°æ¥è¿‘æ•°æ®é›†åˆ†å¸ƒçš„è¶…å¹³é¢ï¼Œç„¶åå°†æ‰€æœ‰çš„æ•°æ®éƒ½æŠ•å½±åˆ°è¿™ä¸ªè¶…å¹³é¢ä¸Šã€‚</p>
<h5 id="ä¿ç•™æœ€å¤§æ–¹å·®"><a href="#ä¿ç•™æœ€å¤§æ–¹å·®" class="headerlink" title="ä¿ç•™æœ€å¤§æ–¹å·®"></a>ä¿ç•™æœ€å¤§æ–¹å·®</h5><p>é€‰æ‹©ä¿æŒæœ€å¤§æ–¹å·®çš„è½´å°†åŸå§‹æ•°æ®é›†æŠ•å½±åˆ°è¯¥è½´ä¸Šçš„å‡æ–¹è·ç¦»æœ€å°ï¼ŒæŸå¤±æ›´å°‘çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-7.jpeg" alt="img"></p>
<h5 id="ä¸»æˆåˆ†ï¼ˆPrinciple-Componetsï¼‰"><a href="#ä¸»æˆåˆ†ï¼ˆPrinciple-Componetsï¼‰" class="headerlink" title="ä¸»æˆåˆ†ï¼ˆPrinciple Componetsï¼‰"></a>ä¸»æˆåˆ†ï¼ˆPrinciple Componetsï¼‰</h5><p> å®šä¹‰ç¬¬<code>i</code>ä¸ªè½´çš„å•ä½çŸ¢é‡è¢«ç§°ä¸ºç¬¬<code>i</code>ä¸ªä¸»æˆåˆ†ï¼ˆPCï¼‰ã€‚</p>
<p><strong>å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰</strong>çš„æ ‡å‡†çŸ©é˜µåˆ†è§£ï¼šå°†è®­ç»ƒé›†çŸ©é˜µ<code>X</code>åˆ†è§£ä¸ºä¸‰ä¸ªçŸ©é˜µ<code>UÂ·Î£Â·V^T</code>çš„ç‚¹ç§¯ï¼Œå…¶ä¸­<code>V^T</code>åŒ…å«æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰ä¸»æˆåˆ†ï¼Œ</p>
<blockquote>
<p>PCA å‡å®šæ•°æ®é›†ä»¥åŸç‚¹ä¸ºä¸­å¿ƒã€‚Scikit-Learn çš„<code>PCA</code>ç±»è´Ÿè´£æ•°æ®é›†ä¸­å¿ƒåŒ–å¤„ç†ã€‚ä½†æ˜¯ï¼Œå¦‚æœè‡ªå·±å®ç° PCAï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–åº“ï¼Œé¦–å…ˆè¦å…ˆå¯¹æ•°æ®åšä¸­å¿ƒåŒ–å¤„ç†ã€‚</p>
</blockquote>
<h5 id="æŠ•å½±åˆ°dç»´ç©ºé—´"><a href="#æŠ•å½±åˆ°dç»´ç©ºé—´" class="headerlink" title="æŠ•å½±åˆ°dç»´ç©ºé—´"></a>æŠ•å½±åˆ°<code>d</code>ç»´ç©ºé—´</h5><script type="math/tex; mode=display">
X_{d-proj} = X\cdot W_d</script><p>$W_d$å®šä¹‰ä¸ºåŒ…å«å‰<code>d</code>ä¸ªä¸»æˆåˆ†çš„çŸ©é˜µï¼ˆå³ç”±<code>V^T</code>çš„å‰<code>d</code>åˆ—ç»„æˆçš„çŸ©é˜µï¼‰</p>
<h5 id="æ–¹å·®è§£é‡Šç‡ï¼ˆExplained-Variance-Ratioï¼‰"><a href="#æ–¹å·®è§£é‡Šç‡ï¼ˆExplained-Variance-Ratioï¼‰" class="headerlink" title="æ–¹å·®è§£é‡Šç‡ï¼ˆExplained Variance Ratioï¼‰"></a>æ–¹å·®è§£é‡Šç‡ï¼ˆExplained Variance Ratioï¼‰</h5><p>æ¯ä¸ªä¸»æˆåˆ†çš„æ–¹å·®è§£é‡Šç‡ï¼Œå¯é€šè¿‡<code>explained_variance_ratio_</code>å˜é‡è·å¾—ã€‚å®ƒè¡¨ç¤ºä½äºæ¯ä¸ªä¸»æˆåˆ†è½´ä¸Šçš„æ•°æ®é›†æ–¹å·®çš„æ¯”ä¾‹ã€‚</p>
<h5 id="é€‰æ‹©æ­£ç¡®çš„ç»´åº¦"><a href="#é€‰æ‹©æ­£ç¡®çš„ç»´åº¦" class="headerlink" title="é€‰æ‹©æ­£ç¡®çš„ç»´åº¦"></a>é€‰æ‹©æ­£ç¡®çš„ç»´åº¦</h5><p>å€¾å‘äºé€‰æ‹©åŠ èµ·æ¥åˆ°æ–¹å·®è§£é‡Šç‡èƒ½å¤Ÿè¾¾åˆ°è¶³å¤Ÿå æ¯”ï¼ˆä¾‹å¦‚ 95%ï¼‰çš„ç»´åº¦çš„æ•°é‡ï¼Œè€Œä¸æ˜¯ä»»æ„é€‰æ‹©è¦é™ä½åˆ°çš„ç»´åº¦æ•°é‡ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-8.jpeg" alt="img"></p>
<h5 id="PCAå‹ç¼©"><a href="#PCAå‹ç¼©" class="headerlink" title="PCAå‹ç¼©"></a>PCAå‹ç¼©</h5><p>åŸå§‹æ•°æ®å’Œé‡æ„æ•°æ®ä¹‹é—´çš„å‡æ–¹è·ç¦»ï¼ˆå‹ç¼©ç„¶åè§£å‹ç¼©ï¼‰è¢«ç§°ä¸ºé‡æ„è¯¯å·®ï¼ˆreconstruction errorï¼‰ã€‚</p>
<p>PCAé€†å˜æ¢</p>
<script type="math/tex; mode=display">
X_{recovered} = X_{d-proj}\cdot W_d^T</script><h5 id="å¢é‡-PCAï¼ˆIncremental-PCAï¼‰"><a href="#å¢é‡-PCAï¼ˆIncremental-PCAï¼‰" class="headerlink" title="å¢é‡ PCAï¼ˆIncremental PCAï¼‰"></a>å¢é‡ PCAï¼ˆIncremental PCAï¼‰</h5><p>æœ‰äº›ç®—æ³•å¦‚SVDéœ€è¦åœ¨å†…å­˜ä¸­å¤„ç†æ•´ä¸ªè®­ç»ƒé›†ã€‚å¯ä»¥å°†è®­ç»ƒé›†åˆ†æ‰¹ï¼Œä¸€æ¬¡åªå¯¹ä¸€ä¸ªæ‰¹é‡ä½¿ç”¨ IPCA ç®—æ³•ã€‚è¿™å¯¹å¤§å‹è®­ç»ƒé›†éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨çº¿åº”ç”¨ PCAï¼ˆå³åœ¨æ–°å®ä¾‹åˆ°è¾¾æ—¶å³æ—¶è¿è¡Œï¼‰ã€‚</p>
<h5 id="éšæœº-PCAï¼ˆRandomized-PCAï¼‰"><a href="#éšæœº-PCAï¼ˆRandomized-PCAï¼‰" class="headerlink" title="éšæœº PCAï¼ˆRandomized PCAï¼‰"></a>éšæœº PCAï¼ˆRandomized PCAï¼‰</h5><p>è¿™æ˜¯ä¸€ç§éšæœºç®—æ³•ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°å‰dä¸ªä¸»æˆåˆ†çš„è¿‘ä¼¼å€¼ã€‚å®ƒçš„è®¡ç®—å¤æ‚åº¦æ˜¯<code>O(m Ã— d^2) + O(d^3)</code>ï¼Œè€Œä¸æ˜¯<code>O(m Ã— n^2) + O(n^3)</code>ï¼Œæ‰€ä»¥å½“<code>d</code>è¿œå°äº<code>n</code>æ—¶ï¼Œå®ƒæ¯”ä¹‹å‰çš„ç®—æ³•å¿«å¾—å¤šã€‚</p>
<h4 id="æ ¸-PCAï¼ˆKernel-PCAï¼‰"><a href="#æ ¸-PCAï¼ˆKernel-PCAï¼‰" class="headerlink" title="æ ¸ PCAï¼ˆKernel PCAï¼‰"></a>æ ¸ PCAï¼ˆKernel PCAï¼‰</h4><p>æ ¸æŠ€å·§ï¼Œä¸€ç§å°†å®ä¾‹éšå¼æ˜ å°„åˆ°éå¸¸é«˜ç»´ç©ºé—´ï¼ˆç§°ä¸ºç‰¹å¾ç©ºé—´ï¼‰çš„æ•°å­¦æŠ€æœ¯ï¼Œè®©æ”¯æŒå‘é‡æœºå¯ä»¥åº”ç”¨äºéçº¿æ€§åˆ†ç±»å’Œå›å½’ã€‚é«˜ç»´ç‰¹å¾ç©ºé—´ä¸­çš„çº¿æ€§å†³ç­–è¾¹ç•Œå¯¹åº”äºåŸå§‹ç©ºé—´ä¸­çš„å¤æ‚éçº¿æ€§å†³ç­–è¾¹ç•Œã€‚</p>
<p>åŒæ ·çš„æŠ€å·§å¯ä»¥åº”ç”¨äº PCAï¼Œä»è€Œå¯ä»¥æ‰§è¡Œå¤æ‚çš„éçº¿æ€§æŠ•å½±æ¥é™ä½ç»´åº¦ã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ ¸ PCAï¼ˆkPCAï¼‰ã€‚å®ƒé€šå¸¸èƒ½å¤Ÿå¾ˆå¥½åœ°ä¿ç•™æŠ•å½±åçš„ç°‡ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥å±•å¼€åˆ†å¸ƒè¿‘ä¼¼äºæ‰­æ›²æµå½¢çš„æ•°æ®é›†ã€‚</p>
<p><strong>å¦‚ä½•é€‰æ‹©ä¸€ç§æ ¸å¹¶è°ƒæ•´å‚æ•°</strong></p>
<blockquote>
<ol>
<li>ç½‘æ ¼æœç´¢</li>
<li>éç›‘ç£å­¦ä¹ </li>
</ol>
</blockquote>
<h4 id="å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰"><a href="#å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰" class="headerlink" title="å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰"></a>å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLLEï¼‰</h4><p>å±€éƒ¨çº¿æ€§åµŒå…¥ï¼ˆLocally Linear Embeddingï¼‰æ˜¯ä¸€ç§éçº¿æ€§é™ç»´ï¼ˆNLDRï¼‰æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ç§æµå½¢å­¦ä¹ æŠ€æœ¯ã€‚</p>
<p>LLE é¦–å…ˆæµ‹é‡æ¯ä¸ªè®­ç»ƒå®ä¾‹ä¸å…¶æœ€è¿‘é‚»ï¼ˆc.n.ï¼‰ä¹‹é—´çš„çº¿æ€§å…³ç³»ï¼Œç„¶åå¯»æ‰¾èƒ½æœ€å¥½åœ°ä¿ç•™è¿™äº›å±€éƒ¨å…³ç³»çš„è®­ç»ƒé›†çš„ä½ç»´è¡¨ç¤ºã€‚</p>
<blockquote>
<p>æ“…é•¿å±•å¼€æ²¡æœ‰å¤ªå¤šå™ªéŸ³çš„æ‰­æ›²çš„æµå½¢ã€‚</p>
</blockquote>
<h5 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h5><p>å¯¹äºæ¯ä¸ªè®­ç»ƒå®ä¾‹ $x^{(i)}$ï¼Œè¯¥ç®—æ³•è¯†åˆ«å…¶æœ€è¿‘çš„<code>k</code>ä¸ªé‚»å±…ï¼Œç„¶åå°è¯•å°† $x^{(i)}$é‡æ„ä¸ºè¿™äº›é‚»å±…çš„çº¿æ€§å‡½æ•°ã€‚æ‰¾åˆ°æƒé‡ $w_{i,j}$ä»è€Œä½¿  $x^{(i)}$å’Œ $\sum_{j=1}^{m}w_{i,j} x^{(j)}$ä¹‹é—´çš„å¹³æ–¹è·ç¦»å°½å¯èƒ½çš„å°ï¼Œå‡è®¾å¦‚æœ $x^{(j)}$ä¸æ˜¯ $x^{(i)}$çš„<code>k</code>ä¸ªæœ€è¿‘é‚»æ—¶ $w_{i,j}=0$ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå¯¹å±€éƒ¨å…³ç³»è¿›è¡Œçº¿æ€§å»ºæ¨¡ </p>
<p>$W=argmin_w\ \sum_{i=1}^m | x^{(i)}-\sum_{j=1}^m w_{i,j}x^{(j)}| ^2 \\ subject \ to \ \left \{  \begin{array}{cc} w_{i,j}=0&amp;\ \ if \ x^{j} \  is \ not \ one \ of \ the \ k \ c.n. \ of \ x^{i} \\ \sum_{j=1}^m w_{i,j}=1&amp; for\ i=1,2, \cdots ,m\end{array}\right.$</p>
<p>ç¬¬äºŒä¸ªçº¦æŸç®€å•åœ°å¯¹æ¯ä¸ªè®­ç»ƒå®ä¾‹ $x^{(i)}$çš„æƒé‡è¿›è¡Œå½’ä¸€åŒ–ã€‚</p>
<p>æƒé‡çŸ©é˜µ $\widehat{W}$åŒ…å«æƒé‡ $\hat{w_{i,j}}$]å¯¹è®­ç»ƒå®ä¾‹çš„çº¿å½¢å…³ç³»è¿›è¡Œç¼–ç ã€‚ç¬¬äºŒæ­¥æ˜¯å°†è®­ç»ƒå®ä¾‹æŠ•å½±åˆ°ä¸€ä¸ª<code>d</code>ç»´ç©ºé—´ï¼ˆ<code>d &lt; n</code>ï¼‰ä¸­å»ï¼ŒåŒæ—¶å°½å¯èƒ½çš„ä¿ç•™è¿™äº›å±€éƒ¨å…³ç³»ã€‚å¦‚æœ $z^{(i)}$æ˜¯ $x^{(i)}$]åœ¨è¿™ä¸ª<code>d</code>ç»´ç©ºé—´çš„å›¾åƒï¼Œé‚£ä¹ˆéœ€è¦ $z^{(i)}$å’Œ $\sum_{j=1}^{m}\hat{w_{i,j}}\ z^{(j)}$ä¹‹é—´çš„å¹³æ–¹è·ç¦»å°½å¯èƒ½çš„å°ã€‚çœ‹èµ·æ¥ä¸ç¬¬ä¸€æ­¥éå¸¸ç›¸ä¼¼ï¼Œä½†ä¸æ˜¯ä¿æŒå®ä¾‹å›ºå®šå¹¶æ‰¾åˆ°æœ€ä½³æƒé‡ï¼Œè€Œæ˜¯<strong>ä¿æŒæƒé‡ä¸å˜ï¼Œå¹¶åœ¨ä½ç»´ç©ºé—´ä¸­æ‰¾åˆ°å®ä¾‹å›¾åƒçš„æœ€ä½³ä½ç½®</strong>ã€‚<code>Z</code>æ˜¯åŒ…å«æ‰€æœ‰ $z^{(i)}$]çš„çŸ©é˜µã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼šä¿æŒå…³ç³»çš„åŒæ—¶è¿›è¡Œé™ç»´</p>
<p>$W=argmin_z\ \sum_{i=1}^m | z^{(i)}-\sum_{j=1}^m w_{i,j}z^{(j)}| ^2 $</p>
<p>Scikit-Learn çš„ LLE å®ç°å…·æœ‰å¦‚ä¸‹çš„è®¡ç®—å¤æ‚åº¦ï¼šæŸ¥æ‰¾<code>k</code>ä¸ªæœ€è¿‘é‚»ä¸º<code>O(m log(m) n log(k))</code>ï¼Œä¼˜åŒ–æƒé‡ä¸º<code>O(m n k^3)</code>ï¼Œå»ºç«‹ä½ç»´è¡¨ç¤ºä¸º<code>O(d m^2)</code>ã€‚</p>
<h4 id="å…¶ä»–é™ç»´æ–¹æ³•"><a href="#å…¶ä»–é™ç»´æ–¹æ³•" class="headerlink" title="å…¶ä»–é™ç»´æ–¹æ³•"></a>å…¶ä»–é™ç»´æ–¹æ³•</h4><ul>
<li>å¤šç»´ç¼©æ”¾ï¼ˆMDSï¼‰åœ¨å°è¯•ä¿æŒå®ä¾‹ä¹‹é—´è·ç¦»çš„åŒæ—¶é™ä½äº†ç»´åº¦</li>
<li>Isomap é€šè¿‡å°†æ¯ä¸ªå®ä¾‹è¿æ¥åˆ°æœ€è¿‘çš„é‚»å±…æ¥åˆ›å»ºå›¾å½¢ï¼Œç„¶ååœ¨å°è¯•ä¿æŒå®ä¾‹ä¹‹é—´çš„æµ‹åœ°è·ç¦»æ—¶é™ä½ç»´åº¦ã€‚</li>
<li>t-åˆ†å¸ƒéšæœºé‚»åŸŸåµŒå…¥ï¼ˆt-Distributed Stochastic Neighbor Embeddingï¼Œ<strong>t-SNE</strong>ï¼‰å¯ä»¥ç”¨äºé™ä½ç»´åº¦ï¼ŒåŒæ—¶è¯•å›¾ä¿æŒç›¸ä¼¼çš„å®ä¾‹ä¸´è¿‘å¹¶å°†ä¸ç›¸ä¼¼çš„å®ä¾‹åˆ†å¼€ã€‚å®ƒä¸»è¦ç”¨äºå¯è§†åŒ–ï¼Œå°¤å…¶æ˜¯ç”¨äºå¯è§†åŒ–é«˜ç»´ç©ºé—´ä¸­çš„å®ä¾‹ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥å°†MNISTå›¾åƒé™ç»´åˆ° 2D å¯è§†åŒ–ï¼‰ã€‚</li>
<li>çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLinear Discriminant Analysisï¼ŒLDAï¼‰å®é™…ä¸Šæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œä½†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šå­¦ä¹ ç±»ä¹‹é—´æœ€æœ‰åŒºåˆ«çš„è½´ï¼Œç„¶åä½¿ç”¨è¿™äº›è½´æ¥å®šä¹‰ç”¨äºæŠ•å½±æ•°æ®çš„è¶…å¹³é¢ã€‚LDA çš„å¥½å¤„æ˜¯æŠ•å½±ä¼šå°½å¯èƒ½åœ°ä¿æŒå„ä¸ªç±»ä¹‹é—´è·ç¦»ï¼Œæ‰€ä»¥åœ¨è¿è¡Œå¦ä¸€ç§åˆ†ç±»ç®—æ³•ï¼ˆå¦‚ SVM åˆ†ç±»å™¨ï¼‰ä¹‹å‰ï¼ŒLDA æ˜¯å¾ˆå¥½çš„é™ç»´æŠ€æœ¯ã€‚</li>
</ul>
<h3 id="ç»ƒä¹ -2"><a href="#ç»ƒä¹ -2" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>å‡å°‘æ•°æ®é›†ç»´åº¦çš„ä¸»è¦åŠ¨æœºæ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>åŠ¨æœºï¼š</p>
<ol>
<li>åŠ å¿«è®­ç»ƒé€Ÿåº¦(ç­›é€‰æ‰ä¸€äº›å™ªéŸ³å’Œä¸å¿…è¦çš„ç»†èŠ‚ï¼Œå¯èƒ½ä¼šè®©ç»“æœæ¯”é™ç»´ä¹‹å‰æ›´å¥½)</li>
<li>æ•°æ®å¯è§†åŒ–æ–¹é¢ï¼šé™ä½ç‰¹å¾ç»´åº¦åˆ° 2ï¼ˆæˆ–è€… 3ï¼‰ç»´ä»è€Œå¯ä»¥åœ¨å›¾ä¸­ç”»å‡ºä¸€ä¸ªé«˜ç»´åº¦çš„è®­ç»ƒé›†ï¼Œå¯ä»¥é€šè¿‡è§†è§‰ç›´è§‚çš„å‘ç°ä¸€äº›éå¸¸é‡è¦çš„ä¿¡æ¯</li>
<li>èŠ‚çœç©ºé—´</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>ä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œé™ä½ç®—æ³•åç»­æ€§èƒ½</li>
<li>ä½¿å·¥ä½œæµæ°´çº¿æ›´å¤æ‚å› è€Œæ›´éš¾ç»´æŠ¤</li>
<li>é™ä½å¯è§£é‡Šæ€§</li>
</ol>
</blockquote>
</li>
<li><p>ä»€ä¹ˆæ˜¯ç»´åº¦çˆ†ç‚¸ï¼Ÿ</p>
<blockquote>
<p>ç»´åº¦çˆ†ç‚¸æ˜¯æŒ‡é«˜ç»´ç©ºé—´ä¸­å‡ºç°äº†è®¸å¤šä½ç»´ç©ºé—´ä¸å­˜åœ¨çš„é—®é¢˜ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„è¡¨ç°æ˜¯ï¼Œéšæœºé‡‡æ ·çš„é«˜ç»´å‘é‡é€šå¸¸éå¸¸ç¨€ç–ï¼Œå¢åŠ äº†è¿‡åº¦æ‹Ÿåˆçš„é£é™©ï¼Œä½¿å¾—åœ¨æ²¡æœ‰å¤§é‡è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹å¾ˆéš¾è¯†åˆ«æ•°æ®ä¸­çš„æ¨¡å¼ã€‚</p>
</blockquote>
</li>
<li><p>ä¸€æ—¦å¯¹æŸæ•°æ®é›†é™ç»´ï¼Œæˆ‘ä»¬å¯èƒ½æ¢å¤å®ƒå—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œæ€æ ·åšæ‰èƒ½æ¢å¤ï¼Ÿå¦‚æœä¸å¯ä»¥ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸€æ—¦æ•°æ®é›†é€šè¿‡é™ç»´é™åˆ°äº†ä¸€ä¸ªè¾ƒå°çš„ç»´åº¦ï¼Œå°±å‡ ä¹ä¸ä¼šå®Œå…¨å¤ç°ï¼Œå› ä¸ºåœ¨ç»´åº¦å‡å°çš„è¿‡ç¨‹ä¸­ï¼ŒæŸå¤±äº†ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼ŒPCAæœ‰é€†è¿‡ç¨‹ï¼Œå¯ä»¥é‡æ„ä¸€ä¸ªå’ŒåŸå§‹æ•°æ®é›†æ¯”è¾ƒç›¸ä¼¼çš„æ•°æ®é›†ï¼Œä½†æ˜¯t-SNEæ²¡æœ‰ã€‚</p>
</blockquote>
</li>
<li><p>PCA å¯ä»¥ç”¨äºé™ä½ä¸€ä¸ªé«˜åº¦éçº¿æ€§å¯¹æ•°æ®é›†å—ï¼Ÿ</p>
<blockquote>
<p>PCAå¯ä»¥æ˜¾è‘—é™ä½å¤§å¤šæ•°æ•°æ®é›†çš„ç»´æ•°ï¼Œå³ä½¿ä»–ä»¬æ˜¯é«˜åº¦éçº¿æ€§çš„ï¼Œå› ä¸ºå®ƒè‡³å°‘å¯ä»¥æ¶ˆé™¤æ— ç”¨çš„ç»´åº¦ï¼Œç„¶è€Œå¦‚æœæ²¡æœ‰æ— ç”¨çš„ç»´åº¦ï¼Œä¾‹å¦‚â€ç‘å£«å·â€ï¼Œä½¿ç”¨PCAé™ç»´å°†ä¼šæŸå¤±è®¸å¤šä¿¡æ¯ã€‚</p>
</blockquote>
</li>
<li><p>å‡è®¾ä½ å¯¹ä¸€ä¸ª 1000 ç»´çš„æ•°æ®é›†åº”ç”¨ PCAï¼ŒåŒæ—¶è®¾ç½®æ–¹å·®è§£é‡Šç‡ä¸º 95%ï¼Œä½ çš„æœ€ç»ˆæ•°æ®é›†å°†ä¼šæœ‰å¤šå°‘ç»´ï¼Ÿ</p>
<blockquote>
<p>å–å†³äºæ•°æ®é›†</p>
<p>å¦‚æœæ•°æ®é›†ç”±å‡ ä¹å®Œå…¨å¯¹é½çš„ç‚¹ç»„æˆï¼Œè¯¥æƒ…å†µä¸‹ï¼ŒPCAå¯ä»¥æŠŠæ•°æ®é™åˆ°ä¸€ç»´ï¼Œå¹¶ä¿æŒ95%çš„æ–¹å·®ç»“å®ç‡</p>
<p>å¦‚æœæ•°æ®é›†ä¸­çš„ç‚¹å®Œå…¨éšæœºï¼Œåˆ™è¯¥æƒ…å†µä¸‹ï¼Œéœ€è¦é™åˆ°æ‰€æœ‰ç»´åº¦ï¼Œå¹¶ä¸”æ¯ä¸€ç»´åº¦éƒ½æœ‰95%çš„æ–¹å·®ã€‚</p>
<p><img src="https://img.cntofu.com/book/hands_on_Ml_with_Sklearn_and_TF/images/chapter_8/8-8.jpeg" alt="img"></p>
</blockquote>
</li>
<li><p>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨æ™®é€šçš„ PCAï¼Œå¢é‡ PCAï¼Œéšæœº PCA å’Œæ ¸ PCAï¼Ÿ</p>
<blockquote>
<p>ä¸€èˆ¬é»˜è®¤ä½¿ç”¨æ™®é€šçš„PCAï¼Œä½†å®ƒåªåœ¨æ•°æ®é›†é€‚åˆå†…å­˜çš„æƒ…å†µä¸‹å·¥ä½œã€‚</p>
<p>å¢é‡PCAå¯¹äºä¸é€‚åˆå†…å­˜çš„å¤§å‹æ•°æ®é›†æœ‰ç”¨ï¼Œå¯ä»¥åˆ†æ‰¹è®­ç»ƒï¼Œä¸€æ¬¡åªå¯¹ä¸€ä¸ªæ‰¹é‡ä½¿ç”¨ IPCA ç®—æ³•ã€‚ä½†å®ƒæ¯”å¸¸è§„PCAè¦æ…¢ï¼Œæ‰€ä»¥å¦‚æœæ•°æ®é›†é€‚åˆå†…å­˜åº”è¯¥é€‰æ‹©å¸¸è§„çš„PCAã€‚å¢é‡PCAä¹Ÿé€‚ç”¨äºåœ¨çº¿ä»»åŠ¡ï¼Œå½“ä¸æ–­æœ‰æ–°å®ä¾‹åˆ°è¾¾ï¼Œéœ€è¦åŠ¨æ€åº”ç”¨PCAæ—¶ã€‚</p>
<p>éšæœºPCAï¼šå½“æƒ³è¦å¤§å¤§å‡å°‘ç»´åº¦å¹¶ä¸”æ•°æ®é›†é€‚åˆæ—¶ï¼Œå®ƒæ¯”æ™®é€šPCAå¿«å¾—å¤šã€‚</p>
<p>æ•°æ®å‘ˆç°å¤æ‚çš„é«˜ç»´éçº¿æ€§æ—¶ï¼Œä½¿ç”¨æ ¸PCA</p>
</blockquote>
</li>
<li><p>ä½ è¯¥å¦‚ä½•è¯„ä»·ä½ çš„é™ç»´ç®—æ³•åœ¨ä½ æ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼Ÿ</p>
<blockquote>
<p>ä¸€ä¸ªé™ç»´ç®—æ³•åœ¨ä¸ä¸¢å¤±å¤ªå¤šä¿¡æ¯çš„æƒ…å†µä¸‹ä»æ•°æ®é›†ä¸­æ¶ˆé™¤äº†å¤§é‡çš„ç»´æ•°ï¼Œé‚£ä¹ˆå®ƒçš„æ€§èƒ½å°±ä¼šå¾ˆå¥½ã€‚</p>
<p>ä¸€ç§æµ‹é‡æ–¹æ³•æ˜¯åº”ç”¨åå‘å˜æ¢å¹¶æµ‹é‡é‡æ„è¯¯å·®ã€‚ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é™ç»´ç®—æ³•éƒ½æä¾›äº†åå‘è½¬æ¢ã€‚</p>
<p>å¦‚æœå°†é™ç»´ä½œä¸ºå¦ä¸€ç§æœºå™¨å­¦ä¹ ç®—æ³•å‰çš„é¢„å¤„ç†æ­¥éª¤ï¼Œé‚£ä¹ˆå¯ä»¥ç®€å•åœ°æµ‹é‡ç¬¬äºŒç§ç®—æ³•çš„æ€§èƒ½;å¦‚æœé™ç»´ä¸ä¼šä¸¢å¤±å¤ªå¤šä¿¡æ¯ï¼Œé‚£ä¹ˆç®—æ³•çš„æ€§èƒ½åº”è¯¥ä¸ä½¿ç”¨åŸå§‹æ•°æ®é›†æ—¶ä¸€æ ·å¥½ã€‚</p>
</blockquote>
</li>
<li><p>å°†ä¸¤ä¸ªä¸åŒçš„é™ç»´ç®—æ³•ä¸²è”ä½¿ç”¨æœ‰æ„ä¹‰å—ï¼Ÿ</p>
<blockquote>
<p>æœ‰</p>
<p>ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ä½¿ç”¨PCAå¿«é€Ÿæ‘†è„±å¤§é‡æ— ç”¨çš„ç»´æ•°ï¼Œç„¶ååº”ç”¨å¦ä¸€ç§æ…¢å¾—å¤šçš„é™ç»´ç®—æ³•ï¼Œå¦‚LLEã€‚è¿™ç§åˆ†ä¸¤æ­¥çš„æ–¹æ³•å¯èƒ½ä¼šäº§ç”Ÿä¸ä»…ä½¿ç”¨LLEç›¸åŒçš„æ€§èƒ½ï¼Œä½†å¤§å¤§ç¼©çŸ­äº†æ—¶é—´ã€‚</p>
</blockquote>
</li>
<li><p>åŠ è½½ MNIST æ•°æ®é›†ï¼ˆåœ¨ç¬¬ 3 ç« ä¸­ä»‹ç»ï¼‰ï¼Œå¹¶å°†å…¶åˆ†æˆä¸€ä¸ªè®­ç»ƒé›†å’Œä¸€ä¸ªæµ‹è¯•é›†ï¼ˆå°†å‰ 60,000 ä¸ªå®ä¾‹ç”¨äºè®­ç»ƒï¼Œå…¶ä½™ 10,000 ä¸ªç”¨äºæµ‹è¯•ï¼‰ã€‚åœ¨æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªéšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œå¹¶è®°å½•äº†èŠ±è´¹å¤šé•¿æ—¶é—´ï¼Œç„¶ååœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ PCA é™ä½æ•°æ®é›†çš„ç»´åº¦ï¼Œè®¾ç½®æ–¹å·®è§£é‡Šç‡ä¸º 95%ã€‚åœ¨é™ç»´åçš„æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªæ–°çš„éšæœºæ£®æ—åˆ†ç±»å™¨ï¼Œå¹¶æŸ¥çœ‹éœ€è¦å¤šé•¿æ—¶é—´ã€‚è®­ç»ƒé€Ÿåº¦æ›´å¿«ï¼Ÿæ¥ä¸‹æ¥è¯„ä¼°æµ‹è¯•é›†ä¸Šçš„åˆ†ç±»å™¨ï¼šå®ƒä¸ä»¥å‰çš„åˆ†ç±»å™¨æ¯”è¾ƒèµ·æ¥å¦‚ä½•ï¼Ÿ</p>
</li>
<li><p>ä½¿ç”¨ t-SNE å°† MNIST æ•°æ®é›†ç¼©å‡åˆ°äºŒç»´ï¼Œå¹¶ä½¿ç”¨ Matplotlib ç»˜åˆ¶ç»“æœå›¾ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ 10 ç§ä¸åŒé¢œè‰²çš„æ•£ç‚¹å›¾æ¥è¡¨ç¤ºæ¯ä¸ªå›¾åƒçš„ç›®æ ‡ç±»åˆ«ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥åœ¨æ¯ä¸ªå®ä¾‹çš„ä½ç½®å†™å…¥å½©è‰²æ•°å­—ï¼Œç”šè‡³å¯ä»¥ç»˜åˆ¶æ•°å­—å›¾åƒæœ¬èº«çš„é™ç»´ç‰ˆæœ¬ï¼ˆå¦‚æœç»˜åˆ¶æ‰€æœ‰æ•°å­—ï¼Œåˆ™å¯è§†åŒ–å¯èƒ½ä¼šè¿‡äºæ··ä¹±ï¼Œå› æ­¤æ‚¨åº”è¯¥ç»˜åˆ¶éšæœºæ ·æœ¬æˆ–åªåœ¨å‘¨å›´æ²¡æœ‰å…¶ä»–å®ä¾‹è¢«ç»˜åˆ¶çš„æƒ…å†µä¸‹ç»˜åˆ¶ï¼‰ã€‚ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªåˆ†éš”è‰¯å¥½çš„çš„å¯è§†åŒ–æ•°å­—é›†ç¾¤ã€‚å°è¯•ä½¿ç”¨å…¶ä»–é™ç»´ç®—æ³•ï¼Œå¦‚ PCAï¼ŒLLE æˆ– MDSï¼Œå¹¶æ¯”è¾ƒå¯è§†åŒ–ç»“æœã€‚</p>
</li>
</ol>
<hr>
<h2 id="ç¬¬09ç« -éç›‘ç£å­¦ä¹ "><a href="#ç¬¬09ç« -éç›‘ç£å­¦ä¹ " class="headerlink" title="ç¬¬09ç«  éç›‘ç£å­¦ä¹ "></a>ç¬¬09ç«  éç›‘ç£å­¦ä¹ </h2><p>é™ç»´å°±æ˜¯æœ€å¸¸ç”¨çš„éç›‘ç£æœºå™¨å­¦ä¹ æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<h3 id="èšç±»ï¼ˆclusteringï¼‰"><a href="#èšç±»ï¼ˆclusteringï¼‰" class="headerlink" title="èšç±»ï¼ˆclusteringï¼‰"></a>èšç±»ï¼ˆclusteringï¼‰</h3><p>å°†ç›¸ä¼¼çš„å®ä¾‹èšé›†åœ¨ä¸€èµ·</p>
<p><strong>å’Œåˆ†ç±»çš„åŒºåˆ«ï¼šåˆ†ç±»é—®é¢˜æœ‰æ ‡ç­¾ï¼Œè€Œèšç±»é—®é¢˜æ²¡æœ‰æ ‡ç­¾ã€‚</strong></p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<p>é™ç»´ï¼ŒåŠç›‘ç£å­¦ä¹ ï¼Œå›¾åƒåˆ†ç±»ï¼Œæ¨èç³»ç»Ÿï¼Œæœç´¢å¼•æ“ï¼Œå®¢æˆ·ç»†åˆ†ç­‰</p>
<p>ä¹Ÿå¯ä»¥ç”¨äºå¼‚å¸¸æ£€æµ‹ï¼šæ•°æ®èšç±»åï¼Œå’Œæ‰€æœ‰clusterç›¸èšå¾ˆè¿œçš„æ•°æ®ç‚¹å¯èƒ½æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
<p>åŠç›‘ç£å­¦ä¹ ï¼šåªæœ‰è‹¥å¹²æ•°æ®æœ‰æ ‡ç­¾ï¼Œå¯ä»¥èšç±»åå°†æ ‡ç­¾ä¼ é€’ç»™åŒä¸€cluster</p>
<p>æœç´¢å¼•æ“ï¼šä¾‹å¦‚æœç´¢å›¾ç‰‡ï¼Œå°†æ‰€æœ‰å›¾ç‰‡èšç±»ï¼Œç„¶åæ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ï¼Œåˆ¤æ–­åœ¨å“ªä¸€ä¸ªclusterã€‚</p>
<p>image segmentationï¼šæ•°æ®ç›‘æµ‹ï¼Œè¿½è¸ªï¼Œç›‘æµ‹ç‰©ä½“çš„è¾¹ç•Œ</p>
<blockquote>
<p> å‚è€ƒï¼š<a href="https://www.cnblogs.com/LittleHann/p/6595148.html" target="_blank" rel="noopener">https://www.cnblogs.com/LittleHann/p/6595148.html</a></p>
<p>â€‹            <a href="https://zhuanlan.zhihu.com/p/150333968" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/150333968</a></p>
</blockquote>
<p>ä¸€äº›ç®—æ³•æœ‰ä¸­å¿ƒï¼šcentroid ï¼ˆK-Meansï¼‰</p>
<p>ä¸€äº›ç®—æ³•åˆ†å±‚ï¼šhierarchical</p>
<p>ä¸€äº›ç®—æ³•åŸºäºå¯†åº¦ï¼šDBSCAN</p>
<p>ä¸€äº›ç®—æ³•åŸºäºæ¦‚ç‡ï¼šGMMï¼ˆé«˜æ–¯æ··åˆæ¨¡å‹ï¼‰</p>
<h4 id="K-Means"><a href="#K-Means" class="headerlink" title="K-Means"></a>K-Means</h4><p>1957å¹´ï¼ŒStuart Lloydåœ¨Bell Labsæå‡ºã€‚è¯¥ç®—æ³•ä¸€èˆ¬æ˜¯æœ€å¿«çš„èšç±»æ–¹æ³•ï¼Œä¸”ä¸€å®šä¼šæ”¶æ•›ï¼Œä¸ä¼šæ°¸è¿œéœ‡è¡ã€‚</p>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼ˆæ•°æ®å…·æœ‰clustering structureï¼‰å’Œå®ä¾‹çš„ä¸ªæ•°mä»¥åŠç±»çš„ä¸ªæ•°kå‘ˆçº¿æ€§å…³ç³»ã€‚å¦åˆ™ï¼Œæœ€åçš„æƒ…å†µï¼ŒæŒ‡æ•°å¢é•¿ï¼ˆä¸€èˆ¬å¾ˆå°‘å‘ç”Ÿï¼‰ã€‚</p>
<p><strong>ç®—æ³•ï¼š</strong></p>
<ol>
<li>åˆå§‹åŒ–ä¸­å¿ƒï¼Œç„¶åå°†æ•°æ®åˆ†åˆ°æœ€è¿‘é‚»çš„ç±»ä¸­ã€‚</li>
<li>æŠŠæ‰€æœ‰å®ä¾‹åˆ†åˆ°ç›¸åº”çš„ç±»ä¸­ï¼Œè®¡ç®—æ•°æ®ä¸­å¿ƒ</li>
<li>æŒ‰ç…§æ–°çš„ä¸­å¿ƒï¼Œé‡æ–°å°†å®ä¾‹åˆ†åˆ°ç›¸åº”çš„ç±»ä¸­ï¼Œè®¡ç®—æ•°æ®ä¸­å¿ƒ</li>
<li>é‡å¤2,3ï¼ŒçŸ¥é“ä¸­å¿ƒä¸å‘ç”Ÿå˜åŒ–</li>
</ol>
<p><strong>hard-clusteringå’Œsoft-clustering</strong></p>
<p>hard-clusteringå°†å®ä¾‹åˆ†åˆ°ä¸€ä¸ªclusterä¸­</p>
<p>soft-clusteringç»™å‡ºæ¯ä¸ªå®ä¾‹åœ¨æ¯ä¸€ä¸ªclusterä¸­çš„è¯„åˆ†ï¼Œå¯ä»¥æ˜¯è·ç¦»ï¼Œæˆ–è€…RBFç­‰ç­‰</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>è™½ç„¶K-Meansä¸€å®šä¼šæ”¶æ•›ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£ï¼Œå’Œåˆå§‹ä¸­å¿ƒçš„è®¾ç½®æœ‰å¾ˆå¤§çš„å…³ç³»ã€‚</p>
<p><strong>è§£å†³åŠæ³•ï¼š</strong></p>
<p>åˆå§‹åŒ–èšç±»ä¸­å¿ƒçš„æ–¹æ³•ï¼š</p>
<ol>
<li><p>æå‰çŸ¥é“å¤§æ¦‚çš„ä¸­å¿ƒä½ç½®ï¼Œå¯ä»¥ç”¨<code>init</code>å‚æ•°ä¼ é€’ç»™KMeans</p>
</li>
<li><p>å¤šæ¬¡è¿è¡Œkmeansï¼Œä¿ç•™æœ€å¥½çš„ç»“æœã€‚<code>n_initï¼Œ</code>sklearnä¸­é»˜è®¤ä¸º10ï¼Œç”¨intertiaï¼ˆæ‰€æœ‰å®ä¾‹è·ç¦»å…¶æœ€è¿‘é‚»èšç±»ä¸­å¿ƒçš„è·ç¦»çš„å¹³æ–¹å’Œï¼‰åˆ¤å®šå¥½åï¼ˆè¶Šå°è¶Šå¥½ï¼‰</p>
<blockquote>
<p>sklearnä¸­çš„scoreéµå¾ªâ€œgreater is betterâ€çš„å‡†åˆ™ï¼Œæ‰€ä»¥scoreæ˜¯intertiaçš„è´Ÿæ•°ã€‚</p>
</blockquote>
</li>
<li><p>æ”¹è¿›ç®—æ³•ï¼š<strong>K-Means++</strong>ï¼ˆ2006å¹´ï¼Œç”±David Arthur and Sergei Vassilvitskiiæå‡ºï¼‰</p>
<blockquote>
<p>åˆå§‹åŒ–èšç±»ä¸­å¿ƒå°½å¯èƒ½å½¼æ­¤è¿œç¦»ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å±€éƒ¨æœ€ä¼˜è§£ã€‚</p>
<ol>
<li>éšæœºé€‰å–ç¬¬ä¸€ä¸ªä¸­å¿ƒ$c^{(1)}$</li>
<li>ä»¥æ¦‚ç‡$D(x^{(i)})^2/\sum_{j=1}^m D(x^{(j)})^2$ é€‰å–å®ä¾‹ä½œä¸ºæ–°çš„ä¸­å¿ƒ$c^{(i)}$ï¼Œ$D(x^{(i)})$è¡¨ç¤ºå®ä¾‹è·ç¦»å·²ç»é€‰å®šçš„ä¸­å¿ƒçš„è·ç¦»ã€‚</li>
<li>é‡å¤2ç›´åˆ°ç¡®å®šæ‰€æœ‰ä¸­å¿ƒ</li>
</ol>
</blockquote>
<p>sklearnä¸­é»˜è®¤ä½¿ç”¨è¿™ç§ç®—æ³•ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®<code>init=random</code>ä½¿ç”¨åŸç”ŸK-Means</p>
</li>
</ol>
<h4 id="åŠ é€ŸK-Meansç®—æ³•"><a href="#åŠ é€ŸK-Meansç®—æ³•" class="headerlink" title="åŠ é€ŸK-Meansç®—æ³•"></a>åŠ é€ŸK-Meansç®—æ³•</h4><blockquote>
<p>ç”±Charles Elkanäº2003å¹´æå‡ºã€‚åˆ©ç”¨<strong>ä¸‰è§’ä¸ç­‰å¼çš„æ€§è´¨ï¼ˆtriangle inequalityï¼‰ï¼Œè®°å½•å®ä¾‹å’Œèšç±»ä¸­å¿ƒè·ç¦»çš„ä¸Šé™å’Œä¸‹é™ï¼ˆlower and upper boundsï¼‰åŠ é€ŸK-Meansï¼Œ</strong>é¿å…è®¸å¤šæ— ç”¨çš„è·ç¦»è®¡ç®—.</p>
<p>sklearnä¸­é»˜è®¤ä½¿ç”¨è¿™ç§ç®—æ³•ã€‚</p>
</blockquote>
<h4 id="mini-batch-K-Meansç®—æ³•"><a href="#mini-batch-K-Meansç®—æ³•" class="headerlink" title="mini-batch K-Meansç®—æ³•"></a>mini-batch K-Meansç®—æ³•</h4><blockquote>
<p>2000å¹´ç”±David Sculleyæå‡ºï¼Œå¯ä»¥å¤„ç†å†…å­˜å¤„ç†ä¸ä¸‹çš„æ•°æ®ï¼ˆä¹Ÿå¯ä»¥memmapï¼‰ï¼Œä¸regular K-Meansç›¸æ¯”ï¼Œå¿«3-4å€ï¼Œä½†intertiaè¾ƒå·®ã€‚</p>
<p>sklearnä¸­æœ‰MiniBatchKMeansç±»ã€‚</p>
</blockquote>
<h4 id="ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°"><a href="#ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°" class="headerlink" title="ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°"></a>ç¡®å®šæœ€ä½³ç±»çš„ä¸ªæ•°</h4><p>ä¸èƒ½ç”¨intertiaï¼Œå› ä¸ºç±»è¶Šå¤šï¼Œintertiaè¶Šå°ã€‚é€‰å–intertia-kçš„è‚˜éƒ¨ç‚¹ã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0908.png" alt="mls2 0908"></p>
<h4 id="silhouette-scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰"><a href="#silhouette-scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰" class="headerlink" title="silhouette scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰"></a><em>silhouette scoreï¼ˆå¹³å‡è½®å»“ç³»æ•°ï¼‰</em></h4><p>silhouette scoreï¼šæ‰€æœ‰å®ä¾‹silhouette efficientï¼ˆè½®å»“ç³»æ•°ï¼‰çš„å¹³å‡ã€‚</p>
<p>è½®å»“ç³»æ•°ï¼ˆ-1~1ï¼‰ï¼š(b â€“ a) / max(a, b)ï¼Œaæ˜¯åŒç±»ä¸­å…¶ä»–å®ä¾‹è·ç¦»çš„å¹³å‡ï¼ˆthe mean intra-cluster distanceï¼‰ï¼Œbæ˜¯åˆ°æœ€è¿‘é‚»ç±»ä¸­å…¶ä»–å®ä¾‹çš„å¹³å‡è·ç¦»ï¼ˆthe mean nearest-cluster distance ï¼‰ï¼Œæ¥è¿‘+1,æ„å‘³ç€å®ä¾‹éƒ½å¤„äºå½“å‰ç±»ä¸­ï¼Œæ¥è¿‘-1ï¼Œæ„å‘³ç€å®ä¾‹è¢«åˆ†ç±»åˆ°äº†é”™è¯¯çš„ç±»ï¼Œæ¥è¿‘0ï¼Œæ„å‘³ç€æ•°æ®ç‚¹åœ¨è¾¹ç•Œã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0909.png" alt="mls2 0909"></p>
<p>è¿˜å¯ä»¥ç”»å‡ºsilhouette diagramï¼šç®—å‡ºæ¯ä¸ªå®ä¾‹çš„è½®å»“ç³»æ•°ï¼Œå¹¶å°†å®ƒä»¬åˆ†åˆ°ç›¸åº”çš„ç±»é‡Œï¼š</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0910.png" alt="mls2 0910"></p>
<p>çº¢è‰²è™šçº¿è¡¨ç¤ºsilhouette scoreï¼Œå‡¡æ˜¯å¤„äºè™šçº¿å·¦ä¾§çš„åˆ€å‹å›¾ï¼Œè¡¨ç¤ºè¯¥ç±»çš„å®ä¾‹å’Œå…¶ä»–ç±»è·ç¦»è¿‡è¿‘ã€‚</p>
<p>k=4å’Œ5ä¸­ç±»çš„å¤§å°ä¸ä¸€æ ·ï¼Œ4ä¸­æ©™è‰²çš„ç±»æ˜æ˜¾æ›´å¤§ï¼Œè€Œ5ä¸­ç±»æ›´å‡åŒ€ï¼Œæ‰€ä»¥å³ä½¿4çš„silhouette scoreæ›´å¤§ï¼Œçœ‹ä¸Šå»5çš„è¡¨ç°æ›´å¥½ã€‚</p>
<h4 id="K-Meansçš„å±€é™æ€§"><a href="#K-Meansçš„å±€é™æ€§" class="headerlink" title="K-Meansçš„å±€é™æ€§"></a>K-Meansçš„å±€é™æ€§</h4><ol>
<li><p>éœ€è¦æå‰è·‘å‡ æ¬¡ï¼Œé˜²æ­¢é™·å…¥è¿‡æ‹Ÿåˆ</p>
</li>
<li><p>éœ€è¦è‡ªå·±ç¡®å®šç±»çš„ä¸ªæ•°</p>
</li>
<li><p>å½“ç±»çš„å¤§å°ä¸å‡ä¸€ï¼Œæˆ–è€…å¯†åº¦ä¸ä¸€ï¼Œæˆ–è€…åˆ†å¸ƒä¸æ˜¯çƒå½¢æ—¶ï¼Œè¡¨ç°ä¸å¥½</p>
<blockquote>
<p>æ¤­åœ†åˆ†å¸ƒï¼ˆelliptical clustersï¼‰ï¼ŒGaussian mixture modelè¡¨ç°æ›´å¥½</p>
<p>è¿è¡ŒK-Meansä¹‹å‰ï¼Œscale the feature</p>
</blockquote>
</li>
</ol>
<h4 id="K-Meansçš„å…·ä½“åº”ç”¨"><a href="#K-Meansçš„å…·ä½“åº”ç”¨" class="headerlink" title="K-Meansçš„å…·ä½“åº”ç”¨"></a>K-Meansçš„å…·ä½“åº”ç”¨</h4><p><strong>å›¾åƒåˆ†å‰²</strong> <em>Image segmentation</em> ï¼šå°†å›¾åƒåˆ†æˆè‹¥å¹²éƒ¨åˆ†ã€‚</p>
<blockquote>
<ol>
<li>è¯­ä¹‰åˆ†å‰²ï¼ˆsemantic segmentationï¼‰</li>
<li>å®ä¾‹åˆ†å‰²ï¼ˆinstance segmentationï¼‰</li>
</ol>
<p>ä¸€èˆ¬åŸºäºCNNå®ç°ã€‚</p>
</blockquote>
<p>é¢œè‰²åˆ†å‰²ï¼ˆcolor segmentationï¼‰ï¼šåº”ç”¨åœºæ™¯ï¼šä»å«æ˜Ÿå›¾è®¡ç®—æ£®æ—é¢ç§¯çš„å¤§å°ã€‚</p>
<p><strong>æ•°æ®é¢„å¤„ç†</strong></p>
<p>ç›‘ç£å­¦ä¹ å‰ä½¿ç”¨K-Meanså¯¹æ•°æ®è¿›è¡Œèšç±»ã€‚é™ä½äº†æ•°æ®çš„ç»´åº¦ï¼Œæ›´é‡è¦çš„æ˜¯èšç±»å¾—åˆ°çš„ç‰¹å¾æ›´åŠ çº¿æ€§å¯åˆ†ã€‚</p>
<p><strong>ç”¨äºåŠç›‘ç£å­¦ä¹ </strong></p>
<p>å½“æœ‰å¾ˆå¤šæ²¡æœ‰æ ‡ç­¾çš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨K-Meanså¯¹æœ‰æ ‡ç­¾çš„æ•°æ®è¿›è¡Œèšç±»ï¼Œå°†æœ€æ¥è¿‘ä¸­å¿ƒçš„å›¾ç‰‡ï¼ˆæˆ–å…¶ä»–ï¼‰ï¼ˆrepresentative imageï¼‰è¡¨ç¤ºå‡ºæ¥ã€‚å°†æ ‡ç­¾ä¼ é€’ç»™ç±»ä¸­å…¶ä»–æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšlabel  propagationã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¾¹ç•Œä¸Šçš„æ•°æ®ç‚¹å¯èƒ½è¢«é”™è¯¯çš„åˆ†ç±»äº†ï¼Œæ‰€ä»¥æ ‡ç­¾ä¼ é€’æœ€å¥½ä¼ é€’ç»™è·ç¦»èšç±»ä¸­å¿ƒæœ€è¿‘çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆæ¯”å¦‚20%ï¼‰</p>
</blockquote>
<h4 id="ä¸»åŠ¨å­¦ä¹ -active-learning"><a href="#ä¸»åŠ¨å­¦ä¹ -active-learning" class="headerlink" title="ä¸»åŠ¨å­¦ä¹ (active learning)"></a>ä¸»åŠ¨å­¦ä¹ (active learning)</h4><p>ä¸ç¡®å®šåº¦é‡‡æ ·<code>Uncertainty Sampling</code></p>
<ol>
<li>ç”¨ä»…æœ‰çš„æœ‰æ ‡ç­¾æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œç”¨è¯¥æ¨¡å‹é¢„æµ‹æ‰€æœ‰æ— æ ‡ç­¾æ•°æ®</li>
<li>å°†é¢„æµ‹ç»“æœä¸­æœ€ä¸å‡†ç¡®ï¼ˆæ¦‚ç‡æœ€ä½ï¼‰çš„å®ä¾‹æ‹¿å‡ºæ¥ç»™ä¸“å®¶è´´æ ‡ç­¾</li>
<li>é‡å¤ä¸Šè¿°è¿‡ç¨‹</li>
</ol>
<p>æ›´æ·±å…¥äº†è§£å¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_39856931/article/details/106433187" target="_blank" rel="noopener">https://blog.csdn.net/qq_39856931/article/details/106433187</a></p>
<h4 id="KNNå’ŒK-Meansçš„åŒºåˆ«"><a href="#KNNå’ŒK-Meansçš„åŒºåˆ«" class="headerlink" title="KNNå’ŒK-Meansçš„åŒºåˆ«"></a>KNNå’ŒK-Meansçš„åŒºåˆ«</h4><div class="table-container">
<table>
<thead>
<tr>
<th><strong>KNN</strong></th>
<th><strong>K-Means</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1.KNNæ˜¯åˆ†ç±»ç®—æ³•  2.ç›‘ç£å­¦ä¹  3.å–‚ç»™å®ƒçš„æ•°æ®é›†æ˜¯å¸¦labelçš„æ•°æ®ï¼Œå·²ç»æ˜¯å®Œå…¨æ­£ç¡®çš„æ•°æ®</td>
<td>1.K-Meansæ˜¯èšç±»ç®—æ³•  2.éç›‘ç£å­¦ä¹  3.å–‚ç»™å®ƒçš„æ•°æ®é›†æ˜¯æ— labelçš„æ•°æ®ï¼Œæ˜¯æ‚ä¹±æ— ç« çš„ï¼Œç»è¿‡èšç±»åæ‰å˜å¾—æœ‰ç‚¹é¡ºåºï¼Œå…ˆæ— åºï¼Œåæœ‰åº</td>
</tr>
<tr>
<td>æ²¡æœ‰æ˜æ˜¾çš„å‰æœŸè®­ç»ƒè¿‡ç¨‹ï¼Œå±äºmemory-based learning</td>
<td>æœ‰æ˜æ˜¾çš„å‰æœŸè®­ç»ƒè¿‡ç¨‹</td>
</tr>
<tr>
<td>Kçš„å«ä¹‰ï¼šæ¥äº†ä¸€ä¸ªæ ·æœ¬xï¼Œè¦ç»™å®ƒåˆ†ç±»ï¼Œå³æ±‚å‡ºå®ƒçš„yï¼Œå°±ä»æ•°æ®é›†ä¸­ï¼Œåœ¨xé™„è¿‘æ‰¾ç¦»å®ƒæœ€è¿‘çš„Kä¸ªæ•°æ®ç‚¹ï¼Œè¿™Kä¸ªæ•°æ®ç‚¹ï¼Œç±»åˆ«cå çš„ä¸ªæ•°æœ€å¤šï¼Œå°±æŠŠxçš„labelè®¾ä¸ºc</td>
<td>Kçš„å«ä¹‰ï¼šKæ˜¯äººå·¥å›ºå®šå¥½çš„æ•°å­—ï¼Œå‡è®¾æ•°æ®é›†åˆå¯ä»¥åˆ†ä¸ºKä¸ªç°‡ï¼Œç”±äºæ˜¯ä¾é äººå·¥å®šå¥½ï¼Œéœ€è¦ä¸€ç‚¹å…ˆéªŒçŸ¥è¯†</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>ç›¸ä¼¼ç‚¹ï¼šéƒ½åŒ…å«è¿™æ ·çš„è¿‡ç¨‹ï¼Œç»™å®šä¸€ä¸ªç‚¹ï¼Œåœ¨æ•°æ®é›†ä¸­æ‰¾ç¦»å®ƒæœ€è¿‘çš„ç‚¹ã€‚å³äºŒè€…éƒ½ç”¨åˆ°äº†NN(Nears Neighbor)ç®—æ³•ï¼Œä¸€èˆ¬ç”¨KDæ ‘æ¥å®ç°NNã€‚</td>
</tr>
</tbody>
</table>
</div>
<h4 id="DBSCANï¼ˆDensity-Based-Spatial-Clustering-of-Applications-with-Noiseï¼‰"><a href="#DBSCANï¼ˆDensity-Based-Spatial-Clustering-of-Applications-with-Noiseï¼‰" class="headerlink" title="DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰"></a>DBSCANï¼ˆDensity-Based Spatial Clustering of Applications with Noiseï¼‰</h4><p>åŸºäºå±€éƒ¨å¯†åº¦ä¼°è®¡ï¼ˆlocal density estimationï¼‰ï¼Œè¯¥ç®—æ³•å…è®¸å¯¹ä»»æ„å½¢çŠ¶çš„æ•°æ®è¿›è¡Œèšç±»ã€‚</p>
<ol>
<li>å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹ï¼Œç®—æ³•è®¡ç®—ä¸€ä¸ªå°èŒƒå›´$\epsilon$ å†…æœ‰å¤šå°‘å®ä¾‹ï¼Œè¯¥èŒƒå›´å«åšï¼šå®ä¾‹çš„$\epsilon$-neighborhood</li>
<li>å¦‚æœä¸€ä¸ªå®ä¾‹çš„$\epsilon$-neighborhoodä¸­æœ‰è¶…è¿‡min_samplesä¸ªå®ä¾‹ï¼Œåˆ™è¯¥å®ä¾‹ä¸ºcore instance</li>
<li>æ‰€æœ‰åœ¨åŒä¸€ä¸ªcore instanceå‘¨å›´çš„å®ä¾‹å±äºåŒä¸€ä¸ªç±»ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªcore instanceçš„å‘¨å›´æœ‰å…¶ä»–core instanceã€‚å› æ­¤ï¼Œä¸€ç³»åˆ—ç›¸é‚»çš„core instanceå½¢æˆä¸€ä¸ªcluster</li>
<li>ä»»ä½•å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯core instanceï¼Œå…¶ç›¸é‚»èŒƒå›´å†…ä¹Ÿæ²¡æœ‰core instanceï¼Œä¼šè¢«è®¤ä¸ºæ˜¯å¼‚å¸¸æ•°æ®</li>
</ol>
<p>å½“æ•°æ®çš„å¯ä»¥è¢«ä½å¯†åº¦åŒºåŸŸåˆ†å¼€æ—¶ï¼ŒDBSCANå˜ç°å¾—å¾ˆå¥½ã€‚</p>
<blockquote>
<p>sklearnä¸­çš„DBSCANæ²¡æœ‰predictæ–¹æ³•ï¼Œå¯ä»¥ç”¨DBSCANçš„èšç±»ä¸­å¿ƒï¼ˆæˆ–è€…å…¨éƒ¨æ•°æ®ï¼Œæˆ–è€…é™¤äº†å¼‚å¸¸æ•°æ®çš„å…¶ä»–æ•°æ®ï¼‰è®­ç»ƒå…¶ä»–ç®—æ³•ï¼ˆä¾‹å¦‚KNNï¼‰ï¼Œå†é¢„æµ‹æ–°çš„æ•°æ®ã€‚</p>
</blockquote>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0915.png" alt="mls2 0915"></p>
<p>å…¶å®æœ‰ä¸¤ä¸ªæ•°æ®éœ€è¦è¢«åˆ¤å®šä¸ºå¼‚å¸¸å€¼ã€‚</p>
<p>DBSCANæ˜¯ä¸€ä¸ªç®€å•ä½†æ˜¯å¼ºå¤§çš„èšç±»ç®—æ³•ï¼Œå¯ä»¥å¯¹ä¸è§„åˆ™å½¢çŠ¶åˆ†å¸ƒçš„æ•°æ®è¿›è¡Œèšç±»ï¼Œå¹¶ä¸”åªæœ‰ä¸¤ä¸ªè¶…å‚æ•°epså’Œmin_samplesï¼Œä½†å¦‚æœç±»ä¸­å¯†åº¦å˜åŒ–å¾ˆå¤§ï¼ŒDBSCANçš„è¡¨ç°å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¥½ã€‚</p>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šO(m log m)</p>
<h4 id="å…¶ä»–èšç±»ç®—æ³•"><a href="#å…¶ä»–èšç±»ç®—æ³•" class="headerlink" title="å…¶ä»–èšç±»ç®—æ³•"></a>å…¶ä»–èšç±»ç®—æ³•</h4><h5 id="å±‚æ¬¡èšç±»-Agglomerative-clustering"><a href="#å±‚æ¬¡èšç±»-Agglomerative-clustering" class="headerlink" title="å±‚æ¬¡èšç±»(Agglomerative clustering)"></a>å±‚æ¬¡èšç±»(Agglomerative clustering)</h5><p>æ˜¯ä¸€ç§è‡ªåº•è€Œä¸Šçš„å±‚æ¬¡èšç±»æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®æŒ‡å®šçš„ç›¸ä¼¼åº¦æˆ–è·ç¦»å®šä¹‰è®¡ç®—å‡ºç±»ä¹‹é—´çš„è·ç¦»ã€‚</p>
<ol>
<li>å°†æ¯ä¸€ä¸ªå…ƒç´ å•ç‹¬å®šä¸ºä¸€ç±»</li>
<li>é‡å¤ï¼šæ¯ä¸€è½®éƒ½åˆå¹¶æŒ‡å®šè·ç¦»(å¯¹æŒ‡å®šè·ç¦»çš„ç†è§£å¾ˆé‡è¦)æœ€å°çš„ç±»</li>
<li>ç›´åˆ°æ‰€æœ‰çš„å…ƒç´ éƒ½å½’ä¸ºåŒä¸€ç±»</li>
</ol>
<blockquote>
<p>ç±»ä¼¼æ°´é¢ä¸Šçš„æ³¡æ³¡ï¼Œä¼šä¸ç›¸é‚»çš„æ³¡æ³¡åˆå¹¶</p>
</blockquote>
<p>ä¾æ®å¯¹ç›¸ä¼¼åº¦ï¼ˆè·ç¦»ï¼‰çš„ä¸åŒå®šä¹‰ï¼Œå°†Agglomerative Clusteringçš„èšç±»æ–¹æ³•åˆ†ä¸ºä¸‰ç§ï¼šSingle-linkage, Complete-linkageå’ŒGroup average.<br><strong>Single-linkage</strong>:è¦æ¯”è¾ƒçš„è·ç¦»ä¸ºå…ƒç´ å¯¹ä¹‹é—´çš„æœ€å°è·ç¦»<br><strong>Complete-linkage</strong>:è¦æ¯”è¾ƒçš„è·ç¦»ä¸ºå…ƒç´ å¯¹ä¹‹é—´çš„æœ€å¤§è·ç¦»<br><strong>Group average</strong>ï¼šè¦æ¯”è¾ƒçš„è·ç¦»ä¸ºç±»ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼ˆå¹³å‡è·ç¦»çš„å®šä¹‰ä¸è®¡ç®—ï¼šå‡è®¾æœ‰Aï¼ŒBä¸¤ä¸ªç±»ï¼ŒAä¸­æœ‰nä¸ªå…ƒç´ ï¼ŒBä¸­æœ‰mä¸ªå…ƒç´ ã€‚åœ¨Aä¸Bä¸­å„å–ä¸€ä¸ªå…ƒç´ ï¼Œå¯å¾—åˆ°ä»–ä»¬ä¹‹é—´çš„è·ç¦»ã€‚å°†nmä¸ªè¿™æ ·çš„è·ç¦»ç›¸åŠ ï¼Œå¾—åˆ°è·ç¦»å’Œã€‚æœ€åè·ç¦»å’Œé™¤ä»¥nmå¾—åˆ°Aï¼ŒBä¸¤ä¸ªç±»çš„å¹³å‡è·ç¦»ã€‚ï¼‰</p>
<h5 id="BIRCH"><a href="#BIRCH" class="headerlink" title="BIRCH"></a>BIRCH</h5><p>Balanced Iterative Reducing and Clustering using Hierarchiesï¼Œåˆ©ç”¨å±‚æ¬¡æ–¹æ³•çš„å¹³è¡¡è¿­ä»£è§„çº¦å’Œèšç±»ï¼Œé’ˆå¯¹large databaseï¼Œå¹¶ä¸”æ¯”batch-K Meanså¿«</p>
<p>BIRCHç®—æ³•åˆ©ç”¨äº†ä¸€ä¸ªæ ‘ç»“æ„æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„èšç±»ï¼Œè¿™ä¸ªæ•°ç»“æ„ç±»ä¼¼äºå¹³è¡¡B+æ ‘ï¼Œä¸€èˆ¬å°†å®ƒç§°ä¹‹ä¸ºèšç±»ç‰¹å¾æ ‘(Clustering Feature Treeï¼Œç®€ç§°CF Tree)ã€‚è¿™é¢—æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç”±è‹¥å¹²ä¸ªèšç±»ç‰¹å¾(Clustering Featureï¼Œç®€ç§°CF)ç»„æˆã€‚</p>
<p>å¯å‚è€ƒï¼š<a href="https://www.cnblogs.com/pinard/p/6179132.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinard/p/6179132.html</a></p>
<h5 id="Mean-Shift"><a href="#Mean-Shift" class="headerlink" title="Mean-Shift"></a>Mean-Shift</h5><p>ä¹Ÿå«åšå‡å€¼æ¼‚ç§»ï¼Œåœ¨ç›®æ ‡è¿½è¸ªä¸­åº”ç”¨å¹¿æ³›ã€‚æœ¬èº«å…¶å®æ˜¯ä¸€ç§<strong>åŸºäºå¯†åº¦</strong>çš„èšç±»ç®—æ³•ã€‚</p>
<p>ä¸»è¦æ€è·¯æ˜¯ï¼šä¸­å¿ƒå‘ç€å¯†åº¦é«˜çš„åœ°æ–¹ç§»åŠ¨ï¼Œç›´åˆ°ç§»åŠ¨åˆ°local density maximum</p>
<ol>
<li>è®¡ç®—æŸä¸€å®ä¾‹(A)ä¸å…¶å‘¨å›´åŠå¾„Rå†…çš„å‘é‡è·ç¦»çš„å¹³å‡å€¼Mï¼Œè®¡ç®—å‡ºè¯¥ç‚¹ä¸‹ä¸€æ­¥æ¼‚ç§»ï¼ˆç§»åŠ¨ï¼‰çš„æ–¹å‘ï¼ˆA=M+Aï¼‰ã€‚</li>
<li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰çš„ç‚¹ä¸å†ç§»åŠ¨æ—¶ï¼Œå…¶ä¸å‘¨å›´ç‚¹å½¢æˆä¸€ä¸ªç±»ç°‡ï¼Œ</li>
<li>è®¡ç®—è¿™ä¸ªç±»ç°‡ä¸å†å²ç±»ç°‡çš„è·ç¦»ï¼Œæ»¡è¶³å°äºé˜ˆå€¼Då³åˆå¹¶ä¸ºåŒä¸€ä¸ªç±»ç°‡ï¼Œä¸æ»¡è¶³åˆ™è‡ªèº«å½¢æˆä¸€ä¸ªç±»ç°‡ã€‚ç›´åˆ°æ‰€æœ‰çš„æ•°æ®ç‚¹é€‰å–å®Œæ¯•ã€‚</li>
</ol>
<blockquote>
<p>å½“ç°‡çš„å†…éƒ¨å…·æœ‰å¯†åº¦ä¸å‡åŒ€æ—¶ï¼ŒMean-shiftå€¾å‘äºå°†è¯¥ç°‡åˆ†ä¸ºå‡ ç‰‡</p>
<p>è®¡ç®—å¤æ‚åº¦ï¼š$O(m^2)$,ä¸é€‚åˆå¤§çš„æ•°æ®é›†</p>
</blockquote>
<h5 id="Affinity-propagation"><a href="#Affinity-propagation" class="headerlink" title="Affinity propagation"></a>Affinity propagation</h5><p>AP(Affinity Propagation)é€šå¸¸è¢«ç¿»è¯‘ä¸ºè¿‘é‚»ä¼ æ’­ç®—æ³•æˆ–è€…äº²å’ŒåŠ›ä¼ æ’­ç®—æ³•ã€‚</p>
<p><strong>ä¸€ç§æŠ•ç¥¨æœºåˆ¶</strong>ï¼Œæ¯ä¸ªå®ä¾‹å¯¹ç›¸ä¼¼çš„å®ä¾‹æŠ•ç¥¨ï¼Œé€‰å‡ºä»£è¡¨ï¼ˆrepresentativesï¼‰ä¸€æ—¦ç®—æ³•æ”¶æ•›ï¼Œæ¯ä¸ªä»£è¡¨å’Œå…¶æŠ•ç¥¨è€…èšæˆä¸€ç°‡ã€‚</p>
<blockquote>
<p>è®¡ç®—å¤æ‚åº¦ï¼š$O(m^2)$,ä¸é€‚åˆå¤§çš„æ•°æ®é›†</p>
<p>APç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†å…¨éƒ¨æ•°æ®ç‚¹éƒ½å½“ä½œæ½œåœ¨çš„èšç±»ä¸­å¿ƒ(ç§°ä¹‹ä¸ºexemplar)ï¼Œç„¶åæ•°æ®ç‚¹ä¸¤ä¸¤ä¹‹é—´è¿çº¿æ„æˆä¸€ä¸ªç½‘ç»œ(ç›¸ä¼¼åº¦çŸ©é˜µ)ï¼Œå†é€šè¿‡ç½‘ç»œä¸­å„æ¡è¾¹çš„æ¶ˆæ¯(responsibilityå’Œavailability)ä¼ é€’è®¡ç®—å‡ºå„æ ·æœ¬çš„èšç±»ä¸­å¿ƒã€‚</p>
<p>èšç±»è¿‡ç¨‹ä¸­ï¼Œå…±æœ‰ä¸¤ç§æ¶ˆæ¯åœ¨å„èŠ‚ç‚¹é—´ä¼ é€’ï¼Œåˆ†åˆ«æ˜¯å¸å¼•åº¦ï¼ˆresponsibilityï¼‰å’Œå½’å±åº¦ï¼ˆavailabilityï¼‰ã€‚</p>
<p>APç®—æ³•é€šè¿‡è¿­ä»£è¿‡ç¨‹ä¸æ–­æ›´æ–°æ¯ä¸€ä¸ªç‚¹çš„å¸å¼•åº¦å’Œå½’å±åº¦ï¼Œç›´åˆ°äº§ç”Ÿmä¸ªé«˜è´¨é‡çš„Exemplarï¼ˆç›¸å½“äºè´¨å¿ƒï¼‰ï¼ŒåŒæ—¶å°†å…¶ä½™çš„æ•°æ®ç‚¹åˆ†é…åˆ°ç›¸åº”çš„èšç±»ä¸­ã€‚</p>
<p>å¯å‚è€ƒï¼š<a href="https://www.biaodianfu.com/affinity-propagation.html" target="_blank" rel="noopener">https://www.biaodianfu.com/affinity-propagation.html</a></p>
</blockquote>
<h5 id="è°±èšç±»"><a href="#è°±èšç±»" class="headerlink" title="è°±èšç±»"></a>è°±èšç±»</h5><p>Spectral clusteringï¼Œå®ƒçš„ä¸»è¦æ€æƒ³æ˜¯æŠŠæ‰€æœ‰çš„æ•°æ®çœ‹åšç©ºé—´ä¸­çš„ç‚¹ï¼Œè¿™äº›ç‚¹ä¹‹é—´å¯ä»¥ç”¨è¾¹è¿æ¥èµ·æ¥ã€‚è·ç¦»è¾ƒè¿œçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒä½ï¼Œè€Œè·ç¦»è¾ƒè¿‘çš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒé«˜ï¼Œé€šè¿‡å¯¹æ‰€æœ‰æ•°æ®ç‚¹ç»„æˆçš„å›¾è¿›è¡Œåˆ‡å›¾ï¼Œè®©åˆ‡å›¾åä¸åŒçš„å­å›¾é—´è¾¹æƒé‡å’Œå°½å¯èƒ½çš„ä½ï¼Œè€Œå­å›¾å†…çš„è¾¹æƒé‡å’Œå°½å¯èƒ½çš„é«˜ï¼Œä»è€Œè¾¾åˆ°èšç±»çš„ç›®çš„ã€‚</p>
<h3 id="é«˜æ–¯æ··åˆæ¨¡å‹-Gaussian-mixtures"><a href="#é«˜æ–¯æ··åˆæ¨¡å‹-Gaussian-mixtures" class="headerlink" title="é«˜æ–¯æ··åˆæ¨¡å‹ Gaussian mixtures"></a>é«˜æ–¯æ··åˆæ¨¡å‹ Gaussian mixtures</h3><p><em>Gaussian mixture model</em> (GMM)ï¼šå¤šä¸ªé«˜æ–¯åˆ†å¸ƒçš„çº¿æ€§å åŠ èƒ½æ‹Ÿåˆéå¸¸å¤æ‚çš„å¯†åº¦å‡½æ•°ï¼›é€šè¿‡è¶³å¤Ÿå¤šçš„é«˜æ–¯åˆ†å¸ƒå åŠ ï¼Œå¹¶è°ƒèŠ‚å®ƒä»¬çš„å‡å€¼ï¼Œåæ–¹å·®çŸ©é˜µï¼Œä»¥åŠçº¿æ€§ç»„åˆçš„ç³»æ•°ï¼Œå¯ä»¥ç²¾ç¡®åœ°é€¼è¿‘ä»»æ„è¿ç»­å¯†åº¦ã€‚</p>
<p> <code>GaussianMixture</code> class: éœ€è¦ç¡®å®šæ•°æ®æœ‰å‡ ä¸ªé«˜æ–¯åˆ†å¸ƒç”Ÿæˆ</p>
<blockquote>
<ol>
<li>å¯¹äºæ¯ä¸€ä¸ªå®ä¾‹ï¼Œä»kä¸ªé«˜æ–¯åˆ†å¸ƒï¼ˆä»£è¡¨ç€kä¸ªç°‡ï¼‰ä¸­éšæœºé€‰æ‹©ï¼Œé€‰æ‹©ç¬¬jä¸ªé«˜æ–¯åˆ†å¸ƒçš„æ¦‚ç‡$\phi^{(j)}$, ç¬¬iä¸ªå®ä¾‹é€‰æ‹©çš„é«˜æ–¯åˆ†å¸ƒè®°ä½œ$z^{(i)}$</li>
<li>å¦‚æœ$z^{(i)}=j$æ„å‘³ç€ç¬¬iä¸ªå®ä¾‹è¢«åˆ†åˆ°äº†ç¬¬jä¸ªç°‡ä¸­ï¼Œå®ä¾‹$x^{(i)}~ N(\mu^{(j)},\sum^{(j)})$</li>
</ol>
</blockquote>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0916.png" alt="mls2 0916"></p>
<h4 id="EMç®—æ³•"><a href="#EMç®—æ³•" class="headerlink" title="EMç®—æ³•"></a>EMç®—æ³•</h4><p>sklearnä¸­çš„ç±»<code>GaussianMixture</code>ä¾æ®çš„æ˜¯EMç®—æ³•ã€‚</p>
<blockquote>
<p>å’ŒK-Meansç®—æ³•ç±»ä¼¼</p>
<ol>
<li>expectation step</li>
</ol>
<p>è®¡ç®—æ¯ä¸ªå®ä¾‹å±äºå„ä¸ªç°‡çš„æ¦‚ç‡ï¼ˆè½¯åˆ†ç±»ï¼‰</p>
<ol>
<li>maximization step</li>
</ol>
<p>è¿­ä»£</p>
<p>EMåŒæ ·ä¼šæ”¶æ•›åˆ°ä¸å¥½çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦å¤šè·‘å‡ æ¬¡ï¼Œä¿å­˜æœ€å¥½çš„ç»“æœï¼Œ<code>n_init=10</code></p>
</blockquote>
<p>GMMæ˜¯ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„å®ä¾‹ã€‚</p>
<p>è¿˜å¯ä»¥é¢„æµ‹æ¯ä¸ªå®ä¾‹å‘¨å›´çš„å¯†åº¦ï¼Œ<code>score_samples()</code>æ–¹æ³•ï¼Œè®¡ç®—å®ä¾‹çš„PDFï¼ˆprobability density functionï¼‰çš„lå¯¹æ•°ã€‚</p>
<p>å¯¹äºé«˜ç»´æ•°æ®ï¼ŒGMMå¯èƒ½é™·å…¥å›°éš¾ï¼Œéœ€è¦å¯¹æ¨¡å‹åŠ ä»¥é™åˆ¶ï¼ˆå‡å°‘è‡ªç”±åº¦ï¼Œé™åˆ¶åˆ†å¸ƒçš„å½¢çŠ¶ï¼Œå¤§å°å’Œå–å‘ï¼‰ï¼Œé€šè¿‡è¶…å‚æ•°<code>`covariance_type</code> `</p>
<blockquote>
<p>å–å€¼å¯ä»¥æ˜¯ï¼šsphereï¼Œdiagï¼Œtied defaultï¼šfull</p>
</blockquote>
<p><strong>è®¡ç®—å¤æ‚åº¦</strong>ï¼šå–å†³äºå®ä¾‹çš„ä¸ªæ•°mï¼Œæ•°æ®çš„ç»´åº¦nï¼Œä»¥åŠç°‡çš„ä¸ªæ•°kï¼Œè¿˜æœ‰å¯¹åæ–¹å·®çŸ©é˜µçš„é™åˆ¶ã€‚</p>
<blockquote>
<p>diag or sphericalï¼š$O(kmn)$</p>
<p>tied or full: $O()kmn^2+kn^3$</p>
</blockquote>
<h4 id="å¼‚å¸¸å€¼æ£€æµ‹"><a href="#å¼‚å¸¸å€¼æ£€æµ‹" class="headerlink" title="å¼‚å¸¸å€¼æ£€æµ‹"></a>å¼‚å¸¸å€¼æ£€æµ‹</h4><p>GMMç”¨äºå¼‚å¸¸å€¼æ£€æµ‹ï¼ˆanomaly detectionï¼‰ä¹Ÿå«åšoutlier detectionã€‚</p>
<blockquote>
<p>å¤„åœ¨GMMä½å¯†åº¦åŒºåŸŸçš„å®ä¾‹å¯ä»¥è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚å¯ä»¥è‡ªå·±è§„å®šé˜ˆå€¼ã€‚</p>
</blockquote>
<p>è§‚å¯Ÿå­¦ä¹ â€œæ­£å¸¸ï¼ˆnormalï¼‰â€çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæ¥æ£€æµ‹å‡ºå¼‚å¸¸æ•°æ®ï¼ˆåº”ç”¨åœºæ™¯ï¼šç”Ÿäº§çº¿äº§å“éƒ¨ä»¶çš„æ£€æµ‹&amp;å¼‚å¸¸è®¿é—®ï¼‰</p>
<h4 id="æ–°é¢–æ€§æ£€æµ‹"><a href="#æ–°é¢–æ€§æ£€æµ‹" class="headerlink" title="æ–°é¢–æ€§æ£€æµ‹"></a>æ–°é¢–æ€§æ£€æµ‹</h4><p>novelty detectionï¼šæ£€æµ‹æ–°è§‚å¯Ÿæ˜¯å¦æ˜¯å¼‚å¸¸å€¼ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å€¼ä¹Ÿè¢«ç§°ä¸ºæ–°é¢–ç‚¹ï¼ˆa noveltyï¼‰ã€‚æ˜¯ä¸€ç§åŠç›‘ç£çš„å¼‚å¸¸æ£€æµ‹æ–¹æ³•ï¼Œåœ¨æ–°é¢–æ€§æ£€æµ‹çš„èƒŒæ™¯ä¸‹ï¼Œæ–°é¢–ç‚¹å¯ä»¥å½¢æˆå¯†é›†çš„ç°‡ï¼Œåªè¦å®ƒä»¬å¤„äºè®­ç»ƒæ•°æ®çš„ä½å¯†åº¦åŒºåŸŸä¸­ã€‚</p>
<p>GMMå°è¯•fitæ‰€æœ‰çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¼‚å¸¸å€¼ï¼Œå¦‚æœå¼‚å¸¸ç‚¹è¿‡å¤šï¼Œå¯ä»¥</p>
<blockquote>
<ol>
<li>å»é™¤æœ€å¤–ä¾§çš„å¼‚å¸¸å€¼ï¼Œåœ¨cleaned-upçš„æ•°æ®é›†ä¸Šå†æ¬¡è®­ç»ƒæ¨¡å‹</li>
<li>ä½¿ç”¨æ›´é²æ£’çš„ç®—æ³•ï¼šEllipticEnvelope ï¼ˆé€‚åˆäºå¯¹æ•°æ®çš„é²æ£’åæ–¹å·®ä¼°è®¡ï¼Œä»è€Œå°†æ¤­åœ†é€‚é…åˆ°ä¸­å¤®æ•°æ®ç‚¹ï¼Œå¿½ç•¥ä¸­å¤®æ¨¡å¼ä¹‹å¤–çš„ç‚¹ã€‚ï¼‰</li>
</ol>
</blockquote>
<h4 id="å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°"><a href="#å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°" class="headerlink" title="å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°"></a>å¦‚ä½•ç¡®å®šclusterçš„ä¸ªæ•°</h4><p>å¯¹äºå¤§å°ä¸ä¸€è‡´æˆ–è€…éçƒå‹åˆ†å¸ƒçš„æ•°æ®ï¼ŒK-Meansä¸­ç”¨æ¥ç¡®å®šclusteræ•°ç›®çš„inertiaå’Œè½®å»“ç³»æ•°éƒ½ä¸å¯è¡Œã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡<strong>æœ€å°åŒ–ç†è®ºä¿¡æ¯æ ‡å‡†ï¼ˆtheoretical information criterionï¼‰ï¼Œå¦‚èµ¤æ± ä¿¡æ¯é‡ï¼ˆ<em>Akaike information criterion</em> ï¼ŒAICï¼‰,è´å¶æ–¯ä¿¡æ¯é‡ï¼ˆBICï¼Œ<em>Bayesian information criterion</em>ï¼‰</strong></p>
<p>å®šä¹‰ï¼š(mæ˜¯å®ä¾‹çš„ä¸ªæ•°ï¼Œpæ˜¯æ¨¡å‹çš„å‚æ•°ï¼Œ$\hat L$ æ˜¯æ¨¡å‹ä¼¼ç„¶å‡½æ•°ï¼ˆlikelihood functionï¼‰çš„æœ€å¤§å€¼)</p>
<p>$BIC\ = \ \log(m)p-2\ \log(\hat L) \\ AIC  \ = 2p-2\ \log(\hat L)$</p>
<p>BICå’ŒAICå¯¹å‚æ•°å¤šæ¨¡å‹åŠ ä¸Špenaltyï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒBICé€‰æ‹©çš„æ¨¡å‹æ¯”AICç®€å•ï¼Œä½†æ˜¯ä¸å¦‚AICçš„æ¨¡å‹å’Œæ•°æ®å»åˆå¾—å¥½ã€‚</p>
<p><strong>ä¼¼ç„¶å‡½æ•°</strong></p>
<p>æ¦‚ç‡ï¼ˆprobabilityï¼‰æ˜¯æŒ‡ï¼šç»™å®šæ¨¡å‹çš„å‚æ•°ï¼Œè¾“å‡ºxçš„å¯ä¿¡ç¨‹åº¦ã€‚ï¼ˆä¸‹å›¾æ°´å¹³é»‘çº¿ï¼Œå’ŒPDFå›¾ï¼‰</p>
<p>ä¼¼ç„¶ï¼ˆlikelihoodï¼‰æ˜¯æŒ‡ï¼šä¸€ç›´è¾“å‡ºxçš„å‰æä¸‹ï¼Œæ¨¡å‹çš„å‚æ•°æœ‰å¤šå¯ä¿¡ã€‚ï¼ˆä¸‹å›¾å‚ç›´è“è‰²çº¿ï¼Œå’Œä¼¼ç„¶å‡½æ•°å›¾ï¼‰</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0920.png" alt="mls2 0920"></p>
<h4 id="Bayesian-Gaussian-Mixture-Models"><a href="#Bayesian-Gaussian-Mixture-Models" class="headerlink" title="Bayesian Gaussian Mixture Models"></a>Bayesian Gaussian Mixture Models</h4><p>å¯ä»¥èµ‹äºˆä¸é‡è¦çš„ç°‡æƒé‡0ï¼Œå¯ä»¥é€šè¿‡n_componentsé¢„è®¾ç°‡çš„æœ€å¤§å€¼ã€‚</p>
<p><img src="https://learning.oreilly.com/library/view/hands-on-machine-learning/9781492032632/assets/mls2_0922.png" alt="mls2 0922"></p>
<p>Stick-Breaking Process (SBP)</p>
<p>Wishart distribution</p>
<p><strong>è´å¶æ–¯å®šç†</strong></p>
<p>$p(z|X)=posterior=\frac{likelihood\times prior}{evidence}=\frac{p(X|z)p(z)}{p(X)}$</p>
<p>$p(X)=\int p(X|z)p(z)dz$</p>
<h3 id="å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•"><a href="#å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•" class="headerlink" title="å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•"></a>å…¶ä»–å¤„ç†å¼‚å¸¸å€¼å’Œæ–°é¢–æ€§æ£€æµ‹çš„ç®—æ³•</h3><h4 id="PCA"><a href="#PCA" class="headerlink" title="PCA"></a>PCA</h4><p>æ•°æ®é‡å»ºï¼Œæ­£å¸¸å€¼é‡å»ºåä¸åŸå§‹æ•°æ®å·®è·å°ï¼Œè€Œå¼‚å¸¸å€¼é‡å»ºåä¸å¼‚å¸¸å€¼å·®è·å¤§</p>
<h4 id="Fast-MCD"><a href="#Fast-MCD" class="headerlink" title="Fast-MCD"></a>Fast-MCD</h4><p>minimum covariance determinantï¼Œ</p>
<p>è®¤ä¸ºæ­£å¸¸å€¼ï¼ˆinliersï¼‰æ˜¯ç”±å•ä¸€çš„é«˜æ–¯æ¨¡å‹äº§ç”Ÿçš„ï¼Œä¸æ˜¯ç”±è¯¥å•ä¸€é«˜æ–¯æ¨¡å‹äº§ç”Ÿçš„æ•°æ®ç‚¹è¢«è®¤ä¸ºæ˜¯outliers</p>
<h4 id="Isolation-Forest"><a href="#Isolation-Forest" class="headerlink" title="Isolation Forest"></a>Isolation Forest</h4><p>å­¤ç«‹æ£®æ—ï¼š æ˜¯ä¸€ä¸ªåŸºäºEnsembleçš„å¿«é€Ÿå¼‚å¸¸æ£€æµ‹æ–¹æ³•ï¼Œå…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦å’Œé«˜ç²¾å‡†åº¦ï¼Œæ˜¯ç¬¦åˆå¤§æ•°æ®å¤„ç†è¦æ±‚çš„state-of-the-artç®—æ³•ã€‚é€‚ç”¨äº<strong>è¿ç»­æ•°æ®ï¼ˆContinuous numerical dataï¼‰çš„å¼‚å¸¸æ£€æµ‹</strong>ï¼Œå°†å¼‚å¸¸å®šä¹‰ä¸ºâ€œå®¹æ˜“è¢«å­¤ç«‹çš„ç¦»ç¾¤ç‚¹ (more likely to be separated)â€â€”â€”å¯ä»¥ç†è§£ä¸ºåˆ†å¸ƒç¨€ç–ä¸”ç¦»å¯†åº¦é«˜çš„ç¾¤ä½“è¾ƒè¿œçš„ç‚¹ã€‚</p>
<p>æ„å»ºéšæœºæ£®æ—ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå†³ç­–æ ‘éƒ½æ˜¯éšæœºçš„ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ï¼Œéšæœºçš„é€‰æ‹©ç‰¹å¾å’Œé˜ˆå€¼ï¼Œå°†æ•°æ®åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p>
<p>é€‚ç”¨äºé«˜ç»´æ•°æ®</p>
<h4 id="Local-Outlier-Factoerï¼ˆLOFï¼‰"><a href="#Local-Outlier-Factoerï¼ˆLOFï¼‰" class="headerlink" title="Local Outlier Factoerï¼ˆLOFï¼‰"></a>Local Outlier Factoerï¼ˆLOFï¼‰</h4><p>ä¸€ä¸ªæ ·æœ¬ç‚¹å‘¨å›´çš„æ ·æœ¬ç‚¹æ‰€å¤„ä½ç½®çš„å¹³å‡å¯†åº¦æ¯”ä¸Šè¯¥æ ·æœ¬ç‚¹æ‰€åœ¨ä½ç½®çš„å¯†åº¦ã€‚æ¯”å€¼è¶Šå¤§äº1ï¼Œåˆ™è¯¥ç‚¹æ‰€åœ¨ä½ç½®çš„å¯†åº¦è¶Šå°äºå…¶å‘¨å›´æ ·æœ¬æ‰€åœ¨ä½ç½®çš„å¯†åº¦ï¼Œè¿™ä¸ªç‚¹å°±è¶Šæœ‰å¯èƒ½æ˜¯å¼‚å¸¸ç‚¹ã€‚</p>
<h4 id="One-class-SVM"><a href="#One-class-SVM" class="headerlink" title="One-class SVM"></a>One-class SVM</h4><p>å•åˆ†ç±»ç®—æ³•ï¼Œå¯»æ‰¾ä¸€ä¸ªè¶…å¹³é¢å°†æ ·æœ¬ä¸­çš„æ­£ä¾‹åœˆå‡ºæ¥ï¼Œé¢„æµ‹å°±æ˜¯ç”¨è¿™ä¸ªè¶…å¹³é¢åšå†³ç­–ï¼Œåœ¨åœˆå†…çš„æ ·æœ¬å°±è®¤ä¸ºæ˜¯æ­£æ ·æœ¬ã€‚ç”±äº<strong>æ ¸å‡½æ•°</strong>è®¡ç®—æ¯”è¾ƒè€—æ—¶ï¼Œåœ¨æµ·é‡æ•°æ®çš„åœºæ™¯ç”¨çš„å¹¶ä¸å¤šï¼›</p>
<p><strong>é€‚ç”¨äºæ–°é¢–æ€§æ£€æµ‹</strong></p>
<p><img src="https://img2018.cnblogs.com/blog/1226410/201904/1226410-20190424112057869-1957699378.png" alt="img"></p>
<h3 id="å¯†åº¦ä¼°è®¡ï¼ˆdensity-estimationï¼‰"><a href="#å¯†åº¦ä¼°è®¡ï¼ˆdensity-estimationï¼‰" class="headerlink" title="å¯†åº¦ä¼°è®¡ï¼ˆdensity estimationï¼‰"></a>å¯†åº¦ä¼°è®¡ï¼ˆdensity estimationï¼‰</h3><p>ç”¨æ¥ä¼°è®¡éšæœºè¿‡ç¨‹çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆprobability density functionï¼ˆPDFï¼‰ï¼‰ï¼ˆåº”ç”¨åœºæ™¯ï¼šå¼‚å¸¸æ£€æµ‹ï¼ˆå¯†åº¦ä½çš„åœ°æ–¹å¼‚å¸¸çš„æ¦‚ç‡å¤§ï¼‰ï¼Œæ•°æ®åˆ†æå’Œå¯è§†åŒ–ï¼‰</p>
<h3 id="ç»ƒä¹ -3"><a href="#ç»ƒä¹ -3" class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ol>
<li><p>How would you define clustering? Can you name a few clustering algorithms?</p>
<blockquote>
<p>èšç±»æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ ï¼Œå°†å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å®ä¾‹èšé›†åœ¨ä¸€èµ·ã€‚</p>
<p>K-Means, DBSCANï¼Œå±‚æ¬¡èšç±»ï¼ŒBRICHï¼ŒMean-shiftï¼ŒAffinity propagationå’Œè°±èšç±»</p>
</blockquote>
</li>
<li><p>What are some of the main applications of clustering algorithms?</p>
<blockquote>
<p>åŠç›‘ç£å­¦ä¹ </p>
<p>å›¾åƒåˆ†å‰²</p>
<p>æ•°æ®é¢„å¤„ç†</p>
<p>å¼‚å¸¸å€¼æ£€æµ‹</p>
<p>æ–°é¢–æ€§æ£€æµ‹</p>
</blockquote>
</li>
<li><p>Describe two techniques to select the right number of clusters when using K-Means.</p>
<blockquote>
<ol>
<li>ç”»å‡ºk-inertiaå›¾åƒï¼Œé€‰æ‹©è‚˜éƒ¨</li>
<li>ç”»å‡ºk-è½®å»“ç³»æ•°å›¾åƒï¼Œé€‰æ‹©æœ€é«˜ç‚¹</li>
</ol>
</blockquote>
</li>
<li><p>What is label propagation? Why would you implement it, and how?</p>
<blockquote>
<p>å› ä¸ºæ‰“æ ‡ç­¾æ˜¯éå¸¸è€—æ—¶çš„ï¼Œæ‰€ä»¥å®é™…æƒ…å†µä¸‹ï¼Œæ•°æ®é›†ä¸­å¯èƒ½åªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ†æœ‰æ ‡ç­¾ï¼Œå¤§éƒ¨åˆ†æ•°æ®éƒ½æ²¡æœ‰æ ‡ç­¾ï¼Œæ ‡ç­¾ä¼ é€’å¯ä»¥å¾—åˆ°æ›´å¤šçš„å¸¦æ ‡ç­¾çš„æ•°æ®ï¼Œå¯ä»¥è¿›è¡Œç›‘ç£å­¦ä¹ ï¼ˆè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯éç›‘ç£å­¦ä¹ ï¼‰</p>
<p>å½“æ•°æ®ä¸­ä»…æœ‰å°‘éƒ¨åˆ†å…·æœ‰æ ‡ç­¾çš„æ•°æ®æ—¶ï¼Œå¯ä»¥å…ˆè¿›è¡Œèšç±»ï¼Œç„¶åå°†æ ‡ç­¾æ‰“åˆ°å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„å®ä¾‹ä¸Šï¼ˆç¦»èšç±»ä¸­å¿ƒæœ€è¿‘çš„æœ‰æ ‡ç­¾æ•°æ®ï¼‰ã€‚</p>
</blockquote>
</li>
<li><p>Can you name two clustering algorithms that can scale to large datasets? And two that look for regions of high density?</p>
<blockquote>
<p>K-Meanså’ŒBRICHå¯ä»¥ç”¨äºå¤§çš„æ•°æ®é›†</p>
<p>DBSCANå’ŒMean-shiftï¼ˆä¸­å¿ƒå‘ç€å¯†åº¦é«˜çš„æ–¹å‘ç§»åŠ¨ï¼‰å¯»æ‰¾åŒºåŸŸå†…é«˜å¯†åº¦çš„ä½ç½®</p>
</blockquote>
</li>
<li><p>Can you think of a use case where active learning would be useful? How would you implement it?</p>
<blockquote>
<p>ä¸æ˜¯éšæœºçš„é€‰æ‹©æ•°æ®æ‰“æ ‡ç­¾ï¼Œè€Œæ˜¯äººç±»ä¸“å®¶å‚ä¸ç®—æ³•çš„å­¦ä¹ ï¼Œä¸ºç‰¹å®šçš„å®ä¾‹æä¾›æ ‡ç­¾ã€‚</p>
<p>ä¸ç¡®å®šé‡‡æ ·</p>
</blockquote>
</li>
<li><p>What is the difference between anomaly detection and novelty detection?</p>
<blockquote>
<p>å¼‚å¸¸å€¼æ£€æµ‹ä¸­ï¼šæ¨¡å‹åœ¨åŒ…å«å¼‚å¸¸å€¼çš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œï¼ˆå­¤ç«‹æ£®æ—ï¼‰</p>
<p>æ–°é¢–æ€§æ£€æµ‹ä¸­ï¼šæ¨¡å‹åœ¨ä¸€ä¸ªcleançš„æ•°æ®åŠä¸Šè®­ç»ƒï¼Œï¼ˆå•åˆ†ç±»-SVMï¼‰</p>
</blockquote>
</li>
<li><p>What is a Gaussian mixture? What tasks can you use it for?</p>
<blockquote>
<p>GMMæ˜¯ä¸€ç§æ¦‚ç‡æ¨¡å‹ï¼Œå‡è®¾å®ä¾‹æ˜¯ç”±è‹¥å¹²ä¸ªé«˜æ–¯æ¨¡å‹æ··åˆç”Ÿæˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œå‡è®¾æ•°æ®å±äºè‹¥å¹²æ¤­åœ†ç±»ï¼Œä½†å¤§å°ï¼Œæ–¹å‘ï¼Œå½¢çŠ¶å’Œå¯†åº¦éƒ½ä¸ç¡®å®šã€‚</p>
<p>å¯ä»¥ç”¨æ¥å¯†åº¦æ£€æµ‹ï¼Œå¼‚å¸¸å€¼æ£€æµ‹ï¼Œèšç±»ã€‚</p>
</blockquote>
</li>
<li><p>Can you name two techniques to find the right number of clusters when using a Gaussian mixture model?</p>
<blockquote>
<p>ç”»å‡ºk-AICæˆ–è€…k-BICçš„å›¾åƒï¼Œé€‰æ‹©ä½¿AICæˆ–è€…BICæ•°å€¼æœ€å°çš„èšç±»ä¸ªæ•°ã€‚</p>
</blockquote>
</li>
<li><p>The classic Olivetti faces dataset contains 400 grayscale 64 Ã— 64â€“pixel images of faces. Each image is flattened to a 1D vector of size 4,096. 40 different people were photographed (10 times each), and the usual task is to train a model that can predict which person is represented in each picture. Load the dataset using the <code>sklearn.datasets.fetch_olivetti_faces()</code> function, then split it into a training set, a validation set, and a test set (note that the dataset is already scaled between 0 and 1). Since the dataset is quite small, you probably want to use stratified sampling to ensure that there are the same number of images per person in each set. Next, cluster the images using K-Means, and ensure that you have a good number of clusters (using one of the techniques discussed in this chapter). Visualize the clusters: do you see similar faces in each cluster?</p>
</li>
<li><p>Continuing with the Olivetti faces dataset, train a classifier to predict which person is represented in each picture, and evaluate it on the validation set. Next, use K-Means as a dimensionality reduction tool, and train a classifier on the reduced set. Search for the number of clusters that allows the classifier to get the best performance: what performance can you reach? What if you append the features from the reduced set to the original features (again, searching for the best number of clusters)?</p>
</li>
<li><p>Train a Gaussian mixture model on the Olivetti faces dataset. To speed up the algorithm, you should probably reduce the datasetâ€™s dimensionality (e.g., use PCA, preserving 99% of the variance). Use the model to generate some new faces (using the <code>sample()</code> method), and visualize them (if you used PCA, you will need to use its <code>inverse_transform()</code> method). Try to modify some images (e.g., rotate, flip, darken) and see if the model can detect the anomalies (i.e., compare the output of the <code>score_samples()</code> method for normal images and for anomalies).</p>
</li>
<li><p>Some dimensionality reduction techniques can also be used for anomaly detection. For example, take the Olivetti faces dataset and reduce it with PCA, preserving 99% of the variance. Then compute the reconstruction error for each image. Next, take some of the modified images you built in the previous exercise, and look at their reconstruction error: notice how much larger the reconstruction error is. If you plot a reconstructed image, you will see why: it tries to reconstruct a normal face.</p>
</li>
</ol>
]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>sklearn</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šåˆ©ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æã€‹å­¦ä¹ </title>
    <url>/2020/08/23/%E3%80%8A%E5%88%A9%E7%94%A8Python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>ç®€ä¹¦ï¼š <a href="https://www.jianshu.com/p/04d180d90a3f" target="_blank" rel="noopener">https://www.jianshu.com/p/04d180d90a3f</a></p>
<p>githubï¼š <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fiamseancheney%2Fpython_for_data_analysis_2nd_chinese_version" target="_blank" rel="noopener">https://github.com/iamseancheney/python_for_data_analysis_2nd_chinese_version</a></p>
<p>gitbookï¼š <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fseancheney.gitbook.io%2Fpython-for-data-analysis-2nd%2F" target="_blank" rel="noopener">https://seancheney.gitbook.io/python-for-data-analysis-2nd/</a></p>
<p>[TOC]</p>
<h2 id="ç¬¬2ç« -Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter-Notebooks"><a href="#ç¬¬2ç« -Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter-Notebooks" class="headerlink" title="ç¬¬2ç«  Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter Notebooks"></a>ç¬¬2ç«  Pythonè¯­æ³•åŸºç¡€ï¼ŒIPythonå’ŒJupyter Notebooks</h2><h3 id="IPythoné”®ç›˜å¿«æ·é”®"><a href="#IPythoné”®ç›˜å¿«æ·é”®" class="headerlink" title="IPythoné”®ç›˜å¿«æ·é”®"></a>IPythoné”®ç›˜å¿«æ·é”®</h3><a id="more"></a>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9ed3866ea25c11f8.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e179f5ea00e50691.png?imageMogr2/auto-orient/strip|imageView2/2/w/491/format/webp" alt="img"></p>
<h3 id="IPythoné­”æœ¯å‘½ä»¤"><a href="#IPythoné­”æœ¯å‘½ä»¤" class="headerlink" title="IPythoné­”æœ¯å‘½ä»¤"></a>IPythoné­”æœ¯å‘½ä»¤</h3><p>IPythonä¸­ç‰¹æ®Šçš„å‘½ä»¤ï¼ˆPythonä¸­æ²¡æœ‰ï¼‰è¢«ç§°ä½œâ€œé­”æœ¯â€å‘½ä»¤ã€‚</p>
<p>line magic %</p>
<p>cell magic %%</p>
<p><code>%timeit</code>å¯ä»¥æµ‹é‡ä»»ä½•Pythonè¯­å¥çš„æ‰§è¡Œæ—¶é—´ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">20</span>]: a = np.random.randn(<span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: %timeit np.dot(a, a)</span><br><span class="line"><span class="number">10000</span> loops, best of <span class="number">3</span>: <span class="number">20.9</span> Âµs per loop</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c72b11add9b8ccf8.png?imageMogr2/auto-orient/strip|imageView2/2/w/695/format/webp" alt="img"></p>
<h3 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h3><p>IPythonä¸­é›†æˆäº†æ•°æ®å¯è§†åŒ–å’Œå…¶å®ƒç”¨æˆ·ç•Œé¢åº“ï¼Œæ¯”å¦‚matplotlibã€‚</p>
<p><code>%matplotlib</code>é­”æœ¯å‡½æ•°é…ç½®äº†IPython shellå’ŒJupyter notebookä¸­çš„matplotlibã€‚</p>
<p>åœ¨JUpyterä¸­ï¼Œå‘½ä»¤æœ‰æ‰€ä¸åŒï¼š<code>%matplotlib inline</code></p>
<h3 id="Pythonè¯­æ³•åŸºç¡€"><a href="#Pythonè¯­æ³•åŸºç¡€" class="headerlink" title="Pythonè¯­æ³•åŸºç¡€"></a>Pythonè¯­æ³•åŸºç¡€</h3><h4 id="ä½¿ç”¨ç¼©è¿›"><a href="#ä½¿ç”¨ç¼©è¿›" class="headerlink" title="ä½¿ç”¨ç¼©è¿›"></a>ä½¿ç”¨ç¼©è¿›</h4><p>å»ºè®®ä½¿ç”¨å››ä¸ªç©ºæ ¼ä½œä¸ºé»˜è®¤çš„ç¼©è¿›ï¼Œå¯ä»¥ä½¿ç”¨tabä»£æ›¿å››ä¸ªç©ºæ ¼ã€‚</p>
<h4 id="ä¸‡ç‰©çš†å¯¹è±¡"><a href="#ä¸‡ç‰©çš†å¯¹è±¡" class="headerlink" title="ä¸‡ç‰©çš†å¯¹è±¡"></a>ä¸‡ç‰©çš†å¯¹è±¡</h4><h4 id="ä½ç½®å’Œå…³é”®è¯å‚æ•°"><a href="#ä½ç½®å’Œå…³é”®è¯å‚æ•°" class="headerlink" title="ä½ç½®å’Œå…³é”®è¯å‚æ•°"></a>ä½ç½®å’Œå…³é”®è¯å‚æ•°</h4><p><code>result = f(a, b, c, d=5, e=&#39;foo&#39;)</code></p>
<h4 id="å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š"><a href="#å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š" class="headerlink" title="å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š"></a>å˜é‡å’Œå‚æ•°ä¼ é€’ï¼š</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = a</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-3e3a8c6b9c5040fc.png?imageMogr2/auto-orient/strip|imageView2/2/w/892/format/webp" alt="img"></p>
<p>åœ¨Pythonä¸­ï¼Œaå’Œbå®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡.èµ‹å€¼ä¹Ÿè¢«ç§°ä½œç»‘å®šï¼Œæˆ‘ä»¬æ˜¯æŠŠä¸€ä¸ªåå­—ç»‘å®šç»™ä¸€ä¸ªå¯¹è±¡ã€‚å˜é‡åæœ‰æ—¶å¯èƒ½è¢«ç§°ä¸ºç»‘å®šå˜é‡ã€‚</p>
<p>å°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæ–°çš„å±€åŸŸå˜é‡åˆ›å»ºäº†å¯¹åŸå§‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¤åˆ¶ã€‚å¦‚æœåœ¨å‡½æ•°é‡Œç»‘å®šä¸€ä¸ªæ–°å¯¹è±¡åˆ°ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜åŠ¨ä¸ä¼šåæ˜ åˆ°ä¸Šä¸€å±‚ã€‚</p>
<h4 id="å¼ºç±»å‹åŒ–è¯­è¨€"><a href="#å¼ºç±»å‹åŒ–è¯­è¨€" class="headerlink" title="å¼ºç±»å‹åŒ–è¯­è¨€"></a>å¼ºç±»å‹åŒ–è¯­è¨€</h4><p><code>&#39;5&#39; + 5</code> ä¼šæŠ¥é”™ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½æœ‰æ˜ç¡®çš„ç±»å‹ï¼ˆæˆ–ç±»ï¼‰ï¼Œé»˜è®¸è½¬æ¢åªä¼šå‘ç”Ÿåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">17</span>]: a = <span class="number">4.5</span></span><br><span class="line">In [<span class="number">18</span>]: b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># String formatting, to be visited later</span></span><br><span class="line">In [<span class="number">19</span>]: print(<span class="string">'a is &#123;0&#125;, b is &#123;1&#125;'</span>.format(type(a), type(b)))</span><br><span class="line">a is &lt;class 'float'&gt;, b is &lt;class 'int'&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: a / b</span><br><span class="line">Out[<span class="number">20</span>]: <span class="number">2.25</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨<code>isinstance</code>å‡½æ•°æ£€æŸ¥å¯¹è±¡æ˜¯æŸä¸ªç±»å‹çš„å®ä¾‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">isinstance(a, int) <span class="comment">#æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹çš„å®ä¾‹</span></span><br><span class="line">isinstance(a, (int, float)) <span class="comment">#æ£€æŸ¥å¯¹è±¡çš„ç±»å‹æ˜¯å¦åœ¨å…ƒç»„ä¸­</span></span><br></pre></td></tr></table></figure>
<h4 id="å±æ€§å’Œæ–¹æ³•"><a href="#å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å±æ€§å’Œæ–¹æ³•"></a>å±æ€§å’Œæ–¹æ³•</h4><p>Pythonçš„å¯¹è±¡é€šå¸¸éƒ½æœ‰å±æ€§ï¼ˆå…¶å®ƒå­˜å‚¨åœ¨å¯¹è±¡å†…éƒ¨çš„Pythonå¯¹è±¡ï¼‰å’Œæ–¹æ³•ï¼ˆå¯¹è±¡çš„é™„å±å‡½æ•°å¯ä»¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼‰</p>
<p>å¯ä»¥ç”¨<code>obj.attribute_name</code>è®¿é—®å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨<code>getattr</code>å‡½æ•°ï¼Œé€šè¿‡åå­—è®¿é—®å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h4 id="é¸­å­ç±»å‹"><a href="#é¸­å­ç±»å‹" class="headerlink" title="é¸­å­ç±»å‹"></a>é¸­å­ç±»å‹</h4><p>ä¸å…³å¿ƒå¯¹è±¡çš„ç±»å‹ï¼Œåªå…³å¿ƒå¯¹è±¡æ˜¯å¦æœ‰æŸäº›æ–¹æ³•æˆ–ç”¨é€”ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œé¸­å­ç±»å‹â€ï¼Œæ¥è‡ªâ€œèµ°èµ·æ¥åƒé¸­å­ã€å«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€çš„è¯´æ³•ã€‚</p>
<p>é€šè¿‡éªŒè¯ä¸€ä¸ªå¯¹è±¡æ˜¯å¦éµå¾ªè¿­ä»£åè®®ï¼Œåˆ¤æ–­å®ƒæ˜¯å¯è¿­ä»£çš„ã€‚å¯¹äºè®¸å¤šå¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸€ä¸ª<code>__iter__</code>é­”æœ¯æ–¹æ³•ï¼Œå…¶å®ƒæ›´å¥½çš„åˆ¤æ–­æ–¹æ³•æ˜¯ä½¿ç”¨<code>iter</code>å‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isiterable</span><span class="params">(obj)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        iter(obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> TypeError: <span class="comment"># not iterable</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨è¿™ä¸ªåŠŸèƒ½ç¼–å†™å¯ä»¥æ¥å—å¤šç§è¾“å…¥ç±»å‹çš„å‡½æ•°ã€‚ä¾‹å¦‚ç¼–å†™ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„åºåˆ—ï¼ˆlistã€tupleã€ndarrayï¼‰æˆ–æ˜¯è¿­ä»£å™¨ã€‚å…ˆæ£€éªŒå¯¹è±¡æ˜¯å¦æ˜¯åˆ—è¡¨ï¼ˆæˆ–æ˜¯NUmPyæ•°ç»„ï¼‰ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°†å…¶è½¬å˜æˆåˆ—è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> isinstance(x, list) <span class="keyword">and</span> isiterable(x):</span><br><span class="line">    x = list(x)</span><br></pre></td></tr></table></figure>
<h4 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h4><h4 id="äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"><a href="#äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦"></a>äºŒå…ƒè¿ç®—ç¬¦å’Œæ¯”è¾ƒè¿ç®—ç¬¦</h4><p>è¦åˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>is</code>æ–¹æ³•ï¼Œ<code>is not</code>å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸åŒçš„ã€‚ä½¿ç”¨<code>is</code>æ¯”è¾ƒä¸<code>==</code>è¿ç®—ç¬¦ä¸åŒï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">35</span>]: a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: b = a</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: c = list(a) <span class="comment"># å› ä¸ºlistæ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Pythonåˆ—è¡¨ï¼ˆå³å¤åˆ¶ï¼‰</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: a <span class="keyword">is</span> b</span><br><span class="line">Out[<span class="number">38</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: a <span class="keyword">is</span> <span class="keyword">not</span> c</span><br><span class="line">Out[<span class="number">39</span>]: <span class="literal">True</span></span><br><span class="line">       </span><br><span class="line">In [<span class="number">40</span>]: a == c</span><br><span class="line">Out[<span class="number">40</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9fb5f25b33166acf.png?imageMogr2/auto-orient/strip|imageView2/2/w/811/format/webp" alt="img"></p>
<h4 id="å¯å˜ä¸ä¸å¯å˜å¯¹è±¡"><a href="#å¯å˜ä¸ä¸å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜ä¸ä¸å¯å˜å¯¹è±¡"></a>å¯å˜ä¸ä¸å¯å˜å¯¹è±¡</h4><p>Pythonä¸­çš„å¤§å¤šæ•°å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å­—å…¸ã€NumPyæ•°ç»„ï¼Œå’Œç”¨æˆ·å®šä¹‰çš„ç±»å‹ï¼ˆç±»ï¼‰ï¼Œéƒ½æ˜¯å¯å˜çš„ï¼Œæ„å‘³ç€è¿™äº›å¯¹è±¡æˆ–åŒ…å«çš„å€¼å¯ä»¥è¢«ä¿®æ”¹ã€‚å…¶å®ƒä¾‹å¦‚<strong>å­—ç¬¦ä¸²å’Œå…ƒç»„</strong> ï¼Œæ˜¯ä¸å¯å˜çš„ã€‚</p>
<h4 id="æ ‡é‡ç±»å‹"><a href="#æ ‡é‡ç±»å‹" class="headerlink" title="æ ‡é‡ç±»å‹"></a>æ ‡é‡ç±»å‹</h4><p>Pythonçš„æ ‡å‡†åº“ä¸­æœ‰ä¸€äº›å†…å»ºçš„ç±»å‹ï¼Œç”¨äºå¤„ç†æ•°å€¼æ•°æ®ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼Œå’Œæ—¥æœŸæ—¶é—´ã€‚è¿™äº›å•å€¼ç±»å‹è¢«ç§°ä¸ºæ ‡é‡ç±»å‹ã€‚</p>
<p>æ—¥æœŸå’Œæ—¶é—´å¤„ç†ä¼šæ˜¯ç”±æ ‡å‡†åº“çš„<code>datetime</code>æ¨¡å—æä¾›çš„ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-27a30ac3e7d262a1.png?imageMogr2/auto-orient/strip|imageView2/2/w/808/format/webp" alt="img"></p>
<h4 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h4><p>Pythonçš„ä¸»è¦æ•°å€¼ç±»å‹æ˜¯<code>int</code>å’Œ<code>float</code></p>
<h4 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h4><p>åæ–œæ æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ„æ€æ˜¯å®ƒè¢«ç”¨æ¥è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦ã€‚</p>
<p>å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«è®¸å¤šåæ–œæ ï¼Œä½†æ²¡æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥åœ¨å­—ç¬¦ä¸²å‰é¢åŠ ä¸€ä¸ªrï¼Œè¡¨æ˜å­—ç¬¦å°±æ˜¯å®ƒè‡ªèº«ã€‚</p>
<p>å­—ç¬¦ä¸²çš„æ¨¡æ¿åŒ–æˆ–æ ¼å¼åŒ–ï¼š</p>
<ol>
<li><p><code>format</code>æ–¹æ³•ï¼Œå¯ä»¥æ›¿æ¢æ ¼å¼åŒ–çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">74</span>]: template = <span class="string">'&#123;0:.2f&#125; &#123;1:s&#125; are worth US$&#123;2:d&#125;'</span></span><br><span class="line">In [<span class="number">75</span>]: template.format(<span class="number">4.5560</span>, <span class="string">'Argentine Pesos'</span>, <span class="number">1</span>)</span><br><span class="line">Out[<span class="number">75</span>]: <span class="string">'4.56 Argentine Pesos are worth US$1'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="å­—èŠ‚å’ŒUnicode"><a href="#å­—èŠ‚å’ŒUnicode" class="headerlink" title="å­—èŠ‚å’ŒUnicode"></a>å­—èŠ‚å’ŒUnicode</h4><p>åœ¨Python 3åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒUnicodeæ˜¯ä¸€çº§çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ›´ä¸€è‡´çš„å¤„ç†ASCIIå’ŒNon-ASCIIæ–‡æœ¬ã€‚åœ¨è€çš„Pythonç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²éƒ½æ˜¯å­—èŠ‚ï¼Œä¸ä½¿ç”¨Unicodeç¼–ç ã€‚</p>
<p>å¯ä»¥ç”¨<code>encode</code>å°†Unicodeå­—ç¬¦ä¸²ç¼–ç ä¸ºUTF-8ï¼Œ<code>decode</code> å°†UTF-8è§£ç ä¸ºUnicodeç¼–ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">76</span>]: val = <span class="string">"espaÃ±ol"</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">77</span>]: val</span><br><span class="line">Out[<span class="number">77</span>]: <span class="string">'espaÃ±ol'</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">78</span>]: val_utf8 = val.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">79</span>]: val_utf8</span><br><span class="line">Out[<span class="number">79</span>]: <span class="string">b'espa\xc3\xb1ol'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">80</span>]: type(val_utf8)</span><br><span class="line">Out[<span class="number">80</span>]: bytes</span><br><span class="line"></span><br><span class="line">In [<span class="number">81</span>]: val_utf8.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">Out[<span class="number">81</span>]: <span class="string">'espaÃ±ol'</span></span><br></pre></td></tr></table></figure>
<p><strong>å¯ä»¥åœ¨å­—èŠ‚æ–‡æœ¬å‰åŠ ä¸Šb</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">85</span>]: bytes_val = <span class="string">b'this is bytes'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">86</span>]: bytes_val</span><br><span class="line">Out[<span class="number">86</span>]: <span class="string">b'this is bytes'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">87</span>]: decoded = bytes_val.decode(<span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">88</span>]: decoded  <span class="comment"># this is str (Unicode) now</span></span><br><span class="line">Out[<span class="number">88</span>]: <span class="string">'this is bytes'</span></span><br></pre></td></tr></table></figure>
<h4 id="None"><a href="#None" class="headerlink" title="None"></a>None</h4><p>Noneæ˜¯Pythonçš„ç©ºå€¼ç±»å‹ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰æ˜ç¡®çš„è¿”å›å€¼ï¼Œå°±ä¼šé»˜è®¤è¿”å›Noneï¼ŒNoneä¹Ÿå¸¸å¸¸ä½œä¸ºå‡½æ•°çš„é»˜è®¤å‚æ•°ã€‚</p>
<h4 id="æ—¶é—´å’Œæ—¥æœŸ"><a href="#æ—¶é—´å’Œæ—¥æœŸ" class="headerlink" title="æ—¶é—´å’Œæ—¥æœŸ"></a>æ—¶é—´å’Œæ—¥æœŸ</h4><p>Pythonå†…å»ºçš„<code>datetime</code>æ¨¡å—æä¾›äº†<code>datetime</code>ã€<code>date</code>å’Œ<code>time</code>ç±»å‹ã€‚<code>datetime</code>ç±»å‹ç»“åˆäº†<code>date</code>å’Œ<code>time</code>ï¼Œæ˜¯æœ€å¸¸ä½¿ç”¨çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">102</span>]: <span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, date, time</span><br><span class="line"></span><br><span class="line">In [<span class="number">103</span>]: dt = datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">104</span>]: dt.day</span><br><span class="line">Out[<span class="number">104</span>]: <span class="number">29</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">105</span>]: dt.minute</span><br><span class="line">Out[<span class="number">105</span>]: <span class="number">30</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">106</span>]: dt.date()</span><br><span class="line">Out[<span class="number">106</span>]: datetime.date(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: dt.time()</span><br><span class="line">Out[<span class="number">107</span>]: datetime.time(<span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br></pre></td></tr></table></figure>
<p><code>strftime</code>æ–¹æ³•å¯ä»¥å°†datetimeæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">108</span>]: dt.strftime(<span class="string">'%m/%d/%Y %H:%M'</span>)</span><br><span class="line">Out[<span class="number">108</span>]: <span class="string">'10/29/2011 20:30'</span></span><br></pre></td></tr></table></figure>
<p><code>strptime</code>å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢æˆ<code>datetime</code>å¯¹è±¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">109</span>]: datetime.strptime(<span class="string">'20091031'</span>, <span class="string">'%Y%m%d'</span>)</span><br><span class="line">Out[<span class="number">109</span>]: datetime.datetime(<span class="number">2009</span>, <span class="number">10</span>, <span class="number">31</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-100f9a20c1536553.png?imageMogr2/auto-orient/strip|imageView2/2/w/692/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># repalceè¿›è¡Œæ›¿æ¢</span></span><br><span class="line">In [<span class="number">110</span>]: dt.replace(minute=<span class="number">0</span>, second=<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">110</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># ä¸¤ä¸ªdatetimeå¯¹è±¡çš„å·®ä¼šäº§ç”Ÿä¸€ä¸ªdatetime.timedeltaç±»å‹ï¼š</span></span><br><span class="line">In [<span class="number">111</span>]: dt2 = datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">30</span>)</span><br><span class="line">In [<span class="number">112</span>]: delta = dt2 - dt</span><br><span class="line">In [<span class="number">113</span>]: delta</span><br><span class="line">Out[<span class="number">113</span>]: datetime.timedelta(<span class="number">17</span>, <span class="number">7179</span>) <span class="comment"># 17å¤©ã€7179ç§’</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">114</span>]: type(delta)</span><br><span class="line">Out[<span class="number">114</span>]: datetime.timedelta</span><br><span class="line"><span class="comment"># å¯ä»¥å°†timedeltaæ·»åŠ åˆ°datetimeï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„åç§»datetime </span></span><br><span class="line">In [<span class="number">115</span>]: dt</span><br><span class="line">Out[<span class="number">115</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">10</span>, <span class="number">29</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">116</span>]: dt + delta</span><br><span class="line">Out[<span class="number">116</span>]: datetime.datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">30</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h4><h5 id="ifè¯­å¥ï¼š"><a href="#ifè¯­å¥ï¼š" class="headerlink" title="ifè¯­å¥ï¼š"></a>ifè¯­å¥ï¼š</h5><p>if elif else</p>
<h5 id="forå¾ªç¯ï¼š"><a href="#forå¾ªç¯ï¼š" class="headerlink" title="forå¾ªç¯ï¼š"></a>forå¾ªç¯ï¼š</h5><p>å¯ä»¥ç”¨continueä½¿forå¾ªç¯æå‰ï¼Œè·³è¿‡å‰©ä¸‹çš„éƒ¨åˆ†ï¼›å¯ä»¥ç”¨<code>break</code>è·³å‡ºforå¾ªç¯ï¼Œbreakåªä¸­æ–­forå¾ªç¯çš„æœ€å†…å±‚ï¼Œå…¶ä½™çš„forå¾ªç¯ä»ä¼šè¿è¡Œã€‚</p>
<h5 id="whileå¾ªç¯ï¼š"><a href="#whileå¾ªç¯ï¼š" class="headerlink" title="whileå¾ªç¯ï¼š"></a>whileå¾ªç¯ï¼š</h5><h5 id="passï¼š"><a href="#passï¼š" class="headerlink" title="passï¼š"></a>passï¼š</h5><p>Pythonä¸­çš„éæ“ä½œè¯­å¥ã€‚ä»£ç å—ä¸éœ€è¦ä»»ä½•åŠ¨ä½œæ—¶å¯ä»¥ä½¿ç”¨ï¼ˆä½œä¸ºæœªæ‰§è¡Œä»£ç çš„å ä½ç¬¦ï¼‰ï¼›å› ä¸ºPythonéœ€è¦ä½¿ç”¨ç©ºç™½å­—ç¬¦åˆ’å®šä»£ç å—ï¼Œæ‰€ä»¥éœ€è¦passã€‚</p>
<h4 id="ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="ä¸‰å…ƒè¡¨è¾¾å¼"></a>ä¸‰å…ƒè¡¨è¾¾å¼</h4><p>Pythonä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼å¯ä»¥å°†if-elseè¯­å¥æ”¾åˆ°ä¸€è¡Œé‡Œï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">value = true-expr <span class="keyword">if</span> condition <span class="keyword">else</span> false-expr</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬3ç« -Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶"><a href="#ç¬¬3ç« -Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶" class="headerlink" title="ç¬¬3ç«  Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶"></a>ç¬¬3ç«  Pythonçš„æ•°æ®ç»“æ„ã€å‡½æ•°å’Œæ–‡ä»¶</h2><h3 id="æ•°æ®ç»“æ„å’Œåºåˆ—"><a href="#æ•°æ®ç»“æ„å’Œåºåˆ—" class="headerlink" title="æ•°æ®ç»“æ„å’Œåºåˆ—"></a>æ•°æ®ç»“æ„å’Œåºåˆ—</h3><h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å…ƒç»„æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦ï¼Œä¸å¯æ”¹å˜çš„Pythonåºåˆ—å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå…ƒç»„</span></span><br><span class="line">tup = <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span></span><br><span class="line"><span class="comment"># å½“ç”¨å¤æ‚çš„è¡¨è¾¾å¼å®šä¹‰å…ƒç»„ï¼Œæœ€å¥½å°†å€¼æ”¾åˆ°åœ†æ‹¬å·å†…</span></span><br><span class="line">nested_tup = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line"><span class="comment"># ç”¨tupleå¯ä»¥å°†ä»»æ„åºåˆ—æˆ–è¿­ä»£å™¨è½¬æ¢æˆå…ƒç»„</span></span><br><span class="line">tuple([<span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>]) <span class="comment"># (4, 0, 2)</span></span><br><span class="line">tup = tuple(<span class="string">'string'</span>) <span class="comment"># ('s', 't', 'r', 'i', 'n', 'g')</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨æ–¹æ‹¬å·è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œåºåˆ—æ˜¯ä»0å¼€å§‹</span></span><br><span class="line">tup[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># å…ƒç»„ä¸­å­˜å‚¨çš„å¯¹è±¡å¯èƒ½æ˜¯å¯å˜å¯¹è±¡ã€‚ä¸€æ—¦åˆ›å»ºäº†å…ƒç»„ï¼Œå…ƒç»„ä¸­çš„å¯¹è±¡å°±ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">tup = tuple([<span class="string">'foo'</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="literal">True</span>])</span><br><span class="line">tup[<span class="number">2</span>] = <span class="literal">False</span>  <span class="comment"># ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># å¦‚æœå…ƒç»„ä¸­çš„æŸä¸ªå¯¹è±¡æ˜¯å¯å˜çš„ï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œå¯ä»¥åœ¨åŸä½è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">tup[<span class="number">1</span>].append(<span class="number">3</span>) <span class="comment"># ('foo', [1, 2, 3], True)</span></span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨åŠ å·è¿ç®—ç¬¦å°†å…ƒç»„ä¸²è”èµ·æ¥</span></span><br><span class="line">(<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>) + (<span class="number">6</span>, <span class="number">0</span>) + (<span class="string">'bar'</span>,) <span class="comment"># (4, None, 'foo', 6, 0, 'bar')</span></span><br><span class="line"><span class="comment"># å…ƒç»„ä¹˜ä»¥ä¸€ä¸ªæ•´æ•°ï¼Œåƒåˆ—è¡¨ä¸€æ ·ï¼Œä¼šå°†å‡ ä¸ªå…ƒç»„çš„å¤åˆ¶ä¸²è”èµ·æ¥</span></span><br><span class="line">(<span class="string">'foo'</span>, <span class="string">'bar'</span>) * <span class="number">4</span> <span class="comment"># ('foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar')</span></span><br><span class="line"><span class="comment"># å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰è¢«å¤åˆ¶ï¼Œåªæ˜¯å¼•ç”¨äº†å®ƒ</span></span><br></pre></td></tr></table></figure>
<h5 id="æ‹†åˆ†å…ƒç»„"><a href="#æ‹†åˆ†å…ƒç»„" class="headerlink" title="æ‹†åˆ†å…ƒç»„"></a>æ‹†åˆ†å…ƒç»„</h5><p>å°†å…ƒç»„èµ‹å€¼ç»™ç±»ä¼¼å…ƒç»„çš„å˜é‡ï¼ŒPythonä¼šè¯•å›¾æ‹†åˆ†ç­‰å·å³è¾¹çš„å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tup = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">a,b,c = tup</span><br><span class="line">tup = <span class="number">4</span>, <span class="number">5</span>, (<span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">a, b, (c, d) = tup</span><br><span class="line"><span class="comment"># å˜é‡æ‹†åˆ†å¸¸ç”¨æ¥è¿­ä»£å…ƒç»„æˆ–åˆ—è¡¨åºåˆ—</span></span><br><span class="line">seq = [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line"><span class="keyword">for</span> a, b, c <span class="keyword">in</span> seq:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># å¦ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é«˜çº§çš„å…ƒç»„æ‹†åˆ†åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œä»å…ƒç»„çš„å¼€å¤´â€œæ‘˜å–â€å‡ ä¸ªå…ƒç´ ã€‚å®ƒä½¿ç”¨äº†ç‰¹æ®Šçš„è¯­æ³•*rest</span></span><br><span class="line">values = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line">a, b, *rest = values</span><br><span class="line">rest <span class="comment"># [3, 4, 5]</span></span><br><span class="line"><span class="comment"># restçš„éƒ¨åˆ†æ˜¯æƒ³è¦èˆå¼ƒçš„éƒ¨åˆ†ï¼Œrestçš„åå­—ä¸é‡è¦ã€‚ä½œä¸ºæƒ¯ç”¨å†™æ³•ï¼Œè®¸å¤šPythonç¨‹åºå‘˜ä¼šå°†ä¸éœ€è¦çš„å˜é‡ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š</span></span><br><span class="line">a, b, *_ = values</span><br></pre></td></tr></table></figure>
<p>åœ¨Pythonä¸­ï¼Œæ›¿æ¢å¯ä»¥è¿™æ ·åš:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b, a = a, b</span><br></pre></td></tr></table></figure>
<h5 id="tupleæ–¹æ³•"><a href="#tupleæ–¹æ³•" class="headerlink" title="tupleæ–¹æ³•"></a>tupleæ–¹æ³•</h5><p>å…ƒç»„çš„å¤§å°å’Œå†…å®¹ä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥å…¶å®ä¾‹æ–¹æ³•éƒ½å¾ˆè½»é‡ã€‚å…¶ä¸­ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å°±æ˜¯<code>count</code>ï¼ˆä¹Ÿé€‚ç”¨äºåˆ—è¡¨ï¼‰ï¼Œå®ƒå¯ä»¥ç»Ÿè®¡æŸä¸ªå€¼å¾—å‡ºç°é¢‘ç‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line">a.count(<span class="number">2</span>) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h4><p>åˆ—è¡¨çš„é•¿åº¦å¯å˜ã€å†…å®¹å¯ä»¥è¢«ä¿®æ”¹ã€‚å¯ä»¥ç”¨æ–¹æ‹¬å·å®šä¹‰ï¼Œæˆ–ç”¨<code>list</code>å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a_list = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="literal">None</span>]</span><br><span class="line">tup = (<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>)</span><br><span class="line">b_list = list(tup) <span class="comment"># ['foo', 'bar', 'baz']</span></span><br></pre></td></tr></table></figure>
<p><code>list</code>å‡½æ•°å¸¸ç”¨æ¥åœ¨æ•°æ®å¤„ç†ä¸­å®ä½“åŒ–è¿­ä»£å™¨æˆ–ç”Ÿæˆå™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">gen = range(<span class="number">10</span>)</span><br><span class="line">list(gen) <span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>
<p><code>append</code>åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ </p>
<p><code>insert</code>åœ¨ç‰¹å®šçš„ä½ç½®æ’å…¥å…ƒç´ ï¼Œæ’å…¥çš„åºå·å¿…é¡»åœ¨0å’Œåˆ—è¡¨é•¿åº¦ä¹‹é—´</p>
<p><strong>æ³¨æ„ï¼š</strong> è­¦å‘Šï¼šä¸<code>append</code>ç›¸æ¯”ï¼Œ<code>insert</code>è€—è´¹çš„è®¡ç®—é‡å¤§ï¼Œå› ä¸ºéœ€è¦å¯¹åç»­å…ƒç´ çš„å¼•ç”¨å¿…é¡»åœ¨å†…éƒ¨è¿ç§»ï¼Œä»¥ä¾¿ä¸ºæ–°å…ƒç´ æä¾›ç©ºé—´ã€‚å¦‚æœè¦åœ¨åºåˆ—çš„å¤´éƒ¨å’Œå°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨åŒå°¾éƒ¨é˜Ÿåˆ—<code>collections.deque</code>ã€‚</p>
<p><code>pop</code>, <code>insert</code>çš„é€†è¿ç®—ï¼Œç§»é™¤å¹¶è¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ </p>
<p><code>remove</code>å»é™¤æŸä¸ªå€¼ï¼Œ<code>remove</code>ä¼šå…ˆå¯»æ‰¾ç¬¬ä¸€ä¸ªå€¼å¹¶é™¤å»</p>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä¸è€ƒè™‘æ€§èƒ½ï¼Œä½¿ç”¨<code>append</code>å’Œ<code>remove</code>ï¼Œå¯ä»¥æŠŠPythonçš„åˆ—è¡¨å½“åšå®Œç¾çš„â€œå¤šé‡é›†â€æ•°æ®ç»“æ„ã€‚</p>
<p><code>in</code> å’Œ<code>not in</code>æ£€æŸ¥åˆ—è¡¨æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼Œ </p>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨åˆ—è¡¨ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼è¿œæ¯”å­—å…¸å’Œé›†åˆé€Ÿåº¦æ…¢ï¼Œå› ä¸ºPythonæ˜¯çº¿æ€§æœç´¢åˆ—è¡¨ä¸­çš„å€¼ï¼Œä½†åœ¨å­—å…¸å’Œé›†åˆä¸­ï¼Œåœ¨åŒæ ·çš„æ—¶é—´å†…è¿˜å¯ä»¥æ£€æŸ¥å…¶å®ƒé¡¹ï¼ˆåŸºäºå“ˆå¸Œè¡¨ï¼‰</p>
<h5 id="ä¸²è”å’Œç»„åˆåˆ—è¡¨"><a href="#ä¸²è”å’Œç»„åˆåˆ—è¡¨" class="headerlink" title="ä¸²è”å’Œç»„åˆåˆ—è¡¨"></a>ä¸²è”å’Œç»„åˆåˆ—è¡¨</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨åŠ å·å°†ä¸¤ä¸ªåˆ—è¡¨ä¸²è”èµ·æ¥</span></span><br><span class="line">[<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>] + [<span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line">[<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>, <span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="comment"># ç”¨extendæ–¹æ³•å¯ä»¥è¿½åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line">x = [<span class="number">4</span>, <span class="literal">None</span>, <span class="string">'foo'</span>]</span><br><span class="line">x.extend([<span class="number">7</span>, <span class="number">8</span>, (<span class="number">2</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="comment">## é€šè¿‡åŠ æ³•å°†åˆ—è¡¨ä¸²è”çš„è®¡ç®—é‡è¾ƒå¤§ï¼Œå› ä¸ºè¦æ–°å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶ä¸”è¦å¤åˆ¶å¯¹è±¡ã€‚ç”¨extendè¿½åŠ å…ƒç´ ï¼Œå°¤å…¶æ˜¯åˆ°ä¸€ä¸ªå¤§åˆ—è¡¨ä¸­ï¼Œæ›´ä¸ºå¯å–ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨sortå‡½æ•°å°†ä¸€ä¸ªåˆ—è¡¨åŸåœ°æ’åºï¼ˆä¸åˆ›å»ºæ–°çš„å¯¹è±¡ï¼‰</span></span><br><span class="line">a = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">a.sort()</span><br><span class="line"><span class="comment"># sort äºŒçº§æ’åºkey</span></span><br><span class="line">b = [<span class="string">'saw'</span>, <span class="string">'small'</span>, <span class="string">'He'</span>, <span class="string">'foxes'</span>, <span class="string">'six'</span>]</span><br><span class="line">b.sort(key=len)</span><br><span class="line"><span class="comment"># sortedå‡½æ•°ï¼Œå®ƒå¯ä»¥äº§ç”Ÿä¸€ä¸ªæ’å¥½åºçš„åºåˆ—å‰¯æœ¬</span></span><br></pre></td></tr></table></figure>
<h5 id="äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨"><a href="#äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨" class="headerlink" title="äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨"></a>äºŒåˆ†æœç´¢å’Œç»´æŠ¤å·²æ’åºçš„åˆ—è¡¨</h5><p><code>bisect</code>æ¨¡å—æ”¯æŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå’Œå‘å·²æ’åºçš„åˆ—è¡¨æ’å…¥å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</span><br><span class="line"><span class="comment"># bisect.bisectå¯ä»¥æ‰¾åˆ°æ’å…¥å€¼åä»ä¿è¯æ’åºçš„ä½ç½®</span></span><br><span class="line">bisect.bisect(c, <span class="number">5</span>) <span class="comment"># 6</span></span><br><span class="line"><span class="comment"># bisect.insortå‘è¿™ä¸ªä½ç½®æ’å…¥å€¼</span></span><br><span class="line">bisect.insort(c, <span class="number">6</span>)</span><br><span class="line"><span class="comment">##  bisectæ¨¡å—ä¸ä¼šæ£€æŸ¥åˆ—è¡¨æ˜¯å¦å·²æ’å¥½åºï¼Œè¿›è¡Œæ£€æŸ¥çš„è¯ä¼šè€—è´¹å¤§é‡è®¡ç®—ã€‚å› æ­¤ï¼Œå¯¹æœªæ’åºçš„åˆ—è¡¨ä½¿ç”¨bisectä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼Œä½†ç»“æœä¸ä¸€å®šæ­£ç¡®ã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h5><p>ç”¨åˆ‡è¾¹å¯ä»¥é€‰å–å¤§å¤šæ•°åºåˆ—ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œåˆ‡ç‰‡çš„åŸºæœ¬å½¢å¼æ˜¯åœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨<code>start:stop</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">seq = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">seq[<span class="number">1</span>:<span class="number">5</span>] <span class="comment"># [2, 3, 7, 5]</span></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡ä¹Ÿå¯ä»¥è¢«åºåˆ—èµ‹å€¼</span></span><br><span class="line">seq[<span class="number">3</span>:<span class="number">4</span>] = [<span class="number">6</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># startæˆ–stopéƒ½å¯ä»¥è¢«çœç•¥ï¼Œçœç•¥ä¹‹åï¼Œåˆ†åˆ«é»˜è®¤åºåˆ—çš„å¼€å¤´å’Œç»“å°¾</span></span><br><span class="line">seq[<span class="number">3</span>:] </span><br><span class="line"><span class="comment"># è´Ÿæ•°è¡¨æ˜ä»åå‘å‰åˆ‡ç‰‡</span></span><br><span class="line">seq[<span class="number">-4</span>:]  <span class="comment"># [5, 6, 0, 1]</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªå†’å·åé¢ä½¿ç”¨stepï¼Œå¯ä»¥éš”å‡ ä¸ªå–ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">seq[::<span class="number">2</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨-1ï¼Œå®ƒå¯ä»¥å°†åˆ—è¡¨æˆ–å…ƒç»„é¢ å€’è¿‡æ¥</span></span><br><span class="line">seq[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-522e2b688b755ff3.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="åºåˆ—å‡½æ•°"><a href="#åºåˆ—å‡½æ•°" class="headerlink" title="åºåˆ—å‡½æ•°"></a>åºåˆ—å‡½æ•°</h4><p>Pythonæœ‰ä¸€äº›æœ‰ç”¨çš„åºåˆ—å‡½æ•°ã€‚</p>
<h5 id="enumerateå‡½æ•°"><a href="#enumerateå‡½æ•°" class="headerlink" title="enumerateå‡½æ•°"></a>enumerateå‡½æ•°</h5><p>è¿­ä»£ä¸€ä¸ªåºåˆ—æ—¶ï¼Œæƒ³è¦è·Ÿè¸ªå½“å‰é¡¹çš„åºå·ï¼Œå¯ä»¥ä½¿ç”¨Pythonå†…å»ºçš„<code>enumerate</code>å‡½æ•°ï¼Œå¯ä»¥è¿”å›<code>(i, value)</code>å…ƒç»„åºåˆ—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate(collection):</span><br><span class="line">   <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>ç´¢å¼•æ•°æ®æ—¶ï¼Œä½¿ç”¨<code>enumerate</code>çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯è®¡ç®—åºåˆ—ï¼ˆå”¯ä¸€çš„ï¼‰<code>dict</code>æ˜ å°„åˆ°ä½ç½®çš„å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> enumerate(some_list):</span><br><span class="line">    mapping[v] = i</span><br><span class="line">mapping <span class="comment">#  &#123;'bar': 1, 'baz': 2, 'foo': 0&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="sortedå‡½æ•°"><a href="#sortedå‡½æ•°" class="headerlink" title="sortedå‡½æ•°"></a>sortedå‡½æ•°</h5><p>è¿”å›ä¸€ä¸ª<strong>æ–°çš„</strong> æ’å¥½åºçš„åˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">7</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br><span class="line">b = sorted(a)</span><br><span class="line">b <span class="comment"># [0, 1, 2, 2, 3, 6, 7]</span></span><br><span class="line">a <span class="comment"># [7, 1, 2, 6, 0, 3, 2]</span></span><br></pre></td></tr></table></figure>
<h5 id="zipå‡½æ•°"><a href="#zipå‡½æ•°" class="headerlink" title="zipå‡½æ•°"></a>zipå‡½æ•°</h5><p>å°†å¤šä¸ªåˆ—è¡¨ã€å…ƒç»„æˆ–å…¶å®ƒåºåˆ—æˆå¯¹ç»„åˆæˆä¸€ä¸ªå…ƒç»„åˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">seq1 = [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br><span class="line">seq2 = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>]</span><br><span class="line">zipped = zip(seq1, seq2)</span><br><span class="line">list(zipped) <span class="comment"># [('foo', 'one'), ('bar', 'two'), ('baz', 'three')]</span></span><br><span class="line"><span class="comment"># zipå¯ä»¥å¤„ç†ä»»æ„å¤šçš„åºåˆ—ï¼Œå…ƒç´ çš„ä¸ªæ•°å–å†³äºæœ€çŸ­çš„åºåˆ—</span></span><br><span class="line">seq3 = [<span class="literal">False</span>, <span class="literal">True</span>]</span><br><span class="line">list(zip(seq1, seq2, seq3)) <span class="comment">#  [('foo', 'one', False), ('bar', 'two', True)]</span></span><br></pre></td></tr></table></figure>
<p><code>zip</code>å¯ä»¥è¢«ç”¨æ¥è§£å‹åºåˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pitchers = [(<span class="string">'Nolan'</span>, <span class="string">'Ryan'</span>), (<span class="string">'Roger'</span>, <span class="string">'Clemens'</span>), (<span class="string">'Schilling'</span>, <span class="string">'Curt'</span>)]</span><br><span class="line">first_names, last_names = zip(*pitchers)</span><br><span class="line">first_names  <span class="comment"># ('Nolan', 'Roger', 'Schilling')</span></span><br><span class="line">last_names   <span class="comment"># ('Ryan', 'Clemens', 'Curt')</span></span><br></pre></td></tr></table></figure>
<p><code>zip</code>çš„å¸¸è§ç”¨æ³•ä¹‹ä¸€æ˜¯åŒæ—¶è¿­ä»£å¤šä¸ªåºåˆ—ï¼Œå¯èƒ½ç»“åˆ<code>enumerate</code>ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i, (a, b) <span class="keyword">in</span> enumerate(zip(seq1, seq2)):     </span><br><span class="line">    print(<span class="string">'&#123;0&#125;: &#123;1&#125;, &#123;2&#125;'</span>.format(i, a, b))</span><br><span class="line"><span class="number">0</span>: foo, one</span><br><span class="line"><span class="number">1</span>: bar, two</span><br><span class="line"><span class="number">2</span>: baz, three</span><br></pre></td></tr></table></figure>
<h5 id="reversedå‡½æ•°"><a href="#reversedå‡½æ•°" class="headerlink" title="reversedå‡½æ•°"></a>reversedå‡½æ•°</h5><p><code>reversed</code>æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼ˆzipä¹Ÿæ˜¯ï¼‰ï¼Œå¯ä»¥ä»åå‘å‰è¿­ä»£ä¸€ä¸ªåºåˆ—ã€‚æ³¨æ„ï¼šåªæœ‰å®ä½“åŒ–ï¼ˆå³åˆ—è¡¨æˆ–forå¾ªç¯ï¼‰ä¹‹åæ‰èƒ½åˆ›å»ºç¿»è½¬çš„åºåˆ—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list(reversed(range(<span class="number">10</span>))) <span class="comment"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span></span><br></pre></td></tr></table></figure>
<h4 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h4><p>ä¹Ÿç§°ä¸ºï¼šå“ˆå¸Œæ˜ å°„æˆ–å…³è”æ•°ç»„ã€‚å®ƒæ˜¯é”®å€¼å¯¹çš„å¤§å°å¯å˜é›†åˆï¼Œé”®å’Œå€¼éƒ½æ˜¯Pythonå¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”±&#123;&#125;å®šä¹‰</span></span><br><span class="line">d1 = &#123;<span class="string">'a'</span> : <span class="string">'some value'</span>, <span class="string">'b'</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;</span><br><span class="line"><span class="comment"># æ·»åŠ </span></span><br><span class="line">d1[<span class="number">7</span>] = <span class="string">'an integer'</span></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">d1[<span class="string">'b'</span>]  <span class="comment"># [1,2,3,4]</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦åŒ…å«æŸä¸ªé”®</span></span><br><span class="line"><span class="string">'b'</span> <span class="keyword">in</span> d1</span><br><span class="line"><span class="comment"># ç”¨delå…³é”®å­—æˆ–popæ–¹æ³•ï¼ˆè¿”å›å€¼çš„åŒæ—¶åˆ é™¤é”®ï¼‰åˆ é™¤å€¼</span></span><br><span class="line"><span class="keyword">del</span> d1[<span class="string">'b'</span>]</span><br><span class="line">ret = d1.pop(<span class="string">'b'</span>)  <span class="comment"># ret: [1, 2, 3, 4]</span></span><br><span class="line"><span class="comment"># keyså’Œvaluesæ˜¯å­—å…¸çš„é”®å’Œå€¼çš„è¿­ä»£å™¨æ–¹æ³•ã€‚è™½ç„¶é”®å€¼å¯¹æ²¡æœ‰é¡ºåºï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ç”¨ç›¸åŒçš„é¡ºåºè¾“å‡ºé”®å’Œå€¼ï¼š</span></span><br><span class="line">list(d1.keys()) <span class="comment"># ['a', 'b', 7]</span></span><br><span class="line">list(d1.values()) <span class="comment"># ['some value', [1, 2, 3, 4], 'an integer']</span></span><br><span class="line"><span class="comment"># updateæ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå­—å…¸ä¸å¦ä¸€ä¸ªèåˆ</span></span><br><span class="line">d1.update(&#123;<span class="string">'b'</span> : <span class="string">'foo'</span>, <span class="string">'c'</span> : <span class="number">12</span>&#125;) <span class="comment"># é”®'b'å¯¹åº”çš„å€¼ä¼šæ”¹å˜</span></span><br><span class="line"><span class="comment"># updateæ–¹æ³•æ˜¯åŸåœ°æ”¹å˜å­—å…¸ï¼Œä»»ä½•ä¼ é€’ç»™updateçš„é”®çš„æ—§çš„å€¼éƒ½ä¼šè¢«èˆå¼ƒã€‚</span></span><br></pre></td></tr></table></figure>
<h5 id="ç”¨åºåˆ—åˆ›å»ºå­—å…¸"><a href="#ç”¨åºåˆ—åˆ›å»ºå­—å…¸" class="headerlink" title="ç”¨åºåˆ—åˆ›å»ºå­—å…¸"></a>ç”¨åºåˆ—åˆ›å»ºå­—å…¸</h5><p>å°†ä¸¤ä¸ªåºåˆ—é…å¯¹ç»„åˆæˆå­—å…¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> zip(key_list, value_list):</span><br><span class="line">    mapping[key] = val</span><br></pre></td></tr></table></figure>
<p>å­—å…¸æœ¬è´¨ä¸Šæ˜¯2å…ƒå…ƒç»„çš„é›†åˆï¼Œæ‰€ä»¥dictå¯ä»¥æ¥å—2å…ƒå…ƒç»„çš„åˆ—è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mapping = dict(zip(range(<span class="number">5</span>), reversed(range(<span class="number">5</span>))))</span><br></pre></td></tr></table></figure>
<h5 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h5><p>dictçš„æ–¹æ³•getå’Œpopå¯ä»¥å–é»˜è®¤å€¼è¿›è¡Œè¿”å›ã€‚geté»˜è®¤ä¼šè¿”å›Noneï¼Œå¦‚æœä¸å­˜åœ¨é”®ï¼Œpopä¼šæŠ›å‡ºä¸€ä¸ªä¾‹å¤–ã€‚</p>
<p><code>value = some_dict.get(key, default_value)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">words = [<span class="string">'apple'</span>, <span class="string">'bat'</span>, <span class="string">'bar'</span>, <span class="string">'atom'</span>, <span class="string">'book'</span>]</span><br><span class="line">by_letter = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    letter = word[<span class="number">0</span>]</span><br><span class="line">    by_letter.setdefault(letter, []).append(word)</span><br></pre></td></tr></table></figure>
<p><code>collections</code>æ¨¡å—æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç±»ï¼Œ<code>defaultdict</code>ï¼Œå®ƒå¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä¸Šé¢ã€‚ä¼ é€’ç±»å‹æˆ–å‡½æ•°ä»¥ç”Ÿæˆæ¯ä¸ªä½ç½®çš„é»˜è®¤å€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">by_letter = defaultdict(list)</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">    by_letter[word[<span class="number">0</span>]].append(word)</span><br></pre></td></tr></table></figure>
<h5 id="æœ‰æ•ˆçš„é”®å¯¹ç±»å‹"><a href="#æœ‰æ•ˆçš„é”®å¯¹ç±»å‹" class="headerlink" title="æœ‰æ•ˆçš„é”®å¯¹ç±»å‹"></a>æœ‰æ•ˆçš„é”®å¯¹ç±»å‹</h5><p>å­—å…¸çš„å€¼å¯ä»¥æ˜¯ä»»æ„Pythonå¯¹è±¡ï¼Œè€Œé”®é€šå¸¸æ˜¯ä¸å¯å˜çš„æ ‡é‡ç±»å‹ï¼ˆæ•´æ•°ã€æµ®ç‚¹å‹ã€å­—ç¬¦ä¸²ï¼‰æˆ–å…ƒç»„ï¼ˆå…ƒç»„ä¸­çš„å¯¹è±¡å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚è¿™è¢«ç§°ä¸º<strong>â€œå¯å“ˆå¸Œæ€§â€</strong> ã€‚å¯ä»¥ç”¨<code>hash</code>å‡½æ•°æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯å“ˆå¸Œçš„ï¼ˆå¯è¢«ç”¨ä½œå­—å…¸çš„é”®ï¼‰ï¼š</p>
<h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><p>æ— åºçš„ä¸å¯é‡å¤çš„å…ƒç´ çš„é›†åˆã€‚å¯çœ‹æˆåªæœ‰é”®æ²¡æœ‰å€¼çš„å­—å…¸ã€‚å¯ä»¥é€šè¿‡setå‡½æ•°æˆ–ä½¿ç”¨å°–æ‹¬å·setè¯­å¥åˆ›å»ºé›†åˆï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">set([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>]) <span class="comment"># &#123;1, 2, 3&#125;</span></span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>&#125; <span class="comment"># &#123;1, 2, 3&#125;</span></span><br></pre></td></tr></table></figure>
<p>é›†åˆæ”¯æŒåˆå¹¶ã€äº¤é›†ã€å·®åˆ†å’Œå¯¹ç§°å·®ç­‰æ•°å­¦é›†åˆè¿ç®—ã€‚</p>
<h5 id="åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…-è¿ç®—ç¬¦ï¼‰"><a href="#åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…-è¿ç®—ç¬¦ï¼‰" class="headerlink" title="åˆå¹¶ï¼ˆunionæ–¹æ³•ï¼Œæˆ–è€…|è¿ç®—ç¬¦ï¼‰"></a>åˆå¹¶ï¼ˆ<code>union</code>æ–¹æ³•ï¼Œæˆ–è€…<code>|</code>è¿ç®—ç¬¦ï¼‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.union(b) <span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br><span class="line">a | b <span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="äº¤é›†ï¼ˆintersectionæˆ–-amp-è¿ç®—ç¬¦ï¼‰"><a href="#äº¤é›†ï¼ˆintersectionæˆ–-amp-è¿ç®—ç¬¦ï¼‰" class="headerlink" title="äº¤é›†ï¼ˆintersectionæˆ–&amp;è¿ç®—ç¬¦ï¼‰"></a>äº¤é›†ï¼ˆ<code>intersection</code>æˆ–<code>&amp;</code>è¿ç®—ç¬¦ï¼‰</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.intersection(b) <span class="comment"># &#123;3, 4, 5&#125;</span></span><br><span class="line">a &amp; b <span class="comment"># &#123;3, 4, 5&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-980efe5d98ecc4d6.png?imageMogr2/auto-orient/strip|imageView2/2/w/695/format/webp" alt="img"></p>
<p>æ‰€æœ‰é€»è¾‘é›†åˆæ“ä½œéƒ½æœ‰å¦å¤–çš„åŸåœ°å®ç°æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç”¨ç»“æœæ›¿ä»£é›†åˆçš„å†…å®¹ï¼Œå¯¹äºå¤§çš„é›†åˆï¼Œè¿™ä¹ˆåšæ•ˆç‡æ›´é«˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">b = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br><span class="line">c = a.copy()  <span class="comment"># ç¡¬copy</span></span><br><span class="line">c |= b</span><br><span class="line">d = a.copy()</span><br><span class="line">d &amp;= b</span><br></pre></td></tr></table></figure>
<p>ä¸å­—å…¸çš„é”®ç±»ä¼¼ï¼Œé›†åˆå…ƒç´ é€šå¸¸éƒ½æ˜¯ä¸å¯å˜çš„ã€‚è¦è·å¾—ç±»ä¼¼åˆ—è¡¨çš„å…ƒç´ ï¼Œå¿…é¡»è½¬æ¢æˆå…ƒç»„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">my_data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">my_set = &#123;tuple(my_data)&#125;</span><br><span class="line"><span class="comment"># ç›´æ¥ my_set = &#123;[1, 2, 3, 4]&#125; ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼"><a href="#åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼" class="headerlink" title="åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼"></a>åˆ—è¡¨ï¼Œé›†åˆå’Œå­—å…¸æ¨å¯¼å¼</h5><p>è¯¥ç‰¹æ€§å…è®¸ç”¨æˆ·ä»ä¸€ä¸ªé›†åˆè¿‡æ»¤å…ƒç´ ï¼Œå½¢æˆåˆ—è¡¨ï¼Œé›†åˆæˆ–å­—å…¸ï¼Œåœ¨ä¼ é€’å‚æ•°çš„è¿‡ç¨‹ä¸­è¿˜å¯ä»¥ä¿®æ”¹å…ƒç´ ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—è¡¨æ¨å¯¼å¼</span></span><br><span class="line">[expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition]</span><br><span class="line"><span class="comment"># å­—å…¸æ¨å¯¼å¼</span></span><br><span class="line">dict_comp = &#123;key-expr : value-expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125;</span><br><span class="line"><span class="comment"># ä¾‹å­</span></span><br><span class="line">loc_mapping = &#123;val : index <span class="keyword">for</span> index, val <span class="keyword">in</span> enumerate(strings)&#125;</span><br><span class="line"><span class="comment"># é›†åˆæ¨å¯¼å¼</span></span><br><span class="line">set_comp = &#123;expr <span class="keyword">for</span> value <span class="keyword">in</span> collection <span class="keyword">if</span> condition&#125;</span><br><span class="line"><span class="comment"># mapå‡½æ•°</span></span><br><span class="line">strings = [<span class="string">'a'</span>, <span class="string">'as'</span>, <span class="string">'bat'</span>, <span class="string">'car'</span>, <span class="string">'dove'</span>, <span class="string">'python'</span>]</span><br><span class="line">unique_lengths = &#123;len(x) <span class="keyword">for</span> x <span class="keyword">in</span> strings&#125;</span><br><span class="line">set(map(len, strings)) <span class="comment"># map è¿”å›å¯è¿­ä»£å™¨ï¼Œä¹Ÿå¯ä»¥list(map(len,strings))</span></span><br></pre></td></tr></table></figure>
<h5 id="åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼"><a href="#åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼" class="headerlink" title="åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼"></a>åµŒå¥—åˆ—è¡¨æ¨å¯¼å¼</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_data = [[<span class="string">'John'</span>, <span class="string">'Emily'</span>, <span class="string">'Michael'</span>, <span class="string">'Mary'</span>, <span class="string">'Steven'</span>],[<span class="string">'Maria'</span>, <span class="string">'Juan'</span>, <span class="string">'Javier'</span>, <span class="string">'Natalia'</span>, <span class="string">'Pilar'</span>]]</span><br><span class="line">result = [name <span class="keyword">for</span> names <span class="keyword">in</span> all_data <span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">if</span> name.count(<span class="string">'e'</span>) &gt;= <span class="number">2</span>]</span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªæ•´æ•°å…ƒç»„çš„åˆ—è¡¨æ‰å¹³åŒ–æˆäº†ä¸€ä¸ªæ•´æ•°åˆ—è¡¨</span></span><br><span class="line">some_tuples = [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line">flattened = [x <span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples <span class="keyword">for</span> x <span class="keyword">in</span> tup]</span><br><span class="line">[[x <span class="keyword">for</span> x <span class="keyword">in</span> tup] <span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples] <span class="comment"># è¿™æ ·äº§ç”Ÿä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line"><span class="comment"># forè¡¨è¾¾å¼çš„é¡ºåºæ˜¯ä¸åµŒå¥—forå¾ªç¯çš„é¡ºåºä¸€æ ·</span></span><br><span class="line">flattened = []</span><br><span class="line"><span class="keyword">for</span> tup <span class="keyword">in</span> some_tuples:</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> tup:</span><br><span class="line">        flattened.append(x)</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>å‡½æ•°æ˜¯Pythonä¸­æœ€ä¸»è¦ä¹Ÿæ˜¯æœ€é‡è¦çš„<strong>ä»£ç ç»„ç»‡å’Œå¤ç”¨æ‰‹æ®µ</strong> ã€‚å¦‚æœè¦<strong>é‡å¤ä½¿ç”¨ç›¸åŒæˆ–éå¸¸ç±»ä¼¼çš„ä»£ç </strong>ï¼Œå°±éœ€è¦å†™ä¸€ä¸ªå‡½æ•°ã€‚é€šè¿‡ç»™å‡½æ•°èµ·ä¸€ä¸ªåå­—ï¼Œè¿˜å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>å‡½æ•°ä½¿ç”¨<code>def</code>å…³é”®å­—å£°æ˜ï¼Œç”¨<code>return</code>å…³é”®å­—è¿”å›å€¼ï¼šå¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šæ¡returnè¯­å¥ã€‚å¦‚æœåˆ°è¾¾å‡½æ•°æœ«å°¾æ—¶æ²¡æœ‰é‡åˆ°ä»»ä½•ä¸€æ¡returnè¯­å¥ï¼Œåˆ™è¿”å›Noneã€‚</p>
<p>ä½ç½®å‚æ•°ï¼ˆpositionalï¼‰å’Œä¸€äº›å…³é”®å­—å‚æ•°ï¼ˆkeywordï¼‰ã€‚å…³é”®å­—å‚æ•°é€šå¸¸ç”¨äºæŒ‡å®šé»˜è®¤å€¼æˆ–å¯é€‰å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span><span class="params">(x, y, z=<span class="number">1.5</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> z &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> z * (x + y)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> z / (x + y)</span><br><span class="line"><span class="comment"># zæ˜¯å…³é”®å­—å‚æ•°</span></span><br><span class="line">my_function(<span class="number">5</span>, <span class="number">6</span>, z=<span class="number">0.7</span>)</span><br><span class="line">my_function(<span class="number">3.14</span>, <span class="number">7</span>, <span class="number">3.5</span>)</span><br><span class="line">my_function(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="comment"># å…³é”®å­—å‚æ•°å¿…é¡»ä½äºä½ç½®å‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¹‹åï¼Œå…³é”®å­—å‚æ•°é¡ºåºå¯ä»¥éšä¾¿</span></span><br></pre></td></tr></table></figure>
<h4 id="å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°"><a href="#å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°" class="headerlink" title="å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°"></a>å‘½åç©ºé—´ã€ä½œç”¨åŸŸå’Œå±€éƒ¨å‡½æ•°</h4><p>å‡½æ•°å¯ä»¥è®¿é—®ä¸¤ç§ä¸åŒä½œç”¨åŸŸä¸­çš„å˜é‡ï¼šå…¨å±€ï¼ˆglobalï¼‰å’Œå±€éƒ¨ï¼ˆlocalï¼‰</p>
<p>Pythonä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ç”¨äºæè¿°å˜é‡ä½œç”¨åŸŸçš„åç§°ã€‚ä»»ä½•åœ¨å‡½æ•°ä¸­èµ‹å€¼çš„å˜é‡é»˜è®¤éƒ½è¢«åˆ†é…åˆ°å±€éƒ¨å‘½åç©ºé—´ï¼ˆlocal namespaceï¼‰ä¸­ã€‚å±€éƒ¨å‘½åç©ºé—´æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»ºçš„ï¼Œå‡½æ•°å‚æ•°ä¼šç«‹å³å¡«å…¥è¯¥å‘½åç©ºé—´ã€‚åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå±€éƒ¨å‘½åç©ºé—´å°±ä¼šè¢«é”€æ¯ã€‚</p>
<h4 id="è¿”å›å¤šä¸ªå€¼"><a href="#è¿”å›å¤šä¸ªå€¼" class="headerlink" title="è¿”å›å¤šä¸ªå€¼"></a>è¿”å›å¤šä¸ªå€¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    a = <span class="number">5</span></span><br><span class="line">    b = <span class="number">6</span></span><br><span class="line">    c = <span class="number">7</span></span><br><span class="line">    <span class="keyword">return</span> a, b, c</span><br><span class="line">    <span class="comment">#return &#123;'a' : a, 'b' : b, 'c' : c&#125; #ä¹Ÿå¯ä»¥è¿”å›å­—å…¸</span></span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°å…¶å®åªè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œæœ€åè¯¥å…ƒç»„ä¼šè¢«æ‹†åŒ…åˆ°å„ä¸ªç»“æœå˜é‡ä¸­ã€‚</p>
<h4 id="å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡"><a href="#å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡" class="headerlink" title="å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡"></a>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</h4><p>æ•°æ®æ¸…æ´—ï¼š</p>
<p>ä¸ºäº†å¾—åˆ°ä¸€ç»„èƒ½ç”¨äºåˆ†æå·¥ä½œçš„æ ¼å¼ç»Ÿä¸€çš„å­—ç¬¦ä¸²ï¼Œéœ€è¦åšå¾ˆå¤šäº‹æƒ…ï¼šå»é™¤ç©ºç™½ç¬¦ã€åˆ é™¤å„ç§æ ‡ç‚¹ç¬¦å·ã€æ­£ç¡®çš„å¤§å†™æ ¼å¼ç­‰ã€‚åšæ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨å†…å»ºçš„å­—ç¬¦ä¸²æ–¹æ³•å’Œæ­£åˆ™è¡¨è¾¾å¼<code>re</code>æ¨¡å—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_strings</span><span class="params">(strings)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> strings:</span><br><span class="line">        value = value.strip()</span><br><span class="line">        value = re.sub(<span class="string">'[!#?]'</span>, <span class="string">''</span>, value)</span><br><span class="line">        value = value.title()</span><br><span class="line">        result.append(value)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">clean_strings(states)</span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove_punctuation</span><span class="params">(value)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> re.sub(<span class="string">'[!#?]'</span>, <span class="string">''</span>, value)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clean_strings</span><span class="params">(strings, ops)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> strings:</span><br><span class="line">        <span class="keyword">for</span> function <span class="keyword">in</span> ops:</span><br><span class="line">            value = function(value)</span><br><span class="line">        result.append(value)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">clean_ops = [str.strip, remove_punctuation, str.title]</span><br><span class="line">clean_strings(states, clean_ops)</span><br></pre></td></tr></table></figure>
<h4 id="åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°"><a href="#åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°" class="headerlink" title="åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°"></a>åŒ¿åï¼ˆlambdaï¼‰å‡½æ•°</h4><p>Pythonæ”¯æŒä¸€ç§è¢«ç§°ä¸ºåŒ¿åå‡½æ•°ï¼ˆlambdaå‡½æ•°ï¼Œè¿™ç§å‡½æ•°å¯¹è±¡æœ¬èº«æ˜¯æ²¡æœ‰æä¾›åç§°<strong>name</strong>å±æ€§ï¼‰ã€‚ä»…ç”±å•æ¡è¯­å¥ç»„æˆï¼Œè¯¥è¯­å¥çš„ç»“æœå°±æ˜¯è¿”å›å€¼ã€‚é€šè¿‡lambdaå…³é”®å­—å®šä¹‰çš„ï¼Œè¯¥å…³é”®å­—æ²¡æœ‰å«ä¹‰ï¼Œä»…ä»…è¡¨æ˜â€œæ­£åœ¨å£°æ˜çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°â€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_to_list</span><span class="params">(some_list, f)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [f(x) <span class="keyword">for</span> x <span class="keyword">in</span> some_list]</span><br><span class="line"></span><br><span class="line">ints = [<span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">apply_to_list(ints, <span class="keyword">lambda</span> x: x * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨"><a href="#æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨" class="headerlink" title="æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨"></a>æŸ¯é‡ŒåŒ–ï¼šéƒ¨åˆ†å‚æ•°åº”ç”¨</h4><p>æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰æ˜¯ä¸€ä¸ªè®¡ç®—æœºç§‘å­¦æœ¯è¯­ï¼Œæ˜¯æŒ‡é€šè¿‡â€œéƒ¨åˆ†å‚æ•°åº”ç”¨â€ï¼ˆpartial argument applicationï¼‰ä»ç°æœ‰å‡½æ•°æ´¾ç”Ÿå‡ºæ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æœ‰ä¸€ä¸ªæ‰§è¡Œä¸¤æ•°ç›¸åŠ çš„ç®€å•å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_numbers</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"><span class="comment"># é€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°</span></span><br><span class="line">add_five = <span class="keyword">lambda</span> y: add_numbers(<span class="number">5</span>, y)</span><br><span class="line"><span class="comment"># add_numbersçš„ç¬¬äºŒä¸ªå‚æ•°ç§°ä¸ºâ€œæŸ¯é‡ŒåŒ–çš„â€ï¼ˆcurriedï¼‰</span></span><br></pre></td></tr></table></figure>
<p>æœ¬è´¨ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥è°ƒç”¨ç°æœ‰å‡½æ•°çš„æ–°å‡½æ•°è€Œå·²ã€‚å†…ç½®çš„functoolsæ¨¡å—å¯ä»¥ç”¨partialå‡½æ•°å°†æ­¤è¿‡ç¨‹ç®€åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line">add_five = partial(add_numbers, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h4><p>Pythonå¯ä»¥ä»¥ä¸€ç§ä¸€è‡´çš„æ–¹å¼å¯¹åºåˆ—è¿›è¡Œè¿­ä»£ï¼ˆæ¯”å¦‚åˆ—è¡¨ä¸­çš„å¯¹è±¡æˆ–æ–‡ä»¶ä¸­çš„è¡Œï¼‰ã€‚è¿™æ˜¯é€šè¿‡ä¸€ç§å«åšè¿­ä»£å™¨åè®®ï¼ˆiterator protocolï¼Œå®ƒæ˜¯ä¸€ç§ä½¿å¯¹è±¡å¯è¿­ä»£çš„é€šç”¨æ–¹å¼ï¼‰çš„æ–¹å¼å®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªåŸç”Ÿçš„ä½¿å¯¹è±¡å¯è¿­ä»£çš„æ–¹æ³•ã€‚</p>
<p>è¿­ä»£å™¨æ˜¯ä¸€ç§ç‰¹æ®Šå¯¹è±¡ï¼Œå®ƒå¯ä»¥åœ¨è¯¸å¦‚forå¾ªç¯ä¹‹ç±»çš„ä¸Šä¸‹æ–‡ä¸­å‘Pythonè§£é‡Šå™¨è¾“é€å¯¹è±¡ã€‚å¤§éƒ¨åˆ†èƒ½æ¥å—åˆ—è¡¨ä¹‹ç±»çš„å¯¹è±¡çš„æ–¹æ³•ä¹Ÿéƒ½å¯ä»¥æ¥å—ä»»ä½•å¯è¿­ä»£å¯¹è±¡ã€‚æ¯”å¦‚minã€maxã€sumç­‰å†…ç½®æ–¹æ³•ä»¥åŠlistã€tupleç­‰ç±»å‹æ„é€ å™¨ã€‚</p>
<p>ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰æ˜¯æ„é€ æ–°çš„å¯è¿­ä»£å¯¹è±¡çš„ä¸€ç§ç®€å•æ–¹å¼ã€‚ä¸€èˆ¬çš„å‡½æ•°æ‰§è¡Œä¹‹ååªä¼šè¿”å›å•ä¸ªå€¼ï¼Œè€Œç”Ÿæˆå™¨åˆ™æ˜¯ä»¥å»¶è¿Ÿçš„æ–¹å¼è¿”å›ä¸€ä¸ªå€¼åºåˆ—ï¼Œå³æ¯è¿”å›ä¸€ä¸ªå€¼ä¹‹åæš‚åœï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªå€¼è¢«è¯·æ±‚æ—¶å†ç»§ç»­ã€‚è¦åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨ï¼Œåªéœ€å°†å‡½æ•°ä¸­çš„returnæ›¿æ¢ä¸ºyeildå³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">squares</span><span class="params">(n=<span class="number">10</span>)</span>:</span></span><br><span class="line">    print(<span class="string">'Generating squares from 1 to &#123;0&#125;'</span>.format(n ** <span class="number">2</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">yield</span> i ** <span class="number">2</span></span><br><span class="line">              </span><br><span class="line"><span class="comment"># è°ƒç”¨è¯¥ç”Ÿæˆå™¨æ—¶ï¼Œæ²¡æœ‰ä»»ä½•ä»£ç ä¼šè¢«ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">gen = squares()</span><br><span class="line"><span class="comment"># ç›´åˆ°ä»è¯¥ç”Ÿæˆå™¨ä¸­è¯·æ±‚å…ƒç´ æ—¶ï¼Œå®ƒæ‰ä¼šå¼€å§‹æ‰§è¡Œå…¶ä»£ç </span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> gen:</span><br><span class="line">    print(x,end=<span class="string">' '</span> )</span><br></pre></td></tr></table></figure>
<h5 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator-expressionï¼‰"><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator-expressionï¼‰" class="headerlink" title="ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator expressionï¼‰"></a>ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼ˆgenerator expressionï¼‰</h5><p>å¦ä¸€ç§æ›´ç®€æ´çš„æ„é€ ç”Ÿæˆå™¨çš„æ–¹æ³•ã€‚ç±»ä¼¼äºåˆ—è¡¨ã€å­—å…¸ã€é›†åˆæ¨å¯¼å¼çš„ç”Ÿæˆå™¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…¶åˆ›å»ºæ–¹å¼ä¸ºï¼ŒæŠŠåˆ—è¡¨æ¨å¯¼å¼ä¸¤ç«¯çš„æ–¹æ‹¬å·æ”¹æˆåœ†æ‹¬å·</span></span><br><span class="line">gen = (x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>))</span><br><span class="line"><span class="comment"># ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_make_gen</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">        <span class="keyword">yield</span> x ** <span class="number">2</span></span><br><span class="line">gen = _make_gen()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å–ä»£åˆ—è¡¨æ¨å¯¼å¼ï¼Œä½œä¸ºå‡½æ•°å‚æ•°</span></span><br><span class="line">sum(x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">100</span>))</span><br><span class="line">dict((i, i **<span class="number">2</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h5 id="itertoolsæ¨¡å—"><a href="#itertoolsæ¨¡å—" class="headerlink" title="itertoolsæ¨¡å—"></a>itertoolsæ¨¡å—</h5><p>æ ‡å‡†åº“itertoolsæ¨¡å—ä¸­æœ‰ä¸€ç»„ç”¨äºè®¸å¤šå¸¸è§æ•°æ®ç®—æ³•çš„ç”Ÿæˆå™¨ã€‚ä¾‹å¦‚ï¼Œgroupbyå¯ä»¥æ¥å—ä»»ä½•åºåˆ—å’Œä¸€ä¸ªå‡½æ•°ã€‚å®ƒæ ¹æ®å‡½æ•°çš„è¿”å›å€¼å¯¹åºåˆ—ä¸­çš„<strong>è¿ç»­å…ƒç´ è¿›è¡Œåˆ†ç»„</strong> ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">first_letter = <span class="keyword">lambda</span> x: x[<span class="number">0</span>]</span><br><span class="line">names = [<span class="string">'Alan'</span>, <span class="string">'Adam'</span>, <span class="string">'Wes'</span>, <span class="string">'Will'</span>, <span class="string">'Albert'</span>, <span class="string">'Steven'</span>]</span><br><span class="line"><span class="keyword">for</span> letter, names <span class="keyword">in</span> itertools.groupby(names, first_letter):</span><br><span class="line">    print(letter, list(names)) <span class="comment"># names is a generator</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-111823d8767a104d.png?imageMogr2/auto-orient/strip|imageView2/2/w/696/format/webp" alt="img"></p>
<h4 id="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†"><a href="#é”™è¯¯å’Œå¼‚å¸¸å¤„ç†" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†"></a>é”™è¯¯å’Œå¼‚å¸¸å¤„ç†</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åªæƒ³å¤„ç†ValueErrorï¼Œå…¶ä»–é”™è¯¯å¯èƒ½æ˜¯åˆç†çš„bug    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span> TypeError:</span><br><span class="line">    <span class="comment"># another thing  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯ä»¥ç”¨å…ƒç»„åŒ…å«å¤šä¸ªå¼‚å¸¸    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">except</span> (TypeError, ValueError):</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##  ä¸æƒ³æŠ‘åˆ¶å¼‚å¸¸ï¼Œæ— è®ºtryéƒ¨åˆ†çš„ä»£ç æ˜¯å¦æˆåŠŸï¼Œéƒ½æ‰§è¡Œä¸€æ®µä»£ç    </span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># something</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># another thing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¾‹å­</span></span><br><span class="line">f = open(path, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    write_to_file(f)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'Failed'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Succeeded'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure>
<h4 id="IPythonçš„å¼‚å¸¸"><a href="#IPythonçš„å¼‚å¸¸" class="headerlink" title="IPythonçš„å¼‚å¸¸"></a>IPythonçš„å¼‚å¸¸</h4><p>åœ¨%runä¸€ä¸ªè„šæœ¬æˆ–ä¸€æ¡è¯­å¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼ŒIPythoné»˜è®¤ä¼šæ‰“å°å®Œæ•´çš„è°ƒç”¨æ ˆï¼ˆtracebackï¼‰ï¼Œåœ¨æ ˆçš„æ¯ä¸ªç‚¹éƒ½ä¼šæœ‰å‡ è¡Œä¸Šä¸‹æ–‡ã€‚</p>
<p>IPythonä¸­ä»¥ç”¨é­”æœ¯å‘½ä»¤<code>%xmode</code>ï¼Œä»Plainï¼ˆä¸Pythonæ ‡å‡†è§£é‡Šå™¨ç›¸åŒï¼‰åˆ°Verboseï¼ˆå¸¦æœ‰å‡½æ•°çš„å‚æ•°å€¼ï¼‰æ§åˆ¶æ–‡æœ¬æ˜¾ç¤ºçš„æ•°é‡ã€‚å‘ç”Ÿé”™è¯¯ä¹‹åï¼Œï¼ˆç”¨%debugæˆ–%pdb magicsï¼‰å¯ä»¥è¿›å…¥stackè¿›è¡Œäº‹åè°ƒè¯•ã€‚</p>
<h3 id="æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ"><a href="#æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ"></a>æ–‡ä»¶å’Œæ“ä½œç³»ç»Ÿ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path = <span class="string">'examples/segismundo.txt'</span></span><br><span class="line">f = open(path)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æ˜¯ä»¥åªè¯»æ¨¡å¼ï¼ˆâ€™râ€™ï¼‰æ‰“å¼€çš„ã€‚ç„¶åï¼Œå¯ä»¥åƒå¤„ç†åˆ—è¡¨é‚£æ ·æ¥å¤„ç†æ–‡ä»¶å¥æŸ„fï¼Œæ¯”å¦‚å¯¹è¡Œè¿›è¡Œè¿­ä»£ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># è¿˜å¯ä»¥</span></span><br><span class="line">lines = [x.rstrip() <span class="keyword">for</span> x <span class="keyword">in</span> open(path)]</span><br></pre></td></tr></table></figure>
<p>ä»æ–‡ä»¶ä¸­å–å‡ºçš„è¡Œéƒ½å¸¦æœ‰å®Œæ•´çš„è¡Œç»“æŸç¬¦ï¼ˆEOLï¼‰ã€‚</p>
<p>ä½¿ç”¨openåˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼Œä¸€å®šè¦ç”¨closeå…³é—­ã€‚å…³é—­æ–‡ä»¶å¯ä»¥è¿”å›æ“ä½œç³»ç»Ÿèµ„æºã€‚</p>
<p>ç”¨withè¯­å¥å¯ä»¥åœ¨é€€å‡ºä»£ç å—æ—¶ï¼Œè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œæ›´å®¹æ˜“åœ°æ¸…ç†æ‰“å¼€çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</span><br><span class="line">    lines = [x.rstrip() <span class="keyword">for</span> x <span class="keyword">in</span> f]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-28274484129f0ea7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="å¸¸ç”¨æ–¹æ³•-readã€seekã€tell"><a href="#å¸¸ç”¨æ–¹æ³•-readã€seekã€tell" class="headerlink" title="å¸¸ç”¨æ–¹æ³• readã€seekã€tell"></a>å¸¸ç”¨æ–¹æ³• readã€seekã€tell</h4><p>readä¼šä»æ–‡ä»¶è¿”å›å­—ç¬¦ã€‚å­—ç¬¦çš„å†…å®¹æ˜¯ç”±æ–‡ä»¶çš„ç¼–ç å†³å®šçš„ï¼ˆå¦‚UTF-8ï¼‰ï¼Œå¦‚æœæ˜¯äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„å°±æ˜¯åŸå§‹å­—èŠ‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = open(path)</span><br><span class="line">f.read(<span class="number">10</span>) <span class="comment"># 'SueÃ±a el r'</span></span><br><span class="line"></span><br><span class="line">f2 = open(path, <span class="string">'rb'</span>)  <span class="comment"># Binary mode</span></span><br><span class="line">f2.read(<span class="number">10</span>) <span class="comment"># b'Sue\xc3\xb1a el '</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#readæ¨¡å¼ä¼šå°†æ–‡ä»¶å¥æŸ„çš„ä½ç½®æå‰ï¼Œæå‰çš„æ•°é‡æ˜¯è¯»å–çš„å­—èŠ‚æ•°ã€‚tellå¯ä»¥ç»™å‡ºå½“å‰çš„ä½ç½®ï¼š</span></span><br><span class="line">f.tell() <span class="comment"># 11</span></span><br><span class="line">f2.tell() <span class="comment"># 10</span></span><br><span class="line"><span class="comment"># seekå°†æ–‡ä»¶ä½ç½®æ›´æ”¹ä¸ºæ–‡ä»¶ä¸­çš„æŒ‡å®šå­—èŠ‚</span></span><br><span class="line">f.seek(<span class="number">3</span>) <span class="comment"># 3</span></span><br><span class="line">f.read(<span class="number">1</span>) <span class="comment"># Ã±</span></span><br></pre></td></tr></table></figure>
<p>å‘æ–‡ä»¶å†™å…¥ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶çš„writeæˆ–writelinesæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'tmp.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> handle:</span><br><span class="line">    handle.writelines(x <span class="keyword">for</span> x <span class="keyword">in</span> open(path) <span class="keyword">if</span> len(x) &gt; <span class="number">1</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ— ç©ºè¡Œç‰ˆæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d25bd6e730afeb39.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode"><a href="#æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode" class="headerlink" title="æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode"></a>æ–‡ä»¶çš„å­—èŠ‚å’ŒUnicode</h4><p>Pythonæ–‡ä»¶çš„é»˜è®¤æ“ä½œæ˜¯â€œæ–‡æœ¬æ¨¡å¼â€ï¼Œå³å¤„ç†Pythonçš„å­—ç¬¦ä¸²ï¼ˆå³Unicodeï¼‰ã€‚äºŒè¿›åˆ¶æ¨¡å¼éœ€è¦åœ¨æ–‡ä»¶æ¨¡å¼ååŠ ä¸€ä¸ªbã€‚</p>
<p>UTF-8æ˜¯é•¿åº¦å¯å˜çš„Unicodeç¼–ç ï¼Œå½“ä»æ–‡ä»¶è¯·æ±‚ä¸€å®šæ•°é‡çš„å­—ç¬¦æ—¶ï¼ŒPythonä¼šä»æ–‡ä»¶è¯»å–è¶³å¤Ÿå¤šï¼ˆå¯èƒ½å°‘è‡³10æˆ–å¤šè‡³40å­—èŠ‚ï¼‰çš„å­—èŠ‚è¿›è¡Œè§£ç ã€‚å¦‚æœä»¥â€œrbâ€æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œåˆ™è¯»å–ç¡®åˆ‡çš„è¯·æ±‚å­—èŠ‚æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</span><br><span class="line">    chars = f.read(<span class="number">10</span>)  <span class="comment"># 'SueÃ±a el r'</span></span><br><span class="line"><span class="keyword">with</span> open(path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = f.read(<span class="number">10</span>)   <span class="comment"># b'Sue\xc3\xb1a el '</span></span><br><span class="line"><span class="comment"># å¯ä»¥å°†å­—èŠ‚è§£ç ä¸ºstrå¯¹è±¡ï¼Œä½†åªæœ‰å½“æ¯ä¸ªç¼–ç çš„Unicodeå­—ç¬¦éƒ½å®Œå…¨æˆå½¢æ—¶æ‰èƒ½è¿™ä¹ˆåšï¼š</span></span><br><span class="line">    data.decode(<span class="string">'utf8'</span>) <span class="comment"># 'SueÃ±a el '</span></span><br><span class="line"><span class="comment"># ä¸è¦åœ¨äºŒè¿›åˆ¶æ¨¡å¼ä¸­ä½¿ç”¨seekã€‚å¦‚æœæ–‡ä»¶ä½ç½®ä½äºå®šä¹‰Unicodeå­—ç¬¦çš„å­—èŠ‚çš„ä¸­é—´ä½ç½®ï¼Œè¯»å–åé¢ä¼šäº§ç”Ÿé”™è¯¯ï¼š</span></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬4ç« -NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—"><a href="#ç¬¬4ç« -NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—" class="headerlink" title="ç¬¬4ç«  NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—"></a>ç¬¬4ç«  NumPyåŸºç¡€ï¼šæ•°ç»„å’ŒçŸ¢é‡è®¡ç®—</h2><p>NumPyï¼ˆNumerical Pythonçš„ç®€ç§°ï¼‰æ˜¯Pythonæ•°å€¼è®¡ç®—æœ€é‡è¦çš„åŸºç¡€åŒ…ã€‚å¤§å¤šæ•°æä¾›ç§‘å­¦è®¡ç®—çš„åŒ…éƒ½æ˜¯ç”¨NumPyçš„æ•°ç»„ä½œä¸ºæ„å»ºåŸºç¡€ã€‚</p>
<p>NumPyå¯ä»¥é«˜æ•ˆå¤„ç†å¤§æ•°ç»„çš„æ•°æ®ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>NumPyæ˜¯åœ¨ä¸€ä¸ªè¿ç»­çš„å†…å­˜å—ä¸­å­˜å‚¨æ•°æ®ï¼Œç‹¬ç«‹äºå…¶ä»–Pythonå†…ç½®å¯¹è±¡ã€‚NumPyçš„Cè¯­è¨€ç¼–å†™çš„ç®—æ³•åº“å¯ä»¥æ“ä½œå†…å­˜ï¼Œè€Œä¸å¿…è¿›è¡Œç±»å‹æ£€æŸ¥æˆ–å…¶å®ƒå‰æœŸå·¥ä½œã€‚æ¯”èµ·Pythonçš„å†…ç½®åºåˆ—ï¼ŒNumPyæ•°ç»„ä½¿ç”¨çš„å†…å­˜æ›´å°‘ã€‚</li>
<li>NumPyå¯ä»¥åœ¨æ•´ä¸ªæ•°ç»„ä¸Šæ‰§è¡Œå¤æ‚çš„è®¡ç®—ï¼Œè€Œä¸éœ€è¦Pythonçš„forå¾ªç¯ã€‚</li>
</ul>
<h3 id="å¤šç»´æ•°ç»„å¯¹è±¡ndarray"><a href="#å¤šç»´æ•°ç»„å¯¹è±¡ndarray" class="headerlink" title="å¤šç»´æ•°ç»„å¯¹è±¡ndarray"></a>å¤šç»´æ•°ç»„å¯¹è±¡ndarray</h3><p>ndarrayæ˜¯ä¸€ä¸ªé€šç”¨çš„åŒæ„æ•°æ®å¤šç»´å®¹å™¨ï¼Œæ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒç±»å‹çš„ã€‚</p>
<h4 id="åˆ›å»ºndarray"><a href="#åˆ›å»ºndarray" class="headerlink" title="åˆ›å»ºndarray"></a>åˆ›å»ºndarray</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨np.arrayå‡½æ•°åˆ›å»ºã€‚å®ƒæ¥å—ä¸€åˆ‡åºåˆ—å‹çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å…¶ä»–æ•°ç»„ï¼‰ï¼Œç„¶åäº§ç”Ÿä¸€ä¸ªæ–°çš„å«æœ‰ä¼ å…¥æ•°æ®çš„NumPyæ•°ç»„</span></span><br><span class="line">data1 = [<span class="number">6</span>, <span class="number">7.5</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">arr1 = np.array(data1)</span><br><span class="line"><span class="comment"># åµŒå¥—åºåˆ—ï¼ˆæ¯”å¦‚ç”±ä¸€ç»„ç­‰é•¿åˆ—è¡¨ç»„æˆçš„åˆ—è¡¨ï¼‰å°†ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå¤šç»´æ•°ç»„ï¼š</span></span><br><span class="line">data2 = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]</span><br><span class="line">arr2 = np.array(data2)</span><br><span class="line"><span class="comment"># å±æ€§ï¼šdtypeï¼Œshapeï¼Œndim</span></span><br></pre></td></tr></table></figure>
<p>zeros, oneså’Œemptyå¯ä»¥åˆ›å»ºæŒ‡å®šé•¿åº¦æˆ–å½¢çŠ¶çš„å…¨0ï¼Œå…¨1æˆ–è€…ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å…·ä½“å€¼çš„æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.zeros(<span class="number">10</span>)</span><br><span class="line">np.zeros((<span class="number">3</span>, <span class="number">6</span>))</span><br><span class="line">np.empty((<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>arangeæ˜¯Pythonå†…ç½®å‡½æ•°rangeçš„æ•°ç»„ç‰ˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.arange(<span class="number">15</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-78ab11f67e7077a6.png?imageMogr2/auto-orient/strip|imageView2/2/w/696/format/webp" alt="img"></p>
<p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œæ•°æ®ç±»å‹åŸºæœ¬éƒ½æ˜¯float64ï¼ˆæµ®ç‚¹æ•°ï¼‰ã€‚</p>
<h4 id="ndarrayçš„æ•°æ®ç±»å‹"><a href="#ndarrayçš„æ•°æ®ç±»å‹" class="headerlink" title="ndarrayçš„æ•°æ®ç±»å‹"></a>ndarrayçš„æ•°æ®ç±»å‹</h4><p>dtypeï¼ˆæ•°æ®ç±»å‹ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒå«æœ‰ndarrayå°†ä¸€å—å†…å­˜è§£é‡Šä¸ºç‰¹å®šæ•°æ®ç±»å‹æ‰€éœ€çš„ä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.float64)</span><br><span class="line">arr2 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=np.int32)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-2f2d7406a8bc076c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-5cc31115615737b7.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>å¯ä»¥é€šè¿‡ndarrayçš„<code>astype</code>æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ä»ä¸€ä¸ªdtypeè½¬æ¢æˆå¦ä¸€ä¸ªdtype</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">arr.dtype <span class="comment"># dtype('int64')</span></span><br><span class="line">float_arr = arr.astype(np.float64) <span class="comment"># ä¹Ÿå¯ä»¥å†™floatï¼ŒNumPyä¼šå°†Pythonç±»å‹æ˜ å°„åˆ°ç­‰ä»·çš„dtypeä¸Šã€‚ä¹Ÿå¯ç”¨ç®€æ´ç±»å‹ä»£ç è¡¨ç¤ºdtypeï¼Œf4</span></span><br><span class="line"><span class="comment"># å¦‚æœå°†æµ®ç‚¹æ•°è½¬æ¢æˆæ•´æ•°ï¼Œåˆ™å°æ•°éƒ¨åˆ†å°†ä¼šè¢«æˆªå–åˆ é™¤</span></span><br><span class="line"><span class="comment"># å¦‚æœæŸå­—ç¬¦ä¸²æ•°ç»„è¡¨ç¤ºçš„å…¨æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥ç”¨astypeå°†å…¶è½¬æ¢ä¸ºæ•°å€¼å½¢å¼</span></span><br><span class="line">numeric_strings = np.array([<span class="string">'1.25'</span>, <span class="string">'-9.6'</span>, <span class="string">'42'</span>], dtype=np.string_)</span><br><span class="line">numeric_strings.astype(float)</span><br></pre></td></tr></table></figure>
<h4 id="NumPyæ•°ç»„çš„è¿ç®—"><a href="#NumPyæ•°ç»„çš„è¿ç®—" class="headerlink" title="NumPyæ•°ç»„çš„è¿ç®—"></a>NumPyæ•°ç»„çš„è¿ç®—</h4><p>ä¸ç¼–å†™å¾ªç¯ï¼Œä½¿ç”¨æ•°ç»„å³å¯å¯¹æ•°æ®æ‰§è¡Œæ‰¹é‡è¿ç®—ã€‚NumPyç”¨æˆ·ç§°å…¶ä¸º<strong>çŸ¢é‡åŒ–ï¼ˆvectorizationï¼‰</strong> </p>
<ul>
<li>å¤§å°ç›¸ç­‰çš„æ•°ç»„ä¹‹é—´çš„ä»»ä½•ç®—æœ¯è¿ç®—éƒ½ä¼šå°†è¿ç®—åº”ç”¨åˆ°å…ƒç´ çº§</li>
<li>æ•°ç»„ä¸æ ‡é‡çš„ç®—æœ¯è¿ç®—ä¼šå°†æ ‡é‡å€¼ä¼ æ’­åˆ°å„ä¸ªå…ƒç´ </li>
<li>å¤§å°ç›¸åŒçš„æ•°ç»„ä¹‹é—´çš„æ¯”è¾ƒä¼šç”Ÿæˆå¸ƒå°”å€¼æ•°ç»„</li>
<li>ä¸åŒå¤§å°çš„æ•°ç»„ä¹‹é—´çš„è¿ç®—å«åš<strong>å¹¿æ’­ï¼ˆbroadcastingï¼‰</strong> </li>
</ul>
<h4 id="åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡"><a href="#åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡" class="headerlink" title="åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡"></a>åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡</h4><h5 id="ä¸€ç»´æ•°ç»„"><a href="#ä¸€ç»´æ•°ç»„" class="headerlink" title="ä¸€ç»´æ•°ç»„"></a>ä¸€ç»´æ•°ç»„</h5><p>ä¸€ç»´æ•°ç»„å’Œåˆ—è¡¨æœ€é‡è¦çš„åŒºåˆ«åœ¨äºï¼šæ•°ç»„åˆ‡ç‰‡æ˜¯åŸå§‹æ•°ç»„çš„è§†å›¾ï¼Œå³æ•°æ®ä¸ä¼šè¢«å¤åˆ¶ï¼Œè§†å›¾ä¸Šçš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šç›´æ¥åæ˜ åˆ°æºæ•°ç»„ä¸Šã€‚è¿™æ˜¯å› ä¸ºNumPyçš„è®¾è®¡ç›®çš„æ˜¯å¤„ç†å¤§æ•°æ®ï¼Œå‡å¦‚NumPyåšæŒè¦å°†æ•°æ®å¤åˆ¶ä¼šäº§ç”Ÿæ€§èƒ½å’Œå†…å­˜é—®é¢˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªæ ‡é‡å€¼èµ‹å€¼ç»™ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œè¯¥å€¼ä¼šè‡ªåŠ¨ä¼ æ’­ï¼ˆå³â€œå¹¿æ’­â€ï¼‰åˆ°æ•´ä¸ªé€‰åŒº</span></span><br><span class="line">arr[<span class="number">5</span>:<span class="number">8</span>] = <span class="number">12</span>  <span class="comment"># array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])</span></span><br><span class="line"><span class="comment"># åˆ‡ç‰‡[ : ]ä¼šç»™æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼èµ‹å€¼</span></span><br><span class="line"><span class="comment"># æ•°ç»„åˆ‡ç‰‡æ˜¯åŸå§‹æ•°ç»„çš„è§†å›¾</span></span><br><span class="line">arr_slice = arr[<span class="number">5</span>:<span class="number">8</span>]</span><br><span class="line">arr_slice[<span class="number">1</span>] = <span class="number">12345</span> <span class="comment"># arrä¹Ÿä¼šå‘ç”Ÿå˜åŒ–</span></span><br><span class="line"><span class="comment"># å¦‚æœæƒ³è¦å¾—åˆ°ndarrayåˆ‡ç‰‡çš„å‰¯æœ¬è€Œéè§†å›¾</span></span><br><span class="line">arr[<span class="number">5</span>:<span class="number">8</span>].copy()</span><br></pre></td></tr></table></figure>
<h5 id="é«˜ç»´åº¦æ•°ç»„"><a href="#é«˜ç»´åº¦æ•°ç»„" class="headerlink" title="é«˜ç»´åº¦æ•°ç»„"></a>é«˜ç»´åº¦æ•°ç»„</h5><p><strong>äºŒç»´æ•°ç»„</strong> ä¸­ï¼Œå„ç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä¸æ˜¯æ ‡é‡è€Œæ˜¯ä¸€ç»´æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># å¯¹å„ä¸ªå…ƒç´ è¿›è¡Œé€’å½’è®¿é—®</span></span><br><span class="line">arr2d[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line"><span class="comment"># ä¼ å…¥ä¸€ä¸ªä»¥é€—å·éš”å¼€çš„ç´¢å¼•åˆ—è¡¨æ¥é€‰å–å•ä¸ªå…ƒç´ </span></span><br><span class="line">arr2d[<span class="number">0</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-0a641536f73f560e.png?imageMogr2/auto-orient/strip|imageView2/2/w/745/format/webp" alt="img"></p>
<p>åœ¨<strong>å¤šç»´æ•°ç»„</strong> ä¸­ï¼Œå¦‚æœçœç•¥äº†åé¢çš„ç´¢å¼•ï¼Œåˆ™è¿”å›å¯¹è±¡ä¼šæ˜¯ä¸€ä¸ªç»´åº¦ä½ä¸€ç‚¹çš„ndarrayï¼ˆå®ƒå«æœ‰é«˜ä¸€çº§ç»´åº¦ä¸Šçš„æ‰€æœ‰æ•°æ®ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr3d = np.array([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], [[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]]])</span><br><span class="line"><span class="comment"># æ ‡é‡å€¼å’Œæ•°ç»„éƒ½å¯ä»¥è¢«èµ‹å€¼ç»™arr3d[0]ï¼š</span></span><br><span class="line">old_values = arr3d[<span class="number">0</span>].copy()</span><br><span class="line">arr3d[<span class="number">0</span>] = <span class="number">42</span></span><br><span class="line">arr3d[<span class="number">0</span>] = old_values</span><br></pre></td></tr></table></figure>
<h5 id="åˆ‡ç‰‡ç´¢å¼•"><a href="#åˆ‡ç‰‡ç´¢å¼•" class="headerlink" title="åˆ‡ç‰‡ç´¢å¼•"></a>åˆ‡ç‰‡ç´¢å¼•</h5><p>ä¸€ç»´ndarrayçš„åˆ‡ç‰‡è¯­æ³•è·ŸPythonåˆ—è¡¨å·®ä¸å¤šã€‚</p>
<p>äºŒç»´ndarrayçš„åˆ‡ç‰‡æ–¹å¼ç¨æ˜¾ä¸åŒã€‚åˆ‡ç‰‡æ˜¯æ²¿ç€ä¸€ä¸ªè½´å‘é€‰å–å…ƒç´ ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line">arr2d[:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># array([[1, 2, 3],   # ç¬¬ä¸€ä¸ªè½´åˆ‡ç‰‡ï¼Œå–äº†å‰ä¸¤è¡Œ</span></span><br><span class="line"><span class="comment">#       [4, 5, 6]])</span></span><br><span class="line">arr2d[:<span class="number">2</span>, <span class="number">1</span>:]</span><br><span class="line"><span class="comment"># array([[2, 3],   # ç¬¬ä¸€ä¸ªè½´åˆ‡ç‰‡ï¼Œå†ç¬¬äºŒä¸ªè½´åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment">#       [5, 6]])</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åˆ‡ç‰‡åªèƒ½å¾—åˆ°ç›¸åŒç»´æ•°çš„æ•°ç»„è§†å›¾ã€‚é€šè¿‡å°†æ•´æ•°ç´¢å¼•å’Œåˆ‡ç‰‡æ··åˆï¼Œå¯ä»¥å¾—åˆ°ä½ç»´åº¦çš„åˆ‡ç‰‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d[<span class="number">1</span>, :<span class="number">2</span>]  <span class="comment"># array([4, 5])</span></span><br><span class="line">arr2d[:<span class="number">2</span>, <span class="number">2</span>]  <span class="comment"># array([3, 6])</span></span><br></pre></td></tr></table></figure>
<p><strong>â€œåªæœ‰å†’å·â€è¡¨ç¤ºé€‰å–æ•´ä¸ªè½´</strong> </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2d[:, :<span class="number">1</span>]</span><br><span class="line"><span class="comment"># array([[1],</span></span><br><span class="line"><span class="comment">#       [4],</span></span><br><span class="line"><span class="comment">#       [7]])</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-9da32d2f4629c304.png?imageMogr2/auto-orient/strip|imageView2/2/w/867/format/webp" alt="img"></p>
<p><strong>å¯¹åˆ‡ç‰‡è¡¨è¾¾å¼çš„èµ‹å€¼æ“ä½œä¹Ÿä¼šè¢«æ‰©æ•£åˆ°æ•´ä¸ªé€‰åŒº</strong></p>
<h5 id="å¸ƒå°”å‹ç´¢å¼•"><a href="#å¸ƒå°”å‹ç´¢å¼•" class="headerlink" title="å¸ƒå°”å‹ç´¢å¼•"></a>å¸ƒå°”å‹ç´¢å¼•</h5><p>å¸ƒå°”å‹æ•°ç»„çš„é•¿åº¦å¿…é¡»è·Ÿè¢«ç´¢å¼•çš„è½´é•¿åº¦ä¸€è‡´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</span><br><span class="line">data = np.random.randn(<span class="number">7</span>, <span class="number">4</span>)</span><br><span class="line">data[names == <span class="string">'Bob'</span>]  <span class="comment"># å¯ä»¥é€‰å‡ºå¯¹åå­—"Bob"å¯¹åº”çš„æ‰€æœ‰è¡Œ</span></span><br><span class="line"><span class="comment"># å¸ƒå°”å‹æ•°ç»„å¯ä»¥å’Œåˆ‡ç‰‡ã€æ•´æ•°ï¼ˆæˆ–æ•´æ•°åºåˆ—ï¼‰æ··åˆä½¿ç”¨</span></span><br><span class="line">data[names == <span class="string">'Bob'</span>, <span class="number">2</span>:]  <span class="comment"># array([[ 0.769 ,  1.2464], [-0.5397,  0.477 ]])</span></span><br><span class="line">data[names == <span class="string">'Bob'</span>, <span class="number">3</span>]   <span class="comment"># array([ 1.2464,  0.477 ])</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨ä¸ç­‰äºç¬¦å·ï¼ˆ!=ï¼‰ï¼Œæˆ–é€šè¿‡~å¯¹æ¡ä»¶è¿›è¡Œå¦å®š</span></span><br><span class="line">data[~(names == <span class="string">'Bob'</span>)]</span><br><span class="line">data[names != <span class="string">'Bob'</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨&amp;ï¼ˆå’Œï¼‰ã€|ï¼ˆæˆ–ï¼‰ä¹‹ç±»çš„å¸ƒå°”ç®—æœ¯è¿ç®—ç¬¦</span></span><br><span class="line">data[mask = (names == <span class="string">'Bob'</span>) | (names == <span class="string">'Will'</span>)]</span><br><span class="line"><span class="comment"># é€šè¿‡å¸ƒå°”å‹æ•°ç»„è®¾ç½®å€¼ã€‚ä¾‹å¦‚å°†dataä¸­çš„æ‰€æœ‰è´Ÿå€¼éƒ½è®¾ç½®ä¸º0</span></span><br><span class="line">data[data &lt; <span class="number">0</span>] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¸ƒå°”å‹ç´¢å¼•é€‰å–æ•°ç»„ä¸­çš„æ•°æ®ï¼Œæ€»æ˜¯åˆ›å»ºæ•°æ®çš„å‰¯æœ¬ã€‚</li>
<li>Pythonå…³é”®å­—andå’Œoråœ¨å¸ƒå°”å‹æ•°ç»„ä¸­æ— æ•ˆã€‚è¦ä½¿ç”¨&amp;ä¸|ã€‚</li>
<li>è¿™ç±»äºŒç»´æ•°æ®çš„æ“ä½œä¹Ÿå¯ä»¥ç”¨pandas</li>
</ul>
<h5 id="èŠ±å¼ç´¢å¼•"><a href="#èŠ±å¼ç´¢å¼•" class="headerlink" title="èŠ±å¼ç´¢å¼•"></a>èŠ±å¼ç´¢å¼•</h5><p>èŠ±å¼ç´¢å¼•ï¼ˆFancy indexingï¼‰æ˜¯ä¸€ä¸ªNumPyæœ¯è¯­ï¼Œæ˜¯æŒ‡åˆ©ç”¨æ•´æ•°æ•°ç»„è¿›è¡Œç´¢å¼•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.empty((<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>):</span><br><span class="line">     arr[i] = i</span><br><span class="line"><span class="comment"># å¯ä»¥ä¼ å…¥ä¸€ä¸ªç”¨äºæŒ‡å®šé¡ºåºçš„æ•´æ•°åˆ—è¡¨æˆ–ndarrayï¼Œç‰¹å®šé¡ºåºé€‰å–è¡Œå­é›†</span></span><br><span class="line">arr[[<span class="number">4</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="comment"># ä½¿ç”¨è´Ÿæ•°ç´¢å¼•å°†ä¼šä»æœ«å°¾å¼€å§‹é€‰å–è¡Œ</span></span><br><span class="line">arr[[<span class="number">-3</span>, <span class="number">-5</span>, <span class="number">-7</span>]]</span><br></pre></td></tr></table></figure>
<ul>
<li>æ— è®ºæ•°ç»„æ˜¯å¤šå°‘ç»´çš„ï¼ŒèŠ±å¼ç´¢å¼•æ€»æ˜¯ä¸€ç»´çš„</li>
<li>èŠ±å¼ç´¢å¼•æ€»æ˜¯å°†æ•°æ®å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€æ¬¡ä¼ å…¥å¤šä¸ªç´¢å¼•æ•°ç»„çš„è¿”å›æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„</span></span><br><span class="line">arr = np.arange(<span class="number">32</span>).reshape((<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]] <span class="comment"># array([ 4, 23, 29, 10])</span></span><br><span class="line"><span class="comment"># è¦æƒ³çš„åˆ°çŸ©é˜µ</span></span><br><span class="line">arr[[<span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>]][:, [<span class="number">0</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<h4 id="æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢"><a href="#æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢" class="headerlink" title="æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢"></a>æ•°ç»„è½¬ç½®å’Œè½´å…‘æ¢</h4><ul>
<li>è½¬ç½®æ˜¯é‡å¡‘çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œè¿”å›æºæ•°æ®çš„è§†å›¾ï¼ˆä¸ä¼šè¿›è¡Œä»»ä½•å¤åˆ¶æ“ä½œï¼‰ã€‚</li>
</ul>
<p>æ•°ç»„ä¸ä»…æœ‰transposeæ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„Tå±æ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">arr.T</span><br><span class="line">arr.transpose()</span><br></pre></td></tr></table></figure>
<p>å¯¹äºé«˜ç»´æ•°ç»„ï¼Œtransposeéœ€è¦å¾—åˆ°ä¸€ä¸ªç”±è½´ç¼–å·ç»„æˆçš„å…ƒç»„æ‰èƒ½å¯¹è¿™äº›è½´è¿›è¡Œè½¬ç½®.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line">arr.transpose((<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªè½´è¢«æ¢æˆäº†ç¬¬äºŒä¸ªï¼Œç¬¬äºŒä¸ªè½´è¢«æ¢æˆäº†ç¬¬ä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªè½´ä¸å˜</span></span><br><span class="line">arr.swapaxes(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line"><span class="comment"># swapaxesæ–¹æ³•ï¼Œå®ƒéœ€è¦æ¥å—ä¸€å¯¹è½´ç¼–å·</span></span><br></pre></td></tr></table></figure>
<ul>
<li>swapaxesä¹Ÿæ˜¯è¿”å›æºæ•°æ®çš„è§†å›¾ï¼ˆä¸ä¼šè¿›è¡Œä»»ä½•å¤åˆ¶æ“ä½œï¼‰</li>
</ul>
<h3 id="é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°"><a href="#é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°" class="headerlink" title="é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°"></a>é€šç”¨å‡½æ•°ï¼šå¿«é€Ÿçš„å…ƒç´ çº§æ•°ç»„å‡½æ•°</h3><p>é€šç”¨å‡½æ•°ï¼ˆå³ufuncï¼‰æ˜¯ä¸€ç§å¯¹ndarrayä¸­çš„æ•°æ®æ‰§è¡Œå…ƒç´ çº§è¿ç®—çš„å‡½æ•°ã€‚å¯ä»¥çœ‹åšç®€å•å‡½æ•°ï¼ˆæ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡å€¼ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ ‡é‡å€¼ï¼‰çš„<strong>çŸ¢é‡åŒ–åŒ…è£…å™¨</strong>ã€‚</p>
<ul>
<li><p>ä¸€å…ƒï¼ˆunaryï¼‰ufunc,å¦‚sqrtå’Œexp,è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„</p>
</li>
<li><p>äºŒå…ƒï¼ˆbinaryï¼‰ufuncï¼Œå¦‚addæˆ–maximumæ¥å—2ä¸ªæ•°ç»„,å¹¶è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„</p>
</li>
<li><p>æœ‰äº›ufuncå¯ä»¥è¿”å›å¤šä¸ªæ•°ç»„ï¼Œä¾‹å¦‚modï¼ˆPythonå†…ç½®å‡½æ•°divmodçš„çŸ¢é‡åŒ–ç‰ˆæœ¬ï¼‰ï¼Œè¿”å›æµ®ç‚¹æ•°æ•°ç»„çš„å°æ•°å’Œæ•´æ•°éƒ¨åˆ†</p>
</li>
<li><p>Ufuncså¯ä»¥æ¥å—ä¸€ä¸ªoutå¯é€‰å‚æ•°ï¼Œè¿™æ ·å°±èƒ½åœ¨æ•°ç»„åŸåœ°è¿›è¡Œæ“ä½œã€‚</p>
</li>
<li><p>```python<br>arr = array([-3.2623, -6.0915, -6.663 ,  5.3731,  3.6182,  3.45  ,  5.0077])<br>np.sqrt(arr)</p>
<h1 id="array-nan-nan-nan-2-318-1-9022-1-8574-2-2378"><a href="#array-nan-nan-nan-2-318-1-9022-1-8574-2-2378" class="headerlink" title="array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])"></a>array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-1d494e73b61c7ced.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-2be79faf68ab6ff8.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-4e38d02a66481530.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-eff1e61e5464159f.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">![img](https:&#x2F;&#x2F;upload-images.jianshu.io&#x2F;upload_images&#x2F;7178691-236dba83b6a420cc.png?imageMogr2&#x2F;auto-orient&#x2F;strip|imageView2&#x2F;2&#x2F;w&#x2F;1200&#x2F;format&#x2F;webp)</span><br><span class="line"></span><br><span class="line">### åˆ©ç”¨æ•°ç»„è¿›è¡Œæ•°æ®å¤„ç†</span><br><span class="line"></span><br><span class="line">ç”¨æ•°ç»„è¡¨è¾¾å¼ä»£æ›¿å¾ªç¯çš„åšæ³•ï¼Œé€šå¸¸è¢«ç§°ä¸º**çŸ¢é‡åŒ–**ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒçŸ¢é‡åŒ–æ•°ç»„è¿ç®—è¦æ¯”ç­‰ä»·çš„çº¯Pythonæ–¹å¼å¿«ä¸Šä¸€ä¸¤ä¸ªæ•°é‡çº§ï¼ˆç”šè‡³æ›´å¤šï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">#### å°†æ¡ä»¶é€»è¾‘è¡¨è¿°ä¸ºæ•°ç»„è¿ç®—</span><br><span class="line"></span><br><span class="line">&#96;numpy.where&#96;å‡½æ•°æ˜¯ä¸‰å…ƒè¡¨è¾¾å¼&#96;x if condition else y&#96;çš„çŸ¢é‡åŒ–ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">xarr &#x3D; np.array([1.1, 1.2, 1.3, 1.4, 1.5])</span><br><span class="line">yarr &#x3D; np.array([2.1, 2.2, 2.3, 2.4, 2.5])</span><br><span class="line">cond &#x3D; np.array([True, False, True, True, False])</span><br><span class="line"># æ ¹æ®condä¸­çš„å€¼é€‰å–xarrå’Œyarrçš„å€¼ï¼šå½“condä¸­çš„å€¼ä¸ºTrueæ—¶ï¼Œé€‰å–xarrçš„å€¼ï¼Œå¦åˆ™ä»yarrä¸­é€‰å–ã€‚</span><br><span class="line"># åˆ—è¡¨æ¨å¯¼å¼çš„å†™æ³•  ç¼ºç‚¹ï¼š1, å¯¹å¤§æ•°ç»„çš„å¤„ç†é€Ÿåº¦ä¸æ˜¯å¾ˆå¿«ã€‚2,æ— æ³•ç”¨äºå¤šç»´æ•°ç»„</span><br><span class="line">result &#x3D; [(x if c else y) for x, y, c in zip(xarr, yarr, cond)]</span><br><span class="line">#</span><br><span class="line">result &#x3D; np.where(cond, xarr, yarr)</span><br><span class="line"># ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯æ ‡é‡å€¼</span><br><span class="line">arr &#x3D; np.random.randn(4, 4)</span><br><span class="line">np.where(arr &gt; 0, 2, -2) # set positive values to 2, negative values to -2.</span><br><span class="line"># å¯ä»¥å°†æ ‡é‡å’Œæ•°ç»„ç»“åˆèµ·æ¥</span><br><span class="line">np.where(arr &gt; 0, 2, arr) # set only positive values to 2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•"><a href="#æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•" class="headerlink" title="æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•"></a>æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•</h4><p>é€šè¿‡æ•°ç»„ä¸Šçš„ä¸€ç»„æ•°å­¦å‡½æ•°å¯¹æ•´ä¸ªæ•°ç»„æˆ–æŸä¸ªè½´å‘çš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—</p>
<p>sumã€mean, æ ‡å‡†å·®stdç­‰èšåˆè®¡ç®—ï¼ˆaggregationï¼Œé€šå¸¸å«åšçº¦ç®€ï¼ˆreductionï¼‰ï¼‰æ—¢å¯ä»¥å½“åšæ•°ç»„çš„å®ä¾‹æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“åšé¡¶çº§NumPyå‡½æ•°ä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.random.randn(<span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line">arr.mean()</span><br><span class="line">np.mean(arr)</span><br><span class="line"><span class="comment"># meanå’Œsumè¿™ç±»çš„å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªaxisé€‰é¡¹å‚æ•°ï¼Œç”¨äºè®¡ç®—è¯¥è½´å‘ä¸Šçš„ç»Ÿè®¡å€¼ï¼Œæœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªä½ä¸€ç»´çš„æ•°ç»„</span></span><br><span class="line">arr.mean(axis=<span class="number">1</span>) <span class="comment"># ç®—è¡Œçš„å¹³å‡å€¼</span></span><br><span class="line">arr.sum(axis=<span class="number">0</span>) <span class="comment"># è®¡ç®—æ¯åˆ—çš„å’Œ</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–å¦‚cumsumï¼ˆç´¯åŠ ï¼‰å’Œcumprodï¼ˆç´¯ä¹˜ï¼‰ä¹‹ç±»çš„æ–¹æ³•åˆ™ä¸èšåˆï¼Œè€Œæ˜¯äº§ç”Ÿä¸€ä¸ªç”±ä¸­é—´ç»“æœç»„æˆçš„æ•°ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line">arr.cumsum()  <span class="comment"># array([ 0,  1,  3,  6, 10, 15, 21, 28])</span></span><br><span class="line"><span class="comment"># å¤šç»´æ•°ç»„ï¼Œè¿”å›åŒæ ·å¤§å°çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç»´çš„åˆ‡ç‰‡æ²¿ç€æ ‡è®°è½´è®¡ç®—éƒ¨åˆ†èšç±»</span></span><br><span class="line">arr = np.array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line">arr.cumsum(axis=<span class="number">0</span>) <span class="comment"># åˆ—ä¸Šç´¯åŠ </span></span><br><span class="line">arr.cumprod(axis=<span class="number">1</span>) <span class="comment"># è¡Œä¸Šç´¯ä¹˜</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a6c6df3ca8e0b98e.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-866fcde885b1d357.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•"><a href="#ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•" class="headerlink" title="ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•"></a>ç”¨äºå¸ƒå°”å‹æ•°ç»„çš„æ–¹æ³•</h4><p>åœ¨ä¸Šé¢è¿™äº›æ–¹æ³•ä¸­ï¼Œå¸ƒå°”å€¼ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸º1ï¼ˆTrueï¼‰å’Œ0ï¼ˆFalseï¼‰</p>
<ul>
<li><p>sumç»å¸¸è¢«ç”¨æ¥å¯¹å¸ƒå°”å‹æ•°ç»„ä¸­çš„Trueå€¼è®¡æ•°ï¼š</p>
</li>
<li><p>```python<br>arr = np.random.randn(100)<br>(arr &gt; 0).sum()</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">+ anyç”¨äºæµ‹è¯•æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªTrue</span><br><span class="line"></span><br><span class="line">+ allåˆ™æ£€æŸ¥æ•°ç»„ä¸­æ‰€æœ‰å€¼æ˜¯å¦éƒ½æ˜¯True</span><br><span class="line"></span><br><span class="line">+ any,all ç”¨äºéå¸ƒå°”å‹æ•°ç»„æ—¶ï¼Œæ‰€æœ‰é0å…ƒç´ å°†ä¼šè¢«å½“åšTrue</span><br><span class="line"></span><br><span class="line">#### æ’åº</span><br><span class="line"></span><br><span class="line">å¤šç»´æ•°ç»„å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªè½´å‘ä¸Šè¿›è¡Œæ’åºï¼Œåªéœ€å°†è½´ç¼–å·ä¼ ç»™sortå³å¯</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">arr &#x3D; np.random.randn(5, 3)</span><br><span class="line">arr.sort(1)  # å®‰è¡Œæ’åºï¼Œåœ°æ’åºåˆ™ä¼šä¿®æ”¹æ•°ç»„æœ¬èº«</span><br><span class="line">np.sum(arr,1) # è¿”å›çš„æ˜¯æ•°ç»„çš„å·²æ’åºå‰¯æœ¬</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘"><a href="#å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘" class="headerlink" title="å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘"></a>å”¯ä¸€åŒ–ä»¥åŠå…¶å®ƒçš„é›†åˆé€»è¾‘</h4><p>NumPyæä¾›äº†ä¸€äº›é’ˆå¯¹ä¸€ç»´ndarrayçš„åŸºæœ¬é›†åˆè¿ç®—ã€‚</p>
<ul>
<li>np.uniqueç”¨äºæ‰¾å‡ºæ•°ç»„ä¸­çš„å”¯ä¸€å€¼å¹¶è¿”å›å·²æ’åºçš„ç»“æœï¼š</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">names = np.array([<span class="string">'Bob'</span>, <span class="string">'Joe'</span>, <span class="string">'Will'</span>, <span class="string">'Bob'</span>, <span class="string">'Will'</span>, <span class="string">'Joe'</span>, <span class="string">'Joe'</span>])</span><br><span class="line">np.unique(names)  <span class="comment"># array(['Bob', 'Joe', 'Will'], dtype='&lt;U4')</span></span><br><span class="line"><span class="comment"># çº¯pythonä»£ç ä¹Ÿå¯ä»¥</span></span><br><span class="line">sorted(set(names)) <span class="comment"># ['Bob', 'Joe', 'Will']</span></span><br></pre></td></tr></table></figure>
<ul>
<li>np.in1dç”¨äºæµ‹è¯•ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­çš„æˆå‘˜èµ„æ ¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">values = np.array([<span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">np.in1d(values, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>]) <span class="comment"># array([ True, False, False,  True,  True, False,  True], dtype=bool)</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-80e85ae6b9c89ada.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º"><a href="#ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º" class="headerlink" title="ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º"></a>ç”¨äºæ•°ç»„çš„æ–‡ä»¶è¾“å…¥è¾“å‡º</h3><p>NumPyçš„å†…ç½®äºŒè¿›åˆ¶æ ¼å¼ï¼Œä½¿ç”¨pandasæˆ–å…¶å®ƒå·¥å…·åŠ è½½æ–‡æœ¬æˆ–è¡¨æ ¼æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿å­˜ï¼Œdefaultï¼šæ•°ç»„ä»¥æœªå‹ç¼©çš„åŸå§‹äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜åœ¨æ‰©å±•åä¸º.npyçš„æ–‡ä»¶ä¸­ï¼Œå¦‚æœæ–‡ä»¶è·¯å¾„æœ«å°¾æ²¡æœ‰æ‰©å±•å.npyï¼Œåˆ™è¯¥æ‰©å±•åä¼šè¢«è‡ªåŠ¨åŠ ä¸Šã€‚</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line">np.save(<span class="string">'some_array'</span>, arr)</span><br><span class="line"><span class="comment"># è¯»å–</span></span><br><span class="line">np.load(<span class="string">'some_array.npy'</span>)</span><br><span class="line"><span class="comment"># å°†å¤šä¸ªæ•°ç»„ä¿å­˜åˆ°ä¸€ä¸ªæœªå‹ç¼©æ–‡ä»¶ä¸­ï¼Œå°†æ•°ç»„ä»¥å…³é”®å­—å‚æ•°çš„å½¢å¼ä¼ å…¥</span></span><br><span class="line">np.savez(<span class="string">'array_archive.npz'</span>, a=arr, b=arr)</span><br><span class="line"><span class="comment"># åŠ è½½.npzæ–‡ä»¶æ—¶ï¼Œå¾—åˆ°ä¸€ä¸ªç±»ä¼¼å­—å…¸çš„å¯¹è±¡</span></span><br><span class="line">arch = np.load(<span class="string">'array_archive.npz'</span>)</span><br><span class="line">arch[<span class="string">'b'</span>] <span class="comment"># array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span></span><br><span class="line"><span class="comment"># æ•°æ®å‹ç¼©</span></span><br><span class="line">np.savez_compressed(<span class="string">'arrays_compressed.npz'</span>, a=arr, b=arr)</span><br></pre></td></tr></table></figure>
<h3 id="çº¿æ€§ä»£æ•°"><a href="#çº¿æ€§ä»£æ•°" class="headerlink" title="çº¿æ€§ä»£æ•°"></a>çº¿æ€§ä»£æ•°</h3><p>çº¿æ€§ä»£æ•°ï¼ˆå¦‚çŸ©é˜µä¹˜æ³•ã€çŸ©é˜µåˆ†è§£ã€è¡Œåˆ—å¼ä»¥åŠå…¶ä»–æ–¹é˜µæ•°å­¦ç­‰ï¼‰æ˜¯ä»»ä½•æ•°ç»„åº“çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>ç‚¹ç§¯np.dot(a,y)æˆ–è€…x.dot(y)ï¼Œ@ç¬¦ç”¨ä½œä¸­ç¼€è¿ç®—ç¬¦ï¼Œè¿›è¡ŒçŸ©é˜µä¹˜æ³•</p>
<p><strong>numpy.linalgæ¨¡å—</strong> ï¼šæ ‡å‡†çš„çŸ©é˜µåˆ†è§£è¿ç®—åŒ…æ‹¬æ±‚é€†å’Œè¡Œåˆ—å¼ä¹‹ç±»ï¼Œä½¿ç”¨è¡Œä¸šæ ‡å‡†çº¿æ€§ä»£æ•°åº“ï¼Œå¦‚BLASã€LAPACKã€Intel MKLï¼ˆMath Kernel Libraryï¼Œå¯èƒ½æœ‰ï¼Œå–å†³äºNumPyç‰ˆæœ¬ï¼‰ç­‰ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-dcdb66e49e5f70ea.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ä¼ªéšæœºæ•°ç”Ÿæˆ"><a href="#ä¼ªéšæœºæ•°ç”Ÿæˆ" class="headerlink" title="ä¼ªéšæœºæ•°ç”Ÿæˆ"></a>ä¼ªéšæœºæ•°ç”Ÿæˆ</h3><p><strong>numpy.randomæ¨¡å—</strong>:å¯¹Pythonå†…ç½®çš„randomè¿›è¡Œäº†è¡¥å……ï¼Œå¢åŠ äº†ä¸€äº›ç”¨äºé«˜æ•ˆç”Ÿæˆå¤šç§æ¦‚ç‡åˆ†å¸ƒçš„æ ·æœ¬å€¼çš„å‡½æ•°</p>
<p>éƒ½æ˜¯é€šè¿‡ç®—æ³•åŸºäºéšæœºæ•°ç”Ÿæˆå™¨ç§å­ï¼Œåœ¨ç¡®å®šæ€§çš„æ¡ä»¶ä¸‹ç”Ÿæˆçš„ä¼ªéšæœºæ•°ã€‚å¯ä»¥ç”¨NumPyçš„np.random.seedæ›´æ”¹éšæœºæ•°ç”Ÿæˆç§å­</p>
<p>numpy.randomçš„æ•°æ®ç”Ÿæˆå‡½æ•°ä½¿ç”¨å…¨å±€éšæœºç§å­ã€‚ä½¿ç”¨numpy.random.RandomState åˆ›å»ºä¸€ä¸ªä¸å…¶å®ƒéš”ç¦»çš„éšæœºæ•°ç”Ÿæˆå™¨,é¿å…å…¨å±€çŠ¶æ€</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-97ba09c96dab93a2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-6ed04fae3d1178e2.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥"><a href="#ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥" class="headerlink" title="ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥"></a>ç¤ºä¾‹ï¼šéšæœºæ¼«æ­¥</h3><p>ç®€å•çš„éšæœºæ¼«æ­¥çš„ä¾‹å­ï¼šä»0å¼€å§‹ï¼Œæ­¥é•¿1å’Œï¼1å‡ºç°çš„æ¦‚ç‡ç›¸ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">position = <span class="number">0</span></span><br><span class="line">walk = [position]</span><br><span class="line">steps = <span class="number">1000</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(steps):</span><br><span class="line">    step = <span class="number">1</span> <span class="keyword">if</span> random.randint(<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">    position += step</span><br><span class="line">    walk.append(position)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨ä¸€ä¸ªæ•°ç»„è¿ç®—æ¥å®ç°</span></span><br><span class="line">nsteps = <span class="number">1000</span></span><br><span class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=nsteps)</span><br><span class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">walk = steps.cumsum()</span><br><span class="line">walk.min()</span><br><span class="line">walk.max()</span><br></pre></td></tr></table></figure>
<p>ç»Ÿè®¡é¦–æ¬¡ç©¿è¶Šæ—¶é—´ï¼Œå³éšæœºæ¼«æ­¥è¿‡ç¨‹ä¸­ç¬¬ä¸€æ¬¡åˆ°è¾¾æŸä¸ªç‰¹å®šå€¼çš„æ—¶é—´ã€‚å‡è®¾æƒ³è¦çŸ¥é“æœ¬æ¬¡éšæœºæ¼«æ­¥éœ€è¦å¤šä¹…æ‰èƒ½è·ç¦»åˆå§‹0ç‚¹è‡³å°‘10æ­¥è¿œï¼ˆä»»ä¸€æ–¹å‘å‡å¯ï¼‰ã€‚</p>
<p>np.abs(walk)&gt;=10å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯è·ç¦»æ˜¯å¦è¾¾åˆ°æˆ–è¶…è¿‡10ï¼Œè€Œæˆ‘ä»¬æƒ³è¦çŸ¥é“çš„æ˜¯ç¬¬ä¸€ä¸ª10æˆ–ï¼10çš„ç´¢å¼•ã€‚</p>
<p>å¯ä»¥ç”¨argmaxæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒè¿”å›çš„æ˜¯è¯¥å¸ƒå°”å‹æ•°ç»„ç¬¬ä¸€ä¸ªæœ€å¤§å€¼çš„ç´¢å¼•ï¼ˆTrueå°±æ˜¯æœ€å¤§å€¼ï¼‰ï¼š<code>(np.abs(walk) &gt;= 10).argmax()</code></p>
<ul>
<li>æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨argmaxå¹¶ä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œå› ä¸ºå®ƒæ— è®ºå¦‚ä½•éƒ½ä¼šå¯¹æ•°ç»„è¿›è¡Œå®Œå…¨æ‰«æã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œåªè¦å‘ç°äº†ä¸€ä¸ªTrueï¼Œé‚£æˆ‘ä»¬å°±çŸ¥é“å®ƒæ˜¯ä¸ªæœ€å¤§å€¼äº†ã€‚</li>
</ul>
<h4 id="ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥"><a href="#ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥" class="headerlink" title="ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥"></a>ä¸€æ¬¡æ¨¡æ‹Ÿå¤šä¸ªéšæœºæ¼«æ­¥</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ‹Ÿ5000ä¸ªéšæœºæ¼«æ­¥è¿‡ç¨‹</span></span><br><span class="line">nwalks = <span class="number">5000</span></span><br><span class="line">nsteps = <span class="number">1000</span></span><br><span class="line">draws = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=(nwalks, nsteps)) <span class="comment"># 0 or 1</span></span><br><span class="line">steps = np.where(draws &gt; <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">walks = steps.cumsum(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—30æˆ–ï¼30çš„æœ€å°ç©¿è¶Šæ—¶é—´</span></span><br><span class="line">hits30 = (np.abs(walks) &gt;= <span class="number">30</span>).any(<span class="number">1</span>)  <span class="comment"># æŒ‰ç…§è¡Œæ¥æŸ¥è¯¢ï¼Œä¸€è¡Œä¸­åªè¦æœ‰ä¸€ä¸ªtrueï¼Œåˆ™ä¸ºtrue</span></span><br><span class="line">hits30.sum()  <span class="comment"># 5000ä¸ªéšæœºè¿‡ç¨‹ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªè¾¾åˆ°30ï¼Œsumå¸ƒå°”å€¼æ—¶ï¼ŒTrueä¸º1</span></span><br><span class="line">crossing_times = (np.abs(walks[hits30]) &gt;= <span class="number">30</span>).argmax(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬5ç« -pandaså…¥é—¨"><a href="#ç¬¬5ç« -pandaså…¥é—¨" class="headerlink" title="ç¬¬5ç«  pandaså…¥é—¨"></a>ç¬¬5ç«  pandaså…¥é—¨</h2><p>pandasæ˜¯ä¸“é—¨ä¸ºå¤„ç†è¡¨æ ¼å’Œæ··æ‚æ•°æ®è®¾è®¡çš„ï¼Œè€ŒNumPyæ›´é€‚åˆå¤„ç†ç»Ÿä¸€çš„æ•°å€¼æ•°ç»„æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</span><br></pre></td></tr></table></figure>
<h3 id="pandasçš„æ•°æ®ç»“æ„ä»‹ç»"><a href="#pandasçš„æ•°æ®ç»“æ„ä»‹ç»" class="headerlink" title="pandasçš„æ•°æ®ç»“æ„ä»‹ç»"></a>pandasçš„æ•°æ®ç»“æ„ä»‹ç»</h3><h4 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h4><p>ä¸€ç§ç±»ä¼¼äºä¸€ç»´æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒç”±ä¸€ç»„æ•°æ®ï¼ˆå„ç§NumPyæ•°æ®ç±»å‹ï¼‰ä»¥åŠä¸€ç»„ä¸ä¹‹ç›¸å…³çš„æ•°æ®æ ‡ç­¾ï¼ˆå³ç´¢å¼•ï¼‰ç»„æˆ</p>
<p>å¯ä»¥å°†Seriesçœ‹æˆæ˜¯ä¸€ä¸ªå®šé•¿çš„æœ‰åºå­—å…¸ï¼Œå› ä¸ºå®ƒæ˜¯ç´¢å¼•å€¼åˆ°æ•°æ®å€¼çš„ä¸€ä¸ªæ˜ å°„ã€‚å®ƒå¯ä»¥ç”¨åœ¨è®¸å¤šåŸæœ¬éœ€è¦å­—å…¸å‚æ•°çš„å‡½æ•°ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡Series çš„valueså’Œindexå±æ€§è·å–å…¶æ•°ç»„è¡¨ç¤ºå½¢å¼å’Œç´¢å¼•å¯¹è±¡</span></span><br><span class="line">obj.values <span class="comment"># array([ 4,  7, -5,  3])</span></span><br><span class="line">obj.index  <span class="comment"># like range(4)  RangeIndex(start=0, stop=4, step=1)</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">obj2 = pd.Series([<span class="number">4</span>, <span class="number">7</span>, <span class="number">-5</span>, <span class="number">3</span>], index=[<span class="string">'d'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># ç›´æ¥é€šè¿‡è¿™ä¸ªå­—å…¸æ¥åˆ›å»ºSeries</span></span><br><span class="line">sdata = &#123;<span class="string">'Ohio'</span>: <span class="number">35000</span>, <span class="string">'Texas'</span>: <span class="number">71000</span>, <span class="string">'Oregon'</span>: <span class="number">16000</span>, <span class="string">'Utah'</span>: <span class="number">5000</span>&#125;</span><br><span class="line">obj3 = pd.Series(sdata)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">states = [<span class="string">'California'</span>, <span class="string">'Ohio'</span>, <span class="string">'Oregon'</span>, <span class="string">'Texas'</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line"><span class="comment"># sdataä¸­è·Ÿstatesç´¢å¼•ç›¸åŒ¹é…çš„é‚£3ä¸ªå€¼ä¼šè¢«æ‰¾å‡ºæ¥å¹¶æ”¾åˆ°ç›¸åº”çš„ä½ç½®ä¸Šï¼Œä½†ç”±äº"California"æ‰€å¯¹åº”çš„sdataå€¼æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥å…¶ç»“æœå°±ä¸ºNaNï¼ˆå³â€œéæ•°å­—â€ï¼ˆnot a numberï¼‰ï¼Œåœ¨pandasä¸­ï¼Œå®ƒç”¨äºè¡¨ç¤ºç¼ºå¤±æˆ–NAå€¼ï¼‰ã€‚å› ä¸ºâ€˜Utahâ€™ä¸åœ¨statesä¸­ï¼Œå®ƒè¢«ä»ç»“æœä¸­é™¤å»ã€‚</span></span><br><span class="line">pd.isnull(obj4)  <span class="comment"># pandasçš„isnullå’Œnotnullå‡½æ•°å¯ç”¨äºæ£€æµ‹ç¼ºå¤±æ•°æ®</span></span><br><span class="line">pd.notnull(obj4)</span><br><span class="line">obj4.isnull()   <span class="comment"># Seriesä¹Ÿæœ‰ç±»ä¼¼çš„å®ä¾‹æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<p>Seriesæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼Œå®ƒä¼šæ ¹æ®è¿ç®—çš„ç´¢å¼•æ ‡ç­¾è‡ªåŠ¨å¯¹é½æ•°æ®ï¼Œç±»ä¼¼æ•°æ®åº“çš„joinçš„æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">37</span>]: obj3 + obj4</span><br><span class="line">Out[<span class="number">37</span>]: </span><br><span class="line">California         NaN</span><br><span class="line">Ohio           <span class="number">70000.0</span></span><br><span class="line">Oregon         <span class="number">32000.0</span></span><br><span class="line">Texas         <span class="number">142000.0</span></span><br><span class="line">Utah               NaN</span><br><span class="line"><span class="comment"># Serieså¯¹è±¡æœ¬èº«åŠå…¶ç´¢å¼•éƒ½æœ‰ä¸€ä¸ªnameå±æ€§</span></span><br><span class="line">obj4.name = <span class="string">'population'</span></span><br><span class="line">obj4.index.name = <span class="string">'state'</span></span><br></pre></td></tr></table></figure>
<h4 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h4><p>ä¸€ä¸ª<strong>è¡¨æ ¼å‹çš„æ•°æ®ç»“æ„</strong>ï¼Œå«æœ‰ä¸€ç»„æœ‰åºçš„åˆ—ï¼Œæ¯åˆ—å¯ä»¥æ˜¯ä¸åŒçš„å€¼ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰ã€‚DataFrameæ—¢æœ‰è¡Œç´¢å¼•ä¹Ÿæœ‰åˆ—ç´¢å¼•ï¼Œå¯ä»¥çœ‹åšç”±Seriesç»„æˆçš„å­—å…¸ï¼ˆå…±ç”¨åŒä¸€ä¸ªç´¢å¼•ï¼‰ã€‚DataFrameä¸­çš„æ•°æ®æ˜¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªäºŒç»´å—å­˜æ”¾çš„ï¼ˆè€Œä¸æ˜¯åˆ—è¡¨ã€å­—å…¸æˆ–åˆ«çš„ä¸€ç»´æ•°æ®ç»“æ„ï¼‰ã€‚</p>
<p>pandasä¸­è®¸å¤šé«˜çº§æ•°æ®å¤„ç†åŠŸèƒ½çš„å…³é”®è¦ç´ ï¼Œ<strong>å±‚æ¬¡åŒ–ç´¢å¼•çš„è¡¨æ ¼å‹ç»“æ„</strong>  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">data = &#123;<span class="string">'state'</span>: [<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],</span><br><span class="line">        <span class="string">'year'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">'pop'</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame = pd.DataFrame(data)</span><br><span class="line"><span class="comment"># æŒ‰ç…§æŒ‡å®šé¡ºåºè¿›è¡Œæ’åˆ—</span></span><br><span class="line">pd.DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>]) </span><br><span class="line"><span class="comment"># ä¼ å…¥çš„åˆ—åœ¨æ•°æ®ä¸­æ‰¾ä¸åˆ°ï¼Œå°±ä¼šåœ¨ç»“æœä¸­äº§ç”Ÿç¼ºå¤±å€¼</span></span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">'year'</span>, <span class="string">'state'</span>, <span class="string">'pop'</span>, <span class="string">'debt'</span>],index=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>,<span class="string">'five'</span>, <span class="string">'six'</span>])</span><br><span class="line"><span class="comment"># é€šè¿‡ç±»ä¼¼å­—å…¸æ ‡è®°çš„æ–¹å¼æˆ–å±æ€§çš„æ–¹å¼ï¼Œå¯ä»¥å°†DataFrameçš„åˆ—è·å–ä¸ºä¸€ä¸ªSeries</span></span><br><span class="line">frame2[<span class="string">'state'</span>]</span><br><span class="line">frame2.year</span><br><span class="line"><span class="comment"># è¡Œä¹Ÿå¯ä»¥é€šè¿‡ä½ç½®æˆ–åç§°çš„æ–¹å¼è¿›è¡Œè·å–ï¼Œæ¯”å¦‚ç”¨locå±æ€§</span></span><br><span class="line">frame2.loc[<span class="string">'three'</span>]</span><br><span class="line"><span class="comment"># åˆ—å¯ä»¥é€šè¿‡èµ‹å€¼çš„æ–¹å¼è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">frame2[<span class="string">'debt'</span>] = <span class="number">16.5</span></span><br><span class="line">frame2[<span class="string">'debt'</span>] = np.arange(<span class="number">6.</span>)</span><br><span class="line">val = pd.Series([<span class="number">-1.2</span>, <span class="number">-1.5</span>, <span class="number">-1.7</span>], index=[<span class="string">'two'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>])</span><br><span class="line">frame2[<span class="string">'debt'</span>] = val</span><br><span class="line"><span class="comment"># æ ¹æ®stateæ˜¯å¦ä¸º'Ohio'ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å¸ƒå°”å€¼çš„åˆ—</span></span><br><span class="line">frame2[<span class="string">'eastern'</span>] = frame2.state == <span class="string">'Ohio'</span></span><br><span class="line"><span class="comment"># å…³é”®å­—delç”¨äºåˆ é™¤åˆ—</span></span><br><span class="line"><span class="keyword">del</span> frame2[<span class="string">'eastern'</span>] </span><br><span class="line"><span class="comment"># æ–¹æ³•</span></span><br><span class="line">frame.head() <span class="comment"># å‰äº”è¡Œ</span></span><br></pre></td></tr></table></figure>
<ul>
<li>frame2[column]é€‚ç”¨äºä»»ä½•åˆ—çš„åï¼Œä½†æ˜¯frame2.columnåªæœ‰åœ¨åˆ—åæ˜¯ä¸€ä¸ªåˆç†çš„Pythonå˜é‡åæ—¶æ‰é€‚ç”¨ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åµŒå¥—å­—å…¸</span></span><br><span class="line">pop = &#123;<span class="string">'Nevada'</span>: &#123;<span class="number">2001</span>: <span class="number">2.4</span>, <span class="number">2002</span>: <span class="number">2.9</span>&#125;,<span class="string">'Ohio'</span>: &#123;<span class="number">2000</span>: <span class="number">1.5</span>, <span class="number">2001</span>: <span class="number">1.7</span>, <span class="number">2002</span>: <span class="number">3.6</span>&#125;&#125;</span><br><span class="line">frame3 = pd.DataFrame(pop)</span><br><span class="line"><span class="comment"># å¯¹DataFrameè¿›è¡Œè½¬ç½®ï¼ˆäº¤æ¢è¡Œå’Œåˆ—ï¼‰</span></span><br><span class="line">frame3.T</span><br><span class="line"><span class="comment"># ç”±Seriesç»„æˆçš„å­—å…¸</span></span><br><span class="line">pdata = &#123;<span class="string">'Ohio'</span>: frame3[<span class="string">'Ohio'</span>][:<span class="number">-1</span>],<span class="string">'Nevada'</span>: frame3[<span class="string">'Nevada'</span>][:<span class="number">2</span>]&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-106835b28c0cea5a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1075/format/webp" alt="img"></p>
<p>å¦‚æœè®¾ç½®äº†DataFrameçš„indexå’Œcolumnsçš„nameå±æ€§ï¼Œåˆ™è¿™äº›ä¿¡æ¯ä¹Ÿä¼šè¢«æ˜¾ç¤ºå‡ºæ¥:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame3.index.name = <span class="string">'year'</span>; frame3.columns.name = <span class="string">'state'</span></span><br></pre></td></tr></table></figure>
<h4 id="ç´¢å¼•å¯¹è±¡"><a href="#ç´¢å¼•å¯¹è±¡" class="headerlink" title="ç´¢å¼•å¯¹è±¡"></a>ç´¢å¼•å¯¹è±¡</h4><h4 id="é‡æ–°ç´¢å¼•"><a href="#é‡æ–°ç´¢å¼•" class="headerlink" title="é‡æ–°ç´¢å¼•"></a>é‡æ–°ç´¢å¼•</h4><p>åœ¨å¯¹Seriesæˆ–DataFrameé‡æ–°ç´¢å¼•æ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå¡«å……å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1.reindex(columns=df2.columns, fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹"><a href="#ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹" class="headerlink" title="ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹"></a>ä¸¢å¼ƒæŒ‡å®šè½´ä¸Šçš„é¡¹</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤åˆ é™¤è¡Œï¼ˆindexï¼‰</span></span><br><span class="line">data.drop([<span class="string">'Colorado'</span>, <span class="string">'Ohio'</span>])</span><br><span class="line"><span class="comment"># é€šè¿‡ä¼ é€’axis=1æˆ–axis='columns'å¯ä»¥åˆ é™¤åˆ—çš„å€¼</span></span><br><span class="line">data.drop(<span class="string">'two'</span>, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å°±åœ°ä¿®æ”¹å¯¹è±¡ï¼Œä¸ä¼šè¿”å›æ–°çš„å¯¹è±¡</span></span><br><span class="line">obj.drop(<span class="string">'c'</span>, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤"><a href="#ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤" class="headerlink" title="ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤"></a>ç´¢å¼•ã€é€‰å–å’Œè¿‡æ»¤</h4><p>Seriesï¼šåˆ©ç”¨æ ‡ç­¾çš„åˆ‡ç‰‡è¿ç®—ä¸æ™®é€šçš„Pythonåˆ‡ç‰‡è¿ç®—ä¸åŒï¼Œå…¶æœ«ç«¯æ˜¯åŒ…å«çš„ã€‚</p>
<p>DataFrameï¼šé»˜è®¤åˆ—æ ‡ç­¾çš„ç´¢å¼•</p>
<h4 id="ç”¨locå’Œilocè¿›è¡Œé€‰å–"><a href="#ç”¨locå’Œilocè¿›è¡Œé€‰å–" class="headerlink" title="ç”¨locå’Œilocè¿›è¡Œé€‰å–"></a>ç”¨locå’Œilocè¿›è¡Œé€‰å–</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å…ˆè¡Œååˆ—</span></span><br><span class="line">data.loc[<span class="string">'Colorado'</span>, [<span class="string">'two'</span>, <span class="string">'three'</span>]] <span class="comment">#è¡Œæ˜¯å¿…é¡»çš„</span></span><br><span class="line">data.iloc[<span class="number">2</span>, [<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line"><span class="comment"># åˆ‡ç‰‡</span></span><br><span class="line">data.loc[:<span class="string">'Utah'</span>, <span class="string">'two'</span>]</span><br><span class="line">data.iloc[:, :<span class="number">3</span>][data.three &gt; <span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-64354f2ab777bd8c.png?imageMogr2/auto-orient/strip|imageView2/2/w/929/format/webp" alt="img"></p>
<h4 id="æ•´æ•°ç´¢å¼•"><a href="#æ•´æ•°ç´¢å¼•" class="headerlink" title="æ•´æ•°ç´¢å¼•"></a>æ•´æ•°ç´¢å¼•</h4><p>locå’Œiloc</p>
<h4 id="ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½"><a href="#ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½" class="headerlink" title="ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½"></a>ç®—æœ¯è¿ç®—å’Œæ•°æ®å¯¹é½</h4><p>pandasæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼Œå®ƒå¯ä»¥å¯¹ä¸åŒç´¢å¼•çš„å¯¹è±¡è¿›è¡Œç®—æœ¯è¿ç®—ã€‚åœ¨å°†å¯¹è±¡ç›¸åŠ æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¸åŒçš„ç´¢å¼•å¯¹ï¼Œåˆ™ç»“æœçš„ç´¢å¼•å°±æ˜¯è¯¥ç´¢å¼•å¯¹çš„å¹¶é›†ã€‚</p>
<p>è‡ªåŠ¨çš„æ•°æ®å¯¹é½æ“ä½œåœ¨ä¸é‡å çš„ç´¢å¼•å¤„å¼•å…¥äº†NAå€¼ã€‚ç¼ºå¤±å€¼ä¼šåœ¨ç®—æœ¯è¿ç®—è¿‡ç¨‹ä¸­ä¼ æ’­</p>
<h4 id="åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼"><a href="#åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼" class="headerlink" title="åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼"></a>åœ¨ç®—æœ¯æ–¹æ³•ä¸­å¡«å……å€¼</h4><p>ä¸¤ä¸ªDataFrameç›¸åŠ æ—¶ï¼Œæ²¡æœ‰é‡å çš„ä½ç½®å°±ä¼šäº§ç”ŸNAå€¼ï¼Œå¯ä»¥ä½¿ç”¨addæ–¹æ³•å¡«å……ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆæ¯”å¦‚0ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1.add(df2, fill_value=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-16857a1021f98d1f.png?imageMogr2/auto-orient/strip|imageView2/2/w/388/format/webp" alt="img"></p>
<ul>
<li>ä»¥å­—æ¯rå¼€å¤´ï¼Œå®ƒä¼šç¿»è½¬å‚æ•°ã€‚</li>
</ul>
<h4 id="DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—"><a href="#DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—" class="headerlink" title="DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—"></a>DataFrameå’ŒSeriesä¹‹é—´çš„è¿ç®—</h4><p>å¹¿æ’­ï¼ˆbroadcastingï¼‰</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDataFrameå’ŒSeriesä¹‹é—´çš„ç®—æœ¯è¿ç®—ä¼šå°†Seriesçš„ç´¢å¼•åŒ¹é…åˆ°DataFrameçš„åˆ—ï¼Œç„¶åæ²¿ç€è¡Œä¸€ç›´å‘ä¸‹å¹¿æ’­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),columns=list(<span class="string">'bde'</span>),index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</span><br><span class="line">series = frame.iloc[<span class="number">0</span>]</span><br><span class="line">frame - series</span><br><span class="line"><span class="string">""" output</span></span><br><span class="line"><span class="string">          b    d    e</span></span><br><span class="line"><span class="string">Utah    0.0  0.0  0.0</span></span><br><span class="line"><span class="string">Ohio    3.0  3.0  3.0</span></span><br><span class="line"><span class="string">Texas   6.0  6.0  6.0</span></span><br><span class="line"><span class="string">Oregon  9.0  9.0  9.0</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæŸä¸ªç´¢å¼•å€¼åœ¨DataFrameçš„åˆ—æˆ–Seriesçš„ç´¢å¼•ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™å‚ä¸è¿ç®—çš„ä¸¤ä¸ªå¯¹è±¡å°±ä¼šè¢«é‡æ–°ç´¢å¼•ä»¥å½¢æˆå¹¶é›†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">series2 = pd.Series(range(<span class="number">3</span>), index=[<span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>])</span><br><span class="line">frame + series2</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">          b   d     e   f</span></span><br><span class="line"><span class="string">Utah    0.0 NaN   3.0 NaN</span></span><br><span class="line"><span class="string">Ohio    3.0 NaN   6.0 NaN</span></span><br><span class="line"><span class="string">Texas   6.0 NaN   9.0 NaN</span></span><br><span class="line"><span class="string">Oregon  9.0 NaN  12.0 NaN</span></span><br><span class="line"><span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ç®—æœ¯è¿ç®—æ–¹æ³•åŒ¹é…è¡Œä¸”åœ¨åˆ—ä¸Šå¹¿æ’­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame.sub(series3, axis=<span class="string">'index'</span>) <span class="comment"># æˆ–è€… axis=0</span></span><br></pre></td></tr></table></figure>
<h4 id="å‡½æ•°åº”ç”¨å’Œæ˜ å°„"><a href="#å‡½æ•°åº”ç”¨å’Œæ˜ å°„" class="headerlink" title="å‡½æ•°åº”ç”¨å’Œæ˜ å°„"></a>å‡½æ•°åº”ç”¨å’Œæ˜ å°„</h4><p>DataFrameçš„applyæ–¹æ³•å¯ä»¥å°†å‡½æ•°åº”ç”¨åˆ°ç”±å„åˆ—æˆ–è¡Œæ‰€å½¢æˆçš„ä¸€ç»´æ•°ç»„ä¸Šã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), columns=list(<span class="string">'bde'</span>),index=[<span class="string">'Utah'</span>, <span class="string">'Ohio'</span>, <span class="string">'Texas'</span>, <span class="string">'Oregon'</span>])</span><br><span class="line">f = <span class="keyword">lambda</span> x: x.max() - x.min()</span><br><span class="line">frame.apply(f) <span class="comment"># æ¯åˆ—</span></span><br><span class="line">frame.apply(f, axis=<span class="string">'columns'</span>) <span class="comment"># æ¯è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> pd.Series([x.min(), x.max()], index=[<span class="string">'min'</span>, <span class="string">'max'</span>])</span><br><span class="line">frame.apply(f)</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">            b         d         e</span></span><br><span class="line"><span class="string">min -0.555730  0.281746 -1.296221</span></span><br><span class="line"><span class="string">max  1.246435  1.965781  1.393406</span></span><br><span class="line"><span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>DataFrameçš„applymapæ–¹æ³•å¯ä»¥ä½¿ç”¨å…ƒç´ çº§çš„Pythonå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">format = <span class="keyword">lambda</span> x: <span class="string">'%.2f'</span> % x</span><br><span class="line">frame.applymap(format)</span><br></pre></td></tr></table></figure>
<p>Seriesæœ‰ä¸€ä¸ªç”¨äºåº”ç”¨å…ƒç´ çº§å‡½æ•°çš„mapæ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame[<span class="string">'e'</span>].map(format)</span><br></pre></td></tr></table></figure>
<h4 id="æ’åºå’Œæ’å"><a href="#æ’åºå’Œæ’å" class="headerlink" title="æ’åºå’Œæ’å"></a>æ’åºå’Œæ’å</h4><p>DataFrameå’ŒSeriesä¸­çš„sort_indexæ–¹æ³•å¯¹è¡Œæˆ–åˆ—ç´¢å¼•è¿›è¡Œæ’åºï¼ˆæŒ‰å­—å…¸é¡ºåºï¼Œé»˜è®¤å‡åºï¼‰ï¼Œè¿”å›ä¸€ä¸ªå·²æ’åºçš„æ–°å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series(range(<span class="number">4</span>), index=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">obj.sort_index()</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">8</span>).reshape((<span class="number">2</span>, <span class="number">4</span>)),index=[<span class="string">'three'</span>, <span class="string">'one'</span>], columns=[<span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line">frame.sort_index()  <span class="comment"># index</span></span><br><span class="line">frame.sort_index(axis=<span class="number">1</span>, ascending=<span class="literal">False</span>) <span class="comment"># columns</span></span><br></pre></td></tr></table></figure>
<p>è‹¥è¦æŒ‰å€¼å¯¹Seriesè¿›è¡Œæ’åºï¼Œå¯ä½¿ç”¨å…¶sort_valuesæ–¹æ³•,ä»»ä½•ç¼ºå¤±å€¼é»˜è®¤éƒ½ä¼šè¢«æ”¾åˆ°Seriesçš„æœ«å°¾ã€‚</p>
<p>DataFrameæ’åºæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ä¸­çš„å€¼è¿›è¡Œæ’åºã€‚å°†ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—çš„åå­—ä¼ é€’ç»™sort_valuesçš„byé€‰é¡¹å³å¯è¾¾åˆ°è¯¥ç›®çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]&#125;)</span><br><span class="line">frame.sort_values(by=<span class="string">'b'</span>)</span><br><span class="line">frame.sort_values(by=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br></pre></td></tr></table></figure>
<p><strong>Serieså’ŒDataFrameçš„rankæ–¹æ³•</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œrankæ˜¯é€šè¿‡â€œä¸ºå„ç»„åˆ†é…ä¸€ä¸ªå¹³å‡æ’åâ€çš„æ–¹å¼ç ´åå¹³çº§å…³ç³»çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">7</span>, <span class="number">-5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>])</span><br><span class="line">obj.rank() <span class="comment"># æ’åå¹¶åˆ—ä¼šå¹³å‡</span></span><br><span class="line">obj.rank(method=<span class="string">'first'</span>) <span class="comment"># æ’åå¹¶åˆ—ä¼šé€‰æ‹©å°çš„æ•°å€¼</span></span><br><span class="line">obj.rank(ascending=<span class="literal">False</span>, method=<span class="string">'max'</span>) <span class="comment"># æ’åå¹¶åˆ—é€‰æ‹©å¤§çš„æ•°å€¼</span></span><br><span class="line"></span><br><span class="line">frame = pd.DataFrame(&#123;<span class="string">'b'</span>: [<span class="number">4.3</span>, <span class="number">7</span>, <span class="number">-3</span>, <span class="number">2</span>], <span class="string">'a'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], <span class="string">'c'</span>: [<span class="number">-2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">-2.5</span>]&#125;) </span><br><span class="line">frame.rank(axis=<span class="string">'columns'</span>) <span class="comment"># å³axis=1ï¼Œ é»˜è®¤axis=0</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-7edfab5b4a147581.png?imageMogr2/auto-orient/strip|imageView2/2/w/653/format/webp" alt="img"></p>
<h4 id="å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•"><a href="#å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•" class="headerlink" title="å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•"></a>å¸¦æœ‰é‡å¤æ ‡ç­¾çš„è½´ç´¢å¼•</h4><p>pandaså‡½æ•°ï¼ˆå¦‚reindexï¼‰éƒ½è¦æ±‚æ ‡ç­¾å”¯ä¸€ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series(range(<span class="number">5</span>), index=[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># æ£€æŸ¥æ ‡ç­¾æ˜¯å¦å”¯ä¸€</span></span><br><span class="line">obj.index.is_unique</span><br><span class="line"><span class="comment"># å¦‚æœæŸä¸ªç´¢å¼•å¯¹åº”å¤šä¸ªå€¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªSeries</span></span><br><span class="line"><span class="comment"># å¯¹DataFrameçš„è¡Œè¿›è¡Œç´¢å¼•æ—¶ï¼Œè¿”å›DataFrame</span></span><br></pre></td></tr></table></figure>
<h3 id="æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡"><a href="#æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡" class="headerlink" title="æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡"></a>æ±‡æ€»å’Œè®¡ç®—æè¿°ç»Ÿè®¡</h3><p><img src="https://upload-images.jianshu.io/upload_images/7178691-af35e3809278410e.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p>æœ‰äº›æ–¹æ³•ï¼ˆå¦‚idxminå’Œidxmaxï¼‰è¿”å›çš„æ˜¯é—´æ¥ç»Ÿè®¡ï¼ˆæ¯”å¦‚è¾¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼çš„ç´¢å¼•ï¼‰ï¼Œå¦ä¸€äº›æ–¹æ³•åˆ™æ˜¯ç´¯è®¡å‹çš„ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-11fa967f658ac314.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="ç›¸å…³ç³»æ•°ä¸åæ–¹å·®"><a href="#ç›¸å…³ç³»æ•°ä¸åæ–¹å·®" class="headerlink" title="ç›¸å…³ç³»æ•°ä¸åæ–¹å·®"></a>ç›¸å…³ç³»æ•°ä¸åæ–¹å·®</h4><h4 id="å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼"><a href="#å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼" class="headerlink" title="å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼"></a>å”¯ä¸€å€¼ã€å€¼è®¡æ•°ä»¥åŠæˆå‘˜èµ„æ ¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">obj = pd.Series([<span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>])</span><br><span class="line">uniques = obj.unique()</span><br><span class="line">obj.value_counts()</span><br><span class="line"><span class="comment"># isinç”¨äºåˆ¤æ–­çŸ¢é‡åŒ–é›†åˆçš„æˆå‘˜èµ„æ ¼</span></span><br><span class="line">mask = obj.isin([<span class="string">'b'</span>, <span class="string">'c'</span>])</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-b53c4a9d65a2db32.png?imageMogr2/auto-orient/strip|imageView2/2/w/848/format/webp" alt="img"></p>
<h2 id="ç¬¬6ç« -æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼"><a href="#ç¬¬6ç« -æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼" class="headerlink" title="ç¬¬6ç«  æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼"></a>ç¬¬6ç«  æ•°æ®åŠ è½½ã€å­˜å‚¨ä¸æ–‡ä»¶æ ¼å¼</h2><h3 id="è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®"><a href="#è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®" class="headerlink" title="è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®"></a>è¯»å†™æ–‡æœ¬æ ¼å¼çš„æ•°æ®</h3><p><img src="https://upload-images.jianshu.io/upload_images/7178691-958f849e6067b19b.png?imageMogr2/auto-orient/strip|imageView2/2/w/778/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.read_csv(<span class="string">'examples/ex1.csv'</span>)</span><br><span class="line">pd.read_table(<span class="string">'examples/ex1.csv'</span>, sep=<span class="string">','</span>)</span><br><span class="line"><span class="comment"># å¦‚æœæ–‡ä»¶æ²¡æœ‰æ ‡é¢˜è¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, header=<span class="literal">None</span>)</span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, names=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'message'</span>])</span><br><span class="line"><span class="comment"># å°†æŸåˆ—è®¾ç½®ä¸ºç´¢å¼•</span></span><br><span class="line">names = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'message'</span>]</span><br><span class="line">pd.read_csv(<span class="string">'examples/ex2.csv'</span>, names=names, index_col=<span class="string">'message'</span>)</span><br><span class="line"><span class="comment"># å±‚æ¬¡åŒ–ç´¢å¼•</span></span><br><span class="line">parsed = pd.read_csv(<span class="string">'examples/csv_mindex.csv'</span>, index_col=[<span class="string">'key1'</span>, <span class="string">'key2'</span>])</span><br><span class="line"><span class="comment"># æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºåˆ†éš”</span></span><br><span class="line">result = pd.read_table(<span class="string">'examples/ex3.txt'</span>, sep=<span class="string">'\s+'</span>)</span><br><span class="line"><span class="comment"># ç”¨skiprowsè·³è¿‡æ–‡ä»¶çš„æŒ‡å®šè¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex4.csv'</span>, skiprows=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<p>ç¼ºå¤±å€¼å¤„ç†æ˜¯æ–‡ä»¶è§£æä»»åŠ¡ä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç¼ºå¤±æ•°æ®ç»å¸¸æ˜¯è¦ä¹ˆæ²¡æœ‰ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œè¦ä¹ˆç”¨æŸä¸ªæ ‡è®°å€¼è¡¨ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œpandasä¼šç”¨ä¸€ç»„ç»å¸¸å‡ºç°çš„æ ‡è®°å€¼è¿›è¡Œè¯†åˆ«ï¼Œæ¯”å¦‚NAåŠNULLï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># na_valueså¯ä»¥ç”¨ä¸€ä¸ªåˆ—è¡¨æˆ–é›†åˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºç¼ºå¤±å€¼</span></span><br><span class="line">result = pd.read_csv(<span class="string">'examples/ex5.csv'</span>, na_values=[<span class="string">'NULL'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: !cat examples/ex5.csv</span><br><span class="line">something,a,b,c,d,message</span><br><span class="line">one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,NA</span><br><span class="line">two,<span class="number">5</span>,<span class="number">6</span>,,<span class="number">8</span>,world</span><br><span class="line">three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br><span class="line">In [<span class="number">26</span>]: result = pd.read_csv(<span class="string">'examples/ex5.csv'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-082daf4a00ed9494.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-f2bcc0a703c7236f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-597327ade3e94c7a.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶"><a href="#é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶" class="headerlink" title="é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶"></a>é€å—è¯»å–æ–‡æœ¬æ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®pandasæ˜¾ç¤ºåœ°æ›´ç´§äº›</span></span><br><span class="line">pd.options.display.max_rows = <span class="number">10</span></span><br><span class="line"><span class="comment"># åªè¯»å–å‡ è¡Œ</span></span><br><span class="line">pd.read_csv(<span class="string">'examples/ex6.csv'</span>, nrows=<span class="number">5</span>)</span><br><span class="line"><span class="comment"># è¦é€å—è¯»å–æ–‡ä»¶</span></span><br><span class="line">chunker = pd.read_csv(<span class="string">'ch06/ex6.csv'</span>, chunksize=<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>è¿”å›å¯è¿­ä»£çš„TextParserå¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tot = pd.Series([])</span><br><span class="line"><span class="keyword">for</span> piece <span class="keyword">in</span> chunker:</span><br><span class="line">    tot = tot.add(piece[<span class="string">'key'</span>].value_counts(), fill_value=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">tot = tot.sort_values(ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼"><a href="#å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼" class="headerlink" title="å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼"></a>å°†æ•°æ®å†™å‡ºåˆ°æ–‡æœ¬æ ¼å¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.to_csv(<span class="string">'examples/out.csv'</span>)</span><br><span class="line">data.to_csv(sys.stdout, sep=<span class="string">'|'</span>) <span class="comment"># å†™å‡ºåˆ°sys.stdoutï¼Œä»…ä»…æ‰“å°å‡ºæ–‡æœ¬ç»“æœ</span></span><br><span class="line"><span class="comment"># é»˜è®¤ç¼ºå¤±å€¼åœ¨è¾“å‡ºç»“æœä¸­ä¼šè¢«è¡¨ç¤ºä¸ºç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">data.to_csv(sys.stdout, na_rep=<span class="string">'NULL'</span>)</span><br><span class="line"><span class="comment"># é»˜è®¤å†™å‡ºè¡Œå’Œåˆ—çš„æ ‡ç­¾</span></span><br><span class="line">data.to_csv(sys.stdout, index=<span class="literal">False</span>, header=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># åªå†™å‡ºä¸€éƒ¨åˆ†</span></span><br><span class="line">data.to_csv(sys.stdout, index=<span class="literal">False</span>, columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="comment"># Seriesä¹Ÿæœ‰ä¸€ä¸ªto_csvæ–¹æ³•</span></span><br><span class="line">dates = pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">7</span>)</span><br><span class="line">ts = pd.Series(np.arange(<span class="number">7</span>), index=dates)</span><br><span class="line">ts.to_csv(<span class="string">'examples/tseries.csv'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¤„ç†åˆ†éš”ç¬¦æ ¼å¼"><a href="#å¤„ç†åˆ†éš”ç¬¦æ ¼å¼" class="headerlink" title="å¤„ç†åˆ†éš”ç¬¦æ ¼å¼"></a>å¤„ç†åˆ†éš”ç¬¦æ ¼å¼</h4><p>æ‰‹åŠ¨å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">54</span>]: !cat examples/ex7.csv</span><br><span class="line"><span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span></span><br><span class="line"><span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span></span><br><span class="line"><span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥ä½¿ç”¨Pythonå†…ç½®çš„csvæ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">f = open(<span class="string">'examples/ex7.csv'</span>)</span><br><span class="line">reader = csv.reader(f)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> reader:</span><br><span class="line">    print(line)</span><br><span class="line"><span class="comment"># è¯»å–æ–‡ä»¶åˆ°ä¸€ä¸ªå¤šè¡Œçš„åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'examples/ex7.csv'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    lines = list(csv.reader(f))</span><br><span class="line"><span class="comment"># å°†è¿™äº›è¡Œåˆ†ä¸ºæ ‡é¢˜è¡Œå’Œæ•°æ®è¡Œ    </span></span><br><span class="line">header, values = lines[<span class="number">0</span>], lines[<span class="number">1</span>:]</span><br><span class="line"><span class="comment"># ç”¨å­—å…¸æ„é€ å¼å’Œzip(*values)ï¼Œåè€…å°†è¡Œè½¬ç½®ä¸ºåˆ—ï¼Œåˆ›å»ºæ•°æ®åˆ—çš„å­—å…¸</span></span><br><span class="line">data_dict = &#123;h: v <span class="keyword">for</span> h, v <span class="keyword">in</span> zip(header, zip(*values))&#125;</span><br></pre></td></tr></table></figure>
<p>CSVæ–‡ä»¶çš„å½¢å¼æœ‰å¾ˆå¤šã€‚åªéœ€å®šä¹‰csv.Dialectçš„ä¸€ä¸ªå­ç±»å³å¯å®šä¹‰å‡ºæ–°æ ¼å¼ï¼ˆå¦‚ä¸“é—¨çš„åˆ†éš”ç¬¦ã€å­—ç¬¦ä¸²å¼•ç”¨çº¦å®šã€è¡Œç»“æŸç¬¦ç­‰ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">my_dialect</span><span class="params">(csv.Dialect)</span>:</span></span><br><span class="line">    lineterminator = <span class="string">'\n'</span></span><br><span class="line">    delimiter = <span class="string">';'</span></span><br><span class="line">    quotechar = <span class="string">'"'</span></span><br><span class="line">    quoting = csv.QUOTE_MINIMAL</span><br><span class="line">reader = csv.reader(f, dialect=my_dialect)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-7a1cee622459072b.png?imageMogr2/auto-orient/strip|imageView2/2/w/1187/format/webp" alt="img"></p>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>é€šè¿‡json.loadså³å¯å°†JSONå­—ç¬¦ä¸²è½¬æ¢æˆPythonå½¢å¼</p>
<p>json.dumpsåˆ™å°†Pythonå¯¹è±¡è½¬æ¢æˆJSONæ ¼å¼</p>
<p>JSONå¯¹è±¡è½¬æ¢ä¸ºDataFrameï¼šå‘DataFrameæ„é€ å™¨ä¼ å…¥ä¸€ä¸ªå­—å…¸çš„åˆ—è¡¨ï¼ˆå°±æ˜¯åŸå…ˆçš„JSONå¯¹è±¡ï¼‰ï¼Œå¹¶é€‰å–æ•°æ®å­—æ®µçš„å­é›†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = json.loads(obj)</span><br><span class="line">siblings = pd.DataFrame(result[<span class="string">'siblings'</span>], columns=[<span class="string">'name'</span>, <span class="string">'age'</span>])</span><br></pre></td></tr></table></figure>
<p>pandas.read_jsonå¯ä»¥è‡ªåŠ¨å°†ç‰¹åˆ«æ ¼å¼çš„JSONæ•°æ®é›†è½¬æ¢ä¸ºSeriesæˆ–DataFrame</p>
<p>å°†æ•°æ®ä»pandasè¾“å‡ºåˆ°JSONï¼Œå¯ä»¥ä½¿ç”¨to_jsonæ–¹æ³•</p>
<h4 id="XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†"><a href="#XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†" class="headerlink" title="XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†"></a>XMLå’ŒHTMLï¼šWebä¿¡æ¯æ”¶é›†</h4><p>pandasæœ‰ä¸€ä¸ªå†…ç½®çš„åŠŸèƒ½ï¼Œread_htmlï¼Œå®ƒå¯ä»¥ä½¿ç”¨lxmlå’ŒBeautiful Soupè‡ªåŠ¨å°†HTMLæ–‡ä»¶ä¸­çš„è¡¨æ ¼è§£æä¸ºDataFrameå¯¹è±¡ã€‚</p>
<h3 id="äºŒè¿›åˆ¶æ•°æ®æ ¼å¼"><a href="#äºŒè¿›åˆ¶æ•°æ®æ ¼å¼" class="headerlink" title="äºŒè¿›åˆ¶æ•°æ®æ ¼å¼"></a>äºŒè¿›åˆ¶æ•°æ®æ ¼å¼</h3><p>å®ç°æ•°æ®çš„é«˜æ•ˆäºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æœ€ç®€å•çš„åŠæ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨Pythonå†…ç½®çš„pickleåºåˆ—åŒ–</p>
<p>read_pickleå’Œto_pickle</p>
<ul>
<li>pickleä»…å»ºè®®ç”¨äºçŸ­æœŸå­˜å‚¨æ ¼å¼ã€‚å…¶åŸå› æ˜¯å¾ˆéš¾ä¿è¯è¯¥æ ¼å¼æ°¸è¿œæ˜¯ç¨³å®šçš„</li>
</ul>
<p>pandaså†…ç½®æ”¯æŒä¸¤ä¸ªäºŒè¿›åˆ¶æ•°æ®æ ¼å¼ï¼šHDF5å’ŒMessagePackã€‚</p>
<p>pandasæˆ–NumPyæ•°æ®çš„å…¶å®ƒå­˜å‚¨æ ¼å¼æœ‰ï¼š</p>
<ul>
<li>bcolzï¼šä¸€ç§å¯å‹ç¼©çš„åˆ—å­˜å‚¨äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŸºäºBloscå‹ç¼©åº“ã€‚</li>
<li>Featherï¼šä¸€ç§è·¨è¯­è¨€çš„åˆ—å­˜å‚¨æ–‡ä»¶æ ¼å¼ã€‚Featherä½¿ç”¨äº†Apache Arrowçš„åˆ—å¼å†…å­˜æ ¼å¼ã€‚</li>
</ul>
<h4 id="HDF5æ ¼å¼"><a href="#HDF5æ ¼å¼" class="headerlink" title="HDF5æ ¼å¼"></a>HDF5æ ¼å¼</h4><p>HDF5æ˜¯ä¸€ç§å­˜å‚¨å¤§è§„æ¨¡ç§‘å­¦æ•°ç»„æ•°æ®çš„éå¸¸å¥½çš„æ–‡ä»¶æ ¼å¼ã€‚</p>
<p>HDF5å¯ä»¥é«˜æ•ˆåœ°åˆ†å—è¯»å†™</p>
<p>å¯ä»¥ç”¨PyTablesæˆ–h5pyåº“ç›´æ¥è®¿é—®HDF5æ–‡ä»¶ï¼Œpandasæä¾›äº†æ›´ä¸ºé«˜çº§çš„æ¥å£</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'a'</span>: np.random.randn(<span class="number">100</span>)&#125;)</span><br><span class="line">store[<span class="string">'obj1'</span>] = frame</span><br><span class="line">store[<span class="string">'obj1_col'</span>] = frame[<span class="string">'a'</span>]</span><br><span class="line">store = pd.HDFStore(<span class="string">'mydata.h5'</span>)</span><br><span class="line"><span class="comment"># HDFStoreæ”¯æŒä¸¤ç§å­˜å‚¨æ¨¡å¼ï¼Œ'fixed'å’Œ'table'ã€‚åè€…é€šå¸¸ä¼šæ›´æ…¢ï¼Œä½†æ˜¯æ”¯æŒä½¿ç”¨ç‰¹æ®Šè¯­æ³•è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼š</span></span><br><span class="line">store.put(<span class="string">'obj2'</span>, frame, format=<span class="string">'table'</span>)</span><br><span class="line">store.select(<span class="string">'obj2'</span>, where=[<span class="string">'index &gt;= 10 and index &lt;= 15'</span>])</span><br><span class="line"></span><br><span class="line">frame.to_hdf(<span class="string">'mydata.h5'</span>, <span class="string">'obj3'</span>, format=<span class="string">'table'</span>)</span><br><span class="line">pd.read_hdf(<span class="string">'mydata.h5'</span>, <span class="string">'obj3'</span>, where=[<span class="string">'index &lt; 5'</span>])</span><br></pre></td></tr></table></figure>
<h4 id="è¯»å–Microsoft-Excelæ–‡ä»¶"><a href="#è¯»å–Microsoft-Excelæ–‡ä»¶" class="headerlink" title="è¯»å–Microsoft Excelæ–‡ä»¶"></a>è¯»å–Microsoft Excelæ–‡ä»¶</h4><p>pandasçš„ExcelFileç±»æˆ–pandas.read_excelå‡½æ•°æ”¯æŒè¯»å–å­˜å‚¨åœ¨Excel 2003ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ä¸­çš„è¡¨æ ¼å‹æ•°æ®ã€‚è¿™ä¸¤ä¸ªå·¥å…·åˆ†åˆ«ä½¿ç”¨æ‰©å±•åŒ…xlrdå’Œopenpyxlè¯»å–XLSå’ŒXLSXæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯»å–</span></span><br><span class="line">xlsx = pd.ExcelFile(<span class="string">'examples/ex1.xlsx'</span>)</span><br><span class="line">pd.read_excel(xlsx, <span class="string">'Sheet1'</span>)</span><br><span class="line">frame = pd.read_excel(<span class="string">'examples/ex1.xlsx'</span>, <span class="string">'Sheet1'</span>)</span><br><span class="line"><span class="comment"># å†™å…¥</span></span><br><span class="line">writer = pd.ExcelWriter(<span class="string">'examples/ex2.xlsx'</span>)</span><br><span class="line">frame.to_excel(writer, <span class="string">'Sheet1'</span>)</span><br><span class="line">writer.save()</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">frame.to_excel(<span class="string">'examples/ex2.xlsx'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Web-APIsäº¤äº’"><a href="#Web-APIsäº¤äº’" class="headerlink" title="Web APIsäº¤äº’"></a>Web APIsäº¤äº’</h3><h3 id="æ•°æ®åº“äº¤äº’"><a href="#æ•°æ®åº“äº¤äº’" class="headerlink" title="æ•°æ®åº“äº¤äº’"></a>æ•°æ®åº“äº¤äº’</h3><p>å°†æ•°æ®ä»SQLåŠ è½½åˆ°DataFrameçš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œæ­¤å¤–pandasè¿˜æœ‰ä¸€äº›èƒ½å¤Ÿç®€åŒ–è¯¥è¿‡ç¨‹çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘å°†ä½¿ç”¨SQLiteæ•°æ®åº“ï¼ˆé€šè¿‡Pythonå†…ç½®çš„sqlite3é©±åŠ¨å™¨ï¼‰</p>
<p>ã€‚<a href="http://www.sqlalchemy.org/" target="_blank" rel="noopener">SQLAlchemyé¡¹ç›®</a>æ˜¯ä¸€ä¸ªæµè¡Œçš„Python SQLå·¥å…·ï¼Œå®ƒæŠ½è±¡å‡ºäº†SQLæ•°æ®åº“ä¸­çš„è®¸å¤šå¸¸è§å·®å¼‚ã€‚pandasæœ‰ä¸€ä¸ªread_sqlå‡½æ•°ï¼Œå¯ä»¥è®©ä½ è½»æ¾çš„ä»SQLAlchemyè¿æ¥è¯»å–æ•°æ®ã€‚</p>
<h2 id="ç¬¬7ç« -æ•°æ®æ¸…æ´—å’Œå‡†å¤‡"><a href="#ç¬¬7ç« -æ•°æ®æ¸…æ´—å’Œå‡†å¤‡" class="headerlink" title="ç¬¬7ç«  æ•°æ®æ¸…æ´—å’Œå‡†å¤‡"></a>ç¬¬7ç«  æ•°æ®æ¸…æ´—å’Œå‡†å¤‡</h2><h3 id="å¤„ç†ç¼ºå¤±æ•°æ®"><a href="#å¤„ç†ç¼ºå¤±æ•°æ®" class="headerlink" title="å¤„ç†ç¼ºå¤±æ•°æ®"></a>å¤„ç†ç¼ºå¤±æ•°æ®</h3><p>å¯¹äºæ•°å€¼æ•°æ®ï¼Œpandasä½¿ç”¨æµ®ç‚¹å€¼NaNï¼ˆNot a Numberï¼‰è¡¨ç¤ºç¼ºå¤±æ•°æ®ï¼Œç§°å…¶ä¸ºå“¨å…µå€¼ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ£€æµ‹å‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">string_data = pd.Series([<span class="string">'aardvark'</span>, <span class="string">'artichoke'</span>, np.nan, <span class="string">'avocado'</span>])</span><br><span class="line">string_data.isnull()</span><br><span class="line">string_data[<span class="number">0</span>] = <span class="literal">None</span></span><br><span class="line">string_data.isnull()</span><br></pre></td></tr></table></figure>
<p>pandasé‡‡ç”¨äº†Rè¯­è¨€ä¸­çš„æƒ¯ç”¨æ³•ï¼Œå³å°†ç¼ºå¤±å€¼è¡¨ç¤ºä¸ºNAï¼Œå®ƒè¡¨ç¤ºä¸å¯ç”¨not availableã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-1a0f73e5bb26ea21.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ»¤é™¤ç¼ºå¤±æ•°æ®"><a href="#æ»¤é™¤ç¼ºå¤±æ•°æ®" class="headerlink" title="æ»¤é™¤ç¼ºå¤±æ•°æ®"></a>æ»¤é™¤ç¼ºå¤±æ•°æ®</h4><p>é€šè¿‡pandas.isnullæˆ–å¸ƒå°”ç´¢å¼•çš„æ‰‹å·¥æ–¹æ³•ï¼Œæˆ–è€…dropnaã€‚å¯¹äºä¸€ä¸ªSeriesï¼Œdropnaè¿”å›ä¸€ä¸ªä»…å«éç©ºæ•°æ®å’Œç´¢å¼•å€¼çš„Series</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</span><br><span class="line">data = pd.Series([<span class="number">1</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>]) </span><br><span class="line">data.dropna()</span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line">data[data.notnull()]</span><br></pre></td></tr></table></figure>
<p>å¯¹äºDataFrameå¯¹è±¡ï¼Œdropnaé»˜è®¤ä¸¢å¼ƒä»»ä½•å«æœ‰ç¼ºå¤±å€¼çš„è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame([[<span class="number">1.</span>, <span class="number">6.5</span>, <span class="number">3.</span>], [<span class="number">1.</span>, NA, NA], [NA, NA, NA], [NA, <span class="number">6.5</span>, <span class="number">3.</span>]])</span><br><span class="line">cleaned = data.dropna()</span><br><span class="line"><span class="comment"># ä¸¢å¼ƒå…¨ä¸ºNAçš„é‚£äº›è¡Œ</span></span><br><span class="line">data.dropna(how=<span class="string">'all'</span>)</span><br><span class="line"><span class="comment"># ä¸¢å¼ƒåˆ—</span></span><br><span class="line">data.dropna(axis=<span class="number">1</span>, how=<span class="string">'all'</span>)</span><br><span class="line"><span class="comment"># æ»¤é™¤DataFrameè¡Œçš„é—®é¢˜æ¶‰åŠæ—¶é—´åºåˆ—æ•°æ®ï¼Œè‡³æ»¤é™¤ç¬¦åˆæ¡ä»¶çš„å‰ä¸¤è¡Œ</span></span><br><span class="line">df.dropna(thresh=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¡«å……ç¼ºå¤±æ•°æ®"><a href="#å¡«å……ç¼ºå¤±æ•°æ®" class="headerlink" title="å¡«å……ç¼ºå¤±æ•°æ®"></a>å¡«å……ç¼ºå¤±æ•°æ®</h4><p>fillnaå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.fillna(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># å®ç°å¯¹ä¸åŒçš„åˆ—å¡«å……ä¸åŒçš„å€¼</span></span><br><span class="line">df.fillna(&#123;<span class="number">1</span>: <span class="number">0.5</span>, <span class="number">2</span>: <span class="number">0</span>&#125;)</span><br><span class="line"><span class="comment"># å¯¹ç°æœ‰å¯¹è±¡è¿›è¡Œå°±åœ°ä¿®æ”¹</span></span><br><span class="line"> _ = df.fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#å¯¹reindexingæœ‰æ•ˆçš„é‚£äº›æ’å€¼æ–¹æ³•ä¹Ÿå¯ç”¨äºfillna    </span></span><br><span class="line">df.fillna(method=<span class="string">'ffill'</span>)</span><br><span class="line">df.fillna(method=<span class="string">'ffill'</span>, limit=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># ä¼ å…¥å¹³å‡å€¼</span></span><br><span class="line">data.fillna(data.mean())</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-0bf235386a64c3b5.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4edd39e68f4dc530.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h3 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h3><h4 id="ç§»é™¤é‡å¤æ•°æ®"><a href="#ç§»é™¤é‡å¤æ•°æ®" class="headerlink" title="ç§»é™¤é‡å¤æ•°æ®"></a>ç§»é™¤é‡å¤æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(&#123;<span class="string">'k1'</span>: [<span class="string">'one'</span>, <span class="string">'two'</span>] * <span class="number">3</span> + [<span class="string">'two'</span>],<span class="string">'k2'</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]&#125;)</span><br><span class="line"><span class="comment"># duplicatedæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å‹Seriesï¼Œè¡¨ç¤ºå„è¡Œæ˜¯å¦å’Œå‰é¢å‡ºç°è¿‡çš„è¡Œé‡å¤</span></span><br><span class="line">data.duplicated()</span><br><span class="line"><span class="comment"># drop_duplicatesæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªDataFrameï¼Œé‡å¤çš„æ•°ç»„ä¼šæ ‡ä¸ºFalse</span></span><br><span class="line">data.drop_duplicates()</span><br><span class="line"><span class="comment"># æŒ‡å®šéƒ¨åˆ†åˆ—è¿›è¡Œé‡å¤é¡¹åˆ¤æ–­</span></span><br><span class="line">data.drop_duplicates([<span class="string">'k1'</span>])</span><br><span class="line"><span class="comment"># duplicatedå’Œdrop_duplicatesé»˜è®¤ä¿ç•™çš„æ˜¯ç¬¬ä¸€ä¸ªå‡ºç°çš„å€¼ç»„åˆã€‚ä¼ å…¥keep='last'åˆ™ä¿ç•™æœ€åä¸€ä¸ª</span></span><br><span class="line">data.drop_duplicates([<span class="string">'k1'</span>, <span class="string">'k2'</span>], keep=<span class="string">'last'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢"><a href="#åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢" class="headerlink" title="åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢"></a>åˆ©ç”¨å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œæ•°æ®è½¬æ¢</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(&#123;<span class="string">'food'</span>: [<span class="string">'bacon'</span>, <span class="string">'pulled pork'</span>, <span class="string">'bacon'</span>,</span><br><span class="line"><span class="string">'Pastrami'</span>, <span class="string">'corned beef'</span>, <span class="string">'Bacon'</span>,<span class="string">'pastrami'</span>, <span class="string">'honey ham'</span>, <span class="string">'nova lox'</span>],<span class="string">'ounces'</span>: [<span class="number">4</span>, <span class="number">3</span>, <span class="number">12</span>, <span class="number">6</span>, <span class="number">7.5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>]&#125;)</span><br><span class="line"><span class="comment"># æ·»åŠ ä¸€åˆ—è¡¨ç¤ºè¯¥è‚‰ç±»é£Ÿç‰©æ¥æºçš„åŠ¨ç‰©ç±»å‹</span></span><br><span class="line"><span class="comment"># ç¼–å†™ä¸€ä¸ªä¸åŒè‚‰ç±»åˆ°åŠ¨ç‰©çš„æ˜ å°„</span></span><br><span class="line">meat_to_animal = &#123;</span><br><span class="line">  <span class="string">'bacon'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'pulled pork'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'pastrami'</span>: <span class="string">'cow'</span>,</span><br><span class="line">  <span class="string">'corned beef'</span>: <span class="string">'cow'</span>,</span><br><span class="line">  <span class="string">'honey ham'</span>: <span class="string">'pig'</span>,</span><br><span class="line">  <span class="string">'nova lox'</span>: <span class="string">'salmon'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># å…ˆå°†å­—æ¯è½¬æ¢ä¸ºå°å†™</span></span><br><span class="line">lowercased = data[<span class="string">'food'</span>].str.lower()</span><br><span class="line">data[<span class="string">'animal'</span>] = lowercased.map(meat_to_animal)</span><br><span class="line"><span class="comment"># ä¼ å…¥ä¸€ä¸ªèƒ½å¤Ÿå®Œæˆå…¨éƒ¨è¿™äº›å·¥ä½œçš„å‡½æ•°ï¼š</span></span><br><span class="line">data[<span class="string">'food'</span>].map(<span class="keyword">lambda</span> x: meat_to_animal[x.lower()])</span><br></pre></td></tr></table></figure>
<h4 id="æ›¿æ¢å€¼"><a href="#æ›¿æ¢å€¼" class="headerlink" title="æ›¿æ¢å€¼"></a>æ›¿æ¢å€¼</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.Series([<span class="number">1.</span>, <span class="number">-999.</span>, <span class="number">2.</span>, <span class="number">-999.</span>, <span class="number">-1000.</span>, <span class="number">3.</span>])</span><br><span class="line">data.replace(<span class="number">-999</span>, np.nan)</span><br><span class="line"><span class="comment"># ä¼ å…¥å¤šä¸ªå€¼</span></span><br><span class="line">data.replace([<span class="number">-999</span>, <span class="number">-1000</span>], np.nan)</span><br><span class="line">data.replace([<span class="number">-999</span>, <span class="number">-1000</span>], [np.nan, <span class="number">0</span>])</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ä¼ å…¥å­—å…¸</span></span><br><span class="line">data.replace(&#123;<span class="number">-999</span>: np.nan, <span class="number">-1000</span>: <span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>data.replaceæ–¹æ³•ä¸data.str.replaceä¸åŒï¼Œåè€…åšçš„æ˜¯å­—ç¬¦ä¸²çš„å…ƒç´ çº§æ›¿æ¢</li>
</ul>
<h4 id="é‡å‘½åè½´ç´¢å¼•"><a href="#é‡å‘½åè½´ç´¢å¼•" class="headerlink" title="é‡å‘½åè½´ç´¢å¼•"></a>é‡å‘½åè½´ç´¢å¼•</h4><p>è½´æ ‡ç­¾å¯ä»¥é€šè¿‡å‡½æ•°æˆ–æ˜ å°„è¿›è¡Œè½¬æ¢ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ä¸åŒæ ‡ç­¾çš„å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>)), index=[<span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>, <span class="string">'New York'</span>], columns=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>])</span><br><span class="line">transform = <span class="keyword">lambda</span> x: x[:<span class="number">4</span>].upper()</span><br><span class="line">data.index.map(transform)</span><br><span class="line"><span class="comment"># å¯¹DataFrameå°±åœ°ä¿®æ”¹</span></span><br><span class="line">data.index = data.index.map(transform)</span><br><span class="line"><span class="comment"># ç”¨renameæ–¹æ³•åˆ›å»ºæ•°æ®é›†çš„è½¬æ¢ç‰ˆï¼ˆè€Œä¸æ˜¯ä¿®æ”¹åŸå§‹æ•°æ®ï¼‰</span></span><br><span class="line">data.rename(index=str.title, columns=str.upper)</span><br><span class="line"><span class="comment"># renameå¯ä»¥ç»“åˆå­—å…¸å‹å¯¹è±¡å®ç°å¯¹éƒ¨åˆ†è½´æ ‡ç­¾çš„æ›´æ–°</span></span><br><span class="line">data.rename(index=&#123;<span class="string">'OHIO'</span>: <span class="string">'INDIANA'</span>&#125;,columns=&#123;<span class="string">'three'</span>: <span class="string">'peekaboo'</span>&#125;)</span><br><span class="line"><span class="comment"># å°±åœ°ä¿®æ”¹</span></span><br><span class="line">data.rename(index=&#123;<span class="string">'OHIO'</span>: <span class="string">'INDIANA'</span>&#125;, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†"><a href="#ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†" class="headerlink" title="ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†"></a>ç¦»æ•£åŒ–å’Œé¢å…ƒåˆ’åˆ†</h4><p>ä¸ºäº†ä¾¿äºåˆ†æï¼Œè¿ç»­æ•°æ®å¸¸å¸¸è¢«ç¦»æ•£åŒ–æˆ–æ‹†åˆ†ä¸ºâ€œé¢å…ƒâ€ï¼ˆbinï¼‰ã€‚</p>
<p>cutå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¹´é¾„åˆ†ç»„</span></span><br><span class="line">ages = [<span class="number">20</span>, <span class="number">22</span>, <span class="number">25</span>, <span class="number">27</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">37</span>, <span class="number">31</span>, <span class="number">61</span>, <span class="number">45</span>, <span class="number">41</span>, <span class="number">32</span>]</span><br><span class="line">bins = [<span class="number">18</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">60</span>, <span class="number">100</span>]</span><br><span class="line">cats = pd.cut(ages, bins)</span><br><span class="line"><span class="comment"># è¿”å›çš„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Categoricalå¯¹è±¡</span></span><br><span class="line">cats.codes <span class="comment"># array([0, 0, 0, 1, 0, 0, 2, 1, 3, 2, 2, 1], dtype=int8)</span></span><br><span class="line">cats.categories </span><br><span class="line"><span class="string">""" IntervalIndex([(18, 25], (25, 35], (35, 60], (60, 100]]</span></span><br><span class="line"><span class="string">              closed='right',</span></span><br><span class="line"><span class="string">              dtype='interval[int64]')"""</span></span><br><span class="line"><span class="comment"># pd.value_counts(cats)æ˜¯pandas.cutç»“æœçš„é¢å…ƒè®¡æ•°</span></span><br><span class="line">pd.value_counts(cats)</span><br><span class="line"></span><br><span class="line">pd.cut(ages, [<span class="number">18</span>, <span class="number">26</span>, <span class="number">36</span>, <span class="number">61</span>, <span class="number">100</span>], right=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªåˆ—è¡¨æˆ–æ•°ç»„åˆ°labelsï¼Œè®¾ç½®é¢å…ƒåç§°</span></span><br><span class="line">group_names = [<span class="string">'Youth'</span>, <span class="string">'YoungAdult'</span>, <span class="string">'MiddleAged'</span>, <span class="string">'Senior'</span>]</span><br><span class="line">pd.cut(ages, bins, labels=group_names)</span><br><span class="line"><span class="comment"># å‘cutä¼ å…¥çš„æ˜¯é¢å…ƒçš„æ•°é‡</span></span><br><span class="line">data = np.random.rand(<span class="number">20</span>)</span><br><span class="line">pd.cut(data, <span class="number">4</span>, precision=<span class="number">2</span>) <span class="comment"># é€‰é¡¹precision=2ï¼Œé™å®šå°æ•°åªæœ‰ä¸¤ä½</span></span><br></pre></td></tr></table></figure>
<p>qcutéå¸¸ç±»ä¼¼cutï¼Œå®ƒå¯ä»¥æ ¹æ®æ ·æœ¬åˆ†ä½æ•°å¯¹æ•°æ®è¿›è¡Œé¢å…ƒåˆ’åˆ†ã€‚æ ¹æ®æ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œcutå¯èƒ½æ— æ³•ä½¿å„ä¸ªé¢å…ƒä¸­å«æœ‰ç›¸åŒæ•°é‡çš„æ•°æ®ç‚¹ã€‚è€Œqcutç”±äºä½¿ç”¨çš„æ˜¯æ ·æœ¬åˆ†ä½æ•°ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°å¤§å°åŸºæœ¬ç›¸ç­‰çš„é¢å…ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = np.random.randn(<span class="number">1000</span>)</span><br><span class="line">cats = pd.qcut(data, <span class="number">4</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ä¼ é€’è‡ªå®šä¹‰çš„åˆ†ä½æ•°ï¼ˆ0åˆ°1ä¹‹é—´çš„æ•°å€¼ï¼ŒåŒ…å«ç«¯ç‚¹ï¼‰</span></span><br><span class="line">pd.qcut(data, [<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">1.</span>])</span><br></pre></td></tr></table></figure>
<h4 id="æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼"><a href="#æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼" class="headerlink" title="æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼"></a>æ£€æµ‹å’Œè¿‡æ»¤å¼‚å¸¸å€¼</h4><p>è¿‡æ»¤æˆ–å˜æ¢å¼‚å¸¸å€¼ï¼ˆoutlierï¼‰åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå°±æ˜¯è¿ç”¨æ•°ç»„è¿ç®—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(np.random.randn(<span class="number">1000</span>, <span class="number">4</span>))</span><br><span class="line">data.describe()</span><br><span class="line"><span class="comment"># æ‰¾å‡ºæŸåˆ—ä¸­ç»å¯¹å€¼å¤§å°è¶…è¿‡3çš„å€¼</span></span><br><span class="line">col = data[<span class="number">2</span>] <span class="comment"># ç¬¬äºŒåˆ—</span></span><br><span class="line">col[np.abs(col) &gt; <span class="number">3</span>]</span><br><span class="line"><span class="comment"># é€‰å‡ºå…¨éƒ¨å«æœ‰â€œè¶…è¿‡3æˆ–ï¼3çš„å€¼â€çš„è¡Œ</span></span><br><span class="line">data[(np.abs(data) &gt; <span class="number">3</span>).any(<span class="number">1</span>)]</span><br><span class="line">data[np.abs(data) &gt; <span class="number">3</span>] = np.sign(data) * <span class="number">3</span></span><br><span class="line"><span class="comment"># æ ¹æ®æ•°æ®çš„å€¼æ˜¯æ­£è¿˜æ˜¯è´Ÿï¼Œnp.sign(data)å¯ä»¥ç”Ÿæˆ1å’Œ-1ï¼š</span></span><br><span class="line">np.sign(data).head()</span><br></pre></td></tr></table></figure>
<h4 id="æ’åˆ—å’Œéšæœºé‡‡æ ·"><a href="#æ’åˆ—å’Œéšæœºé‡‡æ ·" class="headerlink" title="æ’åˆ—å’Œéšæœºé‡‡æ ·"></a>æ’åˆ—å’Œéšæœºé‡‡æ ·</h4><p>åˆ©ç”¨numpy.random.permutationå‡½æ•°å¯ä»¥å®ç°å¯¹Seriesæˆ–DataFrameçš„åˆ—çš„æ’åˆ—å·¥ä½œï¼ˆpermutingï¼Œéšæœºé‡æ’åºï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(np.arange(<span class="number">5</span> * <span class="number">4</span>).reshape((<span class="number">5</span>, <span class="number">4</span>)))</span><br><span class="line">sampler = np.random.permutation(<span class="number">5</span>)</span><br><span class="line">df.take(sampler)</span><br><span class="line"><span class="comment"># å¯ä»¥åœ¨Serieså’ŒDataFrameä¸Šä½¿ç”¨sampleæ–¹æ³•</span></span><br><span class="line">df.sample(n=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># è¦é€šè¿‡æ›¿æ¢çš„æ–¹å¼äº§ç”Ÿæ ·æœ¬ï¼ˆå…è®¸é‡å¤é€‰æ‹©ï¼‰ï¼Œå¯ä»¥ä¼ é€’replace=Trueåˆ°sample</span></span><br><span class="line">choices = pd.Series([<span class="number">5</span>, <span class="number">7</span>, <span class="number">-1</span>, <span class="number">6</span>, <span class="number">4</span>])</span><br><span class="line">draws = choices.sample(n=<span class="number">10</span>, replace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è®¡ç®—æŒ‡æ ‡-å“‘å˜é‡"><a href="#è®¡ç®—æŒ‡æ ‡-å“‘å˜é‡" class="headerlink" title="è®¡ç®—æŒ‡æ ‡/å“‘å˜é‡"></a>è®¡ç®—æŒ‡æ ‡/å“‘å˜é‡</h4><p>å¦ä¸€ç§å¸¸ç”¨äºç»Ÿè®¡å»ºæ¨¡æˆ–æœºå™¨å­¦ä¹ çš„è½¬æ¢æ–¹å¼æ˜¯ï¼šå°†åˆ†ç±»å˜é‡ï¼ˆcategorical variableï¼‰è½¬æ¢ä¸ºâ€œå“‘å˜é‡â€æˆ–â€œæŒ‡æ ‡çŸ©é˜µâ€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>],<span class="string">'data1'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line"><span class="comment"># ç»™æŒ‡æ ‡DataFrameçš„åˆ—åŠ ä¸Šä¸€ä¸ªå‰ç¼€ï¼Œä»¥ä¾¿èƒ½å¤Ÿè·Ÿå…¶ä»–æ•°æ®è¿›è¡Œåˆå¹¶</span></span><br><span class="line">dummies = pd.get_dummies(df[<span class="string">'key'</span>], prefix=<span class="string">'key'</span>)</span><br><span class="line">df_with_dummy = df[[<span class="string">'data1'</span>]].join(dummies)</span><br><span class="line"><span class="comment"># å¦‚æœDataFrameä¸­çš„æŸè¡ŒåŒå±äºå¤šä¸ªåˆ†ç±»ï¼Œåˆ™äº‹æƒ…å°±ä¼šæœ‰ç‚¹å¤æ‚</span></span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.random.seed(<span class="number">12345</span>)</span><br><span class="line">values = np.random.rand(<span class="number">10</span>)</span><br><span class="line">bins = [<span class="number">0</span>, <span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">1</span>]</span><br><span class="line">pd.get_dummies(pd.cut(values, bins))</span><br></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">val = <span class="string">'a,b,  guido'</span></span><br><span class="line">pieces = [x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> val.split(<span class="string">','</span>)]</span><br><span class="line"><span class="string">'::'</span>.join(pieces) <span class="comment"># ç­‰ä»·äº first + '::' + second + '::' + third</span></span><br><span class="line"><span class="comment"># å­ä¸²å®šä½</span></span><br><span class="line"><span class="string">'guido'</span> <span class="keyword">in</span> val</span><br><span class="line">val.index(<span class="string">','</span>) <span class="comment"># æ‰¾ä¸åˆ°å­—ç¬¦ä¸²ï¼Œindexå°†ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">val.find(<span class="string">':'</span>)  <span class="comment"># æ‰¾ä¸åˆ°è¿”å›-1</span></span><br><span class="line">val.count(<span class="string">','</span>)</span><br><span class="line">val.replace(<span class="string">','</span>, <span class="string">'::'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-087fe67bf6db0701.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d1f0d4ed3e895016.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h4><p>reæ¨¡å—çš„å‡½æ•°å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå¤§ç±»ï¼šæ¨¡å¼åŒ¹é…ã€æ›¿æ¢ä»¥åŠæ‹†åˆ†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">text = <span class="string">"foo    bar\t baz  \tqux"</span></span><br><span class="line">re.split(<span class="string">'\s+'</span>, text)</span><br><span class="line"><span class="comment"># è°ƒç”¨re.split('\s+',text)æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šå…ˆè¢«ç¼–è¯‘ï¼Œç„¶åå†åœ¨textä¸Šè°ƒç”¨å…¶splitæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœæ‰“ç®—å¯¹è®¸å¤šå­—ç¬¦ä¸²åº”ç”¨åŒä¸€æ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¼ºçƒˆå»ºè®®é€šè¿‡re.compileåˆ›å»ºregexå¯¹è±¡ã€‚è¿™æ ·å°†å¯ä»¥èŠ‚çœå¤§é‡çš„CPUæ—¶é—´ã€‚</span></span><br><span class="line">regex = re.compile(<span class="string">'\s+'</span>)</span><br><span class="line">regex.split(text)</span><br><span class="line">regex.findall(text)</span><br><span class="line"><span class="comment"># findallè¿”å›å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„åŒ¹é…é¡¹ï¼Œsearchè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚matchåªåŒ¹é…å­—ç¬¦ä¸²çš„é¦–éƒ¨</span></span><br><span class="line">text = <span class="string">"""Dave dave@google.com</span></span><br><span class="line"><span class="string">Steve steve@gmail.com</span></span><br><span class="line"><span class="string">Rob rob@gmail.com</span></span><br><span class="line"><span class="string">Ryan ryan@yahoo.com</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">pattern = <span class="string">r'[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]&#123;2,4&#125;'</span></span><br><span class="line"><span class="comment"># re.IGNORECASE makes the regex case-insensitive</span></span><br><span class="line">regex = re.compile(pattern, flags=re.IGNORECASE)</span><br><span class="line"></span><br><span class="line">regex.findall(text)</span><br><span class="line">m = regex.search(text)</span><br><span class="line"><span class="comment"># &lt;_sre.SRE_Match object; span=(5, 20), match='dave@google.com'&gt;</span></span><br><span class="line">text[m.start():m.end()]</span><br><span class="line">regex.match(text) <span class="comment"># ç»“æœä¸ºNone,åªåŒ¹é…å‡ºç°åœ¨å­—ç¬¦ä¸²å¼€å¤´çš„æ¨¡å¼</span></span><br><span class="line">regex.sub(<span class="string">'REDACTED'</span>, text)</span><br><span class="line"><span class="comment"># åˆ†æ®µçš„æ¨¡å¼</span></span><br><span class="line">pattern = <span class="string">r'([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.([A-Z]&#123;2,4&#125;)'</span></span><br><span class="line">m = regex.match(<span class="string">'wesm@bright.net'</span>)</span><br><span class="line">m.groups()</span><br><span class="line"><span class="comment"># ('wesm', 'bright', 'net')</span></span><br><span class="line">regex.findall(text) <span class="comment"># å¯¹äºå¸¦æœ‰åˆ†ç»„åŠŸèƒ½çš„æ¨¡å¼ï¼Œfindallè¿”å›ä¸€ä¸ªå…ƒç»„åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># subèƒ½é€šè¿‡è¯¸å¦‚\1ã€\2ä¹‹ç±»çš„ç‰¹æ®Šç¬¦å·è®¿é—®å„åŒ¹é…é¡¹ä¸­çš„åˆ†ç»„</span></span><br><span class="line">regex.sub(<span class="string">r'Username: \1, Domain: \2, Suffix: \3'</span>, text)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-efbb80a793759fc0.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°"><a href="#pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°"></a>pandasçš„çŸ¢é‡åŒ–å­—ç¬¦ä¸²å‡½æ•°</h4><p>é€šè¿‡data.mapï¼Œæ‰€æœ‰å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•éƒ½èƒ½è¢«åº”ç”¨äºï¼ˆä¼ å…¥lambdaè¡¨è¾¾å¼æˆ–å…¶ä»–å‡½æ•°ï¼‰å„ä¸ªå€¼ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨NAï¼ˆnullï¼‰å°±ä¼šæŠ¥é”™ã€‚</p>
<p>å«æœ‰å­—ç¬¦ä¸²çš„åˆ—æœ‰æ—¶è¿˜å«æœ‰ç¼ºå¤±æ•°æ®,ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSeriesæœ‰ä¸€äº›èƒ½å¤Ÿè·³è¿‡NAå€¼çš„é¢å‘æ•°ç»„æ–¹æ³•ï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚é€šè¿‡Seriesçš„strå±æ€§å³å¯è®¿é—®è¿™äº›æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.str.contains(<span class="string">'gmail'</span>)</span><br><span class="line">data.str.findall(pattern, flags=re.IGNORECASE)</span><br><span class="line">matches = data.str.match(pattern, flags=re.IGNORECASE)</span><br><span class="line">data.str[:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-a634364ed6d5d5c5.png?imageMogr2/auto-orient/strip|imageView2/2/w/870/format/webp" alt="img"></p>
<h2 id="ç¬¬8ç« -æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘"><a href="#ç¬¬8ç« -æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘" class="headerlink" title="ç¬¬8ç«  æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘"></a>ç¬¬8ç«  æ•°æ®è§„æ•´ï¼šèšåˆã€åˆå¹¶å’Œé‡å¡‘</h2><h3 id="å±‚æ¬¡åŒ–ç´¢å¼•"><a href="#å±‚æ¬¡åŒ–ç´¢å¼•" class="headerlink" title="å±‚æ¬¡åŒ–ç´¢å¼•"></a>å±‚æ¬¡åŒ–ç´¢å¼•</h3><p>å±‚æ¬¡åŒ–ç´¢å¼•ï¼ˆhierarchical indexingï¼‰æ˜¯pandasçš„ä¸€é¡¹é‡è¦åŠŸèƒ½ï¼Œåœ¨ä¸€ä¸ªè½´ä¸Šæ‹¥æœ‰å¤šä¸ªï¼ˆä¸¤ä¸ªä»¥ä¸Šï¼‰ç´¢å¼•çº§åˆ«ï¼Œä»¥ä½ç»´åº¦å½¢å¼å¤„ç†é«˜ç»´åº¦æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.Series(np.random.randn(<span class="number">9</span>),index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="comment"># å¤–å±‚æ“ä½œ</span></span><br><span class="line">data[<span class="string">'b'</span>]</span><br><span class="line"><span class="comment"># å†…å±‚æ“ä½œ</span></span><br><span class="line">data.loc[:, <span class="number">2</span>]</span><br><span class="line"><span class="comment"># é€šè¿‡unstackæ–¹æ³•å°†è¿™æ®µæ•°æ®é‡æ–°å®‰æ’åˆ°ä¸€ä¸ªDataFrameä¸­</span></span><br><span class="line">data.unstack()</span><br><span class="line">data.unstack().stack()</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">å¯¹äºä¸€ä¸ªDataFrameï¼Œæ¯æ¡è½´éƒ½å¯ä»¥æœ‰åˆ†å±‚ç´¢å¼•ï¼š</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),index=[[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]],columns=[[<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Colorado'</span>],[<span class="string">'Green'</span>, <span class="string">'Red'</span>, <span class="string">'Green'</span>]])</span><br><span class="line"><span class="comment"># å„å±‚éƒ½å¯ä»¥æœ‰åå­—</span></span><br><span class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</span><br><span class="line">frame.columns.names = [<span class="string">'state'</span>, <span class="string">'color'</span>]</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">frame[<span class="string">'Ohio'</span>]</span><br><span class="line">frame.loc[<span class="string">'a'</span>]</span><br></pre></td></tr></table></figure>
<h4 id="é‡æ’ä¸åˆ†çº§æ’åº"><a href="#é‡æ’ä¸åˆ†çº§æ’åº" class="headerlink" title="é‡æ’ä¸åˆ†çº§æ’åº"></a>é‡æ’ä¸åˆ†çº§æ’åº</h4><p>swaplevelæ¥å—ä¸¤ä¸ªçº§åˆ«ç¼–å·æˆ–åç§°ï¼Œå¹¶è¿”å›ä¸€ä¸ªäº’æ¢äº†çº§åˆ«çš„æ–°å¯¹è±¡ï¼ˆä½†æ•°æ®ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame.index.names = [<span class="string">'key1'</span>, <span class="string">'key2'</span>]</span><br><span class="line">frame.columns.names = [<span class="string">'state'</span>, <span class="string">'color'</span>]</span><br><span class="line"><span class="comment"># sort_indexåˆ™æ ¹æ®å•ä¸ªçº§åˆ«ä¸­çš„å€¼å¯¹æ•°æ®è¿›è¡Œæ’åº</span></span><br><span class="line">frame.sort_index(level=<span class="number">1</span>)</span><br><span class="line">frame.swaplevel(<span class="number">0</span>, <span class="number">1</span>).sort_index(level=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡"><a href="#æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡" class="headerlink" title="æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡"></a>æ ¹æ®çº§åˆ«æ±‡æ€»ç»Ÿè®¡</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®è¡Œæˆ–åˆ—ä¸Šçš„çº§åˆ«æ¥è¿›è¡Œæ±‚å’Œ</span></span><br><span class="line">frame.sum(level=<span class="string">'key2'</span>)</span><br><span class="line">frame.sum(level=<span class="string">'color'</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•"><a href="#ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•" class="headerlink" title="ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•"></a>ä½¿ç”¨DataFrameçš„åˆ—è¿›è¡Œç´¢å¼•</h4><p>DataFrameçš„set_indexå‡½æ•°ä¼šå°†å…¶ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è½¬æ¢ä¸ºè¡Œç´¢å¼•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„DataFrame</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">'a'</span>: range(<span class="number">7</span>), <span class="string">'b'</span>: range(<span class="number">7</span>, <span class="number">0</span>, <span class="number">-1</span>),<span class="string">'c'</span>: [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'two'</span>], <span class="string">'d'</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">frame2 = frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>])</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œé‚£äº›åˆ—ä¼šä»DataFrameä¸­ç§»é™¤ï¼Œä½†ä¹Ÿå¯ä»¥å°†å…¶ä¿ç•™ä¸‹æ¥</span></span><br><span class="line">frame.set_index([<span class="string">'c'</span>, <span class="string">'d'</span>], drop=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># reset_indexçš„åŠŸèƒ½è·Ÿset_indexåˆšå¥½ç›¸åï¼Œå±‚æ¬¡åŒ–ç´¢å¼•çš„çº§åˆ«ä¼šè¢«è½¬ç§»åˆ°åˆ—é‡Œé¢</span></span><br><span class="line">frame2.reset_index()</span><br></pre></td></tr></table></figure>
<h3 id="åˆå¹¶æ•°æ®é›†"><a href="#åˆå¹¶æ•°æ®é›†" class="headerlink" title="åˆå¹¶æ•°æ®é›†"></a>åˆå¹¶æ•°æ®é›†</h3><p>pandaså¯¹è±¡ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ä¸€äº›æ–¹å¼è¿›è¡Œåˆå¹¶ï¼š</p>
<ul>
<li>pandas.mergeå¯æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªé”®å°†ä¸åŒDataFrameä¸­çš„è¡Œè¿æ¥èµ·æ¥ã€‚</li>
<li>pandas.concatå¯ä»¥æ²¿ç€ä¸€æ¡è½´å°†å¤šä¸ªå¯¹è±¡å †å åˆ°ä¸€èµ·ã€‚</li>
<li>å®ä¾‹æ–¹æ³•combine_firstå¯ä»¥å°†é‡å¤æ•°æ®æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡ä¸­çš„å€¼å¡«å……å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„ç¼ºå¤±å€¼ã€‚</li>
</ul>
<h4 id="æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶"><a href="#æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶" class="headerlink" title="æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶"></a>æ•°æ®åº“é£æ ¼çš„DataFrameåˆå¹¶</h4><p>æ•°æ®é›†çš„åˆå¹¶ï¼ˆmergeï¼‰æˆ–è¿æ¥ï¼ˆjoinï¼‰è¿ç®—æ˜¯é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªé”®å°†è¡Œè¿æ¥èµ·æ¥çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>],<span class="string">'data1'</span>: range(<span class="number">7</span>)&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>],<span class="string">'data2'</span>: range(<span class="number">3</span>)&#125;)</span><br><span class="line"><span class="comment"># å¤šå¯¹ä¸€çš„åˆå¹¶</span></span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œmergeä¼šå°†é‡å åˆ—çš„åˆ—åå½“åšé”®</span></span><br><span class="line">pd.merge(df1, df2)</span><br><span class="line"><span class="comment"># åˆ—åå¯ä»¥æŒ‡å®š</span></span><br><span class="line">pd.merge(df1, df2, on=<span class="string">'key'</span>)</span><br><span class="line"><span class="comment">#å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„åˆ—åä¸åŒï¼Œä¹Ÿå¯ä»¥åˆ†åˆ«è¿›è¡ŒæŒ‡å®š</span></span><br><span class="line">pd.merge(df3, df4, left_on=<span class="string">'lkey'</span>, right_on=<span class="string">'rkey'</span>)</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œmergeåšçš„æ˜¯â€œå†…è¿æ¥â€ï¼›ç»“æœä¸­çš„é”®æ˜¯äº¤é›†</span></span><br><span class="line"><span class="comment"># ä»–æ–¹å¼è¿˜æœ‰"left"ã€"right"ä»¥åŠ"outer"ã€‚å¤–è¿æ¥æ±‚å–çš„æ˜¯é”®çš„å¹¶é›†ï¼Œç»„åˆäº†å·¦è¿æ¥å’Œå³è¿æ¥çš„æ•ˆæœ</span></span><br><span class="line">pd.merge(df1, df2, how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e49b3341f4a3c90e.png?imageMogr2/auto-orient/strip|imageView2/2/w/739/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šå¯¹å¤šçš„åˆå¹¶</span></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>], <span class="string">'data1'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>],<span class="string">'data2'</span>: range(<span class="number">5</span>)&#125;)</span><br><span class="line">pd.merge(df1, df2, on=<span class="string">'key'</span>, how=<span class="string">'left'</span>)</span><br><span class="line"><span class="comment"># å¤šå¯¹å¤šè¿æ¥äº§ç”Ÿçš„æ˜¯è¡Œçš„ç¬›å¡å°”ç§¯</span></span><br><span class="line"><span class="comment"># ç”±äºå·¦è¾¹çš„DataFrameæœ‰3ä¸ª"b"è¡Œï¼Œå³è¾¹çš„æœ‰2ä¸ªï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœä¸­å°±æœ‰6ä¸ª"b"è¡Œã€‚</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®å¤šä¸ªé”®è¿›è¡Œåˆå¹¶ï¼Œä¼ å…¥ä¸€ä¸ªç”±åˆ—åç»„æˆçš„åˆ—è¡¨</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'foo'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], <span class="string">'key2'</span>: [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>], <span class="string">'lval'</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'foo'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'bar'</span>],<span class="string">'key2'</span>: [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>],<span class="string">'rval'</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]&#125;)</span><br><span class="line">pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p>åˆå¹¶è¿ç®—å¯¹é‡å¤åˆ—åçš„å¤„ç†ï¼šmergeæœ‰ä¸€ä¸ªæ›´å®ç”¨çš„suffixesé€‰é¡¹ï¼Œç”¨äºæŒ‡å®šé™„åŠ åˆ°å·¦å³ä¸¤ä¸ªDataFrameå¯¹è±¡çš„é‡å åˆ—åä¸Šçš„å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.merge(left, right, on=<span class="string">'key1'</span>)</span><br><span class="line">pd.merge(left, right, on=<span class="string">'key1'</span>, suffixes=(<span class="string">'_left'</span>, <span class="string">'_right'</span>))</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-35ca716a4f1b8475.png?imageMogr2/auto-orient/strip|imageView2/2/w/1180/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c86672e733ceccd9.png?imageMogr2/auto-orient/strip|imageView2/2/w/1180/format/webp" alt="img"></p>
<h4 id="ç´¢å¼•ä¸Šçš„åˆå¹¶"><a href="#ç´¢å¼•ä¸Šçš„åˆå¹¶" class="headerlink" title="ç´¢å¼•ä¸Šçš„åˆå¹¶"></a>ç´¢å¼•ä¸Šçš„åˆå¹¶</h4><p>æœ‰æ—¶å€™ï¼ŒDataFrameä¸­çš„è¿æ¥é”®ä½äºå…¶ç´¢å¼•ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä¼ å…¥left_index=Trueæˆ–right_index=Trueï¼ˆæˆ–ä¸¤ä¸ªéƒ½ä¼ ï¼‰ä»¥è¯´æ˜ç´¢å¼•åº”è¯¥è¢«ç”¨ä½œè¿æ¥é”®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">left1 = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>],<span class="string">'value'</span>: range(<span class="number">6</span>)&#125;)</span><br><span class="line">right1 = pd.DataFrame(&#123;<span class="string">'group_val'</span>: [<span class="number">3.5</span>, <span class="number">7</span>]&#125;, index=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line">pd.merge(left1, right1, left_on=<span class="string">'key'</span>, right_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå±‚æ¬¡åŒ–ç´¢å¼•çš„æ•°æ®ï¼Œç´¢å¼•çš„åˆå¹¶é»˜è®¤æ˜¯å¤šé”®åˆå¹¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lefth = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>, <span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>],<span class="string">'key2'</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>], <span class="string">'data'</span>: np.arange(<span class="number">5.</span>)&#125;)</span><br><span class="line">righth = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">6</span>, <span class="number">2</span>)),index=[[<span class="string">'Nevada'</span>, <span class="string">'Nevada'</span>, <span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>,<span class="string">'Ohio'</span>, <span class="string">'Ohio'</span>],[<span class="number">2001</span>, <span class="number">2000</span>, <span class="number">2000</span>, <span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>]],  columns=[<span class="string">'event1'</span>, <span class="string">'event2'</span>])</span><br><span class="line"><span class="comment"># ä»¥åˆ—è¡¨çš„å½¢å¼æŒ‡æ˜ç”¨ä½œåˆå¹¶é”®çš„å¤šä¸ªåˆ—</span></span><br><span class="line">pd.merge(lefth, righth, left_on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], right_index=<span class="literal">True</span>)</span><br><span class="line">pd.merge(lefth, righth, left_on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], right_index=<span class="literal">True</span>,how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<p>DataFrameè¿˜æœ‰ä¸€ä¸ªä¾¿æ·çš„joinå®ä¾‹æ–¹æ³•ï¼Œå®ƒèƒ½æ›´ä¸ºæ–¹ä¾¿åœ°å®ç°æŒ‰ç´¢å¼•åˆå¹¶ã€‚å®ƒè¿˜å¯ç”¨äºåˆå¹¶å¤šä¸ªå¸¦æœ‰ç›¸åŒæˆ–ç›¸ä¼¼ç´¢å¼•çš„DataFrameå¯¹è±¡ï¼Œä½†è¦æ±‚æ²¡æœ‰é‡å çš„åˆ—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŒæ—¶ä½¿ç”¨åˆå¹¶åŒæ–¹çš„ç´¢å¼•</span></span><br><span class="line">pd.merge(left2, right2, how=<span class="string">'outer'</span>, left_index=<span class="literal">True</span>, right_index=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># joiné»˜è®¤ä½¿ç”¨çš„æ˜¯å·¦è¿æ¥ï¼Œä¿ç•™å·¦è¾¹è¡¨çš„è¡Œç´¢å¼•</span></span><br><span class="line">left2.join(right2, how=<span class="string">'outer'</span>)</span><br><span class="line"><span class="comment"># æ”¯æŒåœ¨è°ƒç”¨çš„DataFrameçš„åˆ—ä¸Šï¼Œè¿æ¥ä¼ é€’çš„DataFrameç´¢å¼•</span></span><br><span class="line">left1.join(right1, on=<span class="string">'key'</span>)</span><br><span class="line"><span class="comment"># ç›¸å½“äº</span></span><br><span class="line">pd.merge(left1,right1, left_on=<span class="string">'key'</span>, right_index=<span class="literal">True</span>,how=<span class="string">'outer'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="è½´å‘è¿æ¥"><a href="#è½´å‘è¿æ¥" class="headerlink" title="è½´å‘è¿æ¥"></a>è½´å‘è¿æ¥</h4><p>è¿æ¥ï¼ˆconcatenationï¼‰ã€ç»‘å®šï¼ˆbindingï¼‰æˆ–å †å ï¼ˆstackingï¼‰ã€‚NumPyçš„concatenationå‡½æ•°å¯ä»¥ç”¨NumPyæ•°ç»„æ¥åš</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">np.concatenate([arr, arr], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºpandaså¯¹è±¡ï¼ˆå¦‚Serieså’ŒDataFrameï¼‰ï¼Œè¿˜éœ€è¦è€ƒè™‘ä»¥ä¸‹è¿™äº›æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœå¯¹è±¡åœ¨å…¶å®ƒè½´ä¸Šçš„ç´¢å¼•ä¸åŒï¼Œåº”è¯¥åˆå¹¶è¿™äº›è½´çš„ä¸åŒå…ƒç´ è¿˜æ˜¯åªä½¿ç”¨äº¤é›†ï¼Ÿ</li>
<li>è¿æ¥çš„æ•°æ®é›†æ˜¯å¦éœ€è¦åœ¨ç»“æœå¯¹è±¡ä¸­å¯è¯†åˆ«ï¼Ÿ</li>
<li>è¿æ¥è½´ä¸­ä¿å­˜çš„æ•°æ®æ˜¯å¦éœ€è¦ä¿ç•™ï¼Ÿè®¸å¤šæƒ…å†µä¸‹ï¼ŒDataFrameé»˜è®¤çš„æ•´æ•°æ ‡ç­¾æœ€å¥½åœ¨è¿æ¥æ—¶åˆ æ‰ã€‚</li>
</ul>
<p>pandasçš„concatå‡½æ•°æä¾›äº†ä¸€ç§èƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜çš„å¯é æ–¹å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s1 = pd.Series([<span class="number">0</span>, <span class="number">1</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line">s2 = pd.Series([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], index=[<span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>])</span><br><span class="line">s3 = pd.Series([<span class="number">5</span>, <span class="number">6</span>], index=[<span class="string">'f'</span>, <span class="string">'g'</span>])</span><br><span class="line">pd.concat([s1, s2, s3])</span><br><span class="line"><span class="comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œconcatæ˜¯åœ¨axis=0ä¸Šå·¥ä½œçš„ï¼Œæœ€ç»ˆäº§ç”Ÿä¸€ä¸ªæ–°çš„Seriesã€‚å¦‚æœä¼ å…¥axis=1ï¼Œåˆ™ç»“æœå°±ä¼šå˜æˆä¸€ä¸ªDataFrameï¼ˆaxis=1æ˜¯åˆ—ï¼‰</span></span><br><span class="line">s4 = pd.concat([s1, s3])</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>)</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>, join=<span class="string">'inner'</span>)</span><br><span class="line">pd.concat([s1, s4], axis=<span class="number">1</span>, join_axes=[[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>]])</span><br><span class="line"><span class="comment"># åœ¨è¿æ¥è½´ä¸Šåˆ›å»ºä¸€ä¸ªå±‚æ¬¡åŒ–ç´¢å¼•</span></span><br><span class="line">result = pd.concat([s1, s1, s3], keys=[<span class="string">'one'</span>,<span class="string">'two'</span>, <span class="string">'three'</span>])</span><br><span class="line">pd.concat([s1, s2, s3], axis=<span class="number">1</span>, keys=[<span class="string">'one'</span>,<span class="string">'two'</span>, <span class="string">'three'</span>])</span><br><span class="line"><span class="comment"># å¦‚æœä¼ å…¥çš„ä¸æ˜¯åˆ—è¡¨è€Œæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œåˆ™å­—å…¸çš„é”®å°±ä¼šè¢«å½“åškeysé€‰é¡¹çš„å€¼</span></span><br><span class="line">pd.concat(&#123;<span class="string">'level1'</span>: df1, <span class="string">'level2'</span>: df2&#125;, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ç”¨nameså‚æ•°å‘½ååˆ›å»ºçš„è½´çº§åˆ«</span></span><br><span class="line">pd.concat([df1, df2], axis=<span class="number">1</span>, keys=[<span class="string">'level1'</span>, <span class="string">'level2'</span>],names=[<span class="string">'upper'</span>, <span class="string">'lower'</span>])</span><br><span class="line"><span class="comment"># DataFrameçš„è¡Œç´¢å¼•ä¸åŒ…å«ä»»ä½•ç›¸å…³æ•°æ®ï¼Œç›´æ¥åˆå¹¶index</span></span><br><span class="line">pd.concat([df1, df2], ignore_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-339436563b519415.png?imageMogr2/auto-orient/strip|imageView2/2/w/1167/format/webp" alt="img"></p>
<h4 id="åˆå¹¶é‡å æ•°æ®"><a href="#åˆå¹¶é‡å æ•°æ®" class="headerlink" title="åˆå¹¶é‡å æ•°æ®"></a>åˆå¹¶é‡å æ•°æ®</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = pd.Series([np.nan, <span class="number">2.5</span>, np.nan, <span class="number">3.5</span>, <span class="number">4.5</span>, np.nan], index=[<span class="string">'f'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>])</span><br><span class="line">b = pd.Series(np.arange(len(a), dtype=np.float64), index=[<span class="string">'f'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>])</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬11ç« -æ—¶é—´åºåˆ—"><a href="#ç¬¬11ç« -æ—¶é—´åºåˆ—" class="headerlink" title="ç¬¬11ç«  æ—¶é—´åºåˆ—"></a>ç¬¬11ç«  æ—¶é—´åºåˆ—</h2><p>æ—¶é—´åºåˆ—æ•°æ®çš„æ„ä¹‰å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>æ—¶é—´æˆ³ï¼ˆtimestampï¼‰ï¼Œç‰¹å®šçš„æ—¶åˆ»ã€‚</li>
<li>å›ºå®šæ—¶æœŸï¼ˆperiodï¼‰ï¼Œå¦‚2007å¹´1æœˆæˆ–2010å¹´å…¨å¹´ã€‚</li>
<li>æ—¶é—´é—´éš”ï¼ˆintervalï¼‰ï¼Œç”±èµ·å§‹å’Œç»“æŸæ—¶é—´æˆ³è¡¨ç¤ºã€‚æ—¶æœŸï¼ˆperiodï¼‰å¯ä»¥è¢«çœ‹åšé—´éš”ï¼ˆintervalï¼‰çš„ç‰¹ä¾‹ã€‚</li>
<li>å®éªŒæˆ–è¿‡ç¨‹æ—¶é—´ï¼Œæ¯ä¸ªæ—¶é—´ç‚¹éƒ½æ˜¯ç›¸å¯¹äºç‰¹å®šèµ·å§‹æ—¶é—´çš„ä¸€ä¸ªåº¦é‡ã€‚ä¾‹å¦‚ï¼Œä»æ”¾å…¥çƒ¤ç®±æ—¶èµ·ï¼Œæ¯ç§’é’Ÿé¥¼å¹²çš„ç›´å¾„ã€‚</li>
</ul>
<h3 id="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·"><a href="#æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·"></a>æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># ä»¥æ¯«ç§’å½¢å¼å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">now = datetime.now() <span class="comment"># datetime.datetime(2017, 9, 25, 14, 5, 52, 72973)</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line">start = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>)</span><br><span class="line">datetime.timedelta(<span class="number">926</span>, <span class="number">56700</span>) <span class="comment"># day and second</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-4af261a305a70aeb.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h4 id="å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢"><a href="#å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢"></a>å­—ç¬¦ä¸²å’Œdatetimeçš„ç›¸äº’è½¬æ¢</h4><p><code>datetime.strptime</code>æ˜¯é€šè¿‡å·²çŸ¥æ ¼å¼è¿›è¡Œæ—¥æœŸè§£æçš„æœ€ä½³æ–¹å¼ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦ç¼–å†™æ ¼å¼å®šä¹‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stamp = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">str(stamp) <span class="comment"># '2011-01-03 00:00:00'</span></span><br><span class="line">stamp.strftime(<span class="string">'%Y-%m-%d'</span>) <span class="comment">#'2011-01-03'</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-50c751823754df58.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-de0181e1f6b45eaf.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">value = <span class="string">'2011-01-03'</span></span><br><span class="line">datetime.strptime(value, <span class="string">'%Y-%m-%d'</span>) <span class="comment"># datetime.datetime(2011, 1, 3, 0, 0)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> dateutil.parser <span class="keyword">import</span> parse</span><br><span class="line">parse(<span class="string">'2011-01-03'</span>) <span class="comment"># datetime.datetime(2011, 1, 3, 0, 0)</span></span><br><span class="line">parse(<span class="string">'Jan 31, 1997 10:45 PM'</span>)</span><br><span class="line">parse(<span class="string">'6/12/2011'</span>, dayfirst=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›å¸¸è§çš„æ—¥æœŸæ ¼å¼å¯ä»¥ç”¨dateutilè¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…ä¸­çš„parser.parseæ–¹æ³•ã€‚</p>
<p>pandasé€šå¸¸æ˜¯ç”¨äºå¤„ç†æˆç»„æ—¥æœŸçš„ï¼Œä¸ç®¡è¿™äº›æ—¥æœŸæ˜¯DataFrameçš„è½´ç´¢å¼•è¿˜æ˜¯åˆ—ã€‚to_datetimeæ–¹æ³•å¯ä»¥è§£æå¤šç§ä¸åŒçš„æ—¥æœŸè¡¨ç¤ºå½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">datestrs = [<span class="string">'2011-07-06 12:00:00'</span>, <span class="string">'2011-08-06 00:00:00'</span>]</span><br><span class="line">pd.to_datetime(datestrs) <span class="comment"># DatetimeIndex(['2011-07-06 12:00:00', '2011-08-06 00:00:00'], dtype='datetime64[ns]', freq=None)</span></span><br></pre></td></tr></table></figure>
<p>NaTï¼ˆNot a Timeï¼‰æ˜¯pandasä¸­æ—¶é—´æˆ³æ•°æ®çš„nullå€¼ã€‚</p>
<ul>
<li><p>æ³¨æ„ï¼šdateutil.parseræ˜¯ä¸€ä¸ªå®ç”¨ä½†ä¸å®Œç¾çš„å·¥å…·ã€‚æ¯”å¦‚è¯´ï¼Œå®ƒä¼šæŠŠä¸€äº›åŸæœ¬ä¸æ˜¯æ—¥æœŸçš„å­—ç¬¦ä¸²è®¤ä½œæ˜¯æ—¥æœŸï¼ˆæ¯”å¦‚â€42â€ä¼šè¢«è§£æä¸º2042å¹´çš„ä»Šå¤©ï¼‰ã€‚</p>
<p>ç‰¹å®šäºå½“å‰ç¯å¢ƒï¼ˆä½äºä¸åŒå›½å®¶æˆ–ä½¿ç”¨ä¸åŒè¯­è¨€çš„ç³»ç»Ÿï¼‰çš„æ—¥æœŸæ ¼å¼</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-cf0119398273e2b0.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h3 id="æ—¶é—´åºåˆ—åŸºç¡€"><a href="#æ—¶é—´åºåˆ—åŸºç¡€" class="headerlink" title="æ—¶é—´åºåˆ—åŸºç¡€"></a>æ—¶é—´åºåˆ—åŸºç¡€</h3><p>pandasç”¨NumPyçš„datetime64æ•°æ®ç±»å‹ä»¥çº³ç§’å½¢å¼å­˜å‚¨æ—¶é—´æˆ³ã€‚</p>
<p>datetimeå¯¹è±¡ç”¨ä½œindexæ—¶ï¼Œå®é™…ä¸Šè¢«æ”¾åœ¨ä¸€ä¸ªDatetimeIndexä¸­ï¼Œå…¶ä¸­çš„å„ä¸ªæ ‡é‡å€¼æ˜¯pandasçš„Timestampå¯¹è±¡ã€‚</p>
<h4 id="ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ "><a href="#ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ " class="headerlink" title="ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ "></a>ç´¢å¼•ã€é€‰å–ã€å­é›†æ„é€ </h4><p>æ ¹æ®æ ‡ç­¾ç´¢å¼•é€‰å–æ•°æ®æ—¶ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stamp = ts.index[<span class="number">2</span>] </span><br><span class="line">ts[stamp]</span><br><span class="line"><span class="comment"># ä¸‹é¢è¿™ç§æ ¼å¼ä¹Ÿå¯ä»¥</span></span><br><span class="line">ts[<span class="string">'1/10/2011'</span>]</span><br><span class="line">ts[<span class="string">'20110110'</span>]</span><br><span class="line"><span class="comment"># å¯¹äºè¾ƒé•¿çš„æ—¶é—´åºåˆ—ï¼Œåªéœ€ä¼ å…¥â€œå¹´â€æˆ–â€œå¹´æœˆâ€å³å¯è½»æ¾é€‰å–æ•°æ®çš„åˆ‡ç‰‡</span></span><br><span class="line">longer_ts = pd.Series(np.random.randn(<span class="number">1000</span>),index=pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">1000</span>))</span><br><span class="line">longer_ts[<span class="string">'2001'</span>]</span><br><span class="line">longer_ts[<span class="string">'2001-05'</span>]</span><br><span class="line"><span class="comment"># ä½¿ç”¨datetimeå¯¹è±¡è¿›è¡Œåˆ‡ç‰‡</span></span><br><span class="line">ts[datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>):]</span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥ç”¨ä¸å­˜åœ¨äºè¯¥æ—¶é—´åºåˆ—ä¸­çš„æ—¶é—´æˆ³å¯¹å…¶è¿›è¡Œåˆ‡ç‰‡ï¼ˆå³èŒƒå›´æŸ¥è¯¢ï¼‰</span></span><br><span class="line">ts[<span class="string">'1/6/2011'</span>:<span class="string">'1/11/2011'</span>] <span class="comment"># äº§ç”Ÿçš„æ˜¯åŸæ—¶é—´åºåˆ—çš„è§†å›¾</span></span><br><span class="line">ts.truncate(after=<span class="string">'1/9/2011'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—"><a href="#å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—" class="headerlink" title="å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—"></a>å¸¦æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—</h4><p>å¤šä¸ªè§‚æµ‹æ•°æ®è½åœ¨åŒä¸€ä¸ªæ—¶é—´ç‚¹ä¸Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dates = pd.DatetimeIndex([<span class="string">'1/1/2000'</span>, <span class="string">'1/2/2000'</span>, <span class="string">'1/2/2000'</span>,<span class="string">'1/2/2000'</span>, <span class="string">'1/3/2000'</span>])</span><br><span class="line">dup_ts = pd.Series(np.arange(<span class="number">5</span>), index=dates)</span><br><span class="line">dup_ts.index.is_unique</span><br><span class="line"><span class="comment"># å¯¹å…·æœ‰éå”¯ä¸€æ—¶é—´æˆ³çš„æ•°æ®è¿›è¡Œèšåˆ</span></span><br><span class="line">grouped = dup_ts.groupby(level=<span class="number">0</span>)</span><br><span class="line">grouped.mean()</span><br><span class="line">grouped.count()</span><br></pre></td></tr></table></figure>
<h3 id="æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨"><a href="#æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨" class="headerlink" title="æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨"></a>æ—¥æœŸçš„èŒƒå›´ã€é¢‘ç‡ä»¥åŠç§»åŠ¨</h3><p>pandasä¸­çš„åŸç”Ÿæ—¶é—´åºåˆ—æ²¡æœ‰å›ºå®šçš„é¢‘ç‡,ä¸€èˆ¬è¢«è®¤ä¸ºæ˜¯ä¸è§„åˆ™çš„ã€‚ä½†pandasæœ‰ä¸€æ•´å¥—æ ‡å‡†æ—¶é—´åºåˆ—é¢‘ç‡ä»¥åŠç”¨äºé‡é‡‡æ ·ã€é¢‘ç‡æ¨æ–­ã€ç”Ÿæˆå›ºå®šé¢‘ç‡æ—¥æœŸèŒƒå›´çš„å·¥å…·ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">resampler = ts.resample(<span class="string">'D'</span>)</span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²â€œDâ€æ˜¯æ¯å¤©çš„æ„æ€</span></span><br></pre></td></tr></table></figure>
<h4 id="ç”Ÿæˆæ—¥æœŸèŒƒå›´"><a href="#ç”Ÿæˆæ—¥æœŸèŒƒå›´" class="headerlink" title="ç”Ÿæˆæ—¥æœŸèŒƒå›´"></a>ç”Ÿæˆæ—¥æœŸèŒƒå›´</h4><p><code>pandas.date_range</code>å¯ç”¨äºæ ¹æ®æŒ‡å®šçš„é¢‘ç‡ç”ŸæˆæŒ‡å®šé•¿åº¦çš„DatetimeIndex.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2012-04-01'</span>, <span class="string">'2012-06-01'</span>)</span><br><span class="line">pd.date_range(start=<span class="string">'2012-04-01'</span>, periods=<span class="number">20</span>)</span><br><span class="line">pd.date_range(end=<span class="string">'2012-06-01'</span>, periods=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªç”±æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥ç»„æˆçš„æ—¥æœŸç´¢å¼•</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-12-01'</span>, freq=<span class="string">'BM'</span>) <span class="comment">#"BM"é¢‘ç‡business end of month</span></span><br></pre></td></tr></table></figure>
<p>date_rangeé»˜è®¤ä¼šä¿ç•™èµ·å§‹å’Œç»“æŸæ—¶é—´æˆ³çš„æ—¶é—´ä¿¡æ¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pd.date_range(<span class="string">'2012-05-02 12:56:31'</span>, periods=<span class="number">5</span>)</span><br><span class="line"><span class="comment"># æ¯ä¸ªæ—¥æœŸéƒ½æœ‰12:56:31,å¯ä»¥å…³æ‰</span></span><br><span class="line">pd.date_range(<span class="string">'2012-05-02 12:56:31'</span>, periods=<span class="number">5</span>, normalize=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h4 id="é¢‘ç‡å’Œæ—¥æœŸåç§»é‡"><a href="#é¢‘ç‡å’Œæ—¥æœŸåç§»é‡" class="headerlink" title="é¢‘ç‡å’Œæ—¥æœŸåç§»é‡"></a>é¢‘ç‡å’Œæ—¥æœŸåç§»é‡</h4><p>pandasä¸­çš„é¢‘ç‡æ˜¯ç”±ä¸€ä¸ªåŸºç¡€é¢‘ç‡ï¼ˆbase frequencyï¼‰å’Œä¸€ä¸ªä¹˜æ•°ç»„æˆçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> Hour, Minute</span><br><span class="line">hour = Hour()</span><br><span class="line">four_hours = Hour(<span class="number">4</span>)</span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨åˆ«å"H"æˆ–"4H"</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-01-03 23:59'</span>, freq=<span class="string">'4h'</span>)</span><br><span class="line"><span class="comment"># åç§»é‡å¯¹è±¡éƒ½å¯é€šè¿‡åŠ æ³•è¿›è¡Œè¿æ¥</span></span><br><span class="line">Hour(<span class="number">2</span>) + Minute(<span class="number">30</span>) <span class="comment"># &lt;150 * Minutes&gt;</span></span><br><span class="line"><span class="comment"># ä¼ å…¥é¢‘ç‡å­—ç¬¦ä¸²</span></span><br><span class="line">pd.date_range(<span class="string">'2000-01-01'</span>, periods=<span class="number">10</span>, freq=<span class="string">'1h30min'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-c8614ddbd10793ca.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-8da46ba96544b071.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-3ca410609195edc4.png?imageMogr2/auto-orient/strip|imageView2/2/w/554/format/webp" alt="img"></p>
<h4 id="WOMæ—¥æœŸ"><a href="#WOMæ—¥æœŸ" class="headerlink" title="WOMæ—¥æœŸ"></a>WOMæ—¥æœŸ</h4><p>WOMï¼ˆWeek Of Monthï¼‰æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„é¢‘ç‡ç±»ï¼Œè·å¾—è¯¸å¦‚â€œæ¯æœˆç¬¬3ä¸ªæ˜ŸæœŸäº”â€ä¹‹ç±»çš„æ—¥æœŸã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'2012-01-01'</span>, <span class="string">'2012-09-01'</span>, freq=<span class="string">'WOM-3FRI'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®"><a href="#ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®" class="headerlink" title="ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®"></a>ç§»åŠ¨ï¼ˆè¶…å‰å’Œæ»åï¼‰æ•°æ®</h4><p>ç§»åŠ¨ï¼ˆshiftingï¼‰æŒ‡çš„æ˜¯æ²¿ç€æ—¶é—´è½´å°†æ•°æ®å‰ç§»æˆ–åç§»ã€‚Serieså’ŒDataFrameéƒ½æœ‰shiftæ–¹æ³•ç”¨äºæ‰§è¡Œå•çº¯çš„å‰ç§»æˆ–åç§»æ“ä½œï¼Œ<strong>ä¿æŒç´¢å¼•ä¸å˜</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ts = pd.Series(np.random.randn(<span class="number">4</span>),index=pd.date_range(<span class="string">'1/1/2000'</span>, periods=<span class="number">4</span>, freq=<span class="string">'M'</span>))</span><br><span class="line"><span class="comment"># æ•°æ®ä½ç§»ï¼Œä¼šåœ¨æ—¶é—´åºåˆ—çš„å‰é¢æˆ–åé¢äº§ç”Ÿç¼ºå¤±æ•°æ®</span></span><br><span class="line">ts.shift(<span class="number">2</span>)</span><br><span class="line">ts.shift(<span class="number">-2</span>)</span><br><span class="line"><span class="comment"># å®ç°å¯¹æ—¶é—´æˆ³è¿›è¡Œä½ç§»è€Œä¸æ˜¯å¯¹æ•°æ®è¿›è¡Œç®€å•ä½ç§»</span></span><br><span class="line">ts.shift(<span class="number">2</span>, freq=<span class="string">'M'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»"><a href="#é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»" class="headerlink" title="é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»"></a>é€šè¿‡åç§»é‡å¯¹æ—¥æœŸè¿›è¡Œä½ç§»</h4><p>pandasçš„æ—¥æœŸåç§»é‡è¿˜å¯ä»¥ç”¨åœ¨datetimeæˆ–Timestampå¯¹è±¡ä¸Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pandas.tseries.offsets <span class="keyword">import</span> Day, MonthEnd</span><br><span class="line">now = datetime(<span class="number">2011</span>, <span class="number">11</span>, <span class="number">17</span>)</span><br><span class="line">now + <span class="number">3</span> * Day() <span class="comment"># Timestamp('2011-11-20 00:00:00')</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨é”šç‚¹åç§»é‡</span></span><br><span class="line">now + MonthEnd() <span class="comment"># Timestamp('2011-12-31 00:00:00')</span></span><br><span class="line"><span class="comment"># é€šè¿‡é”šç‚¹åç§»é‡çš„rollforwardå’Œrollbackæ–¹æ³•ï¼Œå¯æ˜ç¡®åœ°å°†æ—¥æœŸå‘å‰æˆ–å‘åâ€œæ»šåŠ¨â€</span></span><br><span class="line">offset = MonthEnd()</span><br><span class="line">offset.rollforward(now) <span class="comment"># Timestamp('2011-11-30 00:00:00')</span></span><br><span class="line">offset.rollback(now) <span class="comment"># Timestamp('2011-10-31 00:00:00')</span></span><br></pre></td></tr></table></figure>
<h3 id="æ—¶åŒºå¤„ç†"><a href="#æ—¶åŒºå¤„ç†" class="headerlink" title="æ—¶åŒºå¤„ç†"></a>æ—¶åŒºå¤„ç†</h3><h4 id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢"><a href="#æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢" class="headerlink" title="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢"></a>æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢</h4><p>åœ¨Pythonä¸­ï¼Œæ—¶åŒºä¿¡æ¯æ¥è‡ªç¬¬ä¸‰æ–¹åº“pytzï¼Œå®ƒä½¿Pythonå¯ä»¥ä½¿ç”¨Olsonæ•°æ®åº“ï¼ˆæ±‡ç¼–äº†ä¸–ç•Œæ—¶åŒºä¿¡æ¯ï¼‰ã€‚pandasåŒ…è£…äº†pytzçš„åŠŸèƒ½ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pytz</span><br><span class="line">pytz.common_timezones[<span class="number">-5</span>:]<span class="comment"># ['US/Eastern', 'US/Hawaii', 'US/Mountain', 'US/Pacific', 'UTC']</span></span><br><span class="line">tz = pytz.timezone(<span class="string">'America/New_York'</span>) <span class="comment"># &lt;DstTzInfo 'America/New_York' LMT-1 day, 19:04:00 STD&gt;</span></span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œpandasä¸­çš„æ—¶é—´åºåˆ—æ˜¯å•çº¯ï¼ˆnaiveï¼‰çš„æ—¶åŒº,å…¶ç´¢å¼•çš„tzå­—æ®µä¸ºNoneã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'3/9/2012 9:30'</span>, periods=<span class="number">6</span>, freq=<span class="string">'D'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">print(ts.index.tz) <span class="comment"># None</span></span><br><span class="line"><span class="comment"># å¯ä»¥æŒ‡å®šæ—¶åŒº</span></span><br><span class="line">pd.date_range(<span class="string">'3/9/2012 9:30'</span>, periods=<span class="number">10</span>, freq=<span class="string">'D'</span>, tz=<span class="string">'UTC'</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡tz_localizeæ–¹æ³•ä»å•çº¯è½¬æ¢åˆ°æœ¬åœ°åŒ–</span></span><br><span class="line">ts_utc = ts.tz_localize(<span class="string">'UTC'</span>)</span><br><span class="line"><span class="comment"># è¢«æœ¬åœ°åŒ–åˆ°æŸä¸ªç‰¹å®šæ—¶åŒºï¼Œå°±å¯ä»¥ç”¨tz_convertå°†å…¶è½¬æ¢åˆ°åˆ«çš„æ—¶åŒº</span></span><br><span class="line">ts_utc.tz_convert(<span class="string">'America/New_York'</span>)</span><br><span class="line"><span class="comment"># ç‹¬ç«‹çš„Timestampå¯¹è±¡ä¹Ÿèƒ½è¢«ä»å•çº¯å‹ï¼ˆnaiveï¼‰æœ¬åœ°åŒ–ä¸ºæ—¶åŒºæ„è¯†å‹ï¼ˆtime zone-awareï¼‰</span></span><br><span class="line">stamp = pd.Timestamp(<span class="string">'2011-03-12 04:00'</span>)</span><br><span class="line">stamp_utc = stamp.tz_localize(<span class="string">'utc'</span>)</span><br><span class="line">stamp_utc.tz_convert(<span class="string">'America/New_York'</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸¤ä¸ªæ—¶é—´åºåˆ—çš„æ—¶åŒºä¸åŒï¼Œåœ¨å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·æ—¶ï¼Œæœ€ç»ˆç»“æœå°±ä¼šæ˜¯UTC</p>
 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rng = pd.date_range(<span class="string">'3/7/2012 9:30'</span>, periods=<span class="number">10</span>, freq=<span class="string">'B'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">ts1 = ts[:<span class="number">7</span>].tz_localize(<span class="string">'Europe/London'</span>)</span><br><span class="line">ts2 = ts1[<span class="number">2</span>:].tz_convert(<span class="string">'Europe/Moscow'</span>)</span><br><span class="line">result = ts1 + ts2</span><br></pre></td></tr></table></figure>
<h3 id="æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—"><a href="#æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—" class="headerlink" title="æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—"></a>æ—¶æœŸåŠå…¶ç®—æœ¯è¿ç®—</h3><p>æ—¶æœŸï¼ˆperiodï¼‰è¡¨ç¤ºçš„æ˜¯æ—¶é—´åŒºé—´ï¼Œæ¯”å¦‚æ•°æ—¥ã€æ•°æœˆã€æ•°å­£ã€æ•°å¹´ç­‰ã€‚Periodç±»æ‰€è¡¨ç¤ºçš„å°±æ˜¯è¿™ç§æ•°æ®ç±»å‹ï¼Œå…¶æ„é€ å‡½æ•°éœ€è¦ç”¨åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•´æ•°ï¼Œä»¥åŠé¢‘ç‡ç¬¦å·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = pd.Period(<span class="number">2007</span>, freq=<span class="string">'A-DEC'</span>) <span class="comment">#è¡¨ç¤ºçš„æ˜¯ä»2007å¹´1æœˆ1æ—¥åˆ°2007å¹´12æœˆ31æ—¥ä¹‹é—´çš„æ•´æ®µæ—¶é—´</span></span><br><span class="line"><span class="comment"># å¯¹Periodå¯¹è±¡åŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªæ•´æ•°å³å¯è¾¾åˆ°æ ¹æ®å…¶é¢‘ç‡è¿›è¡Œä½ç§»çš„æ•ˆæœ</span></span><br><span class="line">p + <span class="number">5</span>  <span class="comment"># Period('2012', 'A-DEC')</span></span><br><span class="line"><span class="comment"># period_rangeå‡½æ•°å¯ç”¨äºåˆ›å»ºè§„åˆ™çš„æ—¶æœŸèŒƒå›´</span></span><br><span class="line">rng = pd.period_range(<span class="string">'2000-01-01'</span>, <span class="string">'2000-06-30'</span>, freq=<span class="string">'M'</span>) <span class="comment"># è¿”å›PeriodIndexå¯¹è±¡</span></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨PeriodIndexç±»ï¼š</span></span><br><span class="line">values = [<span class="string">'2001Q3'</span>, <span class="string">'2002Q2'</span>, <span class="string">'2003Q1'</span>]</span><br><span class="line">index = pd.PeriodIndex(values, freq=<span class="string">'Q-DEC'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="æ—¶æœŸçš„é¢‘ç‡è½¬æ¢"><a href="#æ—¶æœŸçš„é¢‘ç‡è½¬æ¢" class="headerlink" title="æ—¶æœŸçš„é¢‘ç‡è½¬æ¢"></a>æ—¶æœŸçš„é¢‘ç‡è½¬æ¢</h4><p>Periodå’ŒPeriodIndexå¯¹è±¡éƒ½å¯ä»¥é€šè¿‡å…¶asfreqæ–¹æ³•è¢«è½¬æ¢æˆåˆ«çš„é¢‘ç‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">p = pd.Period(<span class="string">'2007'</span>, freq=<span class="string">'A-DEC'</span>)<span class="comment"># Period('2007', 'A-DEC')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, how=<span class="string">'start'</span>)<span class="comment"># Period('2007-01', 'M')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, how=<span class="string">'end'</span>)<span class="comment">#  Period('2007-12', 'M')</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">p = pd.Period(<span class="string">'2007'</span>, freq=<span class="string">'A-JUN'</span>)</span><br><span class="line">p.asfreq(<span class="string">'M'</span>, <span class="string">'start'</span>)  <span class="comment"># Period('2006-07', 'M')</span></span><br><span class="line">p.asfreq(<span class="string">'M'</span>, <span class="string">'end'</span>) <span class="comment"># Period('2007-06', 'M')</span></span><br><span class="line"><span class="comment"># å®Œæ•´çš„PeriodIndexæˆ–TimeSeriesçš„é¢‘ç‡è½¬æ¢æ–¹å¼ä¹Ÿæ˜¯å¦‚æ­¤</span></span><br><span class="line">rng = pd.period_range(<span class="string">'2006'</span>, <span class="string">'2009'</span>, freq=<span class="string">'A-DEC'</span>)</span><br><span class="line">ts = pd.Series(np.random.randn(len(rng)), index=rng)</span><br><span class="line">ts.asfreq(<span class="string">'M'</span>, how=<span class="string">'start'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-d201200d0e65676f.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡"><a href="#æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡" class="headerlink" title="æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡"></a>æŒ‰å­£åº¦è®¡ç®—çš„æ—¶æœŸé¢‘ç‡</h4><p>æ—¶æœŸâ€2012Q4â€æ ¹æ®è´¢å¹´æœ«çš„ä¸åŒä¼šæœ‰ä¸åŒçš„å«ä¹‰ã€‚pandasæ”¯æŒ12ç§å¯èƒ½çš„å­£åº¦å‹é¢‘ç‡ï¼Œå³Q-JANåˆ°Q-DEC.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»¥1æœˆç»“æŸçš„è´¢å¹´ä¸­ï¼Œ2012Q4æ˜¯ä»11æœˆåˆ°1æœˆï¼ˆå°†å…¶è½¬æ¢ä¸ºæ—¥å‹é¢‘ç‡å°±æ˜ç™½äº†ï¼‰</span></span><br><span class="line">p = pd.Period(<span class="string">'2012Q4'</span>, freq=<span class="string">'Q-JAN'</span>) <span class="comment"># Period('2012Q4', 'Q-JAN')</span></span><br><span class="line">p.asfreq(<span class="string">'D'</span>, <span class="string">'start'</span>) <span class="comment"># Period('2011-11-01', 'D')</span></span><br><span class="line">p.asfreq(<span class="string">'D'</span>, <span class="string">'end'</span>) <span class="comment"># Period('2012-01-31', 'D')</span></span><br><span class="line"><span class="comment"># è·å–è¯¥å­£åº¦å€’æ•°ç¬¬äºŒä¸ªå·¥ä½œæ—¥ä¸‹åˆ4ç‚¹çš„æ—¶é—´æˆ³</span></span><br><span class="line">p4pm = (p.asfreq(<span class="string">'B'</span>, <span class="string">'e'</span>) - <span class="number">1</span>).asfreq(<span class="string">'T'</span>, <span class="string">'s'</span>) + <span class="number">16</span> * <span class="number">60</span> <span class="comment"># Period('2012-01-30 16:00', 'T')</span></span><br><span class="line">p4pm.to_timestamp() <span class="comment"># Timestamp('2012-01-30 16:00:00')</span></span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/7178691-e2e1d52c9766f6ff.png?imageMogr2/auto-orient/strip|imageView2/2/w/1200/format/webp" alt="img"></p>
<h4 id="å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰"><a href="#å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰" class="headerlink" title="å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰"></a>å°†Timestampè½¬æ¢ä¸ºPeriodï¼ˆåŠå…¶åå‘è¿‡ç¨‹ï¼‰</h4><p>to_periodæ–¹æ³•ï¼Œå¯ä»¥å°†ç”±æ—¶é—´æˆ³ç´¢å¼•çš„Serieså’ŒDataFrameå¯¹è±¡è½¬æ¢ä¸ºä»¥æ—¶æœŸç´¢å¼•ï¼Œè¦è½¬æ¢å›æ—¶é—´æˆ³ï¼Œä½¿ç”¨to_timestampã€‹</p>
<h4 id="é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex"><a href="#é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex" class="headerlink" title="é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex"></a>é€šè¿‡æ•°ç»„åˆ›å»ºPeriodIndex</h4>]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>numpy</tag>
        <tag>pandas</tag>
      </tags>
  </entry>
  <entry>
    <title>SQLå’ŒMySQL</title>
    <url>/2020/09/07/SQL%E5%92%8CMySQL/</url>
    <content><![CDATA[<h1 id="ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰"><a href="#ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰" class="headerlink" title="ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰"></a>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰</h1><p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆStructured Query Languageï¼‰ç®€ç§° SQLï¼Œæ˜¯ä¸€ç§æ•°æ®åº“æŸ¥è¯¢è¯­è¨€ã€‚ç”¨äºå­˜å–æ•°æ®ã€æŸ¥è¯¢ã€æ›´æ–°å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿã€‚</p>
<a id="more"></a>
<h2 id="SQL-æ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€"><a href="#SQL-æ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€" class="headerlink" title="SQL æ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€"></a>SQL æ˜¯ä¸€ç§å£°æ˜æ€§è¯­è¨€</h2><p>ç®€å•åœ°è¯´ï¼ŒSQL è¯­è¨€å£°æ˜çš„æ˜¯ç»“æœé›†çš„å±æ€§ï¼Œè®¡ç®—æœºä¼šæ ¹æ® SQL æ‰€å£°æ˜çš„å†…å®¹æ¥ä»æ•°æ®åº“ä¸­æŒ‘é€‰å‡ºç¬¦åˆå£°æ˜çš„æ•°æ®ï¼Œè€Œä¸æ˜¯åƒä¼ ç»Ÿç¼–ç¨‹æ€ç»´å»æŒ‡ç¤ºè®¡ç®—æœºå¦‚ä½•æ“ä½œã€‚</p>
<h2 id="SQL-çš„è¯­æ³•å¹¶ä¸æŒ‰ç…§è¯­æ³•é¡ºåºæ‰§è¡Œ"><a href="#SQL-çš„è¯­æ³•å¹¶ä¸æŒ‰ç…§è¯­æ³•é¡ºåºæ‰§è¡Œ" class="headerlink" title="SQL çš„è¯­æ³•å¹¶ä¸æŒ‰ç…§è¯­æ³•é¡ºåºæ‰§è¡Œ"></a>SQL çš„è¯­æ³•å¹¶ä¸æŒ‰ç…§è¯­æ³•é¡ºåºæ‰§è¡Œ</h2><p>SQL è¯­å¥çš„è¯­æ³•é¡ºåºæ˜¯ï¼š</p>
<ul>
<li>SELECT[DISTINCT]</li>
<li>FROM</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>UNION</li>
<li>ORDER BY</li>
</ul>
<p>æ‰§è¡Œé¡ºåºä¸ºï¼š</p>
<ul>
<li>FROM</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>SELECT</li>
<li>DISTINCT</li>
<li>UNION</li>
<li>ORDER BY</li>
</ul>
<ol>
<li>FROM æ˜¯ SQL è¯­å¥æ‰§è¡Œçš„ç¬¬ä¸€æ­¥ï¼Œè€Œé SELECT ã€‚æ•°æ®åº“åœ¨æ‰§è¡Œ SQL è¯­å¥çš„ç¬¬ä¸€æ­¥æ˜¯å°†æ•°æ®ä»ç¡¬ç›˜åŠ è½½åˆ°æ•°æ®ç¼“å†²åŒºä¸­ï¼Œä»¥ä¾¿å¯¹è¿™äº›æ•°æ®è¿›è¡Œæ“ä½œã€‚</li>
<li>SELECT æ˜¯åœ¨å¤§éƒ¨åˆ†è¯­å¥æ‰§è¡Œäº†ä¹‹åæ‰æ‰§è¡Œçš„ï¼Œä¸¥æ ¼è¯´æ˜¯åœ¨ FROM å’Œ GROUP BY ä¹‹åæ‰§è¡Œçš„ã€‚æ‰€ä»¥ä¸èƒ½åœ¨ WHERE ä¸­ä½¿ç”¨åœ¨ SELECT ä¸­è®¾å®šåˆ«åå­—æ®µä½œä¸ºåˆ¤æ–­æ¡ä»¶ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT A.x + A.y AS z FROM A</span><br><span class="line">WHERE z &#x3D; 10 -- z åœ¨æ­¤å¤„ä¸å¯ç”¨ï¼Œå› ä¸ºSELECTæ˜¯æœ€åæ‰§è¡Œçš„è¯­å¥ï¼</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT A.x + A.y AS z FROM A </span><br><span class="line">WHERE (A.x + A.y) &#x3D; 10 -- æ­£ç¡®ç”¨æ³•</span><br></pre></td></tr></table></figure>
<ol>
<li>æ— è®ºåœ¨è¯­æ³•ä¸Šè¿˜æ˜¯åœ¨æ‰§è¡Œé¡ºåºä¸Šï¼Œ UNION æ€»æ˜¯æ’åœ¨åœ¨ ORDER BY ä¹‹å‰ã€‚å°½ç®¡æŸäº›æ•°æ®åº“å…è®¸ SQL è¯­å¥å¯¹å­æŸ¥è¯¢ï¼ˆsubqueriesï¼‰æˆ–è€…æ´¾ç”Ÿè¡¨ï¼ˆderived tablesï¼‰è¿›è¡Œæ’åºï¼Œä½†æ˜¯è¿™å¹¶ä¸è¯´æ˜è¿™ä¸ªæ’åºåœ¨ UNION æ“ä½œè¿‡åä»ä¿æŒæ’åºåçš„é¡ºåºã€‚</li>
</ol>
<blockquote>
<p>å¹¶éæ‰€æœ‰çš„æ•°æ®åº“å¯¹ SQL è¯­å¥ä½¿ç”¨ç›¸åŒçš„è§£ææ–¹å¼ã€‚å¦‚ MySQLã€PostgreSQLå’Œ SQLite ä¸­å°±ä¸ä¼šæŒ‰ç…§ä¸Šé¢ç¬¬äºŒç‚¹ä¸­æ‰€è¯´çš„æ–¹å¼æ‰§è¡Œã€‚</p>
</blockquote>
<h2 id="SQL-è¯­è¨€çš„æ ¸å¿ƒæ˜¯å¯¹è¡¨çš„å¼•ç”¨ï¼ˆtable-referencesï¼‰"><a href="#SQL-è¯­è¨€çš„æ ¸å¿ƒæ˜¯å¯¹è¡¨çš„å¼•ç”¨ï¼ˆtable-referencesï¼‰" class="headerlink" title="SQL è¯­è¨€çš„æ ¸å¿ƒæ˜¯å¯¹è¡¨çš„å¼•ç”¨ï¼ˆtable referencesï¼‰"></a>SQL è¯­è¨€çš„æ ¸å¿ƒæ˜¯å¯¹è¡¨çš„å¼•ç”¨ï¼ˆtable referencesï¼‰</h2><p>æ ¹æ® SQL æ ‡å‡†ï¼ŒFROM è¯­å¥è¢«å®šä¹‰ä¸ºï¼š</p>
<p><code>&lt;from clause&gt; ::= FROM &lt;table reference&gt; [ { &lt;comma&gt; &lt;table reference&gt; }... ]</code></p>
<p>FROM è¯­å¥çš„â€œè¾“å‡ºâ€æ˜¯ä¸€å¼ è”åˆè¡¨ï¼Œæ¥è‡ªäºæ‰€æœ‰å¼•ç”¨çš„è¡¨åœ¨æŸä¸€ç»´åº¦ä¸Šçš„è”åˆã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">FROM a, b</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™å¥ FROM è¯­å¥çš„è¾“å‡ºäº†ä¸€å¼ è”åˆè¡¨ï¼Œè”åˆäº†è¡¨ a å’Œè¡¨ b ã€‚å¦‚æœ a è¡¨æœ‰ä¸‰ä¸ªå­—æ®µï¼Œ b è¡¨æœ‰ 5 ä¸ªå­—æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªâ€œè¾“å‡ºè¡¨â€å°±æœ‰ 8 ï¼ˆ =5+3ï¼‰ä¸ªå­—æ®µã€‚è”åˆè¡¨é‡Œçš„æ•°æ®æ˜¯ a*bï¼Œ<strong>å³ a å’Œ b çš„ç¬›å¡å°”ç§¯</strong>ã€‚ a è¡¨ä¸­çš„æ¯ä¸€æ¡æ•°æ®éƒ½è¦è·Ÿ b è¡¨ä¸­çš„æ¯ä¸€æ¡æ•°æ®é…å¯¹ã€‚å¦‚æœ a è¡¨æœ‰3 æ¡æ•°æ®ï¼Œ b è¡¨æœ‰ 5 æ¡æ•°æ®ï¼Œé‚£ä¹ˆè”åˆè¡¨å°±ä¼šæœ‰ 15 ï¼ˆ =5*3ï¼‰æ¡æ•°æ®ã€‚</p>
<blockquote>
<p>ä»é›†åˆè®ºï¼ˆå…³ç³»ä»£æ•°ï¼‰çš„è§’åº¦æ¥çœ‹ï¼Œä¸€å¼ æ•°æ®åº“çš„è¡¨å°±æ˜¯ä¸€ç»„æ•°æ®å…ƒçš„å…³ç³»ï¼Œè€Œæ¯ä¸ª SQL è¯­å¥ä¼šæ”¹å˜ä¸€ç§æˆ–æ•°ç§å…³ç³»ï¼Œä»è€Œäº§ç”Ÿå‡ºæ–°çš„æ•°æ®å…ƒçš„å…³ç³»ï¼ˆå³äº§ç”Ÿæ–°çš„è¡¨ï¼‰</p>
</blockquote>
<h2 id="SQL-è¯­å¥ä¸­çš„è¡¨è¿æ¥"><a href="#SQL-è¯­å¥ä¸­çš„è¡¨è¿æ¥" class="headerlink" title="SQL è¯­å¥ä¸­çš„è¡¨è¿æ¥"></a>SQL è¯­å¥ä¸­çš„è¡¨è¿æ¥</h2><p><strong>SQL æ˜¯å¯¹è¡¨çš„å¼•ç”¨ï¼Œ JOIN åˆ™æ˜¯ä¸€ç§å¼•ç”¨è¡¨çš„å¤æ‚æ–¹å¼</strong> ã€‚ä¸¥æ ¼çš„è¯´ JOIN è¯­å¥å¹¶éæ˜¯ SELECT ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯<strong>ä¸€ç§ç‰¹æ®Šçš„è¡¨å¼•ç”¨è¯­å¥</strong>ã€‚SQL è¯­è¨€æ ‡å‡†ä¸­è¡¨çš„è¿æ¥å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;table reference&gt; ::&#x3D;</span><br><span class="line">    &lt;table name&gt;</span><br><span class="line">  | &lt;derived table&gt;</span><br><span class="line">  | &lt;joined table&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">FROM a1 JOIN a2 ON a1.id = a2.id, b</span><br></pre></td></tr></table></figure>
<p> JOIN æ˜¯æ„å»ºè¿æ¥è¡¨çš„å…³é”®è¯ï¼Œå¹¶ä¸æ˜¯ SELECT è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚æœ‰ä¸€äº›æ•°æ®åº“å…è®¸åœ¨ INSERT ã€ UPDATE ã€ DELETE ä¸­ä½¿ç”¨ JOIN ã€‚</p>
<p>ä½¿ç”¨ JOIN è¯­å¥çš„å¥½å¤„åœ¨äºï¼š</p>
<ul>
<li>å®‰å…¨ã€‚JOIN å’Œè¦è¿æ¥çš„è¡¨ç¦»å¾—éå¸¸è¿‘ï¼Œè¿™æ ·å°±èƒ½é¿å…é”™è¯¯ã€‚</li>
<li>æ›´å¤šè¿æ¥çš„æ–¹å¼ï¼ŒJOIN è¯­å¥èƒ½å»åŒºåˆ†å‡ºæ¥å¤–è¿æ¥å’Œå†…è¿æ¥ç­‰ã€‚</li>
</ul>
<h2 id="SQL-è¯­å¥ä¸­ä¸åŒçš„è¿æ¥æ“ä½œ"><a href="#SQL-è¯­å¥ä¸­ä¸åŒçš„è¿æ¥æ“ä½œ" class="headerlink" title="SQL è¯­å¥ä¸­ä¸åŒçš„è¿æ¥æ“ä½œ"></a><strong>SQL è¯­å¥ä¸­ä¸åŒçš„è¿æ¥æ“ä½œ</strong></h2><p>SQL è¯­å¥ä¸­ï¼Œè¡¨è¿æ¥çš„æ–¹å¼ä»æ ¹æœ¬ä¸Šåˆ†ä¸ºäº”ç§ï¼š</p>
<ul>
<li>EQUI JOIN</li>
<li>SEMI JOIN</li>
<li>ANTI JOIN</li>
<li>CROSS JOIN</li>
<li>DIVISION</li>
</ul>
<h3 id="EQUI-JOIN"><a href="#EQUI-JOIN" class="headerlink" title="EQUI JOIN"></a><strong>EQUI JOIN</strong></h3><p>åŒ…å«ä¸¤ç§è¿æ¥æ–¹å¼ï¼š</p>
<ul>
<li>INNER JOINï¼ˆæˆ–è€…æ˜¯ JOIN ï¼‰</li>
<li>OUTER JOINï¼ˆåŒ…æ‹¬ï¼šLEFT ã€ RIGHTã€ FULL OUTER JOINï¼‰</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- This table reference contains authors and their books.</span></span><br><span class="line"><span class="comment">-- There is one record for each book and its author.</span></span><br><span class="line"><span class="comment">-- authors without books are NOT included</span></span><br><span class="line">author JOIN book ON author.id = book.author_id</span><br><span class="line"></span><br><span class="line"><span class="comment">-- This table reference contains authors and their books</span></span><br><span class="line"><span class="comment">-- There is one record for each book and its author.</span></span><br><span class="line"><span class="comment">-- ... OR there is an "empty" record for authors without books</span></span><br><span class="line"><span class="comment">-- ("empty" meaning that all book columns are NULL)</span></span><br><span class="line">author LEFT OUTER JOIN book ON author.id = book.author_id</span><br></pre></td></tr></table></figure>
<h3 id="SEMI-JOIN"><a href="#SEMI-JOIN" class="headerlink" title="SEMI JOIN"></a>SEMI JOIN</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Using IN</span></span><br><span class="line">FROM author WHERE author.id IN (<span class="keyword">SELECT</span> book.author_id <span class="keyword">FROM</span> book)</span><br><span class="line"><span class="comment">-- Using EXISTS</span></span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> book.author_id = author.id)</span><br></pre></td></tr></table></figure>
<ul>
<li>INæ¯” EXISTS çš„å¯è¯»æ€§æ›´å¥½</li>
<li>EXISTS æ¯”IN çš„è¡¨è¾¾æ€§æ›´å¥½ï¼ˆæ›´é€‚åˆå¤æ‚çš„è¯­å¥ï¼‰</li>
<li>äºŒè€…ä¹‹é—´æ€§èƒ½æ²¡æœ‰å·®å¼‚ï¼ˆä½†å¯¹äºæŸäº›æ•°æ®åº“æ¥è¯´æ€§èƒ½å·®å¼‚ä¼šéå¸¸å¤§ï¼‰</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Find only those authors who also have books</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> first_name, last_name</span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">JOIN</span> book <span class="keyword">ON</span> author.id = book.author_id</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ç§å¾ˆç³Ÿç³•çš„å†™æ³•ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>SQL è¯­å¥æ€§èƒ½ä½ä¸‹ï¼šå› ä¸ºå»é‡æ“ä½œï¼ˆ DISTINCT ï¼‰éœ€è¦æ•°æ®åº“é‡å¤ä»ç¡¬ç›˜ä¸­è¯»å–æ•°æ®åˆ°å†…å­˜ä¸­ã€‚</li>
<li>è¿™ä¹ˆå†™å¹¶éå®Œå…¨æ­£ç¡®ï¼šå°½ç®¡ä¹Ÿè®¸ç°åœ¨è¿™ä¹ˆå†™ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯éšç€ SQL è¯­å¥å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œæƒ³è¦å»é‡å¾—åˆ°æ­£ç¡®çš„ç»“æœå°±å˜å¾—ååˆ†å›°éš¾ã€‚</li>
</ul>
<h3 id="ANTI-JOIN"><a href="#ANTI-JOIN" class="headerlink" title="ANTI JOIN"></a><strong>ANTI JOIN</strong></h3><p>è¿™ç§è¿æ¥çš„å…³ç³»è·Ÿ SEMI JOIN åˆšå¥½ç›¸åã€‚åœ¨ IN æˆ–è€… EXISTS å‰åŠ ä¸€ä¸ª NOT å…³é”®å­—å°±èƒ½ä½¿ç”¨è¿™ç§è¿æ¥ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬åˆ—å‡ºä¹¦åè¡¨é‡Œæ²¡æœ‰ä¹¦çš„ä½œè€…ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Using IN</span></span><br><span class="line">FROM author WHERE author.id NOT IN (<span class="keyword">SELECT</span> book.author_id <span class="keyword">FROM</span> book)</span><br><span class="line"><span class="comment">-- Using EXISTS</span></span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> book.author_id = author.id)</span><br></pre></td></tr></table></figure>
<h3 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a><strong>CROSS JOIN</strong></h3><p>è¿™ä¸ªè¿æ¥è¿‡ç¨‹å°±æ˜¯<strong>ä¸¤ä¸ªè¿æ¥çš„è¡¨çš„ä¹˜ç§¯</strong>ï¼šå³å°†ç¬¬ä¸€å¼ è¡¨çš„æ¯ä¸€æ¡æ•°æ®åˆ†åˆ«å¯¹åº”ç¬¬äºŒå¼ è¡¨çš„æ¯æ¡æ•°æ®ã€‚è¿™å°±æ˜¯é€—å·åœ¨ FROM è¯­å¥ä¸­çš„ç”¨æ³•ã€‚åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¾ˆå°‘æœ‰åœ°æ–¹èƒ½ç”¨åˆ° CROSS JOINï¼Œä¸€æ—¦ç”¨ä¸Šï¼Œå¯ä»¥ç”¨è¿™æ ·çš„ SQLè¯­å¥è¡¨è¾¾ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Combine every author with every book</span></span><br><span class="line">author CROSS JOIN book</span><br><span class="line"><span class="comment">-- ç­‰åŒäº</span></span><br><span class="line">FROM author, book</span><br></pre></td></tr></table></figure>
<h3 id="DIVISION"><a href="#DIVISION" class="headerlink" title="DIVISION"></a><strong>DIVISION</strong></h3><p>DIVISION æ¯”è¾ƒå¥‡æ€ªã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœ JOIN æ˜¯ä¸€ä¸ªä¹˜æ³•è¿ç®—ï¼Œé‚£ä¹ˆ DIVISION å°±æ˜¯ JOIN çš„é€†è¿‡ç¨‹ã€‚DIVISION çš„å…³ç³»å¾ˆéš¾ç”¨ SQL è¡¨è¾¾å‡ºæ¥ã€‚</p>
<h2 id="SQL-ä¸­çš„æ´¾ç”Ÿè¡¨"><a href="#SQL-ä¸­çš„æ´¾ç”Ÿè¡¨" class="headerlink" title="SQL ä¸­çš„æ´¾ç”Ÿè¡¨"></a><strong>SQL ä¸­çš„æ´¾ç”Ÿè¡¨</strong></h2><p>æ´¾ç”Ÿè¡¨å°±æ˜¯åœ¨æ‹¬å·ä¹‹ä¸­çš„å­æŸ¥è¯¢ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- A derived table</span></span><br><span class="line">FROM (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> author)</span><br><span class="line"><span class="comment">-- æˆ‘ä»¬å¯ä»¥ç»™æ´¾ç”Ÿè¡¨å®šä¹‰ä¸€ä¸ªç›¸å…³åï¼ˆå³åˆ«åï¼‰</span></span><br><span class="line"><span class="comment">-- A derived table with an alias</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> author) a</span><br></pre></td></tr></table></figure>
<p>æ´¾ç”Ÿè¡¨å¯ä»¥æœ‰æ•ˆçš„é¿å…ç”±äº SQL é€»è¾‘è€Œäº§ç”Ÿçš„é—®é¢˜ã€‚</p>
<p>æƒ³é‡ç”¨ä¸€ä¸ªç”¨ SELECT å’Œ WHERE è¯­å¥æŸ¥è¯¢å‡ºçš„ç»“æœï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Get authors' first and last names, and their age in days</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, last_name, age</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> first_name, last_name, <span class="keyword">current_date</span> - date_of_birth age</span><br><span class="line">  <span class="keyword">FROM</span> author</span><br><span class="line">)</span><br><span class="line"><span class="comment">-- If the age is greater than 10000 days</span></span><br><span class="line"><span class="keyword">WHERE</span> age &gt; <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœ‰äº›æ•°æ®åº“ï¼Œä»¥åŠ SQL ï¼š1990 æ ‡å‡†ä¸­ï¼Œæ´¾ç”Ÿè¡¨è¢«å½’ä¸ºä¸‹ä¸€çº§â€”â€”é€šç”¨è¡¨è¯­å¥ï¼ˆ common table experssionï¼‰ã€‚å…è®¸åœ¨ä¸€ä¸ª SELECT è¯­å¥ä¸­å¯¹æ´¾ç”Ÿè¡¨å¤šæ¬¡é‡ç”¨ã€‚ä¸Šé¢çš„ä¾‹å­å°±ï¼ˆå‡ ä¹ï¼‰ç­‰ä»·äºä¸‹é¢çš„è¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> a <span class="keyword">AS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> first_name, last_name, <span class="keyword">current_date</span> - date_of_birth age</span><br><span class="line">  <span class="keyword">FROM</span> author</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> a</span><br><span class="line"><span class="keyword">WHERE</span> age &gt; <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<h3 id="SQL-è¯­å¥ä¸­-GROUP-BY"><a href="#SQL-è¯­å¥ä¸­-GROUP-BY" class="headerlink" title="SQL è¯­å¥ä¸­ GROUP BY"></a><strong>SQL è¯­å¥ä¸­ GROUP BY</strong></h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.x, A.y, <span class="keyword">SUM</span>(A.z)</span><br><span class="line"><span class="keyword">FROM</span> A</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> A.x, A.y</span><br></pre></td></tr></table></figure>
<h3 id="SQL-è¯­å¥ä¸­çš„-SELECT-å®è´¨ä¸Šæ˜¯å¯¹å…³ç³»çš„æ˜ å°„"><a href="#SQL-è¯­å¥ä¸­çš„-SELECT-å®è´¨ä¸Šæ˜¯å¯¹å…³ç³»çš„æ˜ å°„" class="headerlink" title="SQL è¯­å¥ä¸­çš„ SELECT å®è´¨ä¸Šæ˜¯å¯¹å…³ç³»çš„æ˜ å°„"></a><strong>SQL è¯­å¥ä¸­çš„ SELECT å®è´¨ä¸Šæ˜¯å¯¹å…³ç³»çš„æ˜ å°„</strong></h3><p>SELECT è¯­å¥å°±åƒä¸€ä¸ªâ€œæŠ•å½±ä»ªâ€ï¼Œå¯ä»¥å°†å…¶ç†è§£æˆä¸€ä¸ªå°†æºè¡¨ä¸­çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„é€»è¾‘è½¬æ¢æˆç›®æ ‡è¡¨æ•°æ®çš„å‡½æ•°ã€‚</p>
<p>é€šè¿‡ SELECTè¯­å¥ï¼Œå¯ä»¥å¯¹æ¯ä¸€ä¸ªå­—æ®µè¿›è¡Œæ“ä½œï¼Œé€šè¿‡å¤æ‚çš„è¡¨è¾¾å¼ç”Ÿæˆæ‰€éœ€è¦çš„æ•°æ®ã€‚</p>
<p>SELECT è¯­å¥æœ‰å¾ˆå¤šç‰¹æ®Šçš„è§„åˆ™ï¼š</p>
<ul>
<li><p>ä»…èƒ½å¤Ÿä½¿ç”¨èƒ½é€šè¿‡è¡¨å¼•ç”¨è€Œå¾—æ¥çš„å­—æ®µï¼›</p>
</li>
<li><p>å¦‚æœæœ‰ GROUP BY è¯­å¥ï¼Œåªèƒ½å¤Ÿä½¿ç”¨ GROUP BY è¯­å¥åé¢çš„å­—æ®µæˆ–è€…èšåˆå‡½æ•°ï¼›</p>
</li>
<li><p>å½“è¯­å¥ä¸­æ²¡æœ‰ GROUP BY çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¼€çª—å‡½æ•°ä»£æ›¿èšåˆå‡½æ•°ï¼›</p>
</li>
<li><p>å½“è¯­å¥ä¸­æ²¡æœ‰ GROUP BY çš„æ—¶å€™ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨èšåˆå‡½æ•°å’Œå…¶å®ƒå‡½æ•°ï¼›</p>
<blockquote>
<p>åœ¨æ—¢æœ‰èšåˆå‡½æ•°åˆæœ‰æ™®é€šå‡½æ•°çš„ SQL è¯­å¥ä¸­ï¼Œå¦‚æœæ²¡æœ‰ GROUP BY è¿›è¡Œåˆ†ç»„ï¼ŒSQL è¯­å¥é»˜è®¤è§†æ•´å¼ è¡¨ä¸ºä¸€ä¸ªåˆ†ç»„ï¼Œå½“èšåˆå‡½æ•°å¯¹æŸä¸€å­—æ®µè¿›è¡Œèšåˆç»Ÿè®¡çš„æ—¶å€™ï¼Œå¼•ç”¨çš„è¡¨ä¸­çš„æ¯ä¸€æ¡ record å°±å¤±å»äº†æ„ä¹‰ï¼Œå…¨éƒ¨çš„æ•°æ®éƒ½èšåˆä¸ºä¸€ä¸ªç»Ÿè®¡å€¼ï¼Œä½ æ­¤æ—¶å¯¹æ¯ä¸€æ¡ record ä½¿ç”¨å…¶å®ƒå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„</p>
</blockquote>
</li>
<li><p>æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥å°†æ™®é€šå‡½æ•°å°è£…åœ¨èšåˆå‡½æ•°ä¸­</p>
</li>
</ul>
<h3 id="DISTINCT-ï¼Œ-UNION-ï¼Œ-ORDER-BY-å’Œ-OFFSET"><a href="#DISTINCT-ï¼Œ-UNION-ï¼Œ-ORDER-BY-å’Œ-OFFSET" class="headerlink" title="DISTINCT ï¼Œ UNION ï¼Œ ORDER BY å’Œ OFFSET"></a><strong>DISTINCT ï¼Œ UNION ï¼Œ ORDER BY å’Œ OFFSET</strong></h3><h4 id="é›†åˆè¿ç®—ï¼ˆ-DISTINCT-å’Œ-UNION-ï¼‰"><a href="#é›†åˆè¿ç®—ï¼ˆ-DISTINCT-å’Œ-UNION-ï¼‰" class="headerlink" title="é›†åˆè¿ç®—ï¼ˆ DISTINCT å’Œ UNION ï¼‰"></a>é›†åˆè¿ç®—ï¼ˆ DISTINCT å’Œ UNION ï¼‰</h4><p>é›†åˆè¿ç®—ä¸»è¦æ“ä½œåœ¨äºé›†åˆä¸Šï¼Œäº‹å®ä¸ŠæŒ‡çš„å°±æ˜¯å¯¹è¡¨çš„ä¸€ç§æ“ä½œã€‚</p>
<ul>
<li>DISTINCT åœ¨æ˜ å°„ä¹‹åå¯¹æ•°æ®è¿›è¡Œå»é‡</li>
<li>UNION å°†ä¸¤ä¸ªå­æŸ¥è¯¢æ‹¼æ¥èµ·æ¥å¹¶å»é‡</li>
<li>UNION ALL å°†ä¸¤ä¸ªå­æŸ¥è¯¢æ‹¼æ¥èµ·æ¥ä½†ä¸å»é‡</li>
<li>EXCEPT å°†ç¬¬äºŒä¸ªå­—æŸ¥è¯¢ä¸­çš„ç»“æœä»ç¬¬ä¸€ä¸ªå­æŸ¥è¯¢ä¸­å»æ‰</li>
<li>INTERSECT ä¿ç•™ä¸¤ä¸ªå­æŸ¥è¯¢ä¸­éƒ½æœ‰çš„ç»“æœå¹¶å»é‡</li>
</ul>
<h4 id="æ’åºè¿ç®—ï¼ˆ-ORDER-BYï¼ŒOFFSETâ€¦FETCHï¼‰"><a href="#æ’åºè¿ç®—ï¼ˆ-ORDER-BYï¼ŒOFFSETâ€¦FETCHï¼‰" class="headerlink" title="æ’åºè¿ç®—ï¼ˆ ORDER BYï¼ŒOFFSETâ€¦FETCHï¼‰"></a>æ’åºè¿ç®—ï¼ˆ ORDER BYï¼ŒOFFSETâ€¦FETCHï¼‰</h4><p>æ’åºè¿ç®—è·Ÿé€»è¾‘å…³ç³»æ— å…³ã€‚è¿™æ˜¯ä¸€ä¸ª SQL ç‰¹æœ‰çš„åŠŸèƒ½ã€‚æ’åºè¿ç®—ä¸ä»…åœ¨ SQL è¯­å¥çš„æœ€åï¼Œè€Œä¸”åœ¨ SQL è¯­å¥è¿è¡Œçš„è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯æœ€åæ‰§è¡Œçš„ã€‚ä½¿ç”¨ ORDER BY å’Œ OFFSETâ€¦FETCH æ˜¯ä¿è¯æ•°æ®èƒ½å¤ŸæŒ‰ç…§é¡ºåºæ’åˆ—çš„æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚</p>
<p>OFFSETâ€¦SETæ˜¯ä¸€ä¸ªæ²¡æœ‰ç»Ÿä¸€ç¡®å®šè¯­æ³•çš„è¯­å¥ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„è¡¨è¾¾æ–¹å¼ï¼Œå¦‚ MySQL å’Œ PostgreSQL çš„ LIMITâ€¦OFFSETã€SQL Server å’Œ Sybase çš„ TOPâ€¦START AT ç­‰ã€‚</p>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>MySQLæ˜¯ä¸€ç§å¼€æ”¾æºä»£ç çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRelational Database Management Systemï¼ŒRDBMSï¼‰ï¼Œç”±ç‘å…¸ MySQL AB å…¬å¸å¼€å‘ï¼Œå±äº Oracle æ——ä¸‹äº§å“ï¼Œä½¿ç”¨æœ€å¸¸ç”¨çš„æ•°æ®åº“ç®¡ç†è¯­è¨€â€“ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰è¿›è¡Œæ•°æ®åº“ç®¡ç†ã€‚</p>
<h2 id="è¿æ¥æ•°æ®åº“ï¼š"><a href="#è¿æ¥æ•°æ®åº“ï¼š" class="headerlink" title="è¿æ¥æ•°æ®åº“ï¼š"></a>è¿æ¥æ•°æ®åº“ï¼š</h2><p><code>mysql  -u user -p</code></p>
<p>é€€å‡ºè¿æ¥ï¼š<code>QUIT æˆ–è€… Ctrl+D</code></p>
<h2 id="æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œä½¿ç”¨æ•°æ®åº“"><a href="#æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œä½¿ç”¨æ•°æ®åº“" class="headerlink" title="æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œä½¿ç”¨æ•°æ®åº“:"></a>æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œä½¿ç”¨æ•°æ®åº“:</h2><p><code>show databases;</code></p>
<p>é»˜è®¤æ•°æ®åº“ï¼š</p>
<figure class="highlight plain"><figcaption><span>- ç”¨æˆ·æƒé™ç›¸å…³æ•°æ®</span></figcaption><table><tr><td class="code"><pre><span class="line">mysql - ç”¨æˆ·æƒé™ç›¸å…³æ•°æ®ä¿å­˜åœ¨mysqlæ•°æ®åº“çš„userè¡¨ä¸­</span><br><span class="line">test - ç”¨äºç”¨æˆ·æµ‹è¯•æ•°æ®</span><br><span class="line">information_schema - MySQLæœ¬èº«æ¶æ„ç›¸å…³æ•°æ®</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºæ•°æ®åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database db1 DEFAULT CHARSET utf8 COLLATE utf8_general_ci; # utf8ç¼–ç </span><br><span class="line">create database db1 DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci; # gbkç¼–ç </span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ•°æ®åº“ï¼š<code>use db1;</code></p>
<p>æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ï¼š<code>SHOW TABLES;</code></p>
<h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><p>åˆ›å»ºç”¨æˆ·ï¼š<code>create user &#39;ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39; identified by &#39;å¯†ç &#39;;</code></p>
<p>ä¿®æ”¹ç”¨æˆ·ï¼š<code>rename user &#39;ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39;; to &#39;æ–°ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39;;</code></p>
<p>åˆ é™¤ç”¨æˆ·ï¼š<code>drop user &#39;ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39;;</code></p>
<p>ä¿®æ”¹å¯†ç ï¼š<code>set password for &#39;ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39; = Password(&#39;æ–°å¯†ç &#39;);</code></p>
<h2 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h2><p>mysqlå¯¹äºæƒé™è¿™å—æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">all privilegesï¼šé™¤grantå¤–çš„æ‰€æœ‰æƒé™</span><br><span class="line">selectï¼šä»…æŸ¥æƒé™</span><br><span class="line">select,insertï¼šæŸ¥å’Œæ’å…¥æƒé™</span><br><span class="line">...</span><br><span class="line">usageï¼šæ— è®¿é—®æƒé™</span><br><span class="line">alterï¼šä½¿ç”¨alter table</span><br><span class="line">alter routineï¼šä½¿ç”¨alter procedureå’Œdrop procedure</span><br><span class="line">createï¼šä½¿ç”¨create table</span><br><span class="line">create routineï¼šä½¿ç”¨create procedure</span><br><span class="line">create temporary tablesï¼šä½¿ç”¨create temporary tables</span><br><span class="line">create userï¼šä½¿ç”¨create userã€drop userã€rename userå’Œrevoke  all privileges</span><br><span class="line">create viewï¼šä½¿ç”¨create view</span><br><span class="line">deleteï¼šä½¿ç”¨delete</span><br><span class="line">dropï¼šä½¿ç”¨drop table</span><br><span class="line">executeï¼šä½¿ç”¨callå’Œå­˜å‚¨è¿‡ç¨‹</span><br><span class="line">fileï¼šä½¿ç”¨select into outfile å’Œ load data infile</span><br><span class="line">grant optionï¼šä½¿ç”¨grant å’Œ revoke</span><br><span class="line">indexï¼šä½¿ç”¨index</span><br><span class="line">insertï¼šä½¿ç”¨insert</span><br><span class="line">lock tablesï¼šä½¿ç”¨lock table</span><br><span class="line">processï¼šä½¿ç”¨show full processlist</span><br><span class="line">selectï¼šä½¿ç”¨select</span><br><span class="line">show databasesï¼šä½¿ç”¨show databases</span><br><span class="line">show viewï¼šä½¿ç”¨show view</span><br><span class="line">updateï¼šä½¿ç”¨update</span><br><span class="line">reloadï¼šä½¿ç”¨flush</span><br><span class="line">shutdownï¼šä½¿ç”¨mysqladmin shutdown(å…³é—­MySQL)</span><br><span class="line">superï¼šä½¿ç”¨change masterã€killã€logsã€purgeã€masterå’Œset globalã€‚è¿˜å…è®¸mysqladminè°ƒè¯•ç™»é™†</span><br><span class="line">replication clientï¼šæœåŠ¡å™¨ä½ç½®çš„è®¿é—®</span><br><span class="line">replication slaveï¼šç”±å¤åˆ¶ä»å±ä½¿ç”¨</span><br></pre></td></tr></table></figure>
<p>å¯¹äºæ•°æ®åº“åŠå†…éƒ¨å…¶ä»–æƒé™å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ•°æ®åº“å.*            æ•°æ®åº“ä¸­çš„æ‰€æœ‰</span><br><span class="line">æ•°æ®åº“å.è¡¨           æŒ‡å®šæ•°æ®åº“ä¸­çš„æŸå¼ è¡¨</span><br><span class="line">æ•°æ®åº“å.å­˜å‚¨è¿‡ç¨‹      æŒ‡å®šæ•°æ®åº“ä¸­çš„å­˜å‚¨è¿‡ç¨‹</span><br><span class="line">*.*                   æ‰€æœ‰æ•°æ®åº“</span><br></pre></td></tr></table></figure>
<p>å¯¹äºç”¨æˆ·å’ŒIPçš„æƒé™å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·å@IPåœ°å€        ç”¨æˆ·åªèƒ½åœ¨æ”¹IPä¸‹æ‰èƒ½è®¿é—®</span><br><span class="line">ç”¨æˆ·å@192.168.1.%   ç”¨æˆ·åªèƒ½åœ¨æ”¹IPæ®µä¸‹æ‰èƒ½è®¿é—®(é€šé…ç¬¦%è¡¨ç¤ºä»»æ„)</span><br><span class="line">ç”¨æˆ·å@%             ç”¨æˆ·å¯ä»¥å†ä»»æ„IPä¸‹è®¿é—®(é»˜è®¤IPåœ°å€ä¸º%)</span><br></pre></td></tr></table></figure>
<p>1ã€æŸ¥çœ‹æƒé™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show grants for &#39;ç”¨æˆ·&#39;@&#39;IPåœ°å€&#39;</span><br></pre></td></tr></table></figure>
<p>2ã€æˆæƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grant  æƒé™ on æ•°æ®åº“.è¡¨ to   &#39;ç”¨æˆ·&#39;@&#39;IPåœ°å€&#39;</span><br></pre></td></tr></table></figure>
<p>3ã€å–æ¶ˆæˆæƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">revoke æƒé™ on æ•°æ®åº“.è¡¨ from &#39;ç”¨æˆ·å&#39;@&#39;IPåœ°å€&#39;</span><br></pre></td></tr></table></figure>
<p>æˆæƒå®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grant all privileges on db1.tb1 TO &#39;ç”¨æˆ·å&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">grant select on db1.* TO &#39;ç”¨æˆ·å&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">grant select,insert on *.* TO &#39;ç”¨æˆ·å&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">revoke select on db1.tb1 from &#39;ç”¨æˆ·å&#39;@&#39;IP&#39;</span><br></pre></td></tr></table></figure>
<h2 id="MySQLè¡¨æ“ä½œ"><a href="#MySQLè¡¨æ“ä½œ" class="headerlink" title="MySQLè¡¨æ“ä½œ"></a>MySQLè¡¨æ“ä½œ</h2><h3 id="æŸ¥çœ‹è¡¨"><a href="#æŸ¥çœ‹è¡¨" class="headerlink" title="æŸ¥çœ‹è¡¨"></a>æŸ¥çœ‹è¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show tables; # æŸ¥çœ‹æ•°æ®åº“å…¨éƒ¨è¡¨</span><br><span class="line">select * from è¡¨å; # æŸ¥çœ‹è¡¨æ‰€æœ‰å†…å®¹</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table è¡¨å(</span><br><span class="line">    åˆ—å  ç±»å‹  æ˜¯å¦å¯ä»¥ä¸ºç©ºï¼Œ</span><br><span class="line">    åˆ—å  ç±»å‹  æ˜¯å¦å¯ä»¥ä¸ºç©º</span><br><span class="line">)ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &#96;tab1&#96; (</span><br><span class="line">  &#96;nid&#96; int(11) NOT NULL auto_increment,</span><br><span class="line">  &#96;name&#96; varchar(255) DEFAULT zhangyanlin,</span><br><span class="line">  &#96;email&#96; varchar(255),</span><br><span class="line">  PRIMARY KEY (&#96;nid&#96;) </span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é»˜è®¤å€¼ï¼Œåˆ›å»ºåˆ—æ—¶å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå½“æ’å…¥æ•°æ®æ—¶å¦‚æœæœªä¸»åŠ¨è®¾ç½®ï¼Œåˆ™è‡ªåŠ¨æ·»åŠ é»˜è®¤å€¼ã€‚</p>
</li>
<li><p>è‡ªå¢ï¼Œå¦‚æœä¸ºæŸåˆ—è®¾ç½®è‡ªå¢åˆ—ï¼Œæ’å…¥æ•°æ®æ—¶æ— éœ€è®¾ç½®æ­¤åˆ—ï¼Œé»˜è®¤å°†è‡ªå¢ï¼ˆè¡¨ä¸­åªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢åˆ—ï¼‰</p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>1ã€è‡ªå¢åˆ—ï¼Œå¿…é¡»æ˜¯ç´¢å¼•ï¼ˆå«ä¸»é”®ï¼‰</p>
<p>2ã€è‡ªå¢å¯ä»¥è®¾ç½®æ­¥é•¿å’Œèµ·å§‹å€¼ã€‚</p>
</blockquote>
</li>
<li><p>ä¸»é”®ï¼Œä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ï¼Œå¦‚æœä¸»é”®ä½¿ç”¨å•ä¸ªåˆ—ï¼Œåˆ™å®ƒçš„å€¼å¿…é¡»å”¯ä¸€ï¼Œå¦‚æœæ˜¯å¤šåˆ—ï¼Œåˆ™å…¶ç»„åˆå¿…é¡»å”¯ä¸€ã€‚</p>
</li>
</ul>
<h3 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop table è¡¨å</span><br></pre></td></tr></table></figure>
<h3 id="æ¸…ç©ºè¡¨å†…å®¹"><a href="#æ¸…ç©ºè¡¨å†…å®¹" class="headerlink" title="æ¸…ç©ºè¡¨å†…å®¹"></a>æ¸…ç©ºè¡¨å†…å®¹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from è¡¨å</span><br><span class="line">truncate table è¡¨å</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹è¡¨"><a href="#ä¿®æ”¹è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨"></a>ä¿®æ”¹è¡¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ·»åŠ åˆ—ï¼š   </span><br><span class="line">alter table è¡¨å add åˆ—å ç±»å‹</span><br><span class="line">åˆ é™¤åˆ—ï¼š   </span><br><span class="line">alter table è¡¨å drop column åˆ—å</span><br><span class="line">ä¿®æ”¹åˆ—ï¼š      </span><br><span class="line">alter table è¡¨å modify column åˆ—å ç±»å‹;  -- ç±»å‹</span><br><span class="line">alter table è¡¨å change åŸåˆ—å æ–°åˆ—å ç±»å‹; -- åˆ—åï¼Œç±»å‹</span><br><span class="line">æ·»åŠ ä¸»é”®ï¼š       </span><br><span class="line">alter table è¡¨å add primary key(åˆ—å);</span><br><span class="line">åˆ é™¤ä¸»é”®ï¼š         </span><br><span class="line">alter table è¡¨å drop primary key;</span><br><span class="line">alter table è¡¨å  modify  åˆ—å int, drop primary key;</span><br><span class="line">æ·»åŠ å¤–é”®ï¼š </span><br><span class="line">alter table ä»è¡¨ add constraint å¤–é”®åç§°ï¼ˆå½¢å¦‚ï¼šFK_ä»è¡¨_ä¸»è¡¨ï¼‰ foreign key ä»è¡¨(å¤–é”®å­—æ®µ) references ä¸»è¡¨(ä¸»é”®å­—æ®µ);</span><br><span class="line">åˆ é™¤å¤–é”®ï¼š </span><br><span class="line">alter table è¡¨å drop foreign key å¤–é”®åç§°</span><br><span class="line">ä¿®æ”¹é»˜è®¤å€¼ï¼š</span><br><span class="line">ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;</span><br><span class="line">åˆ é™¤é»˜è®¤å€¼ï¼š</span><br><span class="line">ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;</span><br></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><p>MySQLçš„æ•°æ®ç±»å‹å¤§è‡´åˆ†ä¸ºï¼š<strong>æ•°å€¼ã€æ—¶é—´å’Œå­—ç¬¦ä¸²</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bit[(M)]</span><br><span class="line">            äºŒè¿›åˆ¶ä½ï¼ˆ101001ï¼‰ï¼Œmè¡¨ç¤ºäºŒè¿›åˆ¶ä½çš„é•¿åº¦ï¼ˆ1-64ï¼‰ï¼Œé»˜è®¤mï¼1</span><br><span class="line">tinyint[(m)] [unsigned] [zerofill]</span><br><span class="line">            å°æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">            æœ‰ç¬¦å·ï¼š</span><br><span class="line">                -128 ï½ 127.</span><br><span class="line">            æ— ç¬¦å·ï¼š</span><br><span class="line">                0 ï½ 255</span><br><span class="line">            ç‰¹åˆ«çš„ï¼š MySQLä¸­æ— å¸ƒå°”å€¼ï¼Œä½¿ç”¨tinyint(1)æ„é€ ã€‚</span><br><span class="line">int[(m)][unsigned][zerofill]</span><br><span class="line">            æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">                æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    -2147483648 ï½ 2147483647</span><br><span class="line">                æ— ç¬¦å·ï¼š</span><br><span class="line">                    0 ï½ 4294967295</span><br><span class="line">            ç‰¹åˆ«çš„ï¼šæ•´æ•°ç±»å‹ä¸­çš„mä»…ç”¨äºæ˜¾ç¤ºï¼Œå¯¹å­˜å‚¨èŒƒå›´æ— é™åˆ¶ã€‚ä¾‹å¦‚ï¼š int(5),å½“æ’å…¥æ•°æ®2æ—¶ï¼Œselect æ—¶æ•°æ®æ˜¾ç¤ºä¸ºï¼š00002</span><br><span class="line">bigint[(m)][unsigned][zerofill]</span><br><span class="line">            å¤§æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">                æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    -9223372036854775808 ï½ 9223372036854775807</span><br><span class="line">                æ— ç¬¦å·ï¼š</span><br><span class="line">                    0  ï½  18446744073709551615</span><br><span class="line">decimal[(m[,d])] [unsigned] [zerofill]</span><br><span class="line">            å‡†ç¡®çš„å°æ•°å€¼ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼ˆè´Ÿå·ä¸ç®—ï¼‰ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚ mæœ€å¤§å€¼ä¸º65ï¼Œdæœ€å¤§å€¼ä¸º30ã€‚</span><br><span class="line">            ç‰¹åˆ«çš„ï¼šå¯¹äºç²¾ç¡®æ•°å€¼è®¡ç®—æ—¶éœ€è¦ç”¨æ­¤ç±»å‹</span><br><span class="line">                   decaimalèƒ½å¤Ÿå­˜å‚¨ç²¾ç¡®å€¼çš„åŸå› åœ¨äºå…¶å†…éƒ¨æŒ‰ç…§å­—ç¬¦ä¸²å­˜å‚¨ã€‚</span><br><span class="line">FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]          </span><br><span class="line">            å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚</span><br><span class="line">                æ— ç¬¦å·ï¼š</span><br><span class="line">                    -3.402823466E+38 to -1.175494351E-38,</span><br><span class="line">                    0</span><br><span class="line">                    1.175494351E-38 to 3.402823466E+38</span><br><span class="line">                æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    0</span><br><span class="line">                    1.175494351E-38 to 3.402823466E+38</span><br><span class="line">            **** æ•°å€¼è¶Šå¤§ï¼Œè¶Šä¸å‡†ç¡® ****</span><br><span class="line">DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]</span><br><span class="line">            åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚</span><br><span class="line">                æ— ç¬¦å·ï¼š</span><br><span class="line">                    -1.7976931348623157E+308 to -2.2250738585072014E-308</span><br><span class="line">                    0</span><br><span class="line">                    2.2250738585072014E-308 to 1.7976931348623157E+308</span><br><span class="line">                æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    0</span><br><span class="line">                    2.2250738585072014E-308 to 1.7976931348623157E+308</span><br><span class="line">            **** æ•°å€¼è¶Šå¤§ï¼Œè¶Šä¸å‡†ç¡® ****</span><br><span class="line">char (m)</span><br><span class="line">            charæ•°æ®ç±»å‹ç”¨äºè¡¨ç¤ºå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«æœ€å¤šè¾¾255ä¸ªå­—ç¬¦ã€‚å…¶ä¸­mä»£è¡¨å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</span><br><span class="line">            PS: å³ä½¿æ•°æ®å°äºmé•¿åº¦ï¼Œä¹Ÿä¼šå ç”¨mé•¿åº¦          </span><br><span class="line">varchar(m)</span><br><span class="line">            varcharsæ•°æ®ç±»å‹ç”¨äºå˜é•¿çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«æœ€å¤šè¾¾255ä¸ªå­—ç¬¦ã€‚å…¶ä¸­mä»£è¡¨è¯¥æ•°æ®ç±»å‹æ‰€å…è®¸ä¿å­˜çš„å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œåªè¦é•¿åº¦å°äºè¯¥æœ€å¤§å€¼çš„å­—ç¬¦ä¸²éƒ½å¯ä»¥è¢«ä¿å­˜åœ¨è¯¥æ•°æ®ç±»å‹ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">            æ³¨ï¼šè™½ç„¶varcharä½¿ç”¨èµ·æ¥è¾ƒä¸ºçµæ´»ï¼Œä½†æ˜¯ä»æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½è§’åº¦æ¥è¯´ï¼Œcharæ•°æ®ç±»å‹çš„å¤„ç†é€Ÿåº¦æ›´å¿«ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥è¶…å‡ºvarcharå¤„ç†é€Ÿåº¦çš„50%ã€‚å› æ­¤ï¼Œç”¨æˆ·åœ¨è®¾è®¡æ•°æ®åº“æ—¶åº”å½“ç»¼åˆè€ƒè™‘å„æ–¹é¢çš„å› ç´ ï¼Œä»¥æ±‚è¾¾åˆ°æœ€ä½³çš„å¹³è¡¡</span><br><span class="line">text</span><br><span class="line">            textæ•°æ®ç±»å‹ç”¨äºä¿å­˜å˜é•¿çš„å¤§å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç»„å¤šåˆ°65535 (2**16 âˆ’ 1)ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">mediumtext</span><br><span class="line">            A TEXT column with a maximum length of 16,777,215 (2**24 âˆ’ 1) characters.</span><br><span class="line">longtext</span><br><span class="line">            A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 âˆ’ 1) characters.</span><br><span class="line">enum</span><br><span class="line">            æšä¸¾ç±»å‹ï¼Œ</span><br><span class="line">            An ENUM column can have a maximum of 65,535 distinct elements. (The practical limit is less than 3000.)</span><br><span class="line">            ç¤ºä¾‹ï¼š</span><br><span class="line">                CREATE TABLE shirts (</span><br><span class="line">                    name VARCHAR(40),</span><br><span class="line">                    size ENUM(&#39;x-small&#39;, &#39;small&#39;, &#39;medium&#39;, &#39;large&#39;, &#39;x-large&#39;)</span><br><span class="line">                );</span><br><span class="line">                INSERT INTO shirts (name, size) VALUES (&#39;dress shirt&#39;,&#39;large&#39;), (&#39;t-shirt&#39;,&#39;medium&#39;),(&#39;polo shirt&#39;,&#39;small&#39;);</span><br><span class="line">set</span><br><span class="line">            é›†åˆç±»å‹</span><br><span class="line">            A SET column can have a maximum of 64 distinct members.</span><br><span class="line">            ç¤ºä¾‹ï¼š</span><br><span class="line">                CREATE TABLE myset (col SET(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;));</span><br><span class="line">                INSERT INTO myset (col) VALUES (&#39;a,d&#39;), (&#39;d,a&#39;), (&#39;a,d,a&#39;), (&#39;a,d,d&#39;), (&#39;d,a,d&#39;);</span><br><span class="line"></span><br><span class="line">DATE          </span><br><span class="line">            YYYY-MM-DDï¼ˆ1000-01-01&#x2F;9999-12-31ï¼‰</span><br><span class="line">TIME</span><br><span class="line">            HH:MM:SSï¼ˆ&#39;-838:59:59&#39;&#x2F;&#39;838:59:59&#39;ï¼‰</span><br><span class="line">YEAR</span><br><span class="line">            YYYYï¼ˆ1901&#x2F;2155ï¼‰</span><br><span class="line">DATETIME</span><br><span class="line">            YYYY-MM-DD HH:MM:SSï¼ˆ1000-01-01 00:00:00&#x2F;9999-12-31 23:59:59    Yï¼‰</span><br><span class="line">TIMESTAMP</span><br><span class="line">            YYYYMMDD HHMMSSï¼ˆ1970-01-01 00:00:00&#x2F;2037 å¹´æŸæ—¶ï¼‰</span><br></pre></td></tr></table></figure>
<h2 id="MySQLè¡¨å†…å®¹æ“ä½œ"><a href="#MySQLè¡¨å†…å®¹æ“ä½œ" class="headerlink" title="MySQLè¡¨å†…å®¹æ“ä½œ"></a>MySQLè¡¨å†…å®¹æ“ä½œ</h2><p>è¡¨å†…å®¹æ“åŒ…æ‹¬<strong>å¢åˆ æ”¹æŸ¥</strong>ï¼Œæœ€å¤šçš„æ˜¯æŸ¥</p>
<h3 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into è¡¨ (åˆ—å,åˆ—å...) values (å€¼,å€¼,...)</span><br><span class="line">insert into è¡¨ (åˆ—å,åˆ—å...) values (å€¼,å€¼,...),(å€¼,å€¼,å€¼...)</span><br><span class="line">insert into è¡¨ (åˆ—å,åˆ—å...) select (åˆ—å,åˆ—å...) from è¡¨</span><br><span class="line">ä¾‹ï¼š</span><br><span class="line">    insert into tab1(name,email) values(&#39;zhangyanlin&#39;,&#39;zhangyanlin8851@163.com&#39;)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from è¡¨   # åˆ é™¤è¡¨é‡Œå…¨éƒ¨æ•°æ®</span><br><span class="line">delete from è¡¨ where idï¼1 and nameï¼&#39;zhangyanlin&#39; # åˆ é™¤ID &#x3D;1 å’Œname&#x3D;&#39;zhangyanlin&#39; é‚£ä¸€è¡Œæ•°æ®</span><br></pre></td></tr></table></figure>
<h3 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update è¡¨ set name ï¼ &#39;zhangyanlin&#39; where id&gt;1</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from è¡¨</span><br><span class="line">select * from è¡¨ where id &gt; 1</span><br><span class="line">select nid,name,gender as gg from è¡¨ where id &gt; 1</span><br></pre></td></tr></table></figure>
<h4 id="æ¡ä»¶åˆ¤æ–­where"><a href="#æ¡ä»¶åˆ¤æ–­where" class="headerlink" title="æ¡ä»¶åˆ¤æ–­where"></a>æ¡ä»¶åˆ¤æ–­where</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from è¡¨ where id &gt; 1 and name !&#x3D; &#39;aylin&#39; and num &#x3D; 12;</span><br><span class="line">select * from è¡¨ where id between 5 and 16;</span><br><span class="line">select * from è¡¨ where id in (11,22,33)</span><br><span class="line">select * from è¡¨ where id not in (11,22,33)</span><br><span class="line">select * from è¡¨ where id in (select nid from è¡¨)</span><br></pre></td></tr></table></figure>
<h4 id="é€šé…ç¬¦like"><a href="#é€šé…ç¬¦like" class="headerlink" title="é€šé…ç¬¦like"></a>é€šé…ç¬¦like</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from è¡¨ where name like &#39;zhang%&#39;  # zhangå¼€å¤´çš„æ‰€æœ‰ï¼ˆå¤šä¸ªå­—ç¬¦ä¸²ï¼‰</span><br><span class="line">select * from è¡¨ where name like &#39;zhang_&#39;  # zhangå¼€å¤´çš„æ‰€æœ‰ï¼ˆä¸€ä¸ªå­—ç¬¦ï¼‰</span><br></pre></td></tr></table></figure>
<h4 id="é™åˆ¶limit"><a href="#é™åˆ¶limit" class="headerlink" title="é™åˆ¶limit"></a>é™åˆ¶limit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from è¡¨ limit 5;            - å‰5è¡Œ</span><br><span class="line">select * from è¡¨ limit 4,5;          - ä»ç¬¬4è¡Œå¼€å§‹çš„5è¡Œ</span><br><span class="line">select * from è¡¨ limit 5 offset 4    - ä»ç¬¬4è¡Œå¼€å§‹çš„5è¡Œ</span><br></pre></td></tr></table></figure>
<h4 id="æ’åºascï¼Œdesc"><a href="#æ’åºascï¼Œdesc" class="headerlink" title="æ’åºascï¼Œdesc"></a>æ’åºascï¼Œdesc</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from è¡¨ order by åˆ— asc              - æ ¹æ® â€œåˆ—â€ ä»å°åˆ°å¤§æ’åˆ—</span><br><span class="line">select * from è¡¨ order by åˆ— desc             - æ ¹æ® â€œåˆ—â€ ä»å¤§åˆ°å°æ’åˆ—</span><br><span class="line">select * from è¡¨ order by åˆ—1 desc,åˆ—2 asc    - æ ¹æ® â€œåˆ—1â€ ä»å¤§åˆ°å°æ’åˆ—ï¼Œå¦‚æœç›¸åŒåˆ™æŒ‰åˆ—2ä»å°åˆ°å¤§æ’åº</span><br></pre></td></tr></table></figure>
<h4 id="åˆ†ç»„group-by"><a href="#åˆ†ç»„group-by" class="headerlink" title="åˆ†ç»„group by"></a>åˆ†ç»„group by</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select num from è¡¨ group by num</span><br><span class="line">select num,nid from è¡¨ group by num,nid</span><br><span class="line">select num,nid from è¡¨  where nid &gt; 10 group by num,nid order nid desc</span><br><span class="line">select num,nid,count(*),sum(score),max(score),min(score) from è¡¨ group by num,nid</span><br><span class="line">select num from è¡¨ group by num having max(id) &gt; 10</span><br><span class="line"></span><br><span class="line">ç‰¹åˆ«çš„ï¼šgroup by å¿…é¡»åœ¨whereä¹‹åï¼Œorder byä¹‹å‰</span><br></pre></td></tr></table></figure>
<p><a href="https://mp.weixin.qq.com/s/ha_tlD0H_HrrdbmoB7NlzA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/ha_tlD0H_HrrdbmoB7NlzA</a></p>
]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>SQL</tag>
        <tag>MySQL</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>Typoraä½¿ç”¨</title>
    <url>/2020/09/04/Typora%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="æ’å…¥å¤§çº²ç›®å½•"><a href="#æ’å…¥å¤§çº²ç›®å½•" class="headerlink" title="æ’å…¥å¤§çº²ç›®å½•"></a>æ’å…¥å¤§çº²ç›®å½•</h2><p>ä½¿ç”¨ <code>[TOC]</code>å¯ä»¥åœ¨é¡¶éƒ¨æ˜¾ç¤ºç›®å½•ï¼Œä½†æ˜¯hexoä¸èƒ½æ¸²æŸ“</p>
<h2 id="å·¦ä¾§å¤§çº²è§†å›¾æŠ˜å "><a href="#å·¦ä¾§å¤§çº²è§†å›¾æŠ˜å " class="headerlink" title="å·¦ä¾§å¤§çº²è§†å›¾æŠ˜å "></a>å·¦ä¾§å¤§çº²è§†å›¾æŠ˜å </h2><p>Typora ä¸­ shift+ctrl+O å¯ä»¥åœ¨å·¦ä¾§æ˜¾ç¤ºå¤§çº²è§†å›¾ï¼Œä½†æ˜¯å½“ç›®å½•å¾ˆé•¿ï¼Œé»˜è®¤å±•å¼€æ—¶ï¼Œ</p>
<p>æ–‡ä»¶ â‡’ åå¥½è®¾ç½® â‡’ ä¾§è¾¹æ  â‡’  é€‰ä¸­ä¾§è¾¹æ çš„å¤§çº²è§†å›¾å…è®¸æŠ˜å å’Œå±•å¼€ã€‚</p>
<p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/tian-ci/p/10543088.html" target="_blank" rel="noopener">https://www.cnblogs.com/tian-ci/p/10543088.html</a></p>
]]></content>
      <categories>
        <category>markdown</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>Typora</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»Ÿ</title>
    <url>/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<h2 id="è®¤è¯†æ“ä½œç³»ç»Ÿ"><a href="#è®¤è¯†æ“ä½œç³»ç»Ÿ" class="headerlink" title="è®¤è¯†æ“ä½œç³»ç»Ÿ"></a>è®¤è¯†æ“ä½œç³»ç»Ÿ</h2><p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600217528868.png" alt="1600217528868"></p>
<a id="more"></a>
<h3 id="x86-ç³»ç»Ÿçš„ç»“æ„"><a href="#x86-ç³»ç»Ÿçš„ç»“æ„" class="headerlink" title="x86 ç³»ç»Ÿçš„ç»“æ„"></a>x86 ç³»ç»Ÿçš„ç»“æ„</h3><p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600160298027.png" alt="1600160298027"></p>
<h4 id="PCI-E"><a href="#PCI-E" class="headerlink" title="PCI-E"></a>PCI-E</h4><p>PCIe (Peripheral Component Interconnect Expressï¼ŒPCI-Express)ä¸€ç§é«˜é€Ÿä¸²è¡Œè®¡ç®—æœºæ‰©å±•æ€»çº¿æ ‡å‡†ï¼ŒPCIeå±äºé«˜é€Ÿä¸²è¡Œç‚¹å¯¹ç‚¹åŒé€šé“é«˜å¸¦å®½ä¼ è¾“ï¼Œæ‰€è¿æ¥çš„è®¾å¤‡åˆ†é…ç‹¬äº«é€šé“å¸¦å®½ï¼Œä¸å…±äº«æ€»çº¿å¸¦å®½ï¼Œä¸»è¦æ”¯æŒä¸»åŠ¨ç”µæºç®¡ç†ï¼Œé”™è¯¯æŠ¥å‘Šï¼Œç«¯å¯¹ç«¯çš„å¯é æ€§ä¼ è¾“ï¼Œçƒ­æ’æ‹”ä»¥åŠæœåŠ¡è´¨é‡(<a href="https://baike.baidu.com/item/QOS" target="_blank" rel="noopener">QOS</a>)ç­‰åŠŸèƒ½ã€‚</p>
<p>PCIe Sizesï¼šx16 vs x8 vs x4 vs x1</p>
<p>xåé¢çš„æ•°å­—è¡¨ç¤ºPCIeå¡æˆ–æ’æ§½çš„ç‰©ç†å¤§å°ï¼Œx16æ˜¯æœ€å¤§çš„ï¼Œx1æ˜¯æœ€å°çš„ã€‚ä»¥ä¸‹æ˜¯å„ç§å°ºå¯¸çš„å½¢çŠ¶ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>-</th>
<th>Number of Pinsï¼ˆå¼•è„šçš„æ•°é‡ï¼‰</th>
<th>Length</th>
</tr>
</thead>
<tbody>
<tr>
<td>PCI Express x1</td>
<td>18</td>
<td>25æ¯«ç±³</td>
</tr>
<tr>
<td>PCI Express x4</td>
<td>32</td>
<td>39æ¯«ç±³</td>
</tr>
<tr>
<td>PCI Express x8</td>
<td>49</td>
<td>56æ¯«ç±³</td>
</tr>
<tr>
<td>PCI Express x16</td>
<td>82</td>
<td>89æ¯«ç±³</td>
</tr>
</tbody>
</table>
</div>
<p>ä¸ç®¡PCIeæ’æ§½æˆ–å¡ç‰‡çš„å¤§å°æ˜¯å¤šå°‘ï¼Œå…³é”®çš„å‡¹æ§½ï¼Œå¡æˆ–æ§½ä¸­çš„å°ç©ºé—´ï¼Œæ€»æ˜¯åœ¨å¤§å¤´é’ˆ11ä¸Šã€‚</p>
<p>PCIeå¡ç‰‡é€‚åˆäºä¸»æ¿ä¸Šçš„ä»»ä½•PCIeæ’æ§½ï¼Œå®ƒçš„å¤§å°è‡³å°‘å’Œå®ƒä¸€æ ·å¤§ã€‚ä¾‹å¦‚ï¼ŒPCIe x1å¡å°†é€‚ç”¨äºä»»ä½•PCIe x4ã€PCIe x8æˆ–PCIe x16æ’æ§½ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180718153127412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JqYXJuZUNwcA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h4 id="MDI"><a href="#MDI" class="headerlink" title="MDI"></a>MDI</h4><p>Medium Dependent Interface ï¼Œä»‹è´¨ç›¸å…³æ¥å£ã€‚åœ¨ hub æˆ– switch ä¸­æœ‰ä¸¤ç§æ¥å£ï¼Œåˆ†åˆ«å« MDI portå’Œ MDI-X portï¼Œ MDI port ä¹Ÿå«åšçº§è”ç«¯å£ï¼ˆ uplink port ï¼‰ï¼Œæ˜¯ hub æˆ– switch ä¹‹é—´ç›¸äº’è¿æ¥çš„ç«¯å£ã€‚ </p>
<p>MDI portå’Œ MDI-X port ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œ MDI portå†…éƒ¨å‘é€æ•°æ®çº¿å’Œæ¥æ”¶æ•°æ®çº¿æ²¡äº¤å‰ï¼Œ è€ŒMDI-X port å†…éƒ¨å‘é€æ•°æ®çº¿å’Œæ¥æ”¶æ•°æ®çº¿æ˜¯äº¤å‰çš„ï¼Œè¿™ä¸ªXä»£è¡¨äº¤å‰çš„æ„æ€ã€‚</p>
<p><img src="https://bkimg.cdn.bcebos.com/pic/9345d688d43f8794964ce0bdd31b0ef41ad53af5?x-bce-process=image/resize,m_lfit,w_250,h_250,limit_1" alt="img"></p>
<p>è®¡ç®—æœºå’Œäº¤æ¢æœºçš„è¿æ¥è¦ç”¨ç›´é€šçº¿ï¼Œäº¤æ¢æœºå’Œäº¤æ¢æœºä¹‹é—´çš„è¿æ¥è¦ç”¨äº¤å‰çº¿ï¼Œ</p>
<h4 id="DMI"><a href="#DMI" class="headerlink" title="DMI"></a>DMI</h4><p>DMIæ˜¯æŒ‡Direct Media Interface(ç›´æ¥åª’ä½“æ¥å£)ï¼Œç”¨äºè¿æ¥ä¸»æ¿å—åŒ—æ¡¥çš„æ€»çº¿ï¼Œå–ä»£äº†ä»¥å‰çš„Hub-Linkæ€»çº¿ã€‚å®ƒåŸºäº<a href="https://baike.baidu.com/item/PCI-Express" target="_blank" rel="noopener">PCI-Express</a>æ€»çº¿ï¼Œè·ŸéšPCI-Eæ€»çº¿çš„æ¢ä»£è€Œæ¢ä»£ã€‚DMIé‡‡ç”¨ç‚¹å¯¹ç‚¹çš„è¿æ¥æ–¹å¼ï¼Œæ—¶é’Ÿé¢‘ç‡ä¸º100MHzã€‚</p>
<h4 id="USB"><a href="#USB" class="headerlink" title="USB"></a>USB</h4><p>USB(Univversal Serial Bus) è¿æ¥æ…¢é€Ÿ I/O è®¾å¤‡å’Œè®¡ç®—æœºã€‚USB 1.0 ï¼š12 Mb/sï¼ŒUSB 2.0 æ€»çº¿é€Ÿåº¦ 480Mb/sï¼ŒUSB 3.0ä¸å°äº 5Gb/sã€‚USBè¿æ¥ä¸éœ€è¦é‡å¯è®¡ç®—æœºã€‚</p>
<h4 id="SCSI"><a href="#SCSI" class="headerlink" title="SCSI"></a>SCSI</h4><p>SCSI(Small Computer System Interface) æ€»çº¿æ˜¯ä¸€ç§é«˜é€Ÿæ€»çº¿ï¼Œç”¨åœ¨é«˜é€Ÿç¡¬ç›˜ï¼Œæ‰«æä»ªå’Œå…¶ä»–éœ€è¦è¾ƒå¤§å¸¦å®½çš„è®¾å¤‡ä¸Šã€‚ç°åœ¨ï¼Œå®ƒä»¬ä¸»è¦ç”¨åœ¨æœåŠ¡å™¨å’Œå·¥ä½œç«™ä¸­ï¼Œé€Ÿåº¦å¯ä»¥è¾¾åˆ°640MB/sã€‚</p>
<h3 id="å­˜å‚¨å™¨"><a href="#å­˜å‚¨å™¨" class="headerlink" title="å­˜å‚¨å™¨"></a>å­˜å‚¨å™¨</h3><h4 id="RAM"><a href="#RAM" class="headerlink" title="RAM"></a>RAM</h4><h4 id="ROM"><a href="#ROM" class="headerlink" title="ROM"></a>ROM</h4><blockquote>
<ol>
<li><p>romæœ€åˆä¸èƒ½ç¼–ç¨‹ï¼Œå‡ºå‚ä»€ä¹ˆå†…å®¹å°±æ°¸è¿œä»€ä¹ˆå†…å®¹ï¼Œä¸çµæ´»ã€‚</p>
</li>
<li><p>åæ¥å‡ºç°äº†promï¼Œå¯ä»¥è‡ªå·±å†™å…¥ä¸€æ¬¡ï¼Œè¦æ˜¯å†™é”™äº†ï¼Œåªèƒ½æ¢ä¸€ç‰‡ã€‚</p>
</li>
<li><p>äººç±»æ–‡æ˜ä¸æ–­è¿›æ­¥ï¼Œç»ˆäºå‡ºç°äº†å¯å¤šæ¬¡æ“¦é™¤å†™å…¥çš„EPROMï¼Œæ¯æ¬¡æ“¦é™¤è¦æŠŠèŠ¯ç‰‡æ‹¿åˆ°ç´«å¤–çº¿ä¸Šç…§ä¸€ä¸‹.</p>
</li>
<li><p>å†å²çš„è½¦è½®ä¸æ–­å‰è¿›ï¼Œä¼Ÿå¤§çš„EEPROMå‡ºç°äº†ï¼Œæ‹¯æ•‘äº†ä¸€å¤§æ‰¹ç¨‹åºå‘˜ï¼Œç»ˆäºå¯ä»¥éšæ„çš„ä¿®æ”¹romä¸­çš„å†…å®¹äº†ã€‚</p>
<p>ROMâ€”PROMâ€”EPROMâ€”EEPROMçš„è¿›åŒ–ï¼</p>
</li>
</ol>
</blockquote>
<h4 id="EEPROM"><a href="#EEPROM" class="headerlink" title="EEPROM"></a>EEPROM</h4><p>å…¨ç§°æ˜¯â€œç”µå¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼Œå³Electrically Erasable Programmable Read-Only Memoryã€‚æ˜¯ç›¸å¯¹äºç´«å¤–æ“¦é™¤çš„romæ¥è®²çš„ã€‚ä½†æ˜¯ä»Šå¤©å·²ç»å­˜åœ¨å¤šç§EEPROMçš„å˜ç§ï¼Œå˜æˆäº†ä¸€ç±»å­˜å‚¨å™¨çš„ç»Ÿç§°ã€‚</p>
<h4 id="Flash"><a href="#Flash" class="headerlink" title="Flash"></a>Flash</h4><p>ç‹­ä¹‰çš„EEPROMï¼šè¿™ç§romçš„ç‰¹ç‚¹æ˜¯å¯ä»¥éšæœºè®¿é—®å’Œä¿®æ”¹ä»»ä½•ä¸€ä¸ªå­—èŠ‚ï¼Œå¯ä»¥å¾€æ¯ä¸ªbitä¸­å†™å…¥0æˆ–è€…1ã€‚è¿™æ˜¯æœ€ä¼ ç»Ÿçš„ä¸€ç§EEPROMï¼Œæ‰ç”µåæ•°æ®ä¸ä¸¢å¤±ï¼Œå¯ä»¥ä¿å­˜100å¹´ï¼Œå¯ä»¥æ“¦å†™100wæ¬¡ã€‚å…·æœ‰è¾ƒé«˜çš„å¯é æ€§ï¼Œä½†æ˜¯ç”µè·¯å¤æ‚/æˆæœ¬ä¹Ÿé«˜ã€‚å› æ­¤ç›®å‰çš„EEPROMéƒ½æ˜¯å‡ ååƒå­—èŠ‚åˆ°å‡ ç™¾åƒå­—èŠ‚çš„ï¼Œç»å°‘æœ‰è¶…è¿‡512Kçš„ã€‚</p>
<p>Flashå±äºå¹¿ä¹‰çš„EEPROMï¼Œä¹Ÿæ˜¯ç”µæ“¦é™¤çš„romã€‚ä½†æ“¦é™¤æ—¶ä¸å†ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè€Œæ˜¯ä»¥å—ä¸ºå•ä½ï¼Œä¸€æ¬¡ç®€åŒ–äº†ç”µè·¯ï¼Œæ•°æ®å¯†åº¦æ›´é«˜ï¼Œé™ä½äº†æˆæœ¬ã€‚ä¸ŠMçš„romä¸€èˆ¬éƒ½æ˜¯flashã€‚</p>
<p>flashåˆ†ä¸ºnor flashå’Œnand flashã€‚</p>
<blockquote>
<ol>
<li>nor flashæ•°æ®çº¿å’Œåœ°å€çº¿åˆ†å¼€ï¼Œå¯ä»¥å®ç°ramä¸€æ ·çš„éšæœºå¯»å€åŠŸèƒ½ï¼Œå¯ä»¥è¯»å–ä»»ä½•ä¸€ä¸ªå­—èŠ‚ã€‚ä½†æ˜¯æ“¦é™¤ä»è¦æŒ‰å—æ¥æ“¦ã€‚</li>
<li>nand flashåŒæ ·æ˜¯æŒ‰å—æ“¦é™¤ï¼Œä½†æ˜¯æ•°æ®çº¿å’Œåœ°å€çº¿å¤ç”¨ï¼Œä¸èƒ½åˆ©ç”¨åœ°å€çº¿éšæœºå¯»å€ã€‚è¯»å–åªèƒ½æŒ‰é¡µæ¥è¯»å–ã€‚ï¼ˆnandflashæŒ‰å—æ¥æ“¦é™¤ï¼ŒæŒ‰é¡µæ¥è¯»ï¼Œnorflashæ²¡æœ‰é¡µï¼‰</li>
<li>ç”±äºnandflashå¼•è„šä¸Šå¤ç”¨ï¼Œå› æ­¤è¯»å–é€Ÿåº¦æ¯”nor flashæ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯æ“¦é™¤å’Œå†™å…¥é€Ÿåº¦æ¯”nor flashå¿«å¾ˆå¤šã€‚nand flashå†…éƒ¨ç”µè·¯æ›´ç®€å•ï¼Œå› æ­¤æ•°æ®å¯†åº¦å¤§ï¼Œä½“ç§¯å°ï¼Œæˆæœ¬ä¹Ÿä½ã€‚å› æ­¤å¤§å®¹é‡çš„flashéƒ½æ˜¯nandå‹çš„ã€‚å°å®¹é‡çš„2ï½12Mçš„flashå¤šæ˜¯norå‹çš„ã€‚</li>
<li>ä½¿ç”¨å¯¿å‘½ä¸Šï¼Œnand flashçš„æ“¦é™¤æ¬¡æ•°æ˜¯norçš„æ•°å€ã€‚è€Œä¸”nand flashå¯ä»¥æ ‡è®°åå—ï¼Œä»è€Œä½¿è½¯ä»¶è·³è¿‡åå—ã€‚nor flash ä¸€æ—¦æŸåä¾¿æ— æ³•å†ç”¨ã€‚</li>
<li>å› ä¸ºnor flashå¯ä»¥è¿›è¡Œå­—èŠ‚å¯»å€ï¼Œæ‰€ä»¥ç¨‹åºå¯ä»¥åœ¨nor flashä¸­è¿è¡Œã€‚åµŒå…¥å¼ç³»ç»Ÿå¤šç”¨ä¸€ä¸ªå°å®¹é‡çš„nor flashå­˜å‚¨å¼•å¯¼ä»£ç ï¼Œç”¨ä¸€ä¸ªå¤§å®¹é‡çš„nand flashå­˜æ”¾æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸ã€‚</li>
</ol>
</blockquote>
<p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/Pual623548198/p/7085319.html" target="_blank" rel="noopener">https://www.cnblogs.com/Pual623548198/p/7085319.html</a></p>
<h3 id="ä¸»æ¿"><a href="#ä¸»æ¿" class="headerlink" title="ä¸»æ¿"></a>ä¸»æ¿</h3><h4 id="åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ-Basic-Input-Output-System-BIOS"><a href="#åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ-Basic-Input-Output-System-BIOS" class="headerlink" title="åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ(Basic Input Output System, BIOS)"></a>åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ(Basic Input Output System, BIOS)</h4><p>ä¿å­˜åœ¨é—ªå­˜ä¸­ï¼Œéæ˜“å¤±æ€§ã€‚</p>
<p>æœ‰åº•å±‚I/0è½¯ä»¶ï¼šè¯»é”®ç›˜ï¼Œå†™å±å¹•ï¼Œç£ç›˜I/Oã€‚</p>
<p>è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œæ£€æŸ¥è®¾å¤‡ï¼Œé€šè¿‡å°è¯•å­˜å‚¨åœ¨CMOSå­˜å‚¨å™¨ä¸­çš„è®¾å¤‡æ¸…å•å°è¯•å¯åŠ¨è®¾å¤‡ã€‚</p>
<p>å†³å®šä»å¤–éƒ¨ï¼ˆCD-ROMï¼ŒUSBï¼‰è¿˜æ˜¯ç¡¬ç›˜å¯åŠ¨ã€‚</p>
<h4 id="äº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“-Complementary-Metal-Oxide-Semiconductor-CMOS"><a href="#äº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“-Complementary-Metal-Oxide-Semiconductor-CMOS" class="headerlink" title="äº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“(Complementary Metal Oxide Semiconductor , CMOS)"></a>äº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“(Complementary Metal Oxide Semiconductor , CMOS)</h4><p>ç”µè„‘ä¸»æ¿ä¸Šçš„ä¸€å—å¯è¯»å†™çš„RAMèŠ¯ç‰‡ã€‚ç”¨æ¥ä¿å­˜BIOSè®¾ç½®å®Œç”µè„‘ç¡¬ä»¶å‚æ•°åçš„æ•°æ®ã€‚</p>
<h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><h4 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h4><p>å¤§å‹æœºæ“ä½œç³»ç»Ÿ</p>
<p>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼šå…¸å‹çš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿæœ‰Solarisï¼Œ FreeBSDï¼ŒLinuxï¼ŒWindows Server 201x</p>
<p>å¤šå¤„ç†å™¨æ“ä½œç³»ç»Ÿï¼šå°†å¤šä¸ªCPUè¿æ¥åˆ°ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œå¹¶è¡Œè®¡ç®—æœºï¼ˆå¤šæ ¸å¤„ç†å™¨ï¼‰</p>
<p>ä¸ªäººè®¡ç®—æœºç³»ç»Ÿï¼šLinuxï¼ŒFreeBSDï¼ŒWindows 7ï¼ŒWindows 8 ï¼Œ OS X</p>
<p>æŒä¸Šè®¡ç®—æœºï¼šAbdroidå’ŒIOS</p>
<p>åµŒå…¥å¼æ“ä½œç³»ç»Ÿï¼š</p>
<p>ä¼ æ„Ÿå™¨èŠ‚ç‚¹æ“ä½œç³»ç»Ÿï¼š</p>
<p>å®æ—¶æ“ä½œç³»ç»Ÿï¼šç¡¬å®æ—¶ç³»ç»Ÿå’Œè½¯å®æ—¶ç³»ç»Ÿ</p>
<p>æ™ºèƒ½å¡æ“ä½œç³»ç»Ÿï¼šä¿¡ç”¨å¡</p>
<h4 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h4><p>æœ¬è´¨æ˜¯æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„ä¸€ä¸ªç¨‹åºã€‚</p>
<h5 id="åœ°å€ç©ºé—´ï¼š"><a href="#åœ°å€ç©ºé—´ï¼š" class="headerlink" title="åœ°å€ç©ºé—´ï¼š"></a>åœ°å€ç©ºé—´ï¼š</h5><p>32ä½æœ‰2^32å­—èŠ‚çš„åœ°å€ç©ºé—´ï¼Œ64ä½æœ‰2^64å­—èŠ‚çš„åœ°å€ç©ºé—´ã€‚</p>
<p>é€šå¸¸ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ä¸€äº›å¯ä»¥ä½¿ç”¨çš„åœ°å€é›†åˆï¼Œå…¸å‹å€¼ä»0å¼€å§‹åˆ°æŸä¸ªæœ€å¤§å€¼ï¼Œä¸€ä¸ªè¿›ç¨‹å¯æ‹¥æœ‰çš„æœ€å¤§åœ°å€ç©ºé—´å°äºä¸»å­˜ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿è¿›ç¨‹ç”¨å®Œå…¶åœ°å€ç©ºé—´ï¼Œå†…å­˜ä¹Ÿä¼šæœ‰è¶³å¤Ÿçš„å†…å­˜è¿è¡Œè¯¥è¿›ç¨‹ã€‚</p>
<blockquote>
<p>å¦‚æœè¿›ç¨‹çš„åœ°å€ç©ºé—´æ¯”ä¸»å­˜è¿˜å¤§ï¼Œå¯ä»¥æŠŠéƒ¨åˆ†åœ°å€ç©ºé—´è£…å…¥ä¸»å­˜ï¼Œéƒ¨åˆ†ç•™åœ¨ç£ç›˜ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ¥å›äº¤æ¢ï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰</p>
</blockquote>
<p>ç£èŠ¯æ˜ åƒ core image</p>
<p>èµ„æºé›†ï¼šå¯„å­˜å™¨ï¼ˆç¨‹åºè®¡æ•°å™¨å’Œå †æ ˆæŒ‡é’ˆï¼‰ï¼Œæ‰“å¼€æ–‡ä»¶çš„æ¸…å•ç­‰ ï¼ˆè¿™äº›éƒ½åœ¨è¿›ç¨‹è¡¨ä¸­ï¼‰</p>
<p>è¿›ç¨‹è¡¨ï¼šä¸ä¸€ä¸ªè¿›ç¨‹ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé™¤äº†è¯¥è¿›ç¨‹è‡ªèº«ç©ºé—´çš„å†…å®¹ä»¥å¤–ï¼Œå‡å­˜æ”¾åœ¨æ“ä½œç³»ç»Ÿçš„ä¸€å¼ è¡¨ä¸­ã€‚æ˜¯æ•°ç»„æˆ–è€…é“¾è¡¨ç»“æ„ï¼Œå½“å‰å­˜åœ¨æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½å æ®å…¶ä¸­çš„ä¸€é¡¹ã€‚</p>
<p>è¿›ç¨‹é—´é€šä¿¡ï¼šåˆä½œå®ŒæˆæŸäº›ä½œä¸šçš„ç›¸å…³è¿›ç¨‹éœ€è¦å½¼æ­¤é€šä¿¡</p>
<h4 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h4><p>è¯»å†™ä¹‹å‰ï¼Œæ£€æŸ¥è®¿é—®æƒé™ï¼Œè‹¥æƒé™è®¸å¯ï¼Œç³»ç»Ÿè¿”å›ä¸€ä¸ªå°æ•´æ•°ï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œè‹¥ç¦æ­¢è®¿é—®ï¼Œç³»ç»Ÿè¿”å›ä¸€ä¸ªé”™è¯¯ç ã€‚</p>
<p>UNIXçš„ç‰¹æ®Šæ–‡ä»¶ï¼šä¸ºäº†ä½¿ç³»ç»Ÿå‘è°ƒç”¨è¯»å†™æ–‡ä»¶ä¸€æ ·è°ƒç”¨I/Oè®¾å¤‡</p>
<p>å—ç‰¹æ®Šæ–‡ä»¶ï¼šå¯éšæœºå­˜å–çš„å—ç»„æˆçš„è®¾å¤‡ï¼Œæ¯”å¦‚ç£ç›˜</p>
<p>å­—ç¬¦ç‰¹æ®Šæ–‡ä»¶ï¼šç”¨äºæ‰“å°æœºï¼Œè°ƒåˆ¶è§£è°ƒå™¨å’Œå…¶ä»–æ¥å—æˆ–è¾“å‡ºå­—ç¬¦æµçš„è®¾å¤‡ã€‚</p>
<p>ç®¡é“ï¼šä¸€ç§è™šæ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥è¿æ¥ä¸¤ä¸ªè¿›ç¨‹ã€‚</p>
<h4 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h4><p>æä¾›åº”ç”¨ç¨‹åºæŠ½è±¡ï¼šåˆ›å»ºï¼Œå†™å…¥ï¼Œè¯»å–å’Œåˆ é™¤æ–‡ä»¶ã€‚</p>
<p>ç®¡ç†è®¡ç®—èµ„æºï¼š</p>
<h4 id="ç³»ç»Ÿè°ƒç”¨"><a href="#ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨"></a>ç³»ç»Ÿè°ƒç”¨</h4><p>ä»¥ç³»ç»Ÿè°ƒç”¨read(fd, buffer, nbytes)ä¸ºä¾‹</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600168907591.png" alt="1600168907591"></p>
<p>é¦–å…ˆæŠŠå‚æ•°å‹å…¥æ ˆå †ï¼š1. Cå’ŒC++ç¼–è¯‘å™¨ä½¿ç”¨é€†åº 2. ç¬¬äºŒä¸ªå‚æ•°é€šè¿‡å¼•ç”¨ä¼ é€’ï¼Œå³ä¼ é€’çš„æ˜¯ç¼“å†²åŒºçš„åœ°å€ &amp;</p>
<p>TRAPæŒ‡ä»¤ï¼šå°†ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ã€‚</p>
<p>å®Œæˆè°ƒç”¨ä¹‹åï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æ¸…é™¤ç”¨æˆ·å †æ ˆï¼Œå¢åŠ å †æ ˆæŒ‡é’ˆï¼ˆincrement stackpointerï¼‰</p>
<h5 id="ç”¨äºè¿›ç¨‹ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"><a href="#ç”¨äºè¿›ç¨‹ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç”¨äºè¿›ç¨‹ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"></a>ç”¨äºè¿›ç¨‹ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨</h5><p>forkåˆ›å»ºåŸæœ‰è¿›ç¨‹çš„å‰¯æœ¬ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„æ–‡ä»¶æè¿°ï¼Œå¯„å­˜å™¨ç­‰ã€‚forkè°ƒç”¨è¿”å›ä¸€ä¸ªå€¼ï¼Œåœ¨å­è¿›ç¨‹ä¸­ä¸º0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­ç­‰äºå­è¿›ç¨‹çš„è¿›ç¨‹æ ‡è¯†ç¬¦ï¼ˆProcess IDentifiedï¼ŒPIDï¼‰ã€‚</p>
<h5 id="ç”¨äºæ–‡ä»¶ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"><a href="#ç”¨äºæ–‡ä»¶ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç”¨äºæ–‡ä»¶ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"></a>ç”¨äºæ–‡ä»¶ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨</h5><p>O_RDONLY O_WRONLY O_RDWR</p>
<p>iseek(fd,offset,whence)</p>
<h5 id="ç”¨äºç›®å½•ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"><a href="#ç”¨äºç›®å½•ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç”¨äºç›®å½•ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨"></a>ç”¨äºç›®å½•ç®¡ç†çš„ç³»ç»Ÿè°ƒç”¨</h5><p>mkdir   rmdir</p>
<p>link(name1,name2) å…è®¸åŒä¸€ä¸ªæ–‡ä»¶ä»¥ä¸¤ä¸ªæˆ–è€…å¤šä¸ªåç§°å‡ºç°ã€‚</p>
<p>æ¯ä¸ªæ–‡ä»¶éƒ½ç‹¬ä¸€æ— äºŒï¼Œi-number æ˜¯inodesè¡¨çš„ç´¢å¼•ã€‚ç›®å½•æ˜¯ä¸€ç³»åˆ—ï¼ˆi-ç¼–å·ï¼ŒASCIIåç§°ï¼‰çš„é›†åˆã€‚</p>
<p>linkåˆ©ç”¨æŸä¸ªå·²æœ‰æ–‡ä»¶çš„i-ç¼–å·ï¼Œç©¿ä»¶ä¸€ä¸ªæ–°çš„ç›®å½•é¡¹ã€‚</p>
<p>mount(specila, name, flag)å°†ä¸¤ä¸ªæ–‡ä»¶ç³»ç»Ÿåˆå¹¶ä¸ºä¸€ä¸ªã€‚<img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600174254344.png" alt="1600174254344"></p>
<h5 id="å…¶ä»–ç³»ç»Ÿè°ƒç”¨"><a href="#å…¶ä»–ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="å…¶ä»–ç³»ç»Ÿè°ƒç”¨"></a>å…¶ä»–ç³»ç»Ÿè°ƒç”¨</h5><p>chdir    chmod   kill</p>
<h3 id="Win-32-API"><a href="#Win-32-API" class="headerlink" title="Win 32 API"></a>Win 32 API</h3><p>UNIXç¨‹åºç”±æ‰§è¡ŒæŸäº›æ“ä½œæˆ–æ‰§è¡Œå…¶ä»–æ“ä½œçš„ä»£ç ç»„æˆï¼Œè¿›è¡Œç³»ç»Ÿè°ƒç”¨ä»¥æ‰§è¡ŒæŸäº›æœåŠ¡ã€‚</p>
<p>Windowsåº”ç”¨ç¨‹åºé€šå¸¸æ˜¯ç”±äº‹ä»¶é©±åŠ¨çš„ï¼Œä¸»ç¨‹åºç­‰å¾…ä¸€äº›æ—¶é—´å‘ç”Ÿï¼Œç„¶åè°ƒç”¨ç¨‹åºå»å¤„ç†ã€‚</p>
<p>winä¸­å‡½æ•°åº“çš„è°ƒç”¨å’Œå®é™…çš„ç³»ç»Ÿè°ƒç”¨å‡ ä¹æ˜¯ä¸å¯¹åº”çš„ã€‚</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600174669528.png" alt="1600174669528"></p>
<p>windowsä¸­æ²¡æœ‰ç±»ä¼¼UNIXä¸­çš„è¿›ç¨‹å±‚æ¬¡ï¼Œä¸å­˜åœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹çš„æ¦‚å¿µã€‚</p>
<h3 id="æ“ä½œç³»ç»Ÿç»“æ„"><a href="#æ“ä½œç³»ç»Ÿç»“æ„" class="headerlink" title="æ“ä½œç³»ç»Ÿç»“æ„"></a>æ“ä½œç³»ç»Ÿç»“æ„</h3><h4 id="å•ä½“ç³»ç»Ÿ"><a href="#å•ä½“ç³»ç»Ÿ" class="headerlink" title="å•ä½“ç³»ç»Ÿ"></a>å•ä½“ç³»ç»Ÿ</h4><p>å†…æ ¸æ€ä»¥å•ä¸€ç¨‹åºçš„æ–¹å¼è¿è¡Œ</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600216350126.png" alt="1600216350126"></p>
<p>é™¤äº†æ ¸å¿ƒæ“ä½œç³»ç»Ÿå¤–ï¼Œæ“ä½œç³»ç»Ÿè¿˜æ”¯æŒæ‰©å±•ï¼šI/Oè®¾å¤‡é©±åŠ¨å’Œæ–‡ä»¶ç³»ç»Ÿã€‚UNIXä¸­å«åš<strong>å…±äº«åº“ï¼ˆshared libraryï¼‰</strong>ï¼Œwindowsä¸­å«åš**åŠ¨æ€é“¾æ¥åº“ï¼ˆDynamic Link Libraryï¼ŒDLLï¼‰</p>
<h4 id="åˆ†å±‚ç³»ç»Ÿ"><a href="#åˆ†å±‚ç³»ç»Ÿ" class="headerlink" title="åˆ†å±‚ç³»ç»Ÿ"></a>åˆ†å±‚ç³»ç»Ÿ</h4><p>ä½¿ç”¨å±‚æ¥åˆ†éš”ä¸åŒçš„åŠŸèƒ½å•å…ƒï¼Œæ¯ä¸€å±‚åªä¸è¯¥å±‚çš„ä¸Šå±‚å’Œä¸‹å±‚é€šä¿¡ã€‚ä¸Šå±‚è½¯ä»¶éƒ½æ˜¯åœ¨ä¸‹å±‚è½¯ä»¶çš„åŸºç¡€ä¹‹ä¸Šæ„å»ºçš„ã€‚</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600216585570.png" alt="1600216585570"></p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600216594038.png" alt="1600216594038"></p>
<h4 id="å¾®å†…æ ¸"><a href="#å¾®å†…æ ¸" class="headerlink" title="å¾®å†…æ ¸"></a>å¾®å†…æ ¸</h4><p>åœ¨åˆ†å±‚æ–¹å¼ä¸­ï¼Œç¡®å®šå“ªé‡Œåˆ’åˆ†å†…æ ¸-ç”¨æˆ·çš„åˆ†ç•Œã€‚</p>
<p>MINIX3</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600217029845.png" alt="1600217029845"></p>
<p>å¾®å†…æ ¸ä¸­æœºåˆ¶ä¸ç­–ç•¥åˆ†ç¦»ï¼Œå†…æ ¸å‡å€¼å¯»æ‰¾æœ€é«˜çš„ä¼˜å…ˆçº§è¿›ç¨‹å¹¶è¿è¡Œï¼Œç­–ç•¥ï¼ˆèµ‹äºˆè¿›ç¨‹ä¼˜å…ˆçº§ï¼‰å¯ä»¥åœ¨ç”¨æˆ·æ€ä¸­çš„è¿›ç¨‹å®Œæˆã€‚</p>
<h4 id="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼"><a href="#å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼" class="headerlink" title="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼"></a>å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼</h4><p>å½“ç­–ç•¥å°†è¿›ç¨‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæœåŠ¡å™¨ï¼ˆæä¾›æœåŠ¡ï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆä½¿ç”¨æœåŠ¡ï¼‰â€”â€”å®¢æˆ·-æœåŠ¡æ¨¡å¼ã€‚</p>
<h2 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹"></a>è¿›ç¨‹å’Œçº¿ç¨‹</h2><p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600217767997.png" alt="1600217767997"></p>
<h3 id="è¿›ç¨‹-1"><a href="#è¿›ç¨‹-1" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h3><p>è¿›ç¨‹æ˜¯å¯¹æ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åºçš„ä¸€ä¸ªæŠ½è±¡ã€‚å³ä½¿CPUåªæœ‰ä¸€ä¸ªï¼Œä¹Ÿæ”¯æŒï¼ˆä¼ªï¼‰å¹¶å‘æ“ä½œï¼ˆå°†å•ç‹¬çš„CPUæŠ½è±¡ä¸ºå¤šä¸ªè™šæ‹Ÿæœºçš„CPUï¼‰</p>
<p>ä¼ªå¹¶è¡Œï¼ˆpseudoparallelismï¼‰ï¼šå•æ ¸æˆ–å¤šæ ¸å¤„ç†å™¨åŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œä»è€Œä½¿ç¨‹åºæ›´å¿«ï¼Œé€šè¿‡ä»¥éå¸¸æœ‰é™çš„æ—¶é—´é—´éš”åœ¨ç¨‹åºä¹‹é—´å¿«é€Ÿåˆ‡æ¢CPUäº§ç”Ÿå¹¶è¡Œæ„Ÿã€‚</p>
<h4 id="è¿›ç¨‹æ¨¡å‹"><a href="#è¿›ç¨‹æ¨¡å‹" class="headerlink" title="è¿›ç¨‹æ¨¡å‹"></a>è¿›ç¨‹æ¨¡å‹</h4><p>è¿›ç¨‹åŒ…æ‹¬ï¼šç¨‹åºè®¡æ•°å™¨ï¼Œå¯„å­˜å™¨ï¼Œå˜é‡å½“å‰å€¼ã€‚</p>
<h4 id="è¿›ç¨‹çš„åˆ›å»º"><a href="#è¿›ç¨‹çš„åˆ›å»º" class="headerlink" title="è¿›ç¨‹çš„åˆ›å»º"></a>è¿›ç¨‹çš„åˆ›å»º</h4><ul>
<li><p>ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆinitï¼‰: å¯åŠ¨é˜¶æ®µç©¿ä»¶è¿›ç¨‹</p>
<blockquote>
<p>å‰å°è¿›ç¨‹ï¼ˆnumerous processï¼‰ï¼šåŒç”¨æˆ·è¿›è¡Œäº¤äº’å¹¶å®Œæˆå·¥ä½œ</p>
<p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonsï¼‰ï¼šè¿è¡Œåœ¨åå°ï¼Œä¸ä¸ç‰¹å®šç”¨æˆ·è¿›è¡Œäº¤äº’</p>
</blockquote>
</li>
<li><p>æ­£åœ¨è¿è¡Œçš„ç¨‹åºæ‰§è¡Œäº†åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨ï¼ˆforkï¼‰</p>
<blockquote>
<p>â€‹</p>
</blockquote>
</li>
<li><p>ç”¨æˆ·è¯·æ±‚åˆ›å»ºæ–°è¿›ç¨‹</p>
<blockquote>
<p>äº¤äº’å¼ç³»ç»Ÿä¸­ï¼Œè¾“å…¥å‘½ä»¤æˆ–è€…åŒå‡»å¯åŠ¨ç¨‹åº</p>
</blockquote>
</li>
<li><p>åˆå§‹åŒ–ä¸€ä¸ªæ‰¹å¤„ç†å·¥ä½œ</p>
<blockquote>
<p>å¤§å‹æœºçš„æ‰¹å¤„ç†ç³»ç»Ÿ</p>
<p>åœ¨UNIXä¸­ï¼Œç³»ç»Ÿè°ƒç”¨(fork)åï¼Œåˆ›å»ºä¸€ä¸ªä¸è°ƒç”¨è¿›ç¨‹ç›¸å…³çš„å‰¯æœ¬ï¼Œå­è¿›ç¨‹æœ‰ä½•çˆ¶è¿›ç¨‹ç›¸åŒçš„å†…å­˜æ˜ åƒï¼Œç¯å¢ƒå­—ç¬¦åˆ›å’Œæ‰“å¼€æ–‡ä»¶ï¼Œå­è¿›ç¨‹æ‰§è¡Œ<code>execve</code>æˆ–è€…ç®€å•çš„ç³»ç»Ÿè°ƒç”¨æ¥æ”¹å˜å†…å­˜æ˜ åƒå¹¶è¿è¡Œä¸€ä¸ªæ–°ç¨‹åºã€‚</p>
<p>ä¾‹å¦‚ shellä¸­è¾“å…¥sortå‘½ä»¤ï¼Œshellä¼šforkä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶åæ‰§è¡Œsortå‘½ä»¤</p>
<p>Win32ä¸­ï¼Œ<code>CreateProcess</code>å¤„ç†æµç¨‹åˆ›å»ºå¹¶å°†æ­£ç¡®çš„ç¨‹åºåŠ è½½åˆ°æ–°çš„è¿›ç¨‹ä¸­ã€‚</p>
</blockquote>
</li>
</ul>
<h4 id="è¿›ç¨‹çš„ç»ˆæ­¢"><a href="#è¿›ç¨‹çš„ç»ˆæ­¢" class="headerlink" title="è¿›ç¨‹çš„ç»ˆæ­¢"></a>è¿›ç¨‹çš„ç»ˆæ­¢</h4><ul>
<li><p>æ­£å¸¸é€€å‡º(è‡ªæ„¿)</p>
<blockquote>
<p>ç¼–è¯‘å™¨å®Œæˆç»™å®šç¨‹åºçš„ç¼–è¯‘åï¼Œç¼–è¯‘å™¨æ‰§è¡Œä¸€ä¸ªç³»ç»Ÿè°ƒç”¨å‘Šè¯‰æ“ä½œç³»ç»Ÿå®Œæˆäº†å·¥ä½œ</p>
<p>UNIXï¼š<code>exit</code>  Windows: <code>ExitProcess</code></p>
<p>ç•Œé¢åŒ–çš„è½¯ä»¶æœ‰å¯ä»¥ç‚¹å‡»å…³é—­çš„æŒ‰é’®ï¼Œç”¨æ¥é€šçŸ¥è¿›ç¨‹åˆ é™¤å…¶æ‰“å¼€çš„ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åç»ˆæ­¢ã€‚</p>
</blockquote>
</li>
<li><p>é”™è¯¯é€€å‡º(è‡ªæ„¿)</p>
<blockquote>
<p>å‘å‡ºå£°æ˜ï¼Œç»™å‡ºé”™è¯¯å‚æ•°ï¼Œå¹¶é€€å‡º</p>
<p>é¢å‘å±å¹•çš„äº¤äº’å¼è¿›ç¨‹é€šå¸¸å¹¶ä¸ä¼šç›´æ¥é€€å‡º</p>
</blockquote>
</li>
<li><p>ä¸¥é‡é”™è¯¯ï¼ˆéè‡ªæ„¿ï¼‰</p>
<blockquote>
<p>è¿›ç¨‹å¼•èµ·çš„é”™è¯¯ï¼Œé€šå¸¸ç”±äºç¨‹åºä¸­çš„é”™è¯¯å¯¼è‡´ï¼ŒUNIXä¸­ï¼Œè¿›ç¨‹ä¼šå—åˆ°ä¿¡å·ï¼ˆä¸­æ–­ï¼‰</p>
<p>ä¾‹å¦‚ï¼Œæ‰§è¡Œä¸€æ¡éæ³•æŒ‡ä»¤ï¼Œå¼•ç”¨ä¸å­˜åœ¨çš„å†…å­˜ï¼Œæˆ–è€…é™¤æ•°ä¸º0</p>
</blockquote>
</li>
<li><p>è¢«å…¶ä»–è¿›ç¨‹æ€æ­»ï¼ˆéè‡ªæ„¿ï¼‰</p>
<blockquote>
<p>UNIX killï¼›Win32ä¸­TerminateProcess</p>
</blockquote>
</li>
</ul>
<h4 id="è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„"><a href="#è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„"></a>è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„</h4><ul>
<li><p>UNIX</p>
<p>è¿›ç¨‹å’Œå…¶æ‰€æœ‰å­è¿›ç¨‹ä»¥åŠå­è¿›ç¨‹çš„å­è¿›ç¨‹å…±åŒç»„æˆä¸€ä¸ªè¿›ç¨‹ç»„ã€‚</p>
</li>
<li><p>Windows</p>
<p>æ²¡æœ‰è¿›ç¨‹å±‚æ¬¡çš„æ¦‚å¿µã€‚çˆ¶è¿›ç¨‹å¯ä»¥å¾—åˆ°ä¸€ä¸ªç‰¹åˆ«çš„ä»¤ç‰Œï¼ˆå¥æŸ„ï¼‰ï¼Œç”¨æ¥æ§åˆ¶å­è¿›ç¨‹ï¼Œä½†è¯¥ä»¤ç‰Œå¯ä»¥ç§»äº¤ç»™åˆ«çš„æ“ä½œç³»ç»Ÿã€‚UNIXä¸­ä¸èƒ½å‰¥å¤ºå…¶å­è¿›ç¨‹çš„è¿›ç¨‹æƒã€‚</p>
</li>
</ul>
<h4 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat chapter1 chapter2 chapter3 | grep tree</span><br></pre></td></tr></table></figure>
<p>å½“grepå°±ç»ªï¼Œä½†è¾“å…¥è¿›ç¨‹è¿˜æ²¡èƒ½å®Œæˆæ—¶ï¼Œå¿…é¡»é˜»å¡grepè¿›ç¨‹ï¼Œç›´åˆ°è¾“å…¥å®Œæ¯•ã€‚</p>
<p><img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600220979244.png" alt="1600220979244"></p>
<ul>
<li>è¿è¡Œæ€ï¼šè¿›ç¨‹å®é™…å ç”¨CPUæ—¶é—´ç‰‡</li>
<li>å°±ç»ªæ€ï¼šå¯è¿è¡Œï¼Œä½†å› å…¶ä»–è¿›ç¨‹æ­£åœ¨è¿è¡Œè€Œå¤„äºå°±ç»ªçŠ¶æ€</li>
<li>é˜»å¡æ€ï¼šé™¤éæŸç§å¤–éƒ¨æ—¶é—´å‘ç”Ÿï¼Œå¦åˆ™è¿›ç¨‹ä¸èƒ½è¿è¡Œ</li>
</ul>
<p>ç¨‹åºè°ƒåº¦ï¼šå†³å®šå“ªä¸ªè¿›ç¨‹ä¼˜å…ˆè¢«è¿è¡Œå’Œè¿è¡Œå¤šä¹…ã€‚</p>
<img src="/2020/09/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1600225430669.png" class width="1600225430669">
<p>é¡ºåºè¿›ç¨‹ï¼ˆsequential processï¼‰</p>
<p>æ“ä½œç³»ç»Ÿæœ€åº•å±‚æ˜¯è°ƒåº¦ç¨‹åºï¼ˆä¸­æ–­å’Œè°ƒåº¦å¤„ç†ï¼‰ï¼Œä¹‹ä¸Šæ˜¯é¡ºåºè¿›ç¨‹ã€‚</p>
<h4 id="è¿›ç¨‹çš„å®ç°"><a href="#è¿›ç¨‹çš„å®ç°" class="headerlink" title="è¿›ç¨‹çš„å®ç°"></a>è¿›ç¨‹çš„å®ç°</h4>]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç›¸å…³çŸ¥è¯†</title>
    <url>/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h2 id="HTTPçŸ¥è¯†"><a href="#HTTPçŸ¥è¯†" class="headerlink" title="HTTPçŸ¥è¯†"></a>HTTPçŸ¥è¯†</h2><h3 id="å®‰å…¨å’Œå¹‚ç­‰çš„æ¦‚å¿µ"><a href="#å®‰å…¨å’Œå¹‚ç­‰çš„æ¦‚å¿µ" class="headerlink" title="å®‰å…¨å’Œå¹‚ç­‰çš„æ¦‚å¿µ"></a>å®‰å…¨å’Œå¹‚ç­‰çš„æ¦‚å¿µ</h3><p>åœ¨ HTTP åè®®é‡Œï¼Œæ‰€è°“çš„ã€Œå®‰å…¨ã€æ˜¯æŒ‡è¯·æ±‚æ–¹æ³•ä¸ä¼šã€Œç ´åã€æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚<br>æ‰€è°“çš„ã€Œå¹‚ç­‰ã€ï¼Œæ„æ€æ˜¯å¤šæ¬¡æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œç»“æœéƒ½æ˜¯ã€Œç›¸åŒã€çš„ã€‚</p>
<a id="more"></a>
<p><strong>GET æ–¹æ³•æ˜¯å®‰å…¨ä¸”å¹‚ç­‰çš„</strong>ï¼Œå› ä¸ºå®ƒæ˜¯ã€Œåªè¯»ã€æ“ä½œï¼Œæ— è®ºæ“ä½œå¤šå°‘æ¬¡ï¼ŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®éƒ½æ˜¯å®‰å…¨çš„ï¼Œä¸”æ¯æ¬¡çš„ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚<br><strong>POST </strong>å› ä¸ºæ˜¯ã€Œæ–°å¢æˆ–æäº¤æ•°æ®ã€çš„æ“ä½œï¼Œä¼šä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œæ‰€ä»¥æ˜¯<strong>ä¸å®‰å…¨</strong>çš„ï¼Œä¸”å¤šæ¬¡æäº¤æ•°æ®å°±ä¼šåˆ›å»ºå¤šä¸ªèµ„æºï¼Œæ‰€ä»¥<strong>ä¸æ˜¯å¹‚ç­‰</strong>çš„ã€‚</p>
<h3 id="HTTPçš„ä¼˜ç¼ºç‚¹"><a href="#HTTPçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="HTTPçš„ä¼˜ç¼ºç‚¹"></a>HTTPçš„ä¼˜ç¼ºç‚¹</h3><p>HTTP æœ€å‡¸å‡ºçš„ä¼˜ç‚¹æ˜¯ã€Œç®€å•ã€çµæ´»å’Œæ˜“äºæ‰©å±•ã€åº”ç”¨å¹¿æ³›å’Œè·¨å¹³å°ã€ã€‚</p>
<p>HTTP åè®®ç¼ºç‚¹æ˜¯ã€Œæ— çŠ¶æ€ã€æ˜æ–‡ä¼ è¾“ã€ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€å¤§ç¼ºç‚¹ã€Œä¸å®‰å…¨ã€ã€‚</p>
<blockquote>
<ol>
<li><p>æ— çŠ¶æ€çš„å¥½å¤„ï¼Œå› ä¸ºæœåŠ¡å™¨ä¸ä¼šå»è®°å¿† HTTP çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„èµ„æºæ¥è®°å½•çŠ¶æ€ä¿¡æ¯ï¼Œè¿™èƒ½å‡è½»æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œèƒ½å¤ŸæŠŠæ›´å¤šçš„ CPU å’Œå†…å­˜ç”¨æ¥å¯¹å¤–æä¾›æœåŠ¡ã€‚</p>
<p>æ— çŠ¶æ€çš„åå¤„ï¼Œæ—¢ç„¶æœåŠ¡å™¨æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼Œå®ƒåœ¨å®Œæˆæœ‰å…³è”æ€§çš„æ“ä½œæ—¶ä¼šéå¸¸éº»çƒ¦ã€‚</p>
<p><strong>å¯ä»¥é€šè¿‡cookieè§£å†³</strong></p>
</li>
<li><p>æ˜æ–‡æ„å‘³ç€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä¿¡æ¯ï¼Œæ˜¯å¯æ–¹ä¾¿é˜…è¯»çš„ï¼Œé€šè¿‡æµè§ˆå™¨çš„ F12 æ§åˆ¶å°æˆ– Wireshark æŠ“åŒ…éƒ½å¯ä»¥ç›´æ¥è‚‰çœ¼æŸ¥çœ‹ï¼Œä¸ºæˆ‘ä»¬è°ƒè¯•å·¥ä½œå¸¦äº†æå¤§çš„ä¾¿åˆ©æ€§ã€‚<br>ä½†HTTP çš„æ‰€æœ‰ä¿¡æ¯éƒ½æš´éœ²åœ¨äº†å…‰å¤©åŒ–æ—¥ä¸‹ï¼Œç›¸å½“äºä¿¡æ¯è£¸å¥”ã€‚åœ¨ä¼ è¾“çš„æ¼«é•¿çš„è¿‡ç¨‹ä¸­ï¼Œä¿¡æ¯çš„å†…å®¹éƒ½æ¯«æ— éšç§å¯è¨€ï¼Œå¾ˆå®¹æ˜“å°±èƒ½è¢«çªƒå–ï¼Œå¦‚æœé‡Œé¢æœ‰ä½ çš„è´¦å·å¯†ç ä¿¡æ¯ï¼Œé‚£ä½ å·æ²¡äº†ã€‚</p>
</li>
<li><p>HTTP æ¯”è¾ƒä¸¥é‡çš„ç¼ºç‚¹å°±æ˜¯ä¸å®‰å…¨ï¼š</p>
<ul>
<li><p>é€šä¿¡ä½¿ç”¨æ˜æ–‡ï¼ˆä¸åŠ å¯†ï¼‰ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ã€‚æ¯”å¦‚ï¼Œè´¦å·ä¿¡æ¯å®¹æ˜“æ³„æ¼ï¼Œé‚£ä½ å·æ²¡äº†ã€‚</p>
</li>
<li><p>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå› æ­¤æœ‰å¯èƒ½é­é‡ä¼ªè£…ã€‚æ¯”å¦‚ï¼Œè®¿é—®å‡çš„æ·˜å®ã€æ‹¼å¤šå¤šï¼Œé‚£ä½ é’±æ²¡äº†ã€‚</p>
</li>
<li><p>æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œæ‰€ä»¥æœ‰å¯èƒ½å·²é­ç¯¡æ”¹ã€‚æ¯”å¦‚ï¼Œç½‘é¡µä¸Šæ¤å…¥åƒåœ¾å¹¿å‘Šï¼Œè§†è§‰æ±¡æŸ“ï¼Œçœ¼æ²¡äº†ã€‚</p>
<p><strong>é€šè¿‡HTTPSè§£å†³ï¼šåœ¨ HTTP ä¸ TCP å±‚ä¹‹é—´å¢åŠ äº† SSL/TLS å®‰å…¨ä¼ è¾“å±‚ï¼ŒHTTP/3 ç”šè‡³æŠŠ TCP å±‚æ¢æˆäº†åŸºäº UDP çš„ QUICã€‚</strong></p>
</li>
</ul>
</li>
</ol>
</blockquote>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599625816283.png" alt="1599625816283"></p>
<h2 id="IPçŸ¥è¯†"><a href="#IPçŸ¥è¯†" class="headerlink" title="IPçŸ¥è¯†"></a>IPçŸ¥è¯†</h2><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><p>IP åœ¨ TCP/IP å‚è€ƒæ¨¡å‹ä¸­å¤„äºç¬¬ä¸‰å±‚ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œå±‚ã€‚<br>ç½‘ç»œå±‚çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šå®ç°ä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œä¹Ÿå«ç‚¹å¯¹ç‚¹ï¼ˆend to endï¼‰é€šä¿¡ã€‚</p>
<p>IP åœ°å€ï¼ˆIPv4 åœ°å€ï¼‰ç”± 32 ä½æ­£æ•´æ•°æ¥è¡¨ç¤ºï¼ŒIP åœ°å€åœ¨è®¡ç®—æœºæ˜¯ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¤„ç†çš„ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626314741.png" alt="1599626314741"></p>
<p>IPåœ°å€æœ€å¤§$2^{32}$ ï¼Œå¤§çº¦43äº¿ï¼ŒIP åœ°å€å¹¶ä¸æ˜¯æ ¹æ®ä¸»æœºå°æ•°æ¥é…ç½®çš„ï¼Œè€Œæ˜¯ä»¥ç½‘å¡ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626438580.png" alt="1599626438580"></p>
<h3 id="IP-åœ°å€çš„åˆ†ç±»"><a href="#IP-åœ°å€çš„åˆ†ç±»" class="headerlink" title="IP åœ°å€çš„åˆ†ç±»"></a>IP åœ°å€çš„åˆ†ç±»</h3><p>IP åœ°å€åˆ†ç±»æˆäº† 5 ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ A ç±»ã€B ç±»ã€C ç±»ã€D ç±»ã€E ç±»ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626499535.png" alt="1599626499535"></p>
<p>D ç±»å’Œ E ç±»åœ°å€æ˜¯æ²¡æœ‰ä¸»æœºå·çš„ï¼Œæ‰€ä»¥ä¸å¯ç”¨äºä¸»æœº IPï¼ŒD ç±»å¸¸è¢«ç”¨äºå¤šæ’­ï¼ŒE ç±»æ˜¯é¢„ç•™çš„åˆ†ç±»ï¼Œæš‚æ—¶æœªä½¿ç”¨ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626848504.png" alt="1599626848504"></p>
<p>å¤šæ’­ç”¨äºå°†åŒ…å‘é€ç»™ç‰¹å®šç»„å†…çš„æ‰€æœ‰ä¸»æœºã€‚ç”±äºå¹¿æ’­æ— æ³•ç©¿é€è·¯ç”±ï¼Œè‹¥æƒ³ç»™å…¶ä»–ç½‘æ®µå‘é€åŒæ ·çš„åŒ…ï¼Œå°±å¯ä»¥ä½¿ç”¨å¯ä»¥ç©¿é€è·¯ç”±çš„å¤šæ’­ã€‚</p>
<ul>
<li>224.0.0.0 ~ 224.0.0.255 ä¸ºé¢„ç•™çš„ç»„æ’­åœ°å€ï¼Œåªèƒ½åœ¨å±€åŸŸç½‘ä¸­ï¼Œè·¯ç”±å™¨æ˜¯ä¸ä¼šè¿›è¡Œè½¬å‘çš„ã€‚</li>
<li>224.0.1.0 ~ 238.255.255.255 ä¸ºç”¨æˆ·å¯ç”¨çš„ç»„æ’­åœ°å€ï¼Œå¯ä»¥ç”¨äº Internet ä¸Šã€‚</li>
<li>239.0.0.0 ~ 239.255.255.255 ä¸ºæœ¬åœ°ç®¡ç†ç»„æ’­åœ°å€ï¼Œå¯ä¾›å†…éƒ¨ç½‘åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä»…åœ¨ç‰¹å®šçš„æœ¬åœ°èŒƒå›´å†…æœ‰æ•ˆã€‚</li>
</ul>
<p>å¯¹äº Aã€Bã€C ç±»ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ç½‘ç»œå·å’Œä¸»æœºå·ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626543682.png" alt="1599626543682"></p>
<p>åœ¨ IP åœ°å€ä¸­ï¼Œæœ‰ä¸¤ä¸ª IP æ˜¯ç‰¹æ®Šçš„ï¼Œåˆ†åˆ«æ˜¯ä¸»æœºå·å…¨ä¸º 1 å’Œ å…¨ä¸º 0 åœ°å€ã€‚</p>
<ul>
<li>ä¸»æœºå·å…¨ä¸º 1 æŒ‡å®šæŸä¸ªç½‘ç»œä¸‹çš„æ‰€æœ‰ä¸»æœºï¼Œç”¨äºå¹¿æ’­ï¼ˆå¹¿æ’­åœ°å€ç”¨äºåœ¨åŒä¸€ä¸ªé“¾è·¯ä¸­ç›¸äº’è¿æ¥çš„ä¸»æœºä¹‹é—´å‘é€æ•°æ®åŒ…ï¼‰</li>
<li>ä¸»æœºå·å…¨ä¸º 0 æŒ‡å®šæŸä¸ªç½‘ç»œ</li>
</ul>
<p>å¹¿æ’­åœ°å€å¯ä»¥åˆ†ä¸ºæœ¬åœ°å¹¿æ’­å’Œç›´æ¥å¹¿æ’­ï¼š</p>
<ul>
<li>åœ¨æœ¬ç½‘ç»œå†…å¹¿æ’­çš„å«åšæœ¬åœ°å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º 192.168.0.0/24 çš„æƒ…å†µä¸‹ï¼Œå¹¿æ’­åœ°å€æ˜¯192.168.0.255 ã€‚å› ä¸ºè¿™ä¸ªå¹¿æ’­åœ°å€çš„ IP åŒ…ä¼šè¢«è·¯ç”±å™¨å±è”½ï¼Œæ‰€ä»¥ä¸ä¼šåˆ°è¾¾ 192.168.0.0/24 ä»¥å¤–çš„å…¶ä»–é“¾è·¯ä¸Šã€‚</li>
<li>åœ¨ä¸åŒç½‘ç»œä¹‹é—´çš„å¹¿æ’­å«åšç›´æ¥å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º 192.168.0.0/24 çš„ä¸»æœºå‘192.168.1.255/24 çš„ç›®æ ‡åœ°å€å‘é€ IP åŒ…ã€‚æ”¶åˆ°è¿™ä¸ªåŒ…çš„è·¯ç”±å™¨ï¼Œå°†æ•°æ®è½¬å‘ç»™ 192.168.1.0/24ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰ 192.168.1.1~192.168.1.254 çš„ä¸»æœºéƒ½èƒ½æ”¶åˆ°è¿™ä¸ªåŒ…ï¼ˆç”±äºç›´æ¥å¹¿æ’­æœ‰ä¸€å®šçš„å®‰å…¨é—®é¢˜ï¼Œå¤šæ•°æƒ…å†µä¸‹ä¼šåœ¨è·¯ç”±å™¨ä¸Šè®¾ç½®ä¸ºä¸è½¬å‘ã€‚ï¼‰ ã€‚</li>
</ul>
<h3 id="IPåˆ†ç±»çš„ä¼˜ç¼ºç‚¹"><a href="#IPåˆ†ç±»çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="IPåˆ†ç±»çš„ä¼˜ç¼ºç‚¹"></a>IPåˆ†ç±»çš„ä¼˜ç¼ºç‚¹</h3><ol>
<li>åŒä¸€ç½‘ç»œä¸‹æ²¡æœ‰åœ°å€å±‚æ¬¡ï¼Œæ¯”å¦‚ä¸€ä¸ªå…¬å¸é‡Œç”¨äº† B ç±»åœ°å€ï¼Œä½†æ˜¯å¯èƒ½éœ€è¦æ ¹æ®ç”Ÿäº§ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€å¼€å‘ç¯å¢ƒæ¥åˆ’åˆ†åœ°å€å±‚æ¬¡ï¼Œè€Œè¿™ç§ IP åˆ†ç±»æ˜¯æ²¡æœ‰åœ°å€å±‚æ¬¡åˆ’åˆ†çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¿™å°±ç¼ºå°‘åœ°å€çš„çµæ´»æ€§ã€‚</li>
<li>Aã€Bã€Cç±»æœ‰ä¸ªå°´å°¬å¤„å¢ƒï¼Œå°±æ˜¯ä¸èƒ½å¾ˆå¥½çš„ä¸ç°å®ç½‘ç»œåŒ¹é…ã€‚C ç±»åœ°å€èƒ½åŒ…å«çš„æœ€å¤§ä¸»æœºæ•°é‡å®åœ¨å¤ªå°‘äº†ï¼Œåªæœ‰ 254 ä¸ªã€‚è€Œ B ç±»åœ°å€èƒ½åŒ…å«çš„æœ€å¤§ä¸»æœºæ•°é‡åˆå¤ªå¤šäº†ï¼Œ6 ä¸‡å¤šå°æœºå™¨æ”¾åœ¨ä¸€ä¸ªç½‘ç»œä¸‹é¢ï¼Œä¸€èˆ¬çš„ä¼ä¸šåŸºæœ¬è¾¾ä¸åˆ°è¿™ä¸ªè§„æ¨¡ï¼Œé—²ç€çš„åœ°å€å°±æ˜¯æµªè´¹ã€‚</li>
</ol>
<h3 id="æ— åˆ†ç±»åœ°å€-CIDR"><a href="#æ— åˆ†ç±»åœ°å€-CIDR" class="headerlink" title="æ— åˆ†ç±»åœ°å€ CIDR"></a>æ— åˆ†ç±»åœ°å€ CIDR</h3><p>32 æ¯”ç‰¹çš„ IP åœ°å€è¢«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå‰é¢æ˜¯ç½‘ç»œå·ï¼Œåé¢æ˜¯ä¸»æœºå·ã€‚è¡¨ç¤ºå½¢å¼ a.b.c.d/x ï¼Œå…¶ä¸­ /x è¡¨ç¤ºå‰ x ä½å±äºç½‘ç»œå·ï¼Œ x çš„èŒƒå›´æ˜¯ 0 ~ 32 ï¼Œè¿™å°±ä½¿å¾— IP åœ°å€æ›´åŠ å…·æœ‰çµæ´»æ€§ã€‚</p>
<p>å¦ä¸€ç§åˆ’åˆ†ç½‘ç»œå·ä¸ä¸»æœºå·å½¢å¼ï¼Œé‚£å°±æ˜¯å­ç½‘æ©ç ï¼Œæ©ç çš„æ„æ€å°±æ˜¯æ©ç›–æ‰ä¸»æœºå·ï¼Œå‰©ä½™çš„å°±æ˜¯ç½‘ç»œå·ã€‚å°†å­ç½‘æ©ç å’Œ IP åœ°å€æŒ‰ä½è®¡ç®— ANDï¼Œå°±å¯å¾—åˆ°ç½‘ç»œå·ã€‚</p>
<blockquote>
<p>ä¸¤å°è®¡ç®—æœºè¦é€šè®¯ï¼Œé¦–å…ˆè¦åˆ¤æ–­æ˜¯å¦å¤„äºåŒä¸€ä¸ªå¹¿æ’­åŸŸå†…ï¼Œå³ç½‘ç»œåœ°å€æ˜¯å¦ç›¸åŒã€‚å¦‚æœç½‘ç»œåœ°å€ç›¸åŒï¼Œè¡¨æ˜æ¥å—æ–¹åœ¨æœ¬ç½‘ç»œä¸Šï¼Œé‚£ä¹ˆå¯ä»¥æŠŠæ•°æ®åŒ…ç›´æ¥å‘é€åˆ°ç›®æ ‡ä¸»æœºã€‚</p>
</blockquote>
<h3 id="å­ç½‘åˆ’åˆ†"><a href="#å­ç½‘åˆ’åˆ†" class="headerlink" title="å­ç½‘åˆ’åˆ†"></a>å­ç½‘åˆ’åˆ†</h3><p>å­ç½‘æ©ç çš„å¦ä¸€ä¸ªä½œç”¨ï¼Œå­ç½‘åˆ’åˆ†å®é™…ä¸Šæ˜¯å°†ä¸»æœºåœ°å€åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå­ç½‘ç½‘ç»œåœ°å€å’Œå­ç½‘ä¸»æœºåœ°å€ã€‚</p>
<h3 id="å…¬æœ‰-IP-åœ°å€ä¸ç§æœ‰-IP-åœ°å€"><a href="#å…¬æœ‰-IP-åœ°å€ä¸ç§æœ‰-IP-åœ°å€" class="headerlink" title="å…¬æœ‰ IP åœ°å€ä¸ç§æœ‰ IP åœ°å€"></a>å…¬æœ‰ IP åœ°å€ä¸ç§æœ‰ IP åœ°å€</h3><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599629584305.png" alt="1599629584305"></p>
<p>ç§æœ‰ IP åœ°å€å…è®¸ç»„ç»‡å†…éƒ¨çš„ ITäººå‘˜è‡ªå·±ç®¡ç†ã€è‡ªå·±åˆ†é…ï¼Œè€Œä¸”å¯ä»¥é‡å¤ã€‚</p>
<p>å…¬æœ‰ IP åœ°å€æ˜¯ç”± ICANN ç»„ç»‡ç®¡ç†ï¼Œä¸­æ–‡å«ã€Œäº’è”ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„ã€ã€‚IANA æ˜¯ ICANN çš„å…¶ä¸­ä¸€ä¸ªæœºæ„ï¼Œå®ƒè´Ÿè´£åˆ†é…äº’è”ç½‘ IP åœ°å€ï¼Œæ˜¯æŒ‰å·çš„æ–¹å¼å±‚å±‚åˆ†é…ã€‚åœ¨ä¸­å›½æ˜¯ç”± CNNIC çš„æœºæ„è¿›è¡Œç®¡ç†ï¼Œå®ƒæ˜¯ä¸­å›½å›½å†…å”¯ä¸€æŒ‡å®šçš„å…¨å±€ IP åœ°å€ç®¡ç†çš„ç»„ç»‡ã€‚<br><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599629683644.png" alt="1599629683644"></p>
<h3 id="IP-åœ°å€ä¸è·¯ç”±æ§åˆ¶"><a href="#IP-åœ°å€ä¸è·¯ç”±æ§åˆ¶" class="headerlink" title="IP åœ°å€ä¸è·¯ç”±æ§åˆ¶"></a>IP åœ°å€ä¸è·¯ç”±æ§åˆ¶</h3><p>IPåœ°å€çš„ç½‘ç»œåœ°å€è¿™ä¸€éƒ¨åˆ†æ˜¯ç”¨äºè¿›è¡Œè·¯ç”±æ§åˆ¶ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599629833778.png" alt="1599629833778"></p>
<h3 id="ç¯å›åœ°å€"><a href="#ç¯å›åœ°å€" class="headerlink" title="ç¯å›åœ°å€"></a>ç¯å›åœ°å€</h3><p>ç¯å›åœ°å€æ˜¯åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„ä¸€ä¸ªé»˜è®¤åœ°å€ã€‚</p>
<p>è®¡ç®—æœºä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ IP åœ°å€ 127.0.0.1 ä½œä¸ºç¯å›åœ°å€ã€‚ä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒæ„ä¹‰çš„æ˜¯ä¸€ä¸ªå«åšlocalhost çš„ä¸»æœºåã€‚ä½¿ç”¨è¿™ä¸ª IP æˆ–ä¸»æœºåæ—¶ï¼Œæ•°æ®åŒ…ä¸ä¼šæµå‘ç½‘ç»œã€‚</p>
<h3 id="IP-åˆ†ç‰‡ä¸é‡ç»„"><a href="#IP-åˆ†ç‰‡ä¸é‡ç»„" class="headerlink" title="IP åˆ†ç‰‡ä¸é‡ç»„"></a>IP åˆ†ç‰‡ä¸é‡ç»„</h3><p>æ¯ç§æ•°æ®é“¾è·¯çš„æœ€å¤§ä¼ è¾“å•å…ƒ MTU éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼Œå¦‚ FDDI æ•°æ®é“¾è·¯ MTU 4352ã€ä»¥å¤ªç½‘çš„ MTU æ˜¯1500 å­—èŠ‚ç­‰ã€‚</p>
<p>é‚£ä¹ˆå½“ IP æ•°æ®åŒ…å¤§å°å¤§äº MTU æ—¶ï¼Œ IP æ•°æ®åŒ…å°±ä¼šè¢«åˆ†ç‰‡ã€‚ç»è¿‡åˆ†ç‰‡ä¹‹åçš„ IP æ•°æ®æŠ¥åœ¨è¢«é‡ç»„çš„æ—¶å€™ï¼Œåªèƒ½ç”±ç›®æ ‡ä¸»æœºè¿›è¡Œï¼Œè·¯ç”±å™¨æ˜¯ä¸ä¼šè¿›è¡Œé‡ç»„çš„ã€‚</p>
<h3 id="IPv6-åŸºæœ¬è®¤è¯†"><a href="#IPv6-åŸºæœ¬è®¤è¯†" class="headerlink" title="IPv6 åŸºæœ¬è®¤è¯†"></a>IPv6 åŸºæœ¬è®¤è¯†</h3><p>IPv6 åœ°å€é•¿åº¦æ˜¯ 128 ä½ï¼Œæ˜¯ä»¥æ¯ 16 ä½ä½œä¸ºä¸€ç»„ï¼Œæ¯ç»„ç”¨å†’å· ã€Œ:ã€ éš”å¼€ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599631076301.png" alt="1599631076301"></p>
<h3 id="IPv6-çš„ä¼˜ç‚¹"><a href="#IPv6-çš„ä¼˜ç‚¹" class="headerlink" title="IPv6 çš„ä¼˜ç‚¹"></a>IPv6 çš„ä¼˜ç‚¹</h3><blockquote>
<p>IPv6 å¯è‡ªåŠ¨é…ç½®ï¼Œå³ä½¿æ²¡æœ‰ DHCP æœåŠ¡å™¨ä¹Ÿå¯ä»¥å®ç°è‡ªåŠ¨åˆ†é…IPåœ°å€ï¼Œå³æ’å³ç”¨ã€‚</p>
<p>IPv6 åŒ…å¤´åŒ…é¦–éƒ¨é•¿åº¦é‡‡ç”¨å›ºå®šçš„å€¼ 40 å­—èŠ‚ï¼Œå»æ‰äº†åŒ…å¤´æ ¡éªŒå’Œï¼Œç®€åŒ–äº†é¦–éƒ¨ç»“æ„ï¼Œå‡è½»äº†è·¯ç”±å™¨è´Ÿè·ï¼Œå¤§å¤§æé«˜äº†ä¼ è¾“çš„æ€§èƒ½ã€‚</p>
<p>IPv6 æœ‰åº”å¯¹ä¼ªé€  IP åœ°å€çš„ç½‘ç»œå®‰å…¨åŠŸèƒ½ä»¥åŠé˜²æ­¢çº¿è·¯çªƒå¬çš„åŠŸèƒ½ï¼Œå¤§å¤§æå‡äº†å®‰å…¨æ€§ã€‚</p>
</blockquote>
<h3 id="IPv6-åœ°å€çš„ç±»å‹"><a href="#IPv6-åœ°å€çš„ç±»å‹" class="headerlink" title="IPv6 åœ°å€çš„ç±»å‹"></a>IPv6 åœ°å€çš„ç±»å‹</h3><ol>
<li><p>å•æ’­åœ°å€ï¼Œç”¨äºä¸€å¯¹ä¸€çš„é€šä¿¡</p>
<blockquote>
<ul>
<li>åœ¨åŒä¸€é“¾è·¯å•æ’­é€šä¿¡ï¼Œä¸ç»è¿‡è·¯ç”±å™¨ï¼Œå¯ä»¥ä½¿ç”¨é“¾è·¯æœ¬åœ°å•æ’­åœ°å€ï¼ŒIPv4 æ²¡æœ‰æ­¤ç±»å‹</li>
<li>åœ¨å†…ç½‘é‡Œå•æ’­é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨å”¯ä¸€æœ¬åœ°åœ°å€ï¼Œç›¸å½“äº IPv4 çš„ç§æœ‰ IP</li>
<li>åœ¨äº’è”ç½‘é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€å•æ’­åœ°å€ï¼Œç›¸å½“äº IPv4 çš„å…¬æœ‰ IP</li>
</ul>
</blockquote>
</li>
<li><p>ç»„æ’­åœ°å€ï¼Œç”¨äºä¸€å¯¹å¤šçš„é€šä¿¡</p>
</li>
<li><p>ä»»æ’­åœ°å€ï¼Œç”¨äºé€šä¿¡æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œæœ€è¿‘çš„èŠ‚ç‚¹æ˜¯ç”±è·¯ç”±åè®®å†³å®š</p>
</li>
<li><p>æ²¡æœ‰å¹¿æ’­åœ°å€</p>
</li>
</ol>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599631155764.png" alt="1599631155764"></p>
<h3 id="IPv4-é¦–éƒ¨ä¸-IPv6-é¦–éƒ¨"><a href="#IPv4-é¦–éƒ¨ä¸-IPv6-é¦–éƒ¨" class="headerlink" title="IPv4 é¦–éƒ¨ä¸ IPv6 é¦–éƒ¨"></a>IPv4 é¦–éƒ¨ä¸ IPv6 é¦–éƒ¨</h3><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599631291826.png" alt="1599631291826"></p>
<h3 id="IPï¼ˆç½‘ç»œå±‚ï¼‰-å’Œ-MAC-ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»"><a href="#IPï¼ˆç½‘ç»œå±‚ï¼‰-å’Œ-MAC-ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»" class="headerlink" title="IPï¼ˆç½‘ç»œå±‚ï¼‰ å’Œ MAC ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»"></a>IPï¼ˆç½‘ç»œå±‚ï¼‰ å’Œ MAC ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰ä¹‹é—´çš„åŒºåˆ«å’Œå…³ç³»</h3><p>IP çš„ä½œç”¨æ˜¯ä¸»æœºä¹‹é—´é€šä¿¡ç”¨çš„ï¼Œè€Œ MAC çš„ä½œç”¨åˆ™æ˜¯å®ç°ã€Œç›´è¿ã€çš„ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´é€šä¿¡ï¼Œè€Œ IP åˆ™è´Ÿè´£åœ¨ã€Œæ²¡æœ‰ç›´è¿ã€çš„ä¸¤ä¸ªç½‘ç»œä¹‹é—´è¿›è¡Œé€šä¿¡ä¼ è¾“ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599626206478.png" alt="1599626206478"></p>
<p>åœ¨ç½‘ç»œä¸­æ•°æ®åŒ…ä¼ è¾“ä¸­ï¼ŒæºIPåœ°å€å’Œç›®æ ‡IPåœ°å€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œåªæœ‰ MAC åœ°å€å’Œç›®æ ‡ MAC ä¸€ç›´åœ¨å˜åŒ–ã€‚</p>
<h3 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h3><p>åœ¨DNSè§£æåŸŸååï¼Œç¡®å®šäº†æº IP åœ°å€å’Œç›®æ ‡ IP åœ°å€åï¼Œå°±ä¼šé€šè¿‡ä¸»æœºã€Œè·¯ç”±è¡¨ã€ç¡®å®š IP æ•°æ®åŒ…ä¸‹ä¸€è·³ã€‚</p>
<p>ç”±äºä¸»æœºçš„è·¯ç”±è¡¨ä¸­å¯ä»¥æ‰¾åˆ°ä¸‹ä¸€è·³çš„ IP åœ°å€ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ ARP åè®®ï¼Œæ±‚å¾—ä¸‹ä¸€è·³çš„ MAC åœ°å€ã€‚</p>
<blockquote>
<ul>
<li>ä¸»æœºä¼šé€šè¿‡å¹¿æ’­å‘é€ ARP è¯·æ±‚ï¼Œè¿™ä¸ªåŒ…ä¸­åŒ…å«äº†æƒ³è¦çŸ¥é“çš„ MAC åœ°å€çš„ä¸»æœº IP åœ°å€ã€‚</li>
<li>å½“åŒä¸ªé“¾è·¯ä¸­çš„æ‰€æœ‰è®¾å¤‡æ”¶åˆ° ARP è¯·æ±‚æ—¶ï¼Œä¼šå»æ‹†å¼€ ARP è¯·æ±‚åŒ…é‡Œçš„å†…å®¹ï¼Œå¦‚æœ ARP è¯·æ±‚åŒ…ä¸­çš„ç›®æ ‡ IP åœ°å€ä¸è‡ªå·±çš„ IP åœ°å€ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¾å¤‡å°±å°†è‡ªå·±çš„ MAC åœ°å€å¡å…¥ ARP å“åº”åŒ…è¿”å›ç»™ä¸»æœºã€‚</li>
</ul>
</blockquote>
<h3 id="RARP"><a href="#RARP" class="headerlink" title="RARP"></a>RARP</h3><p>å·²çŸ¥ MAC åœ°å€æ±‚ IP åœ°å€ã€‚ä¾‹å¦‚å°†æ‰“å°æœºæœåŠ¡å™¨ç­‰å°å‹åµŒå…¥å¼è®¾å¤‡æ¥å…¥åˆ°ç½‘ç»œæ—¶å°±ç»å¸¸ä¼šç”¨å¾—åˆ°ã€‚</p>
<h3 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h3><p>é€šè¿‡ DHCP åŠ¨æ€è·å– IP åœ°å€ï¼Œå¤§å¤§çœå»äº†é…IP ä¿¡æ¯ç¹ççš„è¿‡ç¨‹ã€‚</p>
<p>DHCP å®¢æˆ·ç«¯è¿›ç¨‹ç›‘å¬çš„æ˜¯ 68 ç«¯å£å·ï¼ŒDHCP æœåŠ¡ç«¯è¿›ç¨‹ç›‘å¬çš„æ˜¯ 67 ç«¯å£å·ã€‚DHCP äº¤äº’ä¸­ï¼Œå…¨ç¨‹ä½¿ç”¨ UDP å¹¿æ’­é€šä¿¡ã€‚</p>
<h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p>ç½‘ç»œåœ°å€è½¬æ¢ NAT çš„æ–¹æ³•ï¼Œç¼“è§£äº† IPv4 åœ°å€è€—å°½çš„é—®é¢˜ã€‚</p>
<p>ç®€å•çš„æ¥è¯´ NAT å°±æ˜¯åŒä¸ªå…¬å¸ã€å®¶åº­ã€æ•™å®¤å†…çš„ä¸»æœºå¯¹å¤–éƒ¨é€šä¿¡æ—¶ï¼ŒæŠŠç§æœ‰ IP åœ°å€è½¬æ¢æˆå…¬æœ‰ IP åœ°å€ã€‚</p>
<p>å¯ä»¥æŠŠ IP åœ°å€ + ç«¯å£å·ä¸€èµ·è¿›è¡Œè½¬æ¢ï¼Œè¿™ç§è½¬æ¢æŠ€æœ¯å°±å«ç½‘ç»œåœ°å€ä¸ç«¯å£è½¬æ¢ NAPTã€‚</p>
<h3 id="ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰"><a href="#ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰" class="headerlink" title="ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰"></a>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰</h3><p>ICMP å…¨ç§°æ˜¯ Internet Control Message Protocolï¼Œä¹Ÿå°±æ˜¯äº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ã€‚ä¸»è¦çš„åŠŸèƒ½åŒ…æ‹¬ï¼šç¡®è®¤ IP åŒ…æ˜¯å¦æˆåŠŸé€è¾¾ç›®æ ‡åœ°å€ã€æŠ¥å‘Šå‘é€è¿‡ç¨‹ä¸­ IP åŒ…è¢«åºŸå¼ƒçš„åŸå› å’Œæ”¹å–„ç½‘ç»œè®¾ç½®ç­‰ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599632892092.png" alt="1599632892092"></p>
<p>3ï¼šIP è·¯ç”±å™¨æ— æ³•å°† IP æ•°æ®åŒ…å‘é€ç»™ç›®æ ‡åœ°å€æ—¶ï¼Œä¼šç»™å‘é€ç«¯ä¸»æœºè¿”å›ä¸€ä¸ªç›®æ ‡ä¸å¯è¾¾çš„ ICMP æ¶ˆæ¯ï¼Œå¹¶åœ¨è¿™ä¸ªæ¶ˆæ¯ä¸­æ˜¾ç¤ºä¸å¯è¾¾çš„å…·ä½“åŸå› ï¼Œ<strong>åŸå› è®°å½•åœ¨ ICMP åŒ…å¤´çš„ä»£ç å­—æ®µã€‚</strong></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599642681552.png" alt="1599642681552"></p>
<p>4ï¼šåŸç‚¹æŠ‘åˆ¶æ¶ˆæ¯ï¼ˆICMP Source Quench Messageï¼‰ï¼Œå½“è·¯ç”±å™¨å‘ä½é€Ÿçº¿è·¯å‘é€æ•°æ®æ—¶ï¼Œå…¶å‘é€é˜Ÿåˆ—çš„ç¼“å­˜å˜ä¸ºé›¶è€Œæ— æ³•å‘é€å‡ºå»æ—¶ï¼Œå¯ä»¥å‘ IP åŒ…çš„æºåœ°å€å‘é€ä¸€ä¸ª ICMP åŸç‚¹æŠ‘åˆ¶æ¶ˆæ¯ã€‚</p>
<p>5ï¼šè·¯ç”±å™¨å‘ç°å‘é€ç«¯ä¸»æœºä½¿ç”¨äº†ã€Œä¸æ˜¯æœ€ä¼˜ã€çš„è·¯å¾„å‘é€æ•°æ®ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ä¸€ä¸ª ICMP é‡å®šå‘æ¶ˆæ¯ç»™è¿™ä¸ªä¸»æœºã€‚</p>
<p>11ï¼šIP åŒ…ä¸­æœ‰ä¸€ä¸ªå­—æ®µå«åš TTL ï¼ˆ Time To Live ï¼Œç”Ÿå­˜å‘¨æœŸï¼‰ï¼Œå®ƒçš„å€¼éšç€æ¯ç»è¿‡ä¸€æ¬¡è·¯ç”±å™¨å°±ä¼šå‡1ï¼Œç›´åˆ°å‡åˆ° 0 æ—¶è¯¥ IP åŒ…ä¼šè¢«ä¸¢å¼ƒã€‚è®¾ç½® IP åŒ…ç”Ÿå­˜å‘¨æœŸçš„ä¸»è¦ç›®çš„ï¼Œæ˜¯ä¸ºäº†åœ¨è·¯ç”±æ§åˆ¶é‡åˆ°é—®é¢˜å‘ç”Ÿå¾ªç¯çŠ¶å†µæ—¶ï¼Œé¿å… IP åŒ…æ— ä¼‘æ­¢åœ°åœ¨ç½‘ç»œä¸Šè¢«è½¬å‘ã€‚</p>
<h3 id="IGMPï¼ˆå› ç‰¹ç½‘ç»„ç®¡ç†åè®®ï¼‰"><a href="#IGMPï¼ˆå› ç‰¹ç½‘ç»„ç®¡ç†åè®®ï¼‰" class="headerlink" title="IGMPï¼ˆå› ç‰¹ç½‘ç»„ç®¡ç†åè®®ï¼‰"></a>IGMPï¼ˆå› ç‰¹ç½‘ç»„ç®¡ç†åè®®ï¼‰</h3><p>IGMP æ˜¯å› ç‰¹ç½‘ç»„ç®¡ç†åè®®ï¼Œå·¥ä½œåœ¨ä¸»æœºï¼ˆç»„æ’­æˆå‘˜ï¼‰å’Œæœ€åä¸€è·³è·¯ç”±ä¹‹é—´ï¼Œ</p>
<p>D ç±»åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç»„æ’­åœ°å€ï¼Œåªæœ‰ä¸€ç»„çš„ä¸»æœºèƒ½æ”¶åˆ°æ•°æ®åŒ…ï¼Œä¸åœ¨ä¸€ç»„çš„ä¸»æœºä¸èƒ½æ”¶åˆ°æ•°ç»„åŒ…ã€‚</p>
<h2 id="Pingå‘½ä»¤"><a href="#Pingå‘½ä»¤" class="headerlink" title="Pingå‘½ä»¤"></a>Pingå‘½ä»¤</h2><p>ping æ˜¯åŸºäº ICMP åè®®å·¥ä½œçš„ã€‚</p>
<p>ICMP æŠ¥æ–‡æ˜¯å°è£…åœ¨ IP åŒ…é‡Œé¢ï¼Œå®ƒå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œæ˜¯ IP åè®®çš„åŠ©æ‰‹ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599633694899.png" alt="1599633694899"></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599633743475.png" alt="1599633743475"></p>
<p>å¯ä»¥å‘å¯¹ç«¯ä¸»æœºå‘é€å›é€è¯·æ±‚çš„æ¶ˆæ¯ï¼ˆ ICMP Echo Request Message ï¼Œç±»å‹ 8 ï¼‰ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å¯¹ç«¯ä¸»æœºå‘å›æ¥çš„å›é€åº”ç­”æ¶ˆæ¯ï¼ˆ ICMP Echo Reply Message ï¼Œç±»å‹ 0 ï¼‰ã€‚</p>
<h3 id="ping-çš„å‘é€å’Œæ¥æ”¶è¿‡ç¨‹"><a href="#ping-çš„å‘é€å’Œæ¥æ”¶è¿‡ç¨‹" class="headerlink" title="ping çš„å‘é€å’Œæ¥æ”¶è¿‡ç¨‹"></a>ping çš„å‘é€å’Œæ¥æ”¶è¿‡ç¨‹</h3><p>åŒä¸ªå­ç½‘ä¸‹çš„ä¸»æœº A å’Œ ä¸»æœº Bï¼Œä¸»æœº A æ‰§è¡Œ ping ä¸»æœº B åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¶é—´å‘é€äº†ä»€ä¹ˆ</p>
<ol>
<li><p>æ„å»ºä¸€ä¸ª ICMP å›é€è¯·æ±‚æ¶ˆæ¯æ•°æ®åŒ…ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599643761263.png" alt="1599643761263"></p>
</li>
<li><p>æ„å»ºä¸€ä¸ª IP æ•°æ®åŒ…</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599643783667.png" alt="1599643783667"></p>
</li>
<li><p>åŠ å…¥ MACå¤´</p>
</li>
</ol>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599643796582.png" alt="1599643796582"></p>
<ol>
<li><p>ä¸»æœº B æ”¶åˆ°è¿™ä¸ªæ•°æ®å¸§åï¼Œå…ˆæ£€æŸ¥å®ƒçš„ç›®çš„ MAC åœ°å€ï¼Œå¹¶å’Œæœ¬æœºçš„ MAC åœ°å€å¯¹æ¯”ï¼Œå¦‚ç¬¦åˆï¼Œåˆ™æ¥æ”¶ï¼Œå¦åˆ™å°±ä¸¢å¼ƒã€‚æ¥æ”¶åæ£€æŸ¥è¯¥æ•°æ®å¸§ï¼Œå°† IP æ•°æ®åŒ…ä»å¸§ä¸­æå–å‡ºæ¥ï¼Œäº¤ç»™æœ¬æœºçš„ IP å±‚ã€‚åŒæ ·ï¼ŒIP å±‚æ£€æŸ¥åï¼Œå°†æœ‰ç”¨çš„ä¿¡æ¯æå–åäº¤ç»™ ICMP åè®®ã€‚ä¸»æœº B ä¼šæ„å»ºä¸€ä¸ª ICMP å›é€å“åº”æ¶ˆæ¯æ•°æ®åŒ…</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599646372406.png" alt="1599646372406"></p>
</li>
</ol>
<h2 id="è®¿é—®ç½‘å€"><a href="#è®¿é—®ç½‘å€" class="headerlink" title="è®¿é—®ç½‘å€"></a>è®¿é—®ç½‘å€</h2><h3 id="URLè§£æ"><a href="#URLè§£æ" class="headerlink" title="URLè§£æ"></a>URLè§£æ</h3><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599646805689.png" alt="1599646805689"></p>
<p>å½“æ²¡æœ‰è·¯å¾„åæ—¶ï¼Œå°±ä»£è¡¨è®¿é—®æ ¹ç›®å½•ä¸‹äº‹å…ˆè®¾ç½®çš„é»˜è®¤æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ /index.html æˆ–è€… /default.html</p>
<h3 id="ç”Ÿäº§-HTTP-è¯·æ±‚ä¿¡æ¯"><a href="#ç”Ÿäº§-HTTP-è¯·æ±‚ä¿¡æ¯" class="headerlink" title="ç”Ÿäº§ HTTP è¯·æ±‚ä¿¡æ¯"></a>ç”Ÿäº§ HTTP è¯·æ±‚ä¿¡æ¯</h3><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599646862552.png" alt="1599646862552"></p>
<h3 id="æŸ¥è¯¢çœŸå®IPåœ°å€"><a href="#æŸ¥è¯¢çœŸå®IPåœ°å€" class="headerlink" title="æŸ¥è¯¢çœŸå®IPåœ°å€"></a>æŸ¥è¯¢çœŸå®IPåœ°å€</h3><p>æŸ¥è¯¢æœåŠ¡å™¨åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œå› ä¸ºå§”æ‰˜æ“ä½œç³»ç»Ÿå‘é€æ¶ˆæ¯æ—¶ï¼Œå¿…é¡»æä¾›é€šä¿¡å¯¹è±¡çš„ IP åœ°å€ã€‚</p>
<p>DNS æœåŠ¡å™¨ä¸“é—¨ä¿å­˜äº† Web æœåŠ¡å™¨åŸŸåä¸ IP çš„å¯¹åº”å…³ç³»ã€‚</p>
<h3 id="åè®®æ ˆ"><a href="#åè®®æ ˆ" class="headerlink" title="åè®®æ ˆ"></a>åè®®æ ˆ</h3><p>æŠŠ HTTP çš„ä¼ è¾“å·¥ä½œäº¤ç»™æ“ä½œç³»ç»Ÿä¸­çš„åè®®æ ˆï¼Œåè®®æ ˆçš„å†…éƒ¨åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ‰¿æ‹…ä¸åŒçš„å·¥ä½œã€‚ä¸Šä¸‹å…³ç³»æ˜¯æœ‰ä¸€å®šçš„è§„åˆ™çš„ï¼Œä¸Šé¢çš„éƒ¨åˆ†ä¼šå‘ä¸‹é¢çš„éƒ¨åˆ†å§”æ‰˜å·¥ä½œï¼Œä¸‹é¢çš„éƒ¨åˆ†æ”¶åˆ°å§”æ‰˜çš„å·¥ä½œå¹¶æ‰§è¡Œã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647032468.png" alt="1599647032468"></p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><h4 id="åŸºç¡€çŸ¥è¯†-1"><a href="#åŸºç¡€çŸ¥è¯†-1" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h4><p>TCP æ˜¯é¢å‘è¿æ¥ï¼ˆä¸€å¯¹ä¸€ï¼ŒUDPå¯ä»¥ä¸€å¯¹å¤šï¼‰çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<p>TCPè¿æ¥ï¼ŒåŒ…æ‹¬Socketã€åºåˆ—å·å’Œçª—å£å¤§å°ï¼Œç”¨äºä¿è¯å¯é æ€§å’Œæµé‡æ§åˆ¶ç»´æŠ¤çš„æŸäº›çŠ¶æ€ä¿¡æ¯ã€‚</p>
<ul>
<li>Socketï¼šç”± IP åœ°å€å’Œç«¯å£å·ç»„æˆ</li>
<li>åºåˆ—å·ï¼šç”¨æ¥è§£å†³ä¹±åºé—®é¢˜ç­‰</li>
<li>çª—å£å¤§å°ï¼šç”¨æ¥åšæµé‡æ§åˆ¶</li>
</ul>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599650022884.png" alt="1599650022884"></p>
<p>TCP å››å…ƒç»„å¯ä»¥å”¯ä¸€çš„ç¡®å®šä¸€ä¸ªè¿æ¥ï¼Œç«¯å£åœ¨TCPå¤´éƒ¨ä¸­ï¼Œåœ°å€åœ¨IPå¤´éƒ¨ä¸­ã€‚</p>
<h4 id="UDPå’ŒTCP"><a href="#UDPå’ŒTCP" class="headerlink" title="UDPå’ŒTCP"></a>UDPå’ŒTCP</h4><p>UDP ä¸æä¾›å¤æ‚çš„æ§åˆ¶æœºåˆ¶ï¼Œåˆ©ç”¨ IP æä¾›é¢å‘ã€Œæ— è¿æ¥ã€çš„é€šä¿¡æœåŠ¡ã€‚<br>UDP åè®®éå¸¸ç®€å•ï¼Œå¤´éƒ¨åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼ˆ 64 ä½ï¼‰ï¼ŒUDP çš„å¤´éƒ¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599650138256.png" alt="1599650138256"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>TCP</th>
<th>UDP</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¿æ¥</td>
<td>å‘è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¼ è¾“æ•°æ®å‰å…ˆè¦å»ºç«‹è¿æ¥ã€‚</td>
<td>ä¸éœ€è¦è¿æ¥ï¼Œå³åˆ»ä¼ è¾“æ•°æ®</td>
</tr>
<tr>
<td>æœåŠ¡å¯¹è±¡</td>
<td>ä¸€å¯¹ä¸€çš„ä¸¤ç‚¹æœåŠ¡ï¼Œå³ä¸€æ¡è¿æ¥åªæœ‰ä¸¤ä¸ªç«¯ç‚¹</td>
<td>æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</td>
</tr>
<tr>
<td>å¯é æ€§</td>
<td>æ˜¯å¯é äº¤ä»˜æ•°æ®çš„ï¼Œæ•°æ®å¯ä»¥æ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰éœ€åˆ°è¾¾ã€‚</td>
<td>å°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œä¸ä¿è¯å¯é äº¤ä»˜æ•°æ®ã€‚</td>
</tr>
<tr>
<td>æ‹¥å¡æ§åˆ¶ã€æµé‡æ§åˆ¶</td>
<td>æœ‰æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶æœºåˆ¶ï¼Œä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</td>
<td>å³ä½¿ç½‘ç»œéå¸¸æ‹¥å µäº†ï¼Œä¹Ÿä¸ä¼šå½±å“ UDP çš„å‘é€é€Ÿç‡ã€‚</td>
</tr>
<tr>
<td>é¦–éƒ¨å¼€é”€</td>
<td>é¦–éƒ¨é•¿åº¦è¾ƒé•¿ï¼Œä¼šæœ‰ä¸€å®šçš„å¼€é”€ï¼Œé¦–éƒ¨åœ¨æ²¡æœ‰ä½¿ç”¨ã€Œé€‰é¡¹ã€å­—æ®µæ—¶æ˜¯ 20 ä¸ªå­—èŠ‚ï¼Œå¦‚æœä½¿</td>
<td>é¦–éƒ¨åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¼€é”€è¾ƒå°ã€‚</td>
</tr>
<tr>
<td>ä¼ è¾“æ–¹å¼</td>
<td>æµå¼ä¼ è¾“ï¼Œæ²¡æœ‰è¾¹ç•Œï¼Œä½†ä¿è¯é¡ºåºå’Œå¯é ã€‚</td>
<td>æ˜¯ä¸€ä¸ªåŒ…ä¸€ä¸ªåŒ…çš„å‘é€ï¼Œæ˜¯æœ‰è¾¹ç•Œçš„ï¼Œä½†å¯èƒ½ä¼šä¸¢åŒ…å’Œä¹±åºã€‚</td>
</tr>
<tr>
<td>åˆ†ç‰‡ä¸åŒ</td>
<td>æ•°æ®å¤§å°å¦‚æœå¤§äº MSS å¤§å°ï¼Œåˆ™ä¼šåœ¨ä¼ è¾“å±‚è¿›è¡Œåˆ†ç‰‡ï¼Œç›®æ ‡ä¸»æœºæ”¶åˆ°åï¼Œä¹ŸåŒæ ·åœ¨ä¼ è¾“</td>
<td>æ•°æ®å¤§å°å¦‚æœå¤§äº MTU å¤§å°ï¼Œåˆ™ä¼šåœ¨ IP å±‚è¿›è¡Œåˆ†ç‰‡ï¼Œç›®æ ‡ä¸»æœºæ”¶åˆ°åï¼Œåœ¨ IP å±‚ç»„è£…å®Œæ•°æ®ï¼Œæ¥ç€å†ä¼ ç»™ä¼ è¾“å±‚ï¼Œä½†æ˜¯å¦‚æœä¸­é€”ä¸¢äº†ä¸€ä¸ªåˆ†ç‰‡ï¼Œåˆ™å°±éœ€è¦é‡ä¼ æ‰€æœ‰çš„æ•°æ®åŒ…ï¼Œè¿™æ ·ä¼ è¾“</td>
</tr>
<tr>
<td>åº”ç”¨åœºæ™¯</td>
<td>FTP æ–‡ä»¶ä¼ è¾“ HTTP / HTTPS</td>
<td>åŒ…æ€»é‡è¾ƒå°‘çš„é€šä¿¡ï¼Œå¦‚ DNS ã€SNMP ç­‰ï¼Œè§†é¢‘ã€éŸ³é¢‘ç­‰å¤šåª’ä½“é€šä¿¡</td>
</tr>
</tbody>
</table>
</div>
<p>IP å±‚æ˜¯ã€Œä¸å¯é ã€çš„ï¼Œå®ƒä¸ä¿è¯ç½‘ç»œåŒ…çš„äº¤ä»˜ã€ä¸ä¿è¯ç½‘ç»œåŒ…çš„æŒ‰åºäº¤ä»˜ã€ä¹Ÿä¸ä¿è¯ç½‘ç»œåŒ…ä¸­çš„æ•°æ®çš„å®Œæ•´æ€§ã€‚TCP æ˜¯ä¸€ä¸ªå·¥ä½œåœ¨ä¼ è¾“å±‚çš„å¯é æ•°æ®ä¼ è¾“çš„æœåŠ¡ï¼Œå®ƒèƒ½ç¡®ä¿æ¥æ”¶ç«¯æ¥æ”¶çš„ç½‘ç»œåŒ…æ˜¯æ— æŸåã€æ— é—´éš”ã€éå†—ä½™å’ŒæŒ‰åºçš„ã€‚</p>
<h4 id="TCP-æŠ¥æ–‡å¤´éƒ¨çš„æ ¼å¼"><a href="#TCP-æŠ¥æ–‡å¤´éƒ¨çš„æ ¼å¼" class="headerlink" title="TCP æŠ¥æ–‡å¤´éƒ¨çš„æ ¼å¼:"></a>TCP æŠ¥æ–‡å¤´éƒ¨çš„æ ¼å¼:</h4><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647186623.png" alt="1599647186623"></p>
<ol>
<li><p>æºç«¯å£å·å’Œç›®æ ‡ç«¯å£å·æ˜¯ä¸å¯å°‘çš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸¤ä¸ªç«¯å£å·ï¼Œæ•°æ®å°±ä¸çŸ¥é“åº”è¯¥å‘ç»™å“ªä¸ªåº”ç”¨ã€‚</p>
</li>
<li><p>åºå·ï¼Œåœ¨å»ºç«‹è¿æ¥æ—¶ç”±è®¡ç®—æœºç”Ÿæˆçš„éšæœºæ•°ä½œä¸ºå…¶åˆå§‹å€¼ï¼Œé€šè¿‡ SYN åŒ…ä¼ ç»™æ¥æ”¶ç«¯ä¸»æœºï¼Œæ¯å‘é€ä¸€<br>æ¬¡æ•°æ®ï¼Œå°±ã€Œç´¯åŠ ã€ä¸€æ¬¡è¯¥ã€Œæ•°æ®å­—èŠ‚æ•°ã€çš„å¤§å°ã€‚è§£å†³åŒ…ä¹±åºçš„é—®é¢˜ã€‚</p>
</li>
<li><p>ç¡®è®¤å·ï¼ŒæŒ‡ä¸‹ä¸€æ¬¡ã€ŒæœŸæœ›ã€æ”¶åˆ°çš„æ•°æ®çš„åºåˆ—å·ï¼Œå‘é€ç«¯æ”¶åˆ°è¿™ä¸ªç¡®è®¤åº”ç­”ä»¥åå¯ä»¥è®¤ä¸ºåœ¨è¿™ä¸ªåº<br>å·ä»¥å‰çš„æ•°æ®éƒ½å·²ç»è¢«æ­£å¸¸æ¥æ”¶ï¼Œä¸ºäº†è§£å†³ä¸ä¸¢åŒ…çš„é—®é¢˜ã€‚</p>
</li>
<li><p>æ§åˆ¶ä½ã€‚</p>
<blockquote>
<ol>
<li><p>SYN è¯¥ä½ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºå¸Œæœ›å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å…¶ã€Œåºåˆ—å·ã€çš„å­—æ®µè¿›è¡Œåºåˆ—å·åˆå§‹å€¼çš„è®¾å®šã€‚</p>
<blockquote>
<p>RFC1948 ä¸­æå‡ºäº†ä¸€ä¸ªè¾ƒå¥½çš„åˆå§‹åŒ–åºåˆ—å· ISN éšæœºç”Ÿæˆç®—æ³•ã€‚<br>ISN = M + F (localhost, localport, remotehost, remoteport)<br>M æ˜¯ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè¿™ä¸ªè®¡æ—¶å™¨æ¯éš” 4 æ¯«ç§’åŠ  1ã€‚<br>F æ˜¯ä¸€ä¸ª Hash ç®—æ³•ï¼Œæ ¹æ®æº IPã€ç›®çš„ IPã€æºç«¯å£ã€ç›®çš„ç«¯å£ç”Ÿæˆä¸€ä¸ªéšæœºæ•°å€¼ã€‚è¦ä¿è¯Hash ç®—æ³•ä¸èƒ½è¢«å¤–éƒ¨è½»æ˜“æ¨ç®—å¾—å‡ºï¼Œç”¨ MD5 ç®—æ³•æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚</p>
</blockquote>
</li>
<li><p>ACK è¯¥ä½ä¸º 1 æ—¶ï¼Œã€Œç¡®è®¤åº”ç­”ã€çš„å­—æ®µå˜ä¸ºæœ‰æ•ˆï¼ŒTCP è§„å®šé™¤äº†æœ€åˆå»ºç«‹è¿æ¥æ—¶çš„ SYNåŒ…ä¹‹å¤–è¯¥ä½å¿…é¡»è®¾ç½®ä¸º 1 ã€‚</p>
</li>
<li><p>RST è¯¥ä½ä¸º 1 æ—¶ï¼Œè¡¨ç¤º TCP è¿æ¥ä¸­å‡ºç°å¼‚å¸¸å¿…é¡»å¼ºåˆ¶æ–­å¼€è¿æ¥ã€‚</p>
</li>
<li><p>FIN è¯¥ä½ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºä»Šåä¸ä¼šå†æœ‰æ•°æ®å‘é€ï¼Œå¸Œæœ›æ–­å¼€è¿æ¥ã€‚å½“é€šä¿¡ç»“æŸå¸Œæœ›æ–­å¼€è¿æ¥æ—¶ï¼Œé€šä¿¡åŒæ–¹çš„ä¸»æœºä¹‹é—´å°±å¯ä»¥ç›¸äº’äº¤æ¢ FIN ä½ä¸º 1 çš„ TCP æ®µã€‚</p>
<p>TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œå› è€ŒåŒæ–¹è¦ç»´æŠ¤è¿æ¥çš„çŠ¶æ€ï¼Œè¿™äº›å¸¦çŠ¶æ€ä½çš„åŒ…çš„å‘é€ï¼Œä¼šå¼•èµ·åŒæ–¹çš„çŠ¶æ€å˜æ›´ã€‚</p>
</li>
</ol>
</blockquote>
</li>
<li><p>çª—å£å¤§å°ã€‚TCP è¦åšæµé‡æ§åˆ¶ï¼Œé€šä¿¡åŒæ–¹å„å£°æ˜ä¸€ä¸ªçª—å£ï¼ˆç¼“å­˜å¤§å°ï¼‰ï¼Œæ ‡è¯†è‡ªå·±å½“å‰èƒ½å¤Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œåˆ«å‘é€çš„å¤ªå¿«ï¼Œä¹Ÿåˆ«å‘çš„å¤ªæ…¢ã€‚</p>
</li>
</ol>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹è¿æ¥"><a href="#ä¸‰æ¬¡æ¡æ‰‹è¿æ¥" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹è¿æ¥"></a>ä¸‰æ¬¡æ¡æ‰‹è¿æ¥</h4><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647353466.png" alt="1599647353466"></p>
<ol>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¤„äº CLOSED çŠ¶æ€ã€‚å…ˆæ˜¯æœåŠ¡ç«¯ä¸»åŠ¨ç›‘å¬æŸä¸ªç«¯å£ï¼Œå¤„äº LISTENçŠ¶æ€ã€‚</li>
<li>å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¿æ¥ SYN ï¼Œä¹‹åå¤„äº SYN-SENT çŠ¶æ€ã€‚</li>
<li>æœåŠ¡ç«¯æ”¶åˆ°å‘èµ·çš„è¿æ¥ï¼Œè¿”å› SYN ï¼Œå¹¶ä¸” ACK å®¢æˆ·ç«¯çš„ SYN ï¼Œä¹‹åå¤„äº SYN-RCVD çŠ¶æ€ã€‚</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„ SYN å’Œ ACK ä¹‹åï¼Œå‘é€ ACK çš„ ACK ï¼Œä¹‹åå¤„äºESTABLISHED çŠ¶æ€ï¼Œå› ä¸ºå®ƒä¸€å‘ä¸€æ”¶æˆåŠŸäº†ã€‚</li>
<li>æœåŠ¡ç«¯æ”¶åˆ° ACK çš„ ACK ä¹‹åï¼Œå¤„äº ESTABLISHED çŠ¶æ€ï¼Œå› ä¸ºå®ƒä¹Ÿä¸€å‘ä¸€æ”¶äº†ã€‚</li>
</ol>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ï¼Œå‰ä¸¤æ¬¡æ¡æ‰‹æ˜¯ä¸å¯ä»¥æºå¸¦æ•°æ®çš„ï¼Œ</p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› "><a href="#ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› " class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› "></a>ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› </h4><ol>
<li><p>é˜²æ­¢æ—§çš„é‡å¤è¿æ¥åˆå§‹åŒ–é€ æˆæ··ä¹±ã€‚</p>
<blockquote>
<p>åœ¨ç½‘ç»œæ‹¥å µæƒ…å†µä¸‹ï¼š<br>ä¸€ä¸ªã€Œæ—§ SYN æŠ¥æ–‡ã€æ¯”ã€Œæœ€æ–°çš„ SYN ã€ æŠ¥æ–‡æ—©åˆ°è¾¾äº†æœåŠ¡ç«¯ï¼›<br>é‚£ä¹ˆæ­¤æ—¶æœåŠ¡ç«¯å°±ä¼šå›ä¸€ä¸ª SYN + ACK æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼›<br>å®¢æˆ·ç«¯æ”¶åˆ°åå¯ä»¥æ ¹æ®è‡ªèº«çš„ä¸Šä¸‹æ–‡ï¼Œåˆ¤æ–­è¿™æ˜¯ä¸€ä¸ªå†å²è¿æ¥ï¼ˆåºåˆ—å·è¿‡æœŸæˆ–è¶…æ—¶ï¼‰ï¼Œé‚£ä¹ˆå®¢æˆ·<br>ç«¯å°±ä¼šå‘é€ RST æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œè¡¨ç¤ºä¸­æ­¢è¿™ä¸€æ¬¡è¿æ¥ã€‚</p>
</blockquote>
</li>
<li><p>åŒæ­¥åŒæ–¹åˆå§‹åºåˆ—å·</p>
<blockquote>
<p>åºåˆ—å·æ˜¯å¯é ä¼ è¾“çš„ä¸€ä¸ªå…³é”®å› ç´ ï¼Œå®ƒçš„ä½œç”¨ï¼š<br>æ¥æ”¶æ–¹å¯ä»¥å»é™¤é‡å¤çš„æ•°æ®ï¼›<br>æ¥æ”¶æ–¹å¯ä»¥æ ¹æ®æ•°æ®åŒ…çš„åºåˆ—å·æŒ‰åºæ¥æ”¶ï¼›<br>å¯ä»¥æ ‡è¯†å‘é€å‡ºå»çš„æ•°æ®åŒ…ä¸­ï¼Œ å“ªäº›æ˜¯å·²ç»è¢«å¯¹æ–¹æ”¶åˆ°çš„ï¼›</p>
</blockquote>
</li>
<li><p>é¿å…èµ„æºæµªè´¹</p>
<blockquote>
<p>ã€Œä¸¤æ¬¡æ¡æ‰‹ã€ï¼šå¦‚æœå®¢æˆ·ç«¯çš„ SYN é˜»å¡äº†ï¼Œé‡å¤å‘é€å¤šæ¬¡ SYN æŠ¥æ–‡ï¼Œé‚£ä¹ˆæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚åå°±ä¼šå»ºç«‹å¤šä¸ªå†—ä½™çš„æ— æ•ˆé“¾æ¥ï¼Œé€ æˆä¸å¿…è¦çš„èµ„æºæµªè´¹ã€‚</p>
<p>æ— æ³•é˜²æ­¢å†å²è¿æ¥çš„å»ºç«‹ï¼Œä¼šé€ æˆåŒæ–¹èµ„æºçš„æµªè´¹ï¼Œä¹Ÿæ— æ³•å¯é çš„åŒæ­¥åŒæ–¹åºåˆ—å·ï¼›</p>
</blockquote>
</li>
</ol>
<h4 id="TCPå››æ¬¡æŒ¥æ‰‹"><a href="#TCPå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPå››æ¬¡æŒ¥æ‰‹"></a>TCPå››æ¬¡æŒ¥æ‰‹</h4><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599657284840.png" alt="1599657284840"></p>
<p>ç­‰å¾…æœåŠ¡ç«¯å¤„ç†å®Œæ•°æ®åï¼Œä¹Ÿå‘å®¢æˆ·ç«¯å‘é€ FIN æŠ¥æ–‡ï¼Œä¹‹åæœåŠ¡ç«¯è¿›å…¥ LAST_ACK çŠ¶æ€</p>
<p><strong>ä¸ºä»€ä¹ˆä¼šæœ‰å››æ¬¡</strong></p>
<p>æœåŠ¡ç«¯é€šå¸¸éœ€è¦ç­‰å¾…å®Œæˆæ•°æ®çš„å‘é€å’Œå¤„ç†ï¼Œæ‰€ä»¥æœåŠ¡ç«¯çš„ ACK å’Œ FIN ä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ï¼Œä»è€Œæ¯”ä¸‰æ¬¡æ¡æ‰‹å¯¼è‡´å¤šäº†ä¸€æ¬¡ã€‚</p>
<p><strong>TIME_WAIT ç­‰å¾…çš„æ—¶é—´æ˜¯ 2MSL</strong></p>
<p>MSL æ˜¯ Maximum Segment Lifetimeï¼ŒæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œå®ƒæ˜¯ä»»ä½•æŠ¥æ–‡åœ¨ç½‘ç»œä¸Šå­˜åœ¨çš„æœ€é•¿æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æŠ¥æ–‡å°†è¢«ä¸¢å¼ƒã€‚å› ä¸º TCP æŠ¥æ–‡åŸºäºæ˜¯ IP åè®®çš„ï¼Œè€Œ IP å¤´ä¸­æœ‰ä¸€ä¸ª TTL å­—æ®µï¼Œæ˜¯ IP æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±æ•°ï¼Œæ¯ç»è¿‡ä¸€ä¸ªå¤„ç†ä»–çš„è·¯ç”±å™¨æ­¤å€¼å°±å‡ 1ï¼Œå½“æ­¤å€¼ä¸º 0 åˆ™æ•°æ®æŠ¥å°†è¢«ä¸¢å¼ƒï¼ŒåŒæ—¶å‘é€ ICMP æŠ¥æ–‡é€šçŸ¥æºä¸»æœºã€‚</p>
<p>MSL ä¸ TTL çš„åŒºåˆ«ï¼š MSL çš„å•ä½æ˜¯æ—¶é—´ï¼Œè€Œ TTL æ˜¯ç»è¿‡è·¯ç”±è·³æ•°ã€‚æ‰€ä»¥ MSL åº”è¯¥è¦å¤§äºç­‰äº TTLæ¶ˆè€—ä¸º 0 çš„æ—¶é—´ï¼Œä»¥ç¡®ä¿æŠ¥æ–‡å·²è¢«è‡ªç„¶æ¶ˆäº¡ã€‚</p>
<p>TIME_WAIT ç­‰å¾… 2 å€çš„ MSLï¼Œæ¯”è¾ƒåˆç†çš„è§£é‡Šæ˜¯ï¼š ç½‘ç»œä¸­å¯èƒ½å­˜åœ¨æ¥è‡ªå‘é€æ–¹çš„æ•°æ®åŒ…ï¼Œå½“è¿™äº›å‘é€æ–¹çš„æ•°æ®åŒ…è¢«æ¥æ”¶æ–¹å¤„ç†ååˆä¼šå‘å¯¹æ–¹å‘é€å“åº”ï¼Œæ‰€ä»¥ä¸€æ¥ä¸€å›éœ€è¦ç­‰å¾… 2 å€çš„æ—¶é—´ã€‚</p>
<p><strong>TIME-WAITçš„åŸå› </strong></p>
<ol>
<li><p>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…</p>
<blockquote>
<p>ç»è¿‡ 2MSL è¿™ä¸ªæ—¶é—´ï¼Œè¶³ä»¥è®©ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®åŒ…éƒ½è¢«ä¸¢å¼ƒï¼Œä½¿å¾—åŸæ¥è¿æ¥çš„æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­éƒ½è‡ªç„¶æ¶ˆå¤±ï¼Œå†å‡ºç°çš„æ•°æ®åŒ…ä¸€å®šéƒ½æ˜¯æ–°å»ºç«‹è¿æ¥æ‰€äº§ç”Ÿçš„ã€‚</p>
</blockquote>
</li>
<li><p>ä¿è¯è¿æ¥æ­£ç¡®å…³é—­</p>
<blockquote>
<p>TIME-WAIT ä½œç”¨æ˜¯ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿æœ€åçš„ ACK èƒ½è®©è¢«åŠ¨å…³é—­æ–¹æ¥æ”¶ï¼Œä»è€Œå¸®åŠ©å…¶æ­£å¸¸å…³é—­ã€‚</p>
</blockquote>
</li>
</ol>
<h4 id="TCPçš„é‡ä¼ æœºåˆ¶"><a href="#TCPçš„é‡ä¼ æœºåˆ¶" class="headerlink" title="TCPçš„é‡ä¼ æœºåˆ¶"></a>TCPçš„é‡ä¼ æœºåˆ¶</h4><p>TCP å®ç°å¯é ä¼ è¾“çš„æ–¹å¼ä¹‹ä¸€ï¼Œæ˜¯é€šè¿‡åºåˆ—å·ä¸ç¡®è®¤åº”ç­”ã€‚</p>
<p>TCP é’ˆå¯¹æ•°æ®åŒ…ä¸¢å¤±çš„æƒ…å†µï¼Œä¼šç”¨é‡ä¼ æœºåˆ¶è§£å†³ã€‚</p>
<h5 id="è¶…æ—¶é‡ä¼ "><a href="#è¶…æ—¶é‡ä¼ " class="headerlink" title="è¶…æ—¶é‡ä¼ "></a>è¶…æ—¶é‡ä¼ </h5><p>åœ¨å‘é€æ•°æ®æ—¶ï¼Œè®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¶…è¿‡æŒ‡å®šçš„æ—¶é—´åï¼Œæ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ACK ç¡®è®¤åº”ç­”æŠ¥æ–‡ï¼Œå°±ä¼šé‡å‘è¯¥æ•°æ®</p>
<p>TCP ä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µå‘ç”Ÿè¶…æ—¶é‡ä¼ ï¼š</p>
<ul>
<li>æ•°æ®åŒ…ä¸¢å¤±</li>
<li>ç¡®è®¤åº”ç­”ä¸¢å¤±</li>
</ul>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599658362894.png" alt="1599658362894"></p>
<p>RTT ï¼ˆRound-Trip Time å¾€è¿”æ—¶å»¶ï¼‰ï¼šæ˜¯æ•°æ®ä»ç½‘ç»œä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯åŒ…çš„å¾€è¿”æ—¶é—´ã€‚</p>
<p>è¶…æ—¶é‡ä¼ æ—¶é—´æ˜¯ä»¥ RTO ï¼ˆRetransmission Timeout è¶…æ—¶é‡ä¼ æ—¶é—´ï¼‰è¡¨ç¤ºï¼Œè¶…æ—¶é‡ä¼ æ—¶é—´ RTO çš„å€¼åº”è¯¥ç•¥å¤§äºæŠ¥æ–‡å¾€è¿” RTT çš„å€¼ã€‚</p>
<h5 id="å¿«é€Ÿé‡ä¼ "><a href="#å¿«é€Ÿé‡ä¼ " class="headerlink" title="å¿«é€Ÿé‡ä¼ "></a>å¿«é€Ÿé‡ä¼ </h5><p>å¿«é€Ÿé‡ä¼ çš„å·¥ä½œæ–¹å¼æ˜¯å½“æ”¶åˆ°ä¸‰ä¸ªç›¸åŒçš„ ACK æŠ¥æ–‡æ—¶ï¼Œä¼šåœ¨å®šæ—¶å™¨è¿‡æœŸä¹‹å‰ï¼Œé‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µã€‚ä¸ä»¥æ—¶é—´ä¸ºé©±åŠ¨ï¼Œè€Œæ˜¯ä»¥æ•°æ®é©±åŠ¨é‡ä¼ ã€‚åªè§£å†³äº†è¶…æ—¶æ—¶é—´çš„é—®é¢˜ï¼Œé¢ä¸´ç€å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯é‡ä¼ çš„æ—¶å€™ï¼Œæ˜¯é‡ä¼ ä¹‹å‰çš„ä¸€ä¸ªï¼Œè¿˜æ˜¯é‡ä¼ æ‰€æœ‰çš„é—®é¢˜ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599701097569.png" alt="1599701097569"></p>
<h5 id="SACK-æ–¹æ³•"><a href="#SACK-æ–¹æ³•" class="headerlink" title="SACK æ–¹æ³•"></a>SACK æ–¹æ³•</h5><p>Selective Acknowledgment é€‰æ‹©æ€§ç¡®è®¤</p>
<p>åœ¨ TCP å¤´éƒ¨ã€Œé€‰é¡¹ã€å­—æ®µé‡ŒåŠ ä¸€ä¸ª SACK çš„ä¸œè¥¿ï¼Œå®ƒå¯ä»¥å°†ç¼“å­˜çš„åœ°å›¾å‘é€ç»™å‘é€æ–¹ï¼Œè¿™æ ·å‘é€æ–¹å°±å¯ä»¥çŸ¥é“å“ªäº›æ•°æ®æ”¶åˆ°äº†ï¼Œå“ªäº›æ•°æ®æ²¡æ”¶åˆ°ï¼ŒçŸ¥é“äº†è¿™äº›ä¿¡æ¯ï¼Œå°±å¯ä»¥åªé‡ä¼ ä¸¢å¤±çš„æ•°æ®ã€‚</p>
<h5 id="Duplicate-SACK"><a href="#Duplicate-SACK" class="headerlink" title="Duplicate SACK"></a>Duplicate SACK</h5><p>ä½¿ç”¨äº† SACK æ¥å‘Šè¯‰ã€Œå‘é€æ–¹ã€æœ‰å“ªäº›æ•°æ®è¢«é‡å¤æ¥æ”¶äº†ã€‚</p>
<h4 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h4><p>TCP æ˜¯æ¯å‘é€ä¸€ä¸ªæ•°æ®ï¼Œéƒ½è¦è¿›è¡Œä¸€æ¬¡ç¡®è®¤åº”ç­”ã€‚å½“ä¸Šä¸€ä¸ªæ•°æ®åŒ…æ”¶åˆ°äº†åº”ç­”äº†ï¼Œ å†å‘é€ä¸‹ä¸€ä¸ªã€‚ç¼ºç‚¹ï¼šæ•°æ®åŒ…çš„å¾€è¿”æ—¶é—´è¶Šé•¿ï¼Œé€šä¿¡çš„æ•ˆç‡å°±è¶Šä½ã€‚</p>
<p>çª—å£å¤§å°å°±æ˜¯æŒ‡æ— éœ€ç­‰å¾…ç¡®è®¤åº”ç­”ï¼Œè€Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®çš„æœ€å¤§å€¼ã€‚è¿™ä¸ªå­—æ®µæ˜¯æ¥æ”¶ç«¯å‘Šè¯‰å‘é€ç«¯è‡ªå·±è¿˜æœ‰å¤šå°‘ç¼“å†²åŒºå¯ä»¥æ¥æ”¶æ•°æ®ã€‚äºæ˜¯å‘é€ç«¯å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›æ¥å‘é€æ•°æ®ï¼Œè€Œä¸ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¤„ç†ä¸è¿‡æ¥ã€‚</p>
<p><strong>å‘é€æ–¹çš„æ»‘åŠ¨çª—å£</strong></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599701589673.png" alt="1599701589673"></p>
<p>TCP æ»‘åŠ¨çª—å£æ–¹æ¡ˆä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆæ¥è·Ÿè¸ªåœ¨å››ä¸ªä¼ è¾“ç±»åˆ«ä¸­çš„æ¯ä¸€ä¸ªç±»åˆ«ä¸­çš„å­—èŠ‚ã€‚å…¶ä¸­ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ç»å¯¹æŒ‡é’ˆï¼ˆæŒ‡ç‰¹å®šçš„åºåˆ—å·ï¼‰ï¼Œä¸€ä¸ªæ˜¯ç›¸å¯¹æŒ‡é’ˆï¼ˆéœ€è¦åšåç§»ï¼‰ã€‚</p>
<p><strong>æ¥æ”¶æ–¹çš„æ»‘åŠ¨çª—å£</strong></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599701705091.png" alt="1599701705091"></p>
<h4 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h4><p>å‘é€æ–¹ä¸èƒ½æ— è„‘çš„å‘æ•°æ®ç»™æ¥æ”¶æ–¹ï¼Œè¦è€ƒè™‘æ¥æ”¶æ–¹å¤„ç†èƒ½åŠ›ã€‚å¦‚æœä¸€ç›´æ— è„‘çš„å‘æ•°æ®ç»™å¯¹æ–¹ï¼Œä½†å¯¹æ–¹å¤„ç†ä¸è¿‡æ¥ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´è§¦å‘é‡å‘æœºåˆ¶ï¼Œä»è€Œå¯¼è‡´ç½‘ç»œæµé‡çš„æ— ç«¯çš„æµªè´¹ã€‚ä¸ºäº†è§£å†³è¿™ç§ç°è±¡å‘ç”Ÿï¼ŒTCP æä¾›ä¸€ç§æœºåˆ¶å¯ä»¥è®©ã€Œå‘é€æ–¹ã€æ ¹æ®ã€Œæ¥æ”¶æ–¹ã€çš„å®é™…æ¥æ”¶èƒ½åŠ›æ§åˆ¶å‘é€çš„æ•°æ®é‡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æµé‡æ§åˆ¶ã€‚</p>
<p><strong>çª—å£å…³é—­ï¼Œæ½œåœ¨æ­»é”</strong></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599702117779.png" alt="1599702117779"></p>
<p>TCP ä¸ºæ¯ä¸ªè¿æ¥è®¾æœ‰ä¸€ä¸ªæŒç»­å®šæ—¶å™¨ï¼Œåªè¦ TCP è¿æ¥ä¸€æ–¹æ”¶åˆ°å¯¹æ–¹çš„é›¶çª—å£é€šçŸ¥ï¼Œå°±å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚å¦‚æœæŒç»­è®¡æ—¶å™¨è¶…æ—¶ï¼Œå°±ä¼šå‘é€çª—å£æ¢æµ‹ ( Window probe ) æŠ¥æ–‡ï¼Œè€Œå¯¹æ–¹åœ¨ç¡®è®¤è¿™ä¸ªæ¢æµ‹æŠ¥æ–‡æ—¶ï¼Œç»™å‡ºè‡ªå·±ç°åœ¨çš„æ¥æ”¶çª—å£å¤§å°ã€‚</p>
<p>çª—å£æ¢æµ‹çš„æ¬¡æ•°ä¸€èˆ¬ä¸º 3 æ¬¡ï¼Œæ¯æ¬¡å¤§çº¦ 30-60 ç§’ï¼ˆä¸åŒçš„å®ç°å¯èƒ½ä¼šä¸ä¸€æ ·ï¼‰ã€‚å¦‚æœ 3 æ¬¡è¿‡åæ¥æ”¶çª—å£è¿˜æ˜¯ 0 çš„è¯ï¼Œæœ‰çš„ TCP å®ç°å°±ä¼šå‘ RST æŠ¥æ–‡æ¥ä¸­æ–­è¿æ¥ã€‚</p>
<p><strong>ç³Šæ¶‚çª—å£ç»¼åˆç—‡</strong></p>
<p>å¦‚æœæ¥æ”¶æ–¹è…¾å‡ºå‡ ä¸ªå­—èŠ‚å¹¶å‘Šè¯‰å‘é€æ–¹ç°åœ¨æœ‰å‡ ä¸ªå­—èŠ‚çš„çª—å£ï¼Œè€Œå‘é€æ–¹ä¼šä¹‰æ— åé¡¾åœ°å‘é€è¿™å‡ ä¸ªå­—èŠ‚ï¼Œè¿™å°±æ˜¯ç³Šæ¶‚çª—å£ç»¼åˆç—‡ã€‚TCP + IP å¤´æœ‰ 40 ä¸ªå­—èŠ‚ï¼Œä¸ºäº†ä¼ è¾“é‚£å‡ ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œè¦è¾¾ä¸Šè¿™ä¹ˆå¤§çš„å¼€é”€ï¼Œè¿™å¤ªä¸ç»æµäº†ã€‚</p>
<ul>
<li>è®©æ¥æ”¶æ–¹ä¸é€šå‘Šå°çª—å£ç»™å‘é€æ–¹</li>
<li>è®©å‘é€æ–¹é¿å…å‘é€å°æ•°æ®</li>
</ul>
<h4 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h4><p>é¿å…ã€Œå‘é€æ–¹ã€çš„æ•°æ®å¡«æ»¡æ•´ä¸ªç½‘ç»œã€‚</p>
<p>æ‹¥å¡æ§åˆ¶ä¸»è¦æ˜¯å››ä¸ªç®—æ³•ï¼š</p>
<ul>
<li><p>æ…¢å¯åŠ¨ï¼šå½“å‘é€æ–¹æ¯æ”¶åˆ°ä¸€ä¸ª ACKï¼Œæ‹¥å¡çª—å£ cwnd çš„å¤§å°å°±ä¼šåŠ  1ã€‚ï¼ˆæ˜¯æŒ‡æ•°æ€§çš„å¢é•¿ï¼‰</p>
</li>
<li><p>æ‹¥å¡é¿å…ï¼šæ‹¥å¡é¿å…ç®—æ³•ï¼šæ¯å½“æ”¶åˆ°ä¸€ä¸ª ACK æ—¶ï¼Œcwnd å¢åŠ  1/cwndï¼ˆçº¿æ€§å¢é•¿ï¼‰</p>
</li>
<li><p>æ‹¥å¡å‘ç”Ÿï¼šï¼ˆä¼šå‘ç”Ÿæ•°æ®åŒ…é‡ä¼ ï¼‰</p>
<blockquote>
<p>è¶…æ—¶é‡ä¼ ï¼šssthresh è®¾ä¸º cwnd/2ï¼›cwnd é‡ç½®ä¸º 1ï¼Œé‡æ–°è¿›å…¥æ…¢å¯åŠ¨</p>
<p>å¿«é€Ÿé‡ä¼ ï¼šcwnd = cwnd/2 ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®ä¸ºåŸæ¥çš„ä¸€åŠ;ssthresh = cwnd ;è¿›å…¥å¿«é€Ÿæ¢å¤ç®—æ³•</p>
</blockquote>
</li>
<li><p>å¿«é€Ÿæ¢å¤</p>
<blockquote>
<p>æ‹¥å¡çª—å£ cwnd = ssthresh + 3 ï¼ˆ 3 çš„æ„æ€æ˜¯ç¡®è®¤æœ‰ 3 ä¸ªæ•°æ®åŒ…è¢«æ”¶åˆ°äº†ï¼‰ï¼›<br>é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼›<br>å¦‚æœå†æ”¶åˆ°é‡å¤çš„ ACKï¼Œé‚£ä¹ˆ cwnd å¢åŠ  1ï¼›<br>å¦‚æœæ”¶åˆ°æ–°æ•°æ®çš„ ACK åï¼ŒæŠŠ cwnd è®¾ç½®ä¸ºç¬¬ä¸€æ­¥ä¸­çš„ ssthresh çš„å€¼ï¼ŒåŸå› æ˜¯è¯¥ ACK ç¡®è®¤äº†æ–°<br>çš„æ•°æ®ï¼Œè¯´æ˜ä» duplicated ACK æ—¶çš„æ•°æ®éƒ½å·²æ”¶åˆ°ï¼Œè¯¥æ¢å¤è¿‡ç¨‹å·²ç»ç»“æŸï¼Œå¯ä»¥å›åˆ°æ¢å¤ä¹‹å‰çš„<br>çŠ¶æ€äº†ï¼Œä¹Ÿå³å†æ¬¡è¿›å…¥æ‹¥å¡é¿å…çŠ¶æ€ï¼›</p>
</blockquote>
</li>
</ul>
<h4 id="TCPåŠè¿æ¥é˜Ÿå’Œå…¨è¿æ¥é˜Ÿ"><a href="#TCPåŠè¿æ¥é˜Ÿå’Œå…¨è¿æ¥é˜Ÿ" class="headerlink" title="TCPåŠè¿æ¥é˜Ÿå’Œå…¨è¿æ¥é˜Ÿ"></a>TCPåŠè¿æ¥é˜Ÿå’Œå…¨è¿æ¥é˜Ÿ</h4><ul>
<li>åŠè¿æ¥é˜Ÿåˆ—ï¼Œä¹Ÿç§° SYN é˜Ÿåˆ—ï¼›</li>
<li>å…¨è¿æ¥é˜Ÿåˆ—ï¼Œä¹Ÿç§° accepet é˜Ÿåˆ—ï¼›</li>
</ul>
<h4 id="TCPåˆ†å‰²æ•°æ®"><a href="#TCPåˆ†å‰²æ•°æ®" class="headerlink" title="TCPåˆ†å‰²æ•°æ®"></a>TCPåˆ†å‰²æ•°æ®</h4><p>MTU ï¼šä¸€ä¸ªç½‘ç»œåŒ…çš„æœ€å¤§é•¿åº¦ï¼Œä»¥å¤ªç½‘ä¸­ä¸€èˆ¬ä¸º 1500 å­—èŠ‚ï¼›<br>MSS ï¼šé™¤å» IP å’Œ TCP å¤´éƒ¨ä¹‹åï¼Œä¸€ä¸ªç½‘ç»œåŒ…æ‰€èƒ½å®¹çº³çš„ TCP æ•°æ®çš„æœ€å¤§é•¿åº¦ï¼›</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647484820.png" alt="1599647484820"></p>
<p>å¦‚æœ HTTP è¯·æ±‚æ¶ˆæ¯æ¯”è¾ƒé•¿ï¼Œè¶…è¿‡äº† MSS çš„é•¿åº¦ï¼Œè¿™æ—¶ TCP å°±éœ€è¦æŠŠ HTTP çš„æ•°æ®æ‹†è§£æˆä¸€å—å—çš„æ•°æ®å‘é€ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰æ•°æ®ã€‚</p>
<p><strong>å¦‚æœä½¿ç”¨IPåˆ†ç‰‡</strong></p>
<p>IP å±‚æœ¬èº«æ²¡æœ‰è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œå®ƒç”±ä¼ è¾“å±‚çš„ TCP æ¥è´Ÿè´£è¶…æ—¶å’Œé‡ä¼ ã€‚å¦‚æœä¸€ä¸ª IP åˆ†ç‰‡ä¸¢å¤±ï¼Œæ•´ä¸ª IP æŠ¥æ–‡çš„æ‰€æœ‰åˆ†ç‰‡éƒ½å¾—é‡ä¼ ã€‚</p>
<p>å½“æ¥æ”¶æ–¹å‘ç° TCP æŠ¥æ–‡ï¼ˆå¤´éƒ¨ + æ•°æ®ï¼‰çš„æŸä¸€ç‰‡ä¸¢å¤±åï¼Œåˆ™ä¸ä¼šå“åº” ACK ç»™å¯¹æ–¹ï¼Œé‚£ä¹ˆå‘é€æ–¹çš„TCP åœ¨è¶…æ—¶åï¼Œå°±ä¼šé‡å‘ã€Œæ•´ä¸ª TCP æŠ¥æ–‡ï¼ˆå¤´éƒ¨ + æ•°æ®ï¼‰ã€ã€‚</p>
<h4 id="TCPæŠ¥æ–‡ç”Ÿæˆ"><a href="#TCPæŠ¥æ–‡ç”Ÿæˆ" class="headerlink" title="TCPæŠ¥æ–‡ç”Ÿæˆ"></a>TCPæŠ¥æ–‡ç”Ÿæˆ</h4><p>TCP åè®®é‡Œé¢ä¼šæœ‰ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼ˆé€šå¸¸æ˜¯éšæœºç”Ÿæˆçš„ï¼‰ï¼Œä¸€ä¸ªæ˜¯ Web æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ï¼ˆHTTP é»˜è®¤ç«¯å£å·æ˜¯ 80 ï¼Œ HTTPS é»˜è®¤ç«¯å£å·æ˜¯ 443 ï¼‰ã€‚</p>
<p>ç½‘ç»œåŒ…ï¼š</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647574610.png" alt="1599647574610"></p>
<h4 id="SYN-æ”»å‡»"><a href="#SYN-æ”»å‡»" class="headerlink" title="SYN æ”»å‡»"></a>SYN æ”»å‡»</h4><p>å‡è®¾æ”»å‡»è€…çŸ­æ—¶é—´ä¼ªé€ ä¸åŒ IP åœ°å€çš„ SYN æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ¯æ¥æ”¶åˆ°ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œå°±è¿›å…¥SYN_RCVD çŠ¶æ€ï¼Œä½†æœåŠ¡ç«¯å‘é€å‡ºå»çš„ ACK + SYN æŠ¥æ–‡ï¼Œæ— æ³•å¾—åˆ°æœªçŸ¥ IP ä¸»æœºçš„ ACK åº”ç­”ï¼Œä¹…è€Œä¹…ä¹‹å°±ä¼šå æ»¡æœåŠ¡ç«¯çš„ SYN æ¥æ”¶é˜Ÿåˆ—ï¼ˆæœªè¿æ¥é˜Ÿåˆ—ï¼‰ï¼Œä½¿å¾—æœåŠ¡å™¨ä¸èƒ½ä¸ºæ­£å¸¸ç”¨æˆ·æœåŠ¡ã€‚</p>
<p><strong>è§£å†³åŠæ³•</strong></p>
<ol>
<li><p>é€šè¿‡ä¿®æ”¹ Linux å†…æ ¸å‚æ•°ï¼Œæ§åˆ¶é˜Ÿåˆ—å¤§å°å’Œå½“é˜Ÿåˆ—æ»¡æ—¶åº”åšä»€ä¹ˆå¤„ç†ã€‚</p>
<blockquote>
<p>å½“ç½‘å¡æ¥æ”¶æ•°æ®åŒ…çš„é€Ÿåº¦å¤§äºå†…æ ¸å¤„ç†çš„é€Ÿåº¦æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜è¿™äº›æ•°æ®åŒ…ã€‚</p>
<p>SYN_RCVD çŠ¶æ€è¿æ¥çš„æœ€å¤§ä¸ªæ•°ï¼š</p>
<p>è¶…å‡ºå¤„ç†èƒ½æ—¶ï¼Œå¯¹æ–°çš„ SYN ç›´æ¥å›æŠ¥ RSTï¼Œä¸¢å¼ƒè¿æ¥ï¼š</p>
</blockquote>
</li>
</ol>
<h3 id="IP-æŠ¥æ–‡å¤´éƒ¨"><a href="#IP-æŠ¥æ–‡å¤´éƒ¨" class="headerlink" title="IP æŠ¥æ–‡å¤´éƒ¨"></a>IP æŠ¥æ–‡å¤´éƒ¨</h3><p>TCP æ¨¡å—åœ¨æ‰§è¡Œè¿æ¥ã€æ”¶å‘ã€æ–­å¼€ç­‰å„é˜¶æ®µæ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å§”æ‰˜ IP æ¨¡å—å°†æ•°æ®å°è£…æˆç½‘ç»œåŒ…å‘é€ç»™é€šä¿¡å¯¹è±¡ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599647663399.png" alt="1599647663399"></p>
<p>HTTP æ˜¯ç»è¿‡ TCP ä¼ è¾“çš„ï¼Œæ‰€ä»¥åœ¨ IP åŒ…å¤´çš„åè®®å·ï¼Œè¦å¡«å†™ä¸º 06 ï¼ˆåå…­è¿›åˆ¶ï¼‰ï¼Œè¡¨ç¤ºåè®®ä¸ºTCPã€‚</p>
<p>å½“å­˜åœ¨å¤šä¸ªç½‘å¡æ—¶ï¼Œåœ¨å¡«å†™æºåœ°å€ IP æ—¶ï¼Œå°±éœ€è¦åˆ¤æ–­åˆ°åº•åº”è¯¥å¡«å†™å“ªä¸ªåœ°å€ã€‚</p>
<p>ç›®æ ‡åœ°å€å’Œå­ç½‘æ©ç éƒ½æ˜¯ 0.0.0.0 ï¼Œè¿™è¡¨ç¤ºé»˜è®¤ç½‘å…³ï¼Œå¦‚æœå…¶ä»–æ‰€æœ‰æ¡ç›®éƒ½æ— æ³•åŒ¹é…ï¼Œå°±ä¼šè‡ªåŠ¨åŒ¹é…è¿™ä¸€è¡Œã€‚å¹¶ä¸”åç»­å°±æŠŠåŒ…å‘ç»™è·¯ç”±å™¨ï¼Œ Gateway å³æ˜¯è·¯ç”±å™¨çš„ IP åœ°å€ã€‚</p>
<h3 id="MACå¤´éƒ¨"><a href="#MACå¤´éƒ¨" class="headerlink" title="MACå¤´éƒ¨"></a>MACå¤´éƒ¨</h3><p>åœ¨ MAC åŒ…å¤´é‡Œéœ€è¦å‘é€æ–¹ MAC åœ°å€å’Œæ¥æ”¶æ–¹ç›®æ ‡ MAC åœ°å€ï¼Œç”¨äºä¸¤ç‚¹ä¹‹é—´çš„ä¼ è¾“ã€‚<br>ä¸€èˆ¬åœ¨ TCP/IP é€šä¿¡é‡Œï¼ŒMAC åŒ…å¤´çš„åè®®ç±»å‹åªä½¿ç”¨ï¼š</p>
<ul>
<li>0800 ï¼š IP åè®®</li>
<li>0806 ï¼š ARP åè®®</li>
</ul>
<p>MAC åœ°å€æ˜¯åœ¨ç½‘å¡ç”Ÿäº§æ—¶å†™å…¥åˆ° ROM é‡Œçš„ï¼Œåªè¦å°†è¿™ä¸ªå€¼è¯»å–å‡ºæ¥å†™å…¥åˆ° MAC å¤´éƒ¨å°±å¯ä»¥äº†ã€‚</p>
<h3 id="ç½‘å¡"><a href="#ç½‘å¡" class="headerlink" title="ç½‘å¡"></a>ç½‘å¡</h3><p>IP ç”Ÿæˆçš„ç½‘ç»œåŒ…åªæ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—ä¿¡æ¯ï¼Œæ²¡æœ‰åŠæ³•ç›´æ¥å‘é€ç»™å¯¹æ–¹ã€‚å› æ­¤ï¼Œéœ€è¦<strong>å°†æ•°å­—ä¿¡æ¯è½¬æ¢ä¸ºç”µä¿¡å·</strong>ï¼Œæ‰èƒ½åœ¨ç½‘çº¿ä¸Šä¼ è¾“ï¼Œè´Ÿè´£æ‰§è¡Œè¿™ä¸€æ“ä½œçš„æ˜¯<strong>ç½‘å¡ï¼Œè¦æ§åˆ¶ç½‘å¡è¿˜éœ€è¦é ç½‘å¡é©±åŠ¨ç¨‹åºã€‚</strong></p>
<p>ç½‘å¡é©±åŠ¨ä» IP æ¨¡å—è·å–åˆ°åŒ…ä¹‹åï¼Œä¼šå°†å…¶å¤åˆ¶åˆ°ç½‘å¡å†…çš„ç¼“å­˜åŒºä¸­ï¼Œæ¥ç€ä¼šåœ¨å…¶å¼€å¤´åŠ ä¸Š<strong>æŠ¥å¤´å’Œèµ·å§‹å¸§åˆ†ç•Œç¬¦</strong>ï¼Œåœ¨æœ«å°¾åŠ ä¸Š<strong>ç”¨äºæ£€æµ‹é”™è¯¯çš„å¸§æ ¡éªŒåºåˆ—</strong>ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599648804365.png" alt="1599648804365"></p>
<p>ç½‘å¡ä¼šå°†åŒ…è½¬ä¸ºç”µä¿¡å·ï¼Œé€šè¿‡ç½‘çº¿å‘é€å‡ºå»</p>
<h3 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h3><p>äº¤æ¢æœºçš„è®¾è®¡æ˜¯å°†ç½‘ç»œåŒ…åŸæ ·è½¬å‘åˆ°ç›®çš„åœ°ã€‚äº¤æ¢æœºå·¥ä½œåœ¨MAC å±‚ï¼Œä¹Ÿç§°ä¸ºäºŒå±‚ç½‘ç»œè®¾å¤‡ã€‚</p>
<p>äº¤æ¢æœºçš„ç«¯å£ä¸å…·æœ‰ MAC åœ°å€ï¼Œç›´æ¥æ¥æ”¶æ‰€æœ‰çš„åŒ…å¹¶å­˜æ”¾åˆ°ç¼“å†²åŒºä¸­ï¼Œæ¥ä¸‹æ¥éœ€è¦æŸ¥è¯¢ä¸€ä¸‹è¿™ä¸ªåŒ…çš„æ¥æ”¶æ–¹ MAC åœ°å€æ˜¯å¦å·²ç»åœ¨ MAC åœ°å€è¡¨ä¸­æœ‰è®°å½•ã€‚æ ¹æ® MAC åœ°å€è¡¨æŸ¥æ‰¾ MAC åœ°å€ï¼Œç„¶åå°†ä¿¡å·å‘é€åˆ°ç›¸åº”çš„ç«¯å£ã€‚</p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599648944157.png" alt="1599648944157"></p>
<h3 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h3><p>ç½‘ç»œåŒ…ç»è¿‡äº¤æ¢æœºä¹‹åï¼Œç°åœ¨åˆ°è¾¾äº†è·¯ç”±å™¨ï¼Œå¹¶åœ¨æ­¤è¢«è½¬å‘åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±å™¨æˆ–ç›®æ ‡è®¾å¤‡ã€‚</p>
<ul>
<li>å› ä¸ºè·¯ç”±å™¨æ˜¯åŸºäº IP è®¾è®¡çš„ï¼Œä¿—ç§°ä¸‰å±‚ç½‘ç»œè®¾å¤‡ï¼Œè·¯ç”±å™¨çš„å„ä¸ªç«¯å£éƒ½å…·æœ‰ MAC åœ°å€å’Œ IP åœ°å€ï¼›</li>
<li>è€Œäº¤æ¢æœºæ˜¯åŸºäºä»¥å¤ªç½‘è®¾è®¡çš„ï¼Œä¿—ç§°äºŒå±‚ç½‘ç»œè®¾å¤‡ï¼Œäº¤æ¢æœºçš„ç«¯å£ä¸å…·æœ‰ MAC åœ°å€ã€‚</li>
</ul>
<p>å®ŒæˆåŒ…æ¥æ”¶æ“ä½œä¹‹åï¼Œè·¯ç”±å™¨å°±ä¼šå»æ‰åŒ…å¼€å¤´çš„ MAC å¤´éƒ¨ã€‚<br>MAC å¤´éƒ¨çš„ä½œç”¨å°±æ˜¯å°†åŒ…é€è¾¾è·¯ç”±å™¨ï¼Œå…¶ä¸­çš„æ¥æ”¶æ–¹ MAC åœ°å€å°±æ˜¯è·¯ç”±å™¨ç«¯å£çš„ MAC åœ°å€ã€‚å› æ­¤ï¼Œå½“åŒ…åˆ°è¾¾è·¯ç”±å™¨ä¹‹åï¼ŒMAC å¤´éƒ¨çš„ä»»åŠ¡å°±å®Œæˆäº†ï¼Œäºæ˜¯ MAC å¤´éƒ¨å°±ä¼šè¢«ä¸¢å¼ƒã€‚</p>
<p><strong>æŸ¥è¯¢è·¯ç”±è¡¨åˆ¤æ–­è½¬å‘ç›®æ ‡</strong></p>
<p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599649188561.png" alt="1599649188561"></p>
<h3 id="æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯"><a href="#æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯" class="headerlink" title="æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯"></a>æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯</h3><p><img src="/2020/09/09/%E7%BD%91%E7%BB%9C%E5%B8%B8%E8%A7%81%E7%9F%A5%E8%AF%86/1599649299268.png" alt="1599649299268"></p>
<h3 id="è·¯ç”±å™¨å’Œäº¤æ¢æœº"><a href="#è·¯ç”±å™¨å’Œäº¤æ¢æœº" class="headerlink" title="è·¯ç”±å™¨å’Œäº¤æ¢æœº"></a>è·¯ç”±å™¨å’Œäº¤æ¢æœº</h3><p>ç°åœ¨å®¶é‡Œçš„è·¯ç”±å™¨å…¶å®æœ‰äº†äº¤æ¢æœºçš„åŠŸèƒ½äº†ã€‚äº¤æ¢æœºå¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªè®¾å¤‡ï¼Œä¸‰å°ç”µè„‘ç½‘çº¿æ¥åˆ°è¿™ä¸ªè®¾å¤‡ï¼Œè¿™ä¸‰å°ç”µè„‘å°±å¯ä»¥äº’ç›¸é€šä¿¡äº†ï¼Œäº¤æ¢æœºå˜›ï¼Œäº¤æ¢æ•°æ®è¿™ä¹ˆç†è§£å°±å¯ä»¥ã€‚</p>
<h2 id="TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹</h2>]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>tcp</tag>
        <tag>IP</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-å¦‚ä½•æ”¯æŒæ•°å­¦å…¬å¼</title>
    <url>/2020/09/04/hexo-%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ hands on sklearnè¿™æœ¬ä¹¦ï¼Œç”¨Typoraåšç¬”è®°æ—¶æœ‰å¤§é‡å…¬å¼ï¼Œä»Šå¤©å‘ç°hexoé»˜è®¤ä¸æ”¯æŒæ•°å­¦å…¬å¼ã€‚</p>
<h2 id="å‰å› "><a href="#å‰å› " class="headerlink" title="å‰å› "></a>å‰å› </h2><p>Hexoé»˜è®¤ä½¿ç”¨<code>hexo-renderer-marked</code>å¼•æ“æ¸²æŸ“ç½‘é¡µï¼Œè¯¥å¼•æ“ä¼šæŠŠä¸€äº›ç‰¹æ®Šçš„markdownç¬¦å·è½¬æ¢ä¸ºç›¸åº”çš„htmlæ ‡ç­¾ï¼Œæ¯”å¦‚ä¸‹åˆ’çº¿â€™_â€™ä¼šè¢«æ¸²æŸ“å¼•æ“å¤„ç†ä¸º<code>&lt;em&gt;</code>æ ‡ç­¾,è¿™æ ·MathJaxå¼•æ“å°±è®¤ä¸ºè¯¥å…¬å¼æœ‰è¯­æ³•é”™è¯¯ï¼Œå› æ­¤ä¸ä¼šæ¸²æŸ“ã€‚</p>
<a id="more"></a>
<p>ç±»ä¼¼çš„è¯­ä¹‰å†²çªçš„ç¬¦å·è¿˜åŒ…æ‹¬â€™*â€™, â€˜{â€˜, â€˜}â€™, â€˜\â€™ç­‰ã€‚</p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><h3 id="ä½¿ç”¨hexo-renderer-kramedå¼•æ“æ¸²æŸ“"><a href="#ä½¿ç”¨hexo-renderer-kramedå¼•æ“æ¸²æŸ“" class="headerlink" title="ä½¿ç”¨hexo-renderer-kramedå¼•æ“æ¸²æŸ“"></a>ä½¿ç”¨<code>hexo-renderer-kramed</code>å¼•æ“æ¸²æŸ“</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure>
<p>ä½†<code>hexo-renderer-kramed</code>å¼•æ“ä¹Ÿæœ‰è¯­ä¹‰å†²çªï¼ˆè¡Œå†…å…¬å¼ï¼Œ{é—®é¢˜ï¼‰ï¼š</p>
<p>æ¥ä¸‹æ¥åˆ°åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°<code>node_modules\kramed\lib\rules\inline.js</code>ï¼Œä¿®æ”¹å¦‚ä¸‹ä¸¤å¤„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//  escape: /^\\([\\`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,</span><br><span class="line">  escape: /^\\([`*\[\]()#$+\-.!_&gt;])/</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//  em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span><br><span class="line">  em: /^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­å¼€å¯mathjaxå¼€å…³"><a href="#åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­å¼€å¯mathjaxå¼€å…³" class="headerlink" title="åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­å¼€å¯mathjaxå¼€å…³"></a>åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­å¼€å¯mathjaxå¼€å…³</h3><p>è¿›å…¥ä¸»é¢˜ç›®å½•ï¼Œæ‰“å¼€<code>_config.yml</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Math Formulas Render Support</span></span><br><span class="line">math:</span><br><span class="line">  per_page: true</span><br><span class="line">  engine: mathjax   </span><br><span class="line">  mathjax:</span><br><span class="line">    enable: true    </span><br><span class="line">    mhchem: true</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨Front-matterä¸­æ‰“å¼€mathjaxå¼€å…³"><a href="#åœ¨Front-matterä¸­æ‰“å¼€mathjaxå¼€å…³" class="headerlink" title="åœ¨Front-matterä¸­æ‰“å¼€mathjaxå¼€å…³"></a>åœ¨Front-matterä¸­æ‰“å¼€mathjaxå¼€å…³</h3><p>å› ä¸ºä¹‹å‰é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†<code>per_page: true</code>ï¼Œæ„å‘³ç€ï¼š</p>
<blockquote>
<p>Default (true) will load mathjax / katex script on demand.</p>
<p>That is it only render those page which has <code>mathjax: true</code> in Front-matter.</p>
<p>If you set it to false, it will load mathjax / katex srcipt EVERY PAGE.</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: </span><br><span class="line">date: </span><br><span class="line">tags:</span><br><span class="line">category: </span><br><span class="line">mathjax: true</span><br><span class="line">--</span><br></pre></td></tr></table></figure>
<p>ä½†æˆ‘æŠŠ<code>per_page: false</code>ï¼Œå°è¯•ä¸åœ¨front-matterä¸­åŠ ä¸Š <code>mathjax: true</code> ï¼Œæ²¡æœ‰æ•ˆæœã€‚</p>
<hr>
<p>å‚è€ƒï¼š</p>
<p><a href="https://blog.csdn.net/ssjdoudou/article/details/103318019" target="_blank" rel="noopener">https://blog.csdn.net/ssjdoudou/article/details/103318019</a></p>
<p><a href="https://www.jianshu.com/p/7ab21c7f0674" target="_blank" rel="noopener">https://www.jianshu.com/p/7ab21c7f0674</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-nextä¸»é¢˜è®¾ç½®</title>
    <url>/2020/09/04/hexo-next%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="NexTä¸»é¢˜å¼€å¯æ–‡ç« ç›®å½•"><a href="#NexTä¸»é¢˜å¼€å¯æ–‡ç« ç›®å½•" class="headerlink" title="NexTä¸»é¢˜å¼€å¯æ–‡ç« ç›®å½•"></a>NexTä¸»é¢˜å¼€å¯æ–‡ç« ç›®å½•</h2><p>å‚è€ƒè¿™ç¯‡<a href="https://blog.csdn.net/wugenqiang/article/details/88609066" target="_blank" rel="noopener">åšå®¢</a></p>
<h3 id="ä¿®æ”¹æ ·å¼æ–‡ä»¶"><a href="#ä¿®æ”¹æ ·å¼æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ ·å¼æ–‡ä»¶"></a>ä¿®æ”¹æ ·å¼æ–‡ä»¶</h3><a id="more"></a>
<p>åœ¨<code>custom.styl</code>æ–‡ä»¶ï¼ˆä½äº<code>themes/next/source/css/_customä¸‹</code>ï¼‰åæ·»åŠ </p>
<p>æ–‡ç« ç›®å½•å±•å¼€</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//æ–‡ç« ç›®å½•é»˜è®¤å±•å¼€</span><br><span class="line">.post-toc .nav .nav-child &#123; display: block; &#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠç›®å½•å­—ä½“å¤§å°è°ƒæ•´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">.post-toc ol &#123;  </span><br><span class="line">  font-size : <span class="number">13</span>px;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>æ‰“å¼€ä¸»é¢˜çš„é…ç½®æ–‡ä»¶<code>_config.yml</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  number: false</span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  wrap: false</span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  expand_all: false</span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc.</span></span><br><span class="line">  max_depth: <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>PS: æˆ‘çš„ä¸»é¢˜ç›®å½•ä¸‹æ²¡æœ‰Â·custom.stylÂ·è¿™ä¸ªæ–‡ä»¶ï¼ˆ<code>themes/next/source/css/_custom</code>ï¼‰ï¼Œä½†æœ€ç»ˆä¹Ÿèƒ½ç”Ÿæˆç›®å½•ORZã€‚</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“çŸ¥è¯†ç‚¹å¤§æ€»ç»“</title>
    <url>/2020/09/07/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E5%A4%A7%E7%9B%98%E7%82%B9/</url>
    <content><![CDATA[<p>è½¬è½½æ¥æºï¼š<a href="https://blog.csdn.net/wugenqiang/article/details/106501338" target="_blank" rel="noopener">æ•°æ®åº“é¢è¯•é¢˜</a></p>
<h2 id="æ•°æ®åº“åŸºæœ¬çŸ¥è¯†"><a href="#æ•°æ®åº“åŸºæœ¬çŸ¥è¯†" class="headerlink" title="æ•°æ®åº“åŸºæœ¬çŸ¥è¯†"></a>æ•°æ®åº“åŸºæœ¬çŸ¥è¯†</h2><h3 id="èŒƒå¼çš„å®šä¹‰"><a href="#èŒƒå¼çš„å®šä¹‰" class="headerlink" title="èŒƒå¼çš„å®šä¹‰"></a>èŒƒå¼çš„å®šä¹‰</h3><p>æ”¹é€ å…³ç³»æ¨¡å¼ï¼Œé€šè¿‡åˆ†è§£å…³ç³»æ¨¡å‹æ¥æ¶ˆé™¤å…¶ä¸­ä¸åˆé€‚çš„æ•°æ®ä¾èµ–ï¼Œä»¥å†³ç»æ’å…¥å¼‚å¸¸ï¼Œåˆ é™¤å¼‚å¸¸ï¼Œæ•°æ®ç”¨ä½™ã€‚</p>
<a id="more"></a>
<h3 id="æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆ"><a href="#æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆ"></a>æ•°æ®åº“ä¸‰å¤§èŒƒå¼æ˜¯ä»€ä¹ˆ</h3><p>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼šå…³ç³»æ¨¡å¼ R ä¸­æ¯ä¸ªåˆ—éƒ½ä¸å¯ä»¥å†æ‹†åˆ†ã€‚</p>
<p>ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ï¼šåœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œè€Œä¸èƒ½æ˜¯ä¾èµ–äºä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ç¬¬ä¸‰èŒƒå¼ï¼šåœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œéä¸»é”®åˆ—åªä¾èµ–äºä¸»é”®ï¼Œä¸ä¾èµ–äºå…¶ä»–éä¸»é”®ã€‚</p>
<p>åœ¨è®¾è®¡æ•°æ®åº“ç»“æ„çš„æ—¶å€™ï¼Œè¦å°½é‡éµå®ˆä¸‰èŒƒå¼ï¼Œå¦‚æœä¸éµå®ˆï¼Œå¿…é¡»æœ‰è¶³å¤Ÿçš„ç†ç”±ã€‚æ¯”å¦‚æ€§èƒ½ã€‚</p>
<h3 id="mysqlæœ‰å…³æƒé™çš„è¡¨"><a href="#mysqlæœ‰å…³æƒé™çš„è¡¨" class="headerlink" title="mysqlæœ‰å…³æƒé™çš„è¡¨"></a>mysqlæœ‰å…³æƒé™çš„è¡¨</h3><p>MySQLæœåŠ¡å™¨é€šè¿‡æƒé™è¡¨æ¥æ§åˆ¶ç”¨æˆ·å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œæƒé™è¡¨å­˜æ”¾åœ¨mysqlæ•°æ®åº“é‡Œï¼Œç”±mysql_install_dbè„šæœ¬åˆå§‹åŒ–ã€‚è¿™äº›æƒé™è¡¨åˆ†åˆ«userï¼Œdbï¼Œtable_privï¼Œcolumns_privå’Œhostã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸€ä¸‹è¿™äº›è¡¨çš„ç»“æ„å’Œå†…å®¹ï¼š</p>
<ul>
<li>useræƒé™è¡¨ï¼šè®°å½•å…è®¸è¿æ¥åˆ°æœåŠ¡å™¨çš„ç”¨æˆ·å¸å·ä¿¡æ¯ï¼Œé‡Œé¢çš„æƒé™æ˜¯å…¨å±€çº§çš„ã€‚</li>
<li>dbæƒé™è¡¨ï¼šè®°å½•å„ä¸ªå¸å·åœ¨å„ä¸ªæ•°æ®åº“ä¸Šçš„æ“ä½œæƒé™ã€‚</li>
<li>table_privæƒé™è¡¨ï¼šè®°å½•æ•°æ®è¡¨çº§çš„æ“ä½œæƒé™ã€‚</li>
<li>columns_privæƒé™è¡¨ï¼šè®°å½•æ•°æ®åˆ—çº§çš„æ“ä½œæƒé™ã€‚</li>
<li>hostæƒé™è¡¨ï¼šé…åˆdbæƒé™è¡¨å¯¹ç»™å®šä¸»æœºä¸Šæ•°æ®åº“çº§æ“ä½œæƒé™ä½œæ›´ç»†è‡´çš„æ§åˆ¶ã€‚è¿™ä¸ªæƒé™è¡¨ä¸å—GRANTå’ŒREVOKEè¯­å¥çš„å½±å“ã€‚</li>
</ul>
<h3 id="MySQLçš„binlogçš„3ç§å½•å…¥æ ¼å¼"><a href="#MySQLçš„binlogçš„3ç§å½•å…¥æ ¼å¼" class="headerlink" title="MySQLçš„binlogçš„3ç§å½•å…¥æ ¼å¼"></a>MySQLçš„binlogçš„3ç§å½•å…¥æ ¼å¼</h3><p>æœ‰ä¸‰ç§æ ¼å¼ï¼Œstatementï¼Œrowå’Œmixedã€‚</p>
<ul>
<li>statementæ¨¡å¼ä¸‹ï¼Œæ¯ä¸€æ¡ä¼šä¿®æ”¹æ•°æ®çš„sqléƒ½ä¼šè®°å½•åœ¨binlogä¸­ã€‚ä¸éœ€è¦è®°å½•æ¯ä¸€è¡Œçš„å˜åŒ–ï¼Œå‡å°‘äº†binlogæ—¥å¿—é‡ï¼ŒèŠ‚çº¦äº†IOï¼Œæé«˜æ€§èƒ½ã€‚ç”±äºsqlçš„æ‰§è¡Œæ˜¯æœ‰ä¸Šä¸‹æ–‡çš„ï¼Œå› æ­¤åœ¨ä¿å­˜çš„æ—¶å€™éœ€è¦ä¿å­˜ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€äº›ä½¿ç”¨äº†å‡½æ•°ä¹‹ç±»çš„è¯­å¥æ— æ³•è¢«è®°å½•å¤åˆ¶ã€‚</li>
<li>rowçº§åˆ«ä¸‹ï¼Œä¸è®°å½•sqlè¯­å¥ä¸Šä¸‹æ–‡ç›¸å…³ä¿¡æ¯ï¼Œä»…ä¿å­˜å“ªæ¡è®°å½•è¢«ä¿®æ”¹ã€‚è®°å½•å•å…ƒä¸ºæ¯ä¸€è¡Œçš„æ”¹åŠ¨ï¼ŒåŸºæœ¬æ˜¯å¯ä»¥å…¨éƒ¨è®°ä¸‹æ¥ä½†æ˜¯ç”±äºå¾ˆå¤šæ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡è¡Œçš„æ”¹åŠ¨(æ¯”å¦‚alter table)ï¼Œå› æ­¤è¿™ç§æ¨¡å¼çš„æ–‡ä»¶ä¿å­˜çš„ä¿¡æ¯å¤ªå¤šï¼Œæ—¥å¿—é‡å¤ªå¤§ã€‚</li>
<li>mixedï¼Œä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œæ™®é€šæ“ä½œä½¿ç”¨statementè®°å½•ï¼Œå½“æ— æ³•ä½¿ç”¨statementçš„æ—¶å€™ä½¿ç”¨rowã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œæ–°ç‰ˆçš„MySQLä¸­å¯¹rowçº§åˆ«ä¹Ÿåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œå½“è¡¨ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè®°å½•è¯­å¥è€Œä¸æ˜¯é€è¡Œè®°å½•ã€‚</p>
<h3 id="â­ä»€ä¹ˆæ˜¯æ•°æ®å­—å…¸"><a href="#â­ä»€ä¹ˆæ˜¯æ•°æ®å­—å…¸" class="headerlink" title="â­ä»€ä¹ˆæ˜¯æ•°æ®å­—å…¸"></a>â­ä»€ä¹ˆæ˜¯æ•°æ®å­—å…¸</h3><p>æ•°æ®å­—å…¸æ˜¯å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå†…éƒ¨çš„ä¸€ç»„ç³»ç»Ÿè¡¨ï¼Œå®ƒ<strong>è®°å½•äº†æ•°æ®åº“ä¸­æ‰€æœ‰çš„å®šä¹‰ä¿¡æ¯</strong>ï¼ŒåŒ…æ‹¬å…³ç³»æ¨¡å¼å®šä¹‰ã€è§†å›¾å®šä¹‰ã€ç´¢å¼•å®šä¹‰ã€å®Œæ•´æ€§çº¦æŸå®šä¹‰ã€å„ç±»ç”¨æˆ·å¯¹æ•°æ®åº“çš„æ“ä½œæƒé™ã€ç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚<strong>å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿåœ¨æ‰§è¡Œ SQL çš„æ•°æ®å®šä¹‰è¯­å¥æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨æ›´æ–°æ•°æ®å­—å…¸ä¸­çš„ç›¸åº”ä¿¡æ¯</strong></p>
<h2 id="å…³ç³»æ•°æ®åº“"><a href="#å…³ç³»æ•°æ®åº“" class="headerlink" title="å…³ç³»æ•°æ®åº“"></a>å…³ç³»æ•°æ®åº“</h2><h3 id="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“æ¯”è¾ƒ"><a href="#å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“æ¯”è¾ƒ" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“æ¯”è¾ƒ"></a>å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“æ¯”è¾ƒ</h3><h4 id="å…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“:"></a>å…³ç³»å‹æ•°æ®åº“:</h4><ul>
<li>é‡‡ç”¨äº†å…³ç³»æ¨¡å‹æ¥ç»„ç»‡æ•°æ®çš„æ•°æ®åº“ï¼Œä»¥è¡Œå’Œåˆ—å½¢å¼å­˜å‚¨æ•°æ®ï¼Œä»¥ä¾¿äºç”¨æˆ·ç†è§£ã€‚</li>
<li>é€šç”¨çš„ SQL è¯­è¨€ä½¿å¾—æ“ä½œå…³ç³»å‹æ•°æ®åº“éå¸¸æ–¹ä¾¿ã€‚</li>
<li>å…³ç³»å‹æ•°æ®åº“éµå¾ª ACID åŸåˆ™ã€‚</li>
<li>å¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æ¯”å¦‚ MySQLï¼ŒOracle</li>
</ul>
<p><strong>å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ç½‘ç«™çš„ç”¨æˆ·å¹¶å‘æ€§éå¸¸é«˜ï¼Œå¾€å¾€è¾¾åˆ°æ¯ç§’ä¸Šä¸‡æ¬¡è¯»å†™è¯·æ±‚ï¼Œå¯¹äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“æ¥è¯´ï¼Œç¡¬ç›˜ I/O æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç“¶é¢ˆ</li>
<li>ç½‘ç«™æ¯å¤©äº§ç”Ÿçš„æ•°æ®é‡æ˜¯å·¨å¤§çš„ï¼Œå¯¹äºå…³ç³»å‹æ•°æ®åº“æ¥è¯´ï¼Œåœ¨ä¸€å¼ åŒ…å«æµ·é‡æ•°æ®çš„è¡¨ä¸­æŸ¥è¯¢ï¼Œæ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚å› æ­¤ï¼Œå…³ç³»å‹æ•°æ®ä¸é€‚åˆæŒä¹…å­˜å‚¨æµ·é‡æ•°æ®</li>
<li>å¾ˆéš¾è¿›è¡Œæ¨ªå‘æ‰©å±•ï¼ˆå¢åŠ æœåŠ¡å™¨ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æƒ³è¦æé«˜æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œè¦ä½¿ç”¨æ€§èƒ½æ›´å¥½çš„è®¡ç®—æœºï¼ˆçºµå‘æ‰©å±•ï¼‰</li>
<li>æ€§èƒ½æ¬ ä½³ï¼šå¯¼è‡´å…³ç³»å‹æ•°æ®åº“æ€§èƒ½æ¬ ä½³çš„æœ€ä¸»è¦åŸå› å°±æ˜¯å¤šè¡¨çš„å…³è”æŸ¥è¯¢ï¼Œä¸ºäº†ä¿è¯æ•°æ®åº“çš„ACIDç‰¹æ€§ï¼Œå¿…é¡»å°½é‡æŒ‰ç…§èŒƒå¼è¦æ±‚è®¾è®¡æ•°æ®åº“ï¼Œå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨å­˜å‚¨çš„å¾€å¾€æ˜¯ä¸€ä¸ªå›ºå®šçš„ã€æ ¼å¼åŒ–çš„æ•°æ®ç»“æ„</li>
</ul>
<p>è€Œéå…³ç³»å‹æ•°æ®åº“å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³å…³ç³»å‹æ•°æ®åº“å¾ˆéš¾è§£å†³çš„å¤§æ•°æ®é—®é¢˜</p>
<h4 id="éå…³ç³»å‹æ•°æ®åº“-NoSQL"><a href="#éå…³ç³»å‹æ•°æ®åº“-NoSQL" class="headerlink" title="éå…³ç³»å‹æ•°æ®åº“ NoSQL"></a>éå…³ç³»å‹æ•°æ®åº“ NoSQL</h4><ul>
<li>éå…³ç³»å‹æ•°æ®åº“ä»¥é”®å€¼å¯¹å­˜å‚¨ï¼Œä¸”ç»“æ„ä¸å›ºå®šï¼Œæ¯ä¸€ä¸ªå…ƒç»„å¯ä»¥æœ‰ä¸ä¸€æ ·çš„å­—æ®µï¼Œæ¯ä¸ªå…ƒç»„å¯ä»¥æ ¹æ®éœ€è¦å¢åŠ ä¸€äº›è‡ªå·±çš„é”®å€¼å¯¹ï¼Œä¸å±€é™äºå›ºå®šçš„ç»“æ„ï¼Œå¯ä»¥å‡å°‘ä¸€äº›æ—¶é—´å’Œç©ºé—´çš„å¼€é”€ã€‚</li>
<li>æ”¯æŒåˆ†å¸ƒå¼å­˜å‚¨ï¼Œå®¹æ˜“è¿›è¡Œæ¨ªå‘æ‰©å±•</li>
<li>ä¸éµå¾ª ACID ç‰¹æ€§ï¼ˆä¸æä¾›å¯¹äº‹åŠ¡çš„å¤„ç†ï¼‰</li>
<li>å¸¸è§çš„éå…³ç³»å‹æ•°æ®åº“æ¯”å¦‚ Redisã€MongoDBã€Elasticsearch</li>
</ul>
<h3 id="æ•°æ®åº“è¿æ¥æ± "><a href="#æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="æ•°æ®åº“è¿æ¥æ± "></a>æ•°æ®åº“è¿æ¥æ± </h3><h4 id="â‘ -æ¦‚è¿°"><a href="#â‘ -æ¦‚è¿°" class="headerlink" title="â‘  æ¦‚è¿°"></a>â‘  æ¦‚è¿°</h4><p>æ•°æ®åº“è¿æ¥æ± æ˜¯è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒ<strong>å…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥</strong>ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è®¿é—®æ•°æ®åº“çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°å»ºç«‹ä¸€æ¬¡è¿æ¥ã€‚</p>
<h4 id="â‘¡-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿æ¥æ± "><a href="#â‘¡-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿æ¥æ± " class="headerlink" title="â‘¡ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿æ¥æ± "></a>â‘¡ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿æ¥æ± </h4><p><strong> æ•°æ®åº“è¿æ¥æ˜¯ä¸€ç§å…³é”®çš„æœ‰é™çš„æ˜‚è´µçš„èµ„æº</strong> ï¼Œè¿™ä¸€ç‚¹åœ¨å¤šç”¨æˆ·çš„ç½‘é¡µåº”ç”¨ç¨‹åºä¸­ä½“ç°å¾—å°¤ä¸ºçªå‡ºã€‚ ä¸€ä¸ªæ•°æ®åº“è¿æ¥å¯¹è±¡å‡å¯¹åº”ä¸€ä¸ªç‰©ç†æ•°æ®åº“è¿æ¥ï¼Œæ¯æ¬¡æ“ä½œéƒ½æ‰“å¼€ä¸€ä¸ªç‰©ç†è¿æ¥ï¼Œä½¿ç”¨å®Œéƒ½å…³é—­è¿æ¥ï¼Œè¿™æ ·é€ æˆç³»ç»Ÿçš„æ€§èƒ½ä½ä¸‹ã€‚</p>
<p>æ•°æ®åº“è¿æ¥æ± çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶å»ºç«‹è¶³å¤Ÿçš„æ•°æ®åº“è¿æ¥ï¼Œå¹¶å°†è¿™äº›è¿æ¥ç»„æˆä¸€ä¸ªè¿æ¥æ± ï¼Œç”±åº”ç”¨ç¨‹åºåŠ¨æ€åœ°å¯¹æ± ä¸­çš„è¿æ¥è¿›è¡Œç”³è¯·ã€ä½¿ç”¨å’Œé‡Šæ”¾ã€‚å¯¹äºå¤šäºè¿æ¥æ± ä¸­è¿æ¥æ•°çš„å¹¶å‘è¯·æ±‚ï¼Œåº”è¯¥åœ¨è¯·æ±‚é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…ã€‚å¹¶ä¸”åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®æ± ä¸­è¿æ¥çš„ä½¿ç”¨ç‡ï¼ŒåŠ¨æ€å¢åŠ æˆ–å‡å°‘æ± ä¸­çš„è¿æ¥æ•°ã€‚</p>
<p>è¿æ¥æ± æŠ€æœ¯å°½å¯èƒ½å¤šåœ°é‡ç”¨äº†æ¶ˆè€—å†…å­˜åœ°èµ„æºï¼Œå¤§å¤§èŠ‚çœäº†å†…å­˜ï¼Œæé«˜äº†æœåŠ¡å™¨åœ°æœåŠ¡æ•ˆç‡ï¼Œèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„å®¢æˆ·æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨è¿æ¥æ± ï¼Œå°†å¤§å¤§æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶è‡ªèº«çš„ç®¡ç†æœºåˆ¶æ¥ç›‘è§†æ•°æ®åº“è¿æ¥çš„æ•°é‡ã€ä½¿ç”¨æƒ…å†µç­‰ã€‚</p>
<h4 id="â‘¢-ä¼ ç»Ÿçš„è¿æ¥æœºåˆ¶ä¸è¿æ¥æ± è¿è¡Œæœºåˆ¶åŒºåˆ«"><a href="#â‘¢-ä¼ ç»Ÿçš„è¿æ¥æœºåˆ¶ä¸è¿æ¥æ± è¿è¡Œæœºåˆ¶åŒºåˆ«" class="headerlink" title="â‘¢ ä¼ ç»Ÿçš„è¿æ¥æœºåˆ¶ä¸è¿æ¥æ± è¿è¡Œæœºåˆ¶åŒºåˆ«"></a>â‘¢ ä¼ ç»Ÿçš„è¿æ¥æœºåˆ¶ä¸è¿æ¥æ± è¿è¡Œæœºåˆ¶åŒºåˆ«</h4><p>æ‰§è¡Œä¸€ä¸ª SQL å‘½ä»¤</p>
<p><strong>ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± çš„æ­¥éª¤</strong>ï¼š</p>
<ul>
<li>TCPå»ºç«‹è¿æ¥ä¸‰æ¬¡æ¡æ‰‹</li>
<li>MySQLè®¤è¯ä¸‰æ¬¡æ¡æ‰‹</li>
<li>çœŸæ­£çš„SQLæ‰§è¡Œ</li>
<li>MySQLå…³é—­</li>
<li>TCPå››æ¬¡æŒ¥æ‰‹å…³é—­</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸ºäº†æ‰§è¡Œä¸€æ¡SQLï¼Œå´å¤šäº†éå¸¸å¤šç½‘ç»œäº¤äº’ï¼Œåº”ç”¨éœ€è¦é¢‘ç¹çš„åˆ›å»ºè¿æ¥å’Œå…³é—­è¿æ¥ã€‚</p>
<p><strong>ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± çš„æ­¥éª¤</strong>ï¼š</p>
<p>ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œéœ€è¦å»ºç«‹è¿æ¥ã€‚ ä½†æ˜¯ä¹‹åçš„è®¿é—®ï¼Œå‡ä¼šå¤ç”¨ä¹‹å‰åˆ›å»ºçš„è¿æ¥ï¼Œç›´æ¥æ‰§è¡ŒSQLè¯­å¥ã€‚</p>
<h3 id="è¶…é”®ã€å€™é€‰é”®ã€ä¸»é”®ã€å¤–é”®åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a href="#è¶…é”®ã€å€™é€‰é”®ã€ä¸»é”®ã€å¤–é”®åˆ†åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="è¶…é”®ã€å€™é€‰é”®ã€ä¸»é”®ã€å¤–é”®åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a>è¶…é”®ã€å€™é€‰é”®ã€ä¸»é”®ã€å¤–é”®åˆ†åˆ«æ˜¯ä»€ä¹ˆ</h3><ul>
<li><strong>â­è¶…é”®</strong>ï¼šåœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å±æ€§é›†ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®ã€‚ä¸€ä¸ªå±æ€§å¯ä»¥ä¸ºä½œä¸ºä¸€ä¸ªè¶…é”®ï¼Œå¤šä¸ªå±æ€§ç»„åˆåœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…é”®ã€‚è¶…é”®åŒ…å«å€™é€‰é”®å’Œä¸»é”®ã€‚</li>
<li><strong>â­å€™é€‰é”®</strong>ï¼šå³æœ€å°è¶…é”®ï¼Œå³æ²¡æœ‰å†—ä½™å…ƒç´ çš„è¶…é”®ã€‚å€™é€‰é”®ä¸­çš„å…ƒç´ ç§°ä¸º<strong>ä¸»å±æ€§</strong></li>
<li><strong>ä¸»é”®</strong>ï¼šå€™é€‰é”®ä¸­é€‰å‡ºä¸€ä¸ªä½œä¸ºä¸»é”®ï¼Œä¸€ä¸ªæ•°æ®åˆ—åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä¸”ä¸»é”®çš„å–å€¼ä¸èƒ½ç¼ºå¤±ï¼Œå³ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNullï¼‰ã€‚</li>
<li><strong>å¤–é”®</strong>ï¼šåœ¨ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨çš„å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®ç§°æ­¤è¡¨çš„å¤–é”®ã€‚</li>
</ul>
<h4 id="ä¸»é”®å’Œå¤–é”®çš„åŒºåˆ«"><a href="#ä¸»é”®å’Œå¤–é”®çš„åŒºåˆ«" class="headerlink" title="ä¸»é”®å’Œå¤–é”®çš„åŒºåˆ«"></a>ä¸»é”®å’Œå¤–é”®çš„åŒºåˆ«</h4><p>ä¸»é”®åœ¨æœ¬è¡¨ä¸­æ˜¯å”¯ä¸€çš„ã€ä¸å¯ä¸ºç©ºçš„ï¼Œå¤–é”®å¯ä»¥é‡å¤å¯ä»¥ä¸ºç©ºï¼›å¤–é”®å’Œå¦ä¸€å¼ è¡¨çš„ä¸»é”®å…³è”ï¼Œä¸èƒ½åˆ›å»ºå¯¹åº”è¡¨ä¸­ä¸å­˜åœ¨çš„å¤–é”®ã€‚</p>
<h3 id="ä¸»ç å’Œå¤–ç "><a href="#ä¸»ç å’Œå¤–ç " class="headerlink" title="ä¸»ç å’Œå¤–ç "></a>ä¸»ç å’Œå¤–ç </h3><p>è‹¥å…³ç³»ä¸­æŸä¸€å±æ€§ç»„çš„å€¼èƒ½å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œè€Œå…¶å­é›†ä¸èƒ½ï¼Œåˆ™ç§°è¯¥å±æ€§ç»„ä¸º<strong>å€™é€‰ç </strong>ï¼Œè‹¥ä¸€ä¸ªå…³ç³»æœ‰å¤šä¸ªå€™é€‰ç ï¼Œåˆ™é€‰å®šå…¶ä¸­ä¸€ä¸ªä¸º<strong>ä¸»ç </strong>ã€‚</p>
<p>å¦‚æœFæ˜¯åŸºæœ¬å…³ç³»Rçš„ä¸€ä¸ªæˆ–ä¸€ç»„å±æ€§ï¼Œä½†ä¸æ˜¯å…³ç³»Rçš„ç ï¼ŒKsæ˜¯åŸºæœ¬å…³ç³»Sçš„ä¸»ç ã€‚å¦‚æœFä¸Ksç›¸å¯¹åº”ï¼Œåˆ™ç§°Fæ˜¯Rçš„<strong>å¤–ç </strong>ã€‚</p>
<blockquote>
<p>ç±»ä¼¼å¤–é”®ï¼šFä¸æ˜¯Rçš„ä¸»é”®ï¼Œä½†æ˜¯æ˜¯å¦ä¸€ä¸ªå…³ç³»Sçš„ä¸»é”®ï¼Œåˆ™Fæ˜¯Rçš„å¤–é”®</p>
</blockquote>
<h3 id="â­å®Œæ•´æ€§çº¦æŸ"><a href="#â­å®Œæ•´æ€§çº¦æŸ" class="headerlink" title="â­å®Œæ•´æ€§çº¦æŸ"></a>â­å®Œæ•´æ€§çº¦æŸ</h3><p>æ•°æ®åº“çš„å®Œæ•´æ€§æ˜¯æŒ‡<strong>æ•°æ®çš„æ­£ç¡®æ€§å’Œç›¸å®¹æ€§</strong>ã€‚</p>
<ul>
<li>æ•°æ®çš„æ­£ç¡®æ€§æ˜¯æŒ‡æ•°æ®æ˜¯ç¬¦åˆç°å®ä¸–ç•Œè¯­ä¹‰ã€åæ˜ å½“å‰å®é™…çŠ¶å†µçš„ã€‚</li>
<li>æ•°æ®çš„ç›¸å®¹æ€§æ˜¯æŒ‡æ•°æ®åº“åŒä¸€å¯¹è±¡åœ¨ä¸åŒå…³ç³»è¡¨ä¸­çš„æ•°æ®æ˜¯ç¬¦åˆé€»è¾‘çš„ã€‚</li>
</ul>
<p>l <strong>å®ä½“å®Œæ•´æ€§</strong>ï¼šè‹¥å±æ€§Aæ˜¯åŸºæœ¬å…³ç³»Bçš„ä¸»å±æ€§ï¼Œåˆ™Aä¸èƒ½å–ç©ºå€¼ï¼ˆæ‰€è°“ç©ºå€¼æ˜¯æŒ‡ä¸çŸ¥é“ï¼Œä¸å­˜åœ¨ï¼Œæ— æ„ä¹‰çš„å€¼ï¼‰</p>
<p>l <strong>å‚ç…§å®Œæ•´æ€§</strong>ï¼šè‹¥å±æ€§Fæ˜¯åŸºæœ¬å…³ç³»Rçš„å¤–ç ï¼Œå®ƒä¸åŸºæœ¬å…³ç³»Sçš„ä¸»ç Ksç›¸å¯¹åº”ï¼Œåˆ™å¯¹äºRä¸­æ¯ä¸ªå…ƒç»„åœ¨Fä¸Šçš„å€¼å¿…é¡»ï¼š</p>
<p>Â² æˆ–è€…å–ç©ºå€¼ï¼ˆFçš„æ¯ä¸ªå±æ€§å€¼å‡ä¸ºç©ºå€¼ï¼‰</p>
<p>Â² æˆ–è€…ç­‰äºSä¸­æŸä¸ªå…ƒç»„çš„ä¸»ç å€¼</p>
<p>ï¼ˆæŸä¸ªåŒå­¦ç­é•¿å±æ€§å¯ä»¥æ˜¯å°šä¸ºé€‰å‡ºç­é•¿ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬å…³ç³»ä¸­æŸä¸ªå…ƒç»„çš„å­¦å·å€¼ï¼‰</p>
<p>l <strong>ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§</strong>ï¼šé’ˆå¯¹æŸä¸€å…·ä½“å…³ç³»æ•°æ®åº“çš„çº¦æŸæ¡ä»¶ï¼Œåæ˜ æŸä¸€å…·ä½“åº”ç”¨æ¶‰åŠçš„æ•°æ®å¿…é¡»æ»¡è¶³çš„è¯­ä¹‰è¦æ±‚ï¼ˆå¦‚æŸä¸ªå±æ€§å¿…é¡»å–å”¯ä¸€å€¼ï¼ŒæŸä¸ªéä¸»å±æ€§ä¸èƒ½å–ç©ºå€¼ï¼‰</p>
<h2 id="å¸¸ç”¨SQLè¯­å¥"><a href="#å¸¸ç”¨SQLè¯­å¥" class="headerlink" title="å¸¸ç”¨SQLè¯­å¥"></a>å¸¸ç”¨SQLè¯­å¥</h2><h3 id="SQL-çš„å››ä¸ªç»„æˆéƒ¨åˆ†-â­"><a href="#SQL-çš„å››ä¸ªç»„æˆéƒ¨åˆ†-â­" class="headerlink" title="SQL çš„å››ä¸ªç»„æˆéƒ¨åˆ† â­"></a>SQL çš„å››ä¸ªç»„æˆéƒ¨åˆ† â­</h3><ol>
<li>æ•°æ®åº“æ¨¡å¼å®šä¹‰è¯­è¨€DDLï¼šcreateç”¨æ¥åˆ›å»ºæ•°æ®åº“ä¸­çš„å„ç§å¯¹è±¡â€”â€”è¡¨ã€è§†å›¾ã€ç´¢å¼•ã€åŒä¹‰è¯ã€èšç°‡ç­‰</li>
<li>æ•°æ®æŸ¥è¯¢è¯­è¨€dqlï¼šåŸºæœ¬ç»“æ„æ˜¯ç”±SELECTå­å¥ï¼ŒFROMå­å¥å’ŒWHEREå­å¥ç»„æˆçš„æŸ¥è¯¢å—</li>
<li>æ•°æ®æ“çºµè¯­è¨€dmlï¼šæ’å…¥INSERTã€æ›´æ–°UPDATEå’Œåˆ é™¤DELETE</li>
<li>æ•°æ®æ§åˆ¶è¯­è¨€dclï¼šç”¨æ¥æˆäºˆæˆ–å›æ”¶è®¿é—®æ•°æ®åº“çš„æŸç§ç‰¹æƒï¼Œå¹¶æ§åˆ¶æ•°æ®åº“æ“çºµäº‹ç‰©å‘ç”Ÿçš„æ—¶é—´å’Œæ•ˆæœï¼Œå¯¹æ•°æ®åº“å®è¡Œç›‘è§†ç­‰</li>
</ol>
<h3 id="SQL-çº¦æŸ"><a href="#SQL-çº¦æŸ" class="headerlink" title="SQL çº¦æŸ"></a>SQL çº¦æŸ</h3><ul>
<li>NOT NULL: ç”¨äºæ§åˆ¶å­—æ®µçš„å†…å®¹ä¸€å®šä¸èƒ½ä¸ºç©ºï¼ˆNULLï¼‰ã€‚</li>
<li>UNIQUE: æ§ä»¶å­—æ®µå†…å®¹ä¸èƒ½é‡å¤ï¼Œä¸€ä¸ªè¡¨å…è®¸æœ‰å¤šä¸ª Unique çº¦æŸã€‚</li>
<li>PRIMARY KEY: ä¹Ÿæ˜¯ç”¨äºæ§ä»¶å­—æ®µå†…å®¹ä¸èƒ½é‡å¤ï¼Œä½†å®ƒåœ¨ä¸€ä¸ªè¡¨åªå…è®¸å‡ºç°ä¸€ä¸ªã€‚</li>
<li>FOREIGN KEY: ç”¨äºé¢„é˜²ç ´åè¡¨ä¹‹é—´è¿æ¥çš„åŠ¨ä½œï¼Œä¹Ÿèƒ½é˜²æ­¢éæ³•æ•°æ®æ’å…¥å¤–é”®åˆ—ï¼Œå› ä¸ºå®ƒå¿…é¡»æ˜¯å®ƒæŒ‡å‘çš„é‚£ä¸ªè¡¨ä¸­çš„å€¼ä¹‹ä¸€ã€‚</li>
<li>CHECK: ç”¨äºæ§åˆ¶å­—æ®µçš„å€¼èŒƒå›´ã€‚</li>
</ul>
<h3 id="å…­ç§å…³è”æŸ¥è¯¢"><a href="#å…­ç§å…³è”æŸ¥è¯¢" class="headerlink" title="å…­ç§å…³è”æŸ¥è¯¢"></a>å…­ç§å…³è”æŸ¥è¯¢</h3><ul>
<li><p>äº¤å‰è¿æ¥ï¼ˆCROSS JOINï¼‰</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM A,B(,C)æˆ–è€…SELECT * FROM A CROSS JOIN B (CROSS JOIN C)#æ²¡æœ‰ä»»ä½•å…³è”æ¡ä»¶ï¼Œç»“æœæ˜¯ç¬›å¡å°”ç§¯ï¼Œç»“æœé›†ä¼šå¾ˆå¤§ï¼Œæ²¡æœ‰æ„ä¹‰ï¼Œå¾ˆå°‘ä½¿ç”¨</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>å†…è¿æ¥ï¼ˆINNER JOINï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM A,B WHERE A.id&#x3D;B.id </span><br><span class="line">SELECT * FROM A INNER JOIN B ON A.id&#x3D;B.id #å¤šè¡¨ä¸­åŒæ—¶ç¬¦åˆæŸç§æ¡ä»¶çš„æ•°æ®è®°å½•çš„é›†åˆï¼ŒINNER JOINå¯ä»¥ç¼©å†™ä¸ºJOIN</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç­‰å€¼è¿æ¥ï¼šON A.id=B.id</p>
<p>ä¸ç­‰å€¼è¿æ¥ï¼šON A.id &gt; B.id</p>
<p>è‡ªè¿æ¥ï¼šSELECT * FROM A T1 INNER JOIN A T2 ON T1.id=T2.pid</p>
</blockquote>
</li>
<li><p>å¤–è¿æ¥ï¼ˆLEFT JOIN/RIGHT JOINï¼‰</p>
<blockquote>
<p>å·¦å¤–è¿æ¥ï¼šLEFT OUTER JOIN, ä»¥å·¦è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå·¦è¡¨ï¼ŒæŒ‰ç…§ONåçš„å…³è”æ¡ä»¶åŒ¹é…å³è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨NULLå¡«å……ï¼Œå¯ä»¥ç®€å†™æˆLEFT JOIN<br>å³å¤–è¿æ¥ï¼šRIGHT OUTER JOIN, ä»¥å³è¡¨ä¸ºä¸»ï¼Œå…ˆæŸ¥è¯¢å‡ºå³è¡¨ï¼ŒæŒ‰ç…§ONåçš„å…³è”æ¡ä»¶åŒ¹é…å·¦è¡¨ï¼Œæ²¡æœ‰åŒ¹é…åˆ°çš„ç”¨NULLå¡«å……ï¼Œå¯ä»¥ç®€å†™æˆRIGHT JOIN</p>
</blockquote>
</li>
<li><p>è”åˆæŸ¥è¯¢ï¼ˆUNIONä¸UNION ALLï¼‰</p>
<blockquote>
<p>æŠŠå¤šä¸ªç»“æœé›†é›†ä¸­åœ¨ä¸€èµ·ï¼ŒUNIONå‰çš„ç»“æœä¸ºåŸºå‡†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è”åˆæŸ¥è¯¢çš„åˆ—æ•°è¦ç›¸ç­‰ï¼Œç›¸åŒçš„è®°å½•è¡Œä¼šåˆå¹¶<br>å¦‚æœä½¿ç”¨UNION ALLï¼Œä¸ä¼šåˆå¹¶é‡å¤çš„è®°å½•è¡Œ<br>æ•ˆç‡ UNION é«˜äº UNION ALL</p>
</blockquote>
</li>
<li><p>å…¨è¿æ¥ï¼ˆFULL JOINï¼‰</p>
<blockquote>
<p>MySQLä¸æ”¯æŒå…¨è¿æ¥<br>å¯ä»¥ä½¿ç”¨LEFT JOIN å’ŒUNIONå’ŒRIGHT JOINè”åˆä½¿ç”¨</p>
</blockquote>
</li>
</ul>
<h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><blockquote>
<ol>
<li>æ¡ä»¶ï¼šä¸€æ¡SQLè¯­å¥çš„æŸ¥è¯¢ç»“æœåšä¸ºå¦ä¸€æ¡æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶æˆ–æŸ¥è¯¢ç»“æœ</li>
<li>åµŒå¥—ï¼šå¤šæ¡SQLè¯­å¥åµŒå¥—ä½¿ç”¨ï¼Œå†…éƒ¨çš„SQLæŸ¥è¯¢è¯­å¥ç§°ä¸ºå­æŸ¥è¯¢ã€‚</li>
</ol>
</blockquote>
<h3 id="å­æŸ¥è¯¢çš„ä¸‰ç§æƒ…å†µ"><a href="#å­æŸ¥è¯¢çš„ä¸‰ç§æƒ…å†µ" class="headerlink" title="å­æŸ¥è¯¢çš„ä¸‰ç§æƒ…å†µ"></a>å­æŸ¥è¯¢çš„ä¸‰ç§æƒ…å†µ</h3><ul>
<li>å­æŸ¥è¯¢æ˜¯å•è¡Œå•åˆ—çš„æƒ…å†µï¼šç»“æœé›†æ˜¯ä¸€ä¸ªå€¼ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨ï¼š=ã€ &lt;ã€ &gt; ç­‰è¿ç®—ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- æŸ¥è¯¢å·¥èµ„æœ€é«˜çš„å‘˜å·¥æ˜¯è°ï¼Ÿ </span><br><span class="line">select  * from employee where salary&#x3D;(select max(salary) from employee);</span><br></pre></td></tr></table></figure>
<ul>
<li>å­æŸ¥è¯¢æ˜¯å¤šè¡Œå•åˆ—çš„æƒ…å†µï¼šç»“æœé›†ç±»ä¼¼äºä¸€ä¸ªæ•°ç»„ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨ï¼šin è¿ç®—ç¬¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select id from Stduent where id in (select id from SC);</span><br></pre></td></tr></table></figure>
<ul>
<li>å­æŸ¥è¯¢æ˜¯å¤šè¡Œå¤šåˆ—çš„æƒ…å†µï¼šç»“æœé›†ç±»ä¼¼äºä¸€å¼ è™šæ‹Ÿè¡¨ï¼Œä¸èƒ½ç”¨äºwhereæ¡ä»¶ï¼Œç”¨äºselectå­å¥ä¸­åšä¸ºå­è¡¨</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 1) æŸ¥è¯¢å‡º2011å¹´ä»¥åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">-- 2) æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯ï¼Œä¸ä¸Šé¢çš„è™šæ‹Ÿè¡¨ä¸­çš„ä¿¡æ¯æ¯”å¯¹ï¼Œæ‰¾å‡ºæ‰€æœ‰éƒ¨é—¨IDç›¸ç­‰çš„å‘˜å·¥ã€‚</span><br><span class="line">select * from dept d,  (select * from employee where join_date &gt; &#39;2011-1-1&#39;) e where e.dept_id &#x3D;  d.id;    </span><br><span class="line"></span><br><span class="line">-- ä½¿ç”¨è¡¨è¿æ¥ï¼š</span><br><span class="line">select d.*, e.* from  dept d inner join employee e on d.id &#x3D; e.dept_id where e.join_date &gt;  &#39;2011-1-1&#39;</span><br></pre></td></tr></table></figure>
<h3 id="in-å’Œ-exists-çš„åŒºåˆ«"><a href="#in-å’Œ-exists-çš„åŒºåˆ«" class="headerlink" title="in å’Œ exists çš„åŒºåˆ«"></a>in å’Œ exists çš„åŒºåˆ«</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select id from Student where id exists (select id from SC);</span><br><span class="line">select id from Stduent where id in (select id from SC);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>in å…ˆè¿›è¡Œå­æŸ¥è¯¢ select id from SCï¼Œå†è¿›è¡Œå¤–æŸ¥è¯¢ select id from Student</p>
<p>exists å…ˆæ‰§è¡Œå¤–æŸ¥è¯¢ï¼Œå†æ‰§è¡Œå­æŸ¥è¯¢</p>
</li>
<li><p>in è¯­å¥æ˜¯æŠŠå¤–è¡¨å’Œå†…è¡¨ä½œè¿æ¥</p>
<p>è€Œ exists è¯­å¥æ˜¯å¯¹å¤–è¡¨ä½œå¾ªç¯ï¼Œæ¯æ¬¡å¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢</p>
</li>
<li><p>exists é€‚åˆå­æŸ¥è¯¢çš„è¡¨æ¯”å¤–æŸ¥è¯¢å¤§çš„æŸ¥è¯¢è¯­å¥</p>
<p>å¦‚æœå†…è¡¨å’Œå¤–è¡¨å·®ä¸å¤šå¤§ï¼Œé‚£ä¹ˆ in å’Œ exists çš„æ•ˆç‡å·®åˆ«ä¸å¤§</p>
</li>
</ul>
<h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd3VnZW5xaWFuZy9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvQ1MtTm90ZXMvMjAyMDA0MjkxMDAwMzcucG5n?x-oss-process=image/format,png" alt="image-20200429100036635"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd3VnZW5xaWFuZy9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvQ1MtTm90ZXMvMjAyMDA0MjkxMDAxMDAucG5n?x-oss-process=image/format,png" alt="image-20200429100059106"></p>
<h4 id="æ•´æ•°ç±»å‹"><a href="#æ•´æ•°ç±»å‹" class="headerlink" title="æ•´æ•°ç±»å‹"></a>æ•´æ•°ç±»å‹</h4><p>TINYINTã€SMALLINTã€MEDIUMINTã€INTã€BIGINTï¼Œåˆ†åˆ«è¡¨ç¤º1å­—èŠ‚ã€2å­—èŠ‚ã€3å­—èŠ‚ã€4å­—èŠ‚ã€8å­—èŠ‚æ•´æ•°ã€‚ä»»ä½•æ•´æ•°ç±»å‹éƒ½å¯ä»¥åŠ ä¸ŠUNSIGNEDå±æ€§ï¼Œè¡¨ç¤ºæ•°æ®æ˜¯æ— ç¬¦å·çš„ï¼Œå³éè´Ÿæ•´æ•°ã€‚</p>
<p>é•¿åº¦ï¼šæ•´æ•°ç±»å‹å¯ä»¥è¢«æŒ‡å®šé•¿åº¦ï¼Œä¾‹å¦‚ï¼šINT(11)è¡¨ç¤ºé•¿åº¦ä¸º11çš„INTç±»å‹ã€‚é•¿åº¦åœ¨å¤§å¤šæ•°åœºæ™¯æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå®ƒä¸ä¼šé™åˆ¶å€¼çš„åˆæ³•èŒƒå›´ï¼Œåªä¼šå½±å“æ˜¾ç¤ºå­—ç¬¦çš„ä¸ªæ•°ï¼Œè€Œä¸”éœ€è¦å’ŒUNSIGNED ZEROFILLå±æ€§é…åˆä½¿ç”¨æ‰æœ‰æ„ä¹‰ã€‚</p>
<p>ä¾‹å­ï¼Œå‡å®šç±»å‹è®¾å®šä¸ºINT(5)ï¼Œå±æ€§ä¸ºUNSIGNED ZEROFILLï¼Œå¦‚æœç”¨æˆ·æ’å…¥çš„æ•°æ®ä¸º12çš„è¯ï¼Œé‚£ä¹ˆæ•°æ®åº“å®é™…å­˜å‚¨æ•°æ®ä¸º00012ã€‚ä»å 4å­—èŠ‚å­˜å‚¨ï¼Œå­˜å‚¨èŒƒå›´ä¸å˜ï¼Œä¸å½±å“å†…éƒ¨å­˜å‚¨ã€‚</p>
<h4 id="å®æ•°ç±»å‹"><a href="#å®æ•°ç±»å‹" class="headerlink" title="å®æ•°ç±»å‹"></a>å®æ•°ç±»å‹</h4><p>FLOATï¼ˆå­˜å‚¨è‡³å¤š8ä½åè¿›åˆ¶æ•°ï¼Œ4å­—èŠ‚ï¼‰ã€DOUBLEï¼ˆå­˜å‚¨è‡³å¤š18ä½åè¿›åˆ¶æ•°ï¼Œ8å­—èŠ‚ï¼‰ã€DECIMALã€‚</p>
<p>DECIMALå¯ä»¥ç”¨äºå­˜å‚¨æ¯”BIGINTè¿˜å¤§çš„æ•´å‹ï¼Œèƒ½å­˜å‚¨ç²¾ç¡®çš„å°æ•°ã€‚<br>è€ŒFLOATå’ŒDOUBLEæ˜¯æœ‰å–å€¼èŒƒå›´çš„ï¼Œå¹¶æ”¯æŒä½¿ç”¨æ ‡å‡†çš„æµ®ç‚¹è¿›è¡Œè¿‘ä¼¼è®¡ç®—ã€‚<br>è®¡ç®—æ—¶FLOATå’ŒDOUBLEç›¸æ¯”DECIMALæ•ˆç‡æ›´é«˜ä¸€äº›ï¼ŒDECIMALä½ å¯ä»¥ç†è§£æˆæ˜¯ç”¨å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚</p>
<h4 id="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"><a href="#æ—¥æœŸå’Œæ—¶é—´ç±»å‹" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"></a>æ—¥æœŸå’Œæ—¶é—´ç±»å‹</h4><p>year, date, time, datetime, timestep</p>
<p>å°½é‡ä½¿ç”¨timestampï¼Œç©ºé—´æ•ˆç‡é«˜äºdatetimeï¼Œ<br>ç”¨æ•´æ•°ä¿å­˜æ—¶é—´æˆ³é€šå¸¸ä¸æ–¹ä¾¿å¤„ç†ã€‚</p>
<h4 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h4><p>VARCHARã€CHARã€TEXTã€BLOB</p>
<p>CHARæ˜¯å®šé•¿çš„ï¼Œæ ¹æ®å®šä¹‰çš„å­—ç¬¦ä¸²é•¿åº¦åˆ†é…è¶³å¤Ÿçš„ç©ºé—´ï¼Œä¼šæ ¹æ®éœ€è¦ä½¿ç”¨ç©ºæ ¼è¿›è¡Œå¡«å……æ–¹ä¾¿æ¯”è¾ƒï¼Œé€‚åˆå­˜å‚¨å¾ˆçŸ­çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ‰€æœ‰å€¼éƒ½æ¥è¿‘åŒä¸€ä¸ªé•¿åº¦ã€‚å­˜å‚¨çš„å†…å®¹è¶…å‡ºè®¾ç½®çš„é•¿åº¦æ—¶ï¼Œå†…å®¹ä¼šè¢«æˆªæ–­ã€‚</p>
<p>VARCHARç”¨äºå­˜å‚¨å¯å˜é•¿å­—ç¬¦ä¸²ï¼Œåˆ—é•¿åº¦å°äº255å­—èŠ‚æ—¶ï¼Œä½¿ç”¨1å­—èŠ‚è¡¨ç¤ºï¼Œå¦åˆ™ä½¿ç”¨2å­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨çš„å†…å®¹è¶…å‡ºè®¾ç½®çš„é•¿åº¦æ—¶ï¼Œå†…å®¹ä¼šè¢«æˆªæ–­ï¼Œæ¯”å®šé•¿ç±»å‹æ›´èŠ‚çœç©ºé—´ã€‚ä½¿ç”¨é¢å¤–1æˆ–2ä¸ªå­—èŠ‚å­˜å‚¨å­—ç¬¦ä¸²é•¿åº¦ã€‚</p>
<p>varchar(50)ä¸­50çš„è¡¨ç¤ºæœ€å¤šå­˜æ”¾50ä¸ªå­—ç¬¦ï¼Œvarchar(50)å’Œ(200)å­˜å‚¨helloæ‰€å ç©ºé—´ä¸€æ ·ï¼Œä½†åè€…åœ¨æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ï¼Œå› ä¸ºorder by colé‡‡ç”¨fixed_lengthè®¡ç®—colé•¿åº¦(memoryå¼•æ“ä¹Ÿä¸€æ ·)ã€‚åœ¨æ—©æœŸ MySQL ç‰ˆæœ¬ä¸­ï¼Œ 50 ä»£è¡¨å­—èŠ‚æ•°ï¼Œç°åœ¨ä»£è¡¨å­—ç¬¦æ•°ã€‚</p>
<p><strong>ä½¿ç”¨ç­–ç•¥ï¼š</strong><br>å¯¹äºç»å¸¸å˜æ›´çš„æ•°æ®æ¥è¯´ï¼ŒCHARæ¯”VARCHARæ›´å¥½ï¼Œå› ä¸ºCHARä¸å®¹æ˜“äº§ç”Ÿç¢ç‰‡ã€‚<br>å¯¹äºéå¸¸çŸ­çš„åˆ—ï¼ŒCHARæ¯”VARCHARåœ¨å­˜å‚¨ç©ºé—´ä¸Šæ›´æœ‰æ•ˆç‡ã€‚<br>ä½¿ç”¨æ—¶è¦æ³¨æ„åªåˆ†é…éœ€è¦çš„ç©ºé—´ï¼Œæ›´é•¿çš„åˆ—æ’åºæ—¶ä¼šæ¶ˆè€—æ›´å¤šå†…å­˜ã€‚<br>å°½é‡é¿å…ä½¿ç”¨TEXT/BLOBç±»å‹ï¼ŒæŸ¥è¯¢æ—¶ä¼šä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½å¼€é”€ã€‚</p>
<h4 id="æšä¸¾ç±»å‹ï¼ˆENUMï¼‰"><a href="#æšä¸¾ç±»å‹ï¼ˆENUMï¼‰" class="headerlink" title="æšä¸¾ç±»å‹ï¼ˆENUMï¼‰"></a>æšä¸¾ç±»å‹ï¼ˆENUMï¼‰</h4><p>æŠŠä¸é‡å¤çš„æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªé¢„å®šä¹‰çš„é›†åˆã€‚</p>
<p>æœ‰æ—¶å¯ä»¥ä½¿ç”¨ENUMä»£æ›¿å¸¸ç”¨çš„å­—ç¬¦ä¸²ç±»å‹ã€‚<br>ENUMå­˜å‚¨éå¸¸ç´§å‡‘ï¼Œä¼šæŠŠåˆ—è¡¨å€¼å‹ç¼©åˆ°ä¸€ä¸ªæˆ–ä¸¤ä¸ªå­—èŠ‚ã€‚<br>ENUMåœ¨å†…éƒ¨å­˜å‚¨æ—¶ï¼Œå…¶å®å­˜çš„æ˜¯æ•´æ•°ã€‚<br>å°½é‡é¿å…ä½¿ç”¨æ•°å­—ä½œä¸ºENUMæšä¸¾çš„å¸¸é‡ï¼Œå› ä¸ºå®¹æ˜“æ··ä¹±ã€‚<br>æ’åºæ˜¯æŒ‰ç…§å†…éƒ¨å­˜å‚¨çš„æ•´æ•°</p>
<h3 id="dropã€deleteä¸truncateçš„åŒºåˆ«"><a href="#dropã€deleteä¸truncateçš„åŒºåˆ«" class="headerlink" title="dropã€deleteä¸truncateçš„åŒºåˆ«"></a>dropã€deleteä¸truncateçš„åŒºåˆ«</h3><p>ä¸‰è€…éƒ½è¡¨ç¤ºåˆ é™¤ï¼Œä½†æ˜¯ä¸‰è€…æœ‰ä¸€äº›å·®åˆ«ï¼š</p>
<h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><p>1ã€deleteæ˜¯DMLï¼Œæ‰§è¡Œdeleteæ“ä½œæ—¶ï¼Œæ¯æ¬¡ä»è¡¨ä¸­åˆ é™¤ä¸€è¡Œï¼Œå¹¶ä¸”åŒæ—¶å°†è¯¥è¡Œçš„çš„åˆ é™¤æ“ä½œè®°å½•åœ¨redoå’Œundoè¡¨ç©ºé—´ä¸­ä»¥ä¾¿è¿›è¡Œå›æ»šï¼ˆrollbackï¼‰å’Œé‡åšæ“ä½œï¼Œä½†è¦æ³¨æ„è¡¨ç©ºé—´è¦è¶³å¤Ÿå¤§ï¼Œéœ€è¦æ‰‹åŠ¨æäº¤ï¼ˆcommitï¼‰æ“ä½œæ‰èƒ½ç”Ÿæ•ˆï¼Œå¯ä»¥é€šè¿‡rollbackæ’¤æ¶ˆæ“ä½œã€‚</p>
<p>2ã€deleteå¯æ ¹æ®æ¡ä»¶åˆ é™¤è¡¨ä¸­æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œå¦‚æœä¸æŒ‡å®šwhereå­å¥ï¼Œé‚£ä¹ˆåˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•ã€‚</p>
<p>3ã€deleteè¯­å¥ä¸å½±å“è¡¨æ‰€å ç”¨çš„extentï¼Œé«˜æ°´çº¿(high watermark)ä¿æŒåŸä½ç½®ä¸å˜ã€‚</p>
<h4 id="truncate"><a href="#truncate" class="headerlink" title="truncate"></a>truncate</h4><p>1ã€truncateæ˜¯DDLï¼Œä¼šéšå¼æäº¤ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½å›æ»šï¼Œä¸ä¼šè§¦å‘è§¦å‘å™¨ã€‚</p>
<p>2ã€truncateä¼šåˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•ï¼Œå¹¶ä¸”å°†é‡æ–°è®¾ç½®é«˜æ°´çº¿å’Œæ‰€æœ‰çš„ç´¢å¼•ï¼Œç¼ºçœæƒ…å†µä¸‹å°†ç©ºé—´é‡Šæ”¾åˆ°minextentsä¸ªextentï¼Œé™¤éä½¿ç”¨reuse storageï¼Œã€‚ä¸ä¼šè®°å½•æ—¥å¿—ï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œä½†ä¸èƒ½é€šè¿‡rollbackæ’¤æ¶ˆæ“ä½œï¼ˆå¦‚æœä¸€ä¸å°å¿ƒæŠŠä¸€ä¸ªè¡¨truncateæ‰ï¼Œä¹Ÿæ˜¯å¯ä»¥æ¢å¤çš„ï¼Œåªæ˜¯ä¸èƒ½é€šè¿‡rollbackæ¥æ¢å¤ï¼‰ã€‚</p>
<p>3ã€å¯¹äºå¤–é”®ï¼ˆforeignkey ï¼‰çº¦æŸå¼•ç”¨çš„è¡¨ï¼Œä¸èƒ½ä½¿ç”¨ truncate tableï¼Œè€Œåº”ä½¿ç”¨ä¸å¸¦ where å­å¥çš„ delete è¯­å¥ã€‚</p>
<p>4ã€truncatetableä¸èƒ½ç”¨äºå‚ä¸äº†ç´¢å¼•è§†å›¾çš„è¡¨ã€‚</p>
<h4 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h4><p>1ã€dropæ˜¯DDLï¼Œä¼šéšå¼æäº¤ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½å›æ»šï¼Œä¸ä¼šè§¦å‘è§¦å‘å™¨ã€‚</p>
<p>2ã€dropè¯­å¥åˆ é™¤è¡¨ç»“æ„åŠæ‰€æœ‰æ•°æ®ï¼Œå¹¶å°†è¡¨æ‰€å ç”¨çš„ç©ºé—´å…¨éƒ¨é‡Šæ”¾ã€‚</p>
<p>3ã€dropè¯­å¥å°†åˆ é™¤è¡¨çš„ç»“æ„æ‰€ä¾èµ–çš„çº¦æŸï¼Œè§¦å‘å™¨ï¼Œç´¢å¼•ï¼Œä¾èµ–äºè¯¥è¡¨çš„å­˜å‚¨è¿‡ç¨‹/å‡½æ•°å°†ä¿ç•™,ä½†æ˜¯å˜ä¸ºinvalidçŠ¶æ€ã€‚</p>
<h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>1ã€åœ¨é€Ÿåº¦ä¸Šï¼Œä¸€èˆ¬æ¥è¯´ï¼Œdrop&gt; truncate &gt; deleteã€‚</p>
<p>2ã€åœ¨ä½¿ç”¨dropå’Œtruncateæ—¶ä¸€å®šè¦æ³¨æ„ï¼Œè™½ç„¶å¯ä»¥æ¢å¤ï¼Œä½†ä¸ºäº†å‡å°‘éº»çƒ¦ï¼Œè¿˜æ˜¯è¦æ…é‡ã€‚</p>
<p>3ã€å¦‚æœæƒ³åˆ é™¤éƒ¨åˆ†æ•°æ®ç”¨deleteï¼Œæ³¨æ„å¸¦ä¸Šwhereå­å¥ï¼Œå›æ»šæ®µè¦è¶³å¤Ÿå¤§ï¼›</p>
<p>   å¦‚æœæƒ³åˆ é™¤è¡¨ï¼Œå½“ç„¶ç”¨dropï¼› </p>
<p>   å¦‚æœæƒ³ä¿ç•™è¡¨è€Œå°†æ‰€æœ‰æ•°æ®åˆ é™¤ï¼Œå¦‚æœå’Œäº‹åŠ¡æ— å…³ï¼Œç”¨truncateå³å¯ï¼›</p>
<p>   å¦‚æœå’Œäº‹åŠ¡æœ‰å…³ï¼Œæˆ–è€…æƒ³è§¦å‘triggerï¼Œè¿˜æ˜¯ç”¨deleteï¼›</p>
<p>   å¦‚æœæ˜¯æ•´ç†è¡¨å†…éƒ¨çš„ç¢ç‰‡ï¼Œå¯ä»¥ç”¨truncateè·Ÿä¸Šreuse stroageï¼Œå†é‡æ–°å¯¼å…¥/æ’å…¥æ•°æ®ã€‚</p>
<h3 id="SQL-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#SQL-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="SQL çš„ç”Ÿå‘½å‘¨æœŸ"></a>SQL çš„ç”Ÿå‘½å‘¨æœŸ</h3><ol>
<li>åº”ç”¨æœåŠ¡å™¨ä¸æ•°æ®åº“æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªè¿æ¥</li>
<li>æ•°æ®åº“è¿›ç¨‹æ‹¿åˆ°è¯·æ±‚sql</li>
<li>è§£æå¹¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼Œæ‰§è¡Œ</li>
<li>è¯»å–æ•°æ®åˆ°å†…å­˜å¹¶è¿›è¡Œé€»è¾‘å¤„ç†</li>
<li>é€šè¿‡æ­¥éª¤ä¸€çš„è¿æ¥ï¼Œå‘é€ç»“æœåˆ°å®¢æˆ·ç«¯</li>
<li>å…³æ‰è¿æ¥ï¼Œé‡Šæ”¾èµ„æº</li>
</ol>
<h3 id="åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯­å¥é€Ÿåº¦å¾ˆæ…¢ï¼Œåº”å¦‚ä½•ä¼˜åŒ–"><a href="#åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯­å¥é€Ÿåº¦å¾ˆæ…¢ï¼Œåº”å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯­å¥é€Ÿåº¦å¾ˆæ…¢ï¼Œåº”å¦‚ä½•ä¼˜åŒ–"></a>åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯­å¥é€Ÿåº¦å¾ˆæ…¢ï¼Œåº”å¦‚ä½•ä¼˜åŒ–</h3><ol>
<li>å»ºç´¢å¼•</li>
<li>å‡å°‘è¡¨ä¹‹é—´çš„å…³è”</li>
<li>ä¼˜åŒ– SQLï¼Œå°½é‡è®© SQL å¾ˆå¿«å®šä½æ•°æ®ï¼Œä¸è¦è®© SQL åšå…¨è¡¨æŸ¥è¯¢ï¼Œåº”è¯¥èµ°ç´¢å¼•ï¼ŒæŠŠæ•°æ®é‡å¤§çš„è¡¨æ’åœ¨å‰é¢</li>
<li>ç®€åŒ–æŸ¥è¯¢å­—æ®µï¼Œæ²¡ç”¨çš„å­—æ®µä¸è¦ï¼Œå·²ç»å¯¹è¿”å›ç»“æœçš„æ§åˆ¶ï¼Œå°½é‡è¿”å›å°‘é‡æ•°æ®</li>
<li>å°½é‡ç”¨ Prepared Statement æ¥æŸ¥è¯¢ï¼Œä¸è¦ç”¨ Statement</li>
</ol>
<h3 id="è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ"></a>è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ</h3><p>è¶…å¤§çš„åˆ†é¡µä¸€èˆ¬ä»ä¸¤ä¸ªæ–¹å‘ä¸Šæ¥è§£å†³.</p>
<ul>
<li><p>æ•°æ®åº“å±‚é¢ï¼šæ ¸å¿ƒå‡å°‘loadçš„æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹é¢ç¬¬ä¸€æ¡è¯­å¥éœ€è¦load1000000æ•°æ®ï¼Œåªå–10æ¡ï¼ŒåŸºæœ¬ä¸Šå…¨éƒ¨ä¸¢å¼ƒ,æ‰€ä»¥å¾ˆæ…¢</span><br><span class="line">select * from table where age &gt; 20 limit 1000000,10</span><br><span class="line">select * from table where id in (select id from table where age &gt; 20 limit 1000000,10)</span><br><span class="line"></span><br><span class="line">select * from table where id &gt; 1000000 limit 10</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»éœ€æ±‚çš„è§’åº¦å‡å°‘è¿™ç§è¯·æ±‚ï¼šä¸åšç±»ä¼¼çš„éœ€æ±‚(ç›´æ¥è·³è½¬åˆ°å‡ ç™¾ä¸‡é¡µä¹‹åçš„å…·ä½“æŸä¸€é¡µ.åªå…è®¸é€é¡µæŸ¥çœ‹æˆ–è€…æŒ‰ç…§ç»™å®šçš„è·¯çº¿èµ°,è¿™æ ·å¯é¢„æµ‹,å¯ç¼“å­˜)ä»¥åŠé˜²æ­¢IDæ³„æ¼ä¸”è¿ç»­è¢«äººæ¶æ„æ”»å‡».</p>
</li>
</ul>
<h3 id="Union-å’Œ-Union-All-æœ‰ä»€ä¹ˆä¸åŒ"><a href="#Union-å’Œ-Union-All-æœ‰ä»€ä¹ˆä¸åŒ" class="headerlink" title="Union å’Œ Union All æœ‰ä»€ä¹ˆä¸åŒ"></a>Union å’Œ Union All æœ‰ä»€ä¹ˆä¸åŒ</h3><p>UNION åœ¨è¿›è¡Œè¡¨é“¾æ¥åä¼šç­›é€‰æ‰é‡å¤çš„è®°å½•ï¼Œæ‰€ä»¥åœ¨è¡¨é“¾æ¥åä¼šå¯¹æ‰€äº§ç”Ÿçš„ç»“æœé›†è¿›è¡Œæ’åºè¿ç®—ï¼Œåˆ é™¤é‡å¤çš„è®°å½•å†è¿”å›ç»“æœã€‚å®é™…å¤§éƒ¨åˆ†åº”ç”¨ä¸­æ˜¯ä¸ä¼šäº§ç”Ÿé‡å¤çš„è®°å½•ï¼Œæœ€å¸¸è§çš„æ˜¯è¿‡ç¨‹è¡¨ä¸å†å²è¡¨ UNIONã€‚ </p>
<p>UNION ALL åªæ˜¯ç®€å•çš„å°†ä¸¤ä¸ªç»“æœåˆå¹¶åå°±è¿”å›ã€‚ </p>
<p>ä»æ•ˆç‡ä¸Šè¯´ï¼ŒUNION ALL è¦æ¯” UNION å¿«å¾ˆå¤šï¼Œå¦‚æœå¯ä»¥ç¡®è®¤åˆå¹¶çš„ä¸¤ä¸ªç»“æœé›†ä¸­ä¸åŒ…å«é‡å¤çš„æ•°æ®çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ UNION ALLã€‚</p>
<h3 id="order-by-å’Œ-group-by-çš„åŒºåˆ«"><a href="#order-by-å’Œ-group-by-çš„åŒºåˆ«" class="headerlink" title="order by å’Œ group by çš„åŒºåˆ«"></a>order by å’Œ group by çš„åŒºåˆ«</h3><p>order by æ’åºæŸ¥è¯¢ã€asc å‡åºã€desc é™åº </p>
<p>group by åˆ†ç»„æŸ¥è¯¢ã€having åªèƒ½ç”¨äº group by å­å¥ï¼Œä½œç”¨äºç»„å†…ï¼Œhaving æ¡ä»¶å­å¥å¯ä»¥ç›´æ¥è·Ÿå‡½æ•°è¡¨è¾¾å¼ã€‚ä½¿ç”¨ group by å­å¥çš„æŸ¥è¯¢è¯­å¥éœ€è¦ä½¿ç”¨èšåˆå‡½æ•°ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯-PL-SQL"><a href="#ä»€ä¹ˆæ˜¯-PL-SQL" class="headerlink" title="ä»€ä¹ˆæ˜¯ PL / SQL"></a>ä»€ä¹ˆæ˜¯ PL / SQL</h3><p>PL / SQL æ˜¯ä¸€ç§ç¨‹åºè¯­è¨€ï¼Œå«åšè¿‡ç¨‹åŒ– SQL è¯­è¨€ï¼ˆProcedural Language/SQLï¼‰ã€‚PL / SQL æ˜¯ Oracle æ•°æ®åº“å¯¹ SQL è¯­å¥çš„æ‰©å±•ã€‚åœ¨æ™®é€š SQL è¯­å¥çš„ä½¿ç”¨ä¸Šå¢åŠ äº†ç¼–ç¨‹è¯­è¨€çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ PL / SQL æŠŠæ•°æ®æ“ä½œå’ŒæŸ¥è¯¢è¯­å¥ç»„ç»‡åœ¨ PL / SQL ä»£ç çš„è¿‡ç¨‹æ€§å•å…ƒä¸­ï¼Œé€šè¿‡é€»è¾‘åˆ¤æ–­ã€å¾ªç¯ç­‰æ“ä½œå®ç°å¤æ‚çš„åŠŸèƒ½æˆ–è€…è®¡ç®—ã€‚</p>
<p>PL / SQL åªæœ‰ Oracle æ•°æ®åº“æœ‰ã€‚ MySQL ç›®å‰ä¸æ”¯æŒ PL / SQL çš„ã€‚</p>
<h2 id="å¼•æ“"><a href="#å¼•æ“" class="headerlink" title="å¼•æ“"></a>å¼•æ“</h2><p>å­˜å‚¨å¼•æ“Storage engineï¼šæ•°æ®ã€ç´¢å¼•ä»¥åŠå…¶ä»–å¯¹è±¡æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œæ˜¯ä¸€å¥—æ–‡ä»¶ç³»ç»Ÿçš„å®ç°ã€‚</p>
<p>å¸¸ç”¨çš„å­˜å‚¨å¼•æ“æœ‰ä»¥ä¸‹ï¼š</p>
<ol>
<li>Innodbå¼•æ“ï¼šæä¾›äº†å¯¹æ•°æ®åº“ACIDäº‹åŠ¡çš„æ”¯æŒï¼Œè¿˜æä¾›äº†è¡Œçº§é”å’Œå¤–é”®çš„çº¦æŸã€‚å®ƒçš„è®¾è®¡ç›®æ ‡å°±æ˜¯å¤„ç†å¤§æ•°æ®å®¹é‡çš„æ•°æ®åº“ç³»ç»Ÿã€‚</li>
<li>MyIASMå¼•æ“(åŸæœ¬Mysqlçš„é»˜è®¤å¼•æ“)ï¼šä¸æä¾›äº‹åŠ¡çš„æ”¯æŒï¼Œä¹Ÿä¸æ”¯æŒè¡Œçº§é”å’Œå¤–é”®ã€‚</li>
<li>MEMORYå¼•æ“ï¼šæ‰€æœ‰çš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„å¤„ç†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å®‰å…¨æ€§ä¸é«˜ã€‚</li>
</ol>
<h3 id="MySQLå­˜å‚¨å¼•æ“MyISAMä¸InnoDBåŒºåˆ«"><a href="#MySQLå­˜å‚¨å¼•æ“MyISAMä¸InnoDBåŒºåˆ«" class="headerlink" title="MySQLå­˜å‚¨å¼•æ“MyISAMä¸InnoDBåŒºåˆ«"></a>MySQLå­˜å‚¨å¼•æ“MyISAMä¸InnoDBåŒºåˆ«</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd3VnZW5xaWFuZy9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvQ1MtTm90ZXMvMjAyMDA0MjkxMDA2MjkucG5n?x-oss-process=image/format,png" alt="image-20200429100628653"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd3VnZW5xaWFuZy9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvQ1MtTm90ZXMvMjAyMDA0MjkxMDA2NTgucG5n?x-oss-process=image/format,png" alt="image-20200429100657751"></p>
<blockquote>
<p>InnoDBç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼ŒMyISAMç´¢å¼•æ˜¯éèšç°‡ç´¢å¼•ã€‚<br>InnoDBçš„ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€è¡Œæ•°æ®ï¼Œå› æ­¤ä¸»é”®ç´¢å¼•éå¸¸é«˜æ•ˆã€‚<br>MyISAMç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è¡Œæ•°æ®åœ°å€ï¼Œéœ€è¦å†å¯»å€ä¸€æ¬¡æ‰èƒ½å¾—åˆ°æ•°æ®ã€‚<br>InnoDBéä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”®å’Œå…¶ä»–å¸¦ç´¢å¼•çš„åˆ—æ•°æ®ï¼Œå› æ­¤æŸ¥è¯¢æ—¶åšåˆ°è¦†ç›–ç´¢å¼•ä¼šéå¸¸é«˜æ•ˆã€‚</p>
</blockquote>
<h3 id="InnoDBå¼•æ“çš„4å¤§ç‰¹æ€§"><a href="#InnoDBå¼•æ“çš„4å¤§ç‰¹æ€§" class="headerlink" title="InnoDBå¼•æ“çš„4å¤§ç‰¹æ€§"></a>InnoDBå¼•æ“çš„4å¤§ç‰¹æ€§</h3><blockquote>
<ul>
<li>æ’å…¥ç¼“å†²ï¼ˆinsert buffer)</li>
<li>äºŒæ¬¡å†™(double write)</li>
<li>è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•(ahi)</li>
<li>é¢„è¯»(read ahead)</li>
</ul>
</blockquote>
<h3 id="å­˜å‚¨å¼•æ“é€‰æ‹©"><a href="#å­˜å‚¨å¼•æ“é€‰æ‹©" class="headerlink" title="å­˜å‚¨å¼•æ“é€‰æ‹©"></a>å­˜å‚¨å¼•æ“é€‰æ‹©</h3><blockquote>
<p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œä½¿ç”¨é»˜è®¤çš„<code>Innodb</code>å³å¯ã€‚</p>
<p>MyISAMï¼šä»¥è¯»å†™æ’å…¥ä¸ºä¸»çš„åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚åšå®¢ç³»ç»Ÿã€æ–°é—»é—¨æˆ·ç½‘ç«™ã€‚</p>
<p>Innodbï¼šæ›´æ–°ï¼ˆåˆ é™¤ï¼‰æ“ä½œé¢‘ç‡ä¹Ÿé«˜ï¼Œæˆ–è€…è¦ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼›å¹¶å‘é‡é«˜ï¼Œæ”¯æŒäº‹åŠ¡å’Œå¤–é”®ã€‚æ¯”å¦‚OAè‡ªåŠ¨åŒ–åŠå…¬ç³»ç»Ÿã€‚</p>
</blockquote>
<h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><h3 id="ä»€ä¹ˆæ˜¯ç´¢å¼•"><a href="#ä»€ä¹ˆæ˜¯ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ˜¯ç´¢å¼•"></a>ä»€ä¹ˆæ˜¯ç´¢å¼•</h3><ul>
<li>ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼ˆInnoDB æ•°æ®è¡¨ä¸Šçš„ç´¢å¼•æ˜¯è¡¨ç©ºé—´çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼‰ï¼ŒåŒ…å«å¯¹æ•°æ®è¡¨é‡Œæ‰€æœ‰è®°å½•çš„å¼•ç”¨æŒ‡é’ˆã€‚</li>
<li>ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚æ•°æ®åº“ç´¢å¼•ï¼Œæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ä¸€ä¸ªæ’åºçš„æ•°æ®ç»“æ„ï¼Œä»¥ååŠ©å¿«é€ŸæŸ¥è¯¢ã€æ›´æ–°æ•°æ®åº“è¡¨ä¸­æ•°æ®ã€‚ç´¢å¼•çš„å®ç°é€šå¸¸ä½¿ç”¨ B æ ‘åŠå…¶å˜ç§ B + æ ‘ã€‚</li>
<li>ç´¢å¼•å°±ç›¸å½“äºç›®å½•ã€‚ä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾ä¹¦ä¸­çš„å†…å®¹ï¼Œé€šè¿‡å¯¹å†…å®¹å»ºç«‹ç´¢å¼•å½¢æˆç›®å½•ã€‚ç´¢å¼•æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œéœ€è¦å æ®ç‰©ç†ç©ºé—´ã€‚</li>
</ul>
<h3 id="ç´¢å¼•çš„ä½œç”¨"><a href="#ç´¢å¼•çš„ä½œç”¨" class="headerlink" title="ç´¢å¼•çš„ä½œç”¨"></a>ç´¢å¼•çš„ä½œç”¨</h3><p>ç´¢å¼•å°±ä¸€ç§ç‰¹æ®Šçš„æŸ¥è¯¢è¡¨ï¼Œæ•°æ®åº“çš„æœç´¢å¯ä»¥åˆ©ç”¨å®ƒåŠ é€Ÿå¯¹æ•°æ®çš„æ£€ç´¢ã€‚å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œä¸€èˆ¬æ¥è¯´æ‰§è¡ŒæŸ¥è¯¢æ—¶éå†æ•´å¼ è¡¨ã€‚</p>
<h3 id="æ·»åŠ ç´¢å¼•ç›®çš„"><a href="#æ·»åŠ ç´¢å¼•ç›®çš„" class="headerlink" title="æ·»åŠ ç´¢å¼•ç›®çš„"></a>æ·»åŠ ç´¢å¼•ç›®çš„</h3><p>æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡</p>
<h3 id="èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•-â­"><a href="#èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•-â­" class="headerlink" title="èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼• â­"></a>èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼• â­</h3><p>ç‰©ç†å­˜å‚¨é¡ºåºä¸é€»è¾‘é¡ºåºç›¸åŒï¼Œå³èšé›†ç´¢å¼•ï¼ˆInnoDBï¼‰</p>
<p>ç‰©ç†å­˜å‚¨é¡ºåºä¸ç´¢å¼•é¡ºåºä¸ä¸€è‡´ï¼Œå³éèšé›†ç´¢å¼•ï¼ˆMyISAMï¼‰</p>
<h3 id="ç´¢å¼•çš„ä¼˜ç¼ºç‚¹"><a href="#ç´¢å¼•çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ç´¢å¼•çš„ä¼˜ç¼ºç‚¹"></a>ç´¢å¼•çš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹</p>
<ul>
<li>åŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•çš„æœ€ä¸»è¦çš„åŸå› ã€‚</li>
<li>é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¼˜åŒ–éšè—å™¨ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>æ—¶é—´æ–¹é¢ï¼šåˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´ï¼Œå½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ï¼Œä¼šé™ä½å¢/æ”¹/åˆ çš„æ‰§è¡Œæ•ˆç‡ï¼›</li>
<li>ç©ºé—´æ–¹é¢ï¼šç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆå»ºç´¢å¼•"><a href="#ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆå»ºç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆå»ºç´¢å¼•"></a>ä»€ä¹ˆæ ·çš„å­—æ®µé€‚åˆå»ºç´¢å¼•</h3><p>å”¯ä¸€ã€ä¸ä¸ºç©ºã€ç»å¸¸è¢«æŸ¥è¯¢çš„å­—æ®µ</p>
<h3 id="ç´¢å¼•ç±»å‹"><a href="#ç´¢å¼•ç±»å‹" class="headerlink" title="ç´¢å¼•ç±»å‹"></a>ç´¢å¼•ç±»å‹</h3><p>ä¸»é”®ç´¢å¼•: æ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œä¸å…è®¸ä¸ºNULLï¼Œä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚</p>
<p>å”¯ä¸€ç´¢å¼•: æ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œå…è®¸ä¸ºNULLå€¼ï¼Œä¸€ä¸ªè¡¨å…è®¸å¤šä¸ªåˆ—åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</p>
<ul>
<li>å¯ä»¥é€šè¿‡ ALTER TABLE table_name ADD UNIQUE (column); åˆ›å»ºå”¯ä¸€ç´¢å¼•</li>
<li>å¯ä»¥é€šè¿‡ ALTER TABLE table_name ADD UNIQUE (column1,column2); åˆ›å»ºå”¯ä¸€ç»„åˆç´¢å¼•</li>
</ul>
<p>æ™®é€šç´¢å¼•: åŸºæœ¬çš„ç´¢å¼•ç±»å‹ï¼Œæ²¡æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ï¼Œå…è®¸ä¸ºNULLå€¼ã€‚</p>
<ul>
<li>å¯ä»¥é€šè¿‡ALTER TABLE table_name ADD INDEX index_name (column);åˆ›å»ºæ™®é€šç´¢å¼•</li>
<li>å¯ä»¥é€šè¿‡ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);åˆ›å»ºç»„åˆç´¢å¼•</li>
</ul>
<p>å…¨æ–‡ç´¢å¼•ï¼š æ˜¯ç›®å‰æœç´¢å¼•æ“ä½¿ç”¨çš„ä¸€ç§å…³é”®æŠ€æœ¯ã€‚ï¼ˆInnoDBä¸æ”¯æŒï¼ŒMyISAMæ”¯æŒï¼‰</p>
<ul>
<li>å¯ä»¥é€šè¿‡ALTER TABLE table_name ADD FULLTEXT (column);åˆ›å»ºå…¨æ–‡ç´¢å¼•</li>
</ul>
<h3 id="ç´¢å¼•çš„æ•°æ®ç»“æ„"><a href="#ç´¢å¼•çš„æ•°æ®ç»“æ„" class="headerlink" title="ç´¢å¼•çš„æ•°æ®ç»“æ„"></a>ç´¢å¼•çš„æ•°æ®ç»“æ„</h3><h3 id="ç´¢å¼•çš„åŸºæœ¬åŸç†"><a href="#ç´¢å¼•çš„åŸºæœ¬åŸç†" class="headerlink" title="ç´¢å¼•çš„åŸºæœ¬åŸç†"></a>ç´¢å¼•çš„åŸºæœ¬åŸç†</h3><p>ç´¢å¼•çš„åŸç†å°±æ˜¯æŠŠæ— åºçš„æ•°æ®å˜æˆæœ‰åºçš„æŸ¥è¯¢ï¼ŒæŠŠåˆ›å»ºäº†ç´¢å¼•çš„åˆ—çš„å†…å®¹è¿›è¡Œæ’åºï¼Œå¯¹æ’åºç»“æœç”Ÿæˆå€’æ’è¡¨ï¼Œåœ¨å€’æ’è¡¨å†…å®¹ä¸Šæ‹¼ä¸Šæ•°æ®åœ°å€é“¾ã€‚åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆæ‹¿åˆ°å€’æ’è¡¨å†…å®¹ï¼Œå†å–å‡ºæ•°æ®åœ°å€é“¾ï¼Œä»è€Œæ‹¿åˆ°å…·ä½“æ•°æ®ã€‚</p>
<h3 id="ç´¢å¼•ç®—æ³•"><a href="#ç´¢å¼•ç®—æ³•" class="headerlink" title="ç´¢å¼•ç®—æ³•"></a>ç´¢å¼•ç®—æ³•</h3><h4 id="Bæ ‘ç´¢å¼•"><a href="#Bæ ‘ç´¢å¼•" class="headerlink" title="Bæ ‘ç´¢å¼•"></a>Bæ ‘ç´¢å¼•</h4><p>Mysqlæ•°æ®åº“ä¸­æœ€å¸¸ç”¨çš„ç´¢å¼•ç®—æ³•ï¼ŒåŸºæœ¬æ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½æ”¯æŒBTreeç´¢å¼•ã€‚ï¼ˆå®é™…æ˜¯ç”¨B+æ ‘å®ç°çš„ï¼Œå› ä¸ºåœ¨æŸ¥çœ‹è¡¨ç´¢å¼•æ—¶ï¼Œmysqlä¸€å¾‹æ‰“å°BTREEï¼Œæ‰€ä»¥ç®€ç§°ä¸ºBæ ‘ç´¢å¼•ï¼‰ã€‚ä¸ä»…å¯ä»¥è¢«ç”¨åœ¨=,&gt;,&gt;=,&lt;,&lt;=å’Œbetweenè¿™äº›æ¯”è¾ƒæ“ä½œç¬¦ä¸Šï¼Œè¿˜å¯ä»¥ç”¨äºlikeæ“ä½œç¬¦ï¼Œåªè¦å®ƒçš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªä¸ä»¥é€šé…ç¬¦å¼€å¤´çš„å¸¸é‡ï¼Œ ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- åªè¦å®ƒçš„æŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªä¸ä»¥é€šé…ç¬¦å¼€å¤´çš„å¸¸é‡</span><br><span class="line">select * from user where name like &#39;jack%&#39;; </span><br><span class="line">-- å¦‚æœä¸€é€šé…ç¬¦å¼€å¤´ï¼Œæˆ–è€…æ²¡æœ‰ä½¿ç”¨å¸¸é‡ï¼Œåˆ™ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œä¾‹å¦‚ï¼š </span><br><span class="line">select * from user where name like &#39;%jack&#39;;</span><br></pre></td></tr></table></figure>
<p><strong>B+ treeæ€§è´¨ï¼š</strong></p>
<ol>
<li>næ£µå­treeçš„èŠ‚ç‚¹åŒ…å«nä¸ªå…³é”®å­—ï¼Œä¸ç”¨æ¥ä¿å­˜æ•°æ®è€Œæ˜¯ä¿å­˜æ•°æ®çš„ç´¢å¼•ã€‚</li>
<li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¸­åŒ…å«äº†å…¨éƒ¨å…³é”®å­—çš„ä¿¡æ¯ï¼ŒåŠæŒ‡å‘å«è¿™äº›å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚</li>
<li>æ‰€æœ‰çš„éç»ˆç«¯ç»“ç‚¹å¯ä»¥çœ‹æˆæ˜¯ç´¢å¼•éƒ¨åˆ†ï¼Œç»“ç‚¹ä¸­ä»…å«å…¶å­æ ‘ä¸­çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…³é”®å­—ã€‚</li>
<li>B+ æ ‘ä¸­ï¼Œæ•°æ®å¯¹è±¡çš„æ’å…¥å’Œåˆ é™¤ä»…åœ¨å¶èŠ‚ç‚¹ä¸Šè¿›è¡Œã€‚</li>
<li>B+ æ ‘æœ‰2ä¸ªå¤´æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯æœ€å°å…³é”®ç çš„å¶èŠ‚ç‚¹ã€‚</li>
</ol>
<h4 id="Bæ ‘å’ŒB-æ ‘çš„åŒºåˆ«"><a href="#Bæ ‘å’ŒB-æ ‘çš„åŒºåˆ«" class="headerlink" title="Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«"></a>Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«</h4><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>B tree</th>
<th>B+ tree</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><strong>å†…éƒ¨èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹å­˜æ”¾é”®å’Œå€¼</strong>    æŠŠé¢‘ç¹è®¿é—®çš„æ•°æ®æ”¾åœ¨é è¿‘æ ¹èŠ‚ç‚¹çš„åœ°æ–¹å¯ä»¥æé«˜çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ã€‚</td>
<td><strong>å†…éƒ¨èŠ‚ç‚¹éƒ½æ˜¯é”®ï¼Œæ²¡æœ‰å€¼ï¼Œå¶å­èŠ‚ç‚¹åŒæ—¶å­˜æ”¾é”®å’Œå€¼ </strong>    å› æ­¤ä¸€æ¬¡è¯»å–å¯ä»¥åœ¨å†…å­˜é¡µä¸­è·å–æ›´å¤šçš„é”®ï¼Œæœ‰åˆ©äºæ›´å¿«åœ°ç¼©å°æŸ¥æ‰¾èŒƒå›´,ç©ºé—´åˆ©ç”¨ç‡æ›´é«˜ï¼Œå¯å‡å°‘I/Oæ¬¡æ•°ï¼Œç£ç›˜è¯»å†™ä»£ä»·æ›´ä½ï¼ˆå› ä¸ºç´¢å¼•æœ¬èº«å¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨çš„ç£ç›˜ä¸Šï¼‰</td>
</tr>
<tr>
<td></td>
<td><strong>å¶å­èŠ‚ç‚¹å„è‡ªç‹¬ç«‹</strong>  éå†æ—¶éœ€è¦å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†ï¼Œéœ€è¦æ›´å¤šçš„å†…å­˜ç½®æ¢æ¬¡æ•°ï¼ŒèŠ±è´¹æ›´å¤šçš„æ—¶é—´</td>
<td><strong>å¶å­èŠ‚ç‚¹æœ‰ä¸€æ¡é“¾ç›¸è¿</strong>    å½“éœ€è¦è¿›è¡Œä¸€æ¬¡å…¨æ•°æ®éå†çš„æ—¶å€™ï¼ŒB+æ ‘åªéœ€è¦ä½¿ç”¨O(logN)æ—¶é—´æ‰¾åˆ°æœ€å°çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡é“¾è¿›è¡ŒO(N)çš„é¡ºåºéå†å³å¯ã€‚</td>
</tr>
<tr>
<td></td>
<td>åªé€‚åˆéšæœºæ£€ç´¢</td>
<td>åŒæ—¶æ”¯æŒéšæœºæ£€ç´¢å’Œé¡ºåºæ£€ç´¢</td>
</tr>
<tr>
<td></td>
<td>Bæ ‘æœç´¢æœ‰å¯èƒ½ä¼šåœ¨éå¶å­ç»“ç‚¹ç»“æŸï¼Œè¶Šé è¿‘æ ¹èŠ‚ç‚¹çš„è®°å½•æŸ¥æ‰¾æ—¶é—´è¶ŠçŸ­ï¼Œåªè¦æ‰¾åˆ°å…³é”®å­—å³å¯ç¡®å®šè®°å½•çš„å­˜åœ¨ï¼Œå…¶æ€§èƒ½ç­‰ä»·äºåœ¨å…³é”®å­—å…¨é›†å†…åšä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ã€‚</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®š</strong>    é¡ºåºæ£€ç´¢æ¯”è¾ƒæ˜æ˜¾ï¼Œéšæœºæ£€ç´¢æ—¶ï¼Œä»»ä½•å…³é”®å­—çš„æŸ¥æ‰¾éƒ½å¿…é¡»èµ°ä¸€æ¡ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯ï¼Œæ‰€æœ‰å…³é”®å­—çš„æŸ¥æ‰¾è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå¯¼è‡´æ¯ä¸€ä¸ªå…³é”®å­—çš„æŸ¥è¯¢æ•ˆç‡ç›¸å½“ã€‚</td>
</tr>
</tbody>
</table>
</div>
<h4 id="å“ˆå¸Œç´¢å¼•"><a href="#å“ˆå¸Œç´¢å¼•" class="headerlink" title="å“ˆå¸Œç´¢å¼•"></a>å“ˆå¸Œç´¢å¼•</h4><p>ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­ç®€å•å®ç°çš„HASHè¡¨ï¼ˆæ•£åˆ—è¡¨ï¼‰ä¸€æ ·ï¼Œåœ¨mysqlä¸­ç”¨å“ˆå¸Œç´¢å¼•æ—¶ï¼Œä¸»è¦å°±æ˜¯é€šè¿‡Hashç®—æ³•ï¼ˆå¸¸è§çš„Hashç®—æ³•æœ‰ç›´æ¥å®šå€æ³•ã€å¹³æ–¹å–ä¸­æ³•ã€æŠ˜å æ³•ã€é™¤æ•°å–ä½™æ³•ã€éšæœºæ•°æ³•ï¼‰ï¼Œå°†æ•°æ®åº“å­—æ®µæ•°æ®è½¬æ¢æˆå®šé•¿çš„Hashå€¼ï¼Œä¸è¿™æ¡æ•°æ®çš„è¡ŒæŒ‡é’ˆä¸€å¹¶å­˜å…¥Hashè¡¨çš„å¯¹åº”ä½ç½®ï¼›å¦‚æœå‘ç”ŸHashç¢°æ’ï¼ˆä¸¤ä¸ªä¸åŒå…³é”®å­—çš„Hashå€¼ç›¸åŒï¼‰ï¼Œåˆ™åœ¨å¯¹åº”Hashé”®ä¸‹ä»¥é“¾è¡¨å½¢å¼å­˜å‚¨ã€‚</p>
<p>Hashç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼Œä¾‹å¦‚=,&lt;=&gt;ï¼ˆç›¸å½“äº=ï¼‰æ“ä½œç¬¦ã€‚ç”±äºæ˜¯ä¸€æ¬¡å®šä½æ•°æ®ï¼Œä¸åƒBTreeç´¢å¼•éœ€è¦ä»æ ¹èŠ‚ç‚¹åˆ°æèŠ‚ç‚¹ï¼Œæœ€åæ‰èƒ½è®¿é—®åˆ°é¡µèŠ‚ç‚¹è¿™æ ·å¤šæ¬¡IOè®¿é—®ï¼Œæ‰€ä»¥æ£€ç´¢æ•ˆç‡è¿œé«˜äºB Treeç´¢å¼•ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>item</th>
<th>Hash</th>
<th>B+ tree</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº•å±‚å®ç°åŸç†</td>
<td>hashç´¢å¼•åº•å±‚å°±æ˜¯hashè¡¨ï¼Œè¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œè°ƒç”¨ä¸€æ¬¡hashå‡½æ•°å°±å¯ä»¥è·å–åˆ°ç›¸åº”çš„é”®å€¼ï¼Œä¹‹åè¿›è¡Œå›è¡¨æŸ¥è¯¢è·å¾—å®é™…æ•°æ®ã€‚</td>
<td>B+æ ‘åº•å±‚å®ç°æ˜¯å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚å¯¹äºæ¯ä¸€æ¬¡çš„æŸ¥è¯¢éƒ½æ˜¯ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼ŒæŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹æ–¹å¯ä»¥è·å¾—æ‰€æŸ¥é”®å€¼ï¼Œç„¶åæ ¹æ®æŸ¥è¯¢åˆ¤æ–­æ˜¯å¦éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ã€‚</td>
</tr>
<tr>
<td></td>
<td>hashç´¢å¼•è¿›è¡Œç­‰å€¼æŸ¥è¯¢æ›´å¿«(ä¸€èˆ¬æƒ…å†µä¸‹)ï¼Œä½†æ˜¯å´æ— æ³•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ã€‚</td>
<td></td>
</tr>
<tr>
<td></td>
<td>ç»è¿‡hashå‡½æ•°å»ºç«‹ç´¢å¼•ä¹‹åï¼Œç´¢å¼•çš„é¡ºåºä¸åŸé¡ºåºæ— æ³•ä¿æŒä¸€è‡´ï¼Œä¸èƒ½æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚ä¸æ”¯æŒä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åºï¼Œ ä¸æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ä»¥åŠå¤šåˆ—ç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…ï¼ˆå› ä¸ºhashå‡½æ•°çš„ä¸å¯é¢„æµ‹ã€‚AAAAå’ŒAAAABçš„ç´¢å¼•æ²¡æœ‰ç›¸å…³æ€§ã€‚ï¼‰</td>
<td></td>
</tr>
<tr>
<td></td>
<td>hashç´¢å¼•è™½ç„¶åœ¨ç­‰å€¼æŸ¥è¯¢ä¸Šè¾ƒå¿«ï¼Œä½†æ˜¯ä¸ç¨³å®šã€‚æ€§èƒ½ä¸å¯é¢„æµ‹ï¼Œå½“æŸä¸ªé”®å€¼å­˜åœ¨å¤§é‡é‡å¤çš„æ—¶å€™ï¼Œå‘ç”Ÿhashç¢°æ’ï¼Œæ­¤æ—¶æ•ˆç‡å¯èƒ½æå·®ã€‚</td>
<td>B+æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ¯”è¾ƒç¨³å®šï¼Œå¯¹äºæ‰€æœ‰çš„æŸ¥è¯¢éƒ½æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œä¸”æ ‘çš„é«˜åº¦è¾ƒä½</td>
</tr>
</tbody>
</table>
</div>
<h3 id="å‰ç¼€ç´¢å¼•"><a href="#å‰ç¼€ç´¢å¼•" class="headerlink" title="å‰ç¼€ç´¢å¼•"></a>å‰ç¼€ç´¢å¼•</h3><p>è¯­æ³•ï¼šindex(field(10))ï¼Œä½¿ç”¨å­—æ®µå€¼çš„å‰10ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨å­—æ®µçš„å…¨éƒ¨å†…å®¹å»ºç«‹ç´¢å¼•ã€‚</p>
<p>å‰æï¼šå‰ç¼€çš„æ ‡è¯†åº¦é«˜ã€‚æ¯”å¦‚å¯†ç å°±é€‚åˆå»ºç«‹å‰ç¼€ç´¢å¼•ï¼Œå› ä¸ºå¯†ç å‡ ä¹å„ä¸ç›¸åŒã€‚</p>
<p>å®æ“çš„éš¾åº¦ï¼šåœ¨äºå‰ç¼€æˆªå–çš„é•¿åº¦ã€‚</p>
<p>å¯ä»¥åˆ©ç”¨<code>select count(*)/count(distinct left(password,prefixLen))</code>;ï¼Œé€šè¿‡ä»è°ƒæ•´prefixLençš„å€¼ï¼ˆä»1è‡ªå¢ï¼‰æŸ¥çœ‹ä¸åŒå‰ç¼€é•¿åº¦çš„ä¸€ä¸ªå¹³å‡åŒ¹é…åº¦ï¼Œæ¥è¿‘1æ—¶å°±å¯ä»¥äº†ï¼ˆè¡¨ç¤ºä¸€ä¸ªå¯†ç çš„å‰prefixLenä¸ªå­—ç¬¦å‡ ä¹èƒ½ç¡®å®šå”¯ä¸€ä¸€æ¡è®°å½•ï¼‰</p>
<h3 id="æœ€å·¦å‰ç¼€åŸåˆ™-amp-æœ€å·¦åŒ¹é…åŸåˆ™"><a href="#æœ€å·¦å‰ç¼€åŸåˆ™-amp-æœ€å·¦åŒ¹é…åŸåˆ™" class="headerlink" title="æœ€å·¦å‰ç¼€åŸåˆ™&amp;æœ€å·¦åŒ¹é…åŸåˆ™"></a>æœ€å·¦å‰ç¼€åŸåˆ™&amp;æœ€å·¦åŒ¹é…åŸåˆ™</h3><p>æœ€å·¦ä¼˜å…ˆï¼Œåœ¨åˆ›å»ºå¤šåˆ—ç´¢å¼•æ—¶ï¼Œè¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œwhereå­å¥ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€åˆ—æ”¾åœ¨æœ€å·¦è¾¹ã€‚</p>
<p>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œéå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysqlä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚=å’Œinå¯ä»¥ä¹±åºï¼Œæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼</p>
<h3 id="åˆ›å»ºç´¢å¼•çš„åŸåˆ™"><a href="#åˆ›å»ºç´¢å¼•çš„åŸåˆ™" class="headerlink" title="åˆ›å»ºç´¢å¼•çš„åŸåˆ™"></a>åˆ›å»ºç´¢å¼•çš„åŸåˆ™</h3><ol>
<li>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼šç»„åˆç´¢å¼•éå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysqlä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)åœæ­¢åŒ¹é…</li>
<li>è¾ƒé¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µæ‰å»åˆ›å»ºç´¢å¼•, å¯¹äºé‚£äº›æŸ¥è¯¢ä¸­å¾ˆå°‘æ¶‰åŠçš„åˆ—ï¼Œé‡å¤å€¼æ¯”è¾ƒå¤šçš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ã€‚</li>
<li>æ›´æ–°é¢‘ç¹å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼•</li>
<li>ä¸èƒ½æœ‰æ•ˆåŒºåˆ†æ•°æ®çš„åˆ—ä¸é€‚åˆåšç´¢å¼•åˆ—(å¦‚æ€§åˆ«ï¼Œç”·å¥³æœªçŸ¥ï¼Œæœ€å¤šä¹Ÿå°±ä¸‰ç§ï¼ŒåŒºåˆ†åº¦å®åœ¨å¤ªä½)</li>
<li>å°½é‡æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•ã€‚æ¯”å¦‚è¡¨ä¸­å·²ç»æœ‰açš„ç´¢å¼•ï¼Œç°åœ¨è¦åŠ (a,b)çš„ç´¢å¼•ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿®æ”¹åŸæ¥çš„ç´¢å¼•å³å¯ã€‚</li>
<li>å®šä¹‰æœ‰å¤–é”®çš„æ•°æ®åˆ—ä¸€å®šè¦å»ºç«‹ç´¢å¼•ã€‚</li>
<li>å¯¹äºå®šä¹‰ä¸ºtextã€imageå’Œbitçš„æ•°æ®ç±»å‹çš„åˆ—ä¸è¦å»ºç«‹ç´¢å¼•ã€‚</li>
</ol>
<h3 id="åˆ›å»ºï¼Œåˆ é™¤ç´¢å¼•"><a href="#åˆ›å»ºï¼Œåˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ›å»ºï¼Œåˆ é™¤ç´¢å¼•"></a>åˆ›å»ºï¼Œåˆ é™¤ç´¢å¼•</h3><h4 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h4><ul>
<li>éç©ºå­—æ®µï¼šåº”è¯¥æŒ‡å®šåˆ—ä¸ºNOT NULLï¼Œé™¤éæƒ³å­˜å‚¨NULLã€‚åœ¨mysqlä¸­ï¼Œå«æœ‰ç©ºå€¼çš„åˆ—å¾ˆéš¾è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬ä½¿å¾—ç´¢å¼•ã€ç´¢å¼•çš„ç»Ÿè®¡ä¿¡æ¯ä»¥åŠæ¯”è¾ƒè¿ç®—æ›´åŠ å¤æ‚ã€‚åº”è¯¥ç”¨0ã€ä¸€ä¸ªç‰¹æ®Šçš„å€¼æˆ–è€…ä¸€ä¸ªç©ºä¸²ä»£æ›¿ç©ºå€¼ï¼›</li>
<li>å–å€¼ç¦»æ•£å¤§çš„å­—æ®µï¼šï¼ˆå˜é‡å„ä¸ªå–å€¼ä¹‹é—´çš„å·®å¼‚ç¨‹åº¦ï¼‰çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å‰é¢ï¼Œå¯ä»¥é€šè¿‡count()å‡½æ•°æŸ¥çœ‹å­—æ®µçš„å·®å¼‚å€¼ï¼Œè¿”å›å€¼è¶Šå¤§è¯´æ˜å­—æ®µçš„å”¯ä¸€å€¼è¶Šå¤šï¼Œå­—æ®µçš„ç¦»æ•£ç¨‹åº¦é«˜ï¼›</li>
<li>ç´¢å¼•å­—æ®µè¶Šå°è¶Šå¥½ï¼šæ•°æ®åº“çš„æ•°æ®å­˜å‚¨ä»¥é¡µä¸ºå•ä½ä¸€é¡µå­˜å‚¨çš„æ•°æ®è¶Šå¤šä¸€æ¬¡IOæ“ä½œè·å–çš„æ•°æ®è¶Šå¤§æ•ˆç‡è¶Šé«˜ã€‚</li>
</ul>
<h5 id="åœ¨æ‰§è¡ŒCREATE-TABLEæ—¶åˆ›å»ºç´¢å¼•"><a href="#åœ¨æ‰§è¡ŒCREATE-TABLEæ—¶åˆ›å»ºç´¢å¼•" class="headerlink" title="åœ¨æ‰§è¡ŒCREATE TABLEæ—¶åˆ›å»ºç´¢å¼•"></a>åœ¨æ‰§è¡ŒCREATE TABLEæ—¶åˆ›å»ºç´¢å¼•</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE user_index2 (</span><br><span class="line">	id INT auto_increment PRIMARY KEY,</span><br><span class="line">	first_name VARCHAR (16),</span><br><span class="line">	last_name VARCHAR (16),</span><br><span class="line">	id_card VARCHAR (18),</span><br><span class="line">	information text,</span><br><span class="line">	KEY name (first_name, last_name),</span><br><span class="line">	FULLTEXT KEY (information),</span><br><span class="line">	UNIQUE KEY (id_card)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="ä½¿ç”¨ALTER-TABLEå‘½ä»¤å»å¢åŠ ç´¢å¼•"><a href="#ä½¿ç”¨ALTER-TABLEå‘½ä»¤å»å¢åŠ ç´¢å¼•" class="headerlink" title="ä½¿ç”¨ALTER TABLEå‘½ä»¤å»å¢åŠ ç´¢å¼•"></a>ä½¿ç”¨ALTER TABLEå‘½ä»¤å»å¢åŠ ç´¢å¼•</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE table_name ADD INDEX index_name (column_list);</span><br></pre></td></tr></table></figure>
<p>ALTER TABLEç”¨æ¥åˆ›å»ºæ™®é€šç´¢å¼•ã€UNIQUEç´¢å¼•æˆ–PRIMARY KEYç´¢å¼•ã€‚</p>
<p>å…¶ä¸­table_nameæ˜¯è¦å¢åŠ ç´¢å¼•çš„è¡¨åï¼Œcolumn_listæŒ‡å‡ºå¯¹å“ªäº›åˆ—è¿›è¡Œç´¢å¼•ï¼Œå¤šåˆ—æ—¶å„åˆ—ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚</p>
<p>ç´¢å¼•åindex_nameå¯è‡ªå·±å‘½åï¼Œç¼ºçœæ—¶ï¼ŒMySQLå°†æ ¹æ®ç¬¬ä¸€ä¸ªç´¢å¼•åˆ—èµ‹ä¸€ä¸ªåç§°ã€‚å¦å¤–ï¼ŒALTER TABLEå…è®¸åœ¨å•ä¸ªè¯­å¥ä¸­æ›´æ”¹å¤šä¸ªè¡¨ï¼Œå› æ­¤å¯ä»¥åœ¨åŒæ—¶åˆ›å»ºå¤šä¸ªç´¢å¼•ã€‚</p>
<h5 id="ä½¿ç”¨CREATE-INDEXå‘½ä»¤åˆ›å»º"><a href="#ä½¿ç”¨CREATE-INDEXå‘½ä»¤åˆ›å»º" class="headerlink" title="ä½¿ç”¨CREATE INDEXå‘½ä»¤åˆ›å»º"></a>ä½¿ç”¨CREATE INDEXå‘½ä»¤åˆ›å»º</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE INDEX index_name ON table_name (column_list);</span><br></pre></td></tr></table></figure>
<p>CREATE INDEXå¯å¯¹è¡¨å¢åŠ æ™®é€šç´¢å¼•æˆ–UNIQUEç´¢å¼•ã€‚ï¼ˆä½†æ˜¯ï¼Œä¸èƒ½åˆ›å»ºPRIMARY KEYç´¢å¼•ï¼‰</p>
<h4 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h4><p>æ ¹æ®ç´¢å¼•ååˆ é™¤æ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ï¼š<code>alter table è¡¨å drop KEY ç´¢å¼•å</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table user_index drop KEY name;</span><br><span class="line">alter table user_index drop KEY id_card;</span><br><span class="line">alter table user_index drop KEY information;</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ä¸»é”®ç´¢å¼•ï¼š<code>alter table è¡¨å drop primary key</code>ï¼ˆå› ä¸ºä¸»é”®åªæœ‰ä¸€ä¸ªï¼‰ã€‚è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸»é”®è‡ªå¢é•¿ï¼Œé‚£ä¹ˆä¸èƒ½ç›´æ¥æ‰§è¡Œæ­¤æ“ä½œï¼ˆè‡ªå¢é•¿ä¾èµ–äºä¸»é”®ç´¢å¼•ï¼‰ï¼Œéœ€è¦å–æ¶ˆè‡ªå¢é•¿å†è¡Œåˆ é™¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table user_index</span><br><span class="line">-- é‡æ–°å®šä¹‰å­—æ®µ</span><br><span class="line">MODIFY id int,</span><br><span class="line">drop PRIMARY KEY</span><br></pre></td></tr></table></figure>
<p>ä½†é€šå¸¸ä¸ä¼šåˆ é™¤ä¸»é”®ï¼Œå› ä¸ºè®¾è®¡ä¸»é”®ä¸€å®šä¸ä¸šåŠ¡é€»è¾‘æ— å…³ã€‚</p>
<h3 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><h4 id="ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ"><a href="#ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ"></a>ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿ</h4><p>é€šå¸¸ï¼Œé€šè¿‡ç´¢å¼•æŸ¥è¯¢æ•°æ®æ¯”å…¨è¡¨æ‰«æè¦å¿«ã€‚ä½†æ˜¯å®ƒä¹Ÿæœ‰ä»£ä»·ã€‚</p>
<p>ç´¢å¼•éœ€è¦ç©ºé—´æ¥å­˜å‚¨ï¼Œä¹Ÿéœ€è¦å®šæœŸç»´æŠ¤ï¼Œ æ¯å½“æœ‰è®°å½•åœ¨è¡¨ä¸­å¢å‡æˆ–ç´¢å¼•åˆ—è¢«ä¿®æ”¹æ—¶ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ è¿™æ„å‘³ç€æ¯æ¡è®°å½•çš„INSERTï¼ŒDELETEï¼ŒUPDATEå°†ä¸ºæ­¤å¤šä»˜å‡º4ï¼Œ5 æ¬¡çš„ç£ç›˜I/Oã€‚ å› ä¸ºç´¢å¼•éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´å’Œå¤„ç†ï¼Œä¸å¿…è¦çš„ç´¢å¼•åè€Œä¼šä½¿æŸ¥è¯¢ååº”æ—¶é—´å˜æ…¢ã€‚</p>
<p>ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸ä¸€å®šèƒ½æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç´¢å¼•èŒƒå›´æŸ¥è¯¢(INDEX RANGE SCAN)é€‚ç”¨äºä¸¤ç§æƒ…å†µ:</p>
<ul>
<li>åŸºäºä¸€ä¸ªèŒƒå›´çš„æ£€ç´¢ï¼Œä¸€èˆ¬æŸ¥è¯¢è¿”å›ç»“æœé›†å°äºè¡¨ä¸­è®°å½•æ•°çš„30%</li>
<li>åŸºäºéå”¯ä¸€æ€§ç´¢å¼•çš„æ£€ç´¢</li>
</ul>
<h4 id="å¦‚ä½•åˆ é™¤ç™¾ä¸‡çº§åˆ«æˆ–ä»¥ä¸Šçš„æ•°æ®"><a href="#å¦‚ä½•åˆ é™¤ç™¾ä¸‡çº§åˆ«æˆ–ä»¥ä¸Šçš„æ•°æ®" class="headerlink" title="å¦‚ä½•åˆ é™¤ç™¾ä¸‡çº§åˆ«æˆ–ä»¥ä¸Šçš„æ•°æ®"></a>å¦‚ä½•åˆ é™¤ç™¾ä¸‡çº§åˆ«æˆ–ä»¥ä¸Šçš„æ•°æ®</h4><p>å¯¹æ•°æ®çš„å¢åŠ ,ä¿®æ”¹,åˆ é™¤,éƒ½ä¼šäº§ç”Ÿé¢å¤–çš„å¯¹ç´¢å¼•æ–‡ä»¶çš„æ“ä½œ,è¿™äº›æ“ä½œéœ€è¦æ¶ˆè€—é¢å¤–çš„IO,ä¼šé™ä½å¢/æ”¹/åˆ çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>è¦åˆ é™¤ç™¾ä¸‡æ•°æ®æ—¶</p>
<ol>
<li>å…ˆåˆ é™¤ç´¢å¼•ï¼ˆæ­¤æ—¶å¤§æ¦‚è€—æ—¶ä¸‰åˆ†å¤šé’Ÿï¼‰</li>
<li>åˆ é™¤å…¶ä¸­æ— ç”¨æ•°æ®ï¼ˆæ­¤è¿‡ç¨‹éœ€è¦ä¸åˆ°ä¸¤åˆ†é’Ÿï¼‰</li>
<li>é‡æ–°åˆ›å»ºç´¢å¼•(æ­¤æ—¶æ•°æ®è¾ƒå°‘äº†)åˆ›å»ºç´¢å¼•ä¹Ÿéå¸¸å¿«ï¼Œçº¦ååˆ†é’Ÿå·¦å³ã€‚</li>
</ol>
<h4 id="èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•"><a href="#èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•" class="headerlink" title="èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•"></a>èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•</h4><p>èšç°‡ç´¢å¼•ï¼šå°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾åˆ°äº†ä¸€å—ï¼Œæ‰¾åˆ°ç´¢å¼•ä¹Ÿå°±æ‰¾åˆ°äº†æ•°æ®<br>éèšç°‡ç´¢å¼•ï¼šå°†æ•°æ®å­˜å‚¨äºç´¢å¼•åˆ†å¼€ç»“æ„ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹æŒ‡å‘äº†æ•°æ®çš„å¯¹åº”è¡Œï¼Œmyisamé€šè¿‡key_bufferæŠŠç´¢å¼•å…ˆç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå½“éœ€è¦è®¿é—®æ•°æ®æ—¶ï¼ˆé€šè¿‡ç´¢å¼•è®¿é—®æ•°æ®ï¼‰ï¼Œåœ¨å†…å­˜ä¸­ç›´æ¥æœç´¢ç´¢å¼•ï¼Œç„¶åé€šè¿‡ç´¢å¼•æ‰¾åˆ°ç£ç›˜ç›¸åº”æ•°æ®ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆç´¢å¼•ä¸åœ¨key bufferå‘½ä¸­æ—¶ï¼Œé€Ÿåº¦æ…¢çš„åŸå› ã€‚</p>
<p>B+æ ‘åœ¨æ»¡è¶³èšç°‡ç´¢å¼•å’Œè¦†ç›–ç´¢å¼•çš„æ—¶å€™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®ï¼Œ</p>
<h4 id="éèšç°‡ç´¢å¼•ä¸€å®šä¼šå›è¡¨æŸ¥è¯¢å—ï¼Ÿ"><a href="#éèšç°‡ç´¢å¼•ä¸€å®šä¼šå›è¡¨æŸ¥è¯¢å—ï¼Ÿ" class="headerlink" title="éèšç°‡ç´¢å¼•ä¸€å®šä¼šå›è¡¨æŸ¥è¯¢å—ï¼Ÿ"></a>éèšç°‡ç´¢å¼•ä¸€å®šä¼šå›è¡¨æŸ¥è¯¢å—ï¼Ÿ</h4><p>ä¸ä¸€å®šï¼Œè¿™æ¶‰åŠåˆ°æŸ¥è¯¢è¯­å¥æ‰€è¦æ±‚çš„å­—æ®µæ˜¯å¦å…¨éƒ¨å‘½ä¸­äº†ç´¢å¼•ï¼Œå¦‚æœå…¨éƒ¨å‘½ä¸­äº†ç´¢å¼•ï¼Œé‚£ä¹ˆå°±ä¸å¿…å†è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬åœ¨å‘˜å·¥è¡¨çš„å¹´é¾„ä¸Šå»ºç«‹äº†ç´¢å¼•ï¼Œé‚£ä¹ˆå½“è¿›è¡Œ<code>select age from employee where age &lt; 20</code>çš„æŸ¥è¯¢æ—¶ï¼Œåœ¨ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå·²ç»åŒ…å«äº†ageä¿¡æ¯ï¼Œä¸ä¼šå†æ¬¡è¿›è¡Œå›è¡¨æŸ¥è¯¢ã€‚</p>
<h4 id="è”åˆç´¢å¼•"><a href="#è”åˆç´¢å¼•" class="headerlink" title="è”åˆç´¢å¼•"></a>è”åˆç´¢å¼•</h4><p>MySQLå¯ä»¥ä½¿ç”¨å¤šä¸ªå­—æ®µåŒæ—¶å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œå«åšè”åˆç´¢å¼•ã€‚åœ¨è”åˆç´¢å¼•ä¸­ï¼Œå¦‚æœæƒ³è¦å‘½ä¸­ç´¢å¼•ï¼Œéœ€è¦æŒ‰ç…§å»ºç«‹ç´¢å¼•æ—¶çš„å­—æ®µé¡ºåºæŒ¨ä¸ªä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•å‘½ä¸­ç´¢å¼•ã€‚</p>
<h4 id="ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ</h4><p>MySQLä½¿ç”¨ç´¢å¼•æ—¶éœ€è¦ç´¢å¼•æœ‰åºï¼Œå‡è®¾ç°åœ¨å»ºç«‹äº†â€nameï¼Œageï¼Œschoolâ€çš„è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•çš„æ’åºä¸º: å…ˆæŒ‰ç…§nameæ’åºï¼Œå¦‚æœnameç›¸åŒï¼Œåˆ™æŒ‰ç…§ageæ’åºï¼Œå¦‚æœageçš„å€¼ä¹Ÿç›¸ç­‰ï¼Œåˆ™æŒ‰ç…§schoolè¿›è¡Œæ’åºã€‚</p>
<p>å½“è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œæ­¤æ—¶ç´¢å¼•ä»…ä»…æŒ‰ç…§nameä¸¥æ ¼æœ‰åºï¼Œå› æ­¤å¿…é¡»é¦–å…ˆä½¿ç”¨nameå­—æ®µè¿›è¡Œç­‰å€¼æŸ¥è¯¢ï¼Œä¹‹åå¯¹äºåŒ¹é…åˆ°çš„åˆ—è€Œè¨€ï¼Œå…¶æŒ‰ç…§ageå­—æ®µä¸¥æ ¼æœ‰åºï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ageå­—æ®µç”¨åšç´¢å¼•æŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤åœ¨å»ºç«‹è”åˆç´¢å¼•çš„æ—¶å€™åº”è¯¥æ³¨æ„ç´¢å¼•åˆ—çš„é¡ºåºï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°†æŸ¥è¯¢éœ€æ±‚é¢‘ç¹æˆ–è€…å­—æ®µé€‰æ‹©æ€§é«˜çš„åˆ—æ”¾åœ¨å‰é¢ã€‚æ­¤å¤–å¯ä»¥æ ¹æ®ç‰¹ä¾‹çš„æŸ¥è¯¢æˆ–è€…è¡¨ç»“æ„è¿›è¡Œå•ç‹¬çš„è°ƒæ•´ã€‚</p>
<h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><h3 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡"><a href="#ä»€ä¹ˆæ˜¯äº‹åŠ¡" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹åŠ¡"></a>ä»€ä¹ˆæ˜¯äº‹åŠ¡</h3><p>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•°æ®åº“æ“ä½œåºåˆ—ï¼Œä¹Ÿæ˜¯æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ï¼Œå…¶æ‰§è¡Œçš„ç»“æœå¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€å˜åˆ°å¦ä¸€ç§ä¸€è‡´æ€§çŠ¶æ€ã€‚</p>
<p>äº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå•å…ƒçš„å·¥ä½œï¼Œè¦ä¹ˆå…¨åšï¼Œè¦ä¹ˆå…¨ä¸åšï¼Œäº‹åŠ¡æ˜¯é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œä¿è¯ä¸€ç»„æ•°æ®çš„ä¿®æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</p>
<blockquote>
<p>ä¸¾ä¾‹ï¼šäº‹åŠ¡æœ€ç»å…¸ä¹Ÿç»å¸¸è¢«æ‹¿å‡ºæ¥è¯´ä¾‹å­å°±æ˜¯è½¬è´¦äº†ã€‚</p>
<p>å‡å¦‚å°æ˜è¦ç»™å°çº¢è½¬è´¦ 1000 å…ƒï¼Œè¿™ä¸ªè½¬è´¦ä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªå…³é”®æ“ä½œå°±æ˜¯ï¼šå°†å°æ˜çš„ä½™é¢å‡å°‘ 1000 å…ƒï¼Œå°†å°çº¢çš„ä½™é¢å¢åŠ  1000 å…ƒã€‚ä¸‡ä¸€åœ¨è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´çªç„¶å‡ºç°é”™è¯¯æ¯”å¦‚é“¶è¡Œç³»ç»Ÿå´©æºƒï¼Œå¯¼è‡´å°æ˜ä½™é¢å‡å°‘è€Œå°çº¢çš„ä½™é¢æ²¡æœ‰å¢åŠ ï¼Œè¿™æ ·å°±ä¸å¯¹äº†ã€‚äº‹åŠ¡å°±æ˜¯ä¿è¯è¿™ä¸¤ä¸ªå…³é”®æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½è¦å¤±è´¥ã€‚</p>
</blockquote>
<h3 id="äº‹ç‰©çš„å››å¤§ç‰¹æ€§-ACID"><a href="#äº‹ç‰©çš„å››å¤§ç‰¹æ€§-ACID" class="headerlink" title="äº‹ç‰©çš„å››å¤§ç‰¹æ€§(ACID)"></a>äº‹ç‰©çš„å››å¤§ç‰¹æ€§(ACID)</h3><p>å…³ç³»æ€§æ•°æ®åº“éœ€è¦éµå¾ªACIDè§„åˆ™ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>åŸå­æ€§ï¼š äº‹åŠ¡æ˜¯æœ€å°çš„æ‰§è¡Œå•ä½ï¼Œä¸å…è®¸åˆ†å‰²ã€‚äº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ï¼›</li>
<li>ä¸€è‡´æ€§ï¼š æ‰§è¡Œäº‹åŠ¡å‰åï¼Œæ•°æ®ä¿æŒä¸€è‡´ï¼Œå¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªæ•°æ®è¯»å–çš„ç»“æœæ˜¯ç›¸åŒçš„ï¼›</li>
<li>éš”ç¦»æ€§ï¼š å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸è¢«å…¶ä»–äº‹åŠ¡æ‰€å¹²æ‰°ï¼Œå„å¹¶å‘äº‹åŠ¡ä¹‹é—´æ•°æ®åº“æ˜¯ç‹¬ç«‹çš„ï¼›</li>
<li>æŒä¹…æ€§ï¼š ä¸€ä¸ªäº‹åŠ¡è¢«æäº¤ä¹‹åã€‚å®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æŒä¹…çš„ï¼Œå³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚</li>
</ul>
<h3 id="è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»"><a href="#è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»" class="headerlink" title="è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»"></a>è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»</h3><ul>
<li>è„è¯»(Drity Read)ï¼šæŸä¸ªäº‹åŠ¡å·²æ›´æ–°ä¸€ä»½æ•°æ®ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡åœ¨æ­¤æ—¶è¯»å–äº†åŒä¸€ä»½æ•°æ®ï¼Œç”±äºæŸäº›åŸå› ï¼Œå‰ä¸€ä¸ªRollBackäº†æ“ä½œï¼Œåˆ™åä¸€ä¸ªäº‹åŠ¡æ‰€è¯»å–çš„æ•°æ®å°±ä¼šæ˜¯ä¸æ­£ç¡®çš„ã€‚</li>
<li>å¹»è¯»(Phantom Read):åœ¨ä¸€ä¸ªäº‹åŠ¡çš„ä¸¤æ¬¡æŸ¥è¯¢ä¸­æ•°æ®ç¬”æ•°ä¸ä¸€è‡´ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ªäº‹åŠ¡æŸ¥è¯¢äº†å‡ åˆ—(Row)æ•°æ®ï¼Œè€Œå¦ä¸€ä¸ªäº‹åŠ¡å´åœ¨æ­¤æ—¶æ’å…¥äº†æ–°çš„å‡ åˆ—æ•°æ®ï¼Œå…ˆå‰çš„äº‹åŠ¡åœ¨æ¥ä¸‹æ¥çš„æŸ¥è¯¢ä¸­ï¼Œå°±ä¼šå‘ç°æœ‰å‡ åˆ—æ•°æ®æ˜¯å®ƒå…ˆå‰æ‰€æ²¡æœ‰çš„ã€‚</li>
<li>ä¸å¯é‡å¤è¯»(Non-repeatable read):åœ¨ä¸€ä¸ªäº‹åŠ¡çš„ä¸¤æ¬¡æŸ¥è¯¢ä¹‹ä¸­æ•°æ®ä¸ä¸€è‡´ï¼Œè¿™å¯èƒ½æ˜¯ä¸¤æ¬¡æŸ¥è¯¢è¿‡ç¨‹ä¸­é—´æ’å…¥äº†ä¸€ä¸ªäº‹åŠ¡æ›´æ–°çš„åŸæœ‰çš„æ•°æ®ã€‚</li>
</ul>
<h3 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h3><p>SQL æ ‡å‡†å®šä¹‰äº†å››ä¸ªéš”ç¦»çº§åˆ«ï¼š</p>
<ol>
<li>READ-UNCOMMITTED(è¯»å–æœªæäº¤)ï¼š æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–å°šæœªæäº¤çš„æ•°æ®å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚</li>
<li>READ-COMMITTED(è¯»å–å·²æäº¤)ï¼š å…è®¸è¯»å–å¹¶å‘äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œå¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</li>
<li>REPEATABLE-READ(å¯é‡å¤è¯»)ï¼š å¯¹åŒä¸€å­—æ®µçš„å¤šæ¬¡è¯»å–ç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®æ˜¯è¢«æœ¬èº«äº‹åŠ¡è‡ªå·±æ‰€ä¿®æ”¹ï¼Œå¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚</li>
<li>SERIALIZABLE(å¯ä¸²è¡ŒåŒ–)ï¼š æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ã€‚æ‰€æœ‰çš„äº‹åŠ¡ä¾æ¬¡é€ä¸ªæ‰§è¡Œï¼Œè¿™æ ·äº‹åŠ¡ä¹‹é—´å°±å®Œå…¨ä¸å¯èƒ½äº§ç”Ÿå¹²æ‰°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚</li>
</ol>
<h2 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h2><h3 id="ä»€ä¹ˆæ˜¯é”"><a href="#ä»€ä¹ˆæ˜¯é”" class="headerlink" title="ä»€ä¹ˆæ˜¯é”"></a>ä»€ä¹ˆæ˜¯é”</h3><p>åœ¨æ‰€æœ‰çš„ DBMS ä¸­ï¼Œ<strong>é”æ˜¯å®ç°äº‹åŠ¡çš„å…³é”®ï¼Œé”å¯ä»¥ä¿è¯äº‹åŠ¡çš„å®Œæ•´æ€§å’Œå¹¶å‘æ€§</strong>ã€‚ä¸ç°å®ç”Ÿæ´»ä¸­é”ä¸€æ ·ï¼Œå®ƒå¯ä»¥æ˜¯æŸäº›æ•°æ®çš„æ‹¥æœ‰è€…ï¼Œåœ¨æŸæ®µæ—¶é—´å†…ä¸èƒ½ä½¿ç”¨æŸäº›æ•°æ®æˆ–æ•°æ®ç»“æ„ã€‚å½“ç„¶é”è¿˜åˆ†çº§åˆ«çš„ã€‚</p>
<h3 id="éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»"><a href="#éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»" class="headerlink" title="éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»"></a>éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»</h3><ol>
<li>åœ¨Read Uncommittedçº§åˆ«ä¸‹ï¼Œè¯»å–æ•°æ®ä¸éœ€è¦åŠ å…±äº«é”ï¼Œè¿™æ ·å°±ä¸ä¼šè·Ÿè¢«ä¿®æ”¹çš„æ•°æ®ä¸Šçš„æ’ä»–é”å†²çª</li>
<li>åœ¨Read Committedçº§åˆ«ä¸‹ï¼Œè¯»æ“ä½œéœ€è¦åŠ å…±äº«é”ï¼Œä½†æ˜¯åœ¨è¯­å¥æ‰§è¡Œå®Œä»¥åé‡Šæ”¾å…±äº«é”ï¼›</li>
<li>åœ¨Repeatable Readçº§åˆ«ä¸‹ï¼Œè¯»æ“ä½œéœ€è¦åŠ å…±äº«é”ï¼Œä½†æ˜¯åœ¨äº‹åŠ¡æäº¤ä¹‹å‰å¹¶ä¸é‡Šæ”¾å…±äº«é”ï¼Œä¹Ÿå°±æ˜¯å¿…é¡»ç­‰å¾…äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åæ‰é‡Šæ”¾å…±äº«é”ã€‚</li>
<li>SERIALIZABLE æ˜¯é™åˆ¶æ€§æœ€å¼ºçš„éš”ç¦»çº§åˆ«ï¼Œå› ä¸ºè¯¥çº§åˆ«é”å®šæ•´ä¸ªèŒƒå›´çš„é”®ï¼Œå¹¶ä¸€ç›´æŒæœ‰é”ï¼Œç›´åˆ°äº‹åŠ¡å®Œæˆã€‚</li>
</ol>
<h3 id="é”çš„åˆ†ç±»"><a href="#é”çš„åˆ†ç±»" class="headerlink" title="é”çš„åˆ†ç±»"></a>é”çš„åˆ†ç±»</h3><h4 id="æŒ‰ç…§é”çš„ç²’åº¦åˆ’åˆ†"><a href="#æŒ‰ç…§é”çš„ç²’åº¦åˆ’åˆ†" class="headerlink" title="æŒ‰ç…§é”çš„ç²’åº¦åˆ’åˆ†"></a>æŒ‰ç…§é”çš„ç²’åº¦åˆ’åˆ†</h4><p>åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼ŒæŒ‰ç…§é”çš„ç²’åº¦æŠŠæ•°æ®åº“é”åˆ†ä¸º<strong>è¡Œçº§é”(INNODBå¼•æ“)ã€è¡¨çº§é”(MYISAMå¼•æ“)å’Œé¡µçº§é”(BDBå¼•æ“ )ã€‚</strong></p>
<p>MyISAMé‡‡ç”¨è¡¨çº§é”(table-level locking)<br>InnoDBæ”¯æŒè¡Œçº§é”(row-level locking)å’Œè¡¨çº§é”ï¼Œé»˜è®¤ä¸ºè¡Œçº§é”</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>è¡Œçº§é”</th>
<th>è¡¨çº§é”</th>
<th>é¡µçº§é”</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mysqlä¸­é”å®šç²’åº¦æœ€ç»†çš„ä¸€ç§é”ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰æ“ä½œçš„è¡Œè¿›è¡ŒåŠ é”</td>
<td>MySQLä¸­é”å®šç²’åº¦æœ€å¤§çš„ä¸€ç§é”ï¼Œè¡¨ç¤ºå¯¹å½“å‰æ“ä½œçš„æ•´å¼ è¡¨åŠ é”ï¼Œå®ƒå®ç°ç®€å•ï¼Œèµ„æºæ¶ˆè€—è¾ƒå°‘ï¼Œè¢«å¤§éƒ¨åˆ†MySQLå¼•æ“æ”¯æŒã€‚æœ€å¸¸ä½¿ç”¨çš„MYISAMä¸INNODBéƒ½æ”¯æŒè¡¨çº§é”å®šã€‚</td>
<td>MySQLä¸­é”å®šç²’åº¦ä»‹äºè¡Œçº§é”å’Œè¡¨çº§é”ä¸­é—´çš„ä¸€ç§é”ã€‚è¡¨çº§é”é€Ÿåº¦å¿«ï¼Œä½†å†²çªå¤šï¼Œè¡Œçº§å†²çªå°‘ï¼Œä½†é€Ÿåº¦æ…¢ã€‚æ‰€ä»¥å–äº†æŠ˜è¡·çš„é¡µçº§ï¼Œä¸€æ¬¡é”å®šç›¸é‚»çš„ä¸€ç»„è®°å½•ã€‚</td>
</tr>
<tr>
<td>å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦ä¹Ÿæœ€é«˜ã€‚</td>
<td>å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å¤§ï¼Œå‘å‡ºé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚</td>
<td>å¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬</td>
</tr>
</tbody>
</table>
</div>
<h4 id="æŒ‰ç…§é”çš„ç±»åˆ«åˆ’åˆ†"><a href="#æŒ‰ç…§é”çš„ç±»åˆ«åˆ’åˆ†" class="headerlink" title="æŒ‰ç…§é”çš„ç±»åˆ«åˆ’åˆ†"></a>æŒ‰ç…§é”çš„ç±»åˆ«åˆ’åˆ†</h4><p><strong>å…±äº«é”</strong>: åˆå«åšè¯»é”ã€‚ å½“ç”¨æˆ·è¦è¿›è¡Œæ•°æ®çš„è¯»å–æ—¶ï¼Œå¯¹æ•°æ®åŠ ä¸Šå…±äº«é”ã€‚å…±äº«é”å¯ä»¥åŒæ—¶åŠ ä¸Šå¤šä¸ªã€‚</p>
<p><strong>æ’ä»–é”</strong>: åˆå«åšå†™é”ã€‚ å½“ç”¨æˆ·è¦è¿›è¡Œæ•°æ®çš„å†™å…¥æ—¶ï¼Œå¯¹æ•°æ®åŠ ä¸Šæ’ä»–é”ã€‚æ’ä»–é”åªå¯ä»¥åŠ ä¸€ä¸ªï¼Œä»–å’Œå…¶ä»–çš„æ’ä»–é”ï¼Œå…±äº«é”éƒ½ç›¸æ–¥ã€‚</p>
<p>ç”¨ä¸Šé¢çš„ä¾‹å­æ¥è¯´å°±æ˜¯ç”¨æˆ·çš„è¡Œä¸ºæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ¥çœ‹æˆ¿ï¼Œå¤šä¸ªç”¨æˆ·ä¸€èµ·çœ‹æˆ¿æ˜¯å¯ä»¥æ¥å—çš„ã€‚ ä¸€ç§æ˜¯çœŸæ­£çš„å…¥ä½ä¸€æ™šï¼Œåœ¨è¿™æœŸé—´ï¼Œæ— è®ºæ˜¯æƒ³å…¥ä½çš„è¿˜æ˜¯æƒ³çœ‹æˆ¿çš„éƒ½ä¸å¯ä»¥ã€‚</p>
<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><p>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡åœ¨åŒä¸€èµ„æºä¸Šç›¸äº’å ç”¨ï¼Œå¹¶è¯·æ±‚é”å®šå¯¹æ–¹çš„èµ„æºï¼Œä»è€Œå¯¼è‡´æ¶æ€§å¾ªç¯çš„ç°è±¡ã€‚</p>
<p>å¸¸è§çš„è§£å†³æ­»é”çš„æ–¹æ³•</p>
<ol>
<li>å¦‚æœä¸åŒç¨‹åºä¼šå¹¶å‘å­˜å–å¤šä¸ªè¡¨ï¼Œå°½é‡çº¦å®šä»¥ç›¸åŒçš„é¡ºåºè®¿é—®è¡¨ï¼Œå¯ä»¥å¤§å¤§é™ä½æ­»é”æœºä¼šã€‚</li>
<li>åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå°½å¯èƒ½åšåˆ°ä¸€æ¬¡é”å®šæ‰€éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œå‡å°‘æ­»é”äº§ç”Ÿæ¦‚ç‡ï¼›</li>
<li>å¯¹äºéå¸¸å®¹æ˜“äº§ç”Ÿæ­»é”çš„ä¸šåŠ¡éƒ¨åˆ†ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å‡çº§é”å®šé¢—ç²’åº¦ï¼Œé€šè¿‡è¡¨çº§é”å®šæ¥å‡å°‘æ­»é”äº§ç”Ÿçš„æ¦‚ç‡ï¼›</li>
<li>å¦‚æœä¸šåŠ¡å¤„ç†ä¸å¥½å¯ä»¥ç”¨åˆ†å¸ƒå¼äº‹åŠ¡é”æˆ–è€…ä½¿ç”¨ä¹è§‚é”</li>
</ol>
<h3 id="æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”"><a href="#æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”" class="headerlink" title="æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”"></a>æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”</h3><p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ä¸­çš„å¹¶å‘æ§åˆ¶çš„ä»»åŠ¡æ˜¯ç¡®ä¿åœ¨å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜å–æ•°æ®åº“ä¸­åŒä¸€æ•°æ®æ—¶ä¸ç ´åäº‹åŠ¡çš„éš”ç¦»æ€§å’Œç»Ÿä¸€æ€§ä»¥åŠæ•°æ®åº“çš„ç»Ÿä¸€æ€§ã€‚<strong>ä¹è§‚å¹¶å‘æ§åˆ¶ï¼ˆä¹è§‚é”ï¼‰å’Œæ‚²è§‚å¹¶å‘æ§åˆ¶ï¼ˆæ‚²è§‚é”ï¼‰æ˜¯å¹¶å‘æ§åˆ¶ä¸»è¦é‡‡ç”¨çš„æŠ€æœ¯æ‰‹æ®µã€‚</strong></p>
<p><strong>æ‚²è§‚é”</strong>ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œã€‚åœ¨æŸ¥è¯¢å®Œæ•°æ®çš„æ—¶å€™å°±æŠŠäº‹åŠ¡é”èµ·æ¥ï¼Œç›´åˆ°æäº¤äº‹åŠ¡ã€‚å®ç°æ–¹å¼ï¼šä½¿ç”¨æ•°æ®åº“ä¸­çš„é”æœºåˆ¶</p>
<blockquote>
<p>å¤šå†™çš„æƒ…å†µï¼Œä¸€èˆ¬ä¼šç»å¸¸äº§ç”Ÿå†²çªï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸Šå±‚åº”ç”¨ä¼šä¸æ–­çš„è¿›è¡Œretryï¼Œè¿™æ ·åå€’æ˜¯é™ä½äº†æ€§èƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬å¤šå†™çš„åœºæ™¯ä¸‹ç”¨æ‚²è§‚é”å°±æ¯”è¾ƒåˆé€‚ã€‚</p>
</blockquote>
<p><strong>ä¹è§‚é”</strong>ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚åœ¨ä¿®æ”¹æ•°æ®çš„æ—¶å€™æŠŠäº‹åŠ¡é”èµ·æ¥ï¼Œé€šè¿‡versionçš„æ–¹å¼æ¥è¿›è¡Œé”å®šã€‚å®ç°æ–¹å¼ï¼šä¸€èˆ¬ä¼šä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ–CASç®—æ³•å®ç°ã€‚</p>
<blockquote>
<p>ä¹è§‚é”é€‚ç”¨äºå†™æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼ˆå¤šè¯»åœºæ™¯ï¼‰ï¼Œå³å†²çªçœŸçš„å¾ˆå°‘å‘ç”Ÿçš„æ—¶å€™ï¼Œè¿™æ ·å¯ä»¥çœå»äº†é”çš„å¼€é”€ï¼ŒåŠ å¤§äº†ç³»ç»Ÿçš„æ•´ä¸ªååé‡ã€‚</p>
</blockquote>
<h3 id="é—®é¢˜ï¼š-1"><a href="#é—®é¢˜ï¼š-1" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><h4 id="MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”"><a href="#MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”" class="headerlink" title="MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”"></a>MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”</h4><p>InnoDBæ˜¯åŸºäºç´¢å¼•æ¥å®Œæˆè¡Œé”</p>
<p>ä¾‹: <code>select * from tab_with_index where id = 1 for update;</code></p>
<p>for update å¯ä»¥æ ¹æ®æ¡ä»¶æ¥å®Œæˆè¡Œé”é”å®šï¼Œå¹¶ä¸” id æ˜¯æœ‰ç´¢å¼•é”®çš„åˆ—ï¼Œå¦‚æœ id ä¸æ˜¯ç´¢å¼•é”®é‚£ä¹ˆInnoDBå°†å®Œæˆè¡¨é”ï¼Œå¹¶å‘å°†æ— ä»è°ˆèµ·ã€‚</p>
<h4 id="InnoDBå­˜å‚¨å¼•æ“çš„é”çš„ç®—æ³•"><a href="#InnoDBå­˜å‚¨å¼•æ“çš„é”çš„ç®—æ³•" class="headerlink" title="InnoDBå­˜å‚¨å¼•æ“çš„é”çš„ç®—æ³•"></a>InnoDBå­˜å‚¨å¼•æ“çš„é”çš„ç®—æ³•</h4><ul>
<li><p>Record lockï¼šå•ä¸ªè¡Œè®°å½•ä¸Šçš„é”</p>
<blockquote>
<p>å½“æŸ¥è¯¢çš„ç´¢å¼•å«æœ‰å”¯ä¸€å±æ€§æ—¶ï¼Œå°†next-key locké™çº§ä¸ºrecord key</p>
</blockquote>
</li>
<li><p>Gap lockï¼šé—´éš™é”ï¼Œé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä¸åŒ…æ‹¬è®°å½•æœ¬èº«</p>
<blockquote>
<p>Gapé”è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†é˜»æ­¢å¤šä¸ªäº‹åŠ¡å°†è®°å½•æ’å…¥åˆ°åŒä¸€èŒƒå›´å†…ï¼Œè¿™ä¼šå¯¼è‡´å¹»è¯»é—®é¢˜<br>æœ‰ä¸¤ç§æ–¹å¼æ˜¾å¼å…³é—­gapé”ï¼šï¼ˆé™¤äº†å¤–é”®çº¦æŸå’Œå”¯ä¸€æ€§æ£€æŸ¥å¤–ï¼Œå…¶ä½™æƒ…å†µä»…ä½¿ç”¨record lockï¼‰</p>
<p> A. å°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRC </p>
<p>B. å°†å‚æ•°innodb_locks_unsafe_for_binlogè®¾ç½®ä¸º1</p>
</blockquote>
</li>
<li><p>Next-key lockï¼šrecord+gap é”å®šä¸€ä¸ªèŒƒå›´ï¼ŒåŒ…å«è®°å½•æœ¬èº«</p>
<blockquote>
<p>Next-locking keyingä¸ºäº†è§£å†³Phantom Problemå¹»è¯»é—®é¢˜</p>
<p>innodbå¯¹äºè¡Œçš„æŸ¥è¯¢ä½¿ç”¨next-key lock</p>
</blockquote>
</li>
</ul>
<h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><h3 id="ä»€ä¹ˆæ˜¯è§†å›¾"><a href="#ä»€ä¹ˆæ˜¯è§†å›¾" class="headerlink" title="ä»€ä¹ˆæ˜¯è§†å›¾"></a>ä»€ä¹ˆæ˜¯è§†å›¾</h3><p>è§†å›¾æœ¬è´¨ä¸Šæ˜¯ä¸€ç§è™šæ‹Ÿè¡¨ï¼Œåœ¨ç‰©ç†ä¸Šæ˜¯ä¸å­˜åœ¨çš„ï¼Œå…·æœ‰å’Œç‰©ç†è¡¨ç›¸åŒçš„åŠŸèƒ½ï¼Œå…¶å†…å®¹ä¸çœŸå®çš„è¡¨ç›¸ä¼¼ï¼ŒåŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰åç§°çš„åˆ—å’Œè¡Œæ•°æ®ï¼Œå¯ä»¥å¯¹è§†å›¾è¿›è¡Œå¢ï¼Œæ”¹ï¼ŒæŸ¥ï¼Œæ“ä½œï¼Œä½†æ˜¯ï¼Œè§†å›¾å¹¶ä¸åœ¨æ•°æ®åº“ä¸­ä»¥å‚¨å­˜çš„æ•°æ®å€¼å½¢å¼å­˜åœ¨ã€‚è¡Œå’Œåˆ—æ•°æ®æ¥è‡ªå®šä¹‰è§†å›¾çš„æŸ¥è¯¢æ‰€å¼•ç”¨åŸºæœ¬è¡¨ï¼Œå¹¶ä¸”åœ¨å…·ä½“å¼•ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾</h3><p>ä¸ºäº†æé«˜å¤æ‚ SQL è¯­å¥çš„å¤ç”¨æ€§å’Œè¡¨æ“ä½œçš„å®‰å…¨æ€§ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæä¾›äº†è§†å›¾ç‰¹æ€§ã€‚è§†å›¾ä½¿å¾—å¼€å‘è€…åªå…³å¿ƒæ„Ÿå…´è¶£çš„æŸäº›ç‰¹å®šæ•°æ®å’Œæ‰€è´Ÿè´£çš„ç‰¹å®šä»»åŠ¡ï¼Œåªèƒ½çœ‹åˆ°è§†å›¾ä¸­æ‰€å®šä¹‰çš„æ•°æ®ï¼Œè€Œä¸æ˜¯è§†å›¾æ‰€å¼•ç”¨è¡¨ä¸­çš„æ•°æ®ï¼Œä»è€Œæé«˜äº†æ•°æ®åº“ä¸­æ•°æ®çš„å®‰å…¨æ€§ã€‚</p>
<h3 id="è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹"><a href="#è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹" class="headerlink" title="è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹"></a>è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹</h3><ol>
<li>è§†å›¾çš„åˆ—å¯ä»¥æ¥è‡ªä¸åŒçš„è¡¨ï¼Œæ˜¯è¡¨çš„æŠ½è±¡å’Œåœ¨é€»è¾‘æ„ä¹‰ä¸Šå»ºç«‹çš„æ–°å…³ç³»ã€‚</li>
<li>è§†å›¾æ˜¯ç”±åŸºæœ¬è¡¨(å®è¡¨)äº§ç”Ÿçš„è¡¨(è™šè¡¨)ã€‚</li>
<li>è§†å›¾çš„å»ºç«‹å’Œåˆ é™¤ä¸å½±å“åŸºæœ¬è¡¨ã€‚</li>
<li>å¯¹è§†å›¾å†…å®¹çš„æ›´æ–°(æ·»åŠ ï¼Œåˆ é™¤å’Œä¿®æ”¹)ç›´æ¥å½±å“åŸºæœ¬è¡¨ã€‚</li>
<li>å½“è§†å›¾æ¥è‡ªå¤šä¸ªåŸºæœ¬è¡¨æ—¶ï¼Œä¸å…è®¸æ·»åŠ å’Œåˆ é™¤æ•°æ®ã€‚</li>
<li>è§†å›¾çš„æ“ä½œåŒ…æ‹¬åˆ›å»ºè§†å›¾ï¼ŒæŸ¥çœ‹è§†å›¾ï¼Œåˆ é™¤è§†å›¾å’Œä¿®æ”¹è§†å›¾ã€‚</li>
</ol>
<h3 id="è§†å›¾çš„ä¼˜ç¼ºç‚¹"><a href="#è§†å›¾çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="è§†å›¾çš„ä¼˜ç¼ºç‚¹"></a>è§†å›¾çš„ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ol>
<li>æŸ¥è¯¢ç®€å•åŒ–ï¼šè§†å›¾èƒ½ç®€åŒ–ç”¨æˆ·çš„æ“ä½œ</li>
<li>æ•°æ®å®‰å…¨æ€§ï¼šè§†å›¾ä½¿ç”¨æˆ·èƒ½ä»¥å¤šç§è§’åº¦çœ‹å¾…åŒä¸€æ•°æ®ï¼Œèƒ½å¤Ÿå¯¹æœºå¯†æ•°æ®æä¾›å®‰å…¨ä¿æŠ¤</li>
<li>é€»è¾‘æ•°æ®ç‹¬ç«‹æ€§ï¼šè§†å›¾å¯¹é‡æ„æ•°æ®åº“æä¾›äº†ä¸€å®šç¨‹åº¦çš„é€»è¾‘ç‹¬ç«‹æ€§</li>
</ol>
<h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ol>
<li>æ€§èƒ½ï¼šæ•°æ®åº“å¿…é¡»æŠŠè§†å›¾çš„æŸ¥è¯¢è½¬åŒ–æˆå¯¹åŸºæœ¬è¡¨çš„æŸ¥è¯¢ï¼Œå¦‚æœè¿™ä¸ªè§†å›¾æ˜¯ç”±ä¸€ä¸ªå¤æ‚çš„å¤šè¡¨æŸ¥è¯¢æ‰€å®šä¹‰ï¼Œé‚£ä¹ˆï¼Œå³ä½¿æ˜¯è§†å›¾çš„ä¸€ä¸ªç®€å•æŸ¥è¯¢ï¼Œæ•°æ®åº“ä¹ŸæŠŠå®ƒå˜æˆä¸€ä¸ªå¤æ‚çš„ç»“åˆä½“ï¼Œéœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´ã€‚</li>
<li>ä¿®æ”¹é™åˆ¶ï¼šå½“ç”¨æˆ·è¯•å›¾ä¿®æ”¹è§†å›¾çš„æŸäº›è¡Œæ—¶ï¼Œæ•°æ®åº“å¿…é¡»æŠŠå®ƒè½¬åŒ–ä¸ºå¯¹åŸºæœ¬è¡¨çš„æŸäº›è¡Œçš„ä¿®æ”¹ã€‚äº‹å®ä¸Šï¼Œå½“ä»è§†å›¾ä¸­æ’å…¥æˆ–è€…åˆ é™¤æ—¶ï¼Œæƒ…å†µä¹Ÿæ˜¯è¿™æ ·ã€‚å¯¹äºç®€å•è§†å›¾æ¥è¯´ï¼Œè¿™æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†æ˜¯ï¼Œå¯¹äºæ¯”è¾ƒå¤æ‚çš„è§†å›¾ï¼Œå¯èƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚</li>
</ol>
<h3 id="é—®é¢˜ï¼š-2"><a href="#é—®é¢˜ï¼š-2" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><h4 id="è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›"><a href="#è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›" class="headerlink" title="è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›"></a>è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›</h4><p>è§†å›¾æ ¹æœ¬ç”¨é€”ï¼šç®€åŒ– SQL æŸ¥è¯¢ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚å…¼å®¹è€çš„è¡¨ç»“æ„ã€‚</p>
<p>å¸¸è§ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>é‡ç”¨ SQL è¯­å¥ï¼›</li>
<li>ç®€åŒ–å¤æ‚çš„ SQL æ“ä½œã€‚åœ¨ç¼–å†™æŸ¥è¯¢åï¼Œå¯ä»¥æ–¹ä¾¿çš„é‡ç”¨å®ƒè€Œä¸å¿…çŸ¥é“å®ƒçš„åŸºæœ¬æŸ¥è¯¢ç»†èŠ‚ï¼›</li>
<li>ä½¿ç”¨è¡¨çš„ç»„æˆéƒ¨åˆ†è€Œä¸æ˜¯æ•´ä¸ªè¡¨ï¼›</li>
<li>ä¿æŠ¤æ•°æ®ã€‚å¯ä»¥ç»™ç”¨æˆ·æˆäºˆè¡¨çš„ç‰¹å®šéƒ¨åˆ†çš„è®¿é—®æƒé™è€Œä¸æ˜¯æ•´ä¸ªè¡¨çš„è®¿é—®æƒé™ï¼›</li>
<li>æ›´æ”¹æ•°æ®æ ¼å¼å’Œè¡¨ç¤ºã€‚è§†å›¾å¯è¿”å›ä¸åº•å±‚è¡¨çš„è¡¨ç¤ºå’Œæ ¼å¼ä¸åŒçš„æ•°æ®ã€‚</li>
</ol>
<h4 id="è¡¨å’Œè§†å›¾çš„å…³ç³»"><a href="#è¡¨å’Œè§†å›¾çš„å…³ç³»" class="headerlink" title="è¡¨å’Œè§†å›¾çš„å…³ç³»"></a>è¡¨å’Œè§†å›¾çš„å…³ç³»</h4><p>è§†å›¾å…¶å®å°±æ˜¯ä¸€æ¡æŸ¥è¯¢ SQL è¯­å¥ï¼Œç”¨äºæ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªè¡¨æˆ–å…¶ä»–è§†å›¾ä¸­çš„ç›¸å…³æ•°æ®ã€‚ </p>
<p>è¡¨æ˜¯å…³ç³»æ•°æ®åº“ä¸­å®é™…å­˜å‚¨æ•°æ®ç”¨çš„ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯æ¸¸æ ‡"><a href="#ä»€ä¹ˆæ˜¯æ¸¸æ ‡" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¸¸æ ‡"></a>ä»€ä¹ˆæ˜¯æ¸¸æ ‡</h4><p>æ¸¸æ ‡æ˜¯ç³»ç»Ÿä¸ºç”¨æˆ·å¼€è®¾çš„ä¸€ä¸ªæ•°æ®ç¼“å†²åŒºï¼Œå­˜æ”¾ SQL è¯­å¥çš„æ‰§è¡Œç»“æœï¼Œæ¯ä¸ªæ¸¸æ ‡åŒºéƒ½æœ‰ä¸€ä¸ªåå­—ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ¸¸æ ‡é€ä¸€è·å–è®°å½•å¹¶èµ‹ç»™ä¸»å˜é‡ï¼Œäº¤ç”±ä¸»è¯­è¨€è¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<h2 id="å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°"><a href="#å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°"></a>å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°</h2><h3 id="ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹"><a href="#ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹"></a>ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹</h3><p>å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘çš„ SQL è¯­å¥ï¼Œä¼˜ç‚¹æ˜¯å…è®¸æ¨¡å—åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯´åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œä»¥ååœ¨è¯¥ç¨‹åºä¸­å°±å¯ä»¥è°ƒç”¨å¤šæ¬¡ã€‚å¦‚æœæŸæ¬¡æ“ä½œéœ€è¦æ‰§è¡Œå¤šæ¬¡ SQLï¼Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¯”å•çº¯ SQL è¯­å¥æ‰§è¡Œè¦å¿«ã€‚</p>
<h3 id="å­˜å‚¨è¿‡ç¨‹ç”¨ä»€ä¹ˆæ¥è°ƒç”¨"><a href="#å­˜å‚¨è¿‡ç¨‹ç”¨ä»€ä¹ˆæ¥è°ƒç”¨" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ç”¨ä»€ä¹ˆæ¥è°ƒç”¨"></a>å­˜å‚¨è¿‡ç¨‹ç”¨ä»€ä¹ˆæ¥è°ƒç”¨</h3><ul>
<li>å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å¯¹è±¡æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</li>
<li>å¯ä»¥ä¾›å¤–éƒ¨ç¨‹åºè°ƒç”¨ï¼Œæ¯”å¦‚ï¼šJava ç¨‹åºã€‚</li>
</ul>
<h3 id="å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹"><a href="#å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹"></a>å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ol>
<li>å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘è¿‡çš„ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ç›´æ¥å­˜æ”¾äºæ•°æ®åº“ä¸­ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹åç›´æ¥è°ƒç”¨ï¼Œå‡å°‘ç½‘ç»œé€šè®¯ã€‚</li>
<li>å®‰å…¨æ€§é«˜ï¼Œæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹éœ€è¦æœ‰ä¸€å®šæƒé™çš„ç”¨æˆ·ã€‚</li>
<li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå‡å°‘æ•°æ®åº“å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚</li>
</ol>
<h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><ol>
<li>è°ƒè¯•éº»çƒ¦ï¼Œä½†æ˜¯ç”¨ PL/SQL Developer è°ƒè¯•å¾ˆæ–¹ä¾¿ã€‚</li>
<li>ç§»æ¤æ€§å·®ï¼Œæ•°æ®åº“ç«¯ä»£ç å½“ç„¶æ˜¯ä¸æ•°æ®åº“ç›¸å…³çš„ã€‚ä½†å¦‚æœæ˜¯å·¥ç¨‹å‹é¡¹ç›®ï¼ŒåŸºæœ¬ä¸å­˜åœ¨ç§»æ¤é—®é¢˜ã€‚</li>
<li>é‡æ–°ç¼–è¯‘é—®é¢˜ï¼Œå› ä¸ºåç«¯ä»£ç æ˜¯è¿è¡Œå‰ç¼–è¯‘çš„ï¼Œå¦‚æœå¸¦æœ‰å¼•ç”¨å…³ç³»çš„å¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå—å½±å“çš„å­˜å‚¨è¿‡ç¨‹ã€åŒ…å°†éœ€è¦é‡æ–°ç¼–è¯‘ï¼ˆä¹Ÿå¯ä»¥è®¾ç½®æˆè¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¼–è¯‘ï¼‰ã€‚</li>
<li>å¦‚æœåœ¨ä¸€ä¸ªç¨‹åºç³»ç»Ÿä¸­å¤§é‡çš„ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œåˆ°ç¨‹åºäº¤ä»˜ä½¿ç”¨çš„æ—¶å€™éšç€ç”¨æˆ·éœ€æ±‚çš„å¢åŠ ä¼šå¯¼è‡´æ•°æ®ç»“æ„çš„å˜åŒ–ï¼Œå¦‚æœç”¨æˆ·å¾ˆéš¾ç»´æŠ¤è¯¥ç³»ç»Ÿ</li>
</ol>
<h3 id="å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°çš„åŒºåˆ«"><a href="#å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°çš„åŒºåˆ«"></a>å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°çš„åŒºåˆ«</h3><div class="table-container">
<table>
<thead>
<tr>
<th>å­˜å‚¨è¿‡ç¨‹</th>
<th>å‡½æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç”¨äºåœ¨æ•°æ®åº“ä¸­å®Œæˆç‰¹å®šçš„æ“ä½œæˆ–è€…ä»»åŠ¡ï¼ˆå¦‚æ’å…¥ã€åˆ é™¤ç­‰ï¼‰</td>
<td>ç”¨äºç‰¹å®šçš„æ•°æ®ï¼ˆå¦‚é€‰æ‹©ï¼‰</td>
</tr>
<tr>
<td>ç¨‹åºå¤´éƒ¨å£°æ˜ç”¨ procedure</td>
<td>ç¨‹åºå¤´éƒ¨å£°æ˜ç”¨ function</td>
</tr>
<tr>
<td>ç¨‹åºå¤´éƒ¨å£°æ˜æ—¶ä¸éœ€æè¿°è¿”å›ç±»å‹</td>
<td>ç¨‹åºå¤´éƒ¨å£°æ˜æ—¶è¦æè¿°è¿”å›ç±»å‹ï¼Œè€Œä¸” PL / SQL å—ä¸­è‡³å°‘è¦åŒ…æ‹¬ä¸€ä¸ªæœ‰æ•ˆçš„ return è¯­å¥</td>
</tr>
<tr>
<td>å¯ä»¥ä½¿ç”¨ in / out / in out ä¸‰ç§æ¨¡å¼çš„å‚æ•°</td>
<td>å¯ä»¥ä½¿ç”¨ in / out /in out ä¸‰ç§æ¨¡å¼çš„å‚æ•°</td>
</tr>
<tr>
<td>å¯ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ PL / SQL è¯­å¥æ¥æ‰§è¡Œ</td>
<td>ä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†è°ƒç”¨</td>
</tr>
<tr>
<td>å¯ä»¥é€šè¿‡ out / in out è¿”å›é›¶ä¸ªæˆ–å¤šä¸ªå€¼</td>
<td>é€šè¿‡ return è¯­å¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä¸”æ”¹å€¼è¦ä¸å£°æ˜éƒ¨åˆ†ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡ out ç±»å‹çš„å‚æ•°å¸¦å‡ºçš„å˜é‡</td>
</tr>
<tr>
<td>SQL è¯­å¥( DML æˆ– SELECT )ä¸­ä¸å¯è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</td>
<td>SQL è¯­å¥( DML æˆ– SELECT )ä¸­å¯ä»¥è°ƒç”¨å‡½æ•°</td>
</tr>
</tbody>
</table>
</div>
<h2 id="è§¦å‘å™¨"><a href="#è§¦å‘å™¨" class="headerlink" title="è§¦å‘å™¨"></a>è§¦å‘å™¨</h2><h3 id="ä»€ä¹ˆæ˜¯è§¦å‘å™¨"><a href="#ä»€ä¹ˆæ˜¯è§¦å‘å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯è§¦å‘å™¨"></a>ä»€ä¹ˆæ˜¯è§¦å‘å™¨</h3><p>è§¦å‘å™¨æ˜¯<strong>ç”¨æˆ·å®šä¹‰åœ¨å…³ç³»è¡¨ä¸Šçš„ä¸€ç±»ç”±äº‹ä»¶é©±åŠ¨çš„ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹</strong>ï¼Œè§¦å‘å™¨æ˜¯æŒ‡ä¸€æ®µä»£ç ï¼Œå½“è§¦å‘æŸä¸ªäº‹ä»¶æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œè¿™äº›ä»£ç ã€‚</p>
<p>ä¸»è¦æ˜¯é€šè¿‡äº‹ä»¶æ¥è§¦å‘è€Œè¢«æ‰§è¡Œçš„ã€‚å¯ä»¥å¼ºåŒ–çº¦æŸï¼Œæ¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥è·Ÿè¸ªæ•°æ®åº“å†…çš„æ“ä½œä»è€Œä¸å…è®¸æœªç»è®¸å¯çš„æ›´æ–°å’Œå˜åŒ–ã€‚å¯ä»¥è”çº§è¿ç®—ã€‚å¦‚æŸè¡¨ä¸Šçš„è§¦å‘å™¨ä¸ŠåŒ…å«å¯¹å¦ä¸€ä¸ªè¡¨çš„æ•°æ®æ“ä½œï¼Œè€Œè¯¥æ“ä½œåˆä¼šå¯¼è‡´è¯¥è¡¨è§¦å‘å™¨è¢«è§¦å‘ã€‚</p>
<h3 id="è§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯"><a href="#è§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="è§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯"></a>è§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯</h3><p>å¯ä»¥é€šè¿‡æ•°æ®åº“ä¸­çš„ç›¸å…³è¡¨å®ç°çº§è”æ›´æ”¹ã€‚<br>å®æ—¶ç›‘æ§æŸå¼ è¡¨ä¸­çš„æŸä¸ªå­—æ®µçš„æ›´æ”¹è€Œéœ€è¦åšå‡ºç›¸åº”çš„å¤„ç†ã€‚ä¾‹å¦‚å¯ä»¥ç”ŸæˆæŸäº›ä¸šåŠ¡çš„ç¼–å·ã€‚</p>
<h3 id="MySQLä¸­çš„è§¦å‘å™¨"><a href="#MySQLä¸­çš„è§¦å‘å™¨" class="headerlink" title="MySQLä¸­çš„è§¦å‘å™¨"></a>MySQLä¸­çš„è§¦å‘å™¨</h3><p>åœ¨ MySQL æ•°æ®åº“ä¸­æœ‰å¦‚ä¸‹å…­ç§è§¦å‘å™¨ï¼š</p>
<ul>
<li>Before Insert</li>
<li>After Insert</li>
<li>Before Update</li>
<li>After Update</li>
<li>Before Delete</li>
<li>After Delete</li>
</ul>
<h3 id="äº‹å‰è§¦å‘å’Œäº‹åè§¦å‘çš„åŒºåˆ«"><a href="#äº‹å‰è§¦å‘å’Œäº‹åè§¦å‘çš„åŒºåˆ«" class="headerlink" title="äº‹å‰è§¦å‘å’Œäº‹åè§¦å‘çš„åŒºåˆ«"></a>äº‹å‰è§¦å‘å’Œäº‹åè§¦å‘çš„åŒºåˆ«</h3><p>äº‹å‰è§¦å‘å™¨è¿è¡Œäºè§¦å‘äº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼Œäº‹åè§¦å‘å™¨è¿è¡Œäºè§¦å‘äº‹ä»¶å‘ç”Ÿä¹‹åã€‚</p>
<p>é€šå¸¸äº‹å‰è§¦å‘å™¨å¯ä»¥è·å–äº‹ä»¶ä¹‹å‰å’Œæ–°çš„å­—æ®µå€¼ã€‚</p>
<h3 id="è¯­å¥çº§è§¦å‘å’Œè¡Œçº§è§¦å‘æœ‰ä½•åŒºåˆ«"><a href="#è¯­å¥çº§è§¦å‘å’Œè¡Œçº§è§¦å‘æœ‰ä½•åŒºåˆ«" class="headerlink" title="è¯­å¥çº§è§¦å‘å’Œè¡Œçº§è§¦å‘æœ‰ä½•åŒºåˆ«"></a>è¯­å¥çº§è§¦å‘å’Œè¡Œçº§è§¦å‘æœ‰ä½•åŒºåˆ«</h3><p>è¯­å¥çº§è§¦å‘å™¨å¯ä»¥åœ¨è¯­å¥æ‰§è¡Œå‰æˆ–åæ‰§è¡Œï¼Œè€Œè¡Œçº§è§¦å‘åœ¨è§¦å‘å™¨æ‰€å½±å“çš„æ¯ä¸€è¡Œè§¦å‘ä¸€æ¬¡ã€‚</p>
]]></content>
      <categories>
        <category>åŸºç¡€çŸ¥è¯†</category>
      </categories>
      <tags>
        <tag>SQL</tag>
        <tag>MySQL</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo-æ’å…¥æœ¬åœ°å›¾ç‰‡</title>
    <url>/2020/09/16/Hexo%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<h2 id="å‰å› "><a href="#å‰å› " class="headerlink" title="å‰å› "></a>å‰å› </h2><p>è®°ç¬”è®°æ—¶ç»å¸¸ä½¿ç”¨å¾®ä¿¡æˆªå›¾ï¼Œç›´æ¥ç²˜è´´åˆ°Typoraä¸­ï¼Œåœ¨æœ¬åœ°æ˜¾ç¤ºæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸å°å¿ƒåˆ é™¤å¾®ä¿¡ç¼“å­˜ï¼Œæˆ–è€…æ¢ç”µè„‘æµè§ˆå›¾ç‰‡æ˜¾ç¤ºå°±ä¼šå‡ºé”™ã€‚</p>
<p>PSï¼šå¾®ä¿¡æš‚æ—¶ä¸æ”¯æŒè‡ªå®šä¹‰æˆªå›¾å­˜å‚¨ä½ç½®</p>
<a id="more"></a>
<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>Typoraè®¾ç½®ï¼šæ–‡ä»¶â†’åå¥½è®¾ç½®â†’å›¾ç‰‡â†’è®¾ç½®å¤åˆ¶å›¾ç‰‡åˆ°æ–‡ä»¶å¤¹</p>

<p>å¦‚æœé€‰æ‹©<code>å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™</code>åº”è¯¥ä¼šå°†å›¾ç‰‡ä¿å­˜åˆ°assetsæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p>ä½†æ˜¯å®Œæˆè®¾ç½®åä»…ä»…å¯ä»¥åœ¨Typroä¸­æ˜¾ç¤ºï¼Œåœ¨ä¸»é¡µä¸èƒ½æ˜¾ç¤ºã€‚</p>
<h2 id="åšå®¢ä¸èƒ½æ˜¾ç¤ºå›¾ç‰‡"><a href="#åšå®¢ä¸èƒ½æ˜¾ç¤ºå›¾ç‰‡" class="headerlink" title="åšå®¢ä¸èƒ½æ˜¾ç¤ºå›¾ç‰‡"></a>åšå®¢ä¸èƒ½æ˜¾ç¤ºå›¾ç‰‡</h2><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ol>
<li><p>å®‰è£…æ’ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<p>å°†node_modules/hexo-asset-image/index.jsä¸­çš„å†…å®¹æ›¿æ¢ä¸º<a href="https://blog.csdn.net/xjm850552586/article/details/84101345" target="_blank" rel="noopener">CSDNä¸€ç¯‡åšå®¢-hexoå¼•ç”¨æœ¬åœ°å›¾ç‰‡æ— æ³•æ˜¾ç¤º</a>ä¸­çš„ä»£ç ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">'.'</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    	<span class="keyword">var</span> link = data.permalink;</span><br><span class="line">	<span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".</span></span><br><span class="line">	<span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">'excerpt'</span>, <span class="string">'more'</span>, <span class="string">'content'</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">'img'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="keyword">this</span>).attr(<span class="string">'src'</span>))&#123;</span><br><span class="line">			<span class="comment">// For windows style path, we replace '\' to '/'.</span></span><br><span class="line">			<span class="keyword">var</span> src = $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>);</span><br><span class="line">			<span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">			   !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">			  <span class="comment">// For "about" page, the first part of "src" can't be removed.</span></span><br><span class="line">			  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">			  <span class="keyword">var</span> linkArray = link.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">''</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">var</span> srcArray = src.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">''</span> &amp;&amp; elem != <span class="string">'.'</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">				srcArray.shift();</span><br><span class="line">			  src = srcArray.join(<span class="string">'/'</span>);</span><br><span class="line">			  $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>, config.root + link + src);</span><br><span class="line">			  <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"update link as:--&gt;"</span>+config.root + link + src);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"no src attr, skipped..."</span>);</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¯¥æ’ä»¶å¯ä»¥åœ¨ä¿¡ä»¶æ–‡ç« æ—¶è‡ªåŠ¨ç”Ÿæˆå’Œæ–‡ç« åç›¸åŒçš„æ–‡ä»¶å¤¹ã€‚</p>
</li>
<li><p>æŒ‰ç…§<a href="https://hexo.io/zh-cn/docs/asset-folders.html" target="_blank" rel="noopener">Hexo-èµ„æºæ–‡ä»¶å¤¹</a>ä¸­çš„è®¾ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">_config.yml</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥<code>![](image.jpg)</code>ï¼Œç›´æ¥æ·»åŠ ï¼Œä¼šè‡ªåŠ¨æ¸²æŸ“æ·»åŠ è·¯å¾„ã€‚</p>
</li>
<li><p>å°†filename.assetsæ–‡ä»¶å¤¹é‡å‘½åä¸ºfilename</p>
<p>æˆ–è€…å°†å›¾ç‰‡æ‹·åˆ°filenameæ–‡ä»¶å¤¹ä¸‹</p>
<p>å› ä¸ºhexoè‡ªåŠ¨æ¸²æŸ“çš„è·¯å¾„æ˜¯ç›¸å¯¹åº”çš„postè·¯å¾„</p>
</li>
</ol>
<h3 id="å¯èƒ½çš„æ”¹è¿›"><a href="#å¯èƒ½çš„æ”¹è¿›" class="headerlink" title="å¯èƒ½çš„æ”¹è¿›"></a>å¯èƒ½çš„æ”¹è¿›</h3><ol>
<li>onedrive+oneindexéƒ¨ç½²ï¼Œåˆ›å»ºå›¾åºŠã€‚</li>
<li>typoraè‡ªåŠ¨åˆ›å»ºçš„èµ„æºæ–‡ä»¶å¤¹åå­—å’Œhexoè‡ªåŠ¨åˆ›å»ºçš„èµ„æºæ–‡ä»¶å¤¹åå­—åº”è¯¥å¯ä»¥æ›´æ”¹</li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>Typora</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
