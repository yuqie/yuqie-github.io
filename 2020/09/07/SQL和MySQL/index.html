<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="结构化查询语言（SQL）结构化查询语言（Structured Query Language）简称 SQL，是一种数据库查询语言。用于存取数据、查询、更新和管理关系数据库系统。">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL和MySQL">
<meta property="og:url" content="http://yoursite.com/2020/09/07/SQL%E5%92%8CMySQL/index.html">
<meta property="og:site_name" content="Ringinmay&#39;s Blog">
<meta property="og:description" content="结构化查询语言（SQL）结构化查询语言（Structured Query Language）简称 SQL，是一种数据库查询语言。用于存取数据、查询、更新和管理关系数据库系统。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-09-07T11:02:12.000Z">
<meta property="article:modified_time" content="2020-09-16T03:12:34.122Z">
<meta property="article:author" content="QQAI">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/09/07/SQL%E5%92%8CMySQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>SQL和MySQL | Ringinmay's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ringinmay's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Home is behind, the world ahead</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/07/SQL%E5%92%8CMySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="QQAI">
      <meta itemprop="description" content="Home is behind, the world ahead">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ringinmay's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SQL和MySQL
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-07 19:02:12" itemprop="dateCreated datePublished" datetime="2020-09-07T19:02:12+08:00">2020-09-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-16 11:12:34" itemprop="dateModified" datetime="2020-09-16T11:12:34+08:00">2020-09-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index">
                    <span itemprop="name">基础知识</span>
                  </a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="结构化查询语言（SQL）"><a href="#结构化查询语言（SQL）" class="headerlink" title="结构化查询语言（SQL）"></a>结构化查询语言（SQL）</h1><p>结构化查询语言（Structured Query Language）简称 SQL，是一种数据库查询语言。用于存取数据、查询、更新和管理关系数据库系统。</p>
<a id="more"></a>
<h2 id="SQL-是一种声明性语言"><a href="#SQL-是一种声明性语言" class="headerlink" title="SQL 是一种声明性语言"></a>SQL 是一种声明性语言</h2><p>简单地说，SQL 语言声明的是结果集的属性，计算机会根据 SQL 所声明的内容来从数据库中挑选出符合声明的数据，而不是像传统编程思维去指示计算机如何操作。</p>
<h2 id="SQL-的语法并不按照语法顺序执行"><a href="#SQL-的语法并不按照语法顺序执行" class="headerlink" title="SQL 的语法并不按照语法顺序执行"></a>SQL 的语法并不按照语法顺序执行</h2><p>SQL 语句的语法顺序是：</p>
<ul>
<li>SELECT[DISTINCT]</li>
<li>FROM</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>UNION</li>
<li>ORDER BY</li>
</ul>
<p>执行顺序为：</p>
<ul>
<li>FROM</li>
<li>WHERE</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>SELECT</li>
<li>DISTINCT</li>
<li>UNION</li>
<li>ORDER BY</li>
</ul>
<ol>
<li>FROM 是 SQL 语句执行的第一步，而非 SELECT 。数据库在执行 SQL 语句的第一步是将数据从硬盘加载到数据缓冲区中，以便对这些数据进行操作。</li>
<li>SELECT 是在大部分语句执行了之后才执行的，严格说是在 FROM 和 GROUP BY 之后执行的。所以不能在 WHERE 中使用在 SELECT 中设定别名字段作为判断条件。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT A.x + A.y AS z FROM A</span><br><span class="line">WHERE z &#x3D; 10 -- z 在此处不可用，因为SELECT是最后执行的语句！</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT A.x + A.y AS z FROM A </span><br><span class="line">WHERE (A.x + A.y) &#x3D; 10 -- 正确用法</span><br></pre></td></tr></table></figure>
<ol>
<li>无论在语法上还是在执行顺序上， UNION 总是排在在 ORDER BY 之前。尽管某些数据库允许 SQL 语句对子查询（subqueries）或者派生表（derived tables）进行排序，但是这并不说明这个排序在 UNION 操作过后仍保持排序后的顺序。</li>
</ol>
<blockquote>
<p>并非所有的数据库对 SQL 语句使用相同的解析方式。如 MySQL、PostgreSQL和 SQLite 中就不会按照上面第二点中所说的方式执行。</p>
</blockquote>
<h2 id="SQL-语言的核心是对表的引用（table-references）"><a href="#SQL-语言的核心是对表的引用（table-references）" class="headerlink" title="SQL 语言的核心是对表的引用（table references）"></a>SQL 语言的核心是对表的引用（table references）</h2><p>根据 SQL 标准，FROM 语句被定义为：</p>
<p><code>&lt;from clause&gt; ::= FROM &lt;table reference&gt; [ { &lt;comma&gt; &lt;table reference&gt; }... ]</code></p>
<p>FROM 语句的“输出”是一张联合表，来自于所有引用的表在某一维度上的联合。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM a, b</span><br></pre></td></tr></table></figure>
<p>上面这句 FROM 语句的输出了一张联合表，联合了表 a 和表 b 。如果 a 表有三个字段， b 表有 5 个字段，那么这个“输出表”就有 8 （ =5+3）个字段。联合表里的数据是 a*b，<strong>即 a 和 b 的笛卡尔积</strong>。 a 表中的每一条数据都要跟 b 表中的每一条数据配对。如果 a 表有3 条数据， b 表有 5 条数据，那么联合表就会有 15 （ =5*3）条数据。</p>
<blockquote>
<p>从集合论（关系代数）的角度来看，一张数据库的表就是一组数据元的关系，而每个 SQL 语句会改变一种或数种关系，从而产生出新的数据元的关系（即产生新的表）</p>
</blockquote>
<h2 id="SQL-语句中的表连接"><a href="#SQL-语句中的表连接" class="headerlink" title="SQL 语句中的表连接"></a>SQL 语句中的表连接</h2><p><strong>SQL 是对表的引用， JOIN 则是一种引用表的复杂方式</strong> 。严格的说 JOIN 语句并非是 SELECT 中的一部分，而是<strong>一种特殊的表引用语句</strong>。SQL 语言标准中表的连接定义如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;table reference&gt; ::&#x3D;</span><br><span class="line">    &lt;table name&gt;</span><br><span class="line">  | &lt;derived table&gt;</span><br><span class="line">  | &lt;joined table&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM a1 JOIN a2 ON a1.id = a2.id, b</span><br></pre></td></tr></table></figure>
<p> JOIN 是构建连接表的关键词，并不是 SELECT 语句的一部分。有一些数据库允许在 INSERT 、 UPDATE 、 DELETE 中使用 JOIN 。</p>
<p>使用 JOIN 语句的好处在于：</p>
<ul>
<li>安全。JOIN 和要连接的表离得非常近，这样就能避免错误。</li>
<li>更多连接的方式，JOIN 语句能去区分出来外连接和内连接等。</li>
</ul>
<h2 id="SQL-语句中不同的连接操作"><a href="#SQL-语句中不同的连接操作" class="headerlink" title="SQL 语句中不同的连接操作"></a><strong>SQL 语句中不同的连接操作</strong></h2><p>SQL 语句中，表连接的方式从根本上分为五种：</p>
<ul>
<li>EQUI JOIN</li>
<li>SEMI JOIN</li>
<li>ANTI JOIN</li>
<li>CROSS JOIN</li>
<li>DIVISION</li>
</ul>
<h3 id="EQUI-JOIN"><a href="#EQUI-JOIN" class="headerlink" title="EQUI JOIN"></a><strong>EQUI JOIN</strong></h3><p>包含两种连接方式：</p>
<ul>
<li>INNER JOIN（或者是 JOIN ）</li>
<li>OUTER JOIN（包括：LEFT 、 RIGHT、 FULL OUTER JOIN）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- This table reference contains authors and their books.</span></span><br><span class="line"><span class="comment">-- There is one record for each book and its author.</span></span><br><span class="line"><span class="comment">-- authors without books are NOT included</span></span><br><span class="line">author JOIN book ON author.id = book.author_id</span><br><span class="line"></span><br><span class="line"><span class="comment">-- This table reference contains authors and their books</span></span><br><span class="line"><span class="comment">-- There is one record for each book and its author.</span></span><br><span class="line"><span class="comment">-- ... OR there is an "empty" record for authors without books</span></span><br><span class="line"><span class="comment">-- ("empty" meaning that all book columns are NULL)</span></span><br><span class="line">author LEFT OUTER JOIN book ON author.id = book.author_id</span><br></pre></td></tr></table></figure>
<h3 id="SEMI-JOIN"><a href="#SEMI-JOIN" class="headerlink" title="SEMI JOIN"></a>SEMI JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Using IN</span></span><br><span class="line">FROM author WHERE author.id IN (<span class="keyword">SELECT</span> book.author_id <span class="keyword">FROM</span> book)</span><br><span class="line"><span class="comment">-- Using EXISTS</span></span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> book.author_id = author.id)</span><br></pre></td></tr></table></figure>
<ul>
<li>IN比 EXISTS 的可读性更好</li>
<li>EXISTS 比IN 的表达性更好（更适合复杂的语句）</li>
<li>二者之间性能没有差异（但对于某些数据库来说性能差异会非常大）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Find only those authors who also have books</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> first_name, last_name</span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">JOIN</span> book <span class="keyword">ON</span> author.id = book.author_id</span><br></pre></td></tr></table></figure>
<p>这是一种很糟糕的写法，原因如下：</p>
<ul>
<li>SQL 语句性能低下：因为去重操作（ DISTINCT ）需要数据库重复从硬盘中读取数据到内存中。</li>
<li>这么写并非完全正确：尽管也许现在这么写不会出现问题，但是随着 SQL 语句变得越来越复杂，想要去重得到正确的结果就变得十分困难。</li>
</ul>
<h3 id="ANTI-JOIN"><a href="#ANTI-JOIN" class="headerlink" title="ANTI JOIN"></a><strong>ANTI JOIN</strong></h3><p>这种连接的关系跟 SEMI JOIN 刚好相反。在 IN 或者 EXISTS 前加一个 NOT 关键字就能使用这种连接。举个例子来说，我们列出书名表里没有书的作者：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Using IN</span></span><br><span class="line">FROM author WHERE author.id NOT IN (<span class="keyword">SELECT</span> book.author_id <span class="keyword">FROM</span> book)</span><br><span class="line"><span class="comment">-- Using EXISTS</span></span><br><span class="line"><span class="keyword">FROM</span> author <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> book.author_id = author.id)</span><br></pre></td></tr></table></figure>
<h3 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a><strong>CROSS JOIN</strong></h3><p>这个连接过程就是<strong>两个连接的表的乘积</strong>：即将第一张表的每一条数据分别对应第二张表的每条数据。这就是逗号在 FROM 语句中的用法。在实际的应用中，很少有地方能用到 CROSS JOIN，一旦用上，可以用这样的 SQL语句表达：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Combine every author with every book</span></span><br><span class="line">author CROSS JOIN book</span><br><span class="line"><span class="comment">-- 等同于</span></span><br><span class="line">FROM author, book</span><br></pre></td></tr></table></figure>
<h3 id="DIVISION"><a href="#DIVISION" class="headerlink" title="DIVISION"></a><strong>DIVISION</strong></h3><p>DIVISION 比较奇怪。简而言之，如果 JOIN 是一个乘法运算，那么 DIVISION 就是 JOIN 的逆过程。DIVISION 的关系很难用 SQL 表达出来。</p>
<h2 id="SQL-中的派生表"><a href="#SQL-中的派生表" class="headerlink" title="SQL 中的派生表"></a><strong>SQL 中的派生表</strong></h2><p>派生表就是在括号之中的子查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- A derived table</span></span><br><span class="line">FROM (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> author)</span><br><span class="line"><span class="comment">-- 我们可以给派生表定义一个相关名（即别名）</span></span><br><span class="line"><span class="comment">-- A derived table with an alias</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> author) a</span><br></pre></td></tr></table></figure>
<p>派生表可以有效的避免由于 SQL 逻辑而产生的问题。</p>
<p>想重用一个用 SELECT 和 WHERE 语句查询出的结果：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- Get authors' first and last names, and their age in days</span></span><br><span class="line"><span class="keyword">SELECT</span> first_name, last_name, age</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> first_name, last_name, <span class="keyword">current_date</span> - date_of_birth age</span><br><span class="line">  <span class="keyword">FROM</span> author</span><br><span class="line">)</span><br><span class="line"><span class="comment">-- If the age is greater than 10000 days</span></span><br><span class="line"><span class="keyword">WHERE</span> age &gt; <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<p>在有些数据库，以及 SQL ：1990 标准中，派生表被归为下一级——通用表语句（ common table experssion）。允许在一个 SELECT 语句中对派生表多次重用。上面的例子就（几乎）等价于下面的语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> a <span class="keyword">AS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> first_name, last_name, <span class="keyword">current_date</span> - date_of_birth age</span><br><span class="line">  <span class="keyword">FROM</span> author</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> a</span><br><span class="line"><span class="keyword">WHERE</span> age &gt; <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<h3 id="SQL-语句中-GROUP-BY"><a href="#SQL-语句中-GROUP-BY" class="headerlink" title="SQL 语句中 GROUP BY"></a><strong>SQL 语句中 GROUP BY</strong></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.x, A.y, <span class="keyword">SUM</span>(A.z)</span><br><span class="line"><span class="keyword">FROM</span> A</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> A.x, A.y</span><br></pre></td></tr></table></figure>
<h3 id="SQL-语句中的-SELECT-实质上是对关系的映射"><a href="#SQL-语句中的-SELECT-实质上是对关系的映射" class="headerlink" title="SQL 语句中的 SELECT 实质上是对关系的映射"></a><strong>SQL 语句中的 SELECT 实质上是对关系的映射</strong></h3><p>SELECT 语句就像一个“投影仪”，可以将其理解成一个将源表中的数据按照一定的逻辑转换成目标表数据的函数。</p>
<p>通过 SELECT语句，可以对每一个字段进行操作，通过复杂的表达式生成所需要的数据。</p>
<p>SELECT 语句有很多特殊的规则：</p>
<ul>
<li><p>仅能够使用能通过表引用而得来的字段；</p>
</li>
<li><p>如果有 GROUP BY 语句，只能够使用 GROUP BY 语句后面的字段或者聚合函数；</p>
</li>
<li><p>当语句中没有 GROUP BY 的时候，可以使用开窗函数代替聚合函数；</p>
</li>
<li><p>当语句中没有 GROUP BY 的时候，不能同时使用聚合函数和其它函数；</p>
<blockquote>
<p>在既有聚合函数又有普通函数的 SQL 语句中，如果没有 GROUP BY 进行分组，SQL 语句默认视整张表为一个分组，当聚合函数对某一字段进行聚合统计的时候，引用的表中的每一条 record 就失去了意义，全部的数据都聚合为一个统计值，你此时对每一条 record 使用其它函数是没有意义的</p>
</blockquote>
</li>
<li><p>有一些方法可以将普通函数封装在聚合函数中</p>
</li>
</ul>
<h3 id="DISTINCT-，-UNION-，-ORDER-BY-和-OFFSET"><a href="#DISTINCT-，-UNION-，-ORDER-BY-和-OFFSET" class="headerlink" title="DISTINCT ， UNION ， ORDER BY 和 OFFSET"></a><strong>DISTINCT ， UNION ， ORDER BY 和 OFFSET</strong></h3><h4 id="集合运算（-DISTINCT-和-UNION-）"><a href="#集合运算（-DISTINCT-和-UNION-）" class="headerlink" title="集合运算（ DISTINCT 和 UNION ）"></a>集合运算（ DISTINCT 和 UNION ）</h4><p>集合运算主要操作在于集合上，事实上指的就是对表的一种操作。</p>
<ul>
<li>DISTINCT 在映射之后对数据进行去重</li>
<li>UNION 将两个子查询拼接起来并去重</li>
<li>UNION ALL 将两个子查询拼接起来但不去重</li>
<li>EXCEPT 将第二个字查询中的结果从第一个子查询中去掉</li>
<li>INTERSECT 保留两个子查询中都有的结果并去重</li>
</ul>
<h4 id="排序运算（-ORDER-BY，OFFSET…FETCH）"><a href="#排序运算（-ORDER-BY，OFFSET…FETCH）" class="headerlink" title="排序运算（ ORDER BY，OFFSET…FETCH）"></a>排序运算（ ORDER BY，OFFSET…FETCH）</h4><p>排序运算跟逻辑关系无关。这是一个 SQL 特有的功能。排序运算不仅在 SQL 语句的最后，而且在 SQL 语句运行的过程中也是最后执行的。使用 ORDER BY 和 OFFSET…FETCH 是保证数据能够按照顺序排列的最有效的方式。</p>
<p>OFFSET…SET是一个没有统一确定语法的语句，不同的数据库有不同的表达方式，如 MySQL 和 PostgreSQL 的 LIMIT…OFFSET、SQL Server 和 Sybase 的 TOP…START AT 等。</p>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>MySQL是一种开放源代码的关系型数据库管理系统（Relational Database Management System，RDBMS），由瑞典 MySQL AB 公司开发，属于 Oracle 旗下产品，使用最常用的数据库管理语言–结构化查询语言（SQL）进行数据库管理。</p>
<h2 id="连接数据库："><a href="#连接数据库：" class="headerlink" title="连接数据库："></a>连接数据库：</h2><p><code>mysql  -u user -p</code></p>
<p>退出连接：<code>QUIT 或者 Ctrl+D</code></p>
<h2 id="查看，创建，使用数据库"><a href="#查看，创建，使用数据库" class="headerlink" title="查看，创建，使用数据库:"></a>查看，创建，使用数据库:</h2><p><code>show databases;</code></p>
<p>默认数据库：</p>
<figure class="highlight plain"><figcaption><span>- 用户权限相关数据</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql - 用户权限相关数据保存在mysql数据库的user表中</span><br><span class="line">test - 用于用户测试数据</span><br><span class="line">information_schema - MySQL本身架构相关数据</span><br></pre></td></tr></table></figure>
<p>创建数据库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database db1 DEFAULT CHARSET utf8 COLLATE utf8_general_ci; # utf8编码</span><br><span class="line">create database db1 DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci; # gbk编码</span><br></pre></td></tr></table></figure>
<p>使用数据库：<code>use db1;</code></p>
<p>显示当前使用的数据库中所有表：<code>SHOW TABLES;</code></p>
<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>创建用户：<code>create user &#39;用户名&#39;@&#39;IP地址&#39; identified by &#39;密码&#39;;</code></p>
<p>修改用户：<code>rename user &#39;用户名&#39;@&#39;IP地址&#39;; to &#39;新用户名&#39;@&#39;IP地址&#39;;</code></p>
<p>删除用户：<code>drop user &#39;用户名&#39;@&#39;IP地址&#39;;</code></p>
<p>修改密码：<code>set password for &#39;用户名&#39;@&#39;IP地址&#39; = Password(&#39;新密码&#39;);</code></p>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><p>mysql对于权限这块有以下限制：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">all privileges：除grant外的所有权限</span><br><span class="line">select：仅查权限</span><br><span class="line">select,insert：查和插入权限</span><br><span class="line">...</span><br><span class="line">usage：无访问权限</span><br><span class="line">alter：使用alter table</span><br><span class="line">alter routine：使用alter procedure和drop procedure</span><br><span class="line">create：使用create table</span><br><span class="line">create routine：使用create procedure</span><br><span class="line">create temporary tables：使用create temporary tables</span><br><span class="line">create user：使用create user、drop user、rename user和revoke  all privileges</span><br><span class="line">create view：使用create view</span><br><span class="line">delete：使用delete</span><br><span class="line">drop：使用drop table</span><br><span class="line">execute：使用call和存储过程</span><br><span class="line">file：使用select into outfile 和 load data infile</span><br><span class="line">grant option：使用grant 和 revoke</span><br><span class="line">index：使用index</span><br><span class="line">insert：使用insert</span><br><span class="line">lock tables：使用lock table</span><br><span class="line">process：使用show full processlist</span><br><span class="line">select：使用select</span><br><span class="line">show databases：使用show databases</span><br><span class="line">show view：使用show view</span><br><span class="line">update：使用update</span><br><span class="line">reload：使用flush</span><br><span class="line">shutdown：使用mysqladmin shutdown(关闭MySQL)</span><br><span class="line">super：使用change master、kill、logs、purge、master和set global。还允许mysqladmin调试登陆</span><br><span class="line">replication client：服务器位置的访问</span><br><span class="line">replication slave：由复制从属使用</span><br></pre></td></tr></table></figure>
<p>对于数据库及内部其他权限如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据库名.*            数据库中的所有</span><br><span class="line">数据库名.表           指定数据库中的某张表</span><br><span class="line">数据库名.存储过程      指定数据库中的存储过程</span><br><span class="line">*.*                   所有数据库</span><br></pre></td></tr></table></figure>
<p>对于用户和IP的权限如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">用户名@IP地址        用户只能在改IP下才能访问</span><br><span class="line">用户名@192.168.1.%   用户只能在改IP段下才能访问(通配符%表示任意)</span><br><span class="line">用户名@%             用户可以再任意IP下访问(默认IP地址为%)</span><br></pre></td></tr></table></figure>
<p>1、查看权限：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show grants for &#39;用户&#39;@&#39;IP地址&#39;</span><br></pre></td></tr></table></figure>
<p>2、授权</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant  权限 on 数据库.表 to   &#39;用户&#39;@&#39;IP地址&#39;</span><br></pre></td></tr></table></figure>
<p>3、取消授权</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">revoke 权限 on 数据库.表 from &#39;用户名&#39;@&#39;IP地址&#39;</span><br></pre></td></tr></table></figure>
<p>授权实例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on db1.tb1 TO &#39;用户名&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">grant select on db1.* TO &#39;用户名&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">grant select,insert on *.* TO &#39;用户名&#39;@&#39;IP&#39;</span><br><span class="line"></span><br><span class="line">revoke select on db1.tb1 from &#39;用户名&#39;@&#39;IP&#39;</span><br></pre></td></tr></table></figure>
<h2 id="MySQL表操作"><a href="#MySQL表操作" class="headerlink" title="MySQL表操作"></a>MySQL表操作</h2><h3 id="查看表"><a href="#查看表" class="headerlink" title="查看表"></a>查看表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show tables; # 查看数据库全部表</span><br><span class="line">select * from 表名; # 查看表所有内容</span><br></pre></td></tr></table></figure>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">    列名  类型  是否可以为空，</span><br><span class="line">    列名  类型  是否可以为空</span><br><span class="line">)ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;tab1&#96; (</span><br><span class="line">  &#96;nid&#96; int(11) NOT NULL auto_increment,</span><br><span class="line">  &#96;name&#96; varchar(255) DEFAULT zhangyanlin,</span><br><span class="line">  &#96;email&#96; varchar(255),</span><br><span class="line">  PRIMARY KEY (&#96;nid&#96;) </span><br><span class="line">) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>默认值，创建列时可以指定默认值，当插入数据时如果未主动设置，则自动添加默认值。</p>
</li>
<li><p>自增，如果为某列设置自增列，插入数据时无需设置此列，默认将自增（表中只能有一个自增列）</p>
<blockquote>
<p>注意：</p>
<p>1、自增列，必须是索引（含主键）</p>
<p>2、自增可以设置步长和起始值。</p>
</blockquote>
</li>
<li><p>主键，一种特殊的唯一索引，不允许有空值，如果主键使用单个列，则它的值必须唯一，如果是多列，则其组合必须唯一。</p>
</li>
</ul>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table 表名</span><br></pre></td></tr></table></figure>
<h3 id="清空表内容"><a href="#清空表内容" class="headerlink" title="清空表内容"></a>清空表内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名</span><br><span class="line">truncate table 表名</span><br></pre></td></tr></table></figure>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">添加列：   </span><br><span class="line">alter table 表名 add 列名 类型</span><br><span class="line">删除列：   </span><br><span class="line">alter table 表名 drop column 列名</span><br><span class="line">修改列：      </span><br><span class="line">alter table 表名 modify column 列名 类型;  -- 类型</span><br><span class="line">alter table 表名 change 原列名 新列名 类型; -- 列名，类型</span><br><span class="line">添加主键：       </span><br><span class="line">alter table 表名 add primary key(列名);</span><br><span class="line">删除主键：         </span><br><span class="line">alter table 表名 drop primary key;</span><br><span class="line">alter table 表名  modify  列名 int, drop primary key;</span><br><span class="line">添加外键： </span><br><span class="line">alter table 从表 add constraint 外键名称（形如：FK_从表_主表） foreign key 从表(外键字段) references 主表(主键字段);</span><br><span class="line">删除外键： </span><br><span class="line">alter table 表名 drop foreign key 外键名称</span><br><span class="line">修改默认值：</span><br><span class="line">ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;</span><br><span class="line">删除默认值：</span><br><span class="line">ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;</span><br></pre></td></tr></table></figure>
<h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>MySQL的数据类型大致分为：<strong>数值、时间和字符串</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">bit[(M)]</span><br><span class="line">            二进制位（101001），m表示二进制位的长度（1-64），默认m＝1</span><br><span class="line">tinyint[(m)] [unsigned] [zerofill]</span><br><span class="line">            小整数，数据类型用于保存一些范围的整数数值范围：</span><br><span class="line">            有符号：</span><br><span class="line">                -128 ～ 127.</span><br><span class="line">            无符号：</span><br><span class="line">                0 ～ 255</span><br><span class="line">            特别的： MySQL中无布尔值，使用tinyint(1)构造。</span><br><span class="line">int[(m)][unsigned][zerofill]</span><br><span class="line">            整数，数据类型用于保存一些范围的整数数值范围：</span><br><span class="line">                有符号：</span><br><span class="line">                    -2147483648 ～ 2147483647</span><br><span class="line">                无符号：</span><br><span class="line">                    0 ～ 4294967295</span><br><span class="line">            特别的：整数类型中的m仅用于显示，对存储范围无限制。例如： int(5),当插入数据2时，select 时数据显示为：00002</span><br><span class="line">bigint[(m)][unsigned][zerofill]</span><br><span class="line">            大整数，数据类型用于保存一些范围的整数数值范围：</span><br><span class="line">                有符号：</span><br><span class="line">                    -9223372036854775808 ～ 9223372036854775807</span><br><span class="line">                无符号：</span><br><span class="line">                    0  ～  18446744073709551615</span><br><span class="line">decimal[(m[,d])] [unsigned] [zerofill]</span><br><span class="line">            准确的小数值，m是数字总个数（负号不算），d是小数点后个数。 m最大值为65，d最大值为30。</span><br><span class="line">            特别的：对于精确数值计算时需要用此类型</span><br><span class="line">                   decaimal能够存储精确值的原因在于其内部按照字符串存储。</span><br><span class="line">FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]          </span><br><span class="line">            单精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。</span><br><span class="line">                无符号：</span><br><span class="line">                    -3.402823466E+38 to -1.175494351E-38,</span><br><span class="line">                    0</span><br><span class="line">                    1.175494351E-38 to 3.402823466E+38</span><br><span class="line">                有符号：</span><br><span class="line">                    0</span><br><span class="line">                    1.175494351E-38 to 3.402823466E+38</span><br><span class="line">            **** 数值越大，越不准确 ****</span><br><span class="line">DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]</span><br><span class="line">            双精度浮点数（非准确小数值），m是数字总个数，d是小数点后个数。</span><br><span class="line">                无符号：</span><br><span class="line">                    -1.7976931348623157E+308 to -2.2250738585072014E-308</span><br><span class="line">                    0</span><br><span class="line">                    2.2250738585072014E-308 to 1.7976931348623157E+308</span><br><span class="line">                有符号：</span><br><span class="line">                    0</span><br><span class="line">                    2.2250738585072014E-308 to 1.7976931348623157E+308</span><br><span class="line">            **** 数值越大，越不准确 ****</span><br><span class="line">char (m)</span><br><span class="line">            char数据类型用于表示固定长度的字符串，可以包含最多达255个字符。其中m代表字符串的长度。</span><br><span class="line">            PS: 即使数据小于m长度，也会占用m长度          </span><br><span class="line">varchar(m)</span><br><span class="line">            varchars数据类型用于变长的字符串，可以包含最多达255个字符。其中m代表该数据类型所允许保存的字符串的最大长度，只要长度小于该最大值的字符串都可以被保存在该数据类型中。</span><br><span class="line"></span><br><span class="line">            注：虽然varchar使用起来较为灵活，但是从整个系统的性能角度来说，char数据类型的处理速度更快，有时甚至可以超出varchar处理速度的50%。因此，用户在设计数据库时应当综合考虑各方面的因素，以求达到最佳的平衡</span><br><span class="line">text</span><br><span class="line">            text数据类型用于保存变长的大字符串，可以组多到65535 (2**16 − 1)个字符。</span><br><span class="line">mediumtext</span><br><span class="line">            A TEXT column with a maximum length of 16,777,215 (2**24 − 1) characters.</span><br><span class="line">longtext</span><br><span class="line">            A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 − 1) characters.</span><br><span class="line">enum</span><br><span class="line">            枚举类型，</span><br><span class="line">            An ENUM column can have a maximum of 65,535 distinct elements. (The practical limit is less than 3000.)</span><br><span class="line">            示例：</span><br><span class="line">                CREATE TABLE shirts (</span><br><span class="line">                    name VARCHAR(40),</span><br><span class="line">                    size ENUM(&#39;x-small&#39;, &#39;small&#39;, &#39;medium&#39;, &#39;large&#39;, &#39;x-large&#39;)</span><br><span class="line">                );</span><br><span class="line">                INSERT INTO shirts (name, size) VALUES (&#39;dress shirt&#39;,&#39;large&#39;), (&#39;t-shirt&#39;,&#39;medium&#39;),(&#39;polo shirt&#39;,&#39;small&#39;);</span><br><span class="line">set</span><br><span class="line">            集合类型</span><br><span class="line">            A SET column can have a maximum of 64 distinct members.</span><br><span class="line">            示例：</span><br><span class="line">                CREATE TABLE myset (col SET(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;));</span><br><span class="line">                INSERT INTO myset (col) VALUES (&#39;a,d&#39;), (&#39;d,a&#39;), (&#39;a,d,a&#39;), (&#39;a,d,d&#39;), (&#39;d,a,d&#39;);</span><br><span class="line"></span><br><span class="line">DATE          </span><br><span class="line">            YYYY-MM-DD（1000-01-01&#x2F;9999-12-31）</span><br><span class="line">TIME</span><br><span class="line">            HH:MM:SS（&#39;-838:59:59&#39;&#x2F;&#39;838:59:59&#39;）</span><br><span class="line">YEAR</span><br><span class="line">            YYYY（1901&#x2F;2155）</span><br><span class="line">DATETIME</span><br><span class="line">            YYYY-MM-DD HH:MM:SS（1000-01-01 00:00:00&#x2F;9999-12-31 23:59:59    Y）</span><br><span class="line">TIMESTAMP</span><br><span class="line">            YYYYMMDD HHMMSS（1970-01-01 00:00:00&#x2F;2037 年某时）</span><br></pre></td></tr></table></figure>
<h2 id="MySQL表内容操作"><a href="#MySQL表内容操作" class="headerlink" title="MySQL表内容操作"></a>MySQL表内容操作</h2><p>表内容操包括<strong>增删改查</strong>，最多的是查</p>
<h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into 表 (列名,列名...) values (值,值,...)</span><br><span class="line">insert into 表 (列名,列名...) values (值,值,...),(值,值,值...)</span><br><span class="line">insert into 表 (列名,列名...) select (列名,列名...) from 表</span><br><span class="line">例：</span><br><span class="line">    insert into tab1(name,email) values(&#39;zhangyanlin&#39;,&#39;zhangyanlin8851@163.com&#39;)</span><br></pre></td></tr></table></figure>
<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from 表   # 删除表里全部数据</span><br><span class="line">delete from 表 where id＝1 and name＝&#39;zhangyanlin&#39; # 删除ID &#x3D;1 和name&#x3D;&#39;zhangyanlin&#39; 那一行数据</span><br></pre></td></tr></table></figure>
<h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update 表 set name ＝ &#39;zhangyanlin&#39; where id&gt;1</span><br></pre></td></tr></table></figure>
<h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from 表</span><br><span class="line">select * from 表 where id &gt; 1</span><br><span class="line">select nid,name,gender as gg from 表 where id &gt; 1</span><br></pre></td></tr></table></figure>
<h4 id="条件判断where"><a href="#条件判断where" class="headerlink" title="条件判断where"></a>条件判断where</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from 表 where id &gt; 1 and name !&#x3D; &#39;aylin&#39; and num &#x3D; 12;</span><br><span class="line">select * from 表 where id between 5 and 16;</span><br><span class="line">select * from 表 where id in (11,22,33)</span><br><span class="line">select * from 表 where id not in (11,22,33)</span><br><span class="line">select * from 表 where id in (select nid from 表)</span><br></pre></td></tr></table></figure>
<h4 id="通配符like"><a href="#通配符like" class="headerlink" title="通配符like"></a>通配符like</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from 表 where name like &#39;zhang%&#39;  # zhang开头的所有（多个字符串）</span><br><span class="line">select * from 表 where name like &#39;zhang_&#39;  # zhang开头的所有（一个字符）</span><br></pre></td></tr></table></figure>
<h4 id="限制limit"><a href="#限制limit" class="headerlink" title="限制limit"></a>限制limit</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from 表 limit 5;            - 前5行</span><br><span class="line">select * from 表 limit 4,5;          - 从第4行开始的5行</span><br><span class="line">select * from 表 limit 5 offset 4    - 从第4行开始的5行</span><br></pre></td></tr></table></figure>
<h4 id="排序asc，desc"><a href="#排序asc，desc" class="headerlink" title="排序asc，desc"></a>排序asc，desc</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from 表 order by 列 asc              - 根据 “列” 从小到大排列</span><br><span class="line">select * from 表 order by 列 desc             - 根据 “列” 从大到小排列</span><br><span class="line">select * from 表 order by 列1 desc,列2 asc    - 根据 “列1” 从大到小排列，如果相同则按列2从小到大排序</span><br></pre></td></tr></table></figure>
<h4 id="分组group-by"><a href="#分组group-by" class="headerlink" title="分组group by"></a>分组group by</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select num from 表 group by num</span><br><span class="line">select num,nid from 表 group by num,nid</span><br><span class="line">select num,nid from 表  where nid &gt; 10 group by num,nid order nid desc</span><br><span class="line">select num,nid,count(*),sum(score),max(score),min(score) from 表 group by num,nid</span><br><span class="line">select num from 表 group by num having max(id) &gt; 10</span><br><span class="line"></span><br><span class="line">特别的：group by 必须在where之后，order by之前</span><br></pre></td></tr></table></figure>
<p><a href="https://mp.weixin.qq.com/s/ha_tlD0H_HrrdbmoB7NlzA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/ha_tlD0H_HrrdbmoB7NlzA</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SQL/" rel="tag"># SQL</a>
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"># 数据库</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/04/hexo-next%E4%B8%BB%E9%A2%98%E8%AE%BE%E7%BD%AE/" rel="prev" title="hexo-next主题设置">
      <i class="fa fa-chevron-left"></i> hexo-next主题设置
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/07/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E5%A4%A7%E7%9B%98%E7%82%B9/" rel="next" title="数据库知识点大总结">
      数据库知识点大总结 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#结构化查询语言（SQL）"><span class="nav-text">结构化查询语言（SQL）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-是一种声明性语言"><span class="nav-text">SQL 是一种声明性语言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-的语法并不按照语法顺序执行"><span class="nav-text">SQL 的语法并不按照语法顺序执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-语言的核心是对表的引用（table-references）"><span class="nav-text">SQL 语言的核心是对表的引用（table references）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-语句中的表连接"><span class="nav-text">SQL 语句中的表连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-语句中不同的连接操作"><span class="nav-text">SQL 语句中不同的连接操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#EQUI-JOIN"><span class="nav-text">EQUI JOIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SEMI-JOIN"><span class="nav-text">SEMI JOIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ANTI-JOIN"><span class="nav-text">ANTI JOIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CROSS-JOIN"><span class="nav-text">CROSS JOIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DIVISION"><span class="nav-text">DIVISION</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-中的派生表"><span class="nav-text">SQL 中的派生表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL-语句中-GROUP-BY"><span class="nav-text">SQL 语句中 GROUP BY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL-语句中的-SELECT-实质上是对关系的映射"><span class="nav-text">SQL 语句中的 SELECT 实质上是对关系的映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DISTINCT-，-UNION-，-ORDER-BY-和-OFFSET"><span class="nav-text">DISTINCT ， UNION ， ORDER BY 和 OFFSET</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#集合运算（-DISTINCT-和-UNION-）"><span class="nav-text">集合运算（ DISTINCT 和 UNION ）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序运算（-ORDER-BY，OFFSET…FETCH）"><span class="nav-text">排序运算（ ORDER BY，OFFSET…FETCH）</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#连接数据库："><span class="nav-text">连接数据库：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看，创建，使用数据库"><span class="nav-text">查看，创建，使用数据库:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户管理"><span class="nav-text">用户管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#权限管理"><span class="nav-text">权限管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL表操作"><span class="nav-text">MySQL表操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看表"><span class="nav-text">查看表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建表"><span class="nav-text">创建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除表"><span class="nav-text">删除表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#清空表内容"><span class="nav-text">清空表内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改表"><span class="nav-text">修改表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本数据类型"><span class="nav-text">基本数据类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL表内容操作"><span class="nav-text">MySQL表内容操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增"><span class="nav-text">增</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删"><span class="nav-text">删</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#改"><span class="nav-text">改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查"><span class="nav-text">查</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#条件判断where"><span class="nav-text">条件判断where</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通配符like"><span class="nav-text">通配符like</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#限制limit"><span class="nav-text">限制limit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序asc，desc"><span class="nav-text">排序asc，desc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组group-by"><span class="nav-text">分组group by</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="QQAI"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">QQAI</p>
  <div class="site-description" itemprop="description">Home is behind, the world ahead</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QQAI</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.1
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      
<script type="text/x-mathjax-config">
    MathJax.Ajax.config.path['mhchem'] = '//cdn.jsdelivr.net/npm/mathjax-mhchem@3';

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        extensions: ['[mhchem]/mhchem.js'],
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
